!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),o=i(r),a=n(6),s=i(a);n(10),new s["default"],o["default"].history.start()},function(e,t,n){var i,r;(function(o){!function(a){var s="object"==typeof self&&self.self===self&&self||"object"==typeof o&&o.global===o&&o;i=[n(2),n(3),t],r=function(e,t,n){s.Backbone=a(s,n,e,t)}.apply(t,i),!(void 0!==r&&(e.exports=r))}(function(e,t,n,i){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,r){return n[t](this[i],c(e,this),r)};case 4:return function(e,r,o){return n[t](this[i],c(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},s=function(e,t,i){n.each(t,function(t,r){n[r]&&(e.prototype[r]=a(t,r,i))})},c=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},h=/\s+/,f=function(e,t,i,r,o){var a,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(a=n.keys(i);s<a.length;s++)t=f(e,t,a[s],i[a[s]],o)}else if(i&&h.test(i))for(a=i.split(h);s<a.length;s++)t=e(t,a[s],r,o);else t=e(t,i,r,o);return t};l.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,i,r){if(e._events=f(d,e._events||{},t,n,{context:i,ctx:e,listening:r}),r){var o=e._listeners||(e._listeners={});o[r.id]=r}return e};l.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[r];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[r]={obj:e,objId:r,id:s,listeningTo:o,count:0}}return p(e,t,i,this,a),this};var d=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return e};l.off=function(e,t,n){return this._events?(this._events=f(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:n.keys(r),a=0;a<o.length;a++){var s=r[o[a]];if(!s)break;s.obj.off(t,i,this)}return this};var m=function(e,t,i,r){if(e){var o,a=0,s=r.context,c=r.listeners;if(t||i||s){for(var u=t?[t]:n.keys(e);a<u.length;a++){t=u[a];var l=e[t];if(!l)break;for(var h=[],f=0;f<l.length;f++){var p=l[f];i&&i!==p.callback&&i!==p.callback._callback||s&&s!==p.context?h.push(p):(o=p.listening,o&&0===--o.count&&(delete c[o.id],delete o.listeningTo[o.objId]))}h.length?e[t]=h:delete e[t]}return e}for(var d=n.keys(c);a<d.length;a++)o=c[d[a]],delete c[o.id],delete o.listeningTo[o.objId]}};l.once=function(e,t,i){var r=f(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(r,t,i)},l.listenToOnce=function(e,t,i){var r=f(g,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,r)};var g=function(e,t,i,r){if(i){var o=e[t]=n.once(function(){r(t,o),i.apply(this,arguments)});o._callback=i}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return f(v,this._events,e,void 0,n),this};var v=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&y(r,i),o&&y(o,[t].concat(i))}return e},y=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,a=i.silent,s=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,l=this.changed,h=this._previousAttributes;for(var f in r)t=r[f],n.isEqual(u[f],t)||s.push(f),n.isEqual(h[f],t)?delete l[f]:l[f]=t,o?delete u[f]:u[f]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=i);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,u[s[p]],i)}if(c)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var r in e){var o=e[r];n.isEqual(t[r],o)||(i[r]=o)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;return!!t.set(r,e)&&(i&&i.call(e.context,t,n,e),void t.trigger("sync",t,n,e))},$(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var o=i.wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,s=i.success,c=this.attributes;i.success=function(e){a.attributes=c;var t=i.parse?a.parse(e,i):e;return o&&(t=n.extend({},r,t)),!(t&&!a.set(t,i))&&(s&&s.call(i.context,a,e,i),void a.trigger("sync",a,e,i))},$(this,i),r&&o&&(this.attributes=n.extend({},c,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var l=this.sync(u,this,i);return this.attributes=c,l},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&o(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):($(this,e),a=this.sync("delete",this,e)),r||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||R();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s(b,w,"attributes");var x=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},k={add:!0,remove:!0,merge:!0},T={add:!0,remove:!1},E=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),o=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;i<o;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+o+n]=r[i]};n.extend(x.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,T))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){t=n.extend({},k,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,a,s=[],c=[],u=[],l=[],h={},f=t.add,p=t.merge,d=t.remove,m=!1,g=this.comparator&&null==r&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var y=this.get(o);if(y){if(p&&o!==y){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=y.parse(b,t)),y.set(b,t),u.push(y),g&&!m&&(m=y.hasChanged(v))}h[y.cid]||(h[y.cid]=!0,s.push(y)),e[a]=y}else f&&(o=e[a]=this._prepareModel(o,t),o&&(c.push(o),this._addReference(o,t),h[o.cid]=!0,s.push(o)))}if(d){for(a=0;a<this.length;a++)o=this.models[a],h[o.cid]||l.push(o);l.length&&this._removeModels(l,t)}var w=!1,x=!g&&f&&d;if(s.length&&x?(w=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,E(this.models,s,0),this.length=this.models.length):c.length&&(g&&(m=!0),E(this.models,c,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(a=0;a<c.length;a++)null!=r&&(t.index=r+a),o=c[a],o.trigger("add",o,this,t);(m||w)&&this.trigger("sort",this,t),(c.length||l.length||u.length)&&(t.changes={added:c,removed:l,merged:u},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},$(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(e=this._prepareModel(e,t),!e)return!1;i||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,n){i&&r.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var _={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};s(x,_,"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments)},A=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(A);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,r){var o=j[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||R()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var c=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,c&&c.call(r.context,e,t,n)};var u=r.xhr=t.ajax(n.extend(a,r));return i.trigger("request",i,u,r),u};var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var I=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},O=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,N=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(I.prototype,l,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);o.execute(r,a,i)!==!1&&(o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),t.history.trigger("route",o,i,a))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(O,"(?:$1)?").replace(D,function(e,t){return t?e:"([^/?]+)"}).replace(N,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var F=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,q=/^\/+|\/+$/g,L=/#.*$/;F.started=!1,n.extend(F.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(M,"")},start:function(e){if(F.started)throw new Error("Backbone.history has already been started");if(F.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(q,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!F.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new F;var H=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};b.extend=x.extend=I.extend=C.extend=F.extend=H;var R=function(){throw new Error('A "url" property or function must be specified')},$=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t})}).call(t,function(){return this}())},function(e,t,n){var i,r;(function(){function n(e){function t(t,n,i,r,o,a){for(;o>=0&&o<a;o+=e){var s=r?r[o]:o;i=n(i,t[s],s,t)}return i}return function(n,i,r,o){i=T(i,o,4);var a=!I(n)&&k.keys(n),s=(a||n).length,c=e>0?0:s-1;return arguments.length<3&&(r=n[a?a[c]:c],c+=e),t(n,i,r,a,c,s)}}function o(e){return function(t,n,i){n=E(n,i);for(var r=j(t),o=e>0?0:r-1;o>=0&&o<r;o+=e)if(n(t[o],o,t))return o;return-1}}function a(e,t,n){return function(i,r,o){var a=0,s=j(i);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=t(d.call(i,a,s),k.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(i[o]===r)return o;return-1}}function s(e,t){var n=F.length,i=e.constructor,r=k.isFunction(i)&&i.prototype||h,o="constructor";for(k.has(e,o)&&!k.contains(t,o)&&t.push(o);n--;)o=F[n],o in e&&e[o]!==r[o]&&!k.contains(t,o)&&t.push(o)}var c=this,u=c._,l=Array.prototype,h=Object.prototype,f=Function.prototype,p=l.push,d=l.slice,m=h.toString,g=h.hasOwnProperty,v=Array.isArray,y=Object.keys,b=f.bind,w=Object.create,x=function(){},k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=k),t._=k,k.VERSION="1.8.3";var T=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},E=function(e,t,n){return null==e?k.identity:k.isFunction(e)?T(e,t,n):k.isObject(e)?k.matcher(e):k.property(e)};k.iteratee=function(e,t){return E(e,t,1/0)};var _=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=e(o),s=a.length,c=0;c<s;c++){var u=a[c];t&&void 0!==n[u]||(n[u]=o[u])}return n}},C=function(e){if(!k.isObject(e))return{};if(w)return w(e);x.prototype=e;var t=new x;return x.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},S=Math.pow(2,53)-1,j=A("length"),I=function(e){var t=j(e);return"number"==typeof t&&t>=0&&t<=S};k.each=k.forEach=function(e,t,n){t=T(t,n);var i,r;if(I(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=k.keys(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e},k.map=k.collect=function(e,t,n){t=E(t,n);for(var i=!I(e)&&k.keys(e),r=(i||e).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=t(e[s],s,e)}return o},k.reduce=k.foldl=k.inject=n(1),k.reduceRight=k.foldr=n(-1),k.find=k.detect=function(e,t,n){var i;if(i=I(e)?k.findIndex(e,t,n):k.findKey(e,t,n),void 0!==i&&i!==-1)return e[i]},k.filter=k.select=function(e,t,n){var i=[];return t=E(t,n),k.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},k.reject=function(e,t,n){return k.filter(e,k.negate(E(t)),n)},k.every=k.all=function(e,t,n){t=E(t,n);for(var i=!I(e)&&k.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0},k.some=k.any=function(e,t,n){t=E(t,n);for(var i=!I(e)&&k.keys(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1},k.contains=k.includes=k.include=function(e,t,n,i){return I(e)||(e=k.values(e)),("number"!=typeof n||i)&&(n=0),k.indexOf(e,t,n)>=0},k.invoke=function(e,t){var n=d.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matcher(t))},k.findWhere=function(e,t){return k.find(e,k.matcher(t))},k.max=function(e,t,n){var i,r,o=-(1/0),a=-(1/0);if(null==t&&null!=e){e=I(e)?e:k.values(e);for(var s=0,c=e.length;s<c;s++)i=e[s],i>o&&(o=i)}else t=E(t,n),k.each(e,function(e,n,i){r=t(e,n,i),(r>a||r===-(1/0)&&o===-(1/0))&&(o=e,a=r)});return o},k.min=function(e,t,n){var i,r,o=1/0,a=1/0;if(null==t&&null!=e){e=I(e)?e:k.values(e);for(var s=0,c=e.length;s<c;s++)i=e[s],i<o&&(o=i)}else t=E(t,n),k.each(e,function(e,n,i){r=t(e,n,i),(r<a||r===1/0&&o===1/0)&&(o=e,a=r)});return o},k.shuffle=function(e){for(var t,n=I(e)?e:k.values(e),i=n.length,r=Array(i),o=0;o<i;o++)t=k.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},k.sample=function(e,t,n){return null==t||n?(I(e)||(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))},k.sortBy=function(e,t,n){return t=E(t,n),k.pluck(k.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var O=function(e){return function(t,n,i){var r={};return n=E(n,i),k.each(t,function(i,o){var a=n(i,o,t);e(r,i,a)}),r}};k.groupBy=O(function(e,t,n){k.has(e,n)?e[n].push(t):e[n]=[t]}),k.indexBy=O(function(e,t,n){e[n]=t}),k.countBy=O(function(e,t,n){k.has(e,n)?e[n]++:e[n]=1}),k.toArray=function(e){return e?k.isArray(e)?d.call(e):I(e)?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:I(e)?e.length:k.keys(e).length},k.partition=function(e,t,n){t=E(t,n);var i=[],r=[];return k.each(e,function(e,n,o){(t(e,n,o)?i:r).push(e)}),[i,r]},k.first=k.head=k.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:k.initial(e,e.length-t)},k.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},k.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:k.rest(e,Math.max(0,e.length-t))},k.rest=k.tail=k.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var D=function(e,t,n,i){for(var r=[],o=0,a=i||0,s=j(e);a<s;a++){var c=e[a];if(I(c)&&(k.isArray(c)||k.isArguments(c))){t||(c=D(c,t,n));var u=0,l=c.length;for(r.length+=l;u<l;)r[o++]=c[u++]}else n||(r[o++]=c)}return r};k.flatten=function(e,t){return D(e,t,!1)},k.without=function(e){return k.difference(e,d.call(arguments,1))},k.uniq=k.unique=function(e,t,n,i){k.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=E(n,i));for(var r=[],o=[],a=0,s=j(e);a<s;a++){var c=e[a],u=n?n(c,a,e):c;t?(a&&o===u||r.push(c),o=u):n?k.contains(o,u)||(o.push(u),r.push(c)):k.contains(r,c)||r.push(c)}return r},k.union=function(){return k.uniq(D(arguments,!0,!0))},k.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=j(e);i<r;i++){var o=e[i];if(!k.contains(t,o)){for(var a=1;a<n&&k.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},k.difference=function(e){var t=D(arguments,!0,!0,1);return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){return k.unzip(arguments)},k.unzip=function(e){for(var t=e&&k.max(e,j).length||0,n=Array(t),i=0;i<t;i++)n[i]=k.pluck(e,i);return n},k.object=function(e,t){for(var n={},i=0,r=j(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.findIndex=o(1),k.findLastIndex=o(-1),k.sortedIndex=function(e,t,n,i){n=E(n,i,1);for(var r=n(t),o=0,a=j(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<r?o=s+1:a=s}return o},k.indexOf=a(1,k.findIndex,k.sortedIndex),k.lastIndexOf=a(-1,k.findLastIndex),k.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r};var N=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=C(e.prototype),a=e.apply(o,r);return k.isObject(a)?a:o};k.bind=function(e,t){if(b&&e.bind===b)return b.apply(e,d.call(arguments,1));if(!k.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return N(e,i,t,this,n.concat(d.call(arguments)))};return i},k.partial=function(e){var t=d.call(arguments,1),n=function(){for(var i=0,r=t.length,o=Array(r),a=0;a<r;a++)o[a]=t[a]===k?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return N(e,n,this,this,o)};return n},k.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)n=arguments[t],e[n]=k.bind(e[n],e);return e},k.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return k.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},k.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=k.partial(k.delay,k,1),k.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:k.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){var u=k.now();s||n.leading!==!1||(s=u);var l=t-(u-s);return i=this,r=arguments,l<=0||l>t?(a&&(clearTimeout(a),a=null),s=u,o=e.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(c,l)),o}},k.debounce=function(e,t,n){var i,r,o,a,s,c=function(){var u=k.now()-a;u<t&&u>=0?i=setTimeout(c,t-u):(i=null,n||(s=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=k.now();var u=n&&!i;return i||(i=setTimeout(c,t)),u&&(s=e.apply(o,r),o=r=null),s}},k.wrap=function(e,t){return k.partial(t,e)},k.negate=function(e){return function(){return!e.apply(this,arguments)}},k.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},k.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},k.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},k.once=k.partial(k.before,2);
var P=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];k.keys=function(e){if(!k.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return P&&s(e,t),t},k.allKeys=function(e){if(!k.isObject(e))return[];var t=[];for(var n in e)t.push(n);return P&&s(e,t),t},k.values=function(e){for(var t=k.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},k.mapObject=function(e,t,n){t=E(t,n);for(var i,r=k.keys(e),o=r.length,a={},s=0;s<o;s++)i=r[s],a[i]=t(e[i],i,e);return a},k.pairs=function(e){for(var t=k.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},k.invert=function(e){for(var t={},n=k.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=_(k.allKeys),k.extendOwn=k.assign=_(k.keys),k.findKey=function(e,t,n){t=E(t,n);for(var i,r=k.keys(e),o=0,a=r.length;o<a;o++)if(i=r[o],t(e[i],i,e))return i},k.pick=function(e,t,n){var i,r,o={},a=e;if(null==a)return o;k.isFunction(t)?(r=k.allKeys(a),i=T(t,n)):(r=D(arguments,!1,!1,1),i=function(e,t,n){return t in n},a=Object(a));for(var s=0,c=r.length;s<c;s++){var u=r[s],l=a[u];i(l,u,a)&&(o[u]=l)}return o},k.omit=function(e,t,n){if(k.isFunction(t))t=k.negate(t);else{var i=k.map(D(arguments,!1,!1,1),String);t=function(e,t){return!k.contains(i,t)}}return k.pick(e,t,n)},k.defaults=_(k.allKeys,!0),k.create=function(e,t){var n=C(e);return t&&k.extendOwn(n,t),n},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e},k.isMatch=function(e,t){var n=k.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0};var M=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=m.call(e);if(r!==m.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),o){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!M(e[c],t[c],n,i))return!1}else{var u,l=k.keys(e);if(c=l.length,k.keys(t).length!==c)return!1;for(;c--;)if(u=l[c],!k.has(t,u)||!M(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0};k.isEqual=function(e,t){return M(e,t)},k.isEmpty=function(e){return null==e||(I(e)&&(k.isArray(e)||k.isString(e)||k.isArguments(e))?0===e.length:0===k.keys(e).length)},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=v||function(e){return"[object Array]"===m.call(e)},k.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},k.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){k["is"+e]=function(t){return m.call(t)==="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return k.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(e){return"function"==typeof e||!1}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!==+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===m.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return null!=e&&g.call(e,t)},k.noConflict=function(){return c._=u,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.noop=function(){},k.property=A,k.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},k.matcher=k.matches=function(e){return e=k.extendOwn({},e),function(t){return k.isMatch(t,e)}},k.times=function(e,t,n){var i=Array(Math.max(0,e));t=T(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=k.invert(q),H=function(e){var t=function(t){return e[t]},n="(?:"+k.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};k.escape=H(q),k.unescape=H(L),k.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),k.isFunction(i)?i.call(e):i};var R=0;k.uniqueId=function(e){var t=++R+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,B=function(e){return"\\"+G[e]};k.template=function(e,t,n){!t&&n&&(t=n),t=k.defaults({},t,k.templateSettings);var i=RegExp([(t.escape||$).source,(t.interpolate||$).source,(t.evaluate||$).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,i,a,s){return o+=e.slice(r,s).replace(W,B),r=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var c=function(e){return a.call(this,e,k)},u=t.variable||"obj";return c.source="function("+u+"){\n"+o+"}",c},k.chain=function(e){var t=k(e);return t._chain=!0,t};var z=function(e,t){return e._chain?k(t).chain():t};k.mixin=function(e){k.each(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),z(this,n.apply(k,e))}})},k.mixin(k),k.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=l[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],z(this,n)}}),k.each(["concat","join","slice"],function(e){var t=l[e];k.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),k.prototype.value=function(){return this._wrapped},k.prototype.valueOf=k.prototype.toJSON=k.prototype.value,k.prototype.toString=function(){return""+this._wrapped},i=[],r=function(){return k}.apply(t,i),!(void 0!==r&&(e.exports=r))}).call(this)},function(e,t,n){var i,r;/*!
	 * jQuery JavaScript Library v3.1.0
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2016-07-07T21:44Z
	 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){"use strict";function a(e,t){t=t||ie;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function s(e){var t=!!e&&"length"in e&&e.length,n=ge.type(e);return"function"!==n&&!ge.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function c(e,t,n){if(ge.isFunction(t))return ge.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ge.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ce.test(t))return ge.filter(t,e,n);t=ge.filter(t,e)}return ge.grep(e,function(e){return ce.call(t,e)>-1!==n&&1===e.nodeType})}function u(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return ge.each(e.match(De)||[],function(e,n){t[n]=!0}),t}function h(e){return e}function f(e){throw e}function p(e,t,n){var i;try{e&&ge.isFunction(i=e.promise)?i.call(e).done(t).fail(n):e&&ge.isFunction(i=e.then)?i.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}function d(){ie.removeEventListener("DOMContentLoaded",d),n.removeEventListener("load",d),ge.ready()}function m(){this.expando=ge.expando+m.uid++}function g(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Re,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:He.test(n)?JSON.parse(n):n)}catch(r){}Le.set(e,t,n)}else n=void 0;return n}function v(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return ge.css(e,t,"")},c=s(),u=n&&n[3]||(ge.cssNumber[t]?"":"px"),l=(ge.cssNumber[t]||"px"!==u&&+c)&&Ge.exec(ge.css(e,t));if(l&&l[3]!==u){u=u||l[3],n=n||[],l=+c||1;do o=o||".5",l/=o,ge.style(e,t,l+u);while(o!==(o=s()/c)&&1!==o&&--a)}return n&&(l=+l||+c||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=l,i.end=r)),r}function y(e){var t,n=e.ownerDocument,i=e.nodeName,r=Ue[i];return r?r:(t=n.body.appendChild(n.createElement(i)),r=ge.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Ue[i]=r,r)}function b(e,t){for(var n,i,r=[],o=0,a=e.length;o<a;o++)i=e[o],i.style&&(n=i.style.display,t?("none"===n&&(r[o]=qe.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Be(i)&&(r[o]=y(i))):"none"!==n&&(r[o]="none",qe.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function w(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ge.nodeName(e,t)?ge.merge([e],n):n}function x(e,t){for(var n=0,i=e.length;n<i;n++)qe.set(e[n],"globalEval",!t||qe.get(t[n],"globalEval"))}function k(e,t,n,i,r){for(var o,a,s,c,u,l,h=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if(o=e[p],o||0===o)if("object"===ge.type(o))ge.merge(f,o.nodeType?[o]:o);else if(Ke.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(Ye.exec(o)||["",""])[1].toLowerCase(),c=Je[s]||Je._default,a.innerHTML=c[1]+ge.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;ge.merge(f,a.childNodes),a=h.firstChild,a.textContent=""}else f.push(t.createTextNode(o));for(h.textContent="",p=0;o=f[p++];)if(i&&ge.inArray(o,i)>-1)r&&r.push(o);else if(u=ge.contains(o.ownerDocument,o),a=w(h.appendChild(o),"script"),u&&x(a),n)for(l=0;o=a[l++];)Ve.test(o.type||"")&&n.push(o);return h}function T(){return!0}function E(){return!1}function _(){try{return ie.activeElement}catch(e){}}function C(e,t,n,i,r,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)C(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=E;else if(!r)return e;return 1===o&&(a=r,r=function(e){return ge().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ge.guid++)),e.each(function(){ge.event.add(this,t,r,i,n)})}function A(e,t){return ge.nodeName(e,"table")&&ge.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function S(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function j(e){var t=ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function I(e,t){var n,i,r,o,a,s,c,u;if(1===t.nodeType){if(qe.hasData(e)&&(o=qe.access(e),a=qe.set(t,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)ge.event.add(t,r,u[r][n])}Le.hasData(e)&&(s=Le.access(e),c=ge.extend({},s),Le.set(t,c))}}function O(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Xe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function D(e,t,n,i){t=ae.apply([],t);var r,o,s,c,u,l,h=0,f=e.length,p=f-1,d=t[0],m=ge.isFunction(d);if(m||f>1&&"string"==typeof d&&!de.checkClone&&rt.test(d))return e.each(function(r){var o=e.eq(r);m&&(t[0]=d.call(this,r,o.html())),D(o,t,n,i)});if(f&&(r=k(t,e[0].ownerDocument,!1,e,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=ge.map(w(r,"script"),S),c=s.length;h<f;h++)u=r,h!==p&&(u=ge.clone(u,!0,!0),c&&ge.merge(s,w(u,"script"))),n.call(e[h],u,h);if(c)for(l=s[s.length-1].ownerDocument,ge.map(s,j),h=0;h<c;h++)u=s[h],Ve.test(u.type||"")&&!qe.access(u,"globalEval")&&ge.contains(l,u)&&(u.src?ge._evalUrl&&ge._evalUrl(u.src):a(u.textContent.replace(at,""),l))}return e}function N(e,t,n){for(var i,r=t?ge.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||ge.cleanData(w(i)),i.parentNode&&(n&&ge.contains(i.ownerDocument,i)&&x(w(i,"script")),i.parentNode.removeChild(i));return e}function P(e,t,n){var i,r,o,a,s=e.style;return n=n||ut(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||ge.contains(e.ownerDocument,e)||(a=ge.style(e,t)),!de.pixelMarginRight()&&ct.test(a)&&st.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function F(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function M(e){if(e in dt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=pt.length;n--;)if(e=pt[n]+t,e in dt)return e}function q(e,t,n){var i=Ge.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function L(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=ge.css(e,n+We[o],!0,r)),i?("content"===n&&(a-=ge.css(e,"padding"+We[o],!0,r)),"margin"!==n&&(a-=ge.css(e,"border"+We[o]+"Width",!0,r))):(a+=ge.css(e,"padding"+We[o],!0,r),"padding"!==n&&(a+=ge.css(e,"border"+We[o]+"Width",!0,r)));return a}function H(e,t,n){var i,r=!0,o=ut(e),a="border-box"===ge.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(i=e.getBoundingClientRect()[t]),i<=0||null==i){if(i=P(e,t,o),(i<0||null==i)&&(i=e.style[t]),ct.test(i))return i;r=a&&(de.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+L(e,t,n||(a?"border":"content"),r,o)+"px"}function R(e,t,n,i,r){return new R.prototype.init(e,t,n,i,r)}function $(){gt&&(n.requestAnimationFrame($),ge.fx.tick())}function G(){return n.setTimeout(function(){mt=void 0}),mt=ge.now()}function W(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=We[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function B(e,t,n){for(var i,r=(X.tweeners[t]||[]).concat(X.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function z(e,t,n){var i,r,o,a,s,c,u,l,h="width"in t||"height"in t,f=this,p={},d=e.style,m=e.nodeType&&Be(e),g=qe.get(e,"fxshow");n.queue||(a=ge._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,ge.queue(e,"fx").length||a.empty.fire()})}));for(i in t)if(r=t[i],vt.test(r)){if(delete t[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||ge.style(e,i)}if(c=!ge.isEmptyObject(t),c||!ge.isEmptyObject(p)){h&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=g&&g.display,null==u&&(u=qe.get(e,"display")),l=ge.css(e,"display"),"none"===l&&(u?l=u:(b([e],!0),u=e.style.display||u,l=ge.css(e,"display"),b([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===ge.css(e,"float")&&(c||(f.done(function(){d.display=u}),null==u&&(l=d.display,u="none"===l?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),c=!1;for(i in p)c||(g?"hidden"in g&&(m=g.hidden):g=qe.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&b([e],!0),f.done(function(){m||b([e]),qe.remove(e,"fxshow");for(i in p)ge.style(e,i,p[i])})),c=B(m?g[i]:0,i,f),i in g||(g[i]=c.start,m&&(c.end=c.start,c.start=0))}}function U(e,t){var n,i,r,o,a;for(n in e)if(i=ge.camelCase(n),r=t[i],o=e[n],ge.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=ge.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function X(e,t,n){var i,r,o=0,a=X.prefilters.length,s=ge.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=mt||G(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,a=0,c=u.tweens.length;a<c;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),o<1&&c?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ge.extend({},t),opts:ge.extend(!0,{specialEasing:{},easing:ge.easing._default},n),originalProperties:t,originalOptions:n,startTime:mt||G(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ge.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(U(l,u.opts.specialEasing);o<a;o++)if(i=X.prefilters[o].call(u,e,l,u.opts))return ge.isFunction(i.stop)&&(ge._queueHooks(u.elem,u.opts.queue).stop=ge.proxy(i.stop,i)),i;return ge.map(l,B,u),ge.isFunction(u.opts.start)&&u.opts.start.call(e,u),ge.fx.timer(ge.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function Y(e){return e.getAttribute&&e.getAttribute("class")||""}function V(e,t,n,i){var r;if(ge.isArray(t))ge.each(t,function(t,r){n||It.test(e)?i(e,r):V(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==ge.type(t))i(e,t);else for(r in t)V(e+"["+r+"]",t[r],n,i)}function J(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(De)||[];if(ge.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function K(e,t,n,i){function r(s){var c;return o[s]=!0,ge.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||o[u]?a?!(c=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),c}var o={},a=e===Gt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function Q(e,t){var n,i,r=ge.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&ge.extend(!0,e,i),e}function Z(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}function ee(e,t,n,i){var r,o,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=u[c+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[c+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function te(e){return ge.isWindow(e)?e:9===e.nodeType&&e.defaultView}var ne=[],ie=n.document,re=Object.getPrototypeOf,oe=ne.slice,ae=ne.concat,se=ne.push,ce=ne.indexOf,ue={},le=ue.toString,he=ue.hasOwnProperty,fe=he.toString,pe=fe.call(Object),de={},me="3.1.0",ge=function(e,t){return new ge.fn.init(e,t)},ve=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ye=/^-ms-/,be=/-([a-z])/g,we=function(e,t){return t.toUpperCase()};ge.fn=ge.prototype={jquery:me,constructor:ge,length:0,toArray:function(){return oe.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:oe.call(this)},pushStack:function(e){var t=ge.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ge.each(this,e)},map:function(e){return this.pushStack(ge.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:se,sort:ne.sort,splice:ne.splice},ge.extend=ge.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||ge.isFunction(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(ge.isPlainObject(i)||(r=ge.isArray(i)))?(r?(r=!1,o=n&&ge.isArray(n)?n:[]):o=n&&ge.isPlainObject(n)?n:{},a[t]=ge.extend(u,o,i)):void 0!==i&&(a[t]=i));return a},ge.extend({expando:"jQuery"+(me+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ge.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ge.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==le.call(e))&&(!(t=re(e))||(n=he.call(t,"constructor")&&t.constructor,"function"==typeof n&&fe.call(n)===pe))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ue[le.call(e)]||"object":typeof e},globalEval:function(e){a(e)},camelCase:function(e){return e.replace(ye,"ms-").replace(be,we)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(s(e))for(n=e.length;i<n&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ve,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?ge.merge(n,"string"==typeof e?[e]:e):se.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ce.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;o<a;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,n){var i,r,o=0,a=[];if(s(e))for(i=e.length;o<i;o++)r=t(e[o],o,n),null!=r&&a.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&a.push(r);return ae.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),ge.isFunction(e))return i=oe.call(arguments,2),r=function(){return e.apply(t||this,i.concat(oe.call(arguments)))},r.guid=e.guid=e.guid||ge.guid++,r},now:Date.now,support:de}),"function"==typeof Symbol&&(ge.fn[Symbol.iterator]=ne[Symbol.iterator]),ge.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ue["[object "+t+"]"]=t.toLowerCase()});var xe=/*!
	 * Sizzle CSS Selector Engine v2.3.0
	 * https://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-01-04
	 */
function(e){function t(e,t,n,i){var r,o,a,s,c,u,l,f=t&&t.ownerDocument,d=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return n;if(!i&&((t?t.ownerDocument||t:$)!==N&&D(t),t=t||N,F)){if(11!==d&&(c=ve.exec(e)))if(r=c[1]){if(9===d){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(f&&(a=f.getElementById(r))&&H(t,a)&&a.id===r)return n.push(a),n}else{if(c[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=c[3])&&k.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(k.qsa&&!U[e+" "]&&(!M||!M.test(e))){if(1!==d)f=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(xe,ke):t.setAttribute("id",s=R),u=C(e),o=u.length;o--;)u[o]="#"+s+" "+p(u[o]);l=u.join(","),f=ye.test(e)&&h(t.parentNode)||t}if(l)try{return Q.apply(n,f.querySelectorAll(l)),n}catch(m){}finally{s===R&&t.removeAttribute("id")}}}return S(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[R]=!0,e}function r(e){var t=N.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)T.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return function(t){return"label"in t&&t.disabled===e||"form"in t&&t.disabled===e||"form"in t&&t.disabled===!1&&(t.isDisabled===e||t.isDisabled!==!e&&("label"in t||!Ee(t))!==e)}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function h(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function p(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=W++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r)}:function(t,n,c){var u,l,h,f=[G,s];if(c){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,c))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(h=t[R]||(t[R]={}),l=h[t.uniqueID]||(h[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=l[o])&&u[0]===G&&u[1]===s)return f[2]=u[2];if(l[o]=f,f[2]=e(t,n,c))return!0}}}function m(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function v(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function y(e,t,n,r,o,a){return r&&!r[R]&&(r=y(r)),o&&!o[R]&&(o=y(o,a)),i(function(i,a,s,c){var u,l,h,f=[],p=[],d=a.length,m=i||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?m:v(m,f,e,s,c),b=n?o||(i?e:d||r)?[]:a:y;if(n&&n(y,b,s,c),r)for(u=v(b,p),r(u,[],s,c),l=u.length;l--;)(h=u[l])&&(b[p[l]]=!(y[p[l]]=h));if(i){if(o||e){if(o){for(u=[],l=b.length;l--;)(h=b[l])&&u.push(y[l]=h);o(null,b=[],u,c)}for(l=b.length;l--;)(h=b[l])&&(u=o?ee(i,h):f[l])>-1&&(i[u]=!(a[u]=h))}}else b=v(b===a?b.splice(d,b.length):b),o?o(null,a,b,c):Q.apply(a,b)})}function b(e){for(var t,n,i,r=e.length,o=T.relative[e[0].type],a=o||T.relative[" "],s=o?1:0,c=d(function(e){return e===t},a,!0),u=d(function(e){return ee(t,e)>-1},a,!0),l=[function(e,n,i){var r=!o&&(i||n!==j)||((t=n).nodeType?c(e,n,i):u(e,n,i));return t=null,r}];s<r;s++)if(n=T.relative[e[s].type])l=[d(m(l),n)];else{if(n=T.filter[e[s].type].apply(null,e[s].matches),n[R]){for(i=++s;i<r&&!T.relative[e[i].type];i++);return y(s>1&&m(l),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<i&&b(e.slice(s,i)),i<r&&b(e=e.slice(i)),i<r&&p(e))}l.push(n)}return m(l)}function w(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,c,u){var l,h,f,p=0,d="0",m=i&&[],g=[],y=j,b=i||o&&T.find.TAG("*",u),w=G+=null==y?1:Math.random()||.1,x=b.length;for(u&&(j=a===N||a||u);d!==x&&null!=(l=b[d]);d++){if(o&&l){for(h=0,a||l.ownerDocument===N||(D(l),s=!F);f=e[h++];)if(f(l,a||N,s)){c.push(l);break}u&&(G=w)}r&&((l=!f&&l)&&p--,i&&m.push(l))}if(p+=d,r&&d!==p){for(h=0;f=n[h++];)f(m,g,a,s);if(i){if(p>0)for(;d--;)m[d]||g[d]||(g[d]=J.call(c));g=v(g)}Q.apply(c,g),u&&!i&&g.length>0&&p+n.length>1&&t.uniqueSort(c)}return u&&(G=w,j=y),m};return r?i(a):a}var x,k,T,E,_,C,A,S,j,I,O,D,N,P,F,M,q,L,H,R="sizzle"+1*new Date,$=e.document,G=0,W=0,B=n(),z=n(),U=n(),X=function(e,t){return e===t&&(O=!0),0},Y={}.hasOwnProperty,V=[],J=V.pop,K=V.push,Q=V.push,Z=V.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(oe),fe=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,ke=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Te=function(){D()},Ee=d(function(e){return e.disabled===!0},{dir:"parentNode",next:"legend"});try{Q.apply(V=Z.call($.childNodes),$.childNodes),V[$.childNodes.length].nodeType}catch(_e){Q={apply:V.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}k=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:$;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,P=N.documentElement,F=!_(N),$!==N&&(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),k.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=r(function(e){return e.appendChild(N.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=ge.test(N.getElementsByClassName),k.getById=r(function(e){return P.appendChild(e).id=R,!N.getElementsByName||!N.getElementsByName(R).length}),k.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&F){var n=t.getElementById(e);return n?[n]:[]}},T.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=k.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):k.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},T.find.CLASS=k.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&F)return t.getElementsByClassName(e)},q=[],M=[],(k.qsa=ge.test(N.querySelectorAll))&&(r(function(e){P.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+R+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||M.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=N.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),P.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(k.matchesSelector=ge.test(L=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){k.disconnectedMatch=L.call(e,"*"),L.call(e,"[s!='']:x"),q.push("!=",oe)}),M=M.length&&new RegExp(M.join("|")),q=q.length&&new RegExp(q.join("|")),t=ge.test(P.compareDocumentPosition),H=t||ge.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},X=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!k.sortDetached&&t.compareDocumentPosition(e)===n?e===N||e.ownerDocument===$&&H($,e)?-1:t===N||t.ownerDocument===$&&H($,t)?1:I?ee(I,e)-ee(I,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],c=[t];if(!r||!o)return e===N?-1:t===N?1:r?-1:o?1:I?ee(I,e)-ee(I,t):0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;s[i]===c[i];)i++;return i?a(s[i],c[i]):s[i]===$?-1:c[i]===$?1:0},N):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&D(e),n=n.replace(le,"='$1']"),k.matchesSelector&&F&&!U[n+" "]&&(!q||!q.test(n))&&(!M||!M.test(n)))try{var i=L.call(e,n);if(i||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&D(e),H(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&D(e);var n=T.attrHandle[t.toLowerCase()],i=n&&Y.call(T.attrHandle,t.toLowerCase())?n(e,t,!F):void 0;return void 0!==i?i:k.attributes||!F?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(xe,ke)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(O=!k.detectDuplicates,I=!k.sortStable&&e.slice(0),e.sort(X),O){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return I=null,e},E=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=E(t);return n},T=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var u,l,h,f,p,d,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s,b=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?g.firstChild:g.lastChild],a&&y){for(f=g,h=f[R]||(f[R]={}),l=h[f.uniqueID]||(h[f.uniqueID]={}),u=l[e]||[],p=u[0]===G&&u[1],b=p&&u[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||d.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[G,p,b];break}}else if(y&&(f=t,h=f[R]||(f[R]={}),l=h[f.uniqueID]||(h[f.uniqueID]={}),u=l[e]||[],p=u[0]===G&&u[1],b=p),b===!1)for(;(f=++p&&f&&f[m]||(b=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&(h=f[R]||(f[R]={}),l=h[f.uniqueID]||(h[f.uniqueID]={}),l[e]=[G,b]),f!==t)););return b-=r,b===i||b%i===0&&b/i>=0}}},PSEUDO:function(e,n){var r,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[R]?o(n):o.length>1?(r=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=ee(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=A(e.replace(se,"$1"));return r[R]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:i(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=F?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},T.pseudos.nth=T.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})T.pseudos[x]=c(x);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,C=t.tokenize=function(e,n){var i,r,o,a,s,c,u,l=z[e+" "];if(l)return n?0:l.slice(0);for(s=e,c=[],u=T.preFilter;s;){i&&!(r=ce.exec(s))||(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),s=s.slice(i.length));for(a in T.filter)!(r=pe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):z(e,c).slice(0)},A=t.compile=function(e,t){var n,i=[],r=[],o=U[e+" "];if(!o){for(t||(t=C(e)),n=t.length;n--;)o=b(t[n]),o[R]?i.push(o):r.push(o);o=U(e,w(r,i)),o.selector=e}return o},S=t.select=function(e,t,n,i){var r,o,a,s,c,u="function"==typeof e&&e,l=!i&&C(e=u.selector||e);if(n=n||[],1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&k.getById&&9===t.nodeType&&F&&T.relative[o[1].type]){if(t=(T.find.ID(a.matches[0].replace(be,we),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pe.needsContext.test(e)?0:o.length;r--&&(a=o[r],!T.relative[s=a.type]);)if((c=T.find[s])&&(i=c(a.matches[0].replace(be,we),ye.test(o[0].type)&&h(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return Q.apply(n,i),n;break}}return(u||A(e,l))(i,t,!F,n,!t||ye.test(e)&&h(t.parentNode)||t),n},k.sortStable=R.split("").sort(X).join("")===R,k.detectDuplicates=!!O,D(),k.sortDetached=r(function(e){return 1&e.compareDocumentPosition(N.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(n);ge.find=xe,ge.expr=xe.selectors,ge.expr[":"]=ge.expr.pseudos,ge.uniqueSort=ge.unique=xe.uniqueSort,ge.text=xe.getText,ge.isXMLDoc=xe.isXML,ge.contains=xe.contains,ge.escapeSelector=xe.escape;var ke=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ge(e).is(n))break;i.push(e)}return i},Te=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ee=ge.expr.match.needsContext,_e=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ce=/^.[^:#\[\.,]*$/;ge.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ge.find.matchesSelector(i,e)?[i]:[]:ge.find.matches(e,ge.grep(t,function(e){return 1===e.nodeType}))},ge.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(ge(e).filter(function(){for(t=0;t<i;t++)if(ge.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)ge.find(e,r[t],n);return i>1?ge.uniqueSort(n):n},filter:function(e){return this.pushStack(c(this,e||[],!1))},not:function(e){return this.pushStack(c(this,e||[],!0))},is:function(e){return!!c(this,"string"==typeof e&&Ee.test(e)?ge(e):e||[],!1).length}});var Ae,Se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,je=ge.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||Ae,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Se.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ge?t[0]:t,ge.merge(this,ge.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),_e.test(i[1])&&ge.isPlainObject(t))for(i in t)ge.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=ie.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ge.isFunction(e)?void 0!==n.ready?n.ready(e):e(ge):ge.makeArray(e,this)};je.prototype=ge.fn,Ae=ge(ie);var Ie=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};ge.fn.extend({has:function(e){var t=ge(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ge.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&ge(e);if(!Ee.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ge.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ge.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ce.call(ge(e),this[0]):ce.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ge.uniqueSort(ge.merge(this.get(),ge(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ge.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ke(e,"parentNode")},parentsUntil:function(e,t,n){return ke(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return ke(e,"nextSibling")},prevAll:function(e){return ke(e,"previousSibling")},nextUntil:function(e,t,n){return ke(e,"nextSibling",n)},prevUntil:function(e,t,n){return ke(e,"previousSibling",n)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return e.contentDocument||ge.merge([],e.childNodes)}},function(e,t){ge.fn[e]=function(n,i){var r=ge.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ge.filter(i,r)),this.length>1&&(Oe[e]||ge.uniqueSort(r),Ie.test(e)&&r.reverse()),this.pushStack(r)}});var De=/\S+/g;ge.Callbacks=function(e){e="string"==typeof e?l(e):ge.extend({},e);var t,n,i,r,o=[],a=[],s=-1,c=function(){for(r=e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)o[s].apply(n[0],n[1])===!1&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function i(t){ge.each(t,function(t,n){ge.isFunction(n)?e.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==ge.type(n)&&i(n)})}(arguments),n&&!t&&c()),this},remove:function(){return ge.each(arguments,function(e,t){for(var n;(n=ge.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?ge.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},ge.extend({Deferred:function(e){var t=[["notify","progress",ge.Callbacks("memory"),ge.Callbacks("memory"),2],["resolve","done",ge.Callbacks("once memory"),ge.Callbacks("once memory"),0,"resolved"],["reject","fail",ge.Callbacks("once memory"),ge.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return r.then(null,e)},pipe:function(){var e=arguments;return ge.Deferred(function(n){ge.each(t,function(t,i){var r=ge.isFunction(e[i[4]])&&e[i[4]];o[i[1]](function(){var e=r&&r.apply(this,arguments);e&&ge.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,i,r){function o(e,t,i,r){return function(){var s=this,c=arguments,u=function(){var n,u;if(!(e<a)){if(n=i.apply(s,c),n===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,ge.isFunction(u)?r?u.call(n,o(a,t,h,r),o(a,t,f,r)):(a++,u.call(n,o(a,t,h,r),o(a,t,f,r),o(a,t,h,t.notifyWith))):(i!==h&&(s=void 0,c=[n]),(r||t.resolveWith)(s,c))}},l=r?u:function(){try{u()}catch(n){ge.Deferred.exceptionHook&&ge.Deferred.exceptionHook(n,l.stackTrace),e+1>=a&&(i!==f&&(s=void 0,c=[n]),t.rejectWith(s,c))}};e?l():(ge.Deferred.getStackHook&&(l.stackTrace=ge.Deferred.getStackHook()),n.setTimeout(l))}}var a=0;return ge.Deferred(function(n){t[0][3].add(o(0,n,ge.isFunction(r)?r:h,n.notifyWith)),t[1][3].add(o(0,n,ge.isFunction(e)?e:h)),t[2][3].add(o(0,n,ge.isFunction(i)?i:f))}).promise()},promise:function(e){return null!=e?ge.extend(e,r):r}},o={};return ge.each(t,function(e,n){var a=n[2],s=n[5];r[n[1]]=a.add,s&&a.add(function(){i=s},t[3-e][2].disable,t[0][2].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=oe.call(arguments),o=ge.Deferred(),a=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?oe.call(arguments):n,--t||o.resolveWith(i,r)}};if(t<=1&&(p(e,o.done(a(n)).resolve,o.reject),"pending"===o.state()||ge.isFunction(r[n]&&r[n].then)))return o.then();for(;n--;)p(r[n],a(n),o.reject);return o.promise()}});var Ne=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ge.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Ne.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ge.readyException=function(e){n.setTimeout(function(){throw e})};var Pe=ge.Deferred();ge.fn.ready=function(e){return Pe.then(e)["catch"](function(e){ge.readyException(e)}),this},ge.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ge.readyWait++:ge.ready(!0)},ready:function(e){(e===!0?--ge.readyWait:ge.isReady)||(ge.isReady=!0,e!==!0&&--ge.readyWait>0||Pe.resolveWith(ie,[ge]))}}),ge.ready.then=Pe.then,"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll?n.setTimeout(ge.ready):(ie.addEventListener("DOMContentLoaded",d),n.addEventListener("load",d));var Fe=function(e,t,n,i,r,o,a){var s=0,c=e.length,u=null==n;if("object"===ge.type(n)){r=!0;for(s in n)Fe(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,ge.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(ge(e),n)})),t))for(;s<c;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:u?t.call(e):c?t(e[0],n):o},Me=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};m.uid=1,m.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Me(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[ge.camelCase(t)]=n;else for(i in t)r[ge.camelCase(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ge.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){ge.isArray(t)?t=t.map(ge.camelCase):(t=ge.camelCase(t),t=t in i?[t]:t.match(De)||[]),n=t.length;for(;n--;)delete i[t[n]]}(void 0===t||ge.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ge.isEmptyObject(t)}};var qe=new m,Le=new m,He=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/[A-Z]/g;ge.extend({hasData:function(e){return Le.hasData(e)||qe.hasData(e)},data:function(e,t,n){return Le.access(e,t,n)},removeData:function(e,t){Le.remove(e,t)},_data:function(e,t,n){return qe.access(e,t,n)},_removeData:function(e,t){qe.remove(e,t)}}),ge.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Le.get(o),1===o.nodeType&&!qe.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=ge.camelCase(i.slice(5)),g(o,i,r[i])));qe.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Le.set(this,e)}):Fe(this,function(t){var n;if(o&&void 0===t){if(n=Le.get(o,e),void 0!==n)return n;if(n=g(o,e),void 0!==n)return n}else this.each(function(){Le.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Le.remove(this,e)})}}),ge.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=qe.get(e,t),n&&(!i||ge.isArray(n)?i=qe.access(e,t,ge.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ge.queue(e,t),i=n.length,r=n.shift(),o=ge._queueHooks(e,t),a=function(){ge.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return qe.get(e,n)||qe.access(e,n,{empty:ge.Callbacks("once memory").add(function(){qe.remove(e,[t+"queue",n])})})}}),ge.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ge.queue(this[0],e):void 0===t?this:this.each(function(){var n=ge.queue(this,e,t);ge._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ge.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ge.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=ge.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=qe.get(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var $e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ge=new RegExp("^(?:([+-])=|)("+$e+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&ge.contains(e.ownerDocument,e)&&"none"===ge.css(e,"display")},ze=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r},Ue={};ge.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?ge(this).show():ge(this).hide()})}});var Xe=/^(?:checkbox|radio)$/i,Ye=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ve=/^$|\/(?:java|ecma)script/i,Je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td;var Ke=/<|&#?\w+;/;!function(){var e=ie.createDocumentFragment(),t=e.appendChild(ie.createElement("div")),n=ie.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),de.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",de.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue;
}();var Qe=ie.documentElement,Ze=/^key/,et=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,tt=/^([^.]*)(?:\.(.+)|)/;ge.event={global:{},add:function(e,t,n,i,r){var o,a,s,c,u,l,h,f,p,d,m,g=qe.get(e);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),r&&ge.find.matchesSelector(Qe,r),n.guid||(n.guid=ge.guid++),(c=g.events)||(c=g.events={}),(a=g.handle)||(a=g.handle=function(t){return"undefined"!=typeof ge&&ge.event.triggered!==t.type?ge.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(De)||[""],u=t.length;u--;)s=tt.exec(t[u])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p&&(h=ge.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=ge.event.special[p]||{},l=ge.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ge.expr.match.needsContext.test(r),namespace:d.join(".")},o),(f=c[p])||(f=c[p]=[],f.delegateCount=0,h.setup&&h.setup.call(e,i,d,a)!==!1||e.addEventListener&&e.addEventListener(p,a)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,l):f.push(l),ge.event.global[p]=!0)},remove:function(e,t,n,i,r){var o,a,s,c,u,l,h,f,p,d,m,g=qe.hasData(e)&&qe.get(e);if(g&&(c=g.events)){for(t=(t||"").match(De)||[""],u=t.length;u--;)if(s=tt.exec(t[u])||[],p=m=s[1],d=(s[2]||"").split(".").sort(),p){for(h=ge.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,f=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!r&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));a&&!f.length&&(h.teardown&&h.teardown.call(e,d,g.handle)!==!1||ge.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ge.event.remove(e,p+t[u],n,i,!0);ge.isEmptyObject(c)&&qe.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=ge.event.fix(e),c=new Array(arguments.length),u=(qe.get(this,"events")||{})[s.type]||[],l=ge.event.special[s.type]||{};for(c[0]=s,t=1;t<arguments.length;t++)c[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,s)!==!1){for(a=ge.event.handlers.call(this,s,u),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,i=((ge.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,c),void 0!==i&&(s.result=i)===!1&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(i=[],n=0;n<s;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?ge(r,this).index(c)>-1:ge.find(r,this,null,[c]).length),i[r]&&i.push(o);i.length&&a.push({elem:c,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},addProp:function(e,t){Object.defineProperty(ge.Event.prototype,e,{enumerable:!0,configurable:!0,get:ge.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ge.expando]?e:new ge.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===_()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ge.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ge.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ge.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ge.Event=function(e,t){return this instanceof ge.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?T:E,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ge.extend(this,t),this.timeStamp=e&&e.timeStamp||ge.now(),void(this[ge.expando]=!0)):new ge.Event(e,t)},ge.Event.prototype={constructor:ge.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=T,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=T,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=T,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ge.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ze.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&et.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ge.event.addProp),ge.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ge.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||ge.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ge.fn.extend({on:function(e,t,n,i){return C(this,e,t,n,i)},one:function(e,t,n,i){return C(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ge(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=E),this.each(function(){ge.event.remove(this,e,n,t)})}});var nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,it=/<script|<style|<link/i,rt=/checked\s*(?:[^=]|=\s*.checked.)/i,ot=/^true\/(.*)/,at=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ge.extend({htmlPrefilter:function(e){return e.replace(nt,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),c=ge.contains(e.ownerDocument,e);if(!(de.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ge.isXMLDoc(e)))for(a=w(s),o=w(e),i=0,r=o.length;i<r;i++)O(o[i],a[i]);if(t)if(n)for(o=o||w(e),a=a||w(s),i=0,r=o.length;i<r;i++)I(o[i],a[i]);else I(e,s);return a=w(s,"script"),a.length>0&&x(a,!c&&w(e,"script")),s},cleanData:function(e){for(var t,n,i,r=ge.event.special,o=0;void 0!==(n=e[o]);o++)if(Me(n)){if(t=n[qe.expando]){if(t.events)for(i in t.events)r[i]?ge.event.remove(n,i):ge.removeEvent(n,i,t.handle);n[qe.expando]=void 0}n[Le.expando]&&(n[Le.expando]=void 0)}}}),ge.fn.extend({detach:function(e){return N(this,e,!0)},remove:function(e){return N(this,e)},text:function(e){return Fe(this,function(e){return void 0===e?ge.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return D(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=A(this,e);t.appendChild(e)}})},prepend:function(){return D(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=A(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ge.cleanData(w(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ge.clone(this,e,t)})},html:function(e){return Fe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!Je[(Ye.exec(e)||["",""])[1].toLowerCase()]){e=ge.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(ge.cleanData(w(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return D(this,arguments,function(t){var n=this.parentNode;ge.inArray(this,e)<0&&(ge.cleanData(w(this)),n&&n.replaceChild(t,this))},e)}}),ge.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ge.fn[e]=function(e){for(var n,i=[],r=ge(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),ge(r[a])[t](n),se.apply(i,n.get());return this.pushStack(i)}});var st=/^margin/,ct=new RegExp("^("+$e+")(?!px)[a-z%]+$","i"),ut=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)};!function(){function e(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Qe.appendChild(a);var e=n.getComputedStyle(s);t="1%"!==e.top,o="2px"===e.marginLeft,i="4px"===e.width,s.style.marginRight="50%",r="4px"===e.marginRight,Qe.removeChild(a),s=null}}var t,i,r,o,a=ie.createElement("div"),s=ie.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",de.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ge.extend(de,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),o}}))}();var lt=/^(none|table(?!-c[ea]).+)/,ht={position:"absolute",visibility:"hidden",display:"block"},ft={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","Moz","ms"],dt=ie.createElement("div").style;ge.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=P(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=ge.camelCase(t),c=e.style;return t=ge.cssProps[s]||(ge.cssProps[s]=M(s)||s),a=ge.cssHooks[t]||ge.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t]:(o=typeof n,"string"===o&&(r=Ge.exec(n))&&r[1]&&(n=v(e,t,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(ge.cssNumber[s]?"":"px")),de.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c[t]=n)),void 0)}},css:function(e,t,n,i){var r,o,a,s=ge.camelCase(t);return t=ge.cssProps[s]||(ge.cssProps[s]=M(s)||s),a=ge.cssHooks[t]||ge.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=P(e,t,i)),"normal"===r&&t in ft&&(r=ft[t]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),ge.each(["height","width"],function(e,t){ge.cssHooks[t]={get:function(e,n,i){if(n)return!lt.test(ge.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?H(e,t,i):ze(e,ht,function(){return H(e,t,i)})},set:function(e,n,i){var r,o=i&&ut(e),a=i&&L(e,t,i,"border-box"===ge.css(e,"boxSizing",!1,o),o);return a&&(r=Ge.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=ge.css(e,t)),q(e,n,a)}}}),ge.cssHooks.marginLeft=F(de.reliableMarginLeft,function(e,t){if(t)return(parseFloat(P(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ge.each({margin:"",padding:"",border:"Width"},function(e,t){ge.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+We[i]+t]=o[i]||o[i-2]||o[0];return r}},st.test(e)||(ge.cssHooks[e+t].set=q)}),ge.fn.extend({css:function(e,t){return Fe(this,function(e,t,n){var i,r,o={},a=0;if(ge.isArray(t)){for(i=ut(e),r=t.length;a<r;a++)o[t[a]]=ge.css(e,t[a],!1,i);return o}return void 0!==n?ge.style(e,t,n):ge.css(e,t)},e,t,arguments.length>1)}}),ge.Tween=R,R.prototype={constructor:R,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||ge.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ge.cssNumber[n]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,n=R.propHooks[this.prop];return this.options.duration?this.pos=t=ge.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ge.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ge.fx.step[e.prop]?ge.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ge.cssProps[e.prop]]&&!ge.cssHooks[e.prop]?e.elem[e.prop]=e.now:ge.style(e.elem,e.prop,e.now+e.unit)}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ge.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ge.fx=R.prototype.init,ge.fx.step={};var mt,gt,vt=/^(?:toggle|show|hide)$/,yt=/queueHooks$/;ge.Animation=ge.extend(X,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return v(n.elem,e,Ge.exec(t),n),n}]},tweener:function(e,t){ge.isFunction(e)?(t=e,e=["*"]):e=e.match(De);for(var n,i=0,r=e.length;i<r;i++)n=e[i],X.tweeners[n]=X.tweeners[n]||[],X.tweeners[n].unshift(t)},prefilters:[z],prefilter:function(e,t){t?X.prefilters.unshift(e):X.prefilters.push(e)}}),ge.speed=function(e,t,n){var i=e&&"object"==typeof e?ge.extend({},e):{complete:n||!n&&t||ge.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ge.isFunction(t)&&t};return ge.fx.off||ie.hidden?i.duration=0:i.duration="number"==typeof i.duration?i.duration:i.duration in ge.fx.speeds?ge.fx.speeds[i.duration]:ge.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ge.isFunction(i.old)&&i.old.call(this),i.queue&&ge.dequeue(this,i.queue)},i},ge.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ge.isEmptyObject(e),o=ge.speed(t,n,i),a=function(){var t=X(this,ge.extend({},e),o);(r||qe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=ge.timers,a=qe.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&yt.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||ge.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=qe.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=ge.timers,a=i?i.length:0;for(n.finish=!0,ge.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ge.each(["toggle","show","hide"],function(e,t){var n=ge.fn[t];ge.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(W(t,!0),e,i,r)}}),ge.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ge.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ge.timers=[],ge.fx.tick=function(){var e,t=0,n=ge.timers;for(mt=ge.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ge.fx.stop(),mt=void 0},ge.fx.timer=function(e){ge.timers.push(e),e()?ge.fx.start():ge.timers.pop()},ge.fx.interval=13,ge.fx.start=function(){gt||(gt=n.requestAnimationFrame?n.requestAnimationFrame($):n.setInterval(ge.fx.tick,ge.fx.interval))},ge.fx.stop=function(){n.cancelAnimationFrame?n.cancelAnimationFrame(gt):n.clearInterval(gt),gt=null},ge.fx.speeds={slow:600,fast:200,_default:400},ge.fn.delay=function(e,t){return e=ge.fx?ge.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}})},function(){var e=ie.createElement("input"),t=ie.createElement("select"),n=t.appendChild(ie.createElement("option"));e.type="checkbox",de.checkOn=""!==e.value,de.optSelected=n.selected,e=ie.createElement("input"),e.value="t",e.type="radio",de.radioValue="t"===e.value}();var bt,wt=ge.expr.attrHandle;ge.fn.extend({attr:function(e,t){return Fe(this,ge.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ge.removeAttr(this,e)})}}),ge.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ge.prop(e,t,n):(1===o&&ge.isXMLDoc(e)||(r=ge.attrHooks[t.toLowerCase()]||(ge.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void ge.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ge.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!de.radioValue&&"radio"===t&&ge.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(De);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return t===!1?ge.removeAttr(e,n):e.setAttribute(n,n),n}},ge.each(ge.expr.match.bool.source.match(/\w+/g),function(e,t){var n=wt[t]||ge.find.attr;wt[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=wt[a],wt[a]=r,r=null!=n(e,t,i)?a:null,wt[a]=o),r}});var xt=/^(?:input|select|textarea|button)$/i,kt=/^(?:a|area)$/i;ge.fn.extend({prop:function(e,t){return Fe(this,ge.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ge.propFix[e]||e]})}}),ge.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ge.isXMLDoc(e)||(t=ge.propFix[t]||t,r=ge.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ge.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),de.optSelected||(ge.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ge.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ge.propFix[this.toLowerCase()]=this});var Tt=/[\t\r\n\f]/g;ge.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,c=0;if(ge.isFunction(e))return this.each(function(t){ge(this).addClass(e.call(this,t,Y(this)))});if("string"==typeof e&&e)for(t=e.match(De)||[];n=this[c++];)if(r=Y(n),i=1===n.nodeType&&(" "+r+" ").replace(Tt," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=ge.trim(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,c=0;if(ge.isFunction(e))return this.each(function(t){ge(this).removeClass(e.call(this,t,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(De)||[];n=this[c++];)if(r=Y(n),i=1===n.nodeType&&(" "+r+" ").replace(Tt," ")){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=ge.trim(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ge.isFunction(e)?this.each(function(n){ge(this).toggleClass(e.call(this,n,Y(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=ge(this),o=e.match(De)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=Y(this),t&&qe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":qe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Y(n)+" ").replace(Tt," ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g,_t=/[\x20\t\r\n\f]+/g;ge.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=ge.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,ge(this).val()):e,null==r?r="":"number"==typeof r?r+="":ge.isArray(r)&&(r=ge.map(r,function(e){return null==e?"":e+""})),t=ge.valHooks[this.type]||ge.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=ge.valHooks[r.type]||ge.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(Et,""):null==n?"":n)}}}),ge.extend({valHooks:{option:{get:function(e){var t=ge.find.attr(e,"value");return null!=t?t:ge.trim(ge.text(e)).replace(_t," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type,a=o?null:[],s=o?r+1:i.length,c=r<0?s:o?r:0;c<s;c++)if(n=i[c],(n.selected||c===r)&&!n.disabled&&(!n.parentNode.disabled||!ge.nodeName(n.parentNode,"optgroup"))){if(t=ge(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=ge.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=ge.inArray(ge.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ge.each(["radio","checkbox"],function(){ge.valHooks[this]={set:function(e,t){if(ge.isArray(t))return e.checked=ge.inArray(ge(e).val(),t)>-1}},de.checkOn||(ge.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ct=/^(?:focusinfocus|focusoutblur)$/;ge.extend(ge.event,{trigger:function(e,t,i,r){var o,a,s,c,u,l,h,f=[i||ie],p=he.call(e,"type")?e.type:e,d=he.call(e,"namespace")?e.namespace.split("."):[];if(a=s=i=i||ie,3!==i.nodeType&&8!==i.nodeType&&!Ct.test(p+ge.event.triggered)&&(p.indexOf(".")>-1&&(d=p.split("."),p=d.shift(),d.sort()),u=p.indexOf(":")<0&&"on"+p,e=e[ge.expando]?e:new ge.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:ge.makeArray(t,[e]),h=ge.event.special[p]||{},r||!h.trigger||h.trigger.apply(i,t)!==!1)){if(!r&&!h.noBubble&&!ge.isWindow(i)){for(c=h.delegateType||p,Ct.test(c+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(i.ownerDocument||ie)&&f.push(s.defaultView||s.parentWindow||n)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)e.type=o>1?c:h.bindType||p,l=(qe.get(a,"events")||{})[e.type]&&qe.get(a,"handle"),l&&l.apply(a,t),l=u&&a[u],l&&l.apply&&Me(a)&&(e.result=l.apply(a,t),e.result===!1&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),t)!==!1||!Me(i)||u&&ge.isFunction(i[p])&&!ge.isWindow(i)&&(s=i[u],s&&(i[u]=null),ge.event.triggered=p,i[p](),ge.event.triggered=void 0,s&&(i[u]=s)),e.result}},simulate:function(e,t,n){var i=ge.extend(new ge.Event,n,{type:e,isSimulated:!0});ge.event.trigger(i,null,t)}}),ge.fn.extend({trigger:function(e,t){return this.each(function(){ge.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ge.event.trigger(e,t,n,!0)}}),ge.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ge.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ge.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),de.focusin="onfocusin"in n,de.focusin||ge.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ge.event.simulate(t,e.target,ge.event.fix(e))};ge.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=qe.access(i,t);r||i.addEventListener(e,n,!0),qe.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=qe.access(i,t)-1;r?qe.access(i,t,r):(i.removeEventListener(e,n,!0),qe.remove(i,t))}}});var At=n.location,St=ge.now(),jt=/\?/;ge.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(i){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ge.error("Invalid XML: "+e),t};var It=/\[\]$/,Ot=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;ge.param=function(e,t){var n,i=[],r=function(e,t){var n=ge.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(ge.isArray(e)||e.jquery&&!ge.isPlainObject(e))ge.each(e,function(){r(this.name,this.value)});else for(n in e)V(n,e[n],t,r);return i.join("&")},ge.fn.extend({serialize:function(){return ge.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ge.prop(this,"elements");return e?ge.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ge(this).is(":disabled")&&Nt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!Xe.test(e))}).map(function(e,t){var n=ge(this).val();return null==n?null:ge.isArray(n)?ge.map(n,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}});var Pt=/%20/g,Ft=/#.*$/,Mt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Rt=/^\/\//,$t={},Gt={},Wt="*/".concat("*"),Bt=ie.createElement("a");Bt.href=At.href,ge.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:Lt.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ge.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Q(Q(e,ge.ajaxSettings),t):Q(ge.ajaxSettings,e)},ajaxPrefilter:J($t),ajaxTransport:J(Gt),ajax:function(e,t){function i(e,t,i,s){var u,f,p,w,x,k=t;l||(l=!0,c&&n.clearTimeout(c),r=void 0,a=s||"",T.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(w=Z(d,T,i)),w=ee(d,w,T,u),u?(d.ifModified&&(x=T.getResponseHeader("Last-Modified"),x&&(ge.lastModified[o]=x),x=T.getResponseHeader("etag"),x&&(ge.etag[o]=x)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=w.state,f=w.data,p=w.error,u=!p)):(p=k,!e&&k||(k="error",e<0&&(e=0))),T.status=e,T.statusText=(t||k)+"",u?v.resolveWith(m,[f,k,T]):v.rejectWith(m,[T,k,p]),T.statusCode(b),b=void 0,h&&g.trigger(u?"ajaxSuccess":"ajaxError",[T,d,u?f:p]),y.fireWith(m,[T,k]),h&&(g.trigger("ajaxComplete",[T,d]),--ge.active||ge.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,a,s,c,u,l,h,f,p,d=ge.ajaxSetup({},t),m=d.context||d,g=d.context&&(m.nodeType||m.jquery)?ge(m):ge.event,v=ge.Deferred(),y=ge.Callbacks("once memory"),b=d.statusCode||{},w={},x={},k="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=qt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||k;return r&&r.abort(t),i(0,t),this}};if(v.promise(T),d.url=((e||d.url||At.href)+"").replace(Rt,At.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(De)||[""],null==d.crossDomain){u=ie.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Bt.protocol+"//"+Bt.host!=u.protocol+"//"+u.host}catch(E){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ge.param(d.data,d.traditional)),K($t,d,t,T),l)return T;h=ge.event&&d.global,h&&0===ge.active++&&ge.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ht.test(d.type),o=d.url.replace(Ft,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Pt,"+")):(p=d.url.slice(o.length),d.data&&(o+=(jt.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(o=o.replace(Mt,""),p=(jt.test(o)?"&":"?")+"_="+St++ +p),d.url=o+p),d.ifModified&&(ge.lastModified[o]&&T.setRequestHeader("If-Modified-Since",ge.lastModified[o]),ge.etag[o]&&T.setRequestHeader("If-None-Match",ge.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&T.setRequestHeader("Content-Type",d.contentType),T.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Wt+"; q=0.01":""):d.accepts["*"]);for(f in d.headers)T.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(d.beforeSend.call(m,T,d)===!1||l))return T.abort();if(k="abort",y.add(d.complete),T.done(d.success),T.fail(d.error),r=K(Gt,d,t,T)){if(T.readyState=1,h&&g.trigger("ajaxSend",[T,d]),l)return T;d.async&&d.timeout>0&&(c=n.setTimeout(function(){T.abort("timeout")},d.timeout));try{l=!1,r.send(w,i)}catch(E){if(l)throw E;i(-1,E)}}else i(-1,"No Transport");return T},getJSON:function(e,t,n){return ge.get(e,t,n,"json")},getScript:function(e,t){return ge.get(e,void 0,t,"script")}}),ge.each(["get","post"],function(e,t){ge[t]=function(e,n,i,r){return ge.isFunction(n)&&(r=r||i,i=n,n=void 0),ge.ajax(ge.extend({url:e,type:t,dataType:r,data:n,success:i},ge.isPlainObject(e)&&e))}}),ge._evalUrl=function(e){return ge.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ge.fn.extend({wrapAll:function(e){var t;return this[0]&&(ge.isFunction(e)&&(e=e.call(this[0])),t=ge(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ge.isFunction(e)?this.each(function(t){ge(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ge(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ge.isFunction(e);return this.each(function(n){ge(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ge(this).replaceWith(this.childNodes)}),this}}),ge.expr.pseudos.hidden=function(e){return!ge.expr.pseudos.visible(e)},ge.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ge.ajaxSettings.xhr=function(){
try{return new n.XMLHttpRequest}catch(e){}};var zt={0:200,1223:204},Ut=ge.ajaxSettings.xhr();de.cors=!!Ut&&"withCredentials"in Ut,de.ajax=Ut=!!Ut,ge.ajaxTransport(function(e){var t,i;if(de.cors||Ut&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(zt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=t("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&i()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(c){if(t)throw c}},abort:function(){t&&t()}}}),ge.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ge.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ge.globalEval(e),e}}}),ge.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ge.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=ge("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),ie.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Xt=[],Yt=/(=)\?(?=&|$)|\?\?/;ge.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||ge.expando+"_"+St++;return this[e]=!0,e}}),ge.ajaxPrefilter("json jsonp",function(e,t,i){var r,o,a,s=e.jsonp!==!1&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ge.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Yt,"$1"+r):e.jsonp!==!1&&(e.url+=(jt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||ge.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=n[r],n[r]=function(){a=arguments},i.always(function(){void 0===o?ge(n).removeProp(r):n[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),a&&ge.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),de.createHTMLDocument=function(){var e=ie.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ge.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,r,o;return t||(de.createHTMLDocument?(t=ie.implementation.createHTMLDocument(""),i=t.createElement("base"),i.href=ie.location.href,t.head.appendChild(i)):t=ie),r=_e.exec(e),o=!n&&[],r?[t.createElement(r[1])]:(r=k([e],t,o),o&&o.length&&ge(o).remove(),ge.merge([],r.childNodes))},ge.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=ge.trim(e.slice(s)),e=e.slice(0,s)),ge.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&ge.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?ge("<div>").append(ge.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ge.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ge.fn[t]=function(e){return this.on(t,e)}}),ge.expr.pseudos.animated=function(e){return ge.grep(ge.timers,function(t){return e===t.elem}).length},ge.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,u,l=ge.css(e,"position"),h=ge(e),f={};"static"===l&&(e.style.position="relative"),s=h.offset(),o=ge.css(e,"top"),c=ge.css(e,"left"),u=("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1,u?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),ge.isFunction(t)&&(t=t.call(e,n,ge.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+r),"using"in t?t.using.call(e,f):h.css(f)}},ge.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ge.offset.setOffset(this,e,t)});var t,n,i,r,o=this[0];if(o)return o.getClientRects().length?(i=o.getBoundingClientRect(),i.width||i.height?(r=o.ownerDocument,n=te(r),t=r.documentElement,{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):{top:0,left:0}},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ge.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ge.nodeName(e[0],"html")||(i=e.offset()),i={top:i.top+ge.css(e[0],"borderTopWidth",!0),left:i.left+ge.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-ge.css(n,"marginTop",!0),left:t.left-i.left-ge.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ge.css(e,"position");)e=e.offsetParent;return e||Qe})}}),ge.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ge.fn[e]=function(i){return Fe(this,function(e,i,r){var o=te(e);return void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),ge.each(["top","left"],function(e,t){ge.cssHooks[t]=F(de.pixelPosition,function(e,n){if(n)return n=P(e,t),ct.test(n)?ge(e).position()[t]+"px":n})}),ge.each({Height:"height",Width:"width"},function(e,t){ge.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ge.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||o===!0?"margin":"border");return Fe(this,function(t,n,r){var o;return ge.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?ge.css(t,n,s):ge.style(t,n,r,s)},t,a?r:void 0,a)}})}),ge.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ge.parseJSON=JSON.parse,i=[],r=function(){return ge}.apply(t,i),!(void 0!==r&&(e.exports=r));var Vt=n.jQuery,Jt=n.$;return ge.noConflict=function(e){return n.$===ge&&(n.$=Jt),e&&n.jQuery===ge&&(n.jQuery=Vt),ge},o||(n.jQuery=n.$=ge),ge})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(2),h=i(l),f=n(5),p=i(f),d=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"initialize",value:function(){this.model=p["default"]}},{key:"getUnviewedEntryID",value:function(){var e=this.where({viewed:!1});return e.length>0?h["default"].sample(e).get("id"):(this.each(function(e){e.set("viewed",!1)}),this.sample().get("id"))}}]),t}(u["default"].Collection);t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"initialize",value:function(){this.set({urlFriendlyTitle:this.convertToSlug(this.get("title"))}),this.parseTitle()}},{key:"defaults",value:function(){return{viewed:!1}}},{key:"parseTitle",value:function(){this.titleContainsParenthesis(this.get("title"))&&this.set("title",this.wrapTitleParenthesisInSpans(this.get("title")))}},{key:"convertToSlug",value:function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}},{key:"titleContainsParenthesis",value:function(e){return e.indexOf("(")>-1||e.indexOf(")")>-1}},{key:"wrapTitleParenthesisInSpans",value:function(e){return e.replace("(","<span>(").replace(")",")</span>")}}]),t}(u["default"].Model);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(3),h=i(l),f=n(2),p=i(f),d=n(9),m=i(d),g=n(4),v=i(g),y=n(7),b=i(y),w=n(8),x=i(w),k=n(11),T=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.routes={"entry/:id(/:title)":"showEntry","*actions":"showRandomEntry"},e._bindRoutes(),e}return a(t,e),s(t,[{key:"initialize",value:function(){this.initialFragment=null,this.$entryEl=(0,h["default"])("#entry"),this.loader=new m["default"],this.entries=new v["default"](JSON.parse(k.all));var e=new b["default"]({collection:this.entries});this.listenTo(e,"routeToUnviewedEntry",this.showEntry),this.listenTo(e,"navigateBackwards",this.navigateBackwards)}},{key:"showRandomEntry",value:function(){var e=this.entries.getUnviewedEntryID();this.showEntry(e)}},{key:"showEntry",value:function(e){this.loader.$el.is(":visible")&&this.loader.trigger("hide");var t=this.entries.findWhere({id:parseInt(e)});return p["default"].isUndefined(t)?void this.showRandomEntry():(this.navigate("entry/"+e+"/"+t.get("urlFriendlyTitle"),{trigger:!0}),this.initialFragment||(this.initialFragment=u["default"].history.getFragment()),void(this.entryView=new x["default"]({model:t,container:this.$entryEl}).render()))}},{key:"navigateBackwards",value:function(){this.initialFragment!==u["default"].history.getFragment()&&window.history.back()}}]),t}(u["default"].Router);t["default"]=T},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(3),h=i(l),f=n(2),p=i(f),d=n(12),m=i(d),g=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{el:"body",collection:e.collection,events:{click:"renderRandomEntry",keydown:"handleKeyboardEvent"}}))}return a(t,e),s(t,[{key:"initialize",value:function(){var e=new m["default"](this.$el.get(0));e.on("swiperight swipeleft",this.handleMobileEvent)}},{key:"renderRandomEntry",value:function(e){if(!e||!(0,h["default"])(e.target).is("a")){var t=this.collection.getUnviewedEntryID();this.trigger("routeToUnviewedEntry",t)}}},{key:"handleKeyboardEvent",value:function(e){e.preventDefault();var t=[37,72],n=[39,76],i=[32];if(p["default"].contains(p["default"].union(t,n,i),e.keyCode)){var r=p["default"].contains(n,e.keyCode)||i===e.keyCode&&!e.shiftKey;this.moveToEntry(r)}}},{key:"handleMobileEvent",value:function(e){e.preventDefault();var t="swipeleft"===e.type;this.moveToEntry(t)}},{key:"moveToEntry",value:function(e){e?this.renderRandomEntry():this.trigger("navigateBackwards")}}]),t}(u["default"].View);t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(3),h=i(l),f=n(2),p=i(f),d=n(14),m=i(d),g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{el:"#entry",model:e.model,container:e.container,events:{"click .social-links a":"socialShare"}}));return n.template=p["default"].template(m["default"]),n}return a(t,e),s(t,[{key:"initialize",value:function(e){this.listenTo(this.model,"change",this.render),this.CSSanimationClasses="flipInX animated",this.container=e.container,this.animateView()}},{key:"render",value:function(){return this.model.set("viewed",!0),this.$el.html(this.template(this.model.toJSON())),this}},{key:"animateView",value:function(){this.container.addClass(this.CSSanimationClasses)}},{key:"socialShare",value:function(e){e.preventDefault();var t=575,n=400,i=((0,h["default"])(window).width()-t)/2,r=((0,h["default"])(window).height()-n)/2,o=(0,h["default"])(e.target).attr("href"),a="status=1,width="+t+",height="+n+",top="+r+",left="+i;window.open(o,"Share",a)}}]),t}(u["default"].View);t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{el:".loader"}))}return a(t,e),s(t,[{key:"initialize",value:function(){var e=this;this.listenTo(this,"hide",function(){e.$el.hide()})}}]),t}(u["default"].View);t["default"]=l},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEntry=t.random=t.all=void 0;var r=n(15),o=i(r),a=n(13),s=i(a);t.all=s["default"],t.random=(0,o["default"])(s["default"]),t.getEntry=function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=s["default"][e-1];if(!t)throw new Error("Invalid ID");return t}},function(e,t,n){var i;/*! Hammer.JS - v2.0.7 - 2016-04-22
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */
!function(r,o,a,s){"use strict";function c(e,t,n){return setTimeout(p(e,n),t)}function u(e,t,n){return!!Array.isArray(e)&&(l(e,n[t],n),!0)}function l(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==s)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function h(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),e.apply(this,arguments)}}function f(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&me(i,n)}function p(e,t){return function(){return e.apply(t,arguments)}}function d(e,t){return typeof e==ye?e.apply(t?t[0]||s:s,t):e}function m(e,t){return e===s?t:e}function g(e,t,n){l(w(t),function(t){e.addEventListener(t,n,!1)})}function v(e,t,n){l(w(t),function(t){e.removeEventListener(t,n,!1)})}function y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function b(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function x(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function k(e){return Array.prototype.slice.call(e,0)}function T(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];x(r,a)<0&&i.push(e[o]),r[o]=a,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function E(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<ge.length;){if(n=ge[o],i=n?n+r:t,i in e)return i;o++}return s}function _(){return Ee++}function C(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}function A(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&n.handler(t)},this.init()}function S(e){var t,n=e.options.inputClass;return new(t=n?n:Ae?G:Se?z:Ce?X:$)(e,j)}function j(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&Pe&&i-r===0,a=t&(Me|qe)&&i-r===0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,I(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function I(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=N(t)),r>1&&!n.firstMultiple?n.firstMultiple=N(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,c=t.center=P(i);t.timeStamp=xe(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=L(s,c),t.distance=q(s,c),O(n,t),t.offsetDirection=M(t.deltaX,t.deltaY);var u=F(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=we(u.x)>we(u.y)?u.x:u.y,t.scale=a?R(a.pointers,i):1,t.rotation=a?H(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,D(n,t);var l=e.element;y(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function O(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==Pe&&o.eventType!==Me||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function D(e,t){var n,i,r,o,a=e.lastInterval||t,c=t.timeStamp-a.timeStamp;if(t.eventType!=qe&&(c>Ne||a.velocity===s)){var u=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,h=F(c,u,l);i=h.x,r=h.y,n=we(h.x)>we(h.y)?h.x:h.y,o=M(u,l),e.lastInterval=t}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}function N(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:be(e.pointers[n].clientX),clientY:be(e.pointers[n].clientY)},n++;return{timeStamp:xe(),pointers:t,center:P(t),deltaX:e.deltaX,deltaY:e.deltaY}}function P(e){var t=e.length;if(1===t)return{x:be(e[0].clientX),y:be(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:be(n/t),y:be(i/t)}}function F(e,t,n){return{x:t/e||0,y:n/e||0}}function M(e,t){return e===t?Le:we(e)>=we(t)?e<0?He:Re:t<0?$e:Ge}function q(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function L(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function H(e,t){return L(t[1],t[0],Xe)+L(e[1],e[0],Xe)}function R(e,t){return q(t[0],t[1],Xe)/q(e[0],e[1],Xe)}function $(){this.evEl=Ve,this.evWin=Je,this.pressed=!1,A.apply(this,arguments)}function G(){this.evEl=Ze,this.evWin=et,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=nt,this.evWin=it,this.started=!1,A.apply(this,arguments)}function B(e,t){var n=k(e.touches),i=k(e.changedTouches);return t&(Me|qe)&&(n=T(n.concat(i),"identifier",!0)),[n,i]}function z(){this.evTarget=ot,this.targetIds={},A.apply(this,arguments)}function U(e,t){var n=k(e.touches),i=this.targetIds;if(t&(Pe|Fe)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=k(e.changedTouches),s=[],c=this.target;if(o=n.filter(function(e){return y(e.target,c)}),t===Pe)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(Me|qe)&&delete i[a[r].identifier],r++;return s.length?[T(o.concat(s),"identifier",!0),s]:void 0}function X(){A.apply(this,arguments);var e=p(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new $(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Y(e,t){e&Pe?(this.primaryTouch=t.changedPointers[0].identifier,V.call(this,t)):e&(Me|qe)&&V.call(this,t)}function V(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,at)}}function J(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(o<=st&&a<=st)return!0}return!1}function K(e,t){this.manager=e,this.set(t)}function Q(e){if(b(e,pt))return pt;var t=b(e,dt),n=b(e,mt);return t&&n?pt:t||n?t?dt:mt:b(e,ft)?ft:ht}function Z(){if(!ut)return!1;var e={},t=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||r.CSS.supports("touch-action",n)}),e}function ee(e){this.options=me({},this.defaults,e||{}),this.id=_(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=vt,this.simultaneous={},this.requireFail=[]}function te(e){return e&kt?"cancel":e&wt?"end":e&bt?"move":e&yt?"start":""}function ne(e){return e==Ge?"down":e==$e?"up":e==He?"left":e==Re?"right":""}function ie(e,t){var n=t.manager;return n?n.get(e):e}function re(){ee.apply(this,arguments)}function oe(){re.apply(this,arguments),this.pX=null,this.pY=null}function ae(){re.apply(this,arguments)}function se(){ee.apply(this,arguments),this._timer=null,this._input=null}function ce(){re.apply(this,arguments)}function ue(){re.apply(this,arguments)}function le(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function he(e,t){return t=t||{},t.recognizers=m(t.recognizers,he.defaults.preset),new fe(e,t)}function fe(e,t){this.options=me({},he.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=S(this),this.touchAction=new K(this,this.options.touchAction),pe(this,!0),l(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pe(e,t){var n=e.element;if(n.style){var i;l(e.options.cssProps,function(r,o){i=E(n.style,o),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function de(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var me,ge=["","webkit","Moz","MS","ms","o"],ve=o.createElement("div"),ye="function",be=Math.round,we=Math.abs,xe=Date.now;me="function"!=typeof Object.assign?function(e){if(e===s||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==s&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var ke=h(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===s)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),Te=h(function(e,t){return ke(e,t,!0)},"merge","Use `assign`."),Ee=1,_e=/mobile|tablet|ip(ad|hone|od)|android/i,Ce="ontouchstart"in r,Ae=E(r,"PointerEvent")!==s,Se=Ce&&_e.test(navigator.userAgent),je="touch",Ie="pen",Oe="mouse",De="kinect",Ne=25,Pe=1,Fe=2,Me=4,qe=8,Le=1,He=2,Re=4,$e=8,Ge=16,We=He|Re,Be=$e|Ge,ze=We|Be,Ue=["x","y"],Xe=["clientX","clientY"];A.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(C(this.element),this.evWin,this.domHandler)}};var Ye={mousedown:Pe,mousemove:Fe,mouseup:Me},Ve="mousedown",Je="mousemove mouseup";f($,A,{handler:function(e){var t=Ye[e.type];t&Pe&&0===e.button&&(this.pressed=!0),t&Fe&&1!==e.which&&(t=Me),this.pressed&&(t&Me&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Oe,srcEvent:e}))}});var Ke={pointerdown:Pe,pointermove:Fe,pointerup:Me,pointercancel:qe,pointerout:qe},Qe={2:je,3:Ie,4:Oe,5:De},Ze="pointerdown",et="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Ze="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),f(G,A,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Ke[i],o=Qe[e.pointerType]||e.pointerType,a=o==je,s=x(t,e.pointerId,"pointerId");r&Pe&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):r&(Me|qe)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var tt={touchstart:Pe,touchmove:Fe,touchend:Me,touchcancel:qe},nt="touchstart",it="touchstart touchmove touchend touchcancel";f(W,A,{handler:function(e){var t=tt[e.type];if(t===Pe&&(this.started=!0),this.started){var n=B.call(this,e,t);t&(Me|qe)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:je,srcEvent:e})}}});var rt={touchstart:Pe,touchmove:Fe,touchend:Me,touchcancel:qe},ot="touchstart touchmove touchend touchcancel";f(z,A,{handler:function(e){var t=rt[e.type],n=U.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:je,srcEvent:e})}});var at=2500,st=25;f(X,A,{handler:function(e,t,n){var i=n.pointerType==je,r=n.pointerType==Oe;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Y.call(this,t,n);else if(r&&J.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ct=E(ve.style,"touchAction"),ut=ct!==s,lt="compute",ht="auto",ft="manipulation",pt="none",dt="pan-x",mt="pan-y",gt=Z();K.prototype={set:function(e){e==lt&&(e=this.compute()),ut&&this.manager.element.style&&gt[e]&&(this.manager.element.style[ct]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return l(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Q(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=b(i,pt)&&!gt[pt],o=b(i,mt)&&!gt[mt],a=b(i,dt)&&!gt[dt];if(r){var s=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(s&&c&&u)return}return a&&o?void 0:r||o&&n&We||a&&n&Be?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var vt=1,yt=2,bt=4,wt=8,xt=wt,kt=16,Tt=32;ee.prototype={defaults:{},set:function(e){return me(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(u(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ie(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return u(e,"dropRecognizeWith",this)?this:(e=ie(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(u(e,"requireFailure",this))return this;var t=this.requireFail;return e=ie(e,this),x(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(u(e,"dropRequireFailure",this))return this;e=ie(e,this);var t=x(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;i<wt&&t(n.options.event+te(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=wt&&t(n.options.event+te(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=Tt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Tt|vt)))return!1;e++}return!0},recognize:function(e){var t=me({},e);return d(this.options.enable,[this,t])?(this.state&(xt|kt|Tt)&&(this.state=vt),this.state=this.process(t),void(this.state&(yt|bt|wt|kt)&&this.tryEmit(t))):(this.reset(),void(this.state=Tt))},process:function(e){},getTouchAction:function(){},reset:function(){}},f(re,ee,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(yt|bt),r=this.attrTest(e);return i&&(n&qe||!r)?t|kt:i||r?n&Me?t|wt:t&yt?t|bt:yt:Tt}}),f(oe,re,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var e=this.options.direction,t=[];return e&We&&t.push(mt),e&Be&&t.push(dt),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(t.direction&We?(r=0===o?Le:o<0?He:Re,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===a?Le:a<0?$e:Ge,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return re.prototype.attrTest.call(this,e)&&(this.state&yt||!(this.state&yt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ne(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(ae,re,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[pt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&yt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(se,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ht]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Me|qe)&&!r)this.reset();else if(e.eventType&Pe)this.reset(),this._timer=c(function(){this.state=xt,this.tryEmit()},t.time,this);else if(e.eventType&Me)return xt;return Tt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===xt&&(e&&e.eventType&Me?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=xe(),this.manager.emit(this.options.event,this._input)))}}),f(ce,re,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[pt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&yt)}}),f(ue,re,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:We|Be,pointers:1},getTouchAction:function(){return oe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(We|Be)?t=e.overallVelocity:n&We?t=e.overallVelocityX:n&Be&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&we(t)>this.options.velocity&&e.eventType&Me},emit:function(e){var t=ne(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(le,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ft]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&Pe&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=Me)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||q(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e;var s=this.count%t.taps;if(0===s)return this.hasRequireFailures()?(this._timer=c(function(){this.state=xt,this.tryEmit()},t.interval,this),yt):xt}return Tt},failTimeout:function(){return this._timer=c(function(){this.state=Tt},this.options.interval,this),Tt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),he.VERSION="2.0.7",he.defaults={domEvents:!1,touchAction:lt,enable:!0,inputTarget:null,inputClass:null,preset:[[ce,{enable:!1}],[ae,{enable:!1},["rotate"]],[ue,{direction:We}],[oe,{direction:We},["swipe"]],[le],[le,{event:"doubletap",taps:2},["tap"]],[se]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Et=1,_t=2;fe.prototype={set:function(e){return me(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?_t:Et},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&xt)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],t.stopped===_t||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(yt|bt|wt)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof ee)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(u(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(u(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=x(t,e);n!==-1&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==s&&t!==s){var n=this.handlers;return l(w(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==s){var n=this.handlers;return l(w(e),function(e){t?n[e]&&n[e].splice(x(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&de(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},me(he,{INPUT_START:Pe,INPUT_MOVE:Fe,INPUT_END:Me,INPUT_CANCEL:qe,STATE_POSSIBLE:vt,STATE_BEGAN:yt,STATE_CHANGED:bt,STATE_ENDED:wt,STATE_RECOGNIZED:xt,STATE_CANCELLED:kt,STATE_FAILED:Tt,DIRECTION_NONE:Le,DIRECTION_LEFT:He,DIRECTION_RIGHT:Re,DIRECTION_UP:$e,DIRECTION_DOWN:Ge,DIRECTION_HORIZONTAL:We,DIRECTION_VERTICAL:Be,DIRECTION_ALL:ze,Manager:fe,Input:A,TouchAction:K,TouchInput:z,MouseInput:$,PointerEventInput:G,TouchMouseInput:X,SingleTouchInput:W,Recognizer:ee,AttrRecognizer:re,Tap:le,Pan:oe,Swipe:ue,Pinch:ae,Rotate:ce,Press:se,on:g,off:v,each:l,merge:Te,extend:ke,assign:me,inherit:f,bindFn:p,prefixed:E});var Ct="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};Ct.Hammer=he,i=function(){return he}.call(t,n,t,e),!(i!==s&&(e.exports=i))}(window,document,"Hammer")},function(e,t){e.exports='[{\n  "id": 1,\n  "title": "Cron (job scheduler)",\n  "description": "It comes from the Greek word for time, chronos (). Chronos is the personification of time in early Greek mythology and literature. He later appears in the Renaissance as Father Time.",\n  "categories": [\n    "OS",\n    "unix",\n    "linux",\n    "open source"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Cron"\n  ]\n}, {\n  "id": 2,\n  "title": "Daemon",\n  "description": "The term coined by programmers of MIT\'s Project MAC, was inspired by the physicist James Clerk Maxwell\'s demon. It originated as an imaginary being from a thought experiment that constantly works in the background sorting molecules. In Greek mythology, a daemon is a supernatural being working in the background, with no particular bias towards good or evil. The daemon concept was subsequently adopted by Unix systems, however, BSD and some of its derivatives have used a Christian interpretation of the mythological deamon as their mascot rather than a Greek daemon.",\n  "categories": [\n    "OS",\n    "unix",\n    "linux",\n    "open source"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Daemon_(computing)#Etymology"\n  ]\n}, {\n  "id": 3,\n  "title": "Polymorphism",\n  "description": "In programming languages and type theory, polymorphism is the provision of a single interface to entities of different types. Polymorphism comes from the greek words, polys (), meaning \\"much\\" or \\"many\\" and morph (), meaning \\"form\\" or \\"shape\\".",\n  "categories": [\n    "programming",\n    "coding"\n  ],\n  "references": []\n}, {\n  "id": 4,\n  "title": "(Apache) Cassandra",\n  "description": "Apache Cassandra was named after Cassandra (Greek: , also ), daughter of King Priam and Queen Hecuba of Troy. A common version of her story is that Apollo gave her the power of prophecy in order to seduce her, but when she spurned his advances, he spat into her mouth to ensure that Cadandras prophesies fell on deaf ears.",\n  "categories": [\n    "open source",\n    "databases",\n    "big data",\n    "noSQL"\n  ],\n  "references": []\n}, {\n  "id": 5,\n  "title": "Pseudo",\n  "description": "The prefix pseudo comes from pseudes (,), meaning \\"lying\\" or \\"false\\". The term refers to something which appears, on the surface, to be one thing, but is actually another. Pseudo may connote coincidence, imitation, intentional deception, or a combination thereof.",\n  "categories": [\n    "programming",\n    "coding",\n    "CSS"\n  ],\n  "references": []\n}, {\n  "id": 6,\n  "title": "Trojan horse",\n  "description": "The term comes from the Ancient Greek story of the wooden horse that was used by the Greek troops to invade Troy by stealth from within the citys walls.",\n  "categories": [\n    "social engineering",\n    "program"\n  ],\n  "references": []\n}, {\n  "id": 7,\n  "title": "Technology",\n  "description": "Technology derives from the Greek words techne (), meaning art, skill or sleight of hand and logia (), which refers to a collection of techniques, skills and processes used in the production of goods, services or in the accomplishment of objectives. It is easy to see how these concepts apply to our contemporary understanding of technology.",\n  "categories": [\n    "science"\n  ],\n  "references": []\n}, {\n  "id": 8,\n  "title": "Kerberos (protocol)",\n  "description": "The protocol was named after Kerberos (or Cerberus) in Greek mythology, the ferocious three-headed guard dog of Hades. Its designers conceived it primarily as a clientserver model and it provides mutual authentication - both the user and the server verify each other\'s identity.",\n  "categories": [\n    "networking",\n    "authentication protocol"\n  ],\n  "references": []\n}, {\n  "id": 9,\n  "title": "Skeuomorph  Skeuomorphism",\n  "description": "The term skeuomorph is compounded from the Greek: skuos (), meaning \\"container\\" or \\"tool\\", and morph (), \\"shape\\". A skeuomorph is a derivative object that retains ornamental design cues from structures that were necessary in the original, like a software calendar that imitates the appearance of binding on a paper desk calendar. Skeuomorph can be used to describe computer and mobile interfaces.",\n  "categories": [\n    "design",\n    "interface"\n  ],\n  "references": []\n}, {\n  "id": 10,\n  "title": "Eclipse",\n  "description": "The term eclipse is derived from the ancient Greek kleipsis (), which means \\"the abandonment, downfall, or darkening of a heavenly body\\". Eclipse software, initially developed by IBM, is primarily used to produce Java applications. Many versions of Eclipse have been named after a celestial bodies, such as Juno, Luna and Mars.",\n  "categories": [\n    "IDE",\n    "programming",\n    "coding",\n    "software",\n    "Java"\n  ],\n  "references": []\n}, {\n  "id": 11,\n  "title": "Android",\n  "description": "The word was coined from the prefix andro- for \\"man\\" or \\"male\\" () and the suffix -oid \\"having the form or likeness of\\". It has recently come to refer to an operating system endorsed by Google, which has become a leader in the mobile device market.",\n  "categories": [\n    "OS",\n    "mobile",\n    "Google",\n    "open source"\n  ],\n  "references": []\n}, {\n  "id": 12,\n  "title": "Icon",\n  "description": "An icon, from the Greek eikn () defined as \\"image\\", is generally a flat panel painting depicting religious figures or scenes. The term has been adapted to refer to a graphical user interface (GUI), which is the visual symbol identifying a command, file, directory or device.",\n  "categories": [\n    "GUI",\n    "interface"\n  ],\n  "references": []\n}, {\n  "id": 13,\n  "title": "Parameter",\n  "description": "Parameter comes from the ancient Greek words \\"para\\" (), meaning \\"beside, subsidiary\\" and \\"metron\\" (), meaning \\"measure\\". It commonly refers to a \\"characteristic, feature, or measurable factor that can help in defining a particular system\\". A parameter is an important element to consider in evaluation or comprehension of an event, project, or situation.",\n  "categories": [\n    "programming",\n    "coding"\n  ],\n  "references": []\n}, {\n  "id": 14,\n  "title": "Asymmetric",\n  "description": "Asymmetric originated from the ancient Greek word asummetra (), meaning \\"disproportion, deformity\\". It can be found in many computing-related topics such as asymmetric cryptography, asymmetric digital subscriber line (ADSL) in internet connectivity and asymmetric multiprocessing in computer architecture.",\n  "categories": [\n    "cryptography",\n    "internet connectivity",\n    "computing"\n  ],\n  "references": []\n}, {\n  "id": 15,\n  "title": "Synchronous  Asynchronous",\n  "description": "Synchronous, meaning \\"happening at the same time\\", is from the Greek word synkhronos (). It is a compound word formed by syn- \\"together\\" and -khronos \\"time\\". Asynchronous has the opposite meaning.",\n  "categories": [\n    "computing",\n    "programming",\n    "coding",\n    "telecommunications",\n    "systems"\n  ],\n  "references": []\n}, {\n  "id": 16,\n  "title": "Anonymous",\n  "description": "Anonymity is derived from the Greek word anonymia (), for \\"without a name\\" or \\"namelessness\\". In colloquial use, \\"anonymous\\" is used to describe situations where the acting person\'s name is unknown. Some writers have argued that namelessness, though technically correct, does not capture what is more centrally at stake in contexts of anonymity. The important idea here is that a person be unidentifiable, unreachable, or untraceable. Anonymity is seen as a technique, or a way of realizing, certain other values, such as privacy, or liberty.",\n  "categories": [\n    "hacking",\n    "programming",\n    "coding"\n  ],\n  "references": []\n}, {\n  "id": 17,\n  "title": "Mosaic (web browser)",\n  "description": "Mosaic is the art of creating images with an assemblage of small pieces of colored glass, stone, or other materials. It comes from the Greek word mouseion, \'place holy to the Muses,\' and may have been originally dedicated to the Muses. This applied art form shares a name with a discontinued early web browser credited with popularizing the World Wide Web. Mosaic or NCSA Mosaic was named for its support of multiple internet protocols and was also the first browser to display images.",\n  "categories": [\n    "software",\n    "browser"\n  ],\n  "references": []\n}, {\n  "id": 18,\n  "title": "Kubernetes",\n  "description": "The Greek word kubernetes, means \\"helmsman of a ship,\\" or, more metaphorically, \\"ruler\\", while the Latin translation of \\"kubernetes\\" is \\"gubernare\\", meaning \\"to rule\\".",\n  "categories": [\n    "open source",\n    "cluster",\n    "platform"\n  ],\n  "references": []\n}, {\n  "id": 19,\n  "title": "Python",\n  "description": "Python (), the dragon of Delphi, was always represented in Greek sculpture and vase-paintings as a serpent. He presided at the Delphic oracle, which was thought to exist at the center of the Earth-mother cult of Gaia, \\"Earth\\". Greeks considered the site to be the center of the earth, and the center of Delphi was represented by a stone; the omphalos, or navel, which Python guarded.",\n  "categories": [\n    "programming language"\n  ],\n  "references": []\n}, {\n  "id": 20,\n  "title": "Meteor",\n  "description": "The root word meteor comes from the Greek meteros (), meaning \\"high in the air\\".",\n  "categories": [\n    "javascript",\n    "framework"\n  ],\n  "references": []\n}, {\n  "id": 21,\n  "title": "Hyper (text, link, etc.)",\n  "description": "The English prefix hyper- comes from the Greek prefix \\"-\\" and means \\"over\\" or \\"beyond\\" and signifies the overcoming of the previous constraints. It has similar linguistic roots as the prefix \\"super-\\" which comes from Latin.",\n  "categories": [\n    "internet",\n    "web",\n    "networking"\n  ],\n  "references": []\n}, {\n  "id": 22,\n  "title": "Graphics",\n  "description": "The word graphics comes from the Greek graphikos (), for \\"something written\\", like an autograph, for example. The contemporary meaning of the word graphics is \\"visual images or designs on some surface, such as a wall, canvas, screen, paper, or stone to inform, illustrate, or entertain\\".",\n  "categories": [\n    "GUI",\n    "interface"\n  ],\n  "references": []\n}, {\n  "id": 23,\n  "title": "Peripheral",\n  "description": "A peripheral is a device that is used to put information into or get information out of the computer. Peripheral comes from the ancient Greek words periphreia (), meaning \\"the line around the circle, circumference, part of a circle, an arc, the outer surface\\" and phr () \\"bear, carry\\".",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 24,\n  "title": "Delphi",\n  "description": "In myths, the site of Delphi () was believed to be the center of the \\"Earth\\" (\\"Gaia\\"),  grandmother of Zeus. People consulted the Delphic oracle Pythia (always a woman), on everything from important matters of public policy to personal affairs. The Pythia and priests of Apollo\'s temple kept very detailed records of their visitors, kind of like an ancient database. Delphi was originally one of many codenames of a pre-release development tool project at Borland. Borland developer Danny Thorpe suggested Delphi as a codename in reference to the Oracle of Delphi. One of the design goals of the product was to provide database connectivity to programmers as a key feature and a popular database package at the time was Oracle database; hence, \\"If you want to talk to [the] Oracle, go to Delphi\\".",\n  "categories": [\n    "programming language",\n    "database",\n    "software",\n    "IDE"\n  ],\n  "references": []\n}, {\n  "id": 25,\n  "title": "Homoiconic",\n  "description": "Derived from \\"homo\\" () meaning the same and \\"icon\\" () meaning representation. A progamming language is said to be homoiconic when it shares the same representation for code and data. A well-known example is LISP, where the primary primitive data structure is the list and programs are written as lists. As such, code can be manipulated as if it was data and vice-versa",\n  "categories": [\n    "programming"\n  ],\n  "references": []\n}, {\n  "id": 26,\n  "title": "Cryptography",\n  "description": "Derived from krypts () for \\"hidden, secret\\" and graphein () for \\"writing\\". Cryptography is the practice and study of techniques for secure communication in the presence of third parties.",\n  "categories": [\n    "security",\n    "communication",\n    "software"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Cryptography"\n  ]\n}, {\n  "id": 27,\n  "title": "Steganography",\n  "description": "Combines the words steganos (), meaning \\"covered, concealed, or protected\\", and graphein () meaning \\"writing\\". Steganography is the practice of concealing a file, message, image or video within another file.",\n  "categories": [\n    "security",\n    "communication"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Steganography"\n  ]\n}, {\n  "id": 28,\n  "title": "Entropy",\n  "description": "Comes from the word tropee () which means \\"turning toward\\" or \\"transformation\\". Entropy is the randomness collected by an application for use in cryptography or other that requires random data. This randomness is often collected from hardware sources such as mouse movements or randomness generators.",\n  "categories": [\n    "cryptography",\n    "security",\n    "communication"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/entropy"\n  ]\n}, {\n  "id": 29,\n  "title": "Monolithic",\n  "description": "Derives from monlithos () which actually means \\"made of one stone\\". A software is called \\"monolithic\\" if it has a monolithic architecture, in which functionally distinguishable aspects are not separate components but are all integrated.",\n  "categories": [\n    "programming",\n    "architecture",\n    "software"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Monolith",\n    "http://dictionary.reference.com/browse/monolith"\n  ]\n}, {\n  "id": 30,\n  "title": "Authentication",\n  "description": "From the word authentikos () meaning \\"real, genuine\\", is the act of confirming the truth of an attribute of a single piece of data, for example an identity, claimed true by an entity.",\n  "categories": [\n    "programming",\n    "software",\n    "security"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Authentication"\n  ]\n}, {\n  "id": 31,\n  "title": "Mouse",\n  "description": "Comes from the word mees () which is the ancient Greek name of the rodent mouse. In the world of computing it\'s the name of a hardware device, the well-known source of input of a computer system.",\n  "categories": [\n    "peripheral",\n    "hardware"\n  ],\n  "references": [\n    "http://dictionary.reference.com/browse/mouse",\n    "http://www.etymonline.com/index.php?term=mouse"\n  ]\n}, {\n  "id": 32,\n  "title": "Parallelism",\n  "description": "From the word parllelos () which combines two words \\"\\" + \\"\\" meaning \\"along each other\\". Parallelism is a type of computation in which calculations are carried out simultaneously.",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/parallel#Etymology"\n  ]\n}, {\n  "id": 33,\n  "title": "Isomorphism",\n  "description": "In mathematics, an isomorphism (from the Ancient Greek:  isos \\"equal\\", and  morphe \\"form\\" or \\"shape\\") is a homomorphism (or more generally a morphism) that admits an inverse. Two mathematical objects are isomorphic if an isomorphism exists between them. In the development world there are a lot of isomorphic frameworks lately",\n  "categories": [\n    "programming"\n  ],\n  "references": []\n}, {\n  "id": 34,\n  "title": "Ephemeral",\n  "description": "Ephemerality (from Greek   ephemeros, literally \\"lasting only one day\\") is the concept of things being transitory, existing only briefly. An ephemeral port is a short-lived transport protocol port for Internet Protocol (IP) communications allocated automatically from a predefined range by the IP software",\n  "categories": [\n    "networking"\n  ],\n  "references": []\n}, {\n  "id": 35,\n  "title": "Cube (OLAP)",\n  "description": "In computer science and BI an OLAP Cube is a collection of Dimensions, Measures and Hierarchies that are preprocessed and stored in a way that allows data to appear instantaneously when a user makes his/her analysis. The term cube is derived from \\"kubos\\" (). In ancient greek, kubos was a die. Later on the meaning expanded to many cube-shaped objects.",\n  "categories": [\n    "big data",\n    "databases",\n    "data-warehouse",\n    "business intelligence"\n  ],\n  "references": []\n}, {\n  "id": 36,\n  "title": "Schema",\n  "description": "The word schema comes from the Greek word  (skhma), which means shape, or more generally, plan. A database schema describes the structure of its database system.",\n  "categories": [\n    "databases"\n  ],\n  "references": []\n}, {\n  "id": 37,\n  "title": "(Adobe) Acrobat",\n  "description": "Adobe Acrobat is a family of application software and Web services developed by Adobe Systems to view, create, manipulate, print and manage files in Portable Document Format (PDF). Based on ancient Greek word  (akrobts, \\"walking on tiptoe, climbing aloft\\").",\n  "categories": [\n    "software"\n  ],\n  "references": []\n}, {\n  "id": 38,\n  "title": "Alpha / Beta",\n  "description": "A software release life cycle contains the \\"alpha\\" and \\"beta\\" stages of development. The alpha phase of the release life cycle is the first phase to begin software testing (alpha is the first letter of the Greek alphabet, used also as the number 1). Beta, named after the second letter of the Greek alphabet, is the software development phase following alpha. Beta phase generally begins when the software is feature complete but likely to contain a number of known or unknown bugs.",\n  "categories": [\n    "software",\n    "development"\n  ],\n  "references": []\n}, {\n  "id": 39,\n  "title": "Disk (or disc)",\n  "description": "From Ancient Greek  (dskos, \\"a circular plate suited for hurling\\"), from  (diken, \\"to hurl, to launch\\").",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 40,\n  "title": "Program",\n  "description": "A computer program is a collection of instructions that performs a specific task when executed by a computer. The word program comes from Ancient Greek  (prgramma, \\"a written public notice, an edict\\").",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 41,\n  "title": "(Google) Chrome / Chromium",\n  "description": "Google Chrome / Chromium are web browsers developed by Google. Their names are derived from the Greek word , chrma, meaning color.",\n  "categories": [\n    "software",\n    "browser"\n  ],\n  "references": []\n}, {\n  "id": 42,\n  "title": "Automaton",\n  "description": "The word \\"automaton\\" is the latinization of the Greek , automaton, \\"acting of one\'s own will\\". An automaton (plural: automata or automatons) is a self-operating machine, or a machine or control mechanism designed to follow automatically a predetermined sequence of operations, or respond to predetermined instructions.",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 43,\n  "title": "Cyber",\n  "description": "The prefix cyber- is derived from \\"cybernetic,\\" which comes from the Greek word  meaning skilled in steering or governing. It is used in the terms cyberspace, cyberpunk, cybergoth, cyberlaw, cybercrime, cyberwarfare, cyberterrorism, cybersex, and cyberbullying, among others.",\n  "categories": [\n    "internet"\n  ],\n  "references": []\n}, {\n  "id": 44,\n  "title": "Symfony (web application framework)",\n  "description": "Originates from the homophone word \\"Symphony\\" which is derived from the word  (symphonia), meaning \\"agreement / concord of sound\\" and describes an extended musical composition in western classical music. Symfony is a \\"full-stack\\" PHP framework which promotes best practices and consists of a set of decoupled and reusable libraries. It implements the MVC architectural design pattern and many other design patterns like \\"Dependency Injection\\", \\"Data Access Object\\" and \\"Observer\\".",\n  "categories": [\n    "programming",\n    "frameworks"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Symphony#Origins",\n    "http://symfony.com/what-is-symfony"\n  ]\n}, {\n  "id": 45,\n  "title": "Atomicity (database systems)",\n  "description": "Atomicity comes from the word  (atomos) which means \\"indivisible\\". It\'s one of the ACID properties that guarantee transaction reliability. Atomicity requires that each transaction must be \\"all or nothing\\", so that if one part of the transaction fails, the entire transaction fails too and the database state is left unchanged. Also the series of operations cannot be divided apart and executed partially from each other, which makes the series of operations \\"indivisible\\", hence the name.",\n  "categories": [\n    "databases"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Atomicity_(database_systems)"\n  ]\n}, {\n  "id": 46,\n  "title": "Delta (differencing)",\n  "description": " (delta) is a letter of the Greek alphabet ( or ). Delta differencing is a way of storing or transmitting file differences rather than complete files. Deltas, for example, are the changes after a full backup. The differences are stored in files called deltas. As a backup approach saves bandwidth, reduces redundancy and storage. You can also find deltas on the deployment process of an application that requires database changes.",\n  "categories": [\n    "backup",\n    "databases"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Delta_encoding"\n  ]\n}, {\n  "id": 47,\n  "title": "Syntax",\n  "description": "The word syntax comes from Ancient Greek:  \\"coordination\\", which consists of  syn, \\"together\\", and  txis, \\"an ordering\\". In computer science, the syntax of a computer language is the set of rules that defines the combinations of symbols that are considered to be a correctly structured document or fragment in that language.",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Syntax_(programming_languages)",\n    "https://en.wikipedia.org/wiki/Syntax"\n  ]\n}, {\n  "id": 48,\n  "title": "Semantics",\n  "description": "Semantics (from Ancient Greek:  smantiks, \\"significant\\") is the study of meaning. In computer science, the term semantics refers to the meaning of languages, as opposed to their form (syntax).",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Semantics"\n  ]\n}, {\n  "id": 49,\n  "title": "Kilo",\n  "description": "Derived from ancient greek  (chilioi ) \\"one thousand\\". In computing it refers to multiplying the unit to which it is attached by 2^10 (1024).",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/kilo-",\n    "https://en.wikipedia.org/wiki/Kilo-"\n  ]\n}, {\n  "id": 50,\n  "title": "Paragon",\n  "description": "From Ancient Greek  (parakon, \\"I sharpen, whet\\"). The Intel Paragon is a discontinued series of massively parallel supercomputers that was produced by Intel in the 1990s.",\n  "categories": [\n    "hardware",\n    "supercomputer"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/paragon",\n    "https://en.wikipedia.org/wiki/Intel_Paragon"\n  ]\n}, {\n  "id": 51,\n  "title": "Titan",\n  "description": "From Ancient Greek  (Titn), a race of giant gods in Greek mythology that preceded and was overthrown by the Olympian gods. Titan is a supercomputer built by Cray at Oak Ridge National Laboratory for use in a variety of science projects. It uses graphics processing units (GPUs) in addition to conventional central processing units (CPUs). Titan is also the name of the prototype of the Atlas 2 computer developed by Ferranti and the University of Cambridge Mathematical Laboratory in Cambridge, England. Facebook also gave the name Titan to it\'s modern messaging system unveiled in 2010.",\n  "categories": [\n    "hardware",\n    "supercomputers",\n    "software"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/Titan",\n    "https://en.wikipedia.org/wiki/Titan_(supercomputer)",\n    "https://en.wikipedia.org/wiki/Titan_(computer)",\n    "http://www.digitaltrends.com/computing/facebooks-project-titan-is-the-modern-messaging-system-but-is-not-an-e-mail-killer/"\n  ]\n}, {\n  "id": 52,\n  "title": "Octet",\n  "description": "From ancient Greek  (okt). An octet is a unit of digital information in computing and telecommunications that consists of eight bits. The term is often used when the term byte might be ambiguous, as historically there was no standard definition for the size of the byte. Octets are used in the representation of Internet Protocol computer network addresses.",\n  "categories": [\n    "computing",\n    "networking"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/octo",\n    "https://en.wikipedia.org/wiki/Octet_(computing)"\n  ]\n}, {\n  "id": 53,\n  "title": "Neural",\n  "description": "From Ancient Greek  (neron, a sinew, nerve) + -al. In computing it means something that is modelled on the arrangement of neurons in the brain. Neural network software is used to simulate, research, develop and apply artificial neural networks, biological neural networks and, in some cases, a wider array of adaptive systems.",\n  "categories": [\n    "artifical intelligence",\n    "networking",\n    "software",\n    "machine learning"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/neural",\n    "https://en.wikipedia.org/wiki/Artificial_neural_network"\n  ]\n}, {\n  "id": 54,\n  "title": "Protocol",\n  "description": "From Byzantine Greek  (first sheet glued onto a manuscript), from  (prtos, \\"first\\") +  (klla, \\"glue\\"). In telecommunications, a communications protocol is a system of rules that allow two or more entities of a communications system to transmit information via any kind of variation of a physical quantity.",\n  "categories": [\n    "networking",\n    "communications"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/protocol",\n    "https://en.wikipedia.org/wiki/Communications_protocol"\n  ]\n}, {\n  "id": 55,\n  "title": "Method",\n  "description": "From Ancient Greek  (mthodos, \\"pursuit of knowledge, investigation, mode of prosecuting such inquiry, system\\"). In object oriented programming it describes a subroutine or function belonging to a class or object.",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/method"\n  ]\n}, {\n  "id": 56,\n  "title": "Topology",\n  "description": "From Ancient Greek  (tpos, \\"place, locality\\") + -(o)logy (\\"study of\\", \\"a branch of knowledge\\"). In computing topology means the arrangement of nodes in a communications network.",\n  "categories": [\n    "networking",\n    "hardware",\n    "communications"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/topology"\n  ]\n}, {\n  "id": 57,\n  "title": "Diagnostics",\n  "description": "From Greek diagnstikos able to distinguish, from diagignskein distinguish. Any tool or technique, usually a special piece of software, used to find the root of a hardware or software problem and assist with it\'s fixing.",\n  "categories": [\n    "software"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/diagnosis",\n    "https://en.wiktionary.org/wiki/diagnostic#English"\n  ]\n}, {\n  "id": 58,\n  "title": "Hexadecimal",\n  "description": "The word hexadecimal is composed of hexa-, derived from the Greek  (hex) for six, and -decimal, derived from the Latin for tenth. In mathematics and computing, hexadecimal (also base 16, or hex) is a positional numeral system with a radix, or base, of 16.",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/hexa-#English",\n    "https://en.wikipedia.org/wiki/Hexadecimal"\n  ]\n}, {\n  "id": 59,\n  "title": "Giga",\n  "description": "From Ancient Greek  (ggas, giant). In computing it is a prefix that means multiplying the unit to which it is attached by 2^30 or 1,073,741,824.",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/giga-"\n  ]\n}, {\n  "id": 60,\n  "title": "Meta (programming, data, etc.)",\n  "description": "Meta (from the Greek preposition and prefix meta- (-) meaning \\"after\\", or \\"beyond\\") is a prefix used in English to indicate a concept which is an abstraction from another concept, used to complete or add to the latter.",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Meta"\n  ]\n}, {\n  "id": 61,\n  "title": "Lambda (function)",\n  "description": "Lambda calculus (also written as -calculus) is a formal system in mathematical logic for expressing computation based on function abstraction and application using variable binding and substitution. It was first introduced by mathematician Alonzo Church in the 1930s as part of an investigation into the foundations of mathematics. Lambda calculus is a universal model of computation equivalent to a Turing machine (Church-Turing thesis, 1937). Its namesake, Greek letter lambda (), is used in lambda terms (also called lambda expressions) to denote binding a variable in a function. Lambda calculus may be typed and untyped. In typed lambda calculus functions can be applied only if they are capable of accepting the given input\'s \\"type\\" of data. Lambda calculus has applications in many different areas in mathematics, philosophy, linguistics and computer science. Lambda calculus has played an important role in the development of the theory of programming languages. Functional programming languages implement the lambda calculus. Lambda calculus also is a current research topic in Category theory.",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Lambda_calculus"\n  ]\n}, {\n  "id": 62,\n  "title": "Mega",\n  "description": "From Ancient Greek  (mgas, great, large, mighty). In computing, mega may sometimes denote 1,048,576 (2^20) of information units (example: a megabyte, a megaword), but denotes 1000000 (10^6) units of other quantities, for example, transfer rates: 1megabit/s = 1000000bit/s. The prefix mebi has been suggested as a prefix for 2^20 to avoid ambiguity.",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/mega-",\n    "https://en.wikipedia.org/wiki/Mega-"\n  ]\n}, {\n  "id": 63,\n  "title": "Analog",\n  "description": "From Ancient Greek  (anlogos, proportionate).A device or system in which the value of a data item (such as time) is represented by a continuous(ly) variable physical quantity that can be measured (such as the shadow of a sundial)",\n  "categories": [\n    "technology"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/analog"\n  ]\n}, {\n  "id": 64,\n  "title": "Dynamic",\n  "description": "from Ancient Greek  (dunamiks, powerful).In computing it means something that is happening at runtime instead of being predetermined at compile time.For instance: dynamic allocation, dynamic IP addresses, the dynamic resizing of an array\\n\\n",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/dynamic"\n  ]\n}, {\n  "id": 65,\n  "title": "Macro",\n  "description": "From Ancient Greek  (makrs, long). A comparatively human-friendly abbreviation of complicated input to a computer program.",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/macro"\n  ]\n}, {\n  "id": 66,\n  "title": "Ethernet",\n  "description": "The word Ethernet is a compound word formed by joining \'Ether\' and \'Net\'.  The word \'Ether\' is based on Ancient Greek word  (aithr, upper air).In computing it refers to a set of network cabling and network access (CSMA/CD) protocol standards for bus topology computer networks invented by Xerox but now controlled by the 802.3 subcommittee of the IEEE.",\n  "categories": [\n    "networks"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/Ethernet",\n    "https://en.wiktionary.org/wiki/ether"\n  ]\n}]\n';
},function(e,t){e.exports='<header>\n\t<div class="container">\n\t\t<h1><%= title %></h1>\n\t\t<ul class="social-links">\n\t\t\t<li>\n\t\t\t\t<a class="ion-social-twitter"\n\t\t\t\t\thref="https://twitter.com/intent/tweet?\n\t\t\t\t\ttext=Did%20you%20know%20that%20%22<%= title %>%22%20is%20a%20greek%20word%3F%20&amp;\n\t\t\t\t\turl=http%3A%2F%2Fgreekintech.com%2F<%= id %>%2F<%= urlFriendlyTitle %>&amp;\n\t\t\t\t\thashtags=greekintech"\n\t\t\t\t\tdata-count="none">\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a class="ion-social-facebook"\n\t\t\t\t\thref="https://www.facebook.com/sharer/sharer.php\n\t\t\t\t\t?u=http://greekintech.com/#entry/<%= id %>/<%= urlFriendlyTitle %>">\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</header>\n<p><%= description %></p>\n<footer>\n\t<p class="tags-copy">Tags: </p>\n\t<ul class="tags">\n\t\t<% _.each(categories, function(category) { %>\n\t\t\t<li><%= category %></li>\n\t\t<% }) %>\n\t</ul>\n\n\t<% if (!_.isEmpty(references)) { %>\n\t\t<p class="references-copy">References: </p>\n\t\t<ul class="references">\n\t\t\t<% _.each(references, function(reference) { %>\n\t\t\t\t<li><a href="<%= reference %>" target="_blank"><%= reference %></a></li>\n\t\t\t<% }) %>\n\t\t</ul>\n\t<% } %>\n</footer>'},function(e,t,n){"use strict";var i=n(16);e.exports=function(e){var t=i(0,e.length-1);return function(){return e[t()]}}},function(e,t){"use strict";e.exports=function(e,t){var n;return function i(){var r=Math.floor(Math.random()*(t-e+1)+e);return n=r===n&&e!==t?i():r}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmM2ZlODJkOGE4N2ViMDYxZTkxMCIsIndlYnBhY2s6Ly8vLi9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4uL34vYmFja2JvbmUvYmFja2JvbmUuanMiLCJ3ZWJwYWNrOi8vLy4uL34vdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzIiwid2VicGFjazovLy8uLi9+L2pxdWVyeS9kaXN0L2pxdWVyeS5qcyIsIndlYnBhY2s6Ly8vLi9jb2xsZWN0aW9ucy9FbnRyaWVzLmpzIiwid2VicGFjazovLy8uL21vZGVscy9FbnRyeS5qcyIsIndlYnBhY2s6Ly8vLi9yb3V0ZXIvQXBwUm91dGVyLmpzIiwid2VicGFjazovLy8uL3ZpZXdzL0VudHJpZXNWaWV3LmpzIiwid2VicGFjazovLy8uL3ZpZXdzL0VudHJ5Vmlldy5qcyIsIndlYnBhY2s6Ly8vLi92aWV3cy9Mb2FkZXJWaWV3LmpzIiwid2VicGFjazovLy8uLi9+L2dyZWVrLWluLXRlY2gvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uLi9+L2hhbW1lcmpzL2hhbW1lci5qcyIsIndlYnBhY2s6Ly8vLi4vfi9ncmVlay1pbi10ZWNoL2RhdGEvZW50cmllcy5qc29uIiwid2VicGFjazovLy8uL3RlbXBsYXRlcy9lbnRyeS5odG1sIiwid2VicGFjazovLy8uLi9+L3VuaXF1ZS1yYW5kb20tYXJyYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4uL34vdW5pcXVlLXJhbmRvbS9pbmRleC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfYmFja2JvbmUiLCJfYmFja2JvbmUyIiwiX0FwcFJvdXRlciIsIl9BcHBSb3V0ZXIyIiwiaGlzdG9yeSIsInN0YXJ0IiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiZ2xvYmFsIiwiZmFjdG9yeSIsInJvb3QiLCJzZWxmIiwiXyIsIiQiLCJCYWNrYm9uZSIsImFwcGx5IiwidW5kZWZpbmVkIiwicHJldmlvdXNCYWNrYm9uZSIsInNsaWNlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJWRVJTSU9OIiwibm9Db25mbGljdCIsInRoaXMiLCJlbXVsYXRlSFRUUCIsImVtdWxhdGVKU09OIiwiYWRkTWV0aG9kIiwibGVuZ3RoIiwibWV0aG9kIiwiYXR0cmlidXRlIiwidmFsdWUiLCJpdGVyYXRlZSIsImNvbnRleHQiLCJjYiIsImRlZmF1bHRWYWwiLCJhcmdzIiwiYXJndW1lbnRzIiwidW5zaGlmdCIsImFkZFVuZGVyc2NvcmVNZXRob2RzIiwiQ2xhc3MiLCJtZXRob2RzIiwiZWFjaCIsImluc3RhbmNlIiwiaXNGdW5jdGlvbiIsImlzT2JqZWN0IiwiX2lzTW9kZWwiLCJtb2RlbE1hdGNoZXIiLCJpc1N0cmluZyIsIm1vZGVsIiwiZ2V0IiwiYXR0cnMiLCJtYXRjaGVyIiwibWF0Y2hlcyIsImF0dHJpYnV0ZXMiLCJFdmVudHMiLCJldmVudFNwbGl0dGVyIiwiZXZlbnRzQXBpIiwiZXZlbnRzIiwibmFtZSIsImNhbGxiYWNrIiwib3B0cyIsIm5hbWVzIiwiaSIsImtleXMiLCJ0ZXN0Iiwic3BsaXQiLCJvbiIsImludGVybmFsT24iLCJsaXN0ZW5pbmciLCJfZXZlbnRzIiwib25BcGkiLCJjdHgiLCJsaXN0ZW5lcnMiLCJfbGlzdGVuZXJzIiwibGlzdGVuVG8iLCJfbGlzdGVuSWQiLCJ1bmlxdWVJZCIsImxpc3RlbmluZ1RvIiwiX2xpc3RlbmluZ1RvIiwidGhpc0lkIiwib2JqSWQiLCJjb3VudCIsIm9wdGlvbnMiLCJoYW5kbGVycyIsInB1c2giLCJvZmYiLCJvZmZBcGkiLCJzdG9wTGlzdGVuaW5nIiwiaWRzIiwicmVtYWluaW5nIiwiaiIsImhhbmRsZXIiLCJfY2FsbGJhY2siLCJvbmNlIiwib25jZU1hcCIsImJpbmQiLCJsaXN0ZW5Ub09uY2UiLCJtYXAiLCJvZmZlciIsInRyaWdnZXIiLCJNYXRoIiwibWF4IiwidHJpZ2dlckFwaSIsIm9iakV2ZW50cyIsImFsbEV2ZW50cyIsImFsbCIsInRyaWdnZXJFdmVudHMiLCJjb25jYXQiLCJldiIsImwiLCJhMSIsImEyIiwiYTMiLCJ1bmJpbmQiLCJleHRlbmQiLCJNb2RlbCIsImNpZCIsImNpZFByZWZpeCIsImNvbGxlY3Rpb24iLCJwYXJzZSIsImRlZmF1bHRzIiwicmVzdWx0Iiwic2V0IiwiY2hhbmdlZCIsImluaXRpYWxpemUiLCJ2YWxpZGF0aW9uRXJyb3IiLCJpZEF0dHJpYnV0ZSIsInRvSlNPTiIsImNsb25lIiwic3luYyIsImF0dHIiLCJlc2NhcGUiLCJoYXMiLCJrZXkiLCJ2YWwiLCJfdmFsaWRhdGUiLCJ1bnNldCIsInNpbGVudCIsImNoYW5nZXMiLCJjaGFuZ2luZyIsIl9jaGFuZ2luZyIsIl9wcmV2aW91c0F0dHJpYnV0ZXMiLCJjdXJyZW50IiwicHJldiIsImlzRXF1YWwiLCJfcGVuZGluZyIsImNsZWFyIiwiaGFzQ2hhbmdlZCIsImlzRW1wdHkiLCJjaGFuZ2VkQXR0cmlidXRlcyIsImRpZmYiLCJvbGQiLCJzaXplIiwicHJldmlvdXMiLCJwcmV2aW91c0F0dHJpYnV0ZXMiLCJmZXRjaCIsInN1Y2Nlc3MiLCJyZXNwIiwic2VydmVyQXR0cnMiLCJ3cmFwRXJyb3IiLCJzYXZlIiwidmFsaWRhdGUiLCJ3YWl0IiwiaXNOZXciLCJwYXRjaCIsInhociIsImRlc3Ryb3kiLCJkZWZlciIsInVybCIsImJhc2UiLCJ1cmxFcnJvciIsInJlcGxhY2UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsImlzVmFsaWQiLCJlcnJvciIsIm1vZGVsTWV0aG9kcyIsInZhbHVlcyIsInBhaXJzIiwiaW52ZXJ0IiwicGljayIsIm9taXQiLCJjaGFpbiIsIkNvbGxlY3Rpb24iLCJtb2RlbHMiLCJjb21wYXJhdG9yIiwiX3Jlc2V0IiwicmVzZXQiLCJzZXRPcHRpb25zIiwiYWRkIiwicmVtb3ZlIiwibWVyZ2UiLCJhZGRPcHRpb25zIiwic3BsaWNlIiwiYXJyYXkiLCJpbnNlcnQiLCJhdCIsIm1pbiIsInRhaWwiLCJzaW5ndWxhciIsImlzQXJyYXkiLCJyZW1vdmVkIiwiX3JlbW92ZU1vZGVscyIsImFkZGVkIiwibWVyZ2VkIiwidG9BZGQiLCJ0b01lcmdlIiwidG9SZW1vdmUiLCJtb2RlbE1hcCIsInNvcnQiLCJzb3J0YWJsZSIsInNvcnRBdHRyIiwiZXhpc3RpbmciLCJfcHJlcGFyZU1vZGVsIiwiX2FkZFJlZmVyZW5jZSIsIm9yZGVyQ2hhbmdlZCIsInNvbWUiLCJpbmRleCIsIl9yZW1vdmVSZWZlcmVuY2UiLCJwcmV2aW91c01vZGVscyIsInBvcCIsInNoaWZ0IiwiX2J5SWQiLCJtb2RlbElkIiwid2hlcmUiLCJmaXJzdCIsImZpbmRXaGVyZSIsIkVycm9yIiwic29ydEJ5IiwicGx1Y2siLCJjcmVhdGUiLCJjYWxsYmFja09wdHMiLCJpbmRleE9mIiwiX29uTW9kZWxFdmVudCIsImV2ZW50IiwicHJldklkIiwiY29sbGVjdGlvbk1ldGhvZHMiLCJmb3JFYWNoIiwiY29sbGVjdCIsInJlZHVjZSIsImZvbGRsIiwiaW5qZWN0IiwicmVkdWNlUmlnaHQiLCJmb2xkciIsImZpbmQiLCJkZXRlY3QiLCJmaWx0ZXIiLCJzZWxlY3QiLCJyZWplY3QiLCJldmVyeSIsImFueSIsImluY2x1ZGUiLCJpbmNsdWRlcyIsImNvbnRhaW5zIiwiaW52b2tlIiwidG9BcnJheSIsImhlYWQiLCJ0YWtlIiwiaW5pdGlhbCIsInJlc3QiLCJkcm9wIiwibGFzdCIsIndpdGhvdXQiLCJkaWZmZXJlbmNlIiwic2h1ZmZsZSIsImxhc3RJbmRleE9mIiwic2FtcGxlIiwicGFydGl0aW9uIiwiZ3JvdXBCeSIsImNvdW50QnkiLCJpbmRleEJ5IiwiZmluZEluZGV4IiwiZmluZExhc3RJbmRleCIsIlZpZXciLCJ2aWV3T3B0aW9ucyIsIl9lbnN1cmVFbGVtZW50IiwiZGVsZWdhdGVFdmVudFNwbGl0dGVyIiwidGFnTmFtZSIsInNlbGVjdG9yIiwiJGVsIiwicmVuZGVyIiwiX3JlbW92ZUVsZW1lbnQiLCJzZXRFbGVtZW50IiwiZWxlbWVudCIsInVuZGVsZWdhdGVFdmVudHMiLCJfc2V0RWxlbWVudCIsImRlbGVnYXRlRXZlbnRzIiwiZWwiLCJtYXRjaCIsImRlbGVnYXRlIiwiZXZlbnROYW1lIiwibGlzdGVuZXIiLCJ1bmRlbGVnYXRlIiwiX2NyZWF0ZUVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJfc2V0QXR0cmlidXRlcyIsInR5cGUiLCJtZXRob2RNYXAiLCJwYXJhbXMiLCJkYXRhVHlwZSIsImRhdGEiLCJjb250ZW50VHlwZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJfbWV0aG9kIiwiYmVmb3JlU2VuZCIsInNldFJlcXVlc3RIZWFkZXIiLCJwcm9jZXNzRGF0YSIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsImFqYXgiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWFkIiwiUm91dGVyIiwicm91dGVzIiwiX2JpbmRSb3V0ZXMiLCJvcHRpb25hbFBhcmFtIiwibmFtZWRQYXJhbSIsInNwbGF0UGFyYW0iLCJlc2NhcGVSZWdFeHAiLCJyb3V0ZSIsImlzUmVnRXhwIiwiX3JvdXRlVG9SZWdFeHAiLCJyb3V0ZXIiLCJmcmFnbWVudCIsIl9leHRyYWN0UGFyYW1ldGVycyIsImV4ZWN1dGUiLCJuYXZpZ2F0ZSIsIm9wdGlvbmFsIiwiUmVnRXhwIiwiZXhlYyIsInBhcmFtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiSGlzdG9yeSIsImNoZWNrVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJyb3V0ZVN0cmlwcGVyIiwicm9vdFN0cmlwcGVyIiwicGF0aFN0cmlwcGVyIiwic3RhcnRlZCIsImludGVydmFsIiwiYXRSb290IiwicGF0aCIsInBhdGhuYW1lIiwiZ2V0U2VhcmNoIiwibWF0Y2hSb290IiwiZGVjb2RlRnJhZ21lbnQiLCJyb290UGF0aCIsImRlY29kZVVSSSIsImhyZWYiLCJnZXRIYXNoIiwiZ2V0UGF0aCIsImNoYXJBdCIsImdldEZyYWdtZW50IiwiX3VzZVB1c2hTdGF0ZSIsIl93YW50c0hhc2hDaGFuZ2UiLCJoYXNoQ2hhbmdlIiwiX2hhc0hhc2hDaGFuZ2UiLCJkb2N1bWVudE1vZGUiLCJfdXNlSGFzaENoYW5nZSIsIl93YW50c1B1c2hTdGF0ZSIsInB1c2hTdGF0ZSIsIl9oYXNQdXNoU3RhdGUiLCJpZnJhbWUiLCJzcmMiLCJzdHlsZSIsImRpc3BsYXkiLCJ0YWJJbmRleCIsImJvZHkiLCJpV2luZG93IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNvbnRlbnRXaW5kb3ciLCJvcGVuIiwiY2xvc2UiLCJoYXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwiX2NoZWNrVXJsSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImxvYWRVcmwiLCJzdG9wIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwicmVtb3ZlQ2hpbGQiLCJjbGVhckludGVydmFsIiwiZSIsInRpdGxlIiwiYXNzaWduIiwiX3VwZGF0ZUhhc2giLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJjaGlsZCIsInBhcmVudCIsIl9fc3VwZXJfXyIsImNyZWF0ZVJlZHVjZSIsImRpciIsIml0ZXJhdG9yIiwibWVtbyIsImN1cnJlbnRLZXkiLCJvcHRpbWl6ZUNiIiwiaXNBcnJheUxpa2UiLCJjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciIsInByZWRpY2F0ZSIsImdldExlbmd0aCIsImNyZWF0ZUluZGV4RmluZGVyIiwicHJlZGljYXRlRmluZCIsInNvcnRlZEluZGV4IiwiaXRlbSIsImlkeCIsImlzTmFOIiwiY29sbGVjdE5vbkVudW1Qcm9wcyIsIm5vbkVudW1JZHgiLCJub25FbnVtZXJhYmxlUHJvcHMiLCJwcm90byIsIk9ialByb3RvIiwicHJvcCIsInByZXZpb3VzVW5kZXJzY29yZSIsIkFycmF5UHJvdG8iLCJPYmplY3QiLCJGdW5jUHJvdG8iLCJGdW5jdGlvbiIsInRvU3RyaW5nIiwiaGFzT3duUHJvcGVydHkiLCJuYXRpdmVJc0FycmF5IiwibmF0aXZlS2V5cyIsIm5hdGl2ZUJpbmQiLCJuYXRpdmVDcmVhdGUiLCJDdG9yIiwiX3dyYXBwZWQiLCJmdW5jIiwiYXJnQ291bnQiLCJvdGhlciIsImFjY3VtdWxhdG9yIiwiaWRlbnRpdHkiLCJwcm9wZXJ0eSIsIkluZmluaXR5IiwiY3JlYXRlQXNzaWduZXIiLCJrZXlzRnVuYyIsInVuZGVmaW5lZE9ubHkiLCJzb3VyY2UiLCJiYXNlQ3JlYXRlIiwiTUFYX0FSUkFZX0lOREVYIiwicG93IiwicmVzdWx0cyIsImZpbmRLZXkiLCJsaXN0IiwibmVnYXRlIiwiZnJvbUluZGV4IiwiZ3VhcmQiLCJpc0Z1bmMiLCJjb21wdXRlZCIsImxhc3RDb21wdXRlZCIsInJhbmQiLCJzaHVmZmxlZCIsInJhbmRvbSIsIm4iLCJjcml0ZXJpYSIsImxlZnQiLCJyaWdodCIsImEiLCJiIiwiZ3JvdXAiLCJiZWhhdmlvciIsInBhc3MiLCJmYWlsIiwiY29tcGFjdCIsImZsYXR0ZW4iLCJpbnB1dCIsInNoYWxsb3ciLCJzdHJpY3QiLCJzdGFydEluZGV4Iiwib3V0cHV0IiwiaXNBcmd1bWVudHMiLCJsZW4iLCJ1bmlxIiwidW5pcXVlIiwiaXNTb3J0ZWQiLCJpc0Jvb2xlYW4iLCJzZWVuIiwidW5pb24iLCJpbnRlcnNlY3Rpb24iLCJhcmdzTGVuZ3RoIiwiemlwIiwidW56aXAiLCJvYmplY3QiLCJsb3ciLCJoaWdoIiwibWlkIiwiZmxvb3IiLCJyYW5nZSIsInN0ZXAiLCJjZWlsIiwiZXhlY3V0ZUJvdW5kIiwic291cmNlRnVuYyIsImJvdW5kRnVuYyIsImNhbGxpbmdDb250ZXh0IiwiVHlwZUVycm9yIiwiYm91bmQiLCJwYXJ0aWFsIiwiYm91bmRBcmdzIiwicG9zaXRpb24iLCJiaW5kQWxsIiwibWVtb2l6ZSIsImhhc2hlciIsImNhY2hlIiwiYWRkcmVzcyIsImRlbGF5Iiwic2V0VGltZW91dCIsInRocm90dGxlIiwidGltZW91dCIsImxhdGVyIiwibGVhZGluZyIsIm5vdyIsImNsZWFyVGltZW91dCIsInRyYWlsaW5nIiwiZGVib3VuY2UiLCJpbW1lZGlhdGUiLCJ0aW1lc3RhbXAiLCJjYWxsTm93Iiwid3JhcCIsIndyYXBwZXIiLCJjb21wb3NlIiwiYWZ0ZXIiLCJ0aW1lcyIsImJlZm9yZSIsImhhc0VudW1CdWciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImFsbEtleXMiLCJtYXBPYmplY3QiLCJmdW5jdGlvbnMiLCJleHRlbmRPd24iLCJvaXRlcmF0ZWUiLCJTdHJpbmciLCJwcm9wcyIsInRhcCIsImludGVyY2VwdG9yIiwiaXNNYXRjaCIsImVxIiwiYVN0YWNrIiwiYlN0YWNrIiwiYXJlQXJyYXlzIiwiYUN0b3IiLCJiQ3RvciIsImlzRWxlbWVudCIsIm5vZGVUeXBlIiwiSW50OEFycmF5IiwiaXNGaW5pdGUiLCJwYXJzZUZsb2F0IiwiaXNOdW1iZXIiLCJpc051bGwiLCJpc1VuZGVmaW5lZCIsImNvbnN0YW50Iiwibm9vcCIsInByb3BlcnR5T2YiLCJhY2N1bSIsIkRhdGUiLCJnZXRUaW1lIiwiZXNjYXBlTWFwIiwiJiIsIjwiLCI+IiwiXCIiLCInIiwiYCIsInVuZXNjYXBlTWFwIiwiY3JlYXRlRXNjYXBlciIsImVzY2FwZXIiLCJqb2luIiwidGVzdFJlZ2V4cCIsInJlcGxhY2VSZWdleHAiLCJzdHJpbmciLCJ1bmVzY2FwZSIsImZhbGxiYWNrIiwiaWRDb3VudGVyIiwicHJlZml4IiwidGVtcGxhdGVTZXR0aW5ncyIsImV2YWx1YXRlIiwiaW50ZXJwb2xhdGUiLCJub01hdGNoIiwiZXNjYXBlcyIsIlxcIiwiXHIiLCJcbiIsIuKAqCIsIuKAqSIsImVzY2FwZUNoYXIiLCJ0ZW1wbGF0ZSIsInRleHQiLCJzZXR0aW5ncyIsIm9sZFNldHRpbmdzIiwib2Zmc2V0IiwidmFyaWFibGUiLCJhcmd1bWVudCIsIl9jaGFpbiIsIm1peGluIiwidmFsdWVPZiIsInciLCJub0dsb2JhbCIsIkRPTUV2YWwiLCJjb2RlIiwiZG9jIiwic2NyaXB0IiwiYXBwZW5kQ2hpbGQiLCJwYXJlbnROb2RlIiwialF1ZXJ5IiwiaXNXaW5kb3ciLCJ3aW5ub3ciLCJlbGVtZW50cyIsInF1YWxpZmllciIsIm5vdCIsImdyZXAiLCJlbGVtIiwicmlzU2ltcGxlIiwic2libGluZyIsImN1ciIsImNyZWF0ZU9wdGlvbnMiLCJybm90d2hpdGUiLCJmbGFnIiwiSWRlbnRpdHkiLCJ2IiwiVGhyb3dlciIsImV4IiwiYWRvcHRWYWx1ZSIsInJlc29sdmUiLCJwcm9taXNlIiwiZG9uZSIsInRoZW4iLCJjb21wbGV0ZWQiLCJyZWFkeSIsIkRhdGEiLCJleHBhbmRvIiwidWlkIiwiZGF0YUF0dHIiLCJybXVsdGlEYXNoIiwidG9Mb3dlckNhc2UiLCJnZXRBdHRyaWJ1dGUiLCJyYnJhY2UiLCJkYXRhVXNlciIsImFkanVzdENTUyIsInZhbHVlUGFydHMiLCJ0d2VlbiIsImFkanVzdGVkIiwic2NhbGUiLCJtYXhJdGVyYXRpb25zIiwiY3VycmVudFZhbHVlIiwiY3NzIiwidW5pdCIsImNzc051bWJlciIsImluaXRpYWxJblVuaXQiLCJyY3NzTnVtIiwiZW5kIiwiZ2V0RGVmYXVsdERpc3BsYXkiLCJ0ZW1wIiwib3duZXJEb2N1bWVudCIsIm5vZGVOYW1lIiwiZGVmYXVsdERpc3BsYXlNYXAiLCJzaG93SGlkZSIsInNob3ciLCJkYXRhUHJpdiIsImlzSGlkZGVuV2l0aGluVHJlZSIsImdldEFsbCIsInRhZyIsInJldCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicXVlcnlTZWxlY3RvckFsbCIsInNldEdsb2JhbEV2YWwiLCJlbGVtcyIsInJlZkVsZW1lbnRzIiwiYnVpbGRGcmFnbWVudCIsInNjcmlwdHMiLCJzZWxlY3Rpb24iLCJpZ25vcmVkIiwidG1wIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsIm5vZGVzIiwicmh0bWwiLCJydGFnTmFtZSIsIndyYXBNYXAiLCJfZGVmYXVsdCIsImlubmVySFRNTCIsImh0bWxQcmVmaWx0ZXIiLCJsYXN0Q2hpbGQiLCJjaGlsZE5vZGVzIiwidGV4dENvbnRlbnQiLCJjcmVhdGVUZXh0Tm9kZSIsImluQXJyYXkiLCJyc2NyaXB0VHlwZSIsInJldHVyblRydWUiLCJyZXR1cm5GYWxzZSIsInNhZmVBY3RpdmVFbGVtZW50IiwiYWN0aXZlRWxlbWVudCIsImVyciIsInR5cGVzIiwiZm4iLCJvbmUiLCJvcmlnRm4iLCJndWlkIiwibWFuaXB1bGF0aW9uVGFyZ2V0IiwiY29udGVudCIsImRpc2FibGVTY3JpcHQiLCJyZXN0b3JlU2NyaXB0IiwicnNjcmlwdFR5cGVNYXNrZWQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjbG9uZUNvcHlFdmVudCIsImRlc3QiLCJwZGF0YU9sZCIsInBkYXRhQ3VyIiwidWRhdGFPbGQiLCJ1ZGF0YUN1ciIsImhhc0RhdGEiLCJhY2Nlc3MiLCJoYW5kbGUiLCJmaXhJbnB1dCIsInJjaGVja2FibGVUeXBlIiwiY2hlY2tlZCIsImRlZmF1bHRWYWx1ZSIsImRvbU1hbmlwIiwiaGFzU2NyaXB0cyIsIm5vZGUiLCJpTm9DbG9uZSIsInN1cHBvcnQiLCJjaGVja0Nsb25lIiwicmNoZWNrZWQiLCJodG1sIiwiX2V2YWxVcmwiLCJyY2xlYW5TY3JpcHQiLCJrZWVwRGF0YSIsImNsZWFuRGF0YSIsImN1ckNTUyIsIndpZHRoIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImdldFN0eWxlcyIsImdldFByb3BlcnR5VmFsdWUiLCJwaXhlbE1hcmdpblJpZ2h0Iiwicm51bW5vbnB4Iiwicm1hcmdpbiIsImFkZEdldEhvb2tJZiIsImNvbmRpdGlvbkZuIiwiaG9va0ZuIiwidmVuZG9yUHJvcE5hbWUiLCJlbXB0eVN0eWxlIiwiY2FwTmFtZSIsInRvVXBwZXJDYXNlIiwiY3NzUHJlZml4ZXMiLCJzZXRQb3NpdGl2ZU51bWJlciIsInN1YnRyYWN0IiwiYXVnbWVudFdpZHRoT3JIZWlnaHQiLCJleHRyYSIsImlzQm9yZGVyQm94Iiwic3R5bGVzIiwiY3NzRXhwYW5kIiwiZ2V0V2lkdGhPckhlaWdodCIsInZhbHVlSXNCb3JkZXJCb3giLCJnZXRDbGllbnRSZWN0cyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJveFNpemluZ1JlbGlhYmxlIiwiVHdlZW4iLCJlYXNpbmciLCJpbml0IiwicmFmIiwidGltZXJJZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImZ4IiwidGljayIsImNyZWF0ZUZ4Tm93IiwiZnhOb3ciLCJnZW5GeCIsImluY2x1ZGVXaWR0aCIsIndoaWNoIiwiaGVpZ2h0Iiwib3BhY2l0eSIsImNyZWF0ZVR3ZWVuIiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwidHdlZW5lcnMiLCJkZWZhdWx0UHJlZmlsdGVyIiwidG9nZ2xlIiwiaG9va3MiLCJvbGRmaXJlIiwicHJvcFR3ZWVuIiwicmVzdG9yZURpc3BsYXkiLCJpc0JveCIsImFuaW0iLCJvcmlnIiwiaGlkZGVuIiwiZGF0YVNob3ciLCJxdWV1ZSIsIl9xdWV1ZUhvb2tzIiwidW5xdWV1ZWQiLCJlbXB0eSIsImZpcmUiLCJhbHdheXMiLCJyZnh0eXBlcyIsImlzRW1wdHlPYmplY3QiLCJvdmVyZmxvdyIsIm92ZXJmbG93WCIsIm92ZXJmbG93WSIsInByb3BGaWx0ZXIiLCJzcGVjaWFsRWFzaW5nIiwiY2FtZWxDYXNlIiwiY3NzSG9va3MiLCJleHBhbmQiLCJwcm9wZXJ0aWVzIiwic3RvcHBlZCIsInByZWZpbHRlcnMiLCJkZWZlcnJlZCIsIkRlZmVycmVkIiwiY3VycmVudFRpbWUiLCJzdGFydFRpbWUiLCJkdXJhdGlvbiIsInBlcmNlbnQiLCJ0d2VlbnMiLCJydW4iLCJub3RpZnlXaXRoIiwicmVzb2x2ZVdpdGgiLCJvcmlnaW5hbFByb3BlcnRpZXMiLCJvcmlnaW5hbE9wdGlvbnMiLCJnb3RvRW5kIiwicmVqZWN0V2l0aCIsInByb3h5IiwidGltZXIiLCJwcm9ncmVzcyIsImNvbXBsZXRlIiwiZ2V0Q2xhc3MiLCJidWlsZFBhcmFtcyIsInRyYWRpdGlvbmFsIiwicmJyYWNrZXQiLCJhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMiLCJzdHJ1Y3R1cmUiLCJkYXRhVHlwZUV4cHJlc3Npb24iLCJkYXRhVHlwZXMiLCJpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyIsImpxWEhSIiwiaW5zcGVjdCIsInNlbGVjdGVkIiwiaW5zcGVjdGVkIiwicHJlZmlsdGVyT3JGYWN0b3J5IiwiZGF0YVR5cGVPclRyYW5zcG9ydCIsInNlZWtpbmdUcmFuc3BvcnQiLCJ0cmFuc3BvcnRzIiwiYWpheEV4dGVuZCIsInRhcmdldCIsImRlZXAiLCJmbGF0T3B0aW9ucyIsImFqYXhTZXR0aW5ncyIsImFqYXhIYW5kbGVSZXNwb25zZXMiLCJzIiwicmVzcG9uc2VzIiwiY3QiLCJmaW5hbERhdGFUeXBlIiwiZmlyc3REYXRhVHlwZSIsImNvbnRlbnRzIiwibWltZVR5cGUiLCJnZXRSZXNwb25zZUhlYWRlciIsImNvbnZlcnRlcnMiLCJhamF4Q29udmVydCIsInJlc3BvbnNlIiwiaXNTdWNjZXNzIiwiY29udjIiLCJjb252IiwicmVzcG9uc2VGaWVsZHMiLCJkYXRhRmlsdGVyIiwic3RhdGUiLCJnZXRXaW5kb3ciLCJkZWZhdWx0VmlldyIsImFyciIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJjbGFzczJ0eXBlIiwiaGFzT3duIiwiZm5Ub1N0cmluZyIsIk9iamVjdEZ1bmN0aW9uU3RyaW5nIiwidmVyc2lvbiIsInJ0cmltIiwicm1zUHJlZml4IiwicmRhc2hBbHBoYSIsImZjYW1lbENhc2UiLCJsZXR0ZXIiLCJqcXVlcnkiLCJudW0iLCJwdXNoU3RhY2siLCJwcmV2T2JqZWN0IiwiY29weSIsImNvcHlJc0FycmF5IiwiaXNQbGFpbk9iamVjdCIsImlzUmVhZHkiLCJtc2ciLCJpc051bWVyaWMiLCJnbG9iYWxFdmFsIiwidHJpbSIsIm1ha2VBcnJheSIsInNlY29uZCIsImNhbGxiYWNrSW52ZXJzZSIsImNhbGxiYWNrRXhwZWN0IiwiYXJnIiwiU3ltYm9sIiwiU2l6emxlIiwic2VlZCIsIm5pZCIsImdyb3VwcyIsIm5ld1NlbGVjdG9yIiwibmV3Q29udGV4dCIsInByZWZlcnJlZERvYyIsInNldERvY3VtZW50IiwiZG9jdW1lbnRJc0hUTUwiLCJycXVpY2tFeHByIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicXNhIiwiY29tcGlsZXJDYWNoZSIsInJidWdneVFTQSIsInJjc3Nlc2NhcGUiLCJmY3NzZXNjYXBlIiwic2V0QXR0cmlidXRlIiwidG9rZW5pemUiLCJ0b1NlbGVjdG9yIiwicnNpYmxpbmciLCJ0ZXN0Q29udGV4dCIsInFzYUVycm9yIiwiY3JlYXRlQ2FjaGUiLCJFeHByIiwiY2FjaGVMZW5ndGgiLCJtYXJrRnVuY3Rpb24iLCJhc3NlcnQiLCJhZGRIYW5kbGUiLCJhdHRySGFuZGxlIiwic2libGluZ0NoZWNrIiwic291cmNlSW5kZXgiLCJuZXh0U2libGluZyIsImNyZWF0ZUlucHV0UHNldWRvIiwiY3JlYXRlQnV0dG9uUHNldWRvIiwiY3JlYXRlRGlzYWJsZWRQc2V1ZG8iLCJkaXNhYmxlZCIsImlzRGlzYWJsZWQiLCJkaXNhYmxlZEFuY2VzdG9yIiwiY3JlYXRlUG9zaXRpb25hbFBzZXVkbyIsIm1hdGNoSW5kZXhlcyIsInNldEZpbHRlcnMiLCJ0b2tlbnMiLCJhZGRDb21iaW5hdG9yIiwiY29tYmluYXRvciIsInNraXAiLCJuZXh0IiwiY2hlY2tOb25FbGVtZW50cyIsImRvbmVOYW1lIiwieG1sIiwib2xkQ2FjaGUiLCJ1bmlxdWVDYWNoZSIsIm91dGVyQ2FjaGUiLCJuZXdDYWNoZSIsImRpcnJ1bnMiLCJ1bmlxdWVJRCIsImVsZW1lbnRNYXRjaGVyIiwibWF0Y2hlcnMiLCJtdWx0aXBsZUNvbnRleHRzIiwiY29udGV4dHMiLCJjb25kZW5zZSIsInVubWF0Y2hlZCIsIm5ld1VubWF0Y2hlZCIsIm1hcHBlZCIsInNldE1hdGNoZXIiLCJwcmVGaWx0ZXIiLCJwb3N0RmlsdGVyIiwicG9zdEZpbmRlciIsInBvc3RTZWxlY3RvciIsInByZU1hcCIsInBvc3RNYXAiLCJwcmVleGlzdGluZyIsIm1hdGNoZXJJbiIsIm1hdGNoZXJPdXQiLCJtYXRjaGVyRnJvbVRva2VucyIsImNoZWNrQ29udGV4dCIsImxlYWRpbmdSZWxhdGl2ZSIsInJlbGF0aXZlIiwiaW1wbGljaXRSZWxhdGl2ZSIsIm1hdGNoQ29udGV4dCIsIm1hdGNoQW55Q29udGV4dCIsIm91dGVybW9zdENvbnRleHQiLCJtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMiLCJlbGVtZW50TWF0Y2hlcnMiLCJzZXRNYXRjaGVycyIsImJ5U2V0IiwiYnlFbGVtZW50Iiwic3VwZXJNYXRjaGVyIiwib3V0ZXJtb3N0IiwibWF0Y2hlZENvdW50Iiwic2V0TWF0Y2hlZCIsImNvbnRleHRCYWNrdXAiLCJkaXJydW5zVW5pcXVlIiwidW5pcXVlU29ydCIsImdldFRleHQiLCJpc1hNTCIsImNvbXBpbGUiLCJzb3J0SW5wdXQiLCJoYXNEdXBsaWNhdGUiLCJkb2NFbGVtIiwicmJ1Z2d5TWF0Y2hlcyIsImNsYXNzQ2FjaGUiLCJ0b2tlbkNhY2hlIiwic29ydE9yZGVyIiwicHVzaF9uYXRpdmUiLCJib29sZWFucyIsIndoaXRlc3BhY2UiLCJpZGVudGlmaWVyIiwicHNldWRvcyIsInJ3aGl0ZXNwYWNlIiwicmNvbW1hIiwicmNvbWJpbmF0b3JzIiwicmF0dHJpYnV0ZVF1b3RlcyIsInJwc2V1ZG8iLCJyaWRlbnRpZmllciIsIm1hdGNoRXhwciIsIklEIiwiQ0xBU1MiLCJUQUciLCJBVFRSIiwiUFNFVURPIiwiQ0hJTEQiLCJib29sIiwibmVlZHNDb250ZXh0IiwicmlucHV0cyIsInJoZWFkZXIiLCJybmF0aXZlIiwicnVuZXNjYXBlIiwiZnVuZXNjYXBlIiwiZXNjYXBlZCIsImVzY2FwZWRXaGl0ZXNwYWNlIiwiZnJvbUNoYXJDb2RlIiwiY2giLCJhc0NvZGVQb2ludCIsImNoYXJDb2RlQXQiLCJ1bmxvYWRIYW5kbGVyIiwiZWxzIiwiZG9jdW1lbnRFbGVtZW50IiwiaGFzQ29tcGFyZSIsInN1YldpbmRvdyIsInRvcCIsImNyZWF0ZUNvbW1lbnQiLCJnZXRCeUlkIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJhdHRySWQiLCJnZXRBdHRyaWJ1dGVOb2RlIiwibWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwib01hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwiZGlzY29ubmVjdGVkTWF0Y2giLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImFkb3duIiwiYnVwIiwiY29tcGFyZSIsInNvcnREZXRhY2hlZCIsImF1cCIsImFwIiwiYnAiLCJleHByIiwic3BlY2lmaWVkIiwic2VsIiwiZHVwbGljYXRlcyIsImRldGVjdER1cGxpY2F0ZXMiLCJzb3J0U3RhYmxlIiwibm9kZVZhbHVlIiwic2VsZWN0b3JzIiwiY3JlYXRlUHNldWRvIiwiICIsIisiLCJ+IiwiZXhjZXNzIiwidW5xdW90ZWQiLCJub2RlTmFtZVNlbGVjdG9yIiwicGF0dGVybiIsIm9wZXJhdG9yIiwiY2hlY2siLCJ3aGF0Iiwic2ltcGxlIiwiZm9yd2FyZCIsIm9mVHlwZSIsIm5vZGVJbmRleCIsInVzZUNhY2hlIiwicHNldWRvIiwibWF0Y2hlZCIsImlubmVyVGV4dCIsImxhbmciLCJlbGVtTGFuZyIsImZvY3VzIiwiaGFzRm9jdXMiLCJlbmFibGVkIiwic2VsZWN0ZWRJbmRleCIsImhlYWRlciIsImJ1dHRvbiIsImV2ZW4iLCJvZGQiLCJsdCIsImd0IiwicmFkaW8iLCJjaGVja2JveCIsImZpbGUiLCJwYXNzd29yZCIsImltYWdlIiwic3VibWl0IiwiZmlsdGVycyIsInBhcnNlT25seSIsInNvRmFyIiwicHJlRmlsdGVycyIsImNhY2hlZCIsInRva2VuIiwiY29tcGlsZWQiLCJpc1hNTERvYyIsImVzY2FwZVNlbGVjdG9yIiwidW50aWwiLCJ0cnVuY2F0ZSIsImlzIiwic2libGluZ3MiLCJybmVlZHNDb250ZXh0IiwicnNpbmdsZVRhZyIsInJvb3RqUXVlcnkiLCJwYXJzZUhUTUwiLCJycGFyZW50c3ByZXYiLCJndWFyYW50ZWVkVW5pcXVlIiwiY2hpbGRyZW4iLCJ0YXJnZXRzIiwiY2xvc2VzdCIsInByZXZBbGwiLCJhZGRCYWNrIiwicGFyZW50cyIsInBhcmVudHNVbnRpbCIsIm5leHRBbGwiLCJuZXh0VW50aWwiLCJwcmV2VW50aWwiLCJjb250ZW50RG9jdW1lbnQiLCJyZXZlcnNlIiwiQ2FsbGJhY2tzIiwiZmlyaW5nIiwibWVtb3J5IiwiZmlyZWQiLCJsb2NrZWQiLCJmaXJpbmdJbmRleCIsInN0b3BPbkZhbHNlIiwiZGlzYWJsZSIsImxvY2siLCJmaXJlV2l0aCIsInR1cGxlcyIsImNhdGNoIiwicGlwZSIsImZucyIsIm5ld0RlZmVyIiwidHVwbGUiLCJyZXR1cm5lZCIsIm5vdGlmeSIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsIm9uUHJvZ3Jlc3MiLCJkZXB0aCIsInNwZWNpYWwiLCJ0aGF0IiwibWlnaHRUaHJvdyIsIm1heERlcHRoIiwicHJvY2VzcyIsImV4Y2VwdGlvbkhvb2siLCJzdGFja1RyYWNlIiwiZ2V0U3RhY2tIb29rIiwic3RhdGVTdHJpbmciLCJ3aGVuIiwic2luZ2xlVmFsdWUiLCJyZXNvbHZlQ29udGV4dHMiLCJyZXNvbHZlVmFsdWVzIiwibWFzdGVyIiwidXBkYXRlRnVuYyIsInJlcnJvck5hbWVzIiwic3RhY2siLCJjb25zb2xlIiwid2FybiIsIm1lc3NhZ2UiLCJyZWFkeUV4Y2VwdGlvbiIsInJlYWR5TGlzdCIsInJlYWR5V2FpdCIsImhvbGRSZWFkeSIsImhvbGQiLCJyZWFkeVN0YXRlIiwiZG9TY3JvbGwiLCJjaGFpbmFibGUiLCJlbXB0eUdldCIsInJhdyIsImJ1bGsiLCJhY2NlcHREYXRhIiwib3duZXIiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsInJlbW92ZURhdGEiLCJfZGF0YSIsIl9yZW1vdmVEYXRhIiwiZGVxdWV1ZSIsInN0YXJ0TGVuZ3RoIiwic2V0dGVyIiwiY2xlYXJRdWV1ZSIsInBudW0iLCJzd2FwIiwiaGlkZSIsIm9wdGlvbiIsInRoZWFkIiwiY29sIiwidHIiLCJ0ZCIsIm9wdGdyb3VwIiwidGJvZHkiLCJ0Zm9vdCIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRoIiwiZGl2IiwiY2xvbmVOb2RlIiwibm9DbG9uZUNoZWNrZWQiLCJya2V5RXZlbnQiLCJybW91c2VFdmVudCIsInJ0eXBlbmFtZXNwYWNlIiwiaGFuZGxlT2JqSW4iLCJldmVudEhhbmRsZSIsInQiLCJoYW5kbGVPYmoiLCJuYW1lc3BhY2VzIiwib3JpZ1R5cGUiLCJlbGVtRGF0YSIsInRyaWdnZXJlZCIsImRpc3BhdGNoIiwiZGVsZWdhdGVUeXBlIiwiYmluZFR5cGUiLCJuYW1lc3BhY2UiLCJkZWxlZ2F0ZUNvdW50Iiwic2V0dXAiLCJtYXBwZWRUeXBlcyIsIm9yaWdDb3VudCIsInRlYXJkb3duIiwicmVtb3ZlRXZlbnQiLCJuYXRpdmVFdmVudCIsImhhbmRsZXJRdWV1ZSIsImZpeCIsImRlbGVnYXRlVGFyZ2V0IiwicHJlRGlzcGF0Y2giLCJpc1Byb3BhZ2F0aW9uU3RvcHBlZCIsImN1cnJlbnRUYXJnZXQiLCJpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsInJuYW1lc3BhY2UiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInBvc3REaXNwYXRjaCIsImFkZFByb3AiLCJob29rIiwiRXZlbnQiLCJlbnVtZXJhYmxlIiwib3JpZ2luYWxFdmVudCIsIndyaXRhYmxlIiwibG9hZCIsIm5vQnViYmxlIiwiYmx1ciIsImNsaWNrIiwiYmVmb3JldW5sb2FkIiwicmV0dXJuVmFsdWUiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJkZWZhdWx0UHJldmVudGVkIiwicmVsYXRlZFRhcmdldCIsInRpbWVTdGFtcCIsImlzU2ltdWxhdGVkIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiYWx0S2V5IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJjaGFuZ2VkVG91Y2hlcyIsImN0cmxLZXkiLCJkZXRhaWwiLCJldmVudFBoYXNlIiwibWV0YUtleSIsInBhZ2VYIiwicGFnZVkiLCJzaGlmdEtleSIsInZpZXciLCJjaGFyIiwiY2hhckNvZGUiLCJrZXlDb2RlIiwiYnV0dG9ucyIsImNsaWVudFgiLCJjbGllbnRZIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsInNjcmVlblgiLCJzY3JlZW5ZIiwidGFyZ2V0VG91Y2hlcyIsInRvRWxlbWVudCIsInRvdWNoZXMiLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsInBvaW50ZXJlbnRlciIsInBvaW50ZXJsZWF2ZSIsInJlbGF0ZWQiLCJyeGh0bWxUYWciLCJybm9Jbm5lcmh0bWwiLCJkYXRhQW5kRXZlbnRzIiwiZGVlcERhdGFBbmRFdmVudHMiLCJzcmNFbGVtZW50cyIsImRlc3RFbGVtZW50cyIsImluUGFnZSIsImRldGFjaCIsImFwcGVuZCIsInByZXBlbmQiLCJyZXBsYWNlV2l0aCIsInJlcGxhY2VDaGlsZCIsImFwcGVuZFRvIiwicHJlcGVuZFRvIiwiaW5zZXJ0QWZ0ZXIiLCJyZXBsYWNlQWxsIiwib3JpZ2luYWwiLCJvcGVuZXIiLCJnZXRDb21wdXRlZFN0eWxlIiwiY29tcHV0ZVN0eWxlVGVzdHMiLCJjc3NUZXh0IiwiY29udGFpbmVyIiwiZGl2U3R5bGUiLCJwaXhlbFBvc2l0aW9uVmFsIiwicmVsaWFibGVNYXJnaW5MZWZ0VmFsIiwibWFyZ2luTGVmdCIsImJveFNpemluZ1JlbGlhYmxlVmFsIiwibWFyZ2luUmlnaHQiLCJwaXhlbE1hcmdpblJpZ2h0VmFsIiwiYmFja2dyb3VuZENsaXAiLCJjbGVhckNsb25lU3R5bGUiLCJwaXhlbFBvc2l0aW9uIiwicmVsaWFibGVNYXJnaW5MZWZ0IiwicmRpc3BsYXlzd2FwIiwiY3NzU2hvdyIsInZpc2liaWxpdHkiLCJjc3NOb3JtYWxUcmFuc2Zvcm0iLCJsZXR0ZXJTcGFjaW5nIiwiZm9udFdlaWdodCIsImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IiwiY29sdW1uQ291bnQiLCJmaWxsT3BhY2l0eSIsImZsZXhHcm93IiwiZmxleFNocmluayIsImxpbmVIZWlnaHQiLCJvcmRlciIsIm9ycGhhbnMiLCJ3aWRvd3MiLCJ6SW5kZXgiLCJ6b29tIiwiY3NzUHJvcHMiLCJmbG9hdCIsIm9yaWdOYW1lIiwibWFyZ2luIiwicGFkZGluZyIsImJvcmRlciIsInN1ZmZpeCIsImV4cGFuZGVkIiwicGFydHMiLCJwcm9wSG9va3MiLCJlYXNlZCIsInBvcyIsInNjcm9sbFRvcCIsInNjcm9sbExlZnQiLCJsaW5lYXIiLCJzd2luZyIsImNvcyIsIlBJIiwicnJ1biIsIioiLCJ0d2VlbmVyIiwicHJlZmlsdGVyIiwic3BlZWQiLCJvcHQiLCJzcGVlZHMiLCJmYWRlVG8iLCJ0byIsImFuaW1hdGUiLCJvcHRhbGwiLCJkb0FuaW1hdGlvbiIsImZpbmlzaCIsInN0b3BRdWV1ZSIsInRpbWVycyIsImNzc0ZuIiwic2xpZGVEb3duIiwic2xpZGVVcCIsInNsaWRlVG9nZ2xlIiwiZmFkZUluIiwiZmFkZU91dCIsImZhZGVUb2dnbGUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInNsb3ciLCJmYXN0IiwidGltZSIsImNoZWNrT24iLCJvcHRTZWxlY3RlZCIsInJhZGlvVmFsdWUiLCJib29sSG9vayIsInJlbW92ZUF0dHIiLCJuVHlwZSIsImF0dHJIb29rcyIsImF0dHJOYW1lcyIsImdldHRlciIsImxvd2VyY2FzZU5hbWUiLCJyZm9jdXNhYmxlIiwicmNsaWNrYWJsZSIsInJlbW92ZVByb3AiLCJwcm9wRml4IiwidGFiaW5kZXgiLCJwYXJzZUludCIsImZvciIsImNsYXNzIiwicmNsYXNzIiwiYWRkQ2xhc3MiLCJjbGFzc2VzIiwiY3VyVmFsdWUiLCJjbGF6eiIsImZpbmFsVmFsdWUiLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUNsYXNzIiwic3RhdGVWYWwiLCJjbGFzc05hbWVzIiwiaGFzQ2xhc3MiLCJycmV0dXJuIiwicnNwYWNlcyIsInZhbEhvb2tzIiwib3B0aW9uU2V0IiwicmZvY3VzTW9ycGgiLCJvbmx5SGFuZGxlcnMiLCJidWJibGVUeXBlIiwib250eXBlIiwiZXZlbnRQYXRoIiwiaXNUcmlnZ2VyIiwicGFyZW50V2luZG93Iiwic2ltdWxhdGUiLCJ0cmlnZ2VySGFuZGxlciIsImhvdmVyIiwiZm5PdmVyIiwiZm5PdXQiLCJmb2N1c2luIiwiYXR0YWNoZXMiLCJub25jZSIsInJxdWVyeSIsInBhcnNlWE1MIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwickNSTEYiLCJyc3VibWl0dGVyVHlwZXMiLCJyc3VibWl0dGFibGUiLCJ2YWx1ZU9yRnVuY3Rpb24iLCJzZXJpYWxpemUiLCJzZXJpYWxpemVBcnJheSIsInIyMCIsInJoYXNoIiwicnRzIiwicmhlYWRlcnMiLCJybG9jYWxQcm90b2NvbCIsInJub0NvbnRlbnQiLCJycHJvdG9jb2wiLCJhbGxUeXBlcyIsIm9yaWdpbkFuY2hvciIsImFjdGl2ZSIsImxhc3RNb2RpZmllZCIsImV0YWciLCJpc0xvY2FsIiwicHJvdG9jb2wiLCJhc3luYyIsImFjY2VwdHMiLCJqc29uIiwiKiB0ZXh0IiwidGV4dCBodG1sIiwidGV4dCBqc29uIiwidGV4dCB4bWwiLCJhamF4U2V0dXAiLCJhamF4UHJlZmlsdGVyIiwiYWpheFRyYW5zcG9ydCIsInN0YXR1cyIsIm5hdGl2ZVN0YXR1c1RleHQiLCJoZWFkZXJzIiwibW9kaWZpZWQiLCJzdGF0dXNUZXh0IiwidGltZW91dFRpbWVyIiwidHJhbnNwb3J0IiwicmVzcG9uc2VIZWFkZXJzU3RyaW5nIiwiaWZNb2RpZmllZCIsImNhY2hlVVJMIiwiY2FsbGJhY2tDb250ZXh0Iiwic3RhdHVzQ29kZSIsImZpcmVHbG9iYWxzIiwiZ2xvYmFsRXZlbnRDb250ZXh0IiwiY29tcGxldGVEZWZlcnJlZCIsInJlc3BvbnNlSGVhZGVycyIsInVybEFuY2hvciIsInVuY2FjaGVkIiwicmVxdWVzdEhlYWRlcnMiLCJyZXF1ZXN0SGVhZGVyc05hbWVzIiwic3RyQWJvcnQiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJvdmVycmlkZU1pbWVUeXBlIiwiYWJvcnQiLCJmaW5hbFRleHQiLCJjcm9zc0RvbWFpbiIsImhvc3QiLCJoYXNDb250ZW50Iiwic2VuZCIsImdldEpTT04iLCJnZXRTY3JpcHQiLCJ0aHJvd3MiLCJ3cmFwQWxsIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJ3cmFwSW5uZXIiLCJ1bndyYXAiLCJ2aXNpYmxlIiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJYTUxIdHRwUmVxdWVzdCIsInhoclN1Y2Nlc3NTdGF0dXMiLCIwIiwiMTIyMyIsInhoclN1cHBvcnRlZCIsImNvcnMiLCJlcnJvckNhbGxiYWNrIiwidXNlcm5hbWUiLCJ4aHJGaWVsZHMiLCJvbmxvYWQiLCJvbmVycm9yIiwib25hYm9ydCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlc3BvbnNlVHlwZSIsInJlc3BvbnNlVGV4dCIsImJpbmFyeSIsInRleHQgc2NyaXB0IiwiY2hhcnNldCIsInNjcmlwdENoYXJzZXQiLCJldnQiLCJvbGRDYWxsYmFja3MiLCJyanNvbnAiLCJqc29ucCIsImpzb25wQ2FsbGJhY2siLCJvcmlnaW5hbFNldHRpbmdzIiwiY2FsbGJhY2tOYW1lIiwib3ZlcndyaXR0ZW4iLCJyZXNwb25zZUNvbnRhaW5lciIsImpzb25Qcm9wIiwiY3JlYXRlSFRNTERvY3VtZW50IiwiaW1wbGVtZW50YXRpb24iLCJrZWVwU2NyaXB0cyIsInBhcnNlZCIsImFuaW1hdGVkIiwic2V0T2Zmc2V0IiwiY3VyUG9zaXRpb24iLCJjdXJMZWZ0IiwiY3VyQ1NTVG9wIiwiY3VyVG9wIiwiY3VyT2Zmc2V0IiwiY3VyQ1NTTGVmdCIsImNhbGN1bGF0ZVBvc2l0aW9uIiwiY3VyRWxlbSIsInVzaW5nIiwid2luIiwicmVjdCIsInBhZ2VZT2Zmc2V0IiwiY2xpZW50VG9wIiwicGFnZVhPZmZzZXQiLCJjbGllbnRMZWZ0Iiwib2Zmc2V0UGFyZW50IiwicGFyZW50T2Zmc2V0Iiwic2Nyb2xsVG8iLCJIZWlnaHQiLCJXaWR0aCIsIiIsImRlZmF1bHRFeHRyYSIsImZ1bmNOYW1lIiwicGFyc2VKU09OIiwiX2pRdWVyeSIsIl8kIiwiX2NsYXNzQ2FsbENoZWNrIiwiQ29uc3RydWN0b3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsIl91bmRlcnNjb3JlIiwiX3VuZGVyc2NvcmUyIiwiX0VudHJ5IiwiX0VudHJ5MiIsIkVudHJpZXMiLCJfQmFja2JvbmUkQ29sbGVjdGlvbiIsImVudHJpZXMiLCJ1bnZpZXdlZEVudHJpZXMiLCJ2aWV3ZWQiLCJFbnRyeSIsIl9CYWNrYm9uZSRNb2RlbCIsInVybEZyaWVuZGx5VGl0bGUiLCJjb252ZXJ0VG9TbHVnIiwicGFyc2VUaXRsZSIsInRpdGxlQ29udGFpbnNQYXJlbnRoZXNpcyIsIndyYXBUaXRsZVBhcmVudGhlc2lzSW5TcGFucyIsIl9qcXVlcnkiLCJfanF1ZXJ5MiIsIl9Mb2FkZXJWaWV3IiwiX0xvYWRlclZpZXcyIiwiX0VudHJpZXMiLCJfRW50cmllczIiLCJfRW50cmllc1ZpZXciLCJfRW50cmllc1ZpZXcyIiwiX0VudHJ5VmlldyIsIl9FbnRyeVZpZXcyIiwiX2dyZWVrSW5UZWNoIiwiQXBwUm91dGVyIiwiX0JhY2tib25lJFJvdXRlciIsIl90aGlzIiwiZW50cnkvOmlkKC86dGl0bGUpIiwiKmFjdGlvbnMiLCJpbml0aWFsRnJhZ21lbnQiLCIkZW50cnlFbCIsImxvYWRlciIsImVudHJpZXNWaWV3Iiwic2hvd0VudHJ5IiwibmF2aWdhdGVCYWNrd2FyZHMiLCJyYW5kb21FbnRyeUlEIiwiZ2V0VW52aWV3ZWRFbnRyeUlEIiwiZW50cnkiLCJzaG93UmFuZG9tRW50cnkiLCJlbnRyeVZpZXciLCJiYWNrIiwiX2hhbW1lcmpzIiwiX2hhbW1lcmpzMiIsIkVudHJpZXNWaWV3IiwiX0JhY2tib25lJFZpZXciLCJrZXlkb3duIiwibWMiLCJoYW5kbGVNb2JpbGVFdmVudCIsInVudmlld2VkRW50cnlJRCIsImJhY2tLZXlzIiwiZm9yd2FyZEtleXMiLCJzcGFjZSIsImlzRm9yd2FyZCIsIm1vdmVUb0VudHJ5IiwicmVuZGVyUmFuZG9tRW50cnkiLCJfZW50cnkiLCJfZW50cnkyIiwiRW50cnlWaWV3IiwiY2xpY2sgLnNvY2lhbC1saW5rcyBhIiwiQ1NTYW5pbWF0aW9uQ2xhc3NlcyIsImFuaW1hdGVWaWV3IiwiTG9hZGVyVmlldyIsIl90aGlzMiIsImdldEVudHJ5IiwiX3VuaXF1ZVJhbmRvbUFycmF5IiwiX3VuaXF1ZVJhbmRvbUFycmF5MiIsIl9lbnRyaWVzIiwiX2VudHJpZXMyIiwiZXhwb3J0TmFtZSIsInNldFRpbWVvdXRDb250ZXh0IiwiYmluZEZuIiwiaW52b2tlQXJyYXlBcmciLCJkZXByZWNhdGUiLCJkZXByZWNhdGlvbk1lc3NhZ2UiLCJsb2ciLCJpbmhlcml0IiwiY2hpbGRQIiwiYmFzZVAiLCJfc3VwZXIiLCJib29sT3JGbiIsIlRZUEVfRlVOQ1RJT04iLCJpZlVuZGVmaW5lZCIsInZhbDEiLCJ2YWwyIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJzcGxpdFN0ciIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwiaGFzUGFyZW50IiwiaW5TdHIiLCJzdHIiLCJmaW5kQnlLZXkiLCJ1bmlxdWVBcnJheSIsInByZWZpeGVkIiwiY2FtZWxQcm9wIiwiVkVORE9SX1BSRUZJWEVTIiwiX3VuaXF1ZUlkIiwiZ2V0V2luZG93Rm9yRWxlbWVudCIsIklucHV0IiwibWFuYWdlciIsImlucHV0VGFyZ2V0IiwiZG9tSGFuZGxlciIsImVuYWJsZSIsImNyZWF0ZUlucHV0SW5zdGFuY2UiLCJUeXBlIiwiaW5wdXRDbGFzcyIsIlNVUFBPUlRfUE9JTlRFUl9FVkVOVFMiLCJQb2ludGVyRXZlbnRJbnB1dCIsIlNVUFBPUlRfT05MWV9UT1VDSCIsIlRvdWNoSW5wdXQiLCJTVVBQT1JUX1RPVUNIIiwiVG91Y2hNb3VzZUlucHV0IiwiTW91c2VJbnB1dCIsImlucHV0SGFuZGxlciIsImV2ZW50VHlwZSIsInBvaW50ZXJzTGVuIiwicG9pbnRlcnMiLCJjaGFuZ2VkUG9pbnRlcnNMZW4iLCJjaGFuZ2VkUG9pbnRlcnMiLCJpc0ZpcnN0IiwiSU5QVVRfU1RBUlQiLCJpc0ZpbmFsIiwiSU5QVVRfRU5EIiwiSU5QVVRfQ0FOQ0VMIiwic2Vzc2lvbiIsImNvbXB1dGVJbnB1dERhdGEiLCJlbWl0IiwicmVjb2duaXplIiwicHJldklucHV0IiwicG9pbnRlcnNMZW5ndGgiLCJmaXJzdElucHV0Iiwic2ltcGxlQ2xvbmVJbnB1dERhdGEiLCJmaXJzdE11bHRpcGxlIiwib2Zmc2V0Q2VudGVyIiwiY2VudGVyIiwiZ2V0Q2VudGVyIiwiZGVsdGFUaW1lIiwiYW5nbGUiLCJnZXRBbmdsZSIsImRpc3RhbmNlIiwiZ2V0RGlzdGFuY2UiLCJjb21wdXRlRGVsdGFYWSIsIm9mZnNldERpcmVjdGlvbiIsImdldERpcmVjdGlvbiIsImRlbHRhWCIsImRlbHRhWSIsIm92ZXJhbGxWZWxvY2l0eSIsImdldFZlbG9jaXR5Iiwib3ZlcmFsbFZlbG9jaXR5WCIsIngiLCJvdmVyYWxsVmVsb2NpdHlZIiwieSIsImFicyIsImdldFNjYWxlIiwicm90YXRpb24iLCJnZXRSb3RhdGlvbiIsIm1heFBvaW50ZXJzIiwiY29tcHV0ZUludGVydmFsSW5wdXREYXRhIiwic3JjRXZlbnQiLCJvZmZzZXREZWx0YSIsInByZXZEZWx0YSIsInZlbG9jaXR5IiwidmVsb2NpdHlYIiwidmVsb2NpdHlZIiwiZGlyZWN0aW9uIiwibGFzdEludGVydmFsIiwiQ09NUFVURV9JTlRFUlZBTCIsInJvdW5kIiwiRElSRUNUSU9OX05PTkUiLCJESVJFQ1RJT05fTEVGVCIsIkRJUkVDVElPTl9SSUdIVCIsIkRJUkVDVElPTl9VUCIsIkRJUkVDVElPTl9ET1dOIiwicDEiLCJwMiIsIlBST1BTX1hZIiwic3FydCIsImF0YW4yIiwiUFJPUFNfQ0xJRU5UX1hZIiwiZXZFbCIsIk1PVVNFX0VMRU1FTlRfRVZFTlRTIiwiZXZXaW4iLCJNT1VTRV9XSU5ET1dfRVZFTlRTIiwicHJlc3NlZCIsIlBPSU5URVJfRUxFTUVOVF9FVkVOVFMiLCJQT0lOVEVSX1dJTkRPV19FVkVOVFMiLCJzdG9yZSIsInBvaW50ZXJFdmVudHMiLCJTaW5nbGVUb3VjaElucHV0IiwiZXZUYXJnZXQiLCJTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUyIsIlNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTIiwibm9ybWFsaXplU2luZ2xlVG91Y2hlcyIsIlRPVUNIX1RBUkdFVF9FVkVOVFMiLCJ0YXJnZXRJZHMiLCJnZXRUb3VjaGVzIiwiYWxsVG91Y2hlcyIsIklOUFVUX01PVkUiLCJjaGFuZ2VkVGFyZ2V0VG91Y2hlcyIsInRvdWNoIiwibW91c2UiLCJwcmltYXJ5VG91Y2giLCJsYXN0VG91Y2hlcyIsInJlY29yZFRvdWNoZXMiLCJldmVudERhdGEiLCJzZXRMYXN0VG91Y2giLCJsYXN0VG91Y2giLCJsdHMiLCJyZW1vdmVMYXN0VG91Y2giLCJERURVUF9USU1FT1VUIiwiaXNTeW50aGV0aWNFdmVudCIsImR4IiwiZHkiLCJERURVUF9ESVNUQU5DRSIsIlRvdWNoQWN0aW9uIiwiY2xlYW5Ub3VjaEFjdGlvbnMiLCJhY3Rpb25zIiwiVE9VQ0hfQUNUSU9OX05PTkUiLCJoYXNQYW5YIiwiVE9VQ0hfQUNUSU9OX1BBTl9YIiwiaGFzUGFuWSIsIlRPVUNIX0FDVElPTl9QQU5fWSIsIlRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04iLCJUT1VDSF9BQ1RJT05fQVVUTyIsImdldFRvdWNoQWN0aW9uUHJvcHMiLCJOQVRJVkVfVE9VQ0hfQUNUSU9OIiwidG91Y2hNYXAiLCJjc3NTdXBwb3J0cyIsIkNTUyIsInN1cHBvcnRzIiwiUmVjb2duaXplciIsIlNUQVRFX1BPU1NJQkxFIiwic2ltdWx0YW5lb3VzIiwicmVxdWlyZUZhaWwiLCJzdGF0ZVN0ciIsIlNUQVRFX0NBTkNFTExFRCIsIlNUQVRFX0VOREVEIiwiU1RBVEVfQ0hBTkdFRCIsIlNUQVRFX0JFR0FOIiwiZGlyZWN0aW9uU3RyIiwiZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlciIsIm90aGVyUmVjb2duaXplciIsInJlY29nbml6ZXIiLCJBdHRyUmVjb2duaXplciIsIlBhblJlY29nbml6ZXIiLCJwWCIsInBZIiwiUGluY2hSZWNvZ25pemVyIiwiUHJlc3NSZWNvZ25pemVyIiwiX3RpbWVyIiwiX2lucHV0IiwiUm90YXRlUmVjb2duaXplciIsIlN3aXBlUmVjb2duaXplciIsIlRhcFJlY29nbml6ZXIiLCJwVGltZSIsInBDZW50ZXIiLCJIYW1tZXIiLCJyZWNvZ25pemVycyIsInByZXNldCIsIk1hbmFnZXIiLCJvbGRDc3NQcm9wcyIsInRvdWNoQWN0aW9uIiwidG9nZ2xlQ3NzUHJvcHMiLCJyZWNvZ25pemVXaXRoIiwicmVxdWlyZUZhaWx1cmUiLCJ0cmlnZ2VyRG9tRXZlbnQiLCJnZXN0dXJlRXZlbnQiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsImdlc3R1cmUiLCJkaXNwYXRjaEV2ZW50IiwiVEVTVF9FTEVNRU5UIiwibmV4dEtleSIsIk1PQklMRV9SRUdFWCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIklOUFVUX1RZUEVfVE9VQ0giLCJJTlBVVF9UWVBFX1BFTiIsIklOUFVUX1RZUEVfTU9VU0UiLCJJTlBVVF9UWVBFX0tJTkVDVCIsIkRJUkVDVElPTl9IT1JJWk9OVEFMIiwiRElSRUNUSU9OX1ZFUlRJQ0FMIiwiRElSRUNUSU9OX0FMTCIsIk1PVVNFX0lOUFVUX01BUCIsIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsIm1vdXNldXAiLCJQT0lOVEVSX0lOUFVUX01BUCIsInBvaW50ZXJkb3duIiwicG9pbnRlcm1vdmUiLCJwb2ludGVydXAiLCJwb2ludGVyY2FuY2VsIiwicG9pbnRlcm91dCIsIklFMTBfUE9JTlRFUl9UWVBFX0VOVU0iLCIyIiwiMyIsIjQiLCI1IiwiTVNQb2ludGVyRXZlbnQiLCJQb2ludGVyRXZlbnQiLCJyZW1vdmVQb2ludGVyIiwiZXZlbnRUeXBlTm9ybWFsaXplZCIsImlzVG91Y2giLCJzdG9yZUluZGV4IiwiU0lOR0xFX1RPVUNIX0lOUFVUX01BUCIsInRvdWNoc3RhcnQiLCJ0b3VjaG1vdmUiLCJ0b3VjaGVuZCIsInRvdWNoY2FuY2VsIiwiVE9VQ0hfSU5QVVRfTUFQIiwiaW5wdXRFdmVudCIsImlucHV0RGF0YSIsImlzTW91c2UiLCJzb3VyY2VDYXBhYmlsaXRpZXMiLCJmaXJlc1RvdWNoRXZlbnRzIiwiUFJFRklYRURfVE9VQ0hfQUNUSU9OIiwiVE9VQ0hfQUNUSU9OX0NPTVBVVEUiLCJUT1VDSF9BQ1RJT05fTUFQIiwiY29tcHV0ZSIsImdldFRvdWNoQWN0aW9uIiwicHJldmVudERlZmF1bHRzIiwicHJldmVudGVkIiwiaGFzTm9uZSIsImlzVGFwUG9pbnRlciIsImlzVGFwTW92ZW1lbnQiLCJpc1RhcFRvdWNoVGltZSIsInByZXZlbnRTcmMiLCJTVEFURV9SRUNPR05JWkVEIiwiU1RBVEVfRkFJTEVEIiwiZHJvcFJlY29nbml6ZVdpdGgiLCJkcm9wUmVxdWlyZUZhaWx1cmUiLCJoYXNSZXF1aXJlRmFpbHVyZXMiLCJjYW5SZWNvZ25pemVXaXRoIiwiYWRkaXRpb25hbEV2ZW50IiwidHJ5RW1pdCIsImNhbkVtaXQiLCJpbnB1dERhdGFDbG9uZSIsImF0dHJUZXN0Iiwib3B0aW9uUG9pbnRlcnMiLCJpc1JlY29nbml6ZWQiLCJ0aHJlc2hvbGQiLCJkaXJlY3Rpb25UZXN0IiwiaGFzTW92ZWQiLCJpbk91dCIsInZhbGlkUG9pbnRlcnMiLCJ2YWxpZE1vdmVtZW50IiwidmFsaWRUaW1lIiwidGFwcyIsInBvc1RocmVzaG9sZCIsInZhbGlkVG91Y2hUaW1lIiwiZmFpbFRpbWVvdXQiLCJ2YWxpZEludGVydmFsIiwidmFsaWRNdWx0aVRhcCIsInRhcENvdW50IiwiZG9tRXZlbnRzIiwidXNlclNlbGVjdCIsInRvdWNoU2VsZWN0IiwidG91Y2hDYWxsb3V0IiwiY29udGVudFpvb21pbmciLCJ1c2VyRHJhZyIsInRhcEhpZ2hsaWdodENvbG9yIiwiU1RPUCIsIkZPUkNFRF9TVE9QIiwiZm9yY2UiLCJjdXJSZWNvZ25pemVyIiwiVGFwIiwiUGFuIiwiU3dpcGUiLCJQaW5jaCIsIlJvdGF0ZSIsIlByZXNzIiwiZnJlZUdsb2JhbCIsInVuaXF1ZVJhbmRvbSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxRQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0IsWUFVQSxTQUFTVyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxVQUFTRixHRXZEeEYsR0FBQUcsR0FBQWYsRUFBQSxHRmlES2dCLEVBQWFMLEVBQXVCSSxHRWhEekNFLEVBQUFqQixFQUFBLEdGb0RLa0IsRUFBY1AsRUFBdUJNLEVFdEQxQ2pCLEdBQVEsSUFJUixHQUFBa0IsY0FDQUYsYUFBU0csUUFBUUMsU0Y2RFgsU0FBU2hCLEVBQVFELEVBQVNILEdBRS9CLEdBQUlxQixHQUE4QkMsR0dwRW5DLFNBQUFDLElBT0EsU0FBQUMsR0FJQSxHQUFBQyxHQUFBLGdCQUFBQywrQkFDQSxnQkFBQUgsbUJBSUFGLElBQUFyQixFQUFBLEdBQUFBLEVBQUEsR0FBQUcsR0FBQW1CLEVBQUEsU0FBQUssRUFBQUMsRUFBQXpCLEdBR0FzQixFQUFBSSxTQUFBTCxFQUFBQyxFQUFBdEIsRUFBQXdCLEVBQUFD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R0FFQUksR0FBQUQsUUFBQSxTQUFBbTNCLEdBQ0EsR0FBQTlaLEdBQUFtK0MsRUFBQSxFQUFBcmtDLEVBQUE1MEIsT0FBQSxFQUVBLG1CQUNBLE1BQUE0MEIsR0FBQTlaLFFoQnk5Z0JNLFNBQVNwZCxFQUFRRCxHaUJoK2dCdkIsWUFDQUMsR0FBQUQsUUFBQSxTQUFBaU4sRUFBQWhHLEdBQ0EsR0FBQTBDLEVBQ0EsZ0JBQUEwVCxLQUNBLEdBQUE0YSxHQUFBanhCLEtBQUF5WSxNQUFBelksS0FBQXVXLFVBQUF0VyxFQUFBZ0csRUFBQSxHQUFBQSxFQUNBLE9BQUF0RCxHQUFBc3VCLElBQUF0dUIsR0FBQXNELElBQUFoRyxFQUFBb1csSUFBQTRhIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcImRpc3QvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2JhY2tib25lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfYmFja2JvbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFja2JvbmUpO1xuXHRcblx0dmFyIF9BcHBSb3V0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9BcHBSb3V0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBwUm91dGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdFxuXHRuZXcgX0FwcFJvdXRlcjIuZGVmYXVsdCgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuXHRfYmFja2JvbmUyLmRlZmF1bHQuaGlzdG9yeS5zdGFydCgpO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvLyAgICAgQmFja2JvbmUuanMgMS4zLjNcblx0XG5cdC8vICAgICAoYykgMjAxMC0yMDE2IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdC8vICAgICBCYWNrYm9uZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblx0Ly8gICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcblx0Ly8gICAgIGh0dHA6Ly9iYWNrYm9uZWpzLm9yZ1xuXHRcblx0KGZ1bmN0aW9uKGZhY3RvcnkpIHtcblx0XG5cdCAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgKGBzZWxmYCkgaW4gdGhlIGJyb3dzZXIsIG9yIGBnbG9iYWxgIG9uIHRoZSBzZXJ2ZXIuXG5cdCAgLy8gV2UgdXNlIGBzZWxmYCBpbnN0ZWFkIG9mIGB3aW5kb3dgIGZvciBgV2ViV29ya2VyYCBzdXBwb3J0LlxuXHQgIHZhciByb290ID0gKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZiAmJiBzZWxmKSB8fFxuXHQgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWwgJiYgZ2xvYmFsKTtcblx0XG5cdCAgLy8gU2V0IHVwIEJhY2tib25lIGFwcHJvcHJpYXRlbHkgZm9yIHRoZSBlbnZpcm9ubWVudC4gU3RhcnQgd2l0aCBBTUQuXG5cdCAgaWYgKHRydWUpIHtcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLCBleHBvcnRzXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbihfLCAkLCBleHBvcnRzKSB7XG5cdCAgICAgIC8vIEV4cG9ydCBnbG9iYWwgZXZlbiBpbiBBTUQgY2FzZSBpbiBjYXNlIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCB3aXRoXG5cdCAgICAgIC8vIG90aGVycyB0aGF0IG1heSBzdGlsbCBleHBlY3QgYSBnbG9iYWwgQmFja2JvbmUuXG5cdCAgICAgIHJvb3QuQmFja2JvbmUgPSBmYWN0b3J5KHJvb3QsIGV4cG9ydHMsIF8sICQpO1xuXHQgICAgfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHRcblx0ICAvLyBOZXh0IGZvciBOb2RlLmpzIG9yIENvbW1vbkpTLiBqUXVlcnkgbWF5IG5vdCBiZSBuZWVkZWQgYXMgYSBtb2R1bGUuXG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHZhciBfID0gcmVxdWlyZSgndW5kZXJzY29yZScpLCAkO1xuXHQgICAgdHJ5IHsgJCA9IHJlcXVpcmUoJ2pxdWVyeScpOyB9IGNhdGNoIChlKSB7fVxuXHQgICAgZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcblx0XG5cdCAgLy8gRmluYWxseSwgYXMgYSBicm93c2VyIGdsb2JhbC5cblx0ICB9IGVsc2Uge1xuXHQgICAgcm9vdC5CYWNrYm9uZSA9IGZhY3Rvcnkocm9vdCwge30sIHJvb3QuXywgKHJvb3QualF1ZXJ5IHx8IHJvb3QuWmVwdG8gfHwgcm9vdC5lbmRlciB8fCByb290LiQpKTtcblx0ICB9XG5cdFxuXHR9KShmdW5jdGlvbihyb290LCBCYWNrYm9uZSwgXywgJCkge1xuXHRcblx0ICAvLyBJbml0aWFsIFNldHVwXG5cdCAgLy8gLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYEJhY2tib25lYCB2YXJpYWJsZSwgc28gdGhhdCBpdCBjYW4gYmVcblx0ICAvLyByZXN0b3JlZCBsYXRlciBvbiwgaWYgYG5vQ29uZmxpY3RgIGlzIHVzZWQuXG5cdCAgdmFyIHByZXZpb3VzQmFja2JvbmUgPSByb290LkJhY2tib25lO1xuXHRcblx0ICAvLyBDcmVhdGUgYSBsb2NhbCByZWZlcmVuY2UgdG8gYSBjb21tb24gYXJyYXkgbWV0aG9kIHdlJ2xsIHdhbnQgdG8gdXNlIGxhdGVyLlxuXHQgIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblx0XG5cdCAgLy8gQ3VycmVudCB2ZXJzaW9uIG9mIHRoZSBsaWJyYXJ5LiBLZWVwIGluIHN5bmMgd2l0aCBgcGFja2FnZS5qc29uYC5cblx0ICBCYWNrYm9uZS5WRVJTSU9OID0gJzEuMy4zJztcblx0XG5cdCAgLy8gRm9yIEJhY2tib25lJ3MgcHVycG9zZXMsIGpRdWVyeSwgWmVwdG8sIEVuZGVyLCBvciBNeSBMaWJyYXJ5IChraWRkaW5nKSBvd25zXG5cdCAgLy8gdGhlIGAkYCB2YXJpYWJsZS5cblx0ICBCYWNrYm9uZS4kID0gJDtcblx0XG5cdCAgLy8gUnVucyBCYWNrYm9uZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlXG5cdCAgLy8gdG8gaXRzIHByZXZpb3VzIG93bmVyLiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoaXMgQmFja2JvbmUgb2JqZWN0LlxuXHQgIEJhY2tib25lLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJvb3QuQmFja2JvbmUgPSBwcmV2aW91c0JhY2tib25lO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLy8gVHVybiBvbiBgZW11bGF0ZUhUVFBgIHRvIHN1cHBvcnQgbGVnYWN5IEhUVFAgc2VydmVycy4gU2V0dGluZyB0aGlzIG9wdGlvblxuXHQgIC8vIHdpbGwgZmFrZSBgXCJQQVRDSFwiYCwgYFwiUFVUXCJgIGFuZCBgXCJERUxFVEVcImAgcmVxdWVzdHMgdmlhIHRoZSBgX21ldGhvZGAgcGFyYW1ldGVyIGFuZFxuXHQgIC8vIHNldCBhIGBYLUh0dHAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG5cdCAgQmFja2JvbmUuZW11bGF0ZUhUVFAgPSBmYWxzZTtcblx0XG5cdCAgLy8gVHVybiBvbiBgZW11bGF0ZUpTT05gIHRvIHN1cHBvcnQgbGVnYWN5IHNlcnZlcnMgdGhhdCBjYW4ndCBkZWFsIHdpdGggZGlyZWN0XG5cdCAgLy8gYGFwcGxpY2F0aW9uL2pzb25gIHJlcXVlc3RzIC4uLiB0aGlzIHdpbGwgZW5jb2RlIHRoZSBib2R5IGFzXG5cdCAgLy8gYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGAgaW5zdGVhZCBhbmQgd2lsbCBzZW5kIHRoZSBtb2RlbCBpbiBhXG5cdCAgLy8gZm9ybSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuXHQgIEJhY2tib25lLmVtdWxhdGVKU09OID0gZmFsc2U7XG5cdFxuXHQgIC8vIFByb3h5IEJhY2tib25lIGNsYXNzIG1ldGhvZHMgdG8gVW5kZXJzY29yZSBmdW5jdGlvbnMsIHdyYXBwaW5nIHRoZSBtb2RlbCdzXG5cdCAgLy8gYGF0dHJpYnV0ZXNgIG9iamVjdCBvciBjb2xsZWN0aW9uJ3MgYG1vZGVsc2AgYXJyYXkgYmVoaW5kIHRoZSBzY2VuZXMuXG5cdCAgLy9cblx0ICAvLyBjb2xsZWN0aW9uLmZpbHRlcihmdW5jdGlvbihtb2RlbCkgeyByZXR1cm4gbW9kZWwuZ2V0KCdhZ2UnKSA+IDEwIH0pO1xuXHQgIC8vIGNvbGxlY3Rpb24uZWFjaCh0aGlzLmFkZFZpZXcpO1xuXHQgIC8vXG5cdCAgLy8gYEZ1bmN0aW9uI2FwcGx5YCBjYW4gYmUgc2xvdyBzbyB3ZSB1c2UgdGhlIG1ldGhvZCdzIGFyZyBjb3VudCwgaWYgd2Uga25vdyBpdC5cblx0ICB2YXIgYWRkTWV0aG9kID0gZnVuY3Rpb24obGVuZ3RoLCBtZXRob2QsIGF0dHJpYnV0ZSkge1xuXHQgICAgc3dpdGNoIChsZW5ndGgpIHtcblx0ICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0pO1xuXHQgICAgICB9O1xuXHQgICAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCB2YWx1ZSk7XG5cdCAgICAgIH07XG5cdCAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIGNiKGl0ZXJhdGVlLCB0aGlzKSwgY29udGV4dCk7XG5cdCAgICAgIH07XG5cdCAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGl0ZXJhdGVlLCBkZWZhdWx0VmFsLCBjb250ZXh0KSB7XG5cdCAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIGNiKGl0ZXJhdGVlLCB0aGlzKSwgZGVmYXVsdFZhbCwgY29udGV4dCk7XG5cdCAgICAgIH07XG5cdCAgICAgIGRlZmF1bHQ6IHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0ICAgICAgICBhcmdzLnVuc2hpZnQodGhpc1thdHRyaWJ1dGVdKTtcblx0ICAgICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH07XG5cdCAgdmFyIGFkZFVuZGVyc2NvcmVNZXRob2RzID0gZnVuY3Rpb24oQ2xhc3MsIG1ldGhvZHMsIGF0dHJpYnV0ZSkge1xuXHQgICAgXy5lYWNoKG1ldGhvZHMsIGZ1bmN0aW9uKGxlbmd0aCwgbWV0aG9kKSB7XG5cdCAgICAgIGlmIChfW21ldGhvZF0pIENsYXNzLnByb3RvdHlwZVttZXRob2RdID0gYWRkTWV0aG9kKGxlbmd0aCwgbWV0aG9kLCBhdHRyaWJ1dGUpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gU3VwcG9ydCBgY29sbGVjdGlvbi5zb3J0QnkoJ2F0dHInKWAgYW5kIGBjb2xsZWN0aW9uLmZpbmRXaGVyZSh7aWQ6IDF9KWAuXG5cdCAgdmFyIGNiID0gZnVuY3Rpb24oaXRlcmF0ZWUsIGluc3RhbmNlKSB7XG5cdCAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkgcmV0dXJuIGl0ZXJhdGVlO1xuXHQgICAgaWYgKF8uaXNPYmplY3QoaXRlcmF0ZWUpICYmICFpbnN0YW5jZS5faXNNb2RlbChpdGVyYXRlZSkpIHJldHVybiBtb2RlbE1hdGNoZXIoaXRlcmF0ZWUpO1xuXHQgICAgaWYgKF8uaXNTdHJpbmcoaXRlcmF0ZWUpKSByZXR1cm4gZnVuY3Rpb24obW9kZWwpIHsgcmV0dXJuIG1vZGVsLmdldChpdGVyYXRlZSk7IH07XG5cdCAgICByZXR1cm4gaXRlcmF0ZWU7XG5cdCAgfTtcblx0ICB2YXIgbW9kZWxNYXRjaGVyID0gZnVuY3Rpb24oYXR0cnMpIHtcblx0ICAgIHZhciBtYXRjaGVyID0gXy5tYXRjaGVzKGF0dHJzKTtcblx0ICAgIHJldHVybiBmdW5jdGlvbihtb2RlbCkge1xuXHQgICAgICByZXR1cm4gbWF0Y2hlcihtb2RlbC5hdHRyaWJ1dGVzKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gQmFja2JvbmUuRXZlbnRzXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIEEgbW9kdWxlIHRoYXQgY2FuIGJlIG1peGVkIGluIHRvICphbnkgb2JqZWN0KiBpbiBvcmRlciB0byBwcm92aWRlIGl0IHdpdGhcblx0ICAvLyBhIGN1c3RvbSBldmVudCBjaGFubmVsLiBZb3UgbWF5IGJpbmQgYSBjYWxsYmFjayB0byBhbiBldmVudCB3aXRoIGBvbmAgb3Jcblx0ICAvLyByZW1vdmUgd2l0aCBgb2ZmYDsgYHRyaWdnZXJgLWluZyBhbiBldmVudCBmaXJlcyBhbGwgY2FsbGJhY2tzIGluXG5cdCAgLy8gc3VjY2Vzc2lvbi5cblx0ICAvL1xuXHQgIC8vICAgICB2YXIgb2JqZWN0ID0ge307XG5cdCAgLy8gICAgIF8uZXh0ZW5kKG9iamVjdCwgQmFja2JvbmUuRXZlbnRzKTtcblx0ICAvLyAgICAgb2JqZWN0Lm9uKCdleHBhbmQnLCBmdW5jdGlvbigpeyBhbGVydCgnZXhwYW5kZWQnKTsgfSk7XG5cdCAgLy8gICAgIG9iamVjdC50cmlnZ2VyKCdleHBhbmQnKTtcblx0ICAvL1xuXHQgIHZhciBFdmVudHMgPSBCYWNrYm9uZS5FdmVudHMgPSB7fTtcblx0XG5cdCAgLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5ncy5cblx0ICB2YXIgZXZlbnRTcGxpdHRlciA9IC9cXHMrLztcblx0XG5cdCAgLy8gSXRlcmF0ZXMgb3ZlciB0aGUgc3RhbmRhcmQgYGV2ZW50LCBjYWxsYmFja2AgKGFzIHdlbGwgYXMgdGhlIGZhbmN5IG11bHRpcGxlXG5cdCAgLy8gc3BhY2Utc2VwYXJhdGVkIGV2ZW50cyBgXCJjaGFuZ2UgYmx1clwiLCBjYWxsYmFja2AgYW5kIGpRdWVyeS1zdHlsZSBldmVudFxuXHQgIC8vIG1hcHMgYHtldmVudDogY2FsbGJhY2t9YCkuXG5cdCAgdmFyIGV2ZW50c0FwaSA9IGZ1bmN0aW9uKGl0ZXJhdGVlLCBldmVudHMsIG5hbWUsIGNhbGxiYWNrLCBvcHRzKSB7XG5cdCAgICB2YXIgaSA9IDAsIG5hbWVzO1xuXHQgICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIC8vIEhhbmRsZSBldmVudCBtYXBzLlxuXHQgICAgICBpZiAoY2FsbGJhY2sgIT09IHZvaWQgMCAmJiAnY29udGV4dCcgaW4gb3B0cyAmJiBvcHRzLmNvbnRleHQgPT09IHZvaWQgMCkgb3B0cy5jb250ZXh0ID0gY2FsbGJhY2s7XG5cdCAgICAgIGZvciAobmFtZXMgPSBfLmtleXMobmFtZSk7IGkgPCBuYW1lcy5sZW5ndGggOyBpKyspIHtcblx0ICAgICAgICBldmVudHMgPSBldmVudHNBcGkoaXRlcmF0ZWUsIGV2ZW50cywgbmFtZXNbaV0sIG5hbWVbbmFtZXNbaV1dLCBvcHRzKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChuYW1lICYmIGV2ZW50U3BsaXR0ZXIudGVzdChuYW1lKSkge1xuXHQgICAgICAvLyBIYW5kbGUgc3BhY2Utc2VwYXJhdGVkIGV2ZW50IG5hbWVzIGJ5IGRlbGVnYXRpbmcgdGhlbSBpbmRpdmlkdWFsbHkuXG5cdCAgICAgIGZvciAobmFtZXMgPSBuYW1lLnNwbGl0KGV2ZW50U3BsaXR0ZXIpOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBldmVudHMgPSBpdGVyYXRlZShldmVudHMsIG5hbWVzW2ldLCBjYWxsYmFjaywgb3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIEZpbmFsbHksIHN0YW5kYXJkIGV2ZW50cy5cblx0ICAgICAgZXZlbnRzID0gaXRlcmF0ZWUoZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0cyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZXZlbnRzO1xuXHQgIH07XG5cdFxuXHQgIC8vIEJpbmQgYW4gZXZlbnQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLiBQYXNzaW5nIGBcImFsbFwiYCB3aWxsIGJpbmRcblx0ICAvLyB0aGUgY2FsbGJhY2sgdG8gYWxsIGV2ZW50cyBmaXJlZC5cblx0ICBFdmVudHMub24gPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuXHQgICAgcmV0dXJuIGludGVybmFsT24odGhpcywgbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEd1YXJkIHRoZSBgbGlzdGVuaW5nYCBhcmd1bWVudCBmcm9tIHRoZSBwdWJsaWMgQVBJLlxuXHQgIHZhciBpbnRlcm5hbE9uID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaywgY29udGV4dCwgbGlzdGVuaW5nKSB7XG5cdCAgICBvYmouX2V2ZW50cyA9IGV2ZW50c0FwaShvbkFwaSwgb2JqLl9ldmVudHMgfHwge30sIG5hbWUsIGNhbGxiYWNrLCB7XG5cdCAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG5cdCAgICAgIGN0eDogb2JqLFxuXHQgICAgICBsaXN0ZW5pbmc6IGxpc3RlbmluZ1xuXHQgICAgfSk7XG5cdFxuXHQgICAgaWYgKGxpc3RlbmluZykge1xuXHQgICAgICB2YXIgbGlzdGVuZXJzID0gb2JqLl9saXN0ZW5lcnMgfHwgKG9iai5fbGlzdGVuZXJzID0ge30pO1xuXHQgICAgICBsaXN0ZW5lcnNbbGlzdGVuaW5nLmlkXSA9IGxpc3RlbmluZztcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIEludmVyc2lvbi1vZi1jb250cm9sIHZlcnNpb25zIG9mIGBvbmAuIFRlbGwgKnRoaXMqIG9iamVjdCB0byBsaXN0ZW4gdG9cblx0ICAvLyBhbiBldmVudCBpbiBhbm90aGVyIG9iamVjdC4uLiBrZWVwaW5nIHRyYWNrIG9mIHdoYXQgaXQncyBsaXN0ZW5pbmcgdG9cblx0ICAvLyBmb3IgZWFzaWVyIHVuYmluZGluZyBsYXRlci5cblx0ICBFdmVudHMubGlzdGVuVG8gPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAoIW9iaikgcmV0dXJuIHRoaXM7XG5cdCAgICB2YXIgaWQgPSBvYmouX2xpc3RlbklkIHx8IChvYmouX2xpc3RlbklkID0gXy51bmlxdWVJZCgnbCcpKTtcblx0ICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvIHx8ICh0aGlzLl9saXN0ZW5pbmdUbyA9IHt9KTtcblx0ICAgIHZhciBsaXN0ZW5pbmcgPSBsaXN0ZW5pbmdUb1tpZF07XG5cdFxuXHQgICAgLy8gVGhpcyBvYmplY3QgaXMgbm90IGxpc3RlbmluZyB0byBhbnkgb3RoZXIgZXZlbnRzIG9uIGBvYmpgIHlldC5cblx0ICAgIC8vIFNldHVwIHRoZSBuZWNlc3NhcnkgcmVmZXJlbmNlcyB0byB0cmFjayB0aGUgbGlzdGVuaW5nIGNhbGxiYWNrcy5cblx0ICAgIGlmICghbGlzdGVuaW5nKSB7XG5cdCAgICAgIHZhciB0aGlzSWQgPSB0aGlzLl9saXN0ZW5JZCB8fCAodGhpcy5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuXHQgICAgICBsaXN0ZW5pbmcgPSBsaXN0ZW5pbmdUb1tpZF0gPSB7b2JqOiBvYmosIG9iaklkOiBpZCwgaWQ6IHRoaXNJZCwgbGlzdGVuaW5nVG86IGxpc3RlbmluZ1RvLCBjb3VudDogMH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQmluZCBjYWxsYmFja3Mgb24gb2JqLCBhbmQga2VlcCB0cmFjayBvZiB0aGVtIG9uIGxpc3RlbmluZy5cblx0ICAgIGludGVybmFsT24ob2JqLCBuYW1lLCBjYWxsYmFjaywgdGhpcywgbGlzdGVuaW5nKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8vIFRoZSByZWR1Y2luZyBBUEkgdGhhdCBhZGRzIGEgY2FsbGJhY2sgdG8gdGhlIGBldmVudHNgIG9iamVjdC5cblx0ICB2YXIgb25BcGkgPSBmdW5jdGlvbihldmVudHMsIG5hbWUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG5cdCAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdIHx8IChldmVudHNbbmFtZV0gPSBbXSk7XG5cdCAgICAgIHZhciBjb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0LCBjdHggPSBvcHRpb25zLmN0eCwgbGlzdGVuaW5nID0gb3B0aW9ucy5saXN0ZW5pbmc7XG5cdCAgICAgIGlmIChsaXN0ZW5pbmcpIGxpc3RlbmluZy5jb3VudCsrO1xuXHRcblx0ICAgICAgaGFuZGxlcnMucHVzaCh7Y2FsbGJhY2s6IGNhbGxiYWNrLCBjb250ZXh0OiBjb250ZXh0LCBjdHg6IGNvbnRleHQgfHwgY3R4LCBsaXN0ZW5pbmc6IGxpc3RlbmluZ30pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGV2ZW50cztcblx0ICB9O1xuXHRcblx0ICAvLyBSZW1vdmUgb25lIG9yIG1hbnkgY2FsbGJhY2tzLiBJZiBgY29udGV4dGAgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcblx0ICAvLyBjYWxsYmFja3Mgd2l0aCB0aGF0IGZ1bmN0aW9uLiBJZiBgY2FsbGJhY2tgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG5cdCAgLy8gY2FsbGJhY2tzIGZvciB0aGUgZXZlbnQuIElmIGBuYW1lYCBpcyBudWxsLCByZW1vdmVzIGFsbCBib3VuZFxuXHQgIC8vIGNhbGxiYWNrcyBmb3IgYWxsIGV2ZW50cy5cblx0ICBFdmVudHMub2ZmID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcblx0ICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcblx0ICAgIHRoaXMuX2V2ZW50cyA9IGV2ZW50c0FwaShvZmZBcGksIHRoaXMuX2V2ZW50cywgbmFtZSwgY2FsbGJhY2ssIHtcblx0ICAgICAgY29udGV4dDogY29udGV4dCxcblx0ICAgICAgbGlzdGVuZXJzOiB0aGlzLl9saXN0ZW5lcnNcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLy8gVGVsbCB0aGlzIG9iamVjdCB0byBzdG9wIGxpc3RlbmluZyB0byBlaXRoZXIgc3BlY2lmaWMgZXZlbnRzIC4uLiBvclxuXHQgIC8vIHRvIGV2ZXJ5IG9iamVjdCBpdCdzIGN1cnJlbnRseSBsaXN0ZW5pbmcgdG8uXG5cdCAgRXZlbnRzLnN0b3BMaXN0ZW5pbmcgPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG5cdCAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbztcblx0ICAgIGlmICghbGlzdGVuaW5nVG8pIHJldHVybiB0aGlzO1xuXHRcblx0ICAgIHZhciBpZHMgPSBvYmogPyBbb2JqLl9saXN0ZW5JZF0gOiBfLmtleXMobGlzdGVuaW5nVG8pO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBsaXN0ZW5pbmcgPSBsaXN0ZW5pbmdUb1tpZHNbaV1dO1xuXHRcblx0ICAgICAgLy8gSWYgbGlzdGVuaW5nIGRvZXNuJ3QgZXhpc3QsIHRoaXMgb2JqZWN0IGlzIG5vdCBjdXJyZW50bHlcblx0ICAgICAgLy8gbGlzdGVuaW5nIHRvIG9iai4gQnJlYWsgb3V0IGVhcmx5LlxuXHQgICAgICBpZiAoIWxpc3RlbmluZykgYnJlYWs7XG5cdFxuXHQgICAgICBsaXN0ZW5pbmcub2JqLm9mZihuYW1lLCBjYWxsYmFjaywgdGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLy8gVGhlIHJlZHVjaW5nIEFQSSB0aGF0IHJlbW92ZXMgYSBjYWxsYmFjayBmcm9tIHRoZSBgZXZlbnRzYCBvYmplY3QuXG5cdCAgdmFyIG9mZkFwaSA9IGZ1bmN0aW9uKGV2ZW50cywgbmFtZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcblx0ICAgIGlmICghZXZlbnRzKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIGkgPSAwLCBsaXN0ZW5pbmc7XG5cdCAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCwgbGlzdGVuZXJzID0gb3B0aW9ucy5saXN0ZW5lcnM7XG5cdFxuXHQgICAgLy8gRGVsZXRlIGFsbCBldmVudHMgbGlzdGVuZXJzIGFuZCBcImRyb3BcIiBldmVudHMuXG5cdCAgICBpZiAoIW5hbWUgJiYgIWNhbGxiYWNrICYmICFjb250ZXh0KSB7XG5cdCAgICAgIHZhciBpZHMgPSBfLmtleXMobGlzdGVuZXJzKTtcblx0ICAgICAgZm9yICg7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBsaXN0ZW5pbmcgPSBsaXN0ZW5lcnNbaWRzW2ldXTtcblx0ICAgICAgICBkZWxldGUgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF07XG5cdCAgICAgICAgZGVsZXRlIGxpc3RlbmluZy5saXN0ZW5pbmdUb1tsaXN0ZW5pbmcub2JqSWRdO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmFtZXMgPSBuYW1lID8gW25hbWVdIDogXy5rZXlzKGV2ZW50cyk7XG5cdCAgICBmb3IgKDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIG5hbWUgPSBuYW1lc1tpXTtcblx0ICAgICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdO1xuXHRcblx0ICAgICAgLy8gQmFpbCBvdXQgaWYgdGhlcmUgYXJlIG5vIGV2ZW50cyBzdG9yZWQuXG5cdCAgICAgIGlmICghaGFuZGxlcnMpIGJyZWFrO1xuXHRcblx0ICAgICAgLy8gUmVwbGFjZSBldmVudHMgaWYgdGhlcmUgYXJlIGFueSByZW1haW5pbmcuICBPdGhlcndpc2UsIGNsZWFuIHVwLlxuXHQgICAgICB2YXIgcmVtYWluaW5nID0gW107XG5cdCAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGFuZGxlcnMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2pdO1xuXHQgICAgICAgIGlmIChcblx0ICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrICE9PSBoYW5kbGVyLmNhbGxiYWNrICYmXG5cdCAgICAgICAgICAgIGNhbGxiYWNrICE9PSBoYW5kbGVyLmNhbGxiYWNrLl9jYWxsYmFjayB8fFxuXHQgICAgICAgICAgICAgIGNvbnRleHQgJiYgY29udGV4dCAhPT0gaGFuZGxlci5jb250ZXh0XG5cdCAgICAgICAgKSB7XG5cdCAgICAgICAgICByZW1haW5pbmcucHVzaChoYW5kbGVyKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbGlzdGVuaW5nID0gaGFuZGxlci5saXN0ZW5pbmc7XG5cdCAgICAgICAgICBpZiAobGlzdGVuaW5nICYmIC0tbGlzdGVuaW5nLmNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbbGlzdGVuaW5nLmlkXTtcblx0ICAgICAgICAgICAgZGVsZXRlIGxpc3RlbmluZy5saXN0ZW5pbmdUb1tsaXN0ZW5pbmcub2JqSWRdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gVXBkYXRlIHRhaWwgZXZlbnQgaWYgdGhlIGxpc3QgaGFzIGFueSBldmVudHMuICBPdGhlcndpc2UsIGNsZWFuIHVwLlxuXHQgICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCkge1xuXHQgICAgICAgIGV2ZW50c1tuYW1lXSA9IHJlbWFpbmluZztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBkZWxldGUgZXZlbnRzW25hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZXZlbnRzO1xuXHQgIH07XG5cdFxuXHQgIC8vIEJpbmQgYW4gZXZlbnQgdG8gb25seSBiZSB0cmlnZ2VyZWQgYSBzaW5nbGUgdGltZS4gQWZ0ZXIgdGhlIGZpcnN0IHRpbWVcblx0ICAvLyB0aGUgY2FsbGJhY2sgaXMgaW52b2tlZCwgaXRzIGxpc3RlbmVyIHdpbGwgYmUgcmVtb3ZlZC4gSWYgbXVsdGlwbGUgZXZlbnRzXG5cdCAgLy8gYXJlIHBhc3NlZCBpbiB1c2luZyB0aGUgc3BhY2Utc2VwYXJhdGVkIHN5bnRheCwgdGhlIGhhbmRsZXIgd2lsbCBmaXJlXG5cdCAgLy8gb25jZSBmb3IgZWFjaCBldmVudCwgbm90IG9uY2UgZm9yIGEgY29tYmluYXRpb24gb2YgYWxsIGV2ZW50cy5cblx0ICBFdmVudHMub25jZSA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG5cdCAgICAvLyBNYXAgdGhlIGV2ZW50IGludG8gYSBge2V2ZW50OiBvbmNlfWAgb2JqZWN0LlxuXHQgICAgdmFyIGV2ZW50cyA9IGV2ZW50c0FwaShvbmNlTWFwLCB7fSwgbmFtZSwgY2FsbGJhY2ssIF8uYmluZCh0aGlzLm9mZiwgdGhpcykpO1xuXHQgICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyAmJiBjb250ZXh0ID09IG51bGwpIGNhbGxiYWNrID0gdm9pZCAwO1xuXHQgICAgcmV0dXJuIHRoaXMub24oZXZlbnRzLCBjYWxsYmFjaywgY29udGV4dCk7XG5cdCAgfTtcblx0XG5cdCAgLy8gSW52ZXJzaW9uLW9mLWNvbnRyb2wgdmVyc2lvbnMgb2YgYG9uY2VgLlxuXHQgIEV2ZW50cy5saXN0ZW5Ub09uY2UgPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG5cdCAgICAvLyBNYXAgdGhlIGV2ZW50IGludG8gYSBge2V2ZW50OiBvbmNlfWAgb2JqZWN0LlxuXHQgICAgdmFyIGV2ZW50cyA9IGV2ZW50c0FwaShvbmNlTWFwLCB7fSwgbmFtZSwgY2FsbGJhY2ssIF8uYmluZCh0aGlzLnN0b3BMaXN0ZW5pbmcsIHRoaXMsIG9iaikpO1xuXHQgICAgcmV0dXJuIHRoaXMubGlzdGVuVG8ob2JqLCBldmVudHMpO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJlZHVjZXMgdGhlIGV2ZW50IGNhbGxiYWNrcyBpbnRvIGEgbWFwIG9mIGB7ZXZlbnQ6IG9uY2VXcmFwcGVyfWAuXG5cdCAgLy8gYG9mZmVyYCB1bmJpbmRzIHRoZSBgb25jZVdyYXBwZXJgIGFmdGVyIGl0IGhhcyBiZWVuIGNhbGxlZC5cblx0ICB2YXIgb25jZU1hcCA9IGZ1bmN0aW9uKG1hcCwgbmFtZSwgY2FsbGJhY2ssIG9mZmVyKSB7XG5cdCAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIG9uY2UgPSBtYXBbbmFtZV0gPSBfLm9uY2UoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgb2ZmZXIobmFtZSwgb25jZSk7XG5cdCAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIG9uY2UuX2NhbGxiYWNrID0gY2FsbGJhY2s7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbWFwO1xuXHQgIH07XG5cdFxuXHQgIC8vIFRyaWdnZXIgb25lIG9yIG1hbnkgZXZlbnRzLCBmaXJpbmcgYWxsIGJvdW5kIGNhbGxiYWNrcy4gQ2FsbGJhY2tzIGFyZVxuXHQgIC8vIHBhc3NlZCB0aGUgc2FtZSBhcmd1bWVudHMgYXMgYHRyaWdnZXJgIGlzLCBhcGFydCBmcm9tIHRoZSBldmVudCBuYW1lXG5cdCAgLy8gKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrIHRvXG5cdCAgLy8gcmVjZWl2ZSB0aGUgdHJ1ZSBuYW1lIG9mIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQpLlxuXHQgIEV2ZW50cy50cmlnZ2VyID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xuXHRcblx0ICAgIHZhciBsZW5ndGggPSBNYXRoLm1heCgwLCBhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICB2YXIgYXJncyA9IEFycmF5KGxlbmd0aCk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcblx0XG5cdCAgICBldmVudHNBcGkodHJpZ2dlckFwaSwgdGhpcy5fZXZlbnRzLCBuYW1lLCB2b2lkIDAsIGFyZ3MpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLy8gSGFuZGxlcyB0cmlnZ2VyaW5nIHRoZSBhcHByb3ByaWF0ZSBldmVudCBjYWxsYmFja3MuXG5cdCAgdmFyIHRyaWdnZXJBcGkgPSBmdW5jdGlvbihvYmpFdmVudHMsIG5hbWUsIGNhbGxiYWNrLCBhcmdzKSB7XG5cdCAgICBpZiAob2JqRXZlbnRzKSB7XG5cdCAgICAgIHZhciBldmVudHMgPSBvYmpFdmVudHNbbmFtZV07XG5cdCAgICAgIHZhciBhbGxFdmVudHMgPSBvYmpFdmVudHMuYWxsO1xuXHQgICAgICBpZiAoZXZlbnRzICYmIGFsbEV2ZW50cykgYWxsRXZlbnRzID0gYWxsRXZlbnRzLnNsaWNlKCk7XG5cdCAgICAgIGlmIChldmVudHMpIHRyaWdnZXJFdmVudHMoZXZlbnRzLCBhcmdzKTtcblx0ICAgICAgaWYgKGFsbEV2ZW50cykgdHJpZ2dlckV2ZW50cyhhbGxFdmVudHMsIFtuYW1lXS5jb25jYXQoYXJncykpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iakV2ZW50cztcblx0ICB9O1xuXHRcblx0ICAvLyBBIGRpZmZpY3VsdC10by1iZWxpZXZlLCBidXQgb3B0aW1pemVkIGludGVybmFsIGRpc3BhdGNoIGZ1bmN0aW9uIGZvclxuXHQgIC8vIHRyaWdnZXJpbmcgZXZlbnRzLiBUcmllcyB0byBrZWVwIHRoZSB1c3VhbCBjYXNlcyBzcGVlZHkgKG1vc3QgaW50ZXJuYWxcblx0ICAvLyBCYWNrYm9uZSBldmVudHMgaGF2ZSAzIGFyZ3VtZW50cykuXG5cdCAgdmFyIHRyaWdnZXJFdmVudHMgPSBmdW5jdGlvbihldmVudHMsIGFyZ3MpIHtcblx0ICAgIHZhciBldiwgaSA9IC0xLCBsID0gZXZlbnRzLmxlbmd0aCwgYTEgPSBhcmdzWzBdLCBhMiA9IGFyZ3NbMV0sIGEzID0gYXJnc1syXTtcblx0ICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblx0ICAgICAgY2FzZSAwOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCk7IHJldHVybjtcblx0ICAgICAgY2FzZSAxOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEpOyByZXR1cm47XG5cdCAgICAgIGNhc2UgMjogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMik7IHJldHVybjtcblx0ICAgICAgY2FzZSAzOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyLCBhMyk7IHJldHVybjtcblx0ICAgICAgZGVmYXVsdDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suYXBwbHkoZXYuY3R4LCBhcmdzKTsgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8vIEFsaWFzZXMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXHQgIEV2ZW50cy5iaW5kICAgPSBFdmVudHMub247XG5cdCAgRXZlbnRzLnVuYmluZCA9IEV2ZW50cy5vZmY7XG5cdFxuXHQgIC8vIEFsbG93IHRoZSBgQmFja2JvbmVgIG9iamVjdCB0byBzZXJ2ZSBhcyBhIGdsb2JhbCBldmVudCBidXMsIGZvciBmb2xrcyB3aG9cblx0ICAvLyB3YW50IGdsb2JhbCBcInB1YnN1YlwiIGluIGEgY29udmVuaWVudCBwbGFjZS5cblx0ICBfLmV4dGVuZChCYWNrYm9uZSwgRXZlbnRzKTtcblx0XG5cdCAgLy8gQmFja2JvbmUuTW9kZWxcblx0ICAvLyAtLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBCYWNrYm9uZSAqKk1vZGVscyoqIGFyZSB0aGUgYmFzaWMgZGF0YSBvYmplY3QgaW4gdGhlIGZyYW1ld29yayAtLVxuXHQgIC8vIGZyZXF1ZW50bHkgcmVwcmVzZW50aW5nIGEgcm93IGluIGEgdGFibGUgaW4gYSBkYXRhYmFzZSBvbiB5b3VyIHNlcnZlci5cblx0ICAvLyBBIGRpc2NyZXRlIGNodW5rIG9mIGRhdGEgYW5kIGEgYnVuY2ggb2YgdXNlZnVsLCByZWxhdGVkIG1ldGhvZHMgZm9yXG5cdCAgLy8gcGVyZm9ybWluZyBjb21wdXRhdGlvbnMgYW5kIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGF0IGRhdGEuXG5cdFxuXHQgIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlcy4gQSBjbGllbnQgaWQgKGBjaWRgKVxuXHQgIC8vIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGFuZCBhc3NpZ25lZCBmb3IgeW91LlxuXHQgIHZhciBNb2RlbCA9IEJhY2tib25lLk1vZGVsID0gZnVuY3Rpb24oYXR0cmlidXRlcywgb3B0aW9ucykge1xuXHQgICAgdmFyIGF0dHJzID0gYXR0cmlidXRlcyB8fCB7fTtcblx0ICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cdCAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQodGhpcy5jaWRQcmVmaXgpO1xuXHQgICAgdGhpcy5hdHRyaWJ1dGVzID0ge307XG5cdCAgICBpZiAob3B0aW9ucy5jb2xsZWN0aW9uKSB0aGlzLmNvbGxlY3Rpb24gPSBvcHRpb25zLmNvbGxlY3Rpb247XG5cdCAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSB0aGlzLnBhcnNlKGF0dHJzLCBvcHRpb25zKSB8fCB7fTtcblx0ICAgIHZhciBkZWZhdWx0cyA9IF8ucmVzdWx0KHRoaXMsICdkZWZhdWx0cycpO1xuXHQgICAgYXR0cnMgPSBfLmRlZmF1bHRzKF8uZXh0ZW5kKHt9LCBkZWZhdWx0cywgYXR0cnMpLCBkZWZhdWx0cyk7XG5cdCAgICB0aGlzLnNldChhdHRycywgb3B0aW9ucyk7XG5cdCAgICB0aGlzLmNoYW5nZWQgPSB7fTtcblx0ICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEF0dGFjaCBhbGwgaW5oZXJpdGFibGUgbWV0aG9kcyB0byB0aGUgTW9kZWwgcHJvdG90eXBlLlxuXHQgIF8uZXh0ZW5kKE1vZGVsLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cdFxuXHQgICAgLy8gQSBoYXNoIG9mIGF0dHJpYnV0ZXMgd2hvc2UgY3VycmVudCBhbmQgcHJldmlvdXMgdmFsdWUgZGlmZmVyLlxuXHQgICAgY2hhbmdlZDogbnVsbCxcblx0XG5cdCAgICAvLyBUaGUgdmFsdWUgcmV0dXJuZWQgZHVyaW5nIHRoZSBsYXN0IGZhaWxlZCB2YWxpZGF0aW9uLlxuXHQgICAgdmFsaWRhdGlvbkVycm9yOiBudWxsLFxuXHRcblx0ICAgIC8vIFRoZSBkZWZhdWx0IG5hbWUgZm9yIHRoZSBKU09OIGBpZGAgYXR0cmlidXRlIGlzIGBcImlkXCJgLiBNb25nb0RCIGFuZFxuXHQgICAgLy8gQ291Y2hEQiB1c2VycyBtYXkgd2FudCB0byBzZXQgdGhpcyB0byBgXCJfaWRcImAuXG5cdCAgICBpZEF0dHJpYnV0ZTogJ2lkJyxcblx0XG5cdCAgICAvLyBUaGUgcHJlZml4IGlzIHVzZWQgdG8gY3JlYXRlIHRoZSBjbGllbnQgaWQgd2hpY2ggaXMgdXNlZCB0byBpZGVudGlmeSBtb2RlbHMgbG9jYWxseS5cblx0ICAgIC8vIFlvdSBtYXkgd2FudCB0byBvdmVycmlkZSB0aGlzIGlmIHlvdSdyZSBleHBlcmllbmNpbmcgbmFtZSBjbGFzaGVzIHdpdGggbW9kZWwgaWRzLlxuXHQgICAgY2lkUHJlZml4OiAnYycsXG5cdFxuXHQgICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cblx0ICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblx0XG5cdCAgICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBtb2RlbCdzIGBhdHRyaWJ1dGVzYCBvYmplY3QuXG5cdCAgICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQgLS0gYnV0IG92ZXJyaWRlIHRoaXMgaWYgeW91IG5lZWRcblx0ICAgIC8vIGN1c3RvbSBzeW5jaW5nIHNlbWFudGljcyBmb3IgKnRoaXMqIHBhcnRpY3VsYXIgbW9kZWwuXG5cdCAgICBzeW5jOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG5cdCAgICBnZXQ6IGZ1bmN0aW9uKGF0dHIpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gR2V0IHRoZSBIVE1MLWVzY2FwZWQgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuXHQgICAgZXNjYXBlOiBmdW5jdGlvbihhdHRyKSB7XG5cdCAgICAgIHJldHVybiBfLmVzY2FwZSh0aGlzLmdldChhdHRyKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFJldHVybnMgYHRydWVgIGlmIHRoZSBhdHRyaWJ1dGUgY29udGFpbnMgYSB2YWx1ZSB0aGF0IGlzIG5vdCBudWxsXG5cdCAgICAvLyBvciB1bmRlZmluZWQuXG5cdCAgICBoYXM6IGZ1bmN0aW9uKGF0dHIpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZ2V0KGF0dHIpICE9IG51bGw7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFNwZWNpYWwtY2FzZWQgcHJveHkgdG8gdW5kZXJzY29yZSdzIGBfLm1hdGNoZXNgIG1ldGhvZC5cblx0ICAgIG1hdGNoZXM6IGZ1bmN0aW9uKGF0dHJzKSB7XG5cdCAgICAgIHJldHVybiAhIV8uaXRlcmF0ZWUoYXR0cnMsIHRoaXMpKHRoaXMuYXR0cmlidXRlcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcyBvbiB0aGUgb2JqZWN0LCBmaXJpbmcgYFwiY2hhbmdlXCJgLiBUaGlzIGlzXG5cdCAgICAvLyB0aGUgY29yZSBwcmltaXRpdmUgb3BlcmF0aW9uIG9mIGEgbW9kZWwsIHVwZGF0aW5nIHRoZSBkYXRhIGFuZCBub3RpZnlpbmdcblx0ICAgIC8vIGFueW9uZSB3aG8gbmVlZHMgdG8ga25vdyBhYm91dCB0aGUgY2hhbmdlIGluIHN0YXRlLiBUaGUgaGVhcnQgb2YgdGhlIGJlYXN0LlxuXHQgICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuXHQgICAgICBpZiAoa2V5ID09IG51bGwpIHJldHVybiB0aGlzO1xuXHRcblx0ICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cblx0ICAgICAgdmFyIGF0dHJzO1xuXHQgICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBhdHRycyA9IGtleTtcblx0ICAgICAgICBvcHRpb25zID0gdmFsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXHRcblx0ICAgICAgLy8gUnVuIHZhbGlkYXRpb24uXG5cdCAgICAgIGlmICghdGhpcy5fdmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cdFxuXHQgICAgICAvLyBFeHRyYWN0IGF0dHJpYnV0ZXMgYW5kIG9wdGlvbnMuXG5cdCAgICAgIHZhciB1bnNldCAgICAgID0gb3B0aW9ucy51bnNldDtcblx0ICAgICAgdmFyIHNpbGVudCAgICAgPSBvcHRpb25zLnNpbGVudDtcblx0ICAgICAgdmFyIGNoYW5nZXMgICAgPSBbXTtcblx0ICAgICAgdmFyIGNoYW5naW5nICAgPSB0aGlzLl9jaGFuZ2luZztcblx0ICAgICAgdGhpcy5fY2hhbmdpbmcgPSB0cnVlO1xuXHRcblx0ICAgICAgaWYgKCFjaGFuZ2luZykge1xuXHQgICAgICAgIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA9IF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcblx0ICAgICAgICB0aGlzLmNoYW5nZWQgPSB7fTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmF0dHJpYnV0ZXM7XG5cdCAgICAgIHZhciBjaGFuZ2VkID0gdGhpcy5jaGFuZ2VkO1xuXHQgICAgICB2YXIgcHJldiAgICA9IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcztcblx0XG5cdCAgICAgIC8vIEZvciBlYWNoIGBzZXRgIGF0dHJpYnV0ZSwgdXBkYXRlIG9yIGRlbGV0ZSB0aGUgY3VycmVudCB2YWx1ZS5cblx0ICAgICAgZm9yICh2YXIgYXR0ciBpbiBhdHRycykge1xuXHQgICAgICAgIHZhbCA9IGF0dHJzW2F0dHJdO1xuXHQgICAgICAgIGlmICghXy5pc0VxdWFsKGN1cnJlbnRbYXR0cl0sIHZhbCkpIGNoYW5nZXMucHVzaChhdHRyKTtcblx0ICAgICAgICBpZiAoIV8uaXNFcXVhbChwcmV2W2F0dHJdLCB2YWwpKSB7XG5cdCAgICAgICAgICBjaGFuZ2VkW2F0dHJdID0gdmFsO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkZWxldGUgY2hhbmdlZFthdHRyXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdW5zZXQgPyBkZWxldGUgY3VycmVudFthdHRyXSA6IGN1cnJlbnRbYXR0cl0gPSB2YWw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFVwZGF0ZSB0aGUgYGlkYC5cblx0ICAgICAgaWYgKHRoaXMuaWRBdHRyaWJ1dGUgaW4gYXR0cnMpIHRoaXMuaWQgPSB0aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKTtcblx0XG5cdCAgICAgIC8vIFRyaWdnZXIgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZSBjaGFuZ2VzLlxuXHQgICAgICBpZiAoIXNpbGVudCkge1xuXHQgICAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCkgdGhpcy5fcGVuZGluZyA9IG9wdGlvbnM7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZTonICsgY2hhbmdlc1tpXSwgdGhpcywgY3VycmVudFtjaGFuZ2VzW2ldXSwgb3B0aW9ucyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBZb3UgbWlnaHQgYmUgd29uZGVyaW5nIHdoeSB0aGVyZSdzIGEgYHdoaWxlYCBsb29wIGhlcmUuIENoYW5nZXMgY2FuXG5cdCAgICAgIC8vIGJlIHJlY3Vyc2l2ZWx5IG5lc3RlZCB3aXRoaW4gYFwiY2hhbmdlXCJgIGV2ZW50cy5cblx0ICAgICAgaWYgKGNoYW5naW5nKSByZXR1cm4gdGhpcztcblx0ICAgICAgaWYgKCFzaWxlbnQpIHtcblx0ICAgICAgICB3aGlsZSAodGhpcy5fcGVuZGluZykge1xuXHQgICAgICAgICAgb3B0aW9ucyA9IHRoaXMuX3BlbmRpbmc7XG5cdCAgICAgICAgICB0aGlzLl9wZW5kaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9wZW5kaW5nID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX2NoYW5naW5nID0gZmFsc2U7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gdGhlIG1vZGVsLCBmaXJpbmcgYFwiY2hhbmdlXCJgLiBgdW5zZXRgIGlzIGEgbm9vcFxuXHQgICAgLy8gaWYgdGhlIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0LlxuXHQgICAgdW5zZXQ6IGZ1bmN0aW9uKGF0dHIsIG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHIsIHZvaWQgMCwgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt1bnNldDogdHJ1ZX0pKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQ2xlYXIgYWxsIGF0dHJpYnV0ZXMgb24gdGhlIG1vZGVsLCBmaXJpbmcgYFwiY2hhbmdlXCJgLlxuXHQgICAgY2xlYXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIGF0dHJzID0ge307XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmF0dHJpYnV0ZXMpIGF0dHJzW2tleV0gPSB2b2lkIDA7XG5cdCAgICAgIHJldHVybiB0aGlzLnNldChhdHRycywgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt1bnNldDogdHJ1ZX0pKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBtb2RlbCBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCBgXCJjaGFuZ2VcImAgZXZlbnQuXG5cdCAgICAvLyBJZiB5b3Ugc3BlY2lmeSBhbiBhdHRyaWJ1dGUgbmFtZSwgZGV0ZXJtaW5lIGlmIHRoYXQgYXR0cmlidXRlIGhhcyBjaGFuZ2VkLlxuXHQgICAgaGFzQ2hhbmdlZDogZnVuY3Rpb24oYXR0cikge1xuXHQgICAgICBpZiAoYXR0ciA9PSBudWxsKSByZXR1cm4gIV8uaXNFbXB0eSh0aGlzLmNoYW5nZWQpO1xuXHQgICAgICByZXR1cm4gXy5oYXModGhpcy5jaGFuZ2VkLCBhdHRyKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgYXR0cmlidXRlcyB0aGF0IGhhdmUgY2hhbmdlZCwgb3Jcblx0ICAgIC8vIGZhbHNlIGlmIHRoZXJlIGFyZSBubyBjaGFuZ2VkIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3IgZGV0ZXJtaW5pbmcgd2hhdFxuXHQgICAgLy8gcGFydHMgb2YgYSB2aWV3IG5lZWQgdG8gYmUgdXBkYXRlZCBhbmQvb3Igd2hhdCBhdHRyaWJ1dGVzIG5lZWQgdG8gYmVcblx0ICAgIC8vIHBlcnNpc3RlZCB0byB0aGUgc2VydmVyLiBVbnNldCBhdHRyaWJ1dGVzIHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cblx0ICAgIC8vIFlvdSBjYW4gYWxzbyBwYXNzIGFuIGF0dHJpYnV0ZXMgb2JqZWN0IHRvIGRpZmYgYWdhaW5zdCB0aGUgbW9kZWwsXG5cdCAgICAvLyBkZXRlcm1pbmluZyBpZiB0aGVyZSAqd291bGQgYmUqIGEgY2hhbmdlLlxuXHQgICAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGRpZmYpIHtcblx0ICAgICAgaWYgKCFkaWZmKSByZXR1cm4gdGhpcy5oYXNDaGFuZ2VkKCkgPyBfLmNsb25lKHRoaXMuY2hhbmdlZCkgOiBmYWxzZTtcblx0ICAgICAgdmFyIG9sZCA9IHRoaXMuX2NoYW5naW5nID8gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzIDogdGhpcy5hdHRyaWJ1dGVzO1xuXHQgICAgICB2YXIgY2hhbmdlZCA9IHt9O1xuXHQgICAgICBmb3IgKHZhciBhdHRyIGluIGRpZmYpIHtcblx0ICAgICAgICB2YXIgdmFsID0gZGlmZlthdHRyXTtcblx0ICAgICAgICBpZiAoXy5pc0VxdWFsKG9sZFthdHRyXSwgdmFsKSkgY29udGludWU7XG5cdCAgICAgICAgY2hhbmdlZFthdHRyXSA9IHZhbDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gXy5zaXplKGNoYW5nZWQpID8gY2hhbmdlZCA6IGZhbHNlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBHZXQgdGhlIHByZXZpb3VzIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSwgcmVjb3JkZWQgYXQgdGhlIHRpbWUgdGhlIGxhc3Rcblx0ICAgIC8vIGBcImNoYW5nZVwiYCBldmVudCB3YXMgZmlyZWQuXG5cdCAgICBwcmV2aW91czogZnVuY3Rpb24oYXR0cikge1xuXHQgICAgICBpZiAoYXR0ciA9PSBudWxsIHx8ICF0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMpIHJldHVybiBudWxsO1xuXHQgICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzW2F0dHJdO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBHZXQgYWxsIG9mIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBtb2RlbCBhdCB0aGUgdGltZSBvZiB0aGUgcHJldmlvdXNcblx0ICAgIC8vIGBcImNoYW5nZVwiYCBldmVudC5cblx0ICAgIHByZXZpb3VzQXR0cmlidXRlczogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEZldGNoIHRoZSBtb2RlbCBmcm9tIHRoZSBzZXJ2ZXIsIG1lcmdpbmcgdGhlIHJlc3BvbnNlIHdpdGggdGhlIG1vZGVsJ3Ncblx0ICAgIC8vIGxvY2FsIGF0dHJpYnV0ZXMuIEFueSBjaGFuZ2VkIGF0dHJpYnV0ZXMgd2lsbCB0cmlnZ2VyIGEgXCJjaGFuZ2VcIiBldmVudC5cblx0ICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7cGFyc2U6IHRydWV9LCBvcHRpb25zKTtcblx0ICAgICAgdmFyIG1vZGVsID0gdGhpcztcblx0ICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cdCAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcblx0ICAgICAgICB2YXIgc2VydmVyQXR0cnMgPSBvcHRpb25zLnBhcnNlID8gbW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucykgOiByZXNwO1xuXHQgICAgICAgIGlmICghbW9kZWwuc2V0KHNlcnZlckF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG5cdCAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcblx0ICAgICAgfTtcblx0ICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcywgYW5kIHN5bmMgdGhlIG1vZGVsIHRvIHRoZSBzZXJ2ZXIuXG5cdCAgICAvLyBJZiB0aGUgc2VydmVyIHJldHVybnMgYW4gYXR0cmlidXRlcyBoYXNoIHRoYXQgZGlmZmVycywgdGhlIG1vZGVsJ3Ncblx0ICAgIC8vIHN0YXRlIHdpbGwgYmUgYHNldGAgYWdhaW4uXG5cdCAgICBzYXZlOiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuXHQgICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuXHQgICAgICB2YXIgYXR0cnM7XG5cdCAgICAgIGlmIChrZXkgPT0gbnVsbCB8fCB0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGF0dHJzID0ga2V5O1xuXHQgICAgICAgIG9wdGlvbnMgPSB2YWw7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7dmFsaWRhdGU6IHRydWUsIHBhcnNlOiB0cnVlfSwgb3B0aW9ucyk7XG5cdCAgICAgIHZhciB3YWl0ID0gb3B0aW9ucy53YWl0O1xuXHRcblx0ICAgICAgLy8gSWYgd2UncmUgbm90IHdhaXRpbmcgYW5kIGF0dHJpYnV0ZXMgZXhpc3QsIHNhdmUgYWN0cyBhc1xuXHQgICAgICAvLyBgc2V0KGF0dHIpLnNhdmUobnVsbCwgb3B0cylgIHdpdGggdmFsaWRhdGlvbi4gT3RoZXJ3aXNlLCBjaGVjayBpZlxuXHQgICAgICAvLyB0aGUgbW9kZWwgd2lsbCBiZSB2YWxpZCB3aGVuIHRoZSBhdHRyaWJ1dGVzLCBpZiBhbnksIGFyZSBzZXQuXG5cdCAgICAgIGlmIChhdHRycyAmJiAhd2FpdCkge1xuXHQgICAgICAgIGlmICghdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gQWZ0ZXIgYSBzdWNjZXNzZnVsIHNlcnZlci1zaWRlIHNhdmUsIHRoZSBjbGllbnQgaXMgKG9wdGlvbmFsbHkpXG5cdCAgICAgIC8vIHVwZGF0ZWQgd2l0aCB0aGUgc2VydmVyLXNpZGUgc3RhdGUuXG5cdCAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG5cdCAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuXHQgICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcblx0ICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuXHQgICAgICAgIC8vIEVuc3VyZSBhdHRyaWJ1dGVzIGFyZSByZXN0b3JlZCBkdXJpbmcgc3luY2hyb25vdXMgc2F2ZXMuXG5cdCAgICAgICAgbW9kZWwuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG5cdCAgICAgICAgdmFyIHNlcnZlckF0dHJzID0gb3B0aW9ucy5wYXJzZSA/IG1vZGVsLnBhcnNlKHJlc3AsIG9wdGlvbnMpIDogcmVzcDtcblx0ICAgICAgICBpZiAod2FpdCkgc2VydmVyQXR0cnMgPSBfLmV4dGVuZCh7fSwgYXR0cnMsIHNlcnZlckF0dHJzKTtcblx0ICAgICAgICBpZiAoc2VydmVyQXR0cnMgJiYgIW1vZGVsLnNldChzZXJ2ZXJBdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcblx0ICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuXHQgICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblx0XG5cdCAgICAgIC8vIFNldCB0ZW1wb3JhcnkgYXR0cmlidXRlcyBpZiBge3dhaXQ6IHRydWV9YCB0byBwcm9wZXJseSBmaW5kIG5ldyBpZHMuXG5cdCAgICAgIGlmIChhdHRycyAmJiB3YWl0KSB0aGlzLmF0dHJpYnV0ZXMgPSBfLmV4dGVuZCh7fSwgYXR0cmlidXRlcywgYXR0cnMpO1xuXHRcblx0ICAgICAgdmFyIG1ldGhvZCA9IHRoaXMuaXNOZXcoKSA/ICdjcmVhdGUnIDogKG9wdGlvbnMucGF0Y2ggPyAncGF0Y2gnIDogJ3VwZGF0ZScpO1xuXHQgICAgICBpZiAobWV0aG9kID09PSAncGF0Y2gnICYmICFvcHRpb25zLmF0dHJzKSBvcHRpb25zLmF0dHJzID0gYXR0cnM7XG5cdCAgICAgIHZhciB4aHIgPSB0aGlzLnN5bmMobWV0aG9kLCB0aGlzLCBvcHRpb25zKTtcblx0XG5cdCAgICAgIC8vIFJlc3RvcmUgYXR0cmlidXRlcy5cblx0ICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcblx0XG5cdCAgICAgIHJldHVybiB4aHI7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIERlc3Ryb3kgdGhpcyBtb2RlbCBvbiB0aGUgc2VydmVyIGlmIGl0IHdhcyBhbHJlYWR5IHBlcnNpc3RlZC5cblx0ICAgIC8vIE9wdGltaXN0aWNhbGx5IHJlbW92ZXMgdGhlIG1vZGVsIGZyb20gaXRzIGNvbGxlY3Rpb24sIGlmIGl0IGhhcyBvbmUuXG5cdCAgICAvLyBJZiBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCB3YWl0cyBmb3IgdGhlIHNlcnZlciB0byByZXNwb25kIGJlZm9yZSByZW1vdmFsLlxuXHQgICAgZGVzdHJveTogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcblx0ICAgICAgdmFyIG1vZGVsID0gdGhpcztcblx0ICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cdCAgICAgIHZhciB3YWl0ID0gb3B0aW9ucy53YWl0O1xuXHRcblx0ICAgICAgdmFyIGRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICBtb2RlbC5zdG9wTGlzdGVuaW5nKCk7XG5cdCAgICAgICAgbW9kZWwudHJpZ2dlcignZGVzdHJveScsIG1vZGVsLCBtb2RlbC5jb2xsZWN0aW9uLCBvcHRpb25zKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcblx0ICAgICAgICBpZiAod2FpdCkgZGVzdHJveSgpO1xuXHQgICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG5cdCAgICAgICAgaWYgKCFtb2RlbC5pc05ldygpKSBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIHhociA9IGZhbHNlO1xuXHQgICAgICBpZiAodGhpcy5pc05ldygpKSB7XG5cdCAgICAgICAgXy5kZWZlcihvcHRpb25zLnN1Y2Nlc3MpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICB4aHIgPSB0aGlzLnN5bmMoJ2RlbGV0ZScsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghd2FpdCkgZGVzdHJveSgpO1xuXHQgICAgICByZXR1cm4geGhyO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBEZWZhdWx0IFVSTCBmb3IgdGhlIG1vZGVsJ3MgcmVwcmVzZW50YXRpb24gb24gdGhlIHNlcnZlciAtLSBpZiB5b3UncmVcblx0ICAgIC8vIHVzaW5nIEJhY2tib25lJ3MgcmVzdGZ1bCBtZXRob2RzLCBvdmVycmlkZSB0aGlzIHRvIGNoYW5nZSB0aGUgZW5kcG9pbnRcblx0ICAgIC8vIHRoYXQgd2lsbCBiZSBjYWxsZWQuXG5cdCAgICB1cmw6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgYmFzZSA9XG5cdCAgICAgICAgXy5yZXN1bHQodGhpcywgJ3VybFJvb3QnKSB8fFxuXHQgICAgICAgIF8ucmVzdWx0KHRoaXMuY29sbGVjdGlvbiwgJ3VybCcpIHx8XG5cdCAgICAgICAgdXJsRXJyb3IoKTtcblx0ICAgICAgaWYgKHRoaXMuaXNOZXcoKSkgcmV0dXJuIGJhc2U7XG5cdCAgICAgIHZhciBpZCA9IHRoaXMuZ2V0KHRoaXMuaWRBdHRyaWJ1dGUpO1xuXHQgICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC9bXlxcL10kLywgJyQmLycpICsgZW5jb2RlVVJJQ29tcG9uZW50KGlkKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gKipwYXJzZSoqIGNvbnZlcnRzIGEgcmVzcG9uc2UgaW50byB0aGUgaGFzaCBvZiBhdHRyaWJ1dGVzIHRvIGJlIGBzZXRgIG9uXG5cdCAgICAvLyB0aGUgbW9kZWwuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyB0aGUgcmVzcG9uc2UgYWxvbmcuXG5cdCAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuXHQgICAgICByZXR1cm4gcmVzcDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQ3JlYXRlIGEgbmV3IG1vZGVsIHdpdGggaWRlbnRpY2FsIGF0dHJpYnV0ZXMgdG8gdGhpcyBvbmUuXG5cdCAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmF0dHJpYnV0ZXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBBIG1vZGVsIGlzIG5ldyBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBzYXZlZCB0byB0aGUgc2VydmVyLCBhbmQgbGFja3MgYW4gaWQuXG5cdCAgICBpc05ldzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiAhdGhpcy5oYXModGhpcy5pZEF0dHJpYnV0ZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIENoZWNrIGlmIHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgaW4gYSB2YWxpZCBzdGF0ZS5cblx0ICAgIGlzVmFsaWQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRlKHt9LCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3ZhbGlkYXRlOiB0cnVlfSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbnN0IHRoZSBuZXh0IGNvbXBsZXRlIHNldCBvZiBtb2RlbCBhdHRyaWJ1dGVzLFxuXHQgICAgLy8gcmV0dXJuaW5nIGB0cnVlYCBpZiBhbGwgaXMgd2VsbC4gT3RoZXJ3aXNlLCBmaXJlIGFuIGBcImludmFsaWRcImAgZXZlbnQuXG5cdCAgICBfdmFsaWRhdGU6IGZ1bmN0aW9uKGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgICAgIGlmICghb3B0aW9ucy52YWxpZGF0ZSB8fCAhdGhpcy52YWxpZGF0ZSkgcmV0dXJuIHRydWU7XG5cdCAgICAgIGF0dHJzID0gXy5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcywgYXR0cnMpO1xuXHQgICAgICB2YXIgZXJyb3IgPSB0aGlzLnZhbGlkYXRpb25FcnJvciA9IHRoaXMudmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpIHx8IG51bGw7XG5cdCAgICAgIGlmICghZXJyb3IpIHJldHVybiB0cnVlO1xuXHQgICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBlcnJvciwgXy5leHRlbmQob3B0aW9ucywge3ZhbGlkYXRpb25FcnJvcjogZXJyb3J9KSk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgfSk7XG5cdFxuXHQgIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBNb2RlbCwgbWFwcGVkIHRvIHRoZVxuXHQgIC8vIG51bWJlciBvZiBhcmd1bWVudHMgdGhleSB0YWtlLlxuXHQgIHZhciBtb2RlbE1ldGhvZHMgPSB7a2V5czogMSwgdmFsdWVzOiAxLCBwYWlyczogMSwgaW52ZXJ0OiAxLCBwaWNrOiAwLFxuXHQgICAgICBvbWl0OiAwLCBjaGFpbjogMSwgaXNFbXB0eTogMX07XG5cdFxuXHQgIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYE1vZGVsI2F0dHJpYnV0ZXNgLlxuXHQgIGFkZFVuZGVyc2NvcmVNZXRob2RzKE1vZGVsLCBtb2RlbE1ldGhvZHMsICdhdHRyaWJ1dGVzJyk7XG5cdFxuXHQgIC8vIEJhY2tib25lLkNvbGxlY3Rpb25cblx0ICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIElmIG1vZGVscyB0ZW5kIHRvIHJlcHJlc2VudCBhIHNpbmdsZSByb3cgb2YgZGF0YSwgYSBCYWNrYm9uZSBDb2xsZWN0aW9uIGlzXG5cdCAgLy8gbW9yZSBhbmFsb2dvdXMgdG8gYSB0YWJsZSBmdWxsIG9mIGRhdGEgLi4uIG9yIGEgc21hbGwgc2xpY2Ugb3IgcGFnZSBvZiB0aGF0XG5cdCAgLy8gdGFibGUsIG9yIGEgY29sbGVjdGlvbiBvZiByb3dzIHRoYXQgYmVsb25nIHRvZ2V0aGVyIGZvciBhIHBhcnRpY3VsYXIgcmVhc29uXG5cdCAgLy8gLS0gYWxsIG9mIHRoZSBtZXNzYWdlcyBpbiB0aGlzIHBhcnRpY3VsYXIgZm9sZGVyLCBhbGwgb2YgdGhlIGRvY3VtZW50c1xuXHQgIC8vIGJlbG9uZ2luZyB0byB0aGlzIHBhcnRpY3VsYXIgYXV0aG9yLCBhbmQgc28gb24uIENvbGxlY3Rpb25zIG1haW50YWluXG5cdCAgLy8gaW5kZXhlcyBvZiB0aGVpciBtb2RlbHMsIGJvdGggaW4gb3JkZXIsIGFuZCBmb3IgbG9va3VwIGJ5IGBpZGAuXG5cdFxuXHQgIC8vIENyZWF0ZSBhIG5ldyAqKkNvbGxlY3Rpb24qKiwgcGVyaGFwcyB0byBjb250YWluIGEgc3BlY2lmaWMgdHlwZSBvZiBgbW9kZWxgLlxuXHQgIC8vIElmIGEgYGNvbXBhcmF0b3JgIGlzIHNwZWNpZmllZCwgdGhlIENvbGxlY3Rpb24gd2lsbCBtYWludGFpblxuXHQgIC8vIGl0cyBtb2RlbHMgaW4gc29ydCBvcmRlciwgYXMgdGhleSdyZSBhZGRlZCBhbmQgcmVtb3ZlZC5cblx0ICB2YXIgQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24gPSBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cdCAgICBpZiAob3B0aW9ucy5tb2RlbCkgdGhpcy5tb2RlbCA9IG9wdGlvbnMubW9kZWw7XG5cdCAgICBpZiAob3B0aW9ucy5jb21wYXJhdG9yICE9PSB2b2lkIDApIHRoaXMuY29tcGFyYXRvciA9IG9wdGlvbnMuY29tcGFyYXRvcjtcblx0ICAgIHRoaXMuX3Jlc2V0KCk7XG5cdCAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIGlmIChtb2RlbHMpIHRoaXMucmVzZXQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuXHQgIH07XG5cdFxuXHQgIC8vIERlZmF1bHQgb3B0aW9ucyBmb3IgYENvbGxlY3Rpb24jc2V0YC5cblx0ICB2YXIgc2V0T3B0aW9ucyA9IHthZGQ6IHRydWUsIHJlbW92ZTogdHJ1ZSwgbWVyZ2U6IHRydWV9O1xuXHQgIHZhciBhZGRPcHRpb25zID0ge2FkZDogdHJ1ZSwgcmVtb3ZlOiBmYWxzZX07XG5cdFxuXHQgIC8vIFNwbGljZXMgYGluc2VydGAgaW50byBgYXJyYXlgIGF0IGluZGV4IGBhdGAuXG5cdCAgdmFyIHNwbGljZSA9IGZ1bmN0aW9uKGFycmF5LCBpbnNlcnQsIGF0KSB7XG5cdCAgICBhdCA9IE1hdGgubWluKE1hdGgubWF4KGF0LCAwKSwgYXJyYXkubGVuZ3RoKTtcblx0ICAgIHZhciB0YWlsID0gQXJyYXkoYXJyYXkubGVuZ3RoIC0gYXQpO1xuXHQgICAgdmFyIGxlbmd0aCA9IGluc2VydC5sZW5ndGg7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCB0YWlsLmxlbmd0aDsgaSsrKSB0YWlsW2ldID0gYXJyYXlbaSArIGF0XTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYXJyYXlbaSArIGF0XSA9IGluc2VydFtpXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCB0YWlsLmxlbmd0aDsgaSsrKSBhcnJheVtpICsgbGVuZ3RoICsgYXRdID0gdGFpbFtpXTtcblx0ICB9O1xuXHRcblx0ICAvLyBEZWZpbmUgdGhlIENvbGxlY3Rpb24ncyBpbmhlcml0YWJsZSBtZXRob2RzLlxuXHQgIF8uZXh0ZW5kKENvbGxlY3Rpb24ucHJvdG90eXBlLCBFdmVudHMsIHtcblx0XG5cdCAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBmb3IgYSBjb2xsZWN0aW9uIGlzIGp1c3QgYSAqKkJhY2tib25lLk1vZGVsKiouXG5cdCAgICAvLyBUaGlzIHNob3VsZCBiZSBvdmVycmlkZGVuIGluIG1vc3QgY2FzZXMuXG5cdCAgICBtb2RlbDogTW9kZWwsXG5cdFxuXHQgICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cblx0ICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblx0XG5cdCAgICAvLyBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIENvbGxlY3Rpb24gaXMgYW4gYXJyYXkgb2YgdGhlXG5cdCAgICAvLyBtb2RlbHMnIGF0dHJpYnV0ZXMuXG5cdCAgICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKG1vZGVsKSB7IHJldHVybiBtb2RlbC50b0pTT04ob3B0aW9ucyk7IH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBQcm94eSBgQmFja2JvbmUuc3luY2AgYnkgZGVmYXVsdC5cblx0ICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBBZGQgYSBtb2RlbCwgb3IgbGlzdCBvZiBtb2RlbHMgdG8gdGhlIHNldC4gYG1vZGVsc2AgbWF5IGJlIEJhY2tib25lXG5cdCAgICAvLyBNb2RlbHMgb3IgcmF3IEphdmFTY3JpcHQgb2JqZWN0cyB0byBiZSBjb252ZXJ0ZWQgdG8gTW9kZWxzLCBvciBhbnlcblx0ICAgIC8vIGNvbWJpbmF0aW9uIG9mIHRoZSB0d28uXG5cdCAgICBhZGQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuXHQgICAgICByZXR1cm4gdGhpcy5zZXQobW9kZWxzLCBfLmV4dGVuZCh7bWVyZ2U6IGZhbHNlfSwgb3B0aW9ucywgYWRkT3B0aW9ucykpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZW1vdmUgYSBtb2RlbCwgb3IgYSBsaXN0IG9mIG1vZGVscyBmcm9tIHRoZSBzZXQuXG5cdCAgICByZW1vdmU6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0gXy5leHRlbmQoe30sIG9wdGlvbnMpO1xuXHQgICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG5cdCAgICAgIG1vZGVscyA9IHNpbmd1bGFyID8gW21vZGVsc10gOiBtb2RlbHMuc2xpY2UoKTtcblx0ICAgICAgdmFyIHJlbW92ZWQgPSB0aGlzLl9yZW1vdmVNb2RlbHMobW9kZWxzLCBvcHRpb25zKTtcblx0ICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCAmJiByZW1vdmVkLmxlbmd0aCkge1xuXHQgICAgICAgIG9wdGlvbnMuY2hhbmdlcyA9IHthZGRlZDogW10sIG1lcmdlZDogW10sIHJlbW92ZWQ6IHJlbW92ZWR9O1xuXHQgICAgICAgIHRoaXMudHJpZ2dlcigndXBkYXRlJywgdGhpcywgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHNpbmd1bGFyID8gcmVtb3ZlZFswXSA6IHJlbW92ZWQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFVwZGF0ZSBhIGNvbGxlY3Rpb24gYnkgYHNldGAtaW5nIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCBhZGRpbmcgbmV3IG9uZXMsXG5cdCAgICAvLyByZW1vdmluZyBtb2RlbHMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQsIGFuZCBtZXJnaW5nIG1vZGVscyB0aGF0XG5cdCAgICAvLyBhbHJlYWR5IGV4aXN0IGluIHRoZSBjb2xsZWN0aW9uLCBhcyBuZWNlc3NhcnkuIFNpbWlsYXIgdG8gKipNb2RlbCNzZXQqKixcblx0ICAgIC8vIHRoZSBjb3JlIG9wZXJhdGlvbiBmb3IgdXBkYXRpbmcgdGhlIGRhdGEgY29udGFpbmVkIGJ5IHRoZSBjb2xsZWN0aW9uLlxuXHQgICAgc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcblx0ICAgICAgaWYgKG1vZGVscyA9PSBudWxsKSByZXR1cm47XG5cdFxuXHQgICAgICBvcHRpb25zID0gXy5leHRlbmQoe30sIHNldE9wdGlvbnMsIG9wdGlvbnMpO1xuXHQgICAgICBpZiAob3B0aW9ucy5wYXJzZSAmJiAhdGhpcy5faXNNb2RlbChtb2RlbHMpKSB7XG5cdCAgICAgICAgbW9kZWxzID0gdGhpcy5wYXJzZShtb2RlbHMsIG9wdGlvbnMpIHx8IFtdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG5cdCAgICAgIG1vZGVscyA9IHNpbmd1bGFyID8gW21vZGVsc10gOiBtb2RlbHMuc2xpY2UoKTtcblx0XG5cdCAgICAgIHZhciBhdCA9IG9wdGlvbnMuYXQ7XG5cdCAgICAgIGlmIChhdCAhPSBudWxsKSBhdCA9ICthdDtcblx0ICAgICAgaWYgKGF0ID4gdGhpcy5sZW5ndGgpIGF0ID0gdGhpcy5sZW5ndGg7XG5cdCAgICAgIGlmIChhdCA8IDApIGF0ICs9IHRoaXMubGVuZ3RoICsgMTtcblx0XG5cdCAgICAgIHZhciBzZXQgPSBbXTtcblx0ICAgICAgdmFyIHRvQWRkID0gW107XG5cdCAgICAgIHZhciB0b01lcmdlID0gW107XG5cdCAgICAgIHZhciB0b1JlbW92ZSA9IFtdO1xuXHQgICAgICB2YXIgbW9kZWxNYXAgPSB7fTtcblx0XG5cdCAgICAgIHZhciBhZGQgPSBvcHRpb25zLmFkZDtcblx0ICAgICAgdmFyIG1lcmdlID0gb3B0aW9ucy5tZXJnZTtcblx0ICAgICAgdmFyIHJlbW92ZSA9IG9wdGlvbnMucmVtb3ZlO1xuXHRcblx0ICAgICAgdmFyIHNvcnQgPSBmYWxzZTtcblx0ICAgICAgdmFyIHNvcnRhYmxlID0gdGhpcy5jb21wYXJhdG9yICYmIGF0ID09IG51bGwgJiYgb3B0aW9ucy5zb3J0ICE9PSBmYWxzZTtcblx0ICAgICAgdmFyIHNvcnRBdHRyID0gXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpID8gdGhpcy5jb21wYXJhdG9yIDogbnVsbDtcblx0XG5cdCAgICAgIC8vIFR1cm4gYmFyZSBvYmplY3RzIGludG8gbW9kZWwgcmVmZXJlbmNlcywgYW5kIHByZXZlbnQgaW52YWxpZCBtb2RlbHNcblx0ICAgICAgLy8gZnJvbSBiZWluZyBhZGRlZC5cblx0ICAgICAgdmFyIG1vZGVsLCBpO1xuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgbW9kZWxzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgbW9kZWwgPSBtb2RlbHNbaV07XG5cdFxuXHQgICAgICAgIC8vIElmIGEgZHVwbGljYXRlIGlzIGZvdW5kLCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgYWRkZWQgYW5kXG5cdCAgICAgICAgLy8gb3B0aW9uYWxseSBtZXJnZSBpdCBpbnRvIHRoZSBleGlzdGluZyBtb2RlbC5cblx0ICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChtb2RlbCk7XG5cdCAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG5cdCAgICAgICAgICBpZiAobWVyZ2UgJiYgbW9kZWwgIT09IGV4aXN0aW5nKSB7XG5cdCAgICAgICAgICAgIHZhciBhdHRycyA9IHRoaXMuX2lzTW9kZWwobW9kZWwpID8gbW9kZWwuYXR0cmlidXRlcyA6IG1vZGVsO1xuXHQgICAgICAgICAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSBleGlzdGluZy5wYXJzZShhdHRycywgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgIGV4aXN0aW5nLnNldChhdHRycywgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgIHRvTWVyZ2UucHVzaChleGlzdGluZyk7XG5cdCAgICAgICAgICAgIGlmIChzb3J0YWJsZSAmJiAhc29ydCkgc29ydCA9IGV4aXN0aW5nLmhhc0NoYW5nZWQoc29ydEF0dHIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKCFtb2RlbE1hcFtleGlzdGluZy5jaWRdKSB7XG5cdCAgICAgICAgICAgIG1vZGVsTWFwW2V4aXN0aW5nLmNpZF0gPSB0cnVlO1xuXHQgICAgICAgICAgICBzZXQucHVzaChleGlzdGluZyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBtb2RlbHNbaV0gPSBleGlzdGluZztcblx0XG5cdCAgICAgICAgLy8gSWYgdGhpcyBpcyBhIG5ldywgdmFsaWQgbW9kZWwsIHB1c2ggaXQgdG8gdGhlIGB0b0FkZGAgbGlzdC5cblx0ICAgICAgICB9IGVsc2UgaWYgKGFkZCkge1xuXHQgICAgICAgICAgbW9kZWwgPSBtb2RlbHNbaV0gPSB0aGlzLl9wcmVwYXJlTW9kZWwobW9kZWwsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgICAgIHRvQWRkLnB1c2gobW9kZWwpO1xuXHQgICAgICAgICAgICB0aGlzLl9hZGRSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICBtb2RlbE1hcFttb2RlbC5jaWRdID0gdHJ1ZTtcblx0ICAgICAgICAgICAgc2V0LnB1c2gobW9kZWwpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUmVtb3ZlIHN0YWxlIG1vZGVscy5cblx0ICAgICAgaWYgKHJlbW92ZSkge1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBtb2RlbCA9IHRoaXMubW9kZWxzW2ldO1xuXHQgICAgICAgICAgaWYgKCFtb2RlbE1hcFttb2RlbC5jaWRdKSB0b1JlbW92ZS5wdXNoKG1vZGVsKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCkgdGhpcy5fcmVtb3ZlTW9kZWxzKHRvUmVtb3ZlLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gU2VlIGlmIHNvcnRpbmcgaXMgbmVlZGVkLCB1cGRhdGUgYGxlbmd0aGAgYW5kIHNwbGljZSBpbiBuZXcgbW9kZWxzLlxuXHQgICAgICB2YXIgb3JkZXJDaGFuZ2VkID0gZmFsc2U7XG5cdCAgICAgIHZhciByZXBsYWNlID0gIXNvcnRhYmxlICYmIGFkZCAmJiByZW1vdmU7XG5cdCAgICAgIGlmIChzZXQubGVuZ3RoICYmIHJlcGxhY2UpIHtcblx0ICAgICAgICBvcmRlckNoYW5nZWQgPSB0aGlzLmxlbmd0aCAhPT0gc2V0Lmxlbmd0aCB8fCBfLnNvbWUodGhpcy5tb2RlbHMsIGZ1bmN0aW9uKG0sIGluZGV4KSB7XG5cdCAgICAgICAgICByZXR1cm4gbSAhPT0gc2V0W2luZGV4XTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB0aGlzLm1vZGVscy5sZW5ndGggPSAwO1xuXHQgICAgICAgIHNwbGljZSh0aGlzLm1vZGVscywgc2V0LCAwKTtcblx0ICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubW9kZWxzLmxlbmd0aDtcblx0ICAgICAgfSBlbHNlIGlmICh0b0FkZC5sZW5ndGgpIHtcblx0ICAgICAgICBpZiAoc29ydGFibGUpIHNvcnQgPSB0cnVlO1xuXHQgICAgICAgIHNwbGljZSh0aGlzLm1vZGVscywgdG9BZGQsIGF0ID09IG51bGwgPyB0aGlzLmxlbmd0aCA6IGF0KTtcblx0ICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubW9kZWxzLmxlbmd0aDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gU2lsZW50bHkgc29ydCB0aGUgY29sbGVjdGlvbiBpZiBhcHByb3ByaWF0ZS5cblx0ICAgICAgaWYgKHNvcnQpIHRoaXMuc29ydCh7c2lsZW50OiB0cnVlfSk7XG5cdFxuXHQgICAgICAvLyBVbmxlc3Mgc2lsZW5jZWQsIGl0J3MgdGltZSB0byBmaXJlIGFsbCBhcHByb3ByaWF0ZSBhZGQvc29ydC91cGRhdGUgZXZlbnRzLlxuXHQgICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IHRvQWRkLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICBpZiAoYXQgIT0gbnVsbCkgb3B0aW9ucy5pbmRleCA9IGF0ICsgaTtcblx0ICAgICAgICAgIG1vZGVsID0gdG9BZGRbaV07XG5cdCAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdhZGQnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzb3J0IHx8IG9yZGVyQ2hhbmdlZCkgdGhpcy50cmlnZ2VyKCdzb3J0JywgdGhpcywgb3B0aW9ucyk7XG5cdCAgICAgICAgaWYgKHRvQWRkLmxlbmd0aCB8fCB0b1JlbW92ZS5sZW5ndGggfHwgdG9NZXJnZS5sZW5ndGgpIHtcblx0ICAgICAgICAgIG9wdGlvbnMuY2hhbmdlcyA9IHtcblx0ICAgICAgICAgICAgYWRkZWQ6IHRvQWRkLFxuXHQgICAgICAgICAgICByZW1vdmVkOiB0b1JlbW92ZSxcblx0ICAgICAgICAgICAgbWVyZ2VkOiB0b01lcmdlXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgICAgdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFJldHVybiB0aGUgYWRkZWQgKG9yIG1lcmdlZCkgbW9kZWwgKG9yIG1vZGVscykuXG5cdCAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gV2hlbiB5b3UgaGF2ZSBtb3JlIGl0ZW1zIHRoYW4geW91IHdhbnQgdG8gYWRkIG9yIHJlbW92ZSBpbmRpdmlkdWFsbHksXG5cdCAgICAvLyB5b3UgY2FuIHJlc2V0IHRoZSBlbnRpcmUgc2V0IHdpdGggYSBuZXcgbGlzdCBvZiBtb2RlbHMsIHdpdGhvdXQgZmlyaW5nXG5cdCAgICAvLyBhbnkgZ3JhbnVsYXIgYGFkZGAgb3IgYHJlbW92ZWAgZXZlbnRzLiBGaXJlcyBgcmVzZXRgIHdoZW4gZmluaXNoZWQuXG5cdCAgICAvLyBVc2VmdWwgZm9yIGJ1bGsgb3BlcmF0aW9ucyBhbmQgb3B0aW1pemF0aW9ucy5cblx0ICAgIHJlc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2RlbHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UodGhpcy5tb2RlbHNbaV0sIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIG9wdGlvbnMucHJldmlvdXNNb2RlbHMgPSB0aGlzLm1vZGVscztcblx0ICAgICAgdGhpcy5fcmVzZXQoKTtcblx0ICAgICAgbW9kZWxzID0gdGhpcy5hZGQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuXHQgICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3Jlc2V0JywgdGhpcywgb3B0aW9ucyk7XG5cdCAgICAgIHJldHVybiBtb2RlbHM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG5cdCAgICBwdXNoOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuXHQgICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogdGhpcy5sZW5ndGh9LCBvcHRpb25zKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cblx0ICAgIHBvcDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgICB2YXIgbW9kZWwgPSB0aGlzLmF0KHRoaXMubGVuZ3RoIC0gMSk7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbGxlY3Rpb24uXG5cdCAgICB1bnNoaWZ0OiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuXHQgICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogMH0sIG9wdGlvbnMpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuXHQgICAgc2hpZnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCgwKTtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gU2xpY2Ugb3V0IGEgc3ViLWFycmF5IG9mIG1vZGVscyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuXHQgICAgc2xpY2U6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gc2xpY2UuYXBwbHkodGhpcy5tb2RlbHMsIGFyZ3VtZW50cyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEdldCBhIG1vZGVsIGZyb20gdGhlIHNldCBieSBpZCwgY2lkLCBtb2RlbCBvYmplY3Qgd2l0aCBpZCBvciBjaWRcblx0ICAgIC8vIHByb3BlcnRpZXMsIG9yIGFuIGF0dHJpYnV0ZXMgb2JqZWN0IHRoYXQgaXMgdHJhbnNmb3JtZWQgdGhyb3VnaCBtb2RlbElkLlxuXHQgICAgZ2V0OiBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuXHQgICAgICByZXR1cm4gdGhpcy5fYnlJZFtvYmpdIHx8XG5cdCAgICAgICAgdGhpcy5fYnlJZFt0aGlzLm1vZGVsSWQob2JqLmF0dHJpYnV0ZXMgfHwgb2JqKV0gfHxcblx0ICAgICAgICBvYmouY2lkICYmIHRoaXMuX2J5SWRbb2JqLmNpZF07XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFJldHVybnMgYHRydWVgIGlmIHRoZSBtb2RlbCBpcyBpbiB0aGUgY29sbGVjdGlvbi5cblx0ICAgIGhhczogZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmdldChvYmopICE9IG51bGw7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEdldCB0aGUgbW9kZWwgYXQgdGhlIGdpdmVuIGluZGV4LlxuXHQgICAgYXQ6IGZ1bmN0aW9uKGluZGV4KSB7XG5cdCAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ICs9IHRoaXMubGVuZ3RoO1xuXHQgICAgICByZXR1cm4gdGhpcy5tb2RlbHNbaW5kZXhdO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZXR1cm4gbW9kZWxzIHdpdGggbWF0Y2hpbmcgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBzaW1wbGUgY2FzZXMgb2Zcblx0ICAgIC8vIGBmaWx0ZXJgLlxuXHQgICAgd2hlcmU6IGZ1bmN0aW9uKGF0dHJzLCBmaXJzdCkge1xuXHQgICAgICByZXR1cm4gdGhpc1tmaXJzdCA/ICdmaW5kJyA6ICdmaWx0ZXInXShhdHRycyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFJldHVybiB0aGUgZmlyc3QgbW9kZWwgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlc1xuXHQgICAgLy8gb2YgYGZpbmRgLlxuXHQgICAgZmluZFdoZXJlOiBmdW5jdGlvbihhdHRycykge1xuXHQgICAgICByZXR1cm4gdGhpcy53aGVyZShhdHRycywgdHJ1ZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEZvcmNlIHRoZSBjb2xsZWN0aW9uIHRvIHJlLXNvcnQgaXRzZWxmLiBZb3UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgdW5kZXJcblx0ICAgIC8vIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBhcyB0aGUgc2V0IHdpbGwgbWFpbnRhaW4gc29ydCBvcmRlciBhcyBlYWNoIGl0ZW1cblx0ICAgIC8vIGlzIGFkZGVkLlxuXHQgICAgc29ydDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgICB2YXIgY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvcjtcblx0ICAgICAgaWYgKCFjb21wYXJhdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzb3J0IGEgc2V0IHdpdGhvdXQgYSBjb21wYXJhdG9yJyk7XG5cdCAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cdFxuXHQgICAgICB2YXIgbGVuZ3RoID0gY29tcGFyYXRvci5sZW5ndGg7XG5cdCAgICAgIGlmIChfLmlzRnVuY3Rpb24oY29tcGFyYXRvcikpIGNvbXBhcmF0b3IgPSBfLmJpbmQoY29tcGFyYXRvciwgdGhpcyk7XG5cdFxuXHQgICAgICAvLyBSdW4gc29ydCBiYXNlZCBvbiB0eXBlIG9mIGBjb21wYXJhdG9yYC5cblx0ICAgICAgaWYgKGxlbmd0aCA9PT0gMSB8fCBfLmlzU3RyaW5nKGNvbXBhcmF0b3IpKSB7XG5cdCAgICAgICAgdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeShjb21wYXJhdG9yKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLm1vZGVscy5zb3J0KGNvbXBhcmF0b3IpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUGx1Y2sgYW4gYXR0cmlidXRlIGZyb20gZWFjaCBtb2RlbCBpbiB0aGUgY29sbGVjdGlvbi5cblx0ICAgIHBsdWNrOiBmdW5jdGlvbihhdHRyKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLm1hcChhdHRyICsgJycpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBGZXRjaCB0aGUgZGVmYXVsdCBzZXQgb2YgbW9kZWxzIGZvciB0aGlzIGNvbGxlY3Rpb24sIHJlc2V0dGluZyB0aGVcblx0ICAgIC8vIGNvbGxlY3Rpb24gd2hlbiB0aGV5IGFycml2ZS4gSWYgYHJlc2V0OiB0cnVlYCBpcyBwYXNzZWQsIHRoZSByZXNwb25zZVxuXHQgICAgLy8gZGF0YSB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoIHRoZSBgcmVzZXRgIG1ldGhvZCBpbnN0ZWFkIG9mIGBzZXRgLlxuXHQgICAgZmV0Y2g6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHtwYXJzZTogdHJ1ZX0sIG9wdGlvbnMpO1xuXHQgICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2Vzcztcblx0ICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuXHQgICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG5cdCAgICAgICAgdmFyIG1ldGhvZCA9IG9wdGlvbnMucmVzZXQgPyAncmVzZXQnIDogJ3NldCc7XG5cdCAgICAgICAgY29sbGVjdGlvblttZXRob2RdKHJlc3AsIG9wdGlvbnMpO1xuXHQgICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcblx0ICAgICAgICBjb2xsZWN0aW9uLnRyaWdnZXIoJ3N5bmMnLCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcblx0ICAgICAgfTtcblx0ICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBhIG1vZGVsIGluIHRoaXMgY29sbGVjdGlvbi4gQWRkIHRoZSBtb2RlbCB0byB0aGVcblx0ICAgIC8vIGNvbGxlY3Rpb24gaW1tZWRpYXRlbHksIHVubGVzcyBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCBpbiB3aGljaCBjYXNlIHdlXG5cdCAgICAvLyB3YWl0IGZvciB0aGUgc2VydmVyIHRvIGFncmVlLlxuXHQgICAgY3JlYXRlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcblx0ICAgICAgdmFyIHdhaXQgPSBvcHRpb25zLndhaXQ7XG5cdCAgICAgIG1vZGVsID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKTtcblx0ICAgICAgaWYgKCFtb2RlbCkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICBpZiAoIXdhaXQpIHRoaXMuYWRkKG1vZGVsLCBvcHRpb25zKTtcblx0ICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuXHQgICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2Vzcztcblx0ICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24obSwgcmVzcCwgY2FsbGJhY2tPcHRzKSB7XG5cdCAgICAgICAgaWYgKHdhaXQpIGNvbGxlY3Rpb24uYWRkKG0sIGNhbGxiYWNrT3B0cyk7XG5cdCAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChjYWxsYmFja09wdHMuY29udGV4dCwgbSwgcmVzcCwgY2FsbGJhY2tPcHRzKTtcblx0ICAgICAgfTtcblx0ICAgICAgbW9kZWwuc2F2ZShudWxsLCBvcHRpb25zKTtcblx0ICAgICAgcmV0dXJuIG1vZGVsO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyAqKnBhcnNlKiogY29udmVydHMgYSByZXNwb25zZSBpbnRvIGEgbGlzdCBvZiBtb2RlbHMgdG8gYmUgYWRkZWQgdG8gdGhlXG5cdCAgICAvLyBjb2xsZWN0aW9uLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgaXQgdGhyb3VnaC5cblx0ICAgIHBhcnNlOiBmdW5jdGlvbihyZXNwLCBvcHRpb25zKSB7XG5cdCAgICAgIHJldHVybiByZXNwO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBDcmVhdGUgYSBuZXcgY29sbGVjdGlvbiB3aXRoIGFuIGlkZW50aWNhbCBsaXN0IG9mIG1vZGVscyBhcyB0aGlzIG9uZS5cblx0ICAgIGNsb25lOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMubW9kZWxzLCB7XG5cdCAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG5cdCAgICAgICAgY29tcGFyYXRvcjogdGhpcy5jb21wYXJhdG9yXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBEZWZpbmUgaG93IHRvIHVuaXF1ZWx5IGlkZW50aWZ5IG1vZGVscyBpbiB0aGUgY29sbGVjdGlvbi5cblx0ICAgIG1vZGVsSWQ6IGZ1bmN0aW9uKGF0dHJzKSB7XG5cdCAgICAgIHJldHVybiBhdHRyc1t0aGlzLm1vZGVsLnByb3RvdHlwZS5pZEF0dHJpYnV0ZSB8fCAnaWQnXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gcmVzZXQgYWxsIGludGVybmFsIHN0YXRlLiBDYWxsZWQgd2hlbiB0aGUgY29sbGVjdGlvblxuXHQgICAgLy8gaXMgZmlyc3QgaW5pdGlhbGl6ZWQgb3IgcmVzZXQuXG5cdCAgICBfcmVzZXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLmxlbmd0aCA9IDA7XG5cdCAgICAgIHRoaXMubW9kZWxzID0gW107XG5cdCAgICAgIHRoaXMuX2J5SWQgID0ge307XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFByZXBhcmUgYSBoYXNoIG9mIGF0dHJpYnV0ZXMgKG9yIG90aGVyIG1vZGVsKSB0byBiZSBhZGRlZCB0byB0aGlzXG5cdCAgICAvLyBjb2xsZWN0aW9uLlxuXHQgICAgX3ByZXBhcmVNb2RlbDogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcblx0ICAgICAgaWYgKHRoaXMuX2lzTW9kZWwoYXR0cnMpKSB7XG5cdCAgICAgICAgaWYgKCFhdHRycy5jb2xsZWN0aW9uKSBhdHRycy5jb2xsZWN0aW9uID0gdGhpcztcblx0ICAgICAgICByZXR1cm4gYXR0cnM7XG5cdCAgICAgIH1cblx0ICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG5cdCAgICAgIG9wdGlvbnMuY29sbGVjdGlvbiA9IHRoaXM7XG5cdCAgICAgIHZhciBtb2RlbCA9IG5ldyB0aGlzLm1vZGVsKGF0dHJzLCBvcHRpb25zKTtcblx0ICAgICAgaWYgKCFtb2RlbC52YWxpZGF0aW9uRXJyb3IpIHJldHVybiBtb2RlbDtcblx0ICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgbW9kZWwudmFsaWRhdGlvbkVycm9yLCBvcHRpb25zKTtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGJ5IGJvdGggcmVtb3ZlIGFuZCBzZXQuXG5cdCAgICBfcmVtb3ZlTW9kZWxzOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIHJlbW92ZWQgPSBbXTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb2RlbHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLmdldChtb2RlbHNbaV0pO1xuXHQgICAgICAgIGlmICghbW9kZWwpIGNvbnRpbnVlO1xuXHRcblx0ICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2YobW9kZWwpO1xuXHQgICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShpbmRleCwgMSk7XG5cdCAgICAgICAgdGhpcy5sZW5ndGgtLTtcblx0XG5cdCAgICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZXMgYmVmb3JlIHRyaWdnZXJpbmcgJ3JlbW92ZScgZXZlbnQgdG8gcHJldmVudCBhblxuXHQgICAgICAgIC8vIGluZmluaXRlIGxvb3AuICMzNjkzXG5cdCAgICAgICAgZGVsZXRlIHRoaXMuX2J5SWRbbW9kZWwuY2lkXTtcblx0ICAgICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG5cdCAgICAgICAgaWYgKGlkICE9IG51bGwpIGRlbGV0ZSB0aGlzLl9ieUlkW2lkXTtcblx0XG5cdCAgICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuXHQgICAgICAgICAgb3B0aW9ucy5pbmRleCA9IGluZGV4O1xuXHQgICAgICAgICAgbW9kZWwudHJpZ2dlcigncmVtb3ZlJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVtb3ZlZC5wdXNoKG1vZGVsKTtcblx0ICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZW1vdmVkO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBNZXRob2QgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IHNob3VsZCBiZSBjb25zaWRlcmVkIGEgbW9kZWwgZm9yXG5cdCAgICAvLyB0aGUgcHVycG9zZXMgb2YgYWRkaW5nIHRvIHRoZSBjb2xsZWN0aW9uLlxuXHQgICAgX2lzTW9kZWw6IGZ1bmN0aW9uKG1vZGVsKSB7XG5cdCAgICAgIHJldHVybiBtb2RlbCBpbnN0YW5jZW9mIE1vZGVsO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gY3JlYXRlIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cblx0ICAgIF9hZGRSZWZlcmVuY2U6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG5cdCAgICAgIHRoaXMuX2J5SWRbbW9kZWwuY2lkXSA9IG1vZGVsO1xuXHQgICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG5cdCAgICAgIGlmIChpZCAhPSBudWxsKSB0aGlzLl9ieUlkW2lkXSA9IG1vZGVsO1xuXHQgICAgICBtb2RlbC5vbignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHNldmVyIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cblx0ICAgIF9yZW1vdmVSZWZlcmVuY2U6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG5cdCAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmNpZF07XG5cdCAgICAgIHZhciBpZCA9IHRoaXMubW9kZWxJZChtb2RlbC5hdHRyaWJ1dGVzKTtcblx0ICAgICAgaWYgKGlkICE9IG51bGwpIGRlbGV0ZSB0aGlzLl9ieUlkW2lkXTtcblx0ICAgICAgaWYgKHRoaXMgPT09IG1vZGVsLmNvbGxlY3Rpb24pIGRlbGV0ZSBtb2RlbC5jb2xsZWN0aW9uO1xuXHQgICAgICBtb2RlbC5vZmYoJ2FsbCcsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEludGVybmFsIG1ldGhvZCBjYWxsZWQgZXZlcnkgdGltZSBhIG1vZGVsIGluIHRoZSBzZXQgZmlyZXMgYW4gZXZlbnQuXG5cdCAgICAvLyBTZXRzIG5lZWQgdG8gdXBkYXRlIHRoZWlyIGluZGV4ZXMgd2hlbiBtb2RlbHMgY2hhbmdlIGlkcy4gQWxsIG90aGVyXG5cdCAgICAvLyBldmVudHMgc2ltcGx5IHByb3h5IHRocm91Z2guIFwiYWRkXCIgYW5kIFwicmVtb3ZlXCIgZXZlbnRzIHRoYXQgb3JpZ2luYXRlXG5cdCAgICAvLyBpbiBvdGhlciBjb2xsZWN0aW9ucyBhcmUgaWdub3JlZC5cblx0ICAgIF9vbk1vZGVsRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlbCwgY29sbGVjdGlvbiwgb3B0aW9ucykge1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBpZiAoKGV2ZW50ID09PSAnYWRkJyB8fCBldmVudCA9PT0gJ3JlbW92ZScpICYmIGNvbGxlY3Rpb24gIT09IHRoaXMpIHJldHVybjtcblx0ICAgICAgICBpZiAoZXZlbnQgPT09ICdkZXN0cm95JykgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuXHQgICAgICAgIGlmIChldmVudCA9PT0gJ2NoYW5nZScpIHtcblx0ICAgICAgICAgIHZhciBwcmV2SWQgPSB0aGlzLm1vZGVsSWQobW9kZWwucHJldmlvdXNBdHRyaWJ1dGVzKCkpO1xuXHQgICAgICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuXHQgICAgICAgICAgaWYgKHByZXZJZCAhPT0gaWQpIHtcblx0ICAgICAgICAgICAgaWYgKHByZXZJZCAhPSBudWxsKSBkZWxldGUgdGhpcy5fYnlJZFtwcmV2SWRdO1xuXHQgICAgICAgICAgICBpZiAoaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFtpZF0gPSBtb2RlbDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdFxuXHQgIH0pO1xuXHRcblx0ICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgQ29sbGVjdGlvbi5cblx0ICAvLyA5MCUgb2YgdGhlIGNvcmUgdXNlZnVsbmVzcyBvZiBCYWNrYm9uZSBDb2xsZWN0aW9ucyBpcyBhY3R1YWxseSBpbXBsZW1lbnRlZFxuXHQgIC8vIHJpZ2h0IGhlcmU6XG5cdCAgdmFyIGNvbGxlY3Rpb25NZXRob2RzID0ge2ZvckVhY2g6IDMsIGVhY2g6IDMsIG1hcDogMywgY29sbGVjdDogMywgcmVkdWNlOiAwLFxuXHQgICAgICBmb2xkbDogMCwgaW5qZWN0OiAwLCByZWR1Y2VSaWdodDogMCwgZm9sZHI6IDAsIGZpbmQ6IDMsIGRldGVjdDogMywgZmlsdGVyOiAzLFxuXHQgICAgICBzZWxlY3Q6IDMsIHJlamVjdDogMywgZXZlcnk6IDMsIGFsbDogMywgc29tZTogMywgYW55OiAzLCBpbmNsdWRlOiAzLCBpbmNsdWRlczogMyxcblx0ICAgICAgY29udGFpbnM6IDMsIGludm9rZTogMCwgbWF4OiAzLCBtaW46IDMsIHRvQXJyYXk6IDEsIHNpemU6IDEsIGZpcnN0OiAzLFxuXHQgICAgICBoZWFkOiAzLCB0YWtlOiAzLCBpbml0aWFsOiAzLCByZXN0OiAzLCB0YWlsOiAzLCBkcm9wOiAzLCBsYXN0OiAzLFxuXHQgICAgICB3aXRob3V0OiAwLCBkaWZmZXJlbmNlOiAwLCBpbmRleE9mOiAzLCBzaHVmZmxlOiAxLCBsYXN0SW5kZXhPZjogMyxcblx0ICAgICAgaXNFbXB0eTogMSwgY2hhaW46IDEsIHNhbXBsZTogMywgcGFydGl0aW9uOiAzLCBncm91cEJ5OiAzLCBjb3VudEJ5OiAzLFxuXHQgICAgICBzb3J0Qnk6IDMsIGluZGV4Qnk6IDMsIGZpbmRJbmRleDogMywgZmluZExhc3RJbmRleDogM307XG5cdFxuXHQgIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYENvbGxlY3Rpb24jbW9kZWxzYC5cblx0ICBhZGRVbmRlcnNjb3JlTWV0aG9kcyhDb2xsZWN0aW9uLCBjb2xsZWN0aW9uTWV0aG9kcywgJ21vZGVscycpO1xuXHRcblx0ICAvLyBCYWNrYm9uZS5WaWV3XG5cdCAgLy8gLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBCYWNrYm9uZSBWaWV3cyBhcmUgYWxtb3N0IG1vcmUgY29udmVudGlvbiB0aGFuIHRoZXkgYXJlIGFjdHVhbCBjb2RlLiBBIFZpZXdcblx0ICAvLyBpcyBzaW1wbHkgYSBKYXZhU2NyaXB0IG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYSBsb2dpY2FsIGNodW5rIG9mIFVJIGluIHRoZVxuXHQgIC8vIERPTS4gVGhpcyBtaWdodCBiZSBhIHNpbmdsZSBpdGVtLCBhbiBlbnRpcmUgbGlzdCwgYSBzaWRlYmFyIG9yIHBhbmVsLCBvclxuXHQgIC8vIGV2ZW4gdGhlIHN1cnJvdW5kaW5nIGZyYW1lIHdoaWNoIHdyYXBzIHlvdXIgd2hvbGUgYXBwLiBEZWZpbmluZyBhIGNodW5rIG9mXG5cdCAgLy8gVUkgYXMgYSAqKlZpZXcqKiBhbGxvd3MgeW91IHRvIGRlZmluZSB5b3VyIERPTSBldmVudHMgZGVjbGFyYXRpdmVseSwgd2l0aG91dFxuXHQgIC8vIGhhdmluZyB0byB3b3JyeSBhYm91dCByZW5kZXIgb3JkZXIgLi4uIGFuZCBtYWtlcyBpdCBlYXN5IGZvciB0aGUgdmlldyB0b1xuXHQgIC8vIHJlYWN0IHRvIHNwZWNpZmljIGNoYW5nZXMgaW4gdGhlIHN0YXRlIG9mIHlvdXIgbW9kZWxzLlxuXHRcblx0ICAvLyBDcmVhdGluZyBhIEJhY2tib25lLlZpZXcgY3JlYXRlcyBpdHMgaW5pdGlhbCBlbGVtZW50IG91dHNpZGUgb2YgdGhlIERPTSxcblx0ICAvLyBpZiBhbiBleGlzdGluZyBlbGVtZW50IGlzIG5vdCBwcm92aWRlZC4uLlxuXHQgIHZhciBWaWV3ID0gQmFja2JvbmUuVmlldyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgndmlldycpO1xuXHQgICAgXy5leHRlbmQodGhpcywgXy5waWNrKG9wdGlvbnMsIHZpZXdPcHRpb25zKSk7XG5cdCAgICB0aGlzLl9lbnN1cmVFbGVtZW50KCk7XG5cdCAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9O1xuXHRcblx0ICAvLyBDYWNoZWQgcmVnZXggdG8gc3BsaXQga2V5cyBmb3IgYGRlbGVnYXRlYC5cblx0ICB2YXIgZGVsZWdhdGVFdmVudFNwbGl0dGVyID0gL14oXFxTKylcXHMqKC4qKSQvO1xuXHRcblx0ICAvLyBMaXN0IG9mIHZpZXcgb3B0aW9ucyB0byBiZSBzZXQgYXMgcHJvcGVydGllcy5cblx0ICB2YXIgdmlld09wdGlvbnMgPSBbJ21vZGVsJywgJ2NvbGxlY3Rpb24nLCAnZWwnLCAnaWQnLCAnYXR0cmlidXRlcycsICdjbGFzc05hbWUnLCAndGFnTmFtZScsICdldmVudHMnXTtcblx0XG5cdCAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlZpZXcqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuXHQgIF8uZXh0ZW5kKFZpZXcucHJvdG90eXBlLCBFdmVudHMsIHtcblx0XG5cdCAgICAvLyBUaGUgZGVmYXVsdCBgdGFnTmFtZWAgb2YgYSBWaWV3J3MgZWxlbWVudCBpcyBgXCJkaXZcImAuXG5cdCAgICB0YWdOYW1lOiAnZGl2Jyxcblx0XG5cdCAgICAvLyBqUXVlcnkgZGVsZWdhdGUgZm9yIGVsZW1lbnQgbG9va3VwLCBzY29wZWQgdG8gRE9NIGVsZW1lbnRzIHdpdGhpbiB0aGVcblx0ICAgIC8vIGN1cnJlbnQgdmlldy4gVGhpcyBzaG91bGQgYmUgcHJlZmVycmVkIHRvIGdsb2JhbCBsb29rdXBzIHdoZXJlIHBvc3NpYmxlLlxuXHQgICAgJDogZnVuY3Rpb24oc2VsZWN0b3IpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuJGVsLmZpbmQoc2VsZWN0b3IpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cblx0ICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuXHQgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXHRcblx0ICAgIC8vICoqcmVuZGVyKiogaXMgdGhlIGNvcmUgZnVuY3Rpb24gdGhhdCB5b3VyIHZpZXcgc2hvdWxkIG92ZXJyaWRlLCBpbiBvcmRlclxuXHQgICAgLy8gdG8gcG9wdWxhdGUgaXRzIGVsZW1lbnQgKGB0aGlzLmVsYCksIHdpdGggdGhlIGFwcHJvcHJpYXRlIEhUTUwuIFRoZVxuXHQgICAgLy8gY29udmVudGlvbiBpcyBmb3IgKipyZW5kZXIqKiB0byBhbHdheXMgcmV0dXJuIGB0aGlzYC5cblx0ICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZW1vdmUgdGhpcyB2aWV3IGJ5IHRha2luZyB0aGUgZWxlbWVudCBvdXQgb2YgdGhlIERPTSwgYW5kIHJlbW92aW5nIGFueVxuXHQgICAgLy8gYXBwbGljYWJsZSBCYWNrYm9uZS5FdmVudHMgbGlzdGVuZXJzLlxuXHQgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdGhpcy5fcmVtb3ZlRWxlbWVudCgpO1xuXHQgICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFJlbW92ZSB0aGlzIHZpZXcncyBlbGVtZW50IGZyb20gdGhlIGRvY3VtZW50IGFuZCBhbGwgZXZlbnQgbGlzdGVuZXJzXG5cdCAgICAvLyBhdHRhY2hlZCB0byBpdC4gRXhwb3NlZCBmb3Igc3ViY2xhc3NlcyB1c2luZyBhbiBhbHRlcm5hdGl2ZSBET01cblx0ICAgIC8vIG1hbmlwdWxhdGlvbiBBUEkuXG5cdCAgICBfcmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHRoaXMuJGVsLnJlbW92ZSgpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBDaGFuZ2UgdGhlIHZpZXcncyBlbGVtZW50IChgdGhpcy5lbGAgcHJvcGVydHkpIGFuZCByZS1kZWxlZ2F0ZSB0aGVcblx0ICAgIC8vIHZpZXcncyBldmVudHMgb24gdGhlIG5ldyBlbGVtZW50LlxuXHQgICAgc2V0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuXHQgICAgICB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTtcblx0ICAgICAgdGhpcy5fc2V0RWxlbWVudChlbGVtZW50KTtcblx0ICAgICAgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQ3JlYXRlcyB0aGUgYHRoaXMuZWxgIGFuZCBgdGhpcy4kZWxgIHJlZmVyZW5jZXMgZm9yIHRoaXMgdmlldyB1c2luZyB0aGVcblx0ICAgIC8vIGdpdmVuIGBlbGAuIGBlbGAgY2FuIGJlIGEgQ1NTIHNlbGVjdG9yIG9yIGFuIEhUTUwgc3RyaW5nLCBhIGpRdWVyeVxuXHQgICAgLy8gY29udGV4dCBvciBhbiBlbGVtZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSB0aGlzIHRvIHV0aWxpemUgYW5cblx0ICAgIC8vIGFsdGVybmF0aXZlIERPTSBtYW5pcHVsYXRpb24gQVBJIGFuZCBhcmUgb25seSByZXF1aXJlZCB0byBzZXQgdGhlXG5cdCAgICAvLyBgdGhpcy5lbGAgcHJvcGVydHkuXG5cdCAgICBfc2V0RWxlbWVudDogZnVuY3Rpb24oZWwpIHtcblx0ICAgICAgdGhpcy4kZWwgPSBlbCBpbnN0YW5jZW9mIEJhY2tib25lLiQgPyBlbCA6IEJhY2tib25lLiQoZWwpO1xuXHQgICAgICB0aGlzLmVsID0gdGhpcy4kZWxbMF07XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFNldCBjYWxsYmFja3MsIHdoZXJlIGB0aGlzLmV2ZW50c2AgaXMgYSBoYXNoIG9mXG5cdCAgICAvL1xuXHQgICAgLy8gKntcImV2ZW50IHNlbGVjdG9yXCI6IFwiY2FsbGJhY2tcIn0qXG5cdCAgICAvL1xuXHQgICAgLy8gICAgIHtcblx0ICAgIC8vICAgICAgICdtb3VzZWRvd24gLnRpdGxlJzogICdlZGl0Jyxcblx0ICAgIC8vICAgICAgICdjbGljayAuYnV0dG9uJzogICAgICdzYXZlJyxcblx0ICAgIC8vICAgICAgICdjbGljayAub3Blbic6ICAgICAgIGZ1bmN0aW9uKGUpIHsgLi4uIH1cblx0ICAgIC8vICAgICB9XG5cdCAgICAvL1xuXHQgICAgLy8gcGFpcnMuIENhbGxiYWNrcyB3aWxsIGJlIGJvdW5kIHRvIHRoZSB2aWV3LCB3aXRoIGB0aGlzYCBzZXQgcHJvcGVybHkuXG5cdCAgICAvLyBVc2VzIGV2ZW50IGRlbGVnYXRpb24gZm9yIGVmZmljaWVuY3kuXG5cdCAgICAvLyBPbWl0dGluZyB0aGUgc2VsZWN0b3IgYmluZHMgdGhlIGV2ZW50IHRvIGB0aGlzLmVsYC5cblx0ICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcblx0ICAgICAgZXZlbnRzIHx8IChldmVudHMgPSBfLnJlc3VsdCh0aGlzLCAnZXZlbnRzJykpO1xuXHQgICAgICBpZiAoIWV2ZW50cykgcmV0dXJuIHRoaXM7XG5cdCAgICAgIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpO1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzKSB7XG5cdCAgICAgICAgdmFyIG1ldGhvZCA9IGV2ZW50c1trZXldO1xuXHQgICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKG1ldGhvZCkpIG1ldGhvZCA9IHRoaXNbbWV0aG9kXTtcblx0ICAgICAgICBpZiAoIW1ldGhvZCkgY29udGludWU7XG5cdCAgICAgICAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGRlbGVnYXRlRXZlbnRTcGxpdHRlcik7XG5cdCAgICAgICAgdGhpcy5kZWxlZ2F0ZShtYXRjaFsxXSwgbWF0Y2hbMl0sIF8uYmluZChtZXRob2QsIHRoaXMpKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQWRkIGEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSB2aWV3J3MgZWxlbWVudCAob3IgYSBjaGlsZCBlbGVtZW50XG5cdCAgICAvLyB1c2luZyBgc2VsZWN0b3JgKS4gVGhpcyBvbmx5IHdvcmtzIGZvciBkZWxlZ2F0ZS1hYmxlIGV2ZW50czogbm90IGBmb2N1c2AsXG5cdCAgICAvLyBgYmx1cmAsIGFuZCBub3QgYGNoYW5nZWAsIGBzdWJtaXRgLCBhbmQgYHJlc2V0YCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cblx0ICAgIGRlbGVnYXRlOiBmdW5jdGlvbihldmVudE5hbWUsIHNlbGVjdG9yLCBsaXN0ZW5lcikge1xuXHQgICAgICB0aGlzLiRlbC5vbihldmVudE5hbWUgKyAnLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkLCBzZWxlY3RvciwgbGlzdGVuZXIpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQ2xlYXJzIGFsbCBjYWxsYmFja3MgcHJldmlvdXNseSBib3VuZCB0byB0aGUgdmlldyBieSBgZGVsZWdhdGVFdmVudHNgLlxuXHQgICAgLy8gWW91IHVzdWFsbHkgZG9uJ3QgbmVlZCB0byB1c2UgdGhpcywgYnV0IG1heSB3aXNoIHRvIGlmIHlvdSBoYXZlIG11bHRpcGxlXG5cdCAgICAvLyBCYWNrYm9uZSB2aWV3cyBhdHRhY2hlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudC5cblx0ICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAodGhpcy4kZWwpIHRoaXMuJGVsLm9mZignLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEEgZmluZXItZ3JhaW5lZCBgdW5kZWxlZ2F0ZUV2ZW50c2AgZm9yIHJlbW92aW5nIGEgc2luZ2xlIGRlbGVnYXRlZCBldmVudC5cblx0ICAgIC8vIGBzZWxlY3RvcmAgYW5kIGBsaXN0ZW5lcmAgYXJlIGJvdGggb3B0aW9uYWwuXG5cdCAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbihldmVudE5hbWUsIHNlbGVjdG9yLCBsaXN0ZW5lcikge1xuXHQgICAgICB0aGlzLiRlbC5vZmYoZXZlbnROYW1lICsgJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCwgc2VsZWN0b3IsIGxpc3RlbmVyKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFByb2R1Y2VzIGEgRE9NIGVsZW1lbnQgdG8gYmUgYXNzaWduZWQgdG8geW91ciB2aWV3LiBFeHBvc2VkIGZvclxuXHQgICAgLy8gc3ViY2xhc3NlcyB1c2luZyBhbiBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSS5cblx0ICAgIF9jcmVhdGVFbGVtZW50OiBmdW5jdGlvbih0YWdOYW1lKSB7XG5cdCAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBFbnN1cmUgdGhhdCB0aGUgVmlldyBoYXMgYSBET00gZWxlbWVudCB0byByZW5kZXIgaW50by5cblx0ICAgIC8vIElmIGB0aGlzLmVsYCBpcyBhIHN0cmluZywgcGFzcyBpdCB0aHJvdWdoIGAkKClgLCB0YWtlIHRoZSBmaXJzdFxuXHQgICAgLy8gbWF0Y2hpbmcgZWxlbWVudCwgYW5kIHJlLWFzc2lnbiBpdCB0byBgZWxgLiBPdGhlcndpc2UsIGNyZWF0ZVxuXHQgICAgLy8gYW4gZWxlbWVudCBmcm9tIHRoZSBgaWRgLCBgY2xhc3NOYW1lYCBhbmQgYHRhZ05hbWVgIHByb3BlcnRpZXMuXG5cdCAgICBfZW5zdXJlRWxlbWVudDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICghdGhpcy5lbCkge1xuXHQgICAgICAgIHZhciBhdHRycyA9IF8uZXh0ZW5kKHt9LCBfLnJlc3VsdCh0aGlzLCAnYXR0cmlidXRlcycpKTtcblx0ICAgICAgICBpZiAodGhpcy5pZCkgYXR0cnMuaWQgPSBfLnJlc3VsdCh0aGlzLCAnaWQnKTtcblx0ICAgICAgICBpZiAodGhpcy5jbGFzc05hbWUpIGF0dHJzWydjbGFzcyddID0gXy5yZXN1bHQodGhpcywgJ2NsYXNzTmFtZScpO1xuXHQgICAgICAgIHRoaXMuc2V0RWxlbWVudCh0aGlzLl9jcmVhdGVFbGVtZW50KF8ucmVzdWx0KHRoaXMsICd0YWdOYW1lJykpKTtcblx0ICAgICAgICB0aGlzLl9zZXRBdHRyaWJ1dGVzKGF0dHJzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnNldEVsZW1lbnQoXy5yZXN1bHQodGhpcywgJ2VsJykpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFNldCBhdHRyaWJ1dGVzIGZyb20gYSBoYXNoIG9uIHRoaXMgdmlldydzIGVsZW1lbnQuICBFeHBvc2VkIGZvclxuXHQgICAgLy8gc3ViY2xhc3NlcyB1c2luZyBhbiBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSS5cblx0ICAgIF9zZXRBdHRyaWJ1dGVzOiBmdW5jdGlvbihhdHRyaWJ1dGVzKSB7XG5cdCAgICAgIHRoaXMuJGVsLmF0dHIoYXR0cmlidXRlcyk7XG5cdCAgICB9XG5cdFxuXHQgIH0pO1xuXHRcblx0ICAvLyBCYWNrYm9uZS5zeW5jXG5cdCAgLy8gLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgbWFubmVyIGluIHdoaWNoIEJhY2tib25lIHBlcnNpc3RzXG5cdCAgLy8gbW9kZWxzIHRvIHRoZSBzZXJ2ZXIuIFlvdSB3aWxsIGJlIHBhc3NlZCB0aGUgdHlwZSBvZiByZXF1ZXN0LCBhbmQgdGhlXG5cdCAgLy8gbW9kZWwgaW4gcXVlc3Rpb24uIEJ5IGRlZmF1bHQsIG1ha2VzIGEgUkVTVGZ1bCBBamF4IHJlcXVlc3Rcblx0ICAvLyB0byB0aGUgbW9kZWwncyBgdXJsKClgLiBTb21lIHBvc3NpYmxlIGN1c3RvbWl6YXRpb25zIGNvdWxkIGJlOlxuXHQgIC8vXG5cdCAgLy8gKiBVc2UgYHNldFRpbWVvdXRgIHRvIGJhdGNoIHJhcGlkLWZpcmUgdXBkYXRlcyBpbnRvIGEgc2luZ2xlIHJlcXVlc3QuXG5cdCAgLy8gKiBTZW5kIHVwIHRoZSBtb2RlbHMgYXMgWE1MIGluc3RlYWQgb2YgSlNPTi5cblx0ICAvLyAqIFBlcnNpc3QgbW9kZWxzIHZpYSBXZWJTb2NrZXRzIGluc3RlYWQgb2YgQWpheC5cblx0ICAvL1xuXHQgIC8vIFR1cm4gb24gYEJhY2tib25lLmVtdWxhdGVIVFRQYCBpbiBvcmRlciB0byBzZW5kIGBQVVRgIGFuZCBgREVMRVRFYCByZXF1ZXN0c1xuXHQgIC8vIGFzIGBQT1NUYCwgd2l0aCBhIGBfbWV0aG9kYCBwYXJhbWV0ZXIgY29udGFpbmluZyB0aGUgdHJ1ZSBIVFRQIG1ldGhvZCxcblx0ICAvLyBhcyB3ZWxsIGFzIGFsbCByZXF1ZXN0cyB3aXRoIHRoZSBib2R5IGFzIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgXG5cdCAgLy8gaW5zdGVhZCBvZiBgYXBwbGljYXRpb24vanNvbmAgd2l0aCB0aGUgbW9kZWwgaW4gYSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuXHQgIC8vIFVzZWZ1bCB3aGVuIGludGVyZmFjaW5nIHdpdGggc2VydmVyLXNpZGUgbGFuZ3VhZ2VzIGxpa2UgKipQSFAqKiB0aGF0IG1ha2Vcblx0ICAvLyBpdCBkaWZmaWN1bHQgdG8gcmVhZCB0aGUgYm9keSBvZiBgUFVUYCByZXF1ZXN0cy5cblx0ICBCYWNrYm9uZS5zeW5jID0gZnVuY3Rpb24obWV0aG9kLCBtb2RlbCwgb3B0aW9ucykge1xuXHQgICAgdmFyIHR5cGUgPSBtZXRob2RNYXBbbWV0aG9kXTtcblx0XG5cdCAgICAvLyBEZWZhdWx0IG9wdGlvbnMsIHVubGVzcyBzcGVjaWZpZWQuXG5cdCAgICBfLmRlZmF1bHRzKG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSksIHtcblx0ICAgICAgZW11bGF0ZUhUVFA6IEJhY2tib25lLmVtdWxhdGVIVFRQLFxuXHQgICAgICBlbXVsYXRlSlNPTjogQmFja2JvbmUuZW11bGF0ZUpTT05cblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIERlZmF1bHQgSlNPTi1yZXF1ZXN0IG9wdGlvbnMuXG5cdCAgICB2YXIgcGFyYW1zID0ge3R5cGU6IHR5cGUsIGRhdGFUeXBlOiAnanNvbid9O1xuXHRcblx0ICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgYSBVUkwuXG5cdCAgICBpZiAoIW9wdGlvbnMudXJsKSB7XG5cdCAgICAgIHBhcmFtcy51cmwgPSBfLnJlc3VsdChtb2RlbCwgJ3VybCcpIHx8IHVybEVycm9yKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRW5zdXJlIHRoYXQgd2UgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgcmVxdWVzdCBkYXRhLlxuXHQgICAgaWYgKG9wdGlvbnMuZGF0YSA9PSBudWxsICYmIG1vZGVsICYmIChtZXRob2QgPT09ICdjcmVhdGUnIHx8IG1ldGhvZCA9PT0gJ3VwZGF0ZScgfHwgbWV0aG9kID09PSAncGF0Y2gnKSkge1xuXHQgICAgICBwYXJhbXMuY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbic7XG5cdCAgICAgIHBhcmFtcy5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5hdHRycyB8fCBtb2RlbC50b0pTT04ob3B0aW9ucykpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEpTT04gYnkgZW5jb2RpbmcgdGhlIHJlcXVlc3QgaW50byBhbiBIVE1MLWZvcm0uXG5cdCAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTikge1xuXHQgICAgICBwYXJhbXMuY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcblx0ICAgICAgcGFyYW1zLmRhdGEgPSBwYXJhbXMuZGF0YSA/IHttb2RlbDogcGFyYW1zLmRhdGF9IDoge307XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSFRUUCBieSBtaW1pY2tpbmcgdGhlIEhUVFAgbWV0aG9kIHdpdGggYF9tZXRob2RgXG5cdCAgICAvLyBBbmQgYW4gYFgtSFRUUC1NZXRob2QtT3ZlcnJpZGVgIGhlYWRlci5cblx0ICAgIGlmIChvcHRpb25zLmVtdWxhdGVIVFRQICYmICh0eXBlID09PSAnUFVUJyB8fCB0eXBlID09PSAnREVMRVRFJyB8fCB0eXBlID09PSAnUEFUQ0gnKSkge1xuXHQgICAgICBwYXJhbXMudHlwZSA9ICdQT1NUJztcblx0ICAgICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHBhcmFtcy5kYXRhLl9tZXRob2QgPSB0eXBlO1xuXHQgICAgICB2YXIgYmVmb3JlU2VuZCA9IG9wdGlvbnMuYmVmb3JlU2VuZDtcblx0ICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG5cdCAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtSFRUUC1NZXRob2QtT3ZlcnJpZGUnLCB0eXBlKTtcblx0ICAgICAgICBpZiAoYmVmb3JlU2VuZCkgcmV0dXJuIGJlZm9yZVNlbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBEb24ndCBwcm9jZXNzIGRhdGEgb24gYSBub24tR0VUIHJlcXVlc3QuXG5cdCAgICBpZiAocGFyYW1zLnR5cGUgIT09ICdHRVQnICYmICFvcHRpb25zLmVtdWxhdGVKU09OKSB7XG5cdCAgICAgIHBhcmFtcy5wcm9jZXNzRGF0YSA9IGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFBhc3MgYWxvbmcgYHRleHRTdGF0dXNgIGFuZCBgZXJyb3JUaHJvd25gIGZyb20galF1ZXJ5LlxuXHQgICAgdmFyIGVycm9yID0gb3B0aW9ucy5lcnJvcjtcblx0ICAgIG9wdGlvbnMuZXJyb3IgPSBmdW5jdGlvbih4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cdCAgICAgIG9wdGlvbnMudGV4dFN0YXR1cyA9IHRleHRTdGF0dXM7XG5cdCAgICAgIG9wdGlvbnMuZXJyb3JUaHJvd24gPSBlcnJvclRocm93bjtcblx0ICAgICAgaWYgKGVycm9yKSBlcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bik7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIE1ha2UgdGhlIHJlcXVlc3QsIGFsbG93aW5nIHRoZSB1c2VyIHRvIG92ZXJyaWRlIGFueSBBamF4IG9wdGlvbnMuXG5cdCAgICB2YXIgeGhyID0gb3B0aW9ucy54aHIgPSBCYWNrYm9uZS5hamF4KF8uZXh0ZW5kKHBhcmFtcywgb3B0aW9ucykpO1xuXHQgICAgbW9kZWwudHJpZ2dlcigncmVxdWVzdCcsIG1vZGVsLCB4aHIsIG9wdGlvbnMpO1xuXHQgICAgcmV0dXJuIHhocjtcblx0ICB9O1xuXHRcblx0ICAvLyBNYXAgZnJvbSBDUlVEIHRvIEhUVFAgZm9yIG91ciBkZWZhdWx0IGBCYWNrYm9uZS5zeW5jYCBpbXBsZW1lbnRhdGlvbi5cblx0ICB2YXIgbWV0aG9kTWFwID0ge1xuXHQgICAgJ2NyZWF0ZSc6ICdQT1NUJyxcblx0ICAgICd1cGRhdGUnOiAnUFVUJyxcblx0ICAgICdwYXRjaCc6ICdQQVRDSCcsXG5cdCAgICAnZGVsZXRlJzogJ0RFTEVURScsXG5cdCAgICAncmVhZCc6ICdHRVQnXG5cdCAgfTtcblx0XG5cdCAgLy8gU2V0IHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGBCYWNrYm9uZS5hamF4YCB0byBwcm94eSB0aHJvdWdoIHRvIGAkYC5cblx0ICAvLyBPdmVycmlkZSB0aGlzIGlmIHlvdSdkIGxpa2UgdG8gdXNlIGEgZGlmZmVyZW50IGxpYnJhcnkuXG5cdCAgQmFja2JvbmUuYWpheCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIEJhY2tib25lLiQuYWpheC5hcHBseShCYWNrYm9uZS4kLCBhcmd1bWVudHMpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEJhY2tib25lLlJvdXRlclxuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBSb3V0ZXJzIG1hcCBmYXV4LVVSTHMgdG8gYWN0aW9ucywgYW5kIGZpcmUgZXZlbnRzIHdoZW4gcm91dGVzIGFyZVxuXHQgIC8vIG1hdGNoZWQuIENyZWF0aW5nIGEgbmV3IG9uZSBzZXRzIGl0cyBgcm91dGVzYCBoYXNoLCBpZiBub3Qgc2V0IHN0YXRpY2FsbHkuXG5cdCAgdmFyIFJvdXRlciA9IEJhY2tib25lLlJvdXRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cdCAgICBpZiAob3B0aW9ucy5yb3V0ZXMpIHRoaXMucm91dGVzID0gb3B0aW9ucy5yb3V0ZXM7XG5cdCAgICB0aGlzLl9iaW5kUm91dGVzKCk7XG5cdCAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9O1xuXHRcblx0ICAvLyBDYWNoZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3IgbWF0Y2hpbmcgbmFtZWQgcGFyYW0gcGFydHMgYW5kIHNwbGF0dGVkXG5cdCAgLy8gcGFydHMgb2Ygcm91dGUgc3RyaW5ncy5cblx0ICB2YXIgb3B0aW9uYWxQYXJhbSA9IC9cXCgoLio/KVxcKS9nO1xuXHQgIHZhciBuYW1lZFBhcmFtICAgID0gLyhcXChcXD8pPzpcXHcrL2c7XG5cdCAgdmFyIHNwbGF0UGFyYW0gICAgPSAvXFwqXFx3Ky9nO1xuXHQgIHZhciBlc2NhcGVSZWdFeHAgID0gL1tcXC17fVxcW1xcXSs/LixcXFxcXFxeJHwjXFxzXS9nO1xuXHRcblx0ICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuUm91dGVyKiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cblx0ICBfLmV4dGVuZChSb3V0ZXIucHJvdG90eXBlLCBFdmVudHMsIHtcblx0XG5cdCAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cblx0ICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuXHQgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXHRcblx0ICAgIC8vIE1hbnVhbGx5IGJpbmQgYSBzaW5nbGUgbmFtZWQgcm91dGUgdG8gYSBjYWxsYmFjay4gRm9yIGV4YW1wbGU6XG5cdCAgICAvL1xuXHQgICAgLy8gICAgIHRoaXMucm91dGUoJ3NlYXJjaC86cXVlcnkvcDpudW0nLCAnc2VhcmNoJywgZnVuY3Rpb24ocXVlcnksIG51bSkge1xuXHQgICAgLy8gICAgICAgLi4uXG5cdCAgICAvLyAgICAgfSk7XG5cdCAgICAvL1xuXHQgICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBuYW1lLCBjYWxsYmFjaykge1xuXHQgICAgICBpZiAoIV8uaXNSZWdFeHAocm91dGUpKSByb3V0ZSA9IHRoaXMuX3JvdXRlVG9SZWdFeHAocm91dGUpO1xuXHQgICAgICBpZiAoXy5pc0Z1bmN0aW9uKG5hbWUpKSB7XG5cdCAgICAgICAgY2FsbGJhY2sgPSBuYW1lO1xuXHQgICAgICAgIG5hbWUgPSAnJztcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IHRoaXNbbmFtZV07XG5cdCAgICAgIHZhciByb3V0ZXIgPSB0aGlzO1xuXHQgICAgICBCYWNrYm9uZS5oaXN0b3J5LnJvdXRlKHJvdXRlLCBmdW5jdGlvbihmcmFnbWVudCkge1xuXHQgICAgICAgIHZhciBhcmdzID0gcm91dGVyLl9leHRyYWN0UGFyYW1ldGVycyhyb3V0ZSwgZnJhZ21lbnQpO1xuXHQgICAgICAgIGlmIChyb3V0ZXIuZXhlY3V0ZShjYWxsYmFjaywgYXJncywgbmFtZSkgIT09IGZhbHNlKSB7XG5cdCAgICAgICAgICByb3V0ZXIudHJpZ2dlci5hcHBseShyb3V0ZXIsIFsncm91dGU6JyArIG5hbWVdLmNvbmNhdChhcmdzKSk7XG5cdCAgICAgICAgICByb3V0ZXIudHJpZ2dlcigncm91dGUnLCBuYW1lLCBhcmdzKTtcblx0ICAgICAgICAgIEJhY2tib25lLmhpc3RvcnkudHJpZ2dlcigncm91dGUnLCByb3V0ZXIsIG5hbWUsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBFeGVjdXRlIGEgcm91dGUgaGFuZGxlciB3aXRoIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLiAgVGhpcyBpcyBhblxuXHQgICAgLy8gZXhjZWxsZW50IHBsYWNlIHRvIGRvIHByZS1yb3V0ZSBzZXR1cCBvciBwb3N0LXJvdXRlIGNsZWFudXAuXG5cdCAgICBleGVjdXRlOiBmdW5jdGlvbihjYWxsYmFjaywgYXJncywgbmFtZSkge1xuXHQgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBTaW1wbGUgcHJveHkgdG8gYEJhY2tib25lLmhpc3RvcnlgIHRvIHNhdmUgYSBmcmFnbWVudCBpbnRvIHRoZSBoaXN0b3J5LlxuXHQgICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LCBvcHRpb25zKSB7XG5cdCAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoZnJhZ21lbnQsIG9wdGlvbnMpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQmluZCBhbGwgZGVmaW5lZCByb3V0ZXMgdG8gYEJhY2tib25lLmhpc3RvcnlgLiBXZSBoYXZlIHRvIHJldmVyc2UgdGhlXG5cdCAgICAvLyBvcmRlciBvZiB0aGUgcm91dGVzIGhlcmUgdG8gc3VwcG9ydCBiZWhhdmlvciB3aGVyZSB0aGUgbW9zdCBnZW5lcmFsXG5cdCAgICAvLyByb3V0ZXMgY2FuIGJlIGRlZmluZWQgYXQgdGhlIGJvdHRvbSBvZiB0aGUgcm91dGUgbWFwLlxuXHQgICAgX2JpbmRSb3V0ZXM6IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAoIXRoaXMucm91dGVzKSByZXR1cm47XG5cdCAgICAgIHRoaXMucm91dGVzID0gXy5yZXN1bHQodGhpcywgJ3JvdXRlcycpO1xuXHQgICAgICB2YXIgcm91dGUsIHJvdXRlcyA9IF8ua2V5cyh0aGlzLnJvdXRlcyk7XG5cdCAgICAgIHdoaWxlICgocm91dGUgPSByb3V0ZXMucG9wKCkpICE9IG51bGwpIHtcblx0ICAgICAgICB0aGlzLnJvdXRlKHJvdXRlLCB0aGlzLnJvdXRlc1tyb3V0ZV0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIENvbnZlcnQgYSByb3V0ZSBzdHJpbmcgaW50byBhIHJlZ3VsYXIgZXhwcmVzc2lvbiwgc3VpdGFibGUgZm9yIG1hdGNoaW5nXG5cdCAgICAvLyBhZ2FpbnN0IHRoZSBjdXJyZW50IGxvY2F0aW9uIGhhc2guXG5cdCAgICBfcm91dGVUb1JlZ0V4cDogZnVuY3Rpb24ocm91dGUpIHtcblx0ICAgICAgcm91dGUgPSByb3V0ZS5yZXBsYWNlKGVzY2FwZVJlZ0V4cCwgJ1xcXFwkJicpXG5cdCAgICAgICAgICAgICAgICAgICAucmVwbGFjZShvcHRpb25hbFBhcmFtLCAnKD86JDEpPycpXG5cdCAgICAgICAgICAgICAgICAgICAucmVwbGFjZShuYW1lZFBhcmFtLCBmdW5jdGlvbihtYXRjaCwgb3B0aW9uYWwpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbmFsID8gbWF0Y2ggOiAnKFteLz9dKyknO1xuXHQgICAgICAgICAgICAgICAgICAgfSlcblx0ICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKHNwbGF0UGFyYW0sICcoW14/XSo/KScpO1xuXHQgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByb3V0ZSArICcoPzpcXFxcPyhbXFxcXHNcXFxcU10qKSk/JCcpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBHaXZlbiBhIHJvdXRlLCBhbmQgYSBVUkwgZnJhZ21lbnQgdGhhdCBpdCBtYXRjaGVzLCByZXR1cm4gdGhlIGFycmF5IG9mXG5cdCAgICAvLyBleHRyYWN0ZWQgZGVjb2RlZCBwYXJhbWV0ZXJzLiBFbXB0eSBvciB1bm1hdGNoZWQgcGFyYW1ldGVycyB3aWxsIGJlXG5cdCAgICAvLyB0cmVhdGVkIGFzIGBudWxsYCB0byBub3JtYWxpemUgY3Jvc3MtYnJvd3NlciBiZWhhdmlvci5cblx0ICAgIF9leHRyYWN0UGFyYW1ldGVyczogZnVuY3Rpb24ocm91dGUsIGZyYWdtZW50KSB7XG5cdCAgICAgIHZhciBwYXJhbXMgPSByb3V0ZS5leGVjKGZyYWdtZW50KS5zbGljZSgxKTtcblx0ICAgICAgcmV0dXJuIF8ubWFwKHBhcmFtcywgZnVuY3Rpb24ocGFyYW0sIGkpIHtcblx0ICAgICAgICAvLyBEb24ndCBkZWNvZGUgdGhlIHNlYXJjaCBwYXJhbXMuXG5cdCAgICAgICAgaWYgKGkgPT09IHBhcmFtcy5sZW5ndGggLSAxKSByZXR1cm4gcGFyYW0gfHwgbnVsbDtcblx0ICAgICAgICByZXR1cm4gcGFyYW0gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW0pIDogbnVsbDtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgIH0pO1xuXHRcblx0ICAvLyBCYWNrYm9uZS5IaXN0b3J5XG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBIYW5kbGVzIGNyb3NzLWJyb3dzZXIgaGlzdG9yeSBtYW5hZ2VtZW50LCBiYXNlZCBvbiBlaXRoZXJcblx0ICAvLyBbcHVzaFN0YXRlXShodHRwOi8vZGl2ZWludG9odG1sNS5pbmZvL2hpc3RvcnkuaHRtbCkgYW5kIHJlYWwgVVJMcywgb3Jcblx0ICAvLyBbb25oYXNoY2hhbmdlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS93aW5kb3cub25oYXNoY2hhbmdlKVxuXHQgIC8vIGFuZCBVUkwgZnJhZ21lbnRzLiBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBuZWl0aGVyIChvbGQgSUUsIG5hdGNoKSxcblx0ICAvLyBmYWxscyBiYWNrIHRvIHBvbGxpbmcuXG5cdCAgdmFyIEhpc3RvcnkgPSBCYWNrYm9uZS5IaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG5cdCAgICB0aGlzLmhhbmRsZXJzID0gW107XG5cdCAgICB0aGlzLmNoZWNrVXJsID0gXy5iaW5kKHRoaXMuY2hlY2tVcmwsIHRoaXMpO1xuXHRcblx0ICAgIC8vIEVuc3VyZSB0aGF0IGBIaXN0b3J5YCBjYW4gYmUgdXNlZCBvdXRzaWRlIG9mIHRoZSBicm93c2VyLlxuXHQgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHRoaXMubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cdCAgICAgIHRoaXMuaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGEgbGVhZGluZyBoYXNoL3NsYXNoIGFuZCB0cmFpbGluZyBzcGFjZS5cblx0ICB2YXIgcm91dGVTdHJpcHBlciA9IC9eWyNcXC9dfFxccyskL2c7XG5cdFxuXHQgIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMuXG5cdCAgdmFyIHJvb3RTdHJpcHBlciA9IC9eXFwvK3xcXC8rJC9nO1xuXHRcblx0ICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyB1cmxzIG9mIGhhc2guXG5cdCAgdmFyIHBhdGhTdHJpcHBlciA9IC8jLiokLztcblx0XG5cdCAgLy8gSGFzIHRoZSBoaXN0b3J5IGhhbmRsaW5nIGFscmVhZHkgYmVlbiBzdGFydGVkP1xuXHQgIEhpc3Rvcnkuc3RhcnRlZCA9IGZhbHNlO1xuXHRcblx0ICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuSGlzdG9yeSoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG5cdCAgXy5leHRlbmQoSGlzdG9yeS5wcm90b3R5cGUsIEV2ZW50cywge1xuXHRcblx0ICAgIC8vIFRoZSBkZWZhdWx0IGludGVydmFsIHRvIHBvbGwgZm9yIGhhc2ggY2hhbmdlcywgaWYgbmVjZXNzYXJ5LCBpc1xuXHQgICAgLy8gdHdlbnR5IHRpbWVzIGEgc2Vjb25kLlxuXHQgICAgaW50ZXJ2YWw6IDUwLFxuXHRcblx0ICAgIC8vIEFyZSB3ZSBhdCB0aGUgYXBwIHJvb3Q/XG5cdCAgICBhdFJvb3Q6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgcGF0aCA9IHRoaXMubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvW15cXC9dJC8sICckJi8nKTtcblx0ICAgICAgcmV0dXJuIHBhdGggPT09IHRoaXMucm9vdCAmJiAhdGhpcy5nZXRTZWFyY2goKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRG9lcyB0aGUgcGF0aG5hbWUgbWF0Y2ggdGhlIHJvb3Q/XG5cdCAgICBtYXRjaFJvb3Q6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgcGF0aCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSk7XG5cdCAgICAgIHZhciByb290UGF0aCA9IHBhdGguc2xpY2UoMCwgdGhpcy5yb290Lmxlbmd0aCAtIDEpICsgJy8nO1xuXHQgICAgICByZXR1cm4gcm9vdFBhdGggPT09IHRoaXMucm9vdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gVW5pY29kZSBjaGFyYWN0ZXJzIGluIGBsb2NhdGlvbi5wYXRobmFtZWAgYXJlIHBlcmNlbnQgZW5jb2RlZCBzbyB0aGV5J3JlXG5cdCAgICAvLyBkZWNvZGVkIGZvciBjb21wYXJpc29uLiBgJTI1YCBzaG91bGQgbm90IGJlIGRlY29kZWQgc2luY2UgaXQgbWF5IGJlIHBhcnRcblx0ICAgIC8vIG9mIGFuIGVuY29kZWQgcGFyYW1ldGVyLlxuXHQgICAgZGVjb2RlRnJhZ21lbnQ6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG5cdCAgICAgIHJldHVybiBkZWNvZGVVUkkoZnJhZ21lbnQucmVwbGFjZSgvJTI1L2csICclMjUyNScpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gSW4gSUU2LCB0aGUgaGFzaCBmcmFnbWVudCBhbmQgc2VhcmNoIHBhcmFtcyBhcmUgaW5jb3JyZWN0IGlmIHRoZVxuXHQgICAgLy8gZnJhZ21lbnQgY29udGFpbnMgYD9gLlxuXHQgICAgZ2V0U2VhcmNoOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIG1hdGNoID0gdGhpcy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKi8sICcnKS5tYXRjaCgvXFw/LisvKTtcblx0ICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMF0gOiAnJztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gR2V0cyB0aGUgdHJ1ZSBoYXNoIHZhbHVlLiBDYW5ub3QgdXNlIGxvY2F0aW9uLmhhc2ggZGlyZWN0bHkgZHVlIHRvIGJ1Z1xuXHQgICAgLy8gaW4gRmlyZWZveCB3aGVyZSBsb2NhdGlvbi5oYXNoIHdpbGwgYWx3YXlzIGJlIGRlY29kZWQuXG5cdCAgICBnZXRIYXNoOiBmdW5jdGlvbih3aW5kb3cpIHtcblx0ICAgICAgdmFyIG1hdGNoID0gKHdpbmRvdyB8fCB0aGlzKS5sb2NhdGlvbi5ocmVmLm1hdGNoKC8jKC4qKSQvKTtcblx0ICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiAnJztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gR2V0IHRoZSBwYXRobmFtZSBhbmQgc2VhcmNoIHBhcmFtcywgd2l0aG91dCB0aGUgcm9vdC5cblx0ICAgIGdldFBhdGg6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgcGF0aCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQoXG5cdCAgICAgICAgdGhpcy5sb2NhdGlvbi5wYXRobmFtZSArIHRoaXMuZ2V0U2VhcmNoKClcblx0ICAgICAgKS5zbGljZSh0aGlzLnJvb3QubGVuZ3RoIC0gMSk7XG5cdCAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nID8gcGF0aC5zbGljZSgxKSA6IHBhdGg7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEdldCB0aGUgY3Jvc3MtYnJvd3NlciBub3JtYWxpemVkIFVSTCBmcmFnbWVudCBmcm9tIHRoZSBwYXRoIG9yIGhhc2guXG5cdCAgICBnZXRGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcblx0ICAgICAgaWYgKGZyYWdtZW50ID09IG51bGwpIHtcblx0ICAgICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlIHx8ICF0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcblx0ICAgICAgICAgIGZyYWdtZW50ID0gdGhpcy5nZXRQYXRoKCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZyYWdtZW50ID0gdGhpcy5nZXRIYXNoKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBmcmFnbWVudC5yZXBsYWNlKHJvdXRlU3RyaXBwZXIsICcnKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gU3RhcnQgdGhlIGhhc2ggY2hhbmdlIGhhbmRsaW5nLCByZXR1cm5pbmcgYHRydWVgIGlmIHRoZSBjdXJyZW50IFVSTCBtYXRjaGVzXG5cdCAgICAvLyBhbiBleGlzdGluZyByb3V0ZSwgYW5kIGBmYWxzZWAgb3RoZXJ3aXNlLlxuXHQgICAgc3RhcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgaWYgKEhpc3Rvcnkuc3RhcnRlZCkgdGhyb3cgbmV3IEVycm9yKCdCYWNrYm9uZS5oaXN0b3J5IGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCcpO1xuXHQgICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSB0cnVlO1xuXHRcblx0ICAgICAgLy8gRmlndXJlIG91dCB0aGUgaW5pdGlhbCBjb25maWd1cmF0aW9uLiBEbyB3ZSBuZWVkIGFuIGlmcmFtZT9cblx0ICAgICAgLy8gSXMgcHVzaFN0YXRlIGRlc2lyZWQgLi4uIGlzIGl0IGF2YWlsYWJsZT9cblx0ICAgICAgdGhpcy5vcHRpb25zICAgICAgICAgID0gXy5leHRlbmQoe3Jvb3Q6ICcvJ30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cdCAgICAgIHRoaXMucm9vdCAgICAgICAgICAgICA9IHRoaXMub3B0aW9ucy5yb290O1xuXHQgICAgICB0aGlzLl93YW50c0hhc2hDaGFuZ2UgPSB0aGlzLm9wdGlvbnMuaGFzaENoYW5nZSAhPT0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX2hhc0hhc2hDaGFuZ2UgICA9ICdvbmhhc2hjaGFuZ2UnIGluIHdpbmRvdyAmJiAoZG9jdW1lbnQuZG9jdW1lbnRNb2RlID09PSB2b2lkIDAgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID4gNyk7XG5cdCAgICAgIHRoaXMuX3VzZUhhc2hDaGFuZ2UgICA9IHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl9oYXNIYXNoQ2hhbmdlO1xuXHQgICAgICB0aGlzLl93YW50c1B1c2hTdGF0ZSAgPSAhIXRoaXMub3B0aW9ucy5wdXNoU3RhdGU7XG5cdCAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAgICA9ICEhKHRoaXMuaGlzdG9yeSAmJiB0aGlzLmhpc3RvcnkucHVzaFN0YXRlKTtcblx0ICAgICAgdGhpcy5fdXNlUHVzaFN0YXRlICAgID0gdGhpcy5fd2FudHNQdXNoU3RhdGUgJiYgdGhpcy5faGFzUHVzaFN0YXRlO1xuXHQgICAgICB0aGlzLmZyYWdtZW50ICAgICAgICAgPSB0aGlzLmdldEZyYWdtZW50KCk7XG5cdFxuXHQgICAgICAvLyBOb3JtYWxpemUgcm9vdCB0byBhbHdheXMgaW5jbHVkZSBhIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoLlxuXHQgICAgICB0aGlzLnJvb3QgPSAoJy8nICsgdGhpcy5yb290ICsgJy8nKS5yZXBsYWNlKHJvb3RTdHJpcHBlciwgJy8nKTtcblx0XG5cdCAgICAgIC8vIFRyYW5zaXRpb24gZnJvbSBoYXNoQ2hhbmdlIHRvIHB1c2hTdGF0ZSBvciB2aWNlIHZlcnNhIGlmIGJvdGggYXJlXG5cdCAgICAgIC8vIHJlcXVlc3RlZC5cblx0ICAgICAgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkge1xuXHRcblx0ICAgICAgICAvLyBJZiB3ZSd2ZSBzdGFydGVkIG9mZiB3aXRoIGEgcm91dGUgZnJvbSBhIGBwdXNoU3RhdGVgLWVuYWJsZWRcblx0ICAgICAgICAvLyBicm93c2VyLCBidXQgd2UncmUgY3VycmVudGx5IGluIGEgYnJvd3NlciB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCBpdC4uLlxuXHQgICAgICAgIGlmICghdGhpcy5faGFzUHVzaFN0YXRlICYmICF0aGlzLmF0Um9vdCgpKSB7XG5cdCAgICAgICAgICB2YXIgcm9vdFBhdGggPSB0aGlzLnJvb3Quc2xpY2UoMCwgLTEpIHx8ICcvJztcblx0ICAgICAgICAgIHRoaXMubG9jYXRpb24ucmVwbGFjZShyb290UGF0aCArICcjJyArIHRoaXMuZ2V0UGF0aCgpKTtcblx0ICAgICAgICAgIC8vIFJldHVybiBpbW1lZGlhdGVseSBhcyBicm93c2VyIHdpbGwgZG8gcmVkaXJlY3QgdG8gbmV3IHVybFxuXHQgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdFxuXHQgICAgICAgIC8vIE9yIGlmIHdlJ3ZlIHN0YXJ0ZWQgb3V0IHdpdGggYSBoYXNoLWJhc2VkIHJvdXRlLCBidXQgd2UncmUgY3VycmVudGx5XG5cdCAgICAgICAgLy8gaW4gYSBicm93c2VyIHdoZXJlIGl0IGNvdWxkIGJlIGBwdXNoU3RhdGVgLWJhc2VkIGluc3RlYWQuLi5cblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSAmJiB0aGlzLmF0Um9vdCgpKSB7XG5cdCAgICAgICAgICB0aGlzLm5hdmlnYXRlKHRoaXMuZ2V0SGFzaCgpLCB7cmVwbGFjZTogdHJ1ZX0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFByb3h5IGFuIGlmcmFtZSB0byBoYW5kbGUgbG9jYXRpb24gZXZlbnRzIGlmIHRoZSBicm93c2VyIGRvZXNuJ3Rcblx0ICAgICAgLy8gc3VwcG9ydCB0aGUgYGhhc2hjaGFuZ2VgIGV2ZW50LCBIVE1MNSBoaXN0b3J5LCBvciB0aGUgdXNlciB3YW50c1xuXHQgICAgICAvLyBgaGFzaENoYW5nZWAgYnV0IG5vdCBgcHVzaFN0YXRlYC5cblx0ICAgICAgaWYgKCF0aGlzLl9oYXNIYXNoQ2hhbmdlICYmIHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiAhdGhpcy5fdXNlUHVzaFN0YXRlKSB7XG5cdCAgICAgICAgdGhpcy5pZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcblx0ICAgICAgICB0aGlzLmlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDowJztcblx0ICAgICAgICB0aGlzLmlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgICAgICAgIHRoaXMuaWZyYW1lLnRhYkluZGV4ID0gLTE7XG5cdCAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXHQgICAgICAgIC8vIFVzaW5nIGBhcHBlbmRDaGlsZGAgd2lsbCB0aHJvdyBvbiBJRSA8IDkgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCByZWFkeS5cblx0ICAgICAgICB2YXIgaVdpbmRvdyA9IGJvZHkuaW5zZXJ0QmVmb3JlKHRoaXMuaWZyYW1lLCBib2R5LmZpcnN0Q2hpbGQpLmNvbnRlbnRXaW5kb3c7XG5cdCAgICAgICAgaVdpbmRvdy5kb2N1bWVudC5vcGVuKCk7XG5cdCAgICAgICAgaVdpbmRvdy5kb2N1bWVudC5jbG9zZSgpO1xuXHQgICAgICAgIGlXaW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJyArIHRoaXMuZnJhZ21lbnQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIEFkZCBhIGNyb3NzLXBsYXRmb3JtIGBhZGRFdmVudExpc3RlbmVyYCBzaGltIGZvciBvbGRlciBicm93c2Vycy5cblx0ICAgICAgdmFyIGFkZEV2ZW50TGlzdGVuZXIgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCBmdW5jdGlvbihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGxpc3RlbmVyKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIERlcGVuZGluZyBvbiB3aGV0aGVyIHdlJ3JlIHVzaW5nIHB1c2hTdGF0ZSBvciBoYXNoZXMsIGFuZCB3aGV0aGVyXG5cdCAgICAgIC8vICdvbmhhc2hjaGFuZ2UnIGlzIHN1cHBvcnRlZCwgZGV0ZXJtaW5lIGhvdyB3ZSBjaGVjayB0aGUgVVJMIHN0YXRlLlxuXHQgICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG5cdCAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsLCBmYWxzZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5fdXNlSGFzaENoYW5nZSAmJiAhdGhpcy5pZnJhbWUpIHtcblx0ICAgICAgICBhZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuXHQgICAgICAgIHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLCB0aGlzLmludGVydmFsKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc2lsZW50KSByZXR1cm4gdGhpcy5sb2FkVXJsKCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIERpc2FibGUgQmFja2JvbmUuaGlzdG9yeSwgcGVyaGFwcyB0ZW1wb3JhcmlseS4gTm90IHVzZWZ1bCBpbiBhIHJlYWwgYXBwLFxuXHQgICAgLy8gYnV0IHBvc3NpYmx5IHVzZWZ1bCBmb3IgdW5pdCB0ZXN0aW5nIFJvdXRlcnMuXG5cdCAgICBzdG9wOiBmdW5jdGlvbigpIHtcblx0ICAgICAgLy8gQWRkIGEgY3Jvc3MtcGxhdGZvcm0gYHJlbW92ZUV2ZW50TGlzdGVuZXJgIHNoaW0gZm9yIG9sZGVyIGJyb3dzZXJzLlxuXHQgICAgICB2YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyIHx8IGZ1bmN0aW9uKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcblx0ICAgICAgICByZXR1cm4gZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gUmVtb3ZlIHdpbmRvdyBsaXN0ZW5lcnMuXG5cdCAgICAgIGlmICh0aGlzLl91c2VQdXNoU3RhdGUpIHtcblx0ICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMuY2hlY2tVcmwsIGZhbHNlKTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLl91c2VIYXNoQ2hhbmdlICYmICF0aGlzLmlmcmFtZSkge1xuXHQgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrVXJsLCBmYWxzZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIENsZWFuIHVwIHRoZSBpZnJhbWUgaWYgbmVjZXNzYXJ5LlxuXHQgICAgICBpZiAodGhpcy5pZnJhbWUpIHtcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKTtcblx0ICAgICAgICB0aGlzLmlmcmFtZSA9IG51bGw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFNvbWUgZW52aXJvbm1lbnRzIHdpbGwgdGhyb3cgd2hlbiBjbGVhcmluZyBhbiB1bmRlZmluZWQgaW50ZXJ2YWwuXG5cdCAgICAgIGlmICh0aGlzLl9jaGVja1VybEludGVydmFsKSBjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpO1xuXHQgICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQWRkIGEgcm91dGUgdG8gYmUgdGVzdGVkIHdoZW4gdGhlIGZyYWdtZW50IGNoYW5nZXMuIFJvdXRlcyBhZGRlZCBsYXRlclxuXHQgICAgLy8gbWF5IG92ZXJyaWRlIHByZXZpb3VzIHJvdXRlcy5cblx0ICAgIHJvdXRlOiBmdW5jdGlvbihyb3V0ZSwgY2FsbGJhY2spIHtcblx0ICAgICAgdGhpcy5oYW5kbGVycy51bnNoaWZ0KHtyb3V0ZTogcm91dGUsIGNhbGxiYWNrOiBjYWxsYmFja30pO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBDaGVja3MgdGhlIGN1cnJlbnQgVVJMIHRvIHNlZSBpZiBpdCBoYXMgY2hhbmdlZCwgYW5kIGlmIGl0IGhhcyxcblx0ICAgIC8vIGNhbGxzIGBsb2FkVXJsYCwgbm9ybWFsaXppbmcgYWNyb3NzIHRoZSBoaWRkZW4gaWZyYW1lLlxuXHQgICAgY2hlY2tVcmw6IGZ1bmN0aW9uKGUpIHtcblx0ICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KCk7XG5cdFxuXHQgICAgICAvLyBJZiB0aGUgdXNlciBwcmVzc2VkIHRoZSBiYWNrIGJ1dHRvbiwgdGhlIGlmcmFtZSdzIGhhc2ggd2lsbCBoYXZlXG5cdCAgICAgIC8vIGNoYW5nZWQgYW5kIHdlIHNob3VsZCB1c2UgdGhhdCBmb3IgY29tcGFyaXNvbi5cblx0ICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMuZnJhZ21lbnQgJiYgdGhpcy5pZnJhbWUpIHtcblx0ICAgICAgICBjdXJyZW50ID0gdGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5mcmFnbWVudCkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICBpZiAodGhpcy5pZnJhbWUpIHRoaXMubmF2aWdhdGUoY3VycmVudCk7XG5cdCAgICAgIHRoaXMubG9hZFVybCgpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBBdHRlbXB0IHRvIGxvYWQgdGhlIGN1cnJlbnQgVVJMIGZyYWdtZW50LiBJZiBhIHJvdXRlIHN1Y2NlZWRzIHdpdGggYVxuXHQgICAgLy8gbWF0Y2gsIHJldHVybnMgYHRydWVgLiBJZiBubyBkZWZpbmVkIHJvdXRlcyBtYXRjaGVzIHRoZSBmcmFnbWVudCxcblx0ICAgIC8vIHJldHVybnMgYGZhbHNlYC5cblx0ICAgIGxvYWRVcmw6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG5cdCAgICAgIC8vIElmIHRoZSByb290IGRvZXNuJ3QgbWF0Y2gsIG5vIHJvdXRlcyBjYW4gbWF0Y2ggZWl0aGVyLlxuXHQgICAgICBpZiAoIXRoaXMubWF0Y2hSb290KCkpIHJldHVybiBmYWxzZTtcblx0ICAgICAgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChmcmFnbWVudCk7XG5cdCAgICAgIHJldHVybiBfLnNvbWUodGhpcy5oYW5kbGVycywgZnVuY3Rpb24oaGFuZGxlcikge1xuXHQgICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XG5cdCAgICAgICAgICBoYW5kbGVyLmNhbGxiYWNrKGZyYWdtZW50KTtcblx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFNhdmUgYSBmcmFnbWVudCBpbnRvIHRoZSBoYXNoIGhpc3RvcnksIG9yIHJlcGxhY2UgdGhlIFVSTCBzdGF0ZSBpZiB0aGVcblx0ICAgIC8vICdyZXBsYWNlJyBvcHRpb24gaXMgcGFzc2VkLiBZb3UgYXJlIHJlc3BvbnNpYmxlIGZvciBwcm9wZXJseSBVUkwtZW5jb2Rpbmdcblx0ICAgIC8vIHRoZSBmcmFnbWVudCBpbiBhZHZhbmNlLlxuXHQgICAgLy9cblx0ICAgIC8vIFRoZSBvcHRpb25zIG9iamVjdCBjYW4gY29udGFpbiBgdHJpZ2dlcjogdHJ1ZWAgaWYgeW91IHdpc2ggdG8gaGF2ZSB0aGVcblx0ICAgIC8vIHJvdXRlIGNhbGxiYWNrIGJlIGZpcmVkIChub3QgdXN1YWxseSBkZXNpcmFibGUpLCBvciBgcmVwbGFjZTogdHJ1ZWAsIGlmXG5cdCAgICAvLyB5b3Ugd2lzaCB0byBtb2RpZnkgdGhlIGN1cnJlbnQgVVJMIHdpdGhvdXQgYWRkaW5nIGFuIGVudHJ5IHRvIHRoZSBoaXN0b3J5LlxuXHQgICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LCBvcHRpb25zKSB7XG5cdCAgICAgIGlmICghSGlzdG9yeS5zdGFydGVkKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgIGlmICghb3B0aW9ucyB8fCBvcHRpb25zID09PSB0cnVlKSBvcHRpb25zID0ge3RyaWdnZXI6ICEhb3B0aW9uc307XG5cdFxuXHQgICAgICAvLyBOb3JtYWxpemUgdGhlIGZyYWdtZW50LlxuXHQgICAgICBmcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoZnJhZ21lbnQgfHwgJycpO1xuXHRcblx0ICAgICAgLy8gRG9uJ3QgaW5jbHVkZSBhIHRyYWlsaW5nIHNsYXNoIG9uIHRoZSByb290LlxuXHQgICAgICB2YXIgcm9vdFBhdGggPSB0aGlzLnJvb3Q7XG5cdCAgICAgIGlmIChmcmFnbWVudCA9PT0gJycgfHwgZnJhZ21lbnQuY2hhckF0KDApID09PSAnPycpIHtcblx0ICAgICAgICByb290UGF0aCA9IHJvb3RQYXRoLnNsaWNlKDAsIC0xKSB8fCAnLyc7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHVybCA9IHJvb3RQYXRoICsgZnJhZ21lbnQ7XG5cdFxuXHQgICAgICAvLyBTdHJpcCB0aGUgaGFzaCBhbmQgZGVjb2RlIGZvciBtYXRjaGluZy5cblx0ICAgICAgZnJhZ21lbnQgPSB0aGlzLmRlY29kZUZyYWdtZW50KGZyYWdtZW50LnJlcGxhY2UocGF0aFN0cmlwcGVyLCAnJykpO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG5cdCAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudDtcblx0XG5cdCAgICAgIC8vIElmIHB1c2hTdGF0ZSBpcyBhdmFpbGFibGUsIHdlIHVzZSBpdCB0byBzZXQgdGhlIGZyYWdtZW50IGFzIGEgcmVhbCBVUkwuXG5cdCAgICAgIGlmICh0aGlzLl91c2VQdXNoU3RhdGUpIHtcblx0ICAgICAgICB0aGlzLmhpc3Rvcnlbb3B0aW9ucy5yZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oe30sIGRvY3VtZW50LnRpdGxlLCB1cmwpO1xuXHRcblx0ICAgICAgLy8gSWYgaGFzaCBjaGFuZ2VzIGhhdmVuJ3QgYmVlbiBleHBsaWNpdGx5IGRpc2FibGVkLCB1cGRhdGUgdGhlIGhhc2hcblx0ICAgICAgLy8gZnJhZ21lbnQgdG8gc3RvcmUgaGlzdG9yeS5cblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcblx0ICAgICAgICB0aGlzLl91cGRhdGVIYXNoKHRoaXMubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuXHQgICAgICAgIGlmICh0aGlzLmlmcmFtZSAmJiBmcmFnbWVudCAhPT0gdGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpKSB7XG5cdCAgICAgICAgICB2YXIgaVdpbmRvdyA9IHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3c7XG5cdFxuXHQgICAgICAgICAgLy8gT3BlbmluZyBhbmQgY2xvc2luZyB0aGUgaWZyYW1lIHRyaWNrcyBJRTcgYW5kIGVhcmxpZXIgdG8gcHVzaCBhXG5cdCAgICAgICAgICAvLyBoaXN0b3J5IGVudHJ5IG9uIGhhc2gtdGFnIGNoYW5nZS4gIFdoZW4gcmVwbGFjZSBpcyB0cnVlLCB3ZSBkb24ndFxuXHQgICAgICAgICAgLy8gd2FudCB0aGlzLlxuXHQgICAgICAgICAgaWYgKCFvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgICAgICAgaVdpbmRvdy5kb2N1bWVudC5vcGVuKCk7XG5cdCAgICAgICAgICAgIGlXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICB0aGlzLl91cGRhdGVIYXNoKGlXaW5kb3cubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgIC8vIElmIHlvdSd2ZSB0b2xkIHVzIHRoYXQgeW91IGV4cGxpY2l0bHkgZG9uJ3Qgd2FudCBmYWxsYmFjayBoYXNoY2hhbmdlLVxuXHQgICAgICAvLyBiYXNlZCBoaXN0b3J5LCB0aGVuIGBuYXZpZ2F0ZWAgYmVjb21lcyBhIHBhZ2UgcmVmcmVzaC5cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24odXJsKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAob3B0aW9ucy50cmlnZ2VyKSByZXR1cm4gdGhpcy5sb2FkVXJsKGZyYWdtZW50KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gVXBkYXRlIHRoZSBoYXNoIGxvY2F0aW9uLCBlaXRoZXIgcmVwbGFjaW5nIHRoZSBjdXJyZW50IGVudHJ5LCBvciBhZGRpbmdcblx0ICAgIC8vIGEgbmV3IG9uZSB0byB0aGUgYnJvd3NlciBoaXN0b3J5LlxuXHQgICAgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uKGxvY2F0aW9uLCBmcmFnbWVudCwgcmVwbGFjZSkge1xuXHQgICAgICBpZiAocmVwbGFjZSkge1xuXHQgICAgICAgIHZhciBocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oamF2YXNjcmlwdDp8IykuKiQvLCAnJyk7XG5cdCAgICAgICAgbG9jYXRpb24ucmVwbGFjZShocmVmICsgJyMnICsgZnJhZ21lbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgcmVxdWlyZSB0aGF0IGBoYXNoYCBjb250YWlucyBhIGxlYWRpbmcgIy5cblx0ICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyMnICsgZnJhZ21lbnQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgfSk7XG5cdFxuXHQgIC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBCYWNrYm9uZS5oaXN0b3J5LlxuXHQgIEJhY2tib25lLmhpc3RvcnkgPSBuZXcgSGlzdG9yeTtcblx0XG5cdCAgLy8gSGVscGVyc1xuXHQgIC8vIC0tLS0tLS1cblx0XG5cdCAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiBmb3Igc3ViY2xhc3Nlcy5cblx0ICAvLyBTaW1pbGFyIHRvIGBnb29nLmluaGVyaXRzYCwgYnV0IHVzZXMgYSBoYXNoIG9mIHByb3RvdHlwZSBwcm9wZXJ0aWVzIGFuZFxuXHQgIC8vIGNsYXNzIHByb3BlcnRpZXMgdG8gYmUgZXh0ZW5kZWQuXG5cdCAgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uKHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcztcblx0ICAgIHZhciBjaGlsZDtcblx0XG5cdCAgICAvLyBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHRoZSBuZXcgc3ViY2xhc3MgaXMgZWl0aGVyIGRlZmluZWQgYnkgeW91XG5cdCAgICAvLyAodGhlIFwiY29uc3RydWN0b3JcIiBwcm9wZXJ0eSBpbiB5b3VyIGBleHRlbmRgIGRlZmluaXRpb24pLCBvciBkZWZhdWx0ZWRcblx0ICAgIC8vIGJ5IHVzIHRvIHNpbXBseSBjYWxsIHRoZSBwYXJlbnQgY29uc3RydWN0b3IuXG5cdCAgICBpZiAocHJvdG9Qcm9wcyAmJiBfLmhhcyhwcm90b1Byb3BzLCAnY29uc3RydWN0b3InKSkge1xuXHQgICAgICBjaGlsZCA9IHByb3RvUHJvcHMuY29uc3RydWN0b3I7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjaGlsZCA9IGZ1bmN0aW9uKCl7IHJldHVybiBwYXJlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBBZGQgc3RhdGljIHByb3BlcnRpZXMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpZiBzdXBwbGllZC5cblx0ICAgIF8uZXh0ZW5kKGNoaWxkLCBwYXJlbnQsIHN0YXRpY1Byb3BzKTtcblx0XG5cdCAgICAvLyBTZXQgdGhlIHByb3RvdHlwZSBjaGFpbiB0byBpbmhlcml0IGZyb20gYHBhcmVudGAsIHdpdGhvdXQgY2FsbGluZ1xuXHQgICAgLy8gYHBhcmVudGAncyBjb25zdHJ1Y3RvciBmdW5jdGlvbiBhbmQgYWRkIHRoZSBwcm90b3R5cGUgcHJvcGVydGllcy5cblx0ICAgIGNoaWxkLnByb3RvdHlwZSA9IF8uY3JlYXRlKHBhcmVudC5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXHQgICAgY2hpbGQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2hpbGQ7XG5cdFxuXHQgICAgLy8gU2V0IGEgY29udmVuaWVuY2UgcHJvcGVydHkgaW4gY2FzZSB0aGUgcGFyZW50J3MgcHJvdG90eXBlIGlzIG5lZWRlZFxuXHQgICAgLy8gbGF0ZXIuXG5cdCAgICBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlO1xuXHRcblx0ICAgIHJldHVybiBjaGlsZDtcblx0ICB9O1xuXHRcblx0ICAvLyBTZXQgdXAgaW5oZXJpdGFuY2UgZm9yIHRoZSBtb2RlbCwgY29sbGVjdGlvbiwgcm91dGVyLCB2aWV3IGFuZCBoaXN0b3J5LlxuXHQgIE1vZGVsLmV4dGVuZCA9IENvbGxlY3Rpb24uZXh0ZW5kID0gUm91dGVyLmV4dGVuZCA9IFZpZXcuZXh0ZW5kID0gSGlzdG9yeS5leHRlbmQgPSBleHRlbmQ7XG5cdFxuXHQgIC8vIFRocm93IGFuIGVycm9yIHdoZW4gYSBVUkwgaXMgbmVlZGVkLCBhbmQgbm9uZSBpcyBzdXBwbGllZC5cblx0ICB2YXIgdXJsRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignQSBcInVybFwiIHByb3BlcnR5IG9yIGZ1bmN0aW9uIG11c3QgYmUgc3BlY2lmaWVkJyk7XG5cdCAgfTtcblx0XG5cdCAgLy8gV3JhcCBhbiBvcHRpb25hbCBlcnJvciBjYWxsYmFjayB3aXRoIGEgZmFsbGJhY2sgZXJyb3IgZXZlbnQuXG5cdCAgdmFyIHdyYXBFcnJvciA9IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgZXJyb3IgPSBvcHRpb25zLmVycm9yO1xuXHQgICAgb3B0aW9ucy5lcnJvciA9IGZ1bmN0aW9uKHJlc3ApIHtcblx0ICAgICAgaWYgKGVycm9yKSBlcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuXHQgICAgICBtb2RlbC50cmlnZ2VyKCdlcnJvcicsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIEJhY2tib25lO1xuXHR9KTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuXHQvLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmdcblx0Ly8gICAgIChjKSAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0Ly8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cdFxuXHQoZnVuY3Rpb24oKSB7XG5cdFxuXHQgIC8vIEJhc2VsaW5lIHNldHVwXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgaW4gdGhlIGJyb3dzZXIsIG9yIGBleHBvcnRzYCBvbiB0aGUgc2VydmVyLlxuXHQgIHZhciByb290ID0gdGhpcztcblx0XG5cdCAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS5cblx0ICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fO1xuXHRcblx0ICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOlxuXHQgIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGUsIEZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcblx0XG5cdCAgLy8gQ3JlYXRlIHF1aWNrIHJlZmVyZW5jZSB2YXJpYWJsZXMgZm9yIHNwZWVkIGFjY2VzcyB0byBjb3JlIHByb3RvdHlwZXMuXG5cdCAgdmFyXG5cdCAgICBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLFxuXHQgICAgc2xpY2UgICAgICAgICAgICA9IEFycmF5UHJvdG8uc2xpY2UsXG5cdCAgICB0b1N0cmluZyAgICAgICAgID0gT2JqUHJvdG8udG9TdHJpbmcsXG5cdCAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQgIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZVxuXHQgIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuXHQgIHZhclxuXHQgICAgbmF0aXZlSXNBcnJheSAgICAgID0gQXJyYXkuaXNBcnJheSxcblx0ICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLFxuXHQgICAgbmF0aXZlQmluZCAgICAgICAgID0gRnVuY1Byb3RvLmJpbmQsXG5cdCAgICBuYXRpdmVDcmVhdGUgICAgICAgPSBPYmplY3QuY3JlYXRlO1xuXHRcblx0ICAvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuXG5cdCAgdmFyIEN0b3IgPSBmdW5jdGlvbigpe307XG5cdFxuXHQgIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LlxuXHQgIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICBpZiAob2JqIGluc3RhbmNlb2YgXykgcmV0dXJuIG9iajtcblx0ICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBfKSkgcmV0dXJuIG5ldyBfKG9iaik7XG5cdCAgICB0aGlzLl93cmFwcGVkID0gb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIEV4cG9ydCB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yICoqTm9kZS5qcyoqLCB3aXRoXG5cdCAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgYHJlcXVpcmUoKWAgQVBJLiBJZiB3ZSdyZSBpblxuXHQgIC8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdC5cblx0ICBpZiAodHJ1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdCAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG5cdCAgICB9XG5cdCAgICBleHBvcnRzLl8gPSBfO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByb290Ll8gPSBfO1xuXHQgIH1cblx0XG5cdCAgLy8gQ3VycmVudCB2ZXJzaW9uLlxuXHQgIF8uVkVSU0lPTiA9ICcxLjguMyc7XG5cdFxuXHQgIC8vIEludGVybmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBlZmZpY2llbnQgKGZvciBjdXJyZW50IGVuZ2luZXMpIHZlcnNpb25cblx0ICAvLyBvZiB0aGUgcGFzc2VkLWluIGNhbGxiYWNrLCB0byBiZSByZXBlYXRlZGx5IGFwcGxpZWQgaW4gb3RoZXIgVW5kZXJzY29yZVxuXHQgIC8vIGZ1bmN0aW9ucy5cblx0ICB2YXIgb3B0aW1pemVDYiA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG5cdCAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSByZXR1cm4gZnVuYztcblx0ICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuXHQgICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUpO1xuXHQgICAgICB9O1xuXHQgICAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcblx0ICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBvdGhlcik7XG5cdCAgICAgIH07XG5cdCAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuXHQgICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcblx0ICAgICAgfTtcblx0ICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuXHQgICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIEEgbW9zdGx5LWludGVybmFsIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSBhcHBsaWVkXG5cdCAgLy8gdG8gZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBkZXNpcmVkIHJlc3VsdCDigJQgZWl0aGVyXG5cdCAgLy8gaWRlbnRpdHksIGFuIGFyYml0cmFyeSBjYWxsYmFjaywgYSBwcm9wZXJ0eSBtYXRjaGVyLCBvciBhIHByb3BlcnR5IGFjY2Vzc29yLlxuXHQgIHZhciBjYiA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCkge1xuXHQgICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBfLmlkZW50aXR5O1xuXHQgICAgaWYgKF8uaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCk7XG5cdCAgICBpZiAoXy5pc09iamVjdCh2YWx1ZSkpIHJldHVybiBfLm1hdGNoZXIodmFsdWUpO1xuXHQgICAgcmV0dXJuIF8ucHJvcGVydHkodmFsdWUpO1xuXHQgIH07XG5cdCAgXy5pdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG5cdCAgICByZXR1cm4gY2IodmFsdWUsIGNvbnRleHQsIEluZmluaXR5KTtcblx0ICB9O1xuXHRcblx0ICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYXNzaWduZXIgZnVuY3Rpb25zLlxuXHQgIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCB1bmRlZmluZWRPbmx5KSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgICBpZiAobGVuZ3RoIDwgMiB8fCBvYmogPT0gbnVsbCkgcmV0dXJuIG9iajtcblx0ICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdLFxuXHQgICAgICAgICAgICBrZXlzID0ga2V5c0Z1bmMoc291cmNlKSxcblx0ICAgICAgICAgICAgbCA9IGtleXMubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgICAgIGlmICghdW5kZWZpbmVkT25seSB8fCBvYmpba2V5XSA9PT0gdm9pZCAwKSBvYmpba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gb2JqO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyLlxuXHQgIHZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG5cdCAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9O1xuXHQgICAgaWYgKG5hdGl2ZUNyZWF0ZSkgcmV0dXJuIG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpO1xuXHQgICAgQ3Rvci5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG5cdCAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7XG5cdCAgICBDdG9yLnByb3RvdHlwZSA9IG51bGw7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIHZhciBwcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICByZXR1cm4gb2JqID09IG51bGwgPyB2b2lkIDAgOiBvYmpba2V5XTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG5cdCAgLy8gc2hvdWxkIGJlIGl0ZXJhdGVkIGFzIGFuIGFycmF5IG9yIGFzIGFuIG9iamVjdFxuXHQgIC8vIFJlbGF0ZWQ6IGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoXG5cdCAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTRcblx0ICB2YXIgTUFYX0FSUkFZX0lOREVYID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblx0ICB2YXIgZ2V0TGVuZ3RoID0gcHJvcGVydHkoJ2xlbmd0aCcpO1xuXHQgIHZhciBpc0FycmF5TGlrZSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHtcblx0ICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoY29sbGVjdGlvbik7XG5cdCAgICByZXR1cm4gdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyAmJiBsZW5ndGggPj0gMCAmJiBsZW5ndGggPD0gTUFYX0FSUkFZX0lOREVYO1xuXHQgIH07XG5cdFxuXHQgIC8vIENvbGxlY3Rpb24gRnVuY3Rpb25zXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gVGhlIGNvcm5lcnN0b25lLCBhbiBgZWFjaGAgaW1wbGVtZW50YXRpb24sIGFrYSBgZm9yRWFjaGAuXG5cdCAgLy8gSGFuZGxlcyByYXcgb2JqZWN0cyBpbiBhZGRpdGlvbiB0byBhcnJheS1saWtlcy4gVHJlYXRzIGFsbFxuXHQgIC8vIHNwYXJzZSBhcnJheS1saWtlcyBhcyBpZiB0aGV5IHdlcmUgZGVuc2UuXG5cdCAgXy5lYWNoID0gXy5mb3JFYWNoID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcblx0ICAgIHZhciBpLCBsZW5ndGg7XG5cdCAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuXHQgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBpdGVyYXRlZShvYmpbaV0sIGksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG5cdCAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBpdGVyYXRlZShvYmpba2V5c1tpXV0sIGtleXNbaV0sIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBvYmo7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuXG5cdCAgXy5tYXAgPSBfLmNvbGxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcblx0ICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG5cdCAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG5cdCAgICAgICAgcmVzdWx0cyA9IEFycmF5KGxlbmd0aCk7XG5cdCAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG5cdCAgICAgIHJlc3VsdHNbaW5kZXhdID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ3JlYXRlIGEgcmVkdWNpbmcgZnVuY3Rpb24gaXRlcmF0aW5nIGxlZnQgb3IgcmlnaHQuXG5cdCAgZnVuY3Rpb24gY3JlYXRlUmVkdWNlKGRpcikge1xuXHQgICAgLy8gT3B0aW1pemVkIGl0ZXJhdG9yIGZ1bmN0aW9uIGFzIHVzaW5nIGFyZ3VtZW50cy5sZW5ndGhcblx0ICAgIC8vIGluIHRoZSBtYWluIGZ1bmN0aW9uIHdpbGwgZGVvcHRpbWl6ZSB0aGUsIHNlZSAjMTk5MS5cblx0ICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGtleXMsIGluZGV4LCBsZW5ndGgpIHtcblx0ICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuXHQgICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG5cdCAgICAgICAgbWVtbyA9IGl0ZXJhdGVlKG1lbW8sIG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWVtbztcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgbWVtbywgY29udGV4dCkge1xuXHQgICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDQpO1xuXHQgICAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuXHQgICAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG5cdCAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcblx0ICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpbml0aWFsIHZhbHVlIGlmIG5vbmUgaXMgcHJvdmlkZWQuXG5cdCAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykge1xuXHQgICAgICAgIG1lbW8gPSBvYmpba2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXhdO1xuXHQgICAgICAgIGluZGV4ICs9IGRpcjtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuXHQgIC8vIG9yIGBmb2xkbGAuXG5cdCAgXy5yZWR1Y2UgPSBfLmZvbGRsID0gXy5pbmplY3QgPSBjcmVhdGVSZWR1Y2UoMSk7XG5cdFxuXHQgIC8vIFRoZSByaWdodC1hc3NvY2lhdGl2ZSB2ZXJzaW9uIG9mIHJlZHVjZSwgYWxzbyBrbm93biBhcyBgZm9sZHJgLlxuXHQgIF8ucmVkdWNlUmlnaHQgPSBfLmZvbGRyID0gY3JlYXRlUmVkdWNlKC0xKTtcblx0XG5cdCAgLy8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLlxuXHQgIF8uZmluZCA9IF8uZGV0ZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgIHZhciBrZXk7XG5cdCAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuXHQgICAgICBrZXkgPSBfLmZpbmRJbmRleChvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrZXkgPSBfLmZpbmRLZXkob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgfVxuXHQgICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuXHQgIC8vIEFsaWFzZWQgYXMgYHNlbGVjdGAuXG5cdCAgXy5maWx0ZXIgPSBfLnNlbGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXHQgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcblx0ICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuXHQgICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiByZXN1bHRzO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCBhIHRydXRoIHRlc3QgZmFpbHMuXG5cdCAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5uZWdhdGUoY2IocHJlZGljYXRlKSksIGNvbnRleHQpO1xuXHQgIH07XG5cdFxuXHQgIC8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LlxuXHQgIC8vIEFsaWFzZWQgYXMgYGFsbGAuXG5cdCAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG5cdCAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuXHQgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuXHQgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuXHQgICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH07XG5cdFxuXHQgIC8vIERldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgb2JqZWN0IG1hdGNoZXMgYSB0cnV0aCB0ZXN0LlxuXHQgIC8vIEFsaWFzZWQgYXMgYGFueWAuXG5cdCAgXy5zb21lID0gXy5hbnkgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcblx0ICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG5cdCAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7XG5cdCAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG5cdCAgICAgIGlmIChwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9O1xuXHRcblx0ICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cblx0ICAvLyBBbGlhc2VkIGFzIGBpbmNsdWRlc2AgYW5kIGBpbmNsdWRlYC5cblx0ICBfLmNvbnRhaW5zID0gXy5pbmNsdWRlcyA9IF8uaW5jbHVkZSA9IGZ1bmN0aW9uKG9iaiwgaXRlbSwgZnJvbUluZGV4LCBndWFyZCkge1xuXHQgICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuXHQgICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggIT0gJ251bWJlcicgfHwgZ3VhcmQpIGZyb21JbmRleCA9IDA7XG5cdCAgICByZXR1cm4gXy5pbmRleE9mKG9iaiwgaXRlbSwgZnJvbUluZGV4KSA+PSAwO1xuXHQgIH07XG5cdFxuXHQgIC8vIEludm9rZSBhIG1ldGhvZCAod2l0aCBhcmd1bWVudHMpIG9uIGV2ZXJ5IGl0ZW0gaW4gYSBjb2xsZWN0aW9uLlxuXHQgIF8uaW52b2tlID0gZnVuY3Rpb24ob2JqLCBtZXRob2QpIHtcblx0ICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuXHQgICAgdmFyIGlzRnVuYyA9IF8uaXNGdW5jdGlvbihtZXRob2QpO1xuXHQgICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgdmFyIGZ1bmMgPSBpc0Z1bmMgPyBtZXRob2QgOiB2YWx1ZVttZXRob2RdO1xuXHQgICAgICByZXR1cm4gZnVuYyA9PSBudWxsID8gZnVuYyA6IGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cblx0ICBfLnBsdWNrID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcblx0ICAgIHJldHVybiBfLm1hcChvYmosIF8ucHJvcGVydHkoa2V5KSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmlsdGVyYDogc2VsZWN0aW5nIG9ubHkgb2JqZWN0c1xuXHQgIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG5cdCAgXy53aGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcblx0ICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuXHQgIH07XG5cdFxuXHQgIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbmRgOiBnZXR0aW5nIHRoZSBmaXJzdCBvYmplY3Rcblx0ICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuXHQgIF8uZmluZFdoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykge1xuXHQgICAgcmV0dXJuIF8uZmluZChvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybiB0aGUgbWF4aW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cblx0ICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcblx0ICAgIHZhciByZXN1bHQgPSAtSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IC1JbmZpbml0eSxcblx0ICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG5cdCAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuXHQgICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhbHVlID0gb2JqW2ldO1xuXHQgICAgICAgIGlmICh2YWx1ZSA+IHJlc3VsdCkge1xuXHQgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcblx0ICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG5cdCAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpO1xuXHQgICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG5cdCAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcblx0ICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cblx0ICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcblx0ICAgIHZhciByZXN1bHQgPSBJbmZpbml0eSwgbGFzdENvbXB1dGVkID0gSW5maW5pdHksXG5cdCAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuXHQgICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHtcblx0ICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YWx1ZSA9IG9ialtpXTtcblx0ICAgICAgICBpZiAodmFsdWUgPCByZXN1bHQpIHtcblx0ICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuXHQgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcblx0ICAgICAgICBpZiAoY29tcHV0ZWQgPCBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IEluZmluaXR5ICYmIHJlc3VsdCA9PT0gSW5maW5pdHkpIHtcblx0ICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuXHQgICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gU2h1ZmZsZSBhIGNvbGxlY3Rpb24sIHVzaW5nIHRoZSBtb2Rlcm4gdmVyc2lvbiBvZiB0aGVcblx0ICAvLyBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVy4oCTWWF0ZXNfc2h1ZmZsZSkuXG5cdCAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICB2YXIgc2V0ID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG5cdCAgICB2YXIgbGVuZ3RoID0gc2V0Lmxlbmd0aDtcblx0ICAgIHZhciBzaHVmZmxlZCA9IEFycmF5KGxlbmd0aCk7XG5cdCAgICBmb3IgKHZhciBpbmRleCA9IDAsIHJhbmQ7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgIHJhbmQgPSBfLnJhbmRvbSgwLCBpbmRleCk7XG5cdCAgICAgIGlmIChyYW5kICE9PSBpbmRleCkgc2h1ZmZsZWRbaW5kZXhdID0gc2h1ZmZsZWRbcmFuZF07XG5cdCAgICAgIHNodWZmbGVkW3JhbmRdID0gc2V0W2luZGV4XTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBzaHVmZmxlZDtcblx0ICB9O1xuXHRcblx0ICAvLyBTYW1wbGUgKipuKiogcmFuZG9tIHZhbHVlcyBmcm9tIGEgY29sbGVjdGlvbi5cblx0ICAvLyBJZiAqKm4qKiBpcyBub3Qgc3BlY2lmaWVkLCByZXR1cm5zIGEgc2luZ2xlIHJhbmRvbSBlbGVtZW50LlxuXHQgIC8vIFRoZSBpbnRlcm5hbCBgZ3VhcmRgIGFyZ3VtZW50IGFsbG93cyBpdCB0byB3b3JrIHdpdGggYG1hcGAuXG5cdCAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7XG5cdCAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XG5cdCAgICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcblx0ICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF8uc2h1ZmZsZShvYmopLnNsaWNlKDAsIE1hdGgubWF4KDAsIG4pKTtcblx0ICB9O1xuXHRcblx0ICAvLyBTb3J0IHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24gcHJvZHVjZWQgYnkgYW4gaXRlcmF0ZWUuXG5cdCAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcblx0ICAgIHJldHVybiBfLnBsdWNrKF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgdmFsdWU6IHZhbHVlLFxuXHQgICAgICAgIGluZGV4OiBpbmRleCxcblx0ICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KVxuXHQgICAgICB9O1xuXHQgICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuXHQgICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7XG5cdCAgICAgIHZhciBiID0gcmlnaHQuY3JpdGVyaWE7XG5cdCAgICAgIGlmIChhICE9PSBiKSB7XG5cdCAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7XG5cdCAgICAgICAgaWYgKGEgPCBiIHx8IGIgPT09IHZvaWQgMCkgcmV0dXJuIC0xO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7XG5cdCAgICB9KSwgJ3ZhbHVlJyk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gdXNlZCBmb3IgYWdncmVnYXRlIFwiZ3JvdXAgYnlcIiBvcGVyYXRpb25zLlxuXHQgIHZhciBncm91cCA9IGZ1bmN0aW9uKGJlaGF2aW9yKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0ge307XG5cdCAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuXHQgICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcblx0ICAgICAgICB2YXIga2V5ID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBvYmopO1xuXHQgICAgICAgIGJlaGF2aW9yKHJlc3VsdCwgdmFsdWUsIGtleSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBHcm91cHMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbi4gUGFzcyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlXG5cdCAgLy8gdG8gZ3JvdXAgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjcml0ZXJpb24uXG5cdCAgXy5ncm91cEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG5cdCAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XS5wdXNoKHZhbHVlKTsgZWxzZSByZXN1bHRba2V5XSA9IFt2YWx1ZV07XG5cdCAgfSk7XG5cdFxuXHQgIC8vIEluZGV4ZXMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiwgc2ltaWxhciB0byBgZ3JvdXBCeWAsIGJ1dCBmb3Jcblx0ICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG5cdCAgXy5pbmRleEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG5cdCAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuXHQgIH0pO1xuXHRcblx0ICAvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3Ncblx0ICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcblx0ICAvLyBjcml0ZXJpb24uXG5cdCAgXy5jb3VudEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG5cdCAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XSsrOyBlbHNlIHJlc3VsdFtrZXldID0gMTtcblx0ICB9KTtcblx0XG5cdCAgLy8gU2FmZWx5IGNyZWF0ZSBhIHJlYWwsIGxpdmUgYXJyYXkgZnJvbSBhbnl0aGluZyBpdGVyYWJsZS5cblx0ICBfLnRvQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIGlmICghb2JqKSByZXR1cm4gW107XG5cdCAgICBpZiAoXy5pc0FycmF5KG9iaikpIHJldHVybiBzbGljZS5jYWxsKG9iaik7XG5cdCAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7XG5cdCAgICByZXR1cm4gXy52YWx1ZXMob2JqKTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuXG5cdCAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICBpZiAob2JqID09IG51bGwpIHJldHVybiAwO1xuXHQgICAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoO1xuXHQgIH07XG5cdFxuXHQgIC8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIHR3byBhcnJheXM6IG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgc2F0aXNmeSB0aGUgZ2l2ZW5cblx0ICAvLyBwcmVkaWNhdGUsIGFuZCBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIGRvIG5vdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXG5cdCAgXy5wYXJ0aXRpb24gPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcblx0ICAgIHZhciBwYXNzID0gW10sIGZhaWwgPSBbXTtcblx0ICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikge1xuXHQgICAgICAocHJlZGljYXRlKHZhbHVlLCBrZXksIG9iaikgPyBwYXNzIDogZmFpbCkucHVzaCh2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBbcGFzcywgZmFpbF07XG5cdCAgfTtcblx0XG5cdCAgLy8gQXJyYXkgRnVuY3Rpb25zXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIEdldCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgZmlyc3QgTlxuXHQgIC8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYGhlYWRgIGFuZCBgdGFrZWAuIFRoZSAqKmd1YXJkKiogY2hlY2tcblx0ICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG5cdCAgXy5maXJzdCA9IF8uaGVhZCA9IF8udGFrZSA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuXHQgICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG5cdCAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbMF07XG5cdCAgICByZXR1cm4gXy5pbml0aWFsKGFycmF5LCBhcnJheS5sZW5ndGggLSBuKTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBsYXN0IGVudHJ5IG9mIHRoZSBhcnJheS4gRXNwZWNpYWxseSB1c2VmdWwgb25cblx0ICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuXHQgIC8vIHRoZSBhcnJheSwgZXhjbHVkaW5nIHRoZSBsYXN0IE4uXG5cdCAgXy5pbml0aWFsID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG5cdCAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cblx0ICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuXHQgIF8ubGFzdCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuXHQgICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG5cdCAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG5cdCAgICByZXR1cm4gXy5yZXN0KGFycmF5LCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSBuKSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLlxuXHQgIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqbioqIHdpbGwgcmV0dXJuXG5cdCAgLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuXHQgIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuXHQgICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKTtcblx0ICB9O1xuXHRcblx0ICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuXG5cdCAgXy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcblx0ICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgXy5pZGVudGl0eSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgYSByZWN1cnNpdmUgYGZsYXR0ZW5gIGZ1bmN0aW9uLlxuXHQgIHZhciBmbGF0dGVuID0gZnVuY3Rpb24oaW5wdXQsIHNoYWxsb3csIHN0cmljdCwgc3RhcnRJbmRleCkge1xuXHQgICAgdmFyIG91dHB1dCA9IFtdLCBpZHggPSAwO1xuXHQgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXggfHwgMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGlucHV0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGlucHV0W2ldO1xuXHQgICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChfLmlzQXJyYXkodmFsdWUpIHx8IF8uaXNBcmd1bWVudHModmFsdWUpKSkge1xuXHQgICAgICAgIC8vZmxhdHRlbiBjdXJyZW50IGxldmVsIG9mIGFycmF5IG9yIGFyZ3VtZW50cyBvYmplY3Rcblx0ICAgICAgICBpZiAoIXNoYWxsb3cpIHZhbHVlID0gZmxhdHRlbih2YWx1ZSwgc2hhbGxvdywgc3RyaWN0KTtcblx0ICAgICAgICB2YXIgaiA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDtcblx0ICAgICAgICBvdXRwdXQubGVuZ3RoICs9IGxlbjtcblx0ICAgICAgICB3aGlsZSAoaiA8IGxlbikge1xuXHQgICAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlW2orK107XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKCFzdHJpY3QpIHtcblx0ICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBvdXRwdXQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gRmxhdHRlbiBvdXQgYW4gYXJyYXksIGVpdGhlciByZWN1cnNpdmVseSAoYnkgZGVmYXVsdCksIG9yIGp1c3Qgb25lIGxldmVsLlxuXHQgIF8uZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5LCBzaGFsbG93KSB7XG5cdCAgICByZXR1cm4gZmxhdHRlbihhcnJheSwgc2hhbGxvdywgZmFsc2UpO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybiBhIHZlcnNpb24gb2YgdGhlIGFycmF5IHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIHZhbHVlKHMpLlxuXHQgIF8ud2l0aG91dCA9IGZ1bmN0aW9uKGFycmF5KSB7XG5cdCAgICByZXR1cm4gXy5kaWZmZXJlbmNlKGFycmF5LCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuXHQgIH07XG5cdFxuXHQgIC8vIFByb2R1Y2UgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGhhcyBhbHJlYWR5XG5cdCAgLy8gYmVlbiBzb3J0ZWQsIHlvdSBoYXZlIHRoZSBvcHRpb24gb2YgdXNpbmcgYSBmYXN0ZXIgYWxnb3JpdGhtLlxuXHQgIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuXG5cdCAgXy51bmlxID0gXy51bmlxdWUgPSBmdW5jdGlvbihhcnJheSwgaXNTb3J0ZWQsIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkge1xuXHQgICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7XG5cdCAgICAgIGl0ZXJhdGVlID0gaXNTb3J0ZWQ7XG5cdCAgICAgIGlzU29ydGVkID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBpZiAoaXRlcmF0ZWUgIT0gbnVsbCkgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICB2YXIgc2VlbiA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSxcblx0ICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7XG5cdCAgICAgIGlmIChpc1NvcnRlZCkge1xuXHQgICAgICAgIGlmICghaSB8fCBzZWVuICE9PSBjb21wdXRlZCkgcmVzdWx0LnB1c2godmFsdWUpO1xuXHQgICAgICAgIHNlZW4gPSBjb21wdXRlZDtcblx0ICAgICAgfSBlbHNlIGlmIChpdGVyYXRlZSkge1xuXHQgICAgICAgIGlmICghXy5jb250YWlucyhzZWVuLCBjb21wdXRlZCkpIHtcblx0ICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG5cdCAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKCFfLmNvbnRhaW5zKHJlc3VsdCwgdmFsdWUpKSB7XG5cdCAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZlxuXHQgIC8vIHRoZSBwYXNzZWQtaW4gYXJyYXlzLlxuXHQgIF8udW5pb24gPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBfLnVuaXEoZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUpKTtcblx0ICB9O1xuXHRcblx0ICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgZXZlcnkgaXRlbSBzaGFyZWQgYmV0d2VlbiBhbGwgdGhlXG5cdCAgLy8gcGFzc2VkLWluIGFycmF5cy5cblx0ICBfLmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKGFycmF5KSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICB2YXIgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBpdGVtID0gYXJyYXlbaV07XG5cdCAgICAgIGlmIChfLmNvbnRhaW5zKHJlc3VsdCwgaXRlbSkpIGNvbnRpbnVlO1xuXHQgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuXHQgICAgICAgIGlmICghXy5jb250YWlucyhhcmd1bWVudHNbal0sIGl0ZW0pKSBicmVhaztcblx0ICAgICAgfVxuXHQgICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIC8vIFRha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBvbmUgYXJyYXkgYW5kIGEgbnVtYmVyIG9mIG90aGVyIGFycmF5cy5cblx0ICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuXHQgIF8uZGlmZmVyZW5jZSA9IGZ1bmN0aW9uKGFycmF5KSB7XG5cdCAgICB2YXIgcmVzdCA9IGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlLCAxKTtcblx0ICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpe1xuXHQgICAgICByZXR1cm4gIV8uY29udGFpbnMocmVzdCwgdmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gWmlwIHRvZ2V0aGVyIG11bHRpcGxlIGxpc3RzIGludG8gYSBzaW5nbGUgYXJyYXkgLS0gZWxlbWVudHMgdGhhdCBzaGFyZVxuXHQgIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuXHQgIF8uemlwID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gXy51bnppcChhcmd1bWVudHMpO1xuXHQgIH07XG5cdFxuXHQgIC8vIENvbXBsZW1lbnQgb2YgXy56aXAuIFVuemlwIGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIGFuZCBncm91cHNcblx0ICAvLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXNcblx0ICBfLnVuemlwID0gZnVuY3Rpb24oYXJyYXkpIHtcblx0ICAgIHZhciBsZW5ndGggPSBhcnJheSAmJiBfLm1heChhcnJheSwgZ2V0TGVuZ3RoKS5sZW5ndGggfHwgMDtcblx0ICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXHRcblx0ICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ29udmVydHMgbGlzdHMgaW50byBvYmplY3RzLiBQYXNzIGVpdGhlciBhIHNpbmdsZSBhcnJheSBvZiBgW2tleSwgdmFsdWVdYFxuXHQgIC8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZlxuXHQgIC8vIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlcy5cblx0ICBfLm9iamVjdCA9IGZ1bmN0aW9uKGxpc3QsIHZhbHVlcykge1xuXHQgICAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChsaXN0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGlmICh2YWx1ZXMpIHtcblx0ICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzdWx0W2xpc3RbaV1bMF1dID0gbGlzdFtpXVsxXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBmaW5kSW5kZXggYW5kIGZpbmRMYXN0SW5kZXggZnVuY3Rpb25zXG5cdCAgZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoZGlyKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcblx0ICAgICAgdmFyIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuXHQgICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG5cdCAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHJldHVybiBpbmRleDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gLTE7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG5cdCAgXy5maW5kSW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigxKTtcblx0ICBfLmZpbmRMYXN0SW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigtMSk7XG5cdFxuXHQgIC8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2hcblx0ICAvLyBhbiBvYmplY3Qgc2hvdWxkIGJlIGluc2VydGVkIHNvIGFzIHRvIG1haW50YWluIG9yZGVyLiBVc2VzIGJpbmFyeSBzZWFyY2guXG5cdCAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcblx0ICAgIHZhciB2YWx1ZSA9IGl0ZXJhdGVlKG9iaik7XG5cdCAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG5cdCAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuXHQgICAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKTtcblx0ICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBsb3c7XG5cdCAgfTtcblx0XG5cdCAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXhPZiBhbmQgbGFzdEluZGV4T2YgZnVuY3Rpb25zXG5cdCAgZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyLCBwcmVkaWNhdGVGaW5kLCBzb3J0ZWRJbmRleCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBpdGVtLCBpZHgpIHtcblx0ICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuXHQgICAgICBpZiAodHlwZW9mIGlkeCA9PSAnbnVtYmVyJykge1xuXHQgICAgICAgIGlmIChkaXIgPiAwKSB7XG5cdCAgICAgICAgICAgIGkgPSBpZHggPj0gMCA/IGlkeCA6IE1hdGgubWF4KGlkeCArIGxlbmd0aCwgaSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbGVuZ3RoID0gaWR4ID49IDAgPyBNYXRoLm1pbihpZHggKyAxLCBsZW5ndGgpIDogaWR4ICsgbGVuZ3RoICsgMTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuXHQgICAgICAgIGlkeCA9IHNvcnRlZEluZGV4KGFycmF5LCBpdGVtKTtcblx0ICAgICAgICByZXR1cm4gYXJyYXlbaWR4XSA9PT0gaXRlbSA/IGlkeCA6IC0xO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChpdGVtICE9PSBpdGVtKSB7XG5cdCAgICAgICAgaWR4ID0gcHJlZGljYXRlRmluZChzbGljZS5jYWxsKGFycmF5LCBpLCBsZW5ndGgpLCBfLmlzTmFOKTtcblx0ICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG5cdCAgICAgIH1cblx0ICAgICAgZm9yIChpZHggPSBkaXIgPiAwID8gaSA6IGxlbmd0aCAtIDE7IGlkeCA+PSAwICYmIGlkeCA8IGxlbmd0aDsgaWR4ICs9IGRpcikge1xuXHQgICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiAtMTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksXG5cdCAgLy8gb3IgLTEgaWYgdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS5cblx0ICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcblx0ICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLlxuXHQgIF8uaW5kZXhPZiA9IGNyZWF0ZUluZGV4RmluZGVyKDEsIF8uZmluZEluZGV4LCBfLnNvcnRlZEluZGV4KTtcblx0ICBfLmxhc3RJbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoLTEsIF8uZmluZExhc3RJbmRleCk7XG5cdFxuXHQgIC8vIEdlbmVyYXRlIGFuIGludGVnZXIgQXJyYXkgY29udGFpbmluZyBhbiBhcml0aG1ldGljIHByb2dyZXNzaW9uLiBBIHBvcnQgb2Zcblx0ICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuXHQgIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG5cdCAgXy5yYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBzdG9wLCBzdGVwKSB7XG5cdCAgICBpZiAoc3RvcCA9PSBudWxsKSB7XG5cdCAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuXHQgICAgICBzdGFydCA9IDA7XG5cdCAgICB9XG5cdCAgICBzdGVwID0gc3RlcCB8fCAxO1xuXHRcblx0ICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7XG5cdCAgICB2YXIgcmFuZ2UgPSBBcnJheShsZW5ndGgpO1xuXHRcblx0ICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyssIHN0YXJ0ICs9IHN0ZXApIHtcblx0ICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0O1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByYW5nZTtcblx0ICB9O1xuXHRcblx0ICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvclxuXHQgIC8vIG9yIGEgbm9ybWFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3ZpZGVkIGFyZ3VtZW50c1xuXHQgIHZhciBleGVjdXRlQm91bmQgPSBmdW5jdGlvbihzb3VyY2VGdW5jLCBib3VuZEZ1bmMsIGNvbnRleHQsIGNhbGxpbmdDb250ZXh0LCBhcmdzKSB7XG5cdCAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgdmFyIHNlbGYgPSBiYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTtcblx0ICAgIHZhciByZXN1bHQgPSBzb3VyY2VGdW5jLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHQgICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcblx0ICAgIHJldHVybiBzZWxmO1xuXHQgIH07XG5cdFxuXHQgIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLFxuXHQgIC8vIG9wdGlvbmFsbHkpLiBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgRnVuY3Rpb24uYmluZGAgaWZcblx0ICAvLyBhdmFpbGFibGUuXG5cdCAgXy5iaW5kID0gZnVuY3Rpb24oZnVuYywgY29udGV4dCkge1xuXHQgICAgaWYgKG5hdGl2ZUJpbmQgJiYgZnVuYy5iaW5kID09PSBuYXRpdmVCaW5kKSByZXR1cm4gbmF0aXZlQmluZC5hcHBseShmdW5jLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuXHQgICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuXHQgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG5cdCAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgY29udGV4dCwgdGhpcywgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIGJvdW5kO1xuXHQgIH07XG5cdFxuXHQgIC8vIFBhcnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIGJ5IGNyZWF0aW5nIGEgdmVyc2lvbiB0aGF0IGhhcyBoYWQgc29tZSBvZiBpdHNcblx0ICAvLyBhcmd1bWVudHMgcHJlLWZpbGxlZCwgd2l0aG91dCBjaGFuZ2luZyBpdHMgZHluYW1pYyBgdGhpc2AgY29udGV4dC4gXyBhY3RzXG5cdCAgLy8gYXMgYSBwbGFjZWhvbGRlciwgYWxsb3dpbmcgYW55IGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cyB0byBiZSBwcmUtZmlsbGVkLlxuXHQgIF8ucGFydGlhbCA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0ICAgIHZhciBib3VuZEFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdCAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDtcblx0ICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gXyA/IGFyZ3VtZW50c1twb3NpdGlvbisrXSA6IGJvdW5kQXJnc1tpXTtcblx0ICAgICAgfVxuXHQgICAgICB3aGlsZSAocG9zaXRpb24gPCBhcmd1bWVudHMubGVuZ3RoKSBhcmdzLnB1c2goYXJndW1lbnRzW3Bvc2l0aW9uKytdKTtcblx0ICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgdGhpcywgdGhpcywgYXJncyk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIGJvdW5kO1xuXHQgIH07XG5cdFxuXHQgIC8vIEJpbmQgYSBudW1iZXIgb2YgYW4gb2JqZWN0J3MgbWV0aG9kcyB0byB0aGF0IG9iamVjdC4gUmVtYWluaW5nIGFyZ3VtZW50c1xuXHQgIC8vIGFyZSB0aGUgbWV0aG9kIG5hbWVzIHRvIGJlIGJvdW5kLiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQgYWxsIGNhbGxiYWNrc1xuXHQgIC8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC5cblx0ICBfLmJpbmRBbGwgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHZhciBpLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLCBrZXk7XG5cdCAgICBpZiAobGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcycpO1xuXHQgICAgZm9yIChpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGtleSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIE1lbW9pemUgYW4gZXhwZW5zaXZlIGZ1bmN0aW9uIGJ5IHN0b3JpbmcgaXRzIHJlc3VsdHMuXG5cdCAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG5cdCAgICB2YXIgbWVtb2l6ZSA9IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB2YXIgY2FjaGUgPSBtZW1vaXplLmNhY2hlO1xuXHQgICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcblx0ICAgICAgaWYgKCFfLmhhcyhjYWNoZSwgYWRkcmVzcykpIGNhY2hlW2FkZHJlc3NdID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICByZXR1cm4gY2FjaGVbYWRkcmVzc107XG5cdCAgICB9O1xuXHQgICAgbWVtb2l6ZS5jYWNoZSA9IHt9O1xuXHQgICAgcmV0dXJuIG1lbW9pemU7XG5cdCAgfTtcblx0XG5cdCAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuXHQgIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cblx0ICBfLmRlbGF5ID0gZnVuY3Rpb24oZnVuYywgd2FpdCkge1xuXHQgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG5cdCAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZXR1cm4gZnVuYy5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgIH0sIHdhaXQpO1xuXHQgIH07XG5cdFxuXHQgIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhc1xuXHQgIC8vIGNsZWFyZWQuXG5cdCAgXy5kZWZlciA9IF8ucGFydGlhbChfLmRlbGF5LCBfLCAxKTtcblx0XG5cdCAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG5cdCAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG5cdCAgLy8gYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuXHQgIC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG5cdCAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXG5cdCAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICAgIHZhciBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XG5cdCAgICB2YXIgdGltZW91dCA9IG51bGw7XG5cdCAgICB2YXIgcHJldmlvdXMgPSAwO1xuXHQgICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG5cdCAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IF8ubm93KCk7XG5cdCAgICAgIHRpbWVvdXQgPSBudWxsO1xuXHQgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBub3cgPSBfLm5vdygpO1xuXHQgICAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuXHQgICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG5cdCAgICAgIGNvbnRleHQgPSB0aGlzO1xuXHQgICAgICBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuXHQgICAgICAgIGlmICh0aW1lb3V0KSB7XG5cdCAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdCAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcHJldmlvdXMgPSBub3c7XG5cdCAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuXHQgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3Rcblx0ICAvLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG5cdCAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG5cdCAgLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cblx0ICBfLmRlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG5cdCAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cdFxuXHQgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBsYXN0ID0gXy5ub3coKSAtIHRpbWVzdGFtcDtcblx0XG5cdCAgICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcblx0ICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuXHQgICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG5cdCAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgY29udGV4dCA9IHRoaXM7XG5cdCAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICAgIHRpbWVzdGFtcCA9IF8ubm93KCk7XG5cdCAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuXHQgICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0ICAgICAgaWYgKGNhbGxOb3cpIHtcblx0ICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJucyB0aGUgZmlyc3QgZnVuY3Rpb24gcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSBzZWNvbmQsXG5cdCAgLy8gYWxsb3dpbmcgeW91IHRvIGFkanVzdCBhcmd1bWVudHMsIHJ1biBjb2RlIGJlZm9yZSBhbmQgYWZ0ZXIsIGFuZFxuXHQgIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG5cdCAgXy53cmFwID0gZnVuY3Rpb24oZnVuYywgd3JhcHBlcikge1xuXHQgICAgcmV0dXJuIF8ucGFydGlhbCh3cmFwcGVyLCBmdW5jKTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIGEgbmVnYXRlZCB2ZXJzaW9uIG9mIHRoZSBwYXNzZWQtaW4gcHJlZGljYXRlLlxuXHQgIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiAhcHJlZGljYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG5cdCAgLy8gY29uc3VtaW5nIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cy5cblx0ICBfLmNvbXBvc2UgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgdmFyIHN0YXJ0ID0gYXJncy5sZW5ndGggLSAxO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgaSA9IHN0YXJ0O1xuXHQgICAgICB2YXIgcmVzdWx0ID0gYXJnc1tzdGFydF0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgd2hpbGUgKGktLSkgcmVzdWx0ID0gYXJnc1tpXS5jYWxsKHRoaXMsIHJlc3VsdCk7XG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCBvbiBhbmQgYWZ0ZXIgdGhlIE50aCBjYWxsLlxuXHQgIF8uYWZ0ZXIgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAoLS10aW1lcyA8IDEpIHtcblx0ICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCB1cCB0byAoYnV0IG5vdCBpbmNsdWRpbmcpIHRoZSBOdGggY2FsbC5cblx0ICBfLmJlZm9yZSA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG5cdCAgICB2YXIgbWVtbztcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKC0tdGltZXMgPiAwKSB7XG5cdCAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGltZXMgPD0gMSkgZnVuYyA9IG51bGw7XG5cdCAgICAgIHJldHVybiBtZW1vO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGF0IG1vc3Qgb25lIHRpbWUsIG5vIG1hdHRlciBob3dcblx0ICAvLyBvZnRlbiB5b3UgY2FsbCBpdC4gVXNlZnVsIGZvciBsYXp5IGluaXRpYWxpemF0aW9uLlxuXHQgIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cdFxuXHQgIC8vIE9iamVjdCBGdW5jdGlvbnNcblx0ICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIEtleXMgaW4gSUUgPCA5IHRoYXQgd29uJ3QgYmUgaXRlcmF0ZWQgYnkgYGZvciBrZXkgaW4gLi4uYCBhbmQgdGh1cyBtaXNzZWQuXG5cdCAgdmFyIGhhc0VudW1CdWcgPSAhe3RvU3RyaW5nOiBudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKTtcblx0ICB2YXIgbm9uRW51bWVyYWJsZVByb3BzID0gWyd2YWx1ZU9mJywgJ2lzUHJvdG90eXBlT2YnLCAndG9TdHJpbmcnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJ2hhc093blByb3BlcnR5JywgJ3RvTG9jYWxlU3RyaW5nJ107XG5cdFxuXHQgIGZ1bmN0aW9uIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKSB7XG5cdCAgICB2YXIgbm9uRW51bUlkeCA9IG5vbkVudW1lcmFibGVQcm9wcy5sZW5ndGg7XG5cdCAgICB2YXIgY29uc3RydWN0b3IgPSBvYmouY29uc3RydWN0b3I7XG5cdCAgICB2YXIgcHJvdG8gPSAoXy5pc0Z1bmN0aW9uKGNvbnN0cnVjdG9yKSAmJiBjb25zdHJ1Y3Rvci5wcm90b3R5cGUpIHx8IE9ialByb3RvO1xuXHRcblx0ICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuXHQgICAgdmFyIHByb3AgPSAnY29uc3RydWN0b3InO1xuXHQgICAgaWYgKF8uaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTtcblx0XG5cdCAgICB3aGlsZSAobm9uRW51bUlkeC0tKSB7XG5cdCAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07XG5cdCAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7XG5cdCAgICAgICAga2V5cy5wdXNoKHByb3ApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG5cdCAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYFxuXHQgIF8ua2V5cyA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcblx0ICAgIGlmIChuYXRpdmVLZXlzKSByZXR1cm4gbmF0aXZlS2V5cyhvYmopO1xuXHQgICAgdmFyIGtleXMgPSBbXTtcblx0ICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuXHQgICAgLy8gQWhlbSwgSUUgPCA5LlxuXHQgICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcblx0ICAgIHJldHVybiBrZXlzO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuXHQgIF8uYWxsS2V5cyA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcblx0ICAgIHZhciBrZXlzID0gW107XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcblx0ICAgIC8vIEFoZW0sIElFIDwgOS5cblx0ICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG5cdCAgICByZXR1cm4ga2V5cztcblx0ICB9O1xuXHRcblx0ICAvLyBSZXRyaWV2ZSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCdzIHByb3BlcnRpZXMuXG5cdCAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG5cdCAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG5cdCAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFsdWVzW2ldID0gb2JqW2tleXNbaV1dO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZhbHVlcztcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdFxuXHQgIC8vIEluIGNvbnRyYXN0IHRvIF8ubWFwIGl0IHJldHVybnMgYW4gb2JqZWN0XG5cdCAgXy5tYXBPYmplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcblx0ICAgIHZhciBrZXlzID0gIF8ua2V5cyhvYmopLFxuXHQgICAgICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGgsXG5cdCAgICAgICAgICByZXN1bHRzID0ge30sXG5cdCAgICAgICAgICBjdXJyZW50S2V5O1xuXHQgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgICAgY3VycmVudEtleSA9IGtleXNbaW5kZXhdO1xuXHQgICAgICAgIHJlc3VsdHNbY3VycmVudEtleV0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ29udmVydCBhbiBvYmplY3QgaW50byBhIGxpc3Qgb2YgYFtrZXksIHZhbHVlXWAgcGFpcnMuXG5cdCAgXy5wYWlycyA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcblx0ICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcblx0ICAgIHZhciBwYWlycyA9IEFycmF5KGxlbmd0aCk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcGFpcnM7XG5cdCAgfTtcblx0XG5cdCAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuXHQgIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0ge307XG5cdCAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgcmVzdWx0W29ialtrZXlzW2ldXV0gPSBrZXlzW2ldO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG5cdCAgLy8gQWxpYXNlZCBhcyBgbWV0aG9kc2Bcblx0ICBfLmZ1bmN0aW9ucyA9IF8ubWV0aG9kcyA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgdmFyIG5hbWVzID0gW107XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICAgIGlmIChfLmlzRnVuY3Rpb24ob2JqW2tleV0pKSBuYW1lcy5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmFtZXMuc29ydCgpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLlxuXHQgIF8uZXh0ZW5kID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTtcblx0XG5cdCAgLy8gQXNzaWducyBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgb3duIHByb3BlcnRpZXMgaW4gdGhlIHBhc3NlZC1pbiBvYmplY3Qocylcblx0ICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbilcblx0ICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblx0XG5cdCAgLy8gUmV0dXJucyB0aGUgZmlyc3Qga2V5IG9uIGFuIG9iamVjdCB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG5cdCAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG5cdCAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLCBrZXk7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICBpZiAocHJlZGljYXRlKG9ialtrZXldLCBrZXksIG9iaikpIHJldHVybiBrZXk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cblx0ICBfLnBpY2sgPSBmdW5jdGlvbihvYmplY3QsIG9pdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgdmFyIHJlc3VsdCA9IHt9LCBvYmogPSBvYmplY3QsIGl0ZXJhdGVlLCBrZXlzO1xuXHQgICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuXHQgICAgaWYgKF8uaXNGdW5jdGlvbihvaXRlcmF0ZWUpKSB7XG5cdCAgICAgIGtleXMgPSBfLmFsbEtleXMob2JqKTtcblx0ICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKG9pdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrZXlzID0gZmxhdHRlbihhcmd1bWVudHMsIGZhbHNlLCBmYWxzZSwgMSk7XG5cdCAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7IHJldHVybiBrZXkgaW4gb2JqOyB9O1xuXHQgICAgICBvYmogPSBPYmplY3Qob2JqKTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcblx0ICAgICAgaWYgKGl0ZXJhdGVlKHZhbHVlLCBrZXksIG9iaikpIHJlc3VsdFtrZXldID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2l0aG91dCB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cblx0ICBfLm9taXQgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuXHQgICAgICBpdGVyYXRlZSA9IF8ubmVnYXRlKGl0ZXJhdGVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBrZXlzID0gXy5tYXAoZmxhdHRlbihhcmd1bWVudHMsIGZhbHNlLCBmYWxzZSwgMSksIFN0cmluZyk7XG5cdCAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuXHQgICAgICAgIHJldHVybiAhXy5jb250YWlucyhrZXlzLCBrZXkpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF8ucGljayhvYmosIGl0ZXJhdGVlLCBjb250ZXh0KTtcblx0ICB9O1xuXHRcblx0ICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLlxuXHQgIF8uZGVmYXVsdHMgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsIHRydWUpO1xuXHRcblx0ICAvLyBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIHByb3RvdHlwZSBvYmplY3QuXG5cdCAgLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGVcblx0ICAvLyBjcmVhdGVkIG9iamVjdC5cblx0ICBfLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSwgcHJvcHMpIHtcblx0ICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG5cdCAgICBpZiAocHJvcHMpIF8uZXh0ZW5kT3duKHJlc3VsdCwgcHJvcHMpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICAvLyBDcmVhdGUgYSAoc2hhbGxvdy1jbG9uZWQpIGR1cGxpY2F0ZSBvZiBhbiBvYmplY3QuXG5cdCAgXy5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG5cdCAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmouc2xpY2UoKSA6IF8uZXh0ZW5kKHt9LCBvYmopO1xuXHQgIH07XG5cdFxuXHQgIC8vIEludm9rZXMgaW50ZXJjZXB0b3Igd2l0aCB0aGUgb2JqLCBhbmQgdGhlbiByZXR1cm5zIG9iai5cblx0ICAvLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiwgaW5cblx0ICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi5cblx0ICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHtcblx0ICAgIGludGVyY2VwdG9yKG9iaik7XG5cdCAgICByZXR1cm4gb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mIGBrZXk6dmFsdWVgIHBhaXJzLlxuXHQgIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHtcblx0ICAgIHZhciBrZXlzID0gXy5rZXlzKGF0dHJzKSwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG5cdCAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAhbGVuZ3RoO1xuXHQgICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH07XG5cdFxuXHRcblx0ICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLlxuXHQgIHZhciBlcSA9IGZ1bmN0aW9uKGEsIGIsIGFTdGFjaywgYlN0YWNrKSB7XG5cdCAgICAvLyBJZGVudGljYWwgb2JqZWN0cyBhcmUgZXF1YWwuIGAwID09PSAtMGAsIGJ1dCB0aGV5IGFyZW4ndCBpZGVudGljYWwuXG5cdCAgICAvLyBTZWUgdGhlIFtIYXJtb255IGBlZ2FsYCBwcm9wb3NhbF0oaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsKS5cblx0ICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PT0gMSAvIGI7XG5cdCAgICAvLyBBIHN0cmljdCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGBudWxsID09IHVuZGVmaW5lZGAuXG5cdCAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGEgPT09IGI7XG5cdCAgICAvLyBVbndyYXAgYW55IHdyYXBwZWQgb2JqZWN0cy5cblx0ICAgIGlmIChhIGluc3RhbmNlb2YgXykgYSA9IGEuX3dyYXBwZWQ7XG5cdCAgICBpZiAoYiBpbnN0YW5jZW9mIF8pIGIgPSBiLl93cmFwcGVkO1xuXHQgICAgLy8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy5cblx0ICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpO1xuXHQgICAgaWYgKGNsYXNzTmFtZSAhPT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlO1xuXHQgICAgc3dpdGNoIChjbGFzc05hbWUpIHtcblx0ICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgcmVndWxhciBleHByZXNzaW9ucywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuXG5cdCAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG5cdCAgICAgIC8vIFJlZ0V4cHMgYXJlIGNvZXJjZWQgdG8gc3RyaW5ncyBmb3IgY29tcGFyaXNvbiAoTm90ZTogJycgKyAvYS9pID09PSAnL2EvaScpXG5cdCAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG5cdCAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGBcIjVcImAgaXNcblx0ICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKFwiNVwiKWAuXG5cdCAgICAgICAgcmV0dXJuICcnICsgYSA9PT0gJycgKyBiO1xuXHQgICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuXHQgICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuXG5cdCAgICAgICAgLy8gT2JqZWN0KE5hTikgaXMgZXF1aXZhbGVudCB0byBOYU5cblx0ICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuXHQgICAgICAgIC8vIEFuIGBlZ2FsYCBjb21wYXJpc29uIGlzIHBlcmZvcm1lZCBmb3Igb3RoZXIgbnVtZXJpYyB2YWx1ZXMuXG5cdCAgICAgICAgcmV0dXJuICthID09PSAwID8gMSAvICthID09PSAxIC8gYiA6ICthID09PSArYjtcblx0ICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG5cdCAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuXHQgICAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtZXJpYyBwcmltaXRpdmUgdmFsdWVzLiBEYXRlcyBhcmUgY29tcGFyZWQgYnkgdGhlaXJcblx0ICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG5cdCAgICAgICAgLy8gb2YgYE5hTmAgYXJlIG5vdCBlcXVpdmFsZW50LlxuXHQgICAgICAgIHJldHVybiArYSA9PT0gK2I7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGFyZUFycmF5cyA9IGNsYXNzTmFtZSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0ICAgIGlmICghYXJlQXJyYXlzKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgYSAhPSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuXHRcblx0ICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG5cdCAgICAgIC8vIGZyb20gZGlmZmVyZW50IGZyYW1lcyBhcmUuXG5cdCAgICAgIHZhciBhQ3RvciA9IGEuY29uc3RydWN0b3IsIGJDdG9yID0gYi5jb25zdHJ1Y3Rvcjtcblx0ICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5pc0Z1bmN0aW9uKGJDdG9yKSAmJiBiQ3RvciBpbnN0YW5jZW9mIGJDdG9yKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgnY29uc3RydWN0b3InIGluIGEgJiYgJ2NvbnN0cnVjdG9yJyBpbiBiKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuXHQgICAgLy8gc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AuXG5cdFxuXHQgICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuXHQgICAgLy8gSXQncyBkb25lIGhlcmUgc2luY2Ugd2Ugb25seSBuZWVkIHRoZW0gZm9yIG9iamVjdHMgYW5kIGFycmF5cyBjb21wYXJpc29uLlxuXHQgICAgYVN0YWNrID0gYVN0YWNrIHx8IFtdO1xuXHQgICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuXHQgICAgdmFyIGxlbmd0aCA9IGFTdGFjay5sZW5ndGg7XG5cdCAgICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG5cdCAgICAgIC8vIHVuaXF1ZSBuZXN0ZWQgc3RydWN0dXJlcy5cblx0ICAgICAgaWYgKGFTdGFja1tsZW5ndGhdID09PSBhKSByZXR1cm4gYlN0YWNrW2xlbmd0aF0gPT09IGI7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBmaXJzdCBvYmplY3QgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuXHQgICAgYVN0YWNrLnB1c2goYSk7XG5cdCAgICBiU3RhY2sucHVzaChiKTtcblx0XG5cdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cblx0ICAgIGlmIChhcmVBcnJheXMpIHtcblx0ICAgICAgLy8gQ29tcGFyZSBhcnJheSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkuXG5cdCAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuXHQgICAgICBpZiAobGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAvLyBEZWVwIGNvbXBhcmUgdGhlIGNvbnRlbnRzLCBpZ25vcmluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzLlxuXHQgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgICAgICBpZiAoIWVxKGFbbGVuZ3RoXSwgYltsZW5ndGhdLCBhU3RhY2ssIGJTdGFjaykpIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gRGVlcCBjb21wYXJlIG9iamVjdHMuXG5cdCAgICAgIHZhciBrZXlzID0gXy5rZXlzKGEpLCBrZXk7XG5cdCAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuXHQgICAgICAvLyBFbnN1cmUgdGhhdCBib3RoIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllcyBiZWZvcmUgY29tcGFyaW5nIGRlZXAgZXF1YWxpdHkuXG5cdCAgICAgIGlmIChfLmtleXMoYikubGVuZ3RoICE9PSBsZW5ndGgpIHJldHVybiBmYWxzZTtcblx0ICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICAgICAgLy8gRGVlcCBjb21wYXJlIGVhY2ggbWVtYmVyXG5cdCAgICAgICAga2V5ID0ga2V5c1tsZW5ndGhdO1xuXHQgICAgICAgIGlmICghKF8uaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG5cdCAgICBhU3RhY2sucG9wKCk7XG5cdCAgICBiU3RhY2sucG9wKCk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cblx0ICBfLmlzRXF1YWwgPSBmdW5jdGlvbihhLCBiKSB7XG5cdCAgICByZXR1cm4gZXEoYSwgYik7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG5cdCAgLy8gQW4gXCJlbXB0eVwiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy5cblx0ICBfLmlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cdCAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuXHQgICAgcmV0dXJuIF8ua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcblx0ICB9O1xuXHRcblx0ICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgRE9NIGVsZW1lbnQ/XG5cdCAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcblx0ICB9O1xuXHRcblx0ICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuXHQgIC8vIERlbGVnYXRlcyB0byBFQ01BNSdzIG5hdGl2ZSBBcnJheS5pc0FycmF5XG5cdCAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG5cdCAgXy5pc09iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuXHQgICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG5cdCAgfTtcblx0XG5cdCAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IuXG5cdCAgXy5lYWNoKFsnQXJndW1lbnRzJywgJ0Z1bmN0aW9uJywgJ1N0cmluZycsICdOdW1iZXInLCAnRGF0ZScsICdSZWdFeHAnLCAnRXJyb3InXSwgZnVuY3Rpb24obmFtZSkge1xuXHQgICAgX1snaXMnICsgbmFtZV0gPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7XG5cdCAgICB9O1xuXHQgIH0pO1xuXHRcblx0ICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFIDwgOSksIHdoZXJlXG5cdCAgLy8gdGhlcmUgaXNuJ3QgYW55IGluc3BlY3RhYmxlIFwiQXJndW1lbnRzXCIgdHlwZS5cblx0ICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkge1xuXHQgICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICByZXR1cm4gXy5oYXMob2JqLCAnY2FsbGVlJyk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcblx0ICAvLyBJRSAxMSAoIzE2MjEpLCBhbmQgaW4gU2FmYXJpIDggKCMxOTI5KS5cblx0ICBpZiAodHlwZW9mIC8uLyAhPSAnZnVuY3Rpb24nICYmIHR5cGVvZiBJbnQ4QXJyYXkgIT0gJ29iamVjdCcpIHtcblx0ICAgIF8uaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8vIElzIGEgZ2l2ZW4gb2JqZWN0IGEgZmluaXRlIG51bWJlcj9cblx0ICBfLmlzRmluaXRlID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICByZXR1cm4gaXNGaW5pdGUob2JqKSAmJiAhaXNOYU4ocGFyc2VGbG9hdChvYmopKTtcblx0ICB9O1xuXHRcblx0ICAvLyBJcyB0aGUgZ2l2ZW4gdmFsdWUgYE5hTmA/IChOYU4gaXMgdGhlIG9ubHkgbnVtYmVyIHdoaWNoIGRvZXMgbm90IGVxdWFsIGl0c2VsZikuXG5cdCAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBvYmogIT09ICtvYmo7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/XG5cdCAgXy5pc0Jvb2xlYW4gPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJvb2xlYW5dJztcblx0ICB9O1xuXHRcblx0ICAvLyBJcyBhIGdpdmVuIHZhbHVlIGVxdWFsIHRvIG51bGw/XG5cdCAgXy5pc051bGwgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiBvYmogPT09IG51bGw7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/XG5cdCAgXy5pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgcmV0dXJuIG9iaiA9PT0gdm9pZCAwO1xuXHQgIH07XG5cdFxuXHQgIC8vIFNob3J0Y3V0IGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gcHJvcGVydHkgZGlyZWN0bHlcblx0ICAvLyBvbiBpdHNlbGYgKGluIG90aGVyIHdvcmRzLCBub3Qgb24gYSBwcm90b3R5cGUpLlxuXHQgIF8uaGFzID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcblx0ICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcblx0ICB9O1xuXHRcblx0ICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcblx0ICAvLyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG5cdCAgXy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvLyBLZWVwIHRoZSBpZGVudGl0eSBmdW5jdGlvbiBhcm91bmQgZm9yIGRlZmF1bHQgaXRlcmF0ZWVzLlxuXHQgIF8uaWRlbnRpdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH07XG5cdFxuXHQgIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cblx0ICBfLmNvbnN0YW50ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICBfLm5vb3AgPSBmdW5jdGlvbigpe307XG5cdFxuXHQgIF8ucHJvcGVydHkgPSBwcm9wZXJ0eTtcblx0XG5cdCAgLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LlxuXHQgIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgcmV0dXJuIG9iaiA9PSBudWxsID8gZnVuY3Rpb24oKXt9IDogZnVuY3Rpb24oa2V5KSB7XG5cdCAgICAgIHJldHVybiBvYmpba2V5XTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mXG5cdCAgLy8gYGtleTp2YWx1ZWAgcGFpcnMuXG5cdCAgXy5tYXRjaGVyID0gXy5tYXRjaGVzID0gZnVuY3Rpb24oYXR0cnMpIHtcblx0ICAgIGF0dHJzID0gXy5leHRlbmRPd24oe30sIGF0dHJzKTtcblx0ICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIF8uaXNNYXRjaChvYmosIGF0dHJzKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG5cdCAgXy50aW1lcyA9IGZ1bmN0aW9uKG4sIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7XG5cdCAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIGFjY3VtW2ldID0gaXRlcmF0ZWUoaSk7XG5cdCAgICByZXR1cm4gYWNjdW07XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJuIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cblx0ICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG5cdCAgICBpZiAobWF4ID09IG51bGwpIHtcblx0ICAgICAgbWF4ID0gbWluO1xuXHQgICAgICBtaW4gPSAwO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLlxuXHQgIF8ubm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgfTtcblx0XG5cdCAgIC8vIExpc3Qgb2YgSFRNTCBlbnRpdGllcyBmb3IgZXNjYXBpbmcuXG5cdCAgdmFyIGVzY2FwZU1hcCA9IHtcblx0ICAgICcmJzogJyZhbXA7Jyxcblx0ICAgICc8JzogJyZsdDsnLFxuXHQgICAgJz4nOiAnJmd0OycsXG5cdCAgICAnXCInOiAnJnF1b3Q7Jyxcblx0ICAgIFwiJ1wiOiAnJiN4Mjc7Jyxcblx0ICAgICdgJzogJyYjeDYwOydcblx0ICB9O1xuXHQgIHZhciB1bmVzY2FwZU1hcCA9IF8uaW52ZXJ0KGVzY2FwZU1hcCk7XG5cdFxuXHQgIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cblx0ICB2YXIgY3JlYXRlRXNjYXBlciA9IGZ1bmN0aW9uKG1hcCkge1xuXHQgICAgdmFyIGVzY2FwZXIgPSBmdW5jdGlvbihtYXRjaCkge1xuXHQgICAgICByZXR1cm4gbWFwW21hdGNoXTtcblx0ICAgIH07XG5cdCAgICAvLyBSZWdleGVzIGZvciBpZGVudGlmeWluZyBhIGtleSB0aGF0IG5lZWRzIHRvIGJlIGVzY2FwZWRcblx0ICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJztcblx0ICAgIHZhciB0ZXN0UmVnZXhwID0gUmVnRXhwKHNvdXJjZSk7XG5cdCAgICB2YXIgcmVwbGFjZVJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UsICdnJyk7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG5cdCAgICAgIHN0cmluZyA9IHN0cmluZyA9PSBudWxsID8gJycgOiAnJyArIHN0cmluZztcblx0ICAgICAgcmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpID8gc3RyaW5nLnJlcGxhY2UocmVwbGFjZVJlZ2V4cCwgZXNjYXBlcikgOiBzdHJpbmc7XG5cdCAgICB9O1xuXHQgIH07XG5cdCAgXy5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7XG5cdCAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApO1xuXHRcblx0ICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIG5hbWVkIGBwcm9wZXJ0eWAgaXMgYSBmdW5jdGlvbiB0aGVuIGludm9rZSBpdCB3aXRoIHRoZVxuXHQgIC8vIGBvYmplY3RgIGFzIGNvbnRleHQ7IG90aGVyd2lzZSwgcmV0dXJuIGl0LlxuXHQgIF8ucmVzdWx0ID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgZmFsbGJhY2spIHtcblx0ICAgIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdm9pZCAwIDogb2JqZWN0W3Byb3BlcnR5XTtcblx0ICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG5cdCAgICAgIHZhbHVlID0gZmFsbGJhY2s7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuXHQgIH07XG5cdFxuXHQgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGludGVnZXIgaWQgKHVuaXF1ZSB3aXRoaW4gdGhlIGVudGlyZSBjbGllbnQgc2Vzc2lvbikuXG5cdCAgLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cblx0ICB2YXIgaWRDb3VudGVyID0gMDtcblx0ICBfLnVuaXF1ZUlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG5cdCAgICB2YXIgaWQgPSArK2lkQ291bnRlciArICcnO1xuXHQgICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gQnkgZGVmYXVsdCwgVW5kZXJzY29yZSB1c2VzIEVSQi1zdHlsZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLCBjaGFuZ2UgdGhlXG5cdCAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuXHQgIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcblx0ICAgIGV2YWx1YXRlICAgIDogLzwlKFtcXHNcXFNdKz8pJT4vZyxcblx0ICAgIGludGVycG9sYXRlIDogLzwlPShbXFxzXFxTXSs/KSU+L2csXG5cdCAgICBlc2NhcGUgICAgICA6IC88JS0oW1xcc1xcU10rPyklPi9nXG5cdCAgfTtcblx0XG5cdCAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhblxuXHQgIC8vIGludGVycG9sYXRpb24sIGV2YWx1YXRpb24gb3IgZXNjYXBpbmcgcmVnZXgsIHdlIG5lZWQgb25lIHRoYXQgaXNcblx0ICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cblx0ICB2YXIgbm9NYXRjaCA9IC8oLileLztcblx0XG5cdCAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcblx0ICAvLyBzdHJpbmcgbGl0ZXJhbC5cblx0ICB2YXIgZXNjYXBlcyA9IHtcblx0ICAgIFwiJ1wiOiAgICAgIFwiJ1wiLFxuXHQgICAgJ1xcXFwnOiAgICAgJ1xcXFwnLFxuXHQgICAgJ1xccic6ICAgICAncicsXG5cdCAgICAnXFxuJzogICAgICduJyxcblx0ICAgICdcXHUyMDI4JzogJ3UyMDI4Jyxcblx0ICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuXHQgIH07XG5cdFxuXHQgIHZhciBlc2NhcGVyID0gL1xcXFx8J3xcXHJ8XFxufFxcdTIwMjh8XFx1MjAyOS9nO1xuXHRcblx0ICB2YXIgZXNjYXBlQ2hhciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG5cdCAgICByZXR1cm4gJ1xcXFwnICsgZXNjYXBlc1ttYXRjaF07XG5cdCAgfTtcblx0XG5cdCAgLy8gSmF2YVNjcmlwdCBtaWNyby10ZW1wbGF0aW5nLCBzaW1pbGFyIHRvIEpvaG4gUmVzaWcncyBpbXBsZW1lbnRhdGlvbi5cblx0ICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG5cdCAgLy8gYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuXG5cdCAgLy8gTkI6IGBvbGRTZXR0aW5nc2Agb25seSBleGlzdHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuXHQgIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcblx0ICAgIGlmICghc2V0dGluZ3MgJiYgb2xkU2V0dGluZ3MpIHNldHRpbmdzID0gb2xkU2V0dGluZ3M7XG5cdCAgICBzZXR0aW5ncyA9IF8uZGVmYXVsdHMoe30sIHNldHRpbmdzLCBfLnRlbXBsYXRlU2V0dGluZ3MpO1xuXHRcblx0ICAgIC8vIENvbWJpbmUgZGVsaW1pdGVycyBpbnRvIG9uZSByZWd1bGFyIGV4cHJlc3Npb24gdmlhIGFsdGVybmF0aW9uLlxuXHQgICAgdmFyIG1hdGNoZXIgPSBSZWdFeHAoW1xuXHQgICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcblx0ICAgICAgKHNldHRpbmdzLmludGVycG9sYXRlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcblx0ICAgICAgKHNldHRpbmdzLmV2YWx1YXRlIHx8IG5vTWF0Y2gpLnNvdXJjZVxuXHQgICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXHRcblx0ICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgZXNjYXBpbmcgc3RyaW5nIGxpdGVyYWxzIGFwcHJvcHJpYXRlbHkuXG5cdCAgICB2YXIgaW5kZXggPSAwO1xuXHQgICAgdmFyIHNvdXJjZSA9IFwiX19wKz0nXCI7XG5cdCAgICB0ZXh0LnJlcGxhY2UobWF0Y2hlciwgZnVuY3Rpb24obWF0Y2gsIGVzY2FwZSwgaW50ZXJwb2xhdGUsIGV2YWx1YXRlLCBvZmZzZXQpIHtcblx0ICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVyLCBlc2NhcGVDaGFyKTtcblx0ICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cdFxuXHQgICAgICBpZiAoZXNjYXBlKSB7XG5cdCAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBlc2NhcGUgKyBcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIjtcblx0ICAgICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZSkge1xuXHQgICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgaW50ZXJwb2xhdGUgKyBcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiO1xuXHQgICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlKSB7XG5cdCAgICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlICsgXCJcXG5fX3ArPSdcIjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gQWRvYmUgVk1zIG5lZWQgdGhlIG1hdGNoIHJldHVybmVkIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3Qgb2ZmZXN0LlxuXHQgICAgICByZXR1cm4gbWF0Y2g7XG5cdCAgICB9KTtcblx0ICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cdFxuXHQgICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS5cblx0ICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xcbicgKyBzb3VyY2UgKyAnfVxcbic7XG5cdFxuXHQgICAgc291cmNlID0gXCJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sXCIgK1xuXHQgICAgICBcInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XFxuXCIgK1xuXHQgICAgICBzb3VyY2UgKyAncmV0dXJuIF9fcDtcXG4nO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgZS5zb3VyY2UgPSBzb3VyY2U7XG5cdCAgICAgIHRocm93IGU7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICByZXR1cm4gcmVuZGVyLmNhbGwodGhpcywgZGF0YSwgXyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIHNvdXJjZSBhcyBhIGNvbnZlbmllbmNlIGZvciBwcmVjb21waWxhdGlvbi5cblx0ICAgIHZhciBhcmd1bWVudCA9IHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonO1xuXHQgICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cdFxuXHQgICAgcmV0dXJuIHRlbXBsYXRlO1xuXHQgIH07XG5cdFxuXHQgIC8vIEFkZCBhIFwiY2hhaW5cIiBmdW5jdGlvbi4gU3RhcnQgY2hhaW5pbmcgYSB3cmFwcGVkIFVuZGVyc2NvcmUgb2JqZWN0LlxuXHQgIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IF8ob2JqKTtcblx0ICAgIGluc3RhbmNlLl9jaGFpbiA9IHRydWU7XG5cdCAgICByZXR1cm4gaW5zdGFuY2U7XG5cdCAgfTtcblx0XG5cdCAgLy8gT09QXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cdCAgLy8gSWYgVW5kZXJzY29yZSBpcyBjYWxsZWQgYXMgYSBmdW5jdGlvbiwgaXQgcmV0dXJucyBhIHdyYXBwZWQgb2JqZWN0IHRoYXRcblx0ICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuXHQgIC8vIHVuZGVyc2NvcmUgZnVuY3Rpb25zLiBXcmFwcGVkIG9iamVjdHMgbWF5IGJlIGNoYWluZWQuXG5cdFxuXHQgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cblx0ICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24oaW5zdGFuY2UsIG9iaikge1xuXHQgICAgcmV0dXJuIGluc3RhbmNlLl9jaGFpbiA/IF8ob2JqKS5jaGFpbigpIDogb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIEFkZCB5b3VyIG93biBjdXN0b20gZnVuY3Rpb25zIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cblx0ICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICB2YXIgZnVuYyA9IF9bbmFtZV0gPSBvYmpbbmFtZV07XG5cdCAgICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07XG5cdCAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIHJldHVybiByZXN1bHQodGhpcywgZnVuYy5hcHBseShfLCBhcmdzKSk7XG5cdCAgICAgIH07XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuXG5cdCAgXy5taXhpbihfKTtcblx0XG5cdCAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cblx0ICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuXHQgICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG5cdCAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDtcblx0ICAgICAgbWV0aG9kLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcblx0ICAgICAgaWYgKChuYW1lID09PSAnc2hpZnQnIHx8IG5hbWUgPT09ICdzcGxpY2UnKSAmJiBvYmoubGVuZ3RoID09PSAwKSBkZWxldGUgb2JqWzBdO1xuXHQgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG9iaik7XG5cdCAgICB9O1xuXHQgIH0pO1xuXHRcblx0ICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cblx0ICBfLmVhY2goWydjb25jYXQnLCAnam9pbicsICdzbGljZSddLCBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcblx0ICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiByZXN1bHQodGhpcywgbWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsIGFyZ3VtZW50cykpO1xuXHQgICAgfTtcblx0ICB9KTtcblx0XG5cdCAgLy8gRXh0cmFjdHMgdGhlIHJlc3VsdCBmcm9tIGEgd3JhcHBlZCBhbmQgY2hhaW5lZCBvYmplY3QuXG5cdCAgXy5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB0aGlzLl93cmFwcGVkO1xuXHQgIH07XG5cdFxuXHQgIC8vIFByb3ZpZGUgdW53cmFwcGluZyBwcm94eSBmb3Igc29tZSBtZXRob2RzIHVzZWQgaW4gZW5naW5lIG9wZXJhdGlvbnNcblx0ICAvLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLlxuXHQgIF8ucHJvdG90eXBlLnZhbHVlT2YgPSBfLnByb3RvdHlwZS50b0pTT04gPSBfLnByb3RvdHlwZS52YWx1ZTtcblx0XG5cdCAgXy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiAnJyArIHRoaXMuX3dyYXBwZWQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gQU1EIHJlZ2lzdHJhdGlvbiBoYXBwZW5zIGF0IHRoZSBlbmQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBBTUQgbG9hZGVyc1xuXHQgIC8vIHRoYXQgbWF5IG5vdCBlbmZvcmNlIG5leHQtdHVybiBzZW1hbnRpY3Mgb24gbW9kdWxlcy4gRXZlbiB0aG91Z2ggZ2VuZXJhbFxuXHQgIC8vIHByYWN0aWNlIGZvciBBTUQgcmVnaXN0cmF0aW9uIGlzIHRvIGJlIGFub255bW91cywgdW5kZXJzY29yZSByZWdpc3RlcnNcblx0ICAvLyBhcyBhIG5hbWVkIG1vZHVsZSBiZWNhdXNlLCBsaWtlIGpRdWVyeSwgaXQgaXMgYSBiYXNlIGxpYnJhcnkgdGhhdCBpc1xuXHQgIC8vIHBvcHVsYXIgZW5vdWdoIHRvIGJlIGJ1bmRsZWQgaW4gYSB0aGlyZCBwYXJ0eSBsaWIsIGJ1dCBub3QgYmUgcGFydCBvZlxuXHQgIC8vIGFuIEFNRCBsb2FkIHJlcXVlc3QuIFRob3NlIGNhc2VzIGNvdWxkIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYW5cblx0ICAvLyBhbm9ueW1vdXMgZGVmaW5lKCkgaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBsb2FkZXIgcmVxdWVzdC5cblx0ICBpZiAodHJ1ZSkge1xuXHQgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBfO1xuXHQgICAgfS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgIH1cblx0fS5jYWxsKHRoaXMpKTtcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOy8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuXHQvKiFcblx0ICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2My4xLjBcblx0ICogaHR0cHM6Ly9qcXVlcnkuY29tL1xuXHQgKlxuXHQgKiBJbmNsdWRlcyBTaXp6bGUuanNcblx0ICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vXG5cdCAqXG5cdCAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG5cdCAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuXHQgKiBodHRwczovL2pxdWVyeS5vcmcvbGljZW5zZVxuXHQgKlxuXHQgKiBEYXRlOiAyMDE2LTA3LTA3VDIxOjQ0WlxuXHQgKi9cblx0KCBmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXHRcblx0XHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdFx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcblx0XG5cdFx0XHQvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcGVyIGB3aW5kb3dgXG5cdFx0XHQvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LlxuXHRcdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHRcdC8vIChzdWNoIGFzIE5vZGUuanMpLCBleHBvc2UgYSBmYWN0b3J5IGFzIG1vZHVsZS5leHBvcnRzLlxuXHRcdFx0Ly8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC5cblx0XHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHRcdC8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm8uXG5cdFx0XHRtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/XG5cdFx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdFx0ZnVuY3Rpb24oIHcgKSB7XG5cdFx0XHRcdFx0aWYgKCAhdy5kb2N1bWVudCApIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGZhY3RvcnkoIHcgKTtcblx0XHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZmFjdG9yeSggZ2xvYmFsICk7XG5cdFx0fVxuXHRcblx0Ly8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXRcblx0fSApKCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cdFxuXHQvLyBFZGdlIDw9IDEyIC0gMTMrLCBGaXJlZm94IDw9MTggLSA0NSssIElFIDEwIC0gMTEsIFNhZmFyaSA1LjEgLSA5KywgaU9TIDYgLSA5LjFcblx0Ly8gdGhyb3cgZXhjZXB0aW9ucyB3aGVuIG5vbi1zdHJpY3QgY29kZSAoZS5nLiwgQVNQLk5FVCA0LjUpIGFjY2Vzc2VzIHN0cmljdCBtb2RlXG5cdC8vIGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyICh0cmFjLTEzMzM1KS4gQnV0IGFzIG9mIGpRdWVyeSAzLjAgKDIwMTYpLCBzdHJpY3QgbW9kZSBzaG91bGQgYmUgY29tbW9uXG5cdC8vIGVub3VnaCB0aGF0IGFsbCBzdWNoIGF0dGVtcHRzIGFyZSBndWFyZGVkIGluIGEgdHJ5IGJsb2NrLlxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBhcnIgPSBbXTtcblx0XG5cdHZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcblx0XG5cdHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblx0XG5cdHZhciBzbGljZSA9IGFyci5zbGljZTtcblx0XG5cdHZhciBjb25jYXQgPSBhcnIuY29uY2F0O1xuXHRcblx0dmFyIHB1c2ggPSBhcnIucHVzaDtcblx0XG5cdHZhciBpbmRleE9mID0gYXJyLmluZGV4T2Y7XG5cdFxuXHR2YXIgY2xhc3MydHlwZSA9IHt9O1xuXHRcblx0dmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblx0XG5cdHZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5O1xuXHRcblx0dmFyIGZuVG9TdHJpbmcgPSBoYXNPd24udG9TdHJpbmc7XG5cdFxuXHR2YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmcgPSBmblRvU3RyaW5nLmNhbGwoIE9iamVjdCApO1xuXHRcblx0dmFyIHN1cHBvcnQgPSB7fTtcblx0XG5cdFxuXHRcblx0XHRmdW5jdGlvbiBET01FdmFsKCBjb2RlLCBkb2MgKSB7XG5cdFx0XHRkb2MgPSBkb2MgfHwgZG9jdW1lbnQ7XG5cdFxuXHRcdFx0dmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCBcInNjcmlwdFwiICk7XG5cdFxuXHRcdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdFx0ZG9jLmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApO1xuXHRcdH1cblx0LyogZ2xvYmFsIFN5bWJvbCAqL1xuXHQvLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuZXNsaW50cmMgd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWxcblx0Ly8gdW5ndWFyZGVkIGluIGFub3RoZXIgcGxhY2UsIGl0IHNlZW1zIHNhZmVyIHRvIGRlZmluZSBnbG9iYWwgb25seSBmb3IgdGhpcyBtb2R1bGVcblx0XG5cdFxuXHRcblx0dmFyXG5cdFx0dmVyc2lvbiA9IFwiMy4xLjBcIixcblx0XG5cdFx0Ly8gRGVmaW5lIGEgbG9jYWwgY29weSBvZiBqUXVlcnlcblx0XHRqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFxuXHRcdFx0Ly8gVGhlIGpRdWVyeSBvYmplY3QgaXMgYWN0dWFsbHkganVzdCB0aGUgaW5pdCBjb25zdHJ1Y3RvciAnZW5oYW5jZWQnXG5cdFx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdFx0cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHlcblx0XHQvLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1Bcblx0XHRydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcblx0XG5cdFx0Ly8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG5cdFx0cm1zUHJlZml4ID0gL14tbXMtLyxcblx0XHRyZGFzaEFscGhhID0gLy0oW2Etel0pL2csXG5cdFxuXHRcdC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcblx0XHRmY2FtZWxDYXNlID0gZnVuY3Rpb24oIGFsbCwgbGV0dGVyICkge1xuXHRcdFx0cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuXHRcdH07XG5cdFxuXHRqUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuXHRcblx0XHQvLyBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIGpRdWVyeSBiZWluZyB1c2VkXG5cdFx0anF1ZXJ5OiB2ZXJzaW9uLFxuXHRcblx0XHRjb25zdHJ1Y3RvcjogalF1ZXJ5LFxuXHRcblx0XHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0XHRsZW5ndGg6IDAsXG5cdFxuXHRcdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBHZXQgdGhlIE50aCBlbGVtZW50IGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0IE9SXG5cdFx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0XHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0XHRyZXR1cm4gbnVtICE9IG51bGwgP1xuXHRcblx0XHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdFx0XHQoIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF0gKSA6XG5cdFxuXHRcdFx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0XHRcdHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdFx0Ly8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpXG5cdFx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFxuXHRcdFx0Ly8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcblx0XHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblx0XG5cdFx0XHQvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKVxuXHRcdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXHRcblx0XHRcdC8vIFJldHVybiB0aGUgbmV3bHktZm9ybWVkIGVsZW1lbnQgc2V0XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0sXG5cdFxuXHRcdC8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuXG5cdFx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5lYWNoKCB0aGlzLCBjYWxsYmFjayApO1xuXHRcdH0sXG5cdFxuXHRcdG1hcDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHRcdH0gKSApO1xuXHRcdH0sXG5cdFxuXHRcdHNsaWNlOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7XG5cdFx0fSxcblx0XG5cdFx0Zmlyc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0XHR9LFxuXHRcblx0XHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmVxKCAtMSApO1xuXHRcdH0sXG5cdFxuXHRcdGVxOiBmdW5jdGlvbiggaSApIHtcblx0XHRcdHZhciBsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbIGogXSBdIDogW10gKTtcblx0XHR9LFxuXHRcblx0XHRlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKCk7XG5cdFx0fSxcblx0XG5cdFx0Ly8gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuXHRcdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRcdHB1c2g6IHB1c2gsXG5cdFx0c29ydDogYXJyLnNvcnQsXG5cdFx0c3BsaWNlOiBhcnIuc3BsaWNlXG5cdH07XG5cdFxuXHRqUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHRcdHRhcmdldCA9IGFyZ3VtZW50c1sgMCBdIHx8IHt9LFxuXHRcdFx0aSA9IDEsXG5cdFx0XHRsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdFx0ZGVlcCA9IGZhbHNlO1xuXHRcblx0XHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXG5cdFx0aWYgKCB0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdGRlZXAgPSB0YXJnZXQ7XG5cdFxuXHRcdFx0Ly8gU2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0XHRpKys7XG5cdFx0fVxuXHRcblx0XHQvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSlcblx0XHRpZiAoIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCB0YXJnZXQgKSApIHtcblx0XHRcdHRhcmdldCA9IHt9O1xuXHRcdH1cblx0XG5cdFx0Ly8gRXh0ZW5kIGpRdWVyeSBpdHNlbGYgaWYgb25seSBvbmUgYXJndW1lbnQgaXMgcGFzc2VkXG5cdFx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdFx0aS0tO1xuXHRcdH1cblx0XG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFxuXHRcdFx0Ly8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0aWYgKCAoIG9wdGlvbnMgPSBhcmd1bWVudHNbIGkgXSApICE9IG51bGwgKSB7XG5cdFxuXHRcdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRcdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblx0XHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXHRcblx0XHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvcHkgKSB8fFxuXHRcdFx0XHRcdFx0KCBjb3B5SXNBcnJheSA9IGpRdWVyeS5pc0FycmF5KCBjb3B5ICkgKSApICkge1xuXHRcblx0XHRcdFx0XHRcdGlmICggY29weUlzQXJyYXkgKSB7XG5cdFx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KCBzcmMgKSA/IHNyYyA6IFtdO1xuXHRcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBzcmMgKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXHRcblx0XHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBjb3B5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0Ly8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3Rcblx0XHRyZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0alF1ZXJ5LmV4dGVuZCgge1xuXHRcblx0XHQvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2Vcblx0XHRleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXHRcblx0XHQvLyBBc3N1bWUgalF1ZXJ5IGlzIHJlYWR5IHdpdGhvdXQgdGhlIHJlYWR5IG1vZHVsZVxuXHRcdGlzUmVhZHk6IHRydWUsXG5cdFxuXHRcdGVycm9yOiBmdW5jdGlvbiggbXNnICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcblx0XHR9LFxuXHRcblx0XHRub29wOiBmdW5jdGlvbigpIHt9LFxuXHRcblx0XHRpc0Z1bmN0aW9uOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gXCJmdW5jdGlvblwiO1xuXHRcdH0sXG5cdFxuXHRcdGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG5cdFxuXHRcdGlzV2luZG93OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0XHR9LFxuXHRcblx0XHRpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFxuXHRcdFx0Ly8gQXMgb2YgalF1ZXJ5IDMuMCwgaXNOdW1lcmljIGlzIGxpbWl0ZWQgdG9cblx0XHRcdC8vIHN0cmluZ3MgYW5kIG51bWJlcnMgKHByaW1pdGl2ZXMgb3Igb2JqZWN0cylcblx0XHRcdC8vIHRoYXQgY2FuIGJlIGNvZXJjZWQgdG8gZmluaXRlIG51bWJlcnMgKGdoLTI2NjIpXG5cdFx0XHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblx0XHRcdHJldHVybiAoIHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJzdHJpbmdcIiApICYmXG5cdFxuXHRcdFx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAoXCJcIilcblx0XHRcdFx0Ly8gLi4uYnV0IG1pc2ludGVycHJldHMgbGVhZGluZy1udW1iZXIgc3RyaW5ncywgcGFydGljdWxhcmx5IGhleCBsaXRlcmFscyAoXCIweC4uLlwiKVxuXHRcdFx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHRcdFx0IWlzTmFOKCBvYmogLSBwYXJzZUZsb2F0KCBvYmogKSApO1xuXHRcdH0sXG5cdFxuXHRcdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0XHR2YXIgcHJvdG8sIEN0b3I7XG5cdFxuXHRcdFx0Ly8gRGV0ZWN0IG9idmlvdXMgbmVnYXRpdmVzXG5cdFx0XHQvLyBVc2UgdG9TdHJpbmcgaW5zdGVhZCBvZiBqUXVlcnkudHlwZSB0byBjYXRjaCBob3N0IG9iamVjdHNcblx0XHRcdGlmICggIW9iaiB8fCB0b1N0cmluZy5jYWxsKCBvYmogKSAhPT0gXCJbb2JqZWN0IE9iamVjdF1cIiApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcblx0XHRcdHByb3RvID0gZ2V0UHJvdG8oIG9iaiApO1xuXHRcblx0XHRcdC8vIE9iamVjdHMgd2l0aCBubyBwcm90b3R5cGUgKGUuZy4sIGBPYmplY3QuY3JlYXRlKCBudWxsIClgKSBhcmUgcGxhaW5cblx0XHRcdGlmICggIXByb3RvICkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBPYmplY3RzIHdpdGggcHJvdG90eXBlIGFyZSBwbGFpbiBpZmYgdGhleSB3ZXJlIGNvbnN0cnVjdGVkIGJ5IGEgZ2xvYmFsIE9iamVjdCBmdW5jdGlvblxuXHRcdFx0Q3RvciA9IGhhc093bi5jYWxsKCBwcm90bywgXCJjb25zdHJ1Y3RvclwiICkgJiYgcHJvdG8uY29uc3RydWN0b3I7XG5cdFx0XHRyZXR1cm4gdHlwZW9mIEN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBmblRvU3RyaW5nLmNhbGwoIEN0b3IgKSA9PT0gT2JqZWN0RnVuY3Rpb25TdHJpbmc7XG5cdFx0fSxcblx0XG5cdFx0aXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblx0XG5cdFx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuXHRcdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lc2xpbnQvZXNsaW50L2lzc3Vlcy82MTI1XG5cdFx0XHR2YXIgbmFtZTtcblx0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XG5cdFx0dHlwZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD0yLjMgb25seSAoZnVuY3Rpb25pc2ggUmVnRXhwKVxuXHRcdFx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRcdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbCggb2JqICkgXSB8fCBcIm9iamVjdFwiIDpcblx0XHRcdFx0dHlwZW9mIG9iajtcblx0XHR9LFxuXHRcblx0XHQvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dFxuXHRcdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkge1xuXHRcdFx0RE9NRXZhbCggY29kZSApO1xuXHRcdH0sXG5cdFxuXHRcdC8vIENvbnZlcnQgZGFzaGVkIHRvIGNhbWVsQ2FzZTsgdXNlZCBieSB0aGUgY3NzIGFuZCBkYXRhIG1vZHVsZXNcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDEzXG5cdFx0Ly8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuXHRcdGNhbWVsQ2FzZTogZnVuY3Rpb24oIHN0cmluZyApIHtcblx0XHRcdHJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCBcIm1zLVwiICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApO1xuXHRcdH0sXG5cdFxuXHRcdG5vZGVOYW1lOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdH0sXG5cdFxuXHRcdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrICkge1xuXHRcdFx0dmFyIGxlbmd0aCwgaSA9IDA7XG5cdFxuXHRcdFx0aWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7XG5cdFx0XHRcdGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fSxcblx0XG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5XG5cdFx0dHJpbTogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRyZXR1cm4gdGV4dCA9PSBudWxsID9cblx0XHRcdFx0XCJcIiA6XG5cdFx0XHRcdCggdGV4dCArIFwiXCIgKS5yZXBsYWNlKCBydHJpbSwgXCJcIiApO1xuXHRcdH0sXG5cdFxuXHRcdC8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0XHRtYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7XG5cdFx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblx0XG5cdFx0XHRpZiAoIGFyciAhPSBudWxsICkge1xuXHRcdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBPYmplY3QoIGFyciApICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCByZXQsXG5cdFx0XHRcdFx0XHR0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRcdFsgYXJyIF0gOiBhcnJcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHB1c2guY2FsbCggcmV0LCBhcnIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XG5cdFx0aW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcblx0XHRcdHJldHVybiBhcnIgPT0gbnVsbCA/IC0xIDogaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0XHRqID0gMCxcblx0XHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblx0XG5cdFx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0Zmlyc3QubGVuZ3RoID0gaTtcblx0XG5cdFx0XHRyZXR1cm4gZmlyc3Q7XG5cdFx0fSxcblx0XG5cdFx0Z3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuXHRcdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cdFxuXHRcdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRcdG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIG1hdGNoZXM7XG5cdFx0fSxcblx0XG5cdFx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdFx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0XHR2YXIgbGVuZ3RoLCB2YWx1ZSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdHJldCA9IFtdO1xuXHRcblx0XHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBlbGVtcyApICkge1xuXHRcdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGg7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXHRcblx0XHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHQvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblx0XG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdFx0cmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuXHRcdH0sXG5cdFxuXHRcdC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuXHRcdGd1aWQ6IDEsXG5cdFxuXHRcdC8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuXHRcdC8vIGFyZ3VtZW50cy5cblx0XHRwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cdFxuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0dG1wID0gZm5bIGNvbnRleHQgXTtcblx0XHRcdFx0Y29udGV4dCA9IGZuO1xuXHRcdFx0XHRmbiA9IHRtcDtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHRcdFx0Ly8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cblx0XHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCBmbiApICkge1xuXHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNpbXVsYXRlZCBiaW5kXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG5cdFx0XHRwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0XHRcdH07XG5cdFxuXHRcdFx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdFx0XHRwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblx0XG5cdFx0XHRyZXR1cm4gcHJveHk7XG5cdFx0fSxcblx0XG5cdFx0bm93OiBEYXRlLm5vdyxcblx0XG5cdFx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdFx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0XHRzdXBwb3J0OiBzdXBwb3J0XG5cdH0gKTtcblx0XG5cdGlmICggdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcdGpRdWVyeS5mblsgU3ltYm9sLml0ZXJhdG9yIF0gPSBhcnJbIFN5bWJvbC5pdGVyYXRvciBdO1xuXHR9XG5cdFxuXHQvLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcblx0alF1ZXJ5LmVhY2goIFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2xcIi5zcGxpdCggXCIgXCIgKSxcblx0ZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdFx0Y2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdH0gKTtcblx0XG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlKCBvYmogKSB7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IHJlYWwgaU9TIDguMiBvbmx5IChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcilcblx0XHQvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpXG5cdFx0Ly8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzXG5cdFx0Ly8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRVxuXHRcdHZhciBsZW5ndGggPSAhIW9iaiAmJiBcImxlbmd0aFwiIGluIG9iaiAmJiBvYmoubGVuZ3RoLFxuXHRcdFx0dHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblx0XG5cdFx0aWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0XHR0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiICYmIGxlbmd0aCA+IDAgJiYgKCBsZW5ndGggLSAxICkgaW4gb2JqO1xuXHR9XG5cdHZhciBTaXp6bGUgPVxuXHQvKiFcblx0ICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjIuMy4wXG5cdCAqIGh0dHBzOi8vc2l6emxlanMuY29tL1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2Vcblx0ICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuXHQgKlxuXHQgKiBEYXRlOiAyMDE2LTAxLTA0XG5cdCAqL1xuXHQoZnVuY3Rpb24oIHdpbmRvdyApIHtcblx0XG5cdHZhciBpLFxuXHRcdHN1cHBvcnQsXG5cdFx0RXhwcixcblx0XHRnZXRUZXh0LFxuXHRcdGlzWE1MLFxuXHRcdHRva2VuaXplLFxuXHRcdGNvbXBpbGUsXG5cdFx0c2VsZWN0LFxuXHRcdG91dGVybW9zdENvbnRleHQsXG5cdFx0c29ydElucHV0LFxuXHRcdGhhc0R1cGxpY2F0ZSxcblx0XG5cdFx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRcdHNldERvY3VtZW50LFxuXHRcdGRvY3VtZW50LFxuXHRcdGRvY0VsZW0sXG5cdFx0ZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmJ1Z2d5UVNBLFxuXHRcdHJidWdneU1hdGNoZXMsXG5cdFx0bWF0Y2hlcyxcblx0XHRjb250YWlucyxcblx0XG5cdFx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRcdGV4cGFuZG8gPSBcInNpenpsZVwiICsgMSAqIG5ldyBEYXRlKCksXG5cdFx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRcdGRpcnJ1bnMgPSAwLFxuXHRcdGRvbmUgPSAwLFxuXHRcdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRcdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRcdGNvbXBpbGVyQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRcdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fSxcblx0XG5cdFx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRcdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdFx0YXJyID0gW10sXG5cdFx0cG9wID0gYXJyLnBvcCxcblx0XHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRcdHB1c2ggPSBhcnIucHVzaCxcblx0XHRzbGljZSA9IGFyci5zbGljZSxcblx0XHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0XHQvLyBodHRwczovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdFx0aW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkge1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbaV0gPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiAtMTtcblx0XHR9LFxuXHRcblx0XHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblx0XG5cdFx0Ly8gUmVndWxhciBleHByZXNzaW9uc1xuXHRcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuXHRcdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cdFxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllclxuXHRcdGlkZW50aWZpZXIgPSBcIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcMC1cXFxceGEwXSkrXCIsXG5cdFxuXHRcdC8vIEF0dHJpYnV0ZSBzZWxlY3RvcnM6IGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHRcdGF0dHJpYnV0ZXMgPSBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFwiICsgaWRlbnRpZmllciArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHQvLyBPcGVyYXRvciAoY2FwdHVyZSAyKVxuXHRcdFx0XCIqKFsqXiR8IX5dPz0pXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XHRcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiICsgaWRlbnRpZmllciArIFwiKSl8KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIipcXFxcXVwiLFxuXHRcblx0XHRwc2V1ZG9zID0gXCI6KFwiICsgaWRlbnRpZmllciArIFwiKSg/OlxcXFwoKFwiICtcblx0XHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0XHQvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSlcblx0XHRcdFwiKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8XCIgK1xuXHRcdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XHRcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIiArIGF0dHJpYnV0ZXMgKyBcIikqKXxcIiArXG5cdFx0XHQvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpXG5cdFx0XHRcIi4qXCIgK1xuXHRcdFx0XCIpXFxcXCl8KVwiLFxuXHRcblx0XHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdFx0cndoaXRlc3BhY2UgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCIrXCIsIFwiZ1wiICksXG5cdFx0cnRyaW0gPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIgKyB3aGl0ZXNwYWNlICsgXCIrJFwiLCBcImdcIiApLFxuXHRcblx0XHRyY29tbWEgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiosXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0XHRyY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiooWz4rfl18XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0XG5cdFx0cmF0dHJpYnV0ZVF1b3RlcyA9IG5ldyBSZWdFeHAoIFwiPVwiICsgd2hpdGVzcGFjZSArIFwiKihbXlxcXFxdJ1xcXCJdKj8pXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXF1cIiwgXCJnXCIgKSxcblx0XG5cdFx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0XHRyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIFwiXlwiICsgaWRlbnRpZmllciArIFwiJFwiICksXG5cdFxuXHRcdG1hdGNoRXhwciA9IHtcblx0XHRcdFwiSURcIjogbmV3IFJlZ0V4cCggXCJeIyhcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFx0XCJUQUdcIjogbmV3IFJlZ0V4cCggXCJeKFwiICsgaWRlbnRpZmllciArIFwifFsqXSlcIiApLFxuXHRcdFx0XCJBVFRSXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgYXR0cmlidXRlcyApLFxuXHRcdFx0XCJQU0VVRE9cIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBwc2V1ZG9zICksXG5cdFx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XHRcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiICsgd2hpdGVzcGFjZSArIFwiKig/OihbKy1dfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XHRcIiooXFxcXGQrKXwpKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfClcIiwgXCJpXCIgKSxcblx0XHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdFx0Ly8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpXG5cdFx0XHQvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgXG5cdFx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0XHR3aGl0ZXNwYWNlICsgXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfCkoPz1bXi1dfCQpXCIsIFwiaVwiIClcblx0XHR9LFxuXHRcblx0XHRyaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0XHRyaGVhZGVyID0gL15oXFxkJC9pLFxuXHRcblx0XHRybmF0aXZlID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3Lyxcblx0XG5cdFx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdFx0cnF1aWNrRXhwciA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLFxuXHRcblx0XHRyc2libGluZyA9IC9bK35dLyxcblx0XG5cdFx0Ly8gQ1NTIGVzY2FwZXNcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdFx0cnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIiArIHdoaXRlc3BhY2UgKyBcIj98KFwiICsgd2hpdGVzcGFjZSArIFwiKXwuKVwiLCBcImlnXCIgKSxcblx0XHRmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7XG5cdFx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdFx0Ly8gTmFOIG1lYW5zIG5vbi1jb2RlcG9pbnRcblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjRcblx0XHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdFx0cmV0dXJuIGhpZ2ggIT09IGhpZ2ggfHwgZXNjYXBlZFdoaXRlc3BhY2UgP1xuXHRcdFx0XHRlc2NhcGVkIDpcblx0XHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHRcdC8vIEJNUCBjb2RlcG9pbnRcblx0XHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDpcblx0XHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBDU1Mgc3RyaW5nL2lkZW50aWZpZXIgc2VyaWFsaXphdGlvblxuXHRcdC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jY29tbW9uLXNlcmlhbGl6aW5nLWlkaW9tc1xuXHRcdHJjc3Nlc2NhcGUgPSAvKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXHg4MC1cXHVGRkZGXFx3LV0vZyxcblx0XHRmY3NzZXNjYXBlID0gZnVuY3Rpb24oIGNoLCBhc0NvZGVQb2ludCApIHtcblx0XHRcdGlmICggYXNDb2RlUG9pbnQgKSB7XG5cdFxuXHRcdFx0XHQvLyBVKzAwMDAgTlVMTCBiZWNvbWVzIFUrRkZGRCBSRVBMQUNFTUVOVCBDSEFSQUNURVJcblx0XHRcdFx0aWYgKCBjaCA9PT0gXCJcXDBcIiApIHtcblx0XHRcdFx0XHRyZXR1cm4gXCJcXHVGRkZEXCI7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIENvbnRyb2wgY2hhcmFjdGVycyBhbmQgKGRlcGVuZGVudCB1cG9uIHBvc2l0aW9uKSBudW1iZXJzIGdldCBlc2NhcGVkIGFzIGNvZGUgcG9pbnRzXG5cdFx0XHRcdHJldHVybiBjaC5zbGljZSggMCwgLTEgKSArIFwiXFxcXFwiICsgY2guY2hhckNvZGVBdCggY2gubGVuZ3RoIC0gMSApLnRvU3RyaW5nKCAxNiApICsgXCIgXCI7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gT3RoZXIgcG90ZW50aWFsbHktc3BlY2lhbCBBU0NJSSBjaGFyYWN0ZXJzIGdldCBiYWNrc2xhc2gtZXNjYXBlZFxuXHRcdFx0cmV0dXJuIFwiXFxcXFwiICsgY2g7XG5cdFx0fSxcblx0XG5cdFx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHRcdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdFx0Ly8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgXCJQZXJtaXNzaW9uIERlbmllZFwiXG5cdFx0Ly8gZXJyb3IgaW4gSUVcblx0XHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRzZXREb2N1bWVudCgpO1xuXHRcdH0sXG5cdFxuXHRcdGRpc2FibGVkQW5jZXN0b3IgPSBhZGRDb21iaW5hdG9yKFxuXHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSB0cnVlO1xuXHRcdFx0fSxcblx0XHRcdHsgZGlyOiBcInBhcmVudE5vZGVcIiwgbmV4dDogXCJsZWdlbmRcIiB9XG5cdFx0KTtcblx0XG5cdC8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG5cdHRyeSB7XG5cdFx0cHVzaC5hcHBseShcblx0XHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRcdHByZWZlcnJlZERvYy5jaGlsZE5vZGVzXG5cdFx0KTtcblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHRcdC8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHlcblx0XHRhcnJbIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aCBdLm5vZGVUeXBlO1xuXHR9IGNhdGNoICggZSApIHtcblx0XHRwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/XG5cdFxuXHRcdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdFx0cHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7XG5cdFx0XHR9IDpcblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBJRTw5XG5cdFx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRcdHZhciBqID0gdGFyZ2V0Lmxlbmd0aCxcblx0XHRcdFx0XHRpID0gMDtcblx0XHRcdFx0Ly8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoXG5cdFx0XHRcdHdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge31cblx0XHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdFx0dmFyIG0sIGksIGVsZW0sIG5pZCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsXG5cdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dCAmJiBjb250ZXh0Lm93bmVyRG9jdW1lbnQsXG5cdFxuXHRcdFx0Ly8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHRcdFx0bm9kZVR5cGUgPSBjb250ZXh0ID8gY29udGV4dC5ub2RlVHlwZSA6IDk7XG5cdFxuXHRcdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXHRcblx0XHQvLyBSZXR1cm4gZWFybHkgZnJvbSBjYWxscyB3aXRoIGludmFsaWQgc2VsZWN0b3Igb3IgY29udGV4dFxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdFx0bm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgJiYgbm9kZVR5cGUgIT09IDExICkge1xuXHRcblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH1cblx0XG5cdFx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50c1xuXHRcdGlmICggIXNlZWQgKSB7XG5cdFxuXHRcdFx0aWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0XHRcdH1cblx0XHRcdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXHRcblx0XHRcdGlmICggZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFxuXHRcdFx0XHQvLyBJZiB0aGUgc2VsZWN0b3IgaXMgc3VmZmljaWVudGx5IHNpbXBsZSwgdHJ5IHVzaW5nIGEgXCJnZXQqQnkqXCIgRE9NIG1ldGhvZFxuXHRcdFx0XHQvLyAoZXhjZXB0aW5nIERvY3VtZW50RnJhZ21lbnQgY29udGV4dCwgd2hlcmUgdGhlIG1ldGhvZHMgZG9uJ3QgZXhpc3QpXG5cdFx0XHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIElEIHNlbGVjdG9yXG5cdFx0XHRcdFx0aWYgKCAobSA9IG1hdGNoWzFdKSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBEb2N1bWVudCBjb250ZXh0XG5cdFx0XHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8vIEVsZW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdFx0aWYgKCBuZXdDb250ZXh0ICYmIChlbGVtID0gbmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSAmJlxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiZcblx0XHRcdFx0XHRcdFx0XHRlbGVtLmlkID09PSBtICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBUeXBlIHNlbGVjdG9yXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XG5cdFx0XHRcdFx0Ly8gQ2xhc3Mgc2VsZWN0b3Jcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiZcblx0XHRcdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblx0XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBUYWtlIGFkdmFudGFnZSBvZiBxdWVyeVNlbGVjdG9yQWxsXG5cdFx0XHRcdGlmICggc3VwcG9ydC5xc2EgJiZcblx0XHRcdFx0XHQhY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdICYmXG5cdFx0XHRcdFx0KCFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApKSApIHtcblx0XG5cdFx0XHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0XHRcdFx0bmV3U2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0XG5cdFx0XHRcdFx0Ly8gcVNBIGxvb2tzIG91dHNpZGUgRWxlbWVudCBjb250ZXh0LCB3aGljaCBpcyBub3Qgd2hhdCB3ZSB3YW50XG5cdFx0XHRcdFx0Ly8gVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoaXMgd29ya2Fyb3VuZCB0ZWNobmlxdWVcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PThcblx0XHRcdFx0XHQvLyBFeGNsdWRlIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJvYmplY3RcIiApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBDYXB0dXJlIHRoZSBjb250ZXh0IElELCBzZXR0aW5nIGl0IGZpcnN0IGlmIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFx0aWYgKCAobmlkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoIFwiaWRcIiApKSApIHtcblx0XHRcdFx0XHRcdFx0bmlkID0gbmlkLnJlcGxhY2UoIHJjc3Nlc2NhcGUsIGZjc3Nlc2NhcGUgKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRleHQuc2V0QXR0cmlidXRlKCBcImlkXCIsIChuaWQgPSBleHBhbmRvKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8vIFByZWZpeCBldmVyeSBzZWxlY3RvciBpbiB0aGUgbGlzdFxuXHRcdFx0XHRcdFx0Z3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0XHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRncm91cHNbaV0gPSBcIiNcIiArIG5pZCArIFwiIFwiICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKCBcIixcIiApO1xuXHRcblx0XHRcdFx0XHRcdC8vIEV4cGFuZCBjb250ZXh0IGZvciBzaWJsaW5nIHNlbGVjdG9yc1xuXHRcdFx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8XG5cdFx0XHRcdFx0XHRcdGNvbnRleHQ7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cyxcblx0XHRcdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggcXNhRXJyb3IgKSB7XG5cdFx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIG5pZCA9PT0gZXhwYW5kbyApIHtcblx0XHRcdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIEFsbCBvdGhlcnNcblx0XHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBrZXktdmFsdWUgY2FjaGVzIG9mIGxpbWl0ZWQgc2l6ZVxuXHQgKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nLCBvYmplY3QpfSBSZXR1cm5zIHRoZSBPYmplY3QgZGF0YSBhZnRlciBzdG9yaW5nIGl0IG9uIGl0c2VsZiB3aXRoXG5cdCAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuXHQgKlx0ZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeVxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdFx0dmFyIGtleXMgPSBbXTtcblx0XG5cdFx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cdFx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdFx0aWYgKCBrZXlzLnB1c2goIGtleSArIFwiIFwiICkgPiBFeHByLmNhY2hlTGVuZ3RoICkge1xuXHRcdFx0XHQvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcblx0XHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHRcdH1cblx0XHRcdHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG5cdFx0fVxuXHRcdHJldHVybiBjYWNoZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRcdGZuWyBleHBhbmRvIF0gPSB0cnVlO1xuXHRcdHJldHVybiBmbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBlbGVtZW50IGFuZCByZXR1cm5zIGEgYm9vbGVhbiByZXN1bHRcblx0ICovXG5cdGZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdFx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO1xuXHRcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuICEhZm4oIGVsICk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRcdGlmICggZWwucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZWwgKTtcblx0XHRcdH1cblx0XHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0XHRlbCA9IG51bGw7XG5cdFx0fVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgVGhlIG1ldGhvZCB0aGF0IHdpbGwgYmUgYXBwbGllZFxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0XHR2YXIgYXJyID0gYXR0cnMuc3BsaXQoXCJ8XCIpLFxuXHRcdFx0aSA9IGFyci5sZW5ndGg7XG5cdFxuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0RXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7XG5cdFx0fVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGFcblx0ICogQHBhcmFtIHtFbGVtZW50fSBiXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuXHQgKi9cblx0ZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkge1xuXHRcdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRhLnNvdXJjZUluZGV4IC0gYi5zb3VyY2VJbmRleDtcblx0XG5cdFx0Ly8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG5cdFx0aWYgKCBkaWZmICkge1xuXHRcdFx0cmV0dXJuIGRpZmY7XG5cdFx0fVxuXHRcblx0XHQvLyBDaGVjayBpZiBiIGZvbGxvd3MgYVxuXHRcdGlmICggY3VyICkge1xuXHRcdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdFx0aWYgKCBjdXIgPT09IGIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gYSA/IDEgOiAtMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdFx0fTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgYnV0dG9uc1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlQnV0dG9uUHNldWRvKCB0eXBlICkge1xuXHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIChuYW1lID09PSBcImlucHV0XCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIikgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHRcdH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIDplbmFibGVkLzpkaXNhYmxlZFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGRpc2FibGVkIHRydWUgZm9yIDpkaXNhYmxlZDsgZmFsc2UgZm9yIDplbmFibGVkXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVEaXNhYmxlZFBzZXVkbyggZGlzYWJsZWQgKSB7XG5cdFx0Ly8gS25vd24gOmRpc2FibGVkIGZhbHNlIHBvc2l0aXZlczpcblx0XHQvLyBJRTogKltkaXNhYmxlZF06bm90KGJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIG9wdGdyb3VwLCBvcHRpb24sIG1lbnVpdGVtLCBmaWVsZHNldClcblx0XHQvLyBub3QgSUU6IGZpZWxkc2V0W2Rpc2FibGVkXSA+IGxlZ2VuZDpudGgtb2YtdHlwZShuKzIpIDpjYW4tZGlzYWJsZVxuXHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XG5cdFx0XHQvLyBDaGVjayBmb3JtIGVsZW1lbnRzIGFuZCBvcHRpb24gZWxlbWVudHMgZm9yIGV4cGxpY2l0IGRpc2FibGluZ1xuXHRcdFx0cmV0dXJuIFwibGFiZWxcIiBpbiBlbGVtICYmIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkIHx8XG5cdFx0XHRcdFwiZm9ybVwiIGluIGVsZW0gJiYgZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblx0XG5cdFx0XHRcdC8vIENoZWNrIG5vbi1kaXNhYmxlZCBmb3JtIGVsZW1lbnRzIGZvciBmaWVsZHNldFtkaXNhYmxlZF0gYW5jZXN0b3JzXG5cdFx0XHRcdFwiZm9ybVwiIGluIGVsZW0gJiYgZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2UgJiYgKFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFNi0xMStcblx0XHRcdFx0XHQvLyBBbmNlc3RyeSBpcyBjb3ZlcmVkIGZvciB1c1xuXHRcdFx0XHRcdGVsZW0uaXNEaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblx0XG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBhc3N1bWUgYW55IG5vbi08b3B0aW9uPiB1bmRlciBmaWVsZHNldFtkaXNhYmxlZF0gaXMgZGlzYWJsZWRcblx0XHRcdFx0XHQvKiBqc2hpbnQgLVcwMTggKi9cblx0XHRcdFx0XHRlbGVtLmlzRGlzYWJsZWQgIT09ICFkaXNhYmxlZCAmJlxuXHRcdFx0XHRcdFx0KFwibGFiZWxcIiBpbiBlbGVtIHx8ICFkaXNhYmxlZEFuY2VzdG9yKCBlbGVtICkpICE9PSBkaXNhYmxlZFxuXHRcdFx0XHQpO1xuXHRcdH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHtcblx0XHRcdGFyZ3VtZW50ID0gK2FyZ3VtZW50O1xuXHRcdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0dmFyIGosXG5cdFx0XHRcdFx0bWF0Y2hJbmRleGVzID0gZm4oIFtdLCBzZWVkLmxlbmd0aCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblx0XG5cdFx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhlc1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIHNlZWRbIChqID0gbWF0Y2hJbmRleGVzW2ldKSBdICkge1xuXHRcdFx0XHRcdFx0c2VlZFtqXSA9ICEobWF0Y2hlc1tqXSA9IHNlZWRbal0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0XG5cdCAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3Q9fSBjb250ZXh0XG5cdCAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gdGVzdENvbnRleHQoIGNvbnRleHQgKSB7XG5cdFx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcblx0fVxuXHRcblx0Ly8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2Vcblx0c3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307XG5cdFxuXHQvKipcblx0ICogRGV0ZWN0cyBYTUwgbm9kZXNcblx0ICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbSBBbiBlbGVtZW50IG9yIGEgZG9jdW1lbnRcblx0ICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuXHQgKi9cblx0aXNYTUwgPSBTaXp6bGUuaXNYTUwgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdFx0Ly8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpXG5cdFx0dmFyIGRvY3VtZW50RWxlbWVudCA9IGVsZW0gJiYgKGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtKS5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnRcblx0ICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gW2RvY10gQW4gZWxlbWVudCBvciBkb2N1bWVudCBvYmplY3QgdG8gdXNlIHRvIHNldCB0aGUgZG9jdW1lbnRcblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuXHQgKi9cblx0c2V0RG9jdW1lbnQgPSBTaXp6bGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiggbm9kZSApIHtcblx0XHR2YXIgaGFzQ29tcGFyZSwgc3ViV2luZG93LFxuXHRcdFx0ZG9jID0gbm9kZSA/IG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlIDogcHJlZmVycmVkRG9jO1xuXHRcblx0XHQvLyBSZXR1cm4gZWFybHkgaWYgZG9jIGlzIGludmFsaWQgb3IgYWxyZWFkeSBzZWxlY3RlZFxuXHRcdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQ7XG5cdFx0fVxuXHRcblx0XHQvLyBVcGRhdGUgZ2xvYmFsIHZhcmlhYmxlc1xuXHRcdGRvY3VtZW50ID0gZG9jO1xuXHRcdGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0ZG9jdW1lbnRJc0hUTUwgPSAhaXNYTUwoIGRvY3VtZW50ICk7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2Vcblx0XHQvLyBBY2Nlc3NpbmcgaWZyYW1lIGRvY3VtZW50cyBhZnRlciB1bmxvYWQgdGhyb3dzIFwicGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvcnMgKGpRdWVyeSAjMTM5MzYpXG5cdFx0aWYgKCBwcmVmZXJyZWREb2MgIT09IGRvY3VtZW50ICYmXG5cdFx0XHQoc3ViV2luZG93ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHN1YldpbmRvdy50b3AgIT09IHN1YldpbmRvdyApIHtcblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSwgRWRnZVxuXHRcdFx0aWYgKCBzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0c3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwidW5sb2FkXCIsIHVubG9hZEhhbmRsZXIsIGZhbHNlICk7XG5cdFxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDEwIG9ubHlcblx0XHRcdH0gZWxzZSBpZiAoIHN1YldpbmRvdy5hdHRhY2hFdmVudCApIHtcblx0XHRcdFx0c3ViV2luZG93LmF0dGFjaEV2ZW50KCBcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIgKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8qIEF0dHJpYnV0ZXNcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFPDhcblx0XHQvLyBWZXJpZnkgdGhhdCBnZXRBdHRyaWJ1dGUgcmVhbGx5IHJldHVybnMgYXR0cmlidXRlcyBhbmQgbm90IHByb3BlcnRpZXNcblx0XHQvLyAoZXhjZXB0aW5nIElFOCBib29sZWFucylcblx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0ZWwuY2xhc3NOYW1lID0gXCJpXCI7XG5cdFx0XHRyZXR1cm4gIWVsLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKTtcblx0XHR9KTtcblx0XG5cdFx0LyogZ2V0RWxlbWVudChzKUJ5KlxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XG5cdFx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpIHJldHVybnMgb25seSBlbGVtZW50c1xuXHRcdHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0ZWwuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRcdHJldHVybiAhZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aDtcblx0XHR9KTtcblx0XG5cdFx0Ly8gU3VwcG9ydDogSUU8OVxuXHRcdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRTwxMFxuXHRcdC8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZVxuXHRcdC8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1tYXRpY2FsbHktc2V0IG5hbWVzLFxuXHRcdC8vIHNvIHVzZSBhIHJvdW5kYWJvdXQgZ2V0RWxlbWVudHNCeU5hbWUgdGVzdFxuXHRcdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmlkID0gZXhwYW5kbztcblx0XHRcdHJldHVybiAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHRcdH0pO1xuXHRcblx0XHQvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcblx0XHRpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHtcblx0XHRcdEV4cHIuZmluZFtcIklEXCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHRcdHZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblx0XHRcdFx0XHRyZXR1cm4gbSA/IFsgbSBdIDogW107XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBhdHRySWQ7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBTdXBwb3J0OiBJRTYvN1xuXHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgaXMgbm90IHJlbGlhYmxlIGFzIGEgZmluZCBzaG9ydGN1dFxuXHRcdFx0ZGVsZXRlIEV4cHIuZmluZFtcIklEXCJdO1xuXHRcblx0XHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSAgZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuXHRcdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdFx0cmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHR9XG5cdFxuXHRcdC8vIFRhZ1xuXHRcdEV4cHIuZmluZFtcIlRBR1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgP1xuXHRcdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cdFxuXHRcdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdFx0fSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gOlxuXHRcblx0XHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdHRtcCA9IFtdLFxuXHRcdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRcdC8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b29cblx0XHRcdFx0XHRyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cdFxuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzXG5cdFx0XHRcdGlmICggdGFnID09PSBcIipcIiApIHtcblx0XHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0dG1wLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHR9O1xuXHRcblx0XHQvLyBDbGFzc1xuXHRcdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFxuXHRcdC8qIFFTQS9tYXRjaGVzU2VsZWN0b3Jcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdFxuXHRcdC8vIFFTQSBhbmQgbWF0Y2hlc1NlbGVjdG9yIHN1cHBvcnRcblx0XG5cdFx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0XHRyYnVnZ3lNYXRjaGVzID0gW107XG5cdFxuXHRcdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdFx0Ly8gV2UgYWxsb3cgdGhpcyBiZWNhdXNlIG9mIGEgYnVnIGluIElFOC85IHRoYXQgdGhyb3dzIGFuIGVycm9yXG5cdFx0Ly8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZVxuXHRcdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdFx0Ly8gU2VlIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OFxuXHRcdHJidWdneVFTQSA9IFtdO1xuXHRcblx0XHRpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCApKSApIHtcblx0XHRcdC8vIEJ1aWxkIFFTQSByZWdleFxuXHRcdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdFx0YXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0XHQvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHlcblx0XHRcdFx0Ly8gc2V0dGluZyBhIGJvb2xlYW4gY29udGVudCBhdHRyaWJ1dGUsXG5cdFx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHRcdC8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmlubmVySFRNTCA9IFwiPGEgaWQ9J1wiICsgZXhwYW5kbyArIFwiJz48L2E+XCIgK1xuXHRcdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxyXFxcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcdFwiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIjtcblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdFx0Ly8gTm90aGluZyBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiBlbXB0eSBzdHJpbmdzIGZvbGxvdyBePSBvciAkPSBvciAqPVxuXHRcdFx0XHQvLyBUaGUgdGVzdCBhdHRyaWJ1dGUgbXVzdCBiZSB1bmtub3duIGluIE9wZXJhIGJ1dCBcInNhZmVcIiBmb3IgV2luUlRcblx0XHRcdFx0Ly8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9oaDQ2NTM4OC5hc3B4I2F0dHJpYnV0ZV9zZWN0aW9uXG5cdFx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJbKl4kXT1cIiArIHdoaXRlc3BhY2UgKyBcIiooPzonJ3xcXFwiXFxcIilcIiApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuNCwgU2FmYXJpPDcuMCssIGlPUzw3LjArLCBQaGFudG9tSlM8MS45LjgrXG5cdFx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCJ+PVwiKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcblx0XHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxXG5cdFx0XHRcdC8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmxpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHNcblx0XHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIi4jLitbK35dXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XG5cdFx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0XHRlbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+XCIgK1xuXHRcdFx0XHRcdFwiPHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PlwiO1xuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHRcdC8vIFRoZSB0eXBlIGFuZCBuYW1lIGF0dHJpYnV0ZXMgYXJlIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudFxuXHRcdFx0XHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwiaGlkZGVuXCIgKTtcblx0XHRcdFx0ZWwuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIipbKl4kfCF+XT89XCIgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZClcblx0XHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0XHQvLyBJRSdzIDpkaXNhYmxlZCBzZWxlY3RvciBkb2VzIG5vdCBwaWNrIHVwIHRoZSBjaGlsZHJlbiBvZiBkaXNhYmxlZCBmaWVsZHNldHNcblx0XHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIjpkaXNhYmxlZFwiKS5sZW5ndGggIT09IDIgKSB7XG5cdFx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKTtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIsLio6XCIpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcblx0XHRpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLm1hdGNoZXMgfHxcblx0XHRcdGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdFx0ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0XHRkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblx0XG5cdFx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdFx0Ly8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSlcblx0XHRcdFx0c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZWwsIFwiKlwiICk7XG5cdFxuXHRcdFx0XHQvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uXG5cdFx0XHRcdC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcblx0XHRcdFx0bWF0Y2hlcy5jYWxsKCBlbCwgXCJbcyE9JyddOnhcIiApO1xuXHRcdFx0XHRyYnVnZ3lNYXRjaGVzLnB1c2goIFwiIT1cIiwgcHNldWRvcyApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcblx0XHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRcdHJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oXCJ8XCIpICk7XG5cdFxuXHRcdC8qIENvbnRhaW5zXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcdGhhc0NvbXBhcmUgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gKTtcblx0XG5cdFx0Ly8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG5cdFx0Ly8gUHVycG9zZWZ1bGx5IHNlbGYtZXhjbHVzaXZlXG5cdFx0Ly8gQXMgaW4sIGFuIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBpdHNlbGZcblx0XHRjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuXHRcdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHRcdHZhciBhZG93biA9IGEubm9kZVR5cGUgPT09IDkgPyBhLmRvY3VtZW50RWxlbWVudCA6IGEsXG5cdFx0XHRcdFx0YnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG5cdFx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zID9cblx0XHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG5cdFx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdFx0KSk7XG5cdFx0XHR9IDpcblx0XHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0XHRpZiAoIGIgKSB7XG5cdFx0XHRcdFx0d2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcblx0XHQvKiBTb3J0aW5nXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcblx0XHQvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG5cdFx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFxuXHRcdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdFx0dmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO1xuXHRcdFx0aWYgKCBjb21wYXJlICkge1xuXHRcdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0XHRjb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgP1xuXHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXHRcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHdlIGtub3cgdGhleSBhcmUgZGlzY29ubmVjdGVkXG5cdFx0XHRcdDE7XG5cdFxuXHRcdFx0Ly8gRGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0XHRpZiAoIGNvbXBhcmUgJiAxIHx8XG5cdFx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblx0XG5cdFx0XHRcdC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuXHRcdFx0XHRpZiAoIGEgPT09IGRvY3VtZW50IHx8IGEub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYSkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggYiA9PT0gZG9jdW1lbnQgfHwgYi5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBiKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdFx0cmV0dXJuIHNvcnRJbnB1dCA/XG5cdFx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHRcdDA7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0XHRyZXR1cm4gMDtcblx0XHRcdH1cblx0XG5cdFx0XHR2YXIgY3VyLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0YXVwID0gYS5wYXJlbnROb2RlLFxuXHRcdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRcdGFwID0gWyBhIF0sXG5cdFx0XHRcdGJwID0gWyBiIF07XG5cdFxuXHRcdFx0Ly8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcblx0XHRcdGlmICggIWF1cCB8fCAhYnVwICkge1xuXHRcdFx0XHRyZXR1cm4gYSA9PT0gZG9jdW1lbnQgPyAtMSA6XG5cdFx0XHRcdFx0YiA9PT0gZG9jdW1lbnQgPyAxIDpcblx0XHRcdFx0XHRhdXAgPyAtMSA6XG5cdFx0XHRcdFx0YnVwID8gMSA6XG5cdFx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdFx0MDtcblx0XG5cdFx0XHQvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVja1xuXHRcdFx0fSBlbHNlIGlmICggYXVwID09PSBidXAgKSB7XG5cdFx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdFx0Y3VyID0gYTtcblx0XHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0XHR9XG5cdFx0XHRjdXIgPSBiO1xuXHRcdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0XHRicC51bnNoaWZ0KCBjdXIgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBXYWxrIGRvd24gdGhlIHRyZWUgbG9va2luZyBmb3IgYSBkaXNjcmVwYW5jeVxuXHRcdFx0d2hpbGUgKCBhcFtpXSA9PT0gYnBbaV0gKSB7XG5cdFx0XHRcdGkrKztcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gaSA/XG5cdFx0XHRcdC8vIERvIGEgc2libGluZyBjaGVjayBpZiB0aGUgbm9kZXMgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvclxuXHRcdFx0XHRzaWJsaW5nQ2hlY2soIGFwW2ldLCBicFtpXSApIDpcblx0XG5cdFx0XHRcdC8vIE90aGVyd2lzZSBub2RlcyBpbiBvdXIgZG9jdW1lbnQgc29ydCBmaXJzdFxuXHRcdFx0XHRhcFtpXSA9PT0gcHJlZmVycmVkRG9jID8gLTEgOlxuXHRcdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHRcdDA7XG5cdFx0fTtcblx0XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9O1xuXHRcblx0U2l6emxlLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgZWxlbWVudHMgKSB7XG5cdFx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcblx0fTtcblx0XG5cdFNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0XHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0XHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdH1cblx0XG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdFx0ZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgXCI9JyQxJ11cIiApO1xuXHRcblx0XHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0XHQhY29tcGlsZXJDYWNoZVsgZXhwciArIFwiIFwiIF0gJiZcblx0XHRcdCggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiZcblx0XHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblx0XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cdFxuXHRcdFx0XHQvLyBJRSA5J3MgbWF0Y2hlc1NlbGVjdG9yIHJldHVybnMgZmFsc2Ugb24gZGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHRcdC8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50XG5cdFx0XHRcdFx0XHQvLyBmcmFnbWVudCBpbiBJRSA5XG5cdFx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xuXHR9O1xuXHRcblx0U2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdFx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdFx0aWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0XHR9XG5cdFx0cmV0dXJuIGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICk7XG5cdH07XG5cdFxuXHRTaXp6bGUuYXR0ciA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRcdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdFx0fVxuXHRcblx0XHR2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLFxuXHRcdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0XHR2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdGZuKCBlbGVtLCBuYW1lLCAhZG9jdW1lbnRJc0hUTUwgKSA6XG5cdFx0XHRcdHVuZGVmaW5lZDtcblx0XG5cdFx0cmV0dXJuIHZhbCAhPT0gdW5kZWZpbmVkID9cblx0XHRcdHZhbCA6XG5cdFx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cblx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA6XG5cdFx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdFx0bnVsbDtcblx0fTtcblx0XG5cdFNpenpsZS5lc2NhcGUgPSBmdW5jdGlvbiggc2VsICkge1xuXHRcdHJldHVybiAoc2VsICsgXCJcIikucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xuXHR9O1xuXHRcblx0U2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEb2N1bWVudCBzb3J0aW5nIGFuZCByZW1vdmluZyBkdXBsaWNhdGVzXG5cdCAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG5cdCAqL1xuXHRTaXp6bGUudW5pcXVlU29ydCA9IGZ1bmN0aW9uKCByZXN1bHRzICkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0ZHVwbGljYXRlcyA9IFtdLFxuXHRcdFx0aiA9IDAsXG5cdFx0XHRpID0gMDtcblx0XG5cdFx0Ly8gVW5sZXNzIHdlICprbm93KiB3ZSBjYW4gZGV0ZWN0IGR1cGxpY2F0ZXMsIGFzc3VtZSB0aGVpciBwcmVzZW5jZVxuXHRcdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdFx0c29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG5cdFx0cmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTtcblx0XG5cdFx0aWYgKCBoYXNEdXBsaWNhdGUgKSB7XG5cdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdFx0aiA9IGR1cGxpY2F0ZXMucHVzaCggaSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0cmVzdWx0cy5zcGxpY2UoIGR1cGxpY2F0ZXNbIGogXSwgMSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0XHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjVcblx0XHRzb3J0SW5wdXQgPSBudWxsO1xuXHRcblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2Rlc1xuXHQgKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cblx0ICovXG5cdGdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBub2RlLFxuXHRcdFx0cmV0ID0gXCJcIixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXHRcblx0XHRpZiAoICFub2RlVHlwZSApIHtcblx0XHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0XHR3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHtcblx0XHRcdFx0Ly8gRG8gbm90IHRyYXZlcnNlIGNvbW1lbnQgbm9kZXNcblx0XHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMSB8fCBub2RlVHlwZSA9PT0gOSB8fCBub2RlVHlwZSA9PT0gMTEgKSB7XG5cdFx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0XHQvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuXHRcdFx0aWYgKCB0eXBlb2YgZWxlbS50ZXh0Q29udGVudCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBUcmF2ZXJzZSBpdHMgY2hpbGRyZW5cblx0XHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdFx0cmV0ICs9IGdldFRleHQoIGVsZW0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZVZhbHVlO1xuXHRcdH1cblx0XHQvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblx0XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcblx0XG5cdEV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXHRcblx0XHQvLyBDYW4gYmUgYWRqdXN0ZWQgYnkgdGhlIHVzZXJcblx0XHRjYWNoZUxlbmd0aDogNTAsXG5cdFxuXHRcdGNyZWF0ZVBzZXVkbzogbWFya0Z1bmN0aW9uLFxuXHRcblx0XHRtYXRjaDogbWF0Y2hFeHByLFxuXHRcblx0XHRhdHRySGFuZGxlOiB7fSxcblx0XG5cdFx0ZmluZDoge30sXG5cdFxuXHRcdHJlbGF0aXZlOiB7XG5cdFx0XHRcIj5cIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFx0XCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFx0XCJ+XCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiIH1cblx0XHR9LFxuXHRcblx0XHRwcmVGaWx0ZXI6IHtcblx0XHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XG5cdFx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRcdG1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XG5cdFx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0XHRtYXRjaFszXSA9IFwiIFwiICsgbWF0Y2hbM10gKyBcIiBcIjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG5cdFx0XHR9LFxuXHRcblx0XHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0XHQvKiBtYXRjaGVzIGZyb20gbWF0Y2hFeHByW1wiQ0hJTERcIl1cblx0XHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0XHQyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0MyBhcmd1bWVudCAoZXZlbnxvZGR8XFxkKnxcXGQqbihbKy1dXFxkKyk/fC4uLilcblx0XHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0XHQ1IHNpZ24gb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdFx0NiB4IG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHRcdDggeSBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQqL1xuXHRcdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cdFxuXHRcdFx0XHRpZiAoIG1hdGNoWzFdLnNsaWNlKCAwLCAzICkgPT09IFwibnRoXCIgKSB7XG5cdFx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0XHRpZiAoICFtYXRjaFszXSApIHtcblx0XHRcdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIG51bWVyaWMgeCBhbmQgeSBwYXJhbWV0ZXJzIGZvciBFeHByLmZpbHRlci5DSElMRFxuXHRcdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0XHRtYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKSApO1xuXHRcdFx0XHRcdG1hdGNoWzVdID0gKyggKCBtYXRjaFs3XSArIG1hdGNoWzhdICkgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKTtcblx0XG5cdFx0XHRcdC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBtYXRjaFszXSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0XHR2YXIgZXhjZXNzLFxuXHRcdFx0XHRcdHVucXVvdGVkID0gIW1hdGNoWzZdICYmIG1hdGNoWzJdO1xuXHRcblx0XHRcdFx0aWYgKCBtYXRjaEV4cHJbXCJDSElMRFwiXS50ZXN0KCBtYXRjaFswXSApICkge1xuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBBY2NlcHQgcXVvdGVkIGFyZ3VtZW50cyBhcy1pc1xuXHRcdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRcdG1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIjtcblx0XG5cdFx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuXHRcdFx0XHRcdC8vIEdldCBleGNlc3MgZnJvbSB0b2tlbml6ZSAocmVjdXJzaXZlbHkpXG5cdFx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHRcdC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHRcdChleGNlc3MgPSB1bnF1b3RlZC5pbmRleE9mKCBcIilcIiwgdW5xdW90ZWQubGVuZ3RoIC0gZXhjZXNzICkgLSB1bnF1b3RlZC5sZW5ndGgpICkge1xuXHRcblx0XHRcdFx0XHQvLyBleGNlc3MgaXMgYSBuZWdhdGl2ZSBpbmRleFxuXHRcdFx0XHRcdG1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0ZmlsdGVyOiB7XG5cdFxuXHRcdFx0XCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG5cdFx0XHRcdHZhciBub2RlTmFtZSA9IG5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcblx0XHRcdFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcblx0XHRcdFx0dmFyIHBhdHRlcm4gPSBjbGFzc0NhY2hlWyBjbGFzc05hbWUgKyBcIiBcIiBdO1xuXHRcblx0XHRcdFx0cmV0dXJuIHBhdHRlcm4gfHxcblx0XHRcdFx0XHQocGF0dGVybiA9IG5ldyBSZWdFeHAoIFwiKF58XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyBjbGFzc05hbWUgKyBcIihcIiArIHdoaXRlc3BhY2UgKyBcInwkKVwiICkpICYmXG5cdFx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiICk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcblx0XHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbmFtZSwgb3BlcmF0b3IsIGNoZWNrICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0dmFyIHJlc3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7XG5cdFxuXHRcdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiIT1cIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHJlc3VsdCArPSBcIlwiO1xuXHRcblx0XHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIhPVwiID8gcmVzdWx0ICE9PSBjaGVjayA6XG5cdFx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJePVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOlxuXHRcdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiJD1cIiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6XG5cdFx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJ+PVwiID8gKCBcIiBcIiArIHJlc3VsdC5yZXBsYWNlKCByd2hpdGVzcGFjZSwgXCIgXCIgKSArIFwiIFwiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcblx0XHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRcdGZhbHNlO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBhcmd1bWVudCwgZmlyc3QsIGxhc3QgKSB7XG5cdFx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdFx0Zm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuXHRcdFx0XHRcdG9mVHlwZSA9IHdoYXQgPT09IFwib2YtdHlwZVwiO1xuXHRcblx0XHRcdFx0cmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXHRcblx0XHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gISFlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRcdFx0fSA6XG5cdFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0XHR2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LFxuXHRcdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0XHRwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUsXG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZSxcblx0XHRcdFx0XHRcdFx0ZGlmZiA9IGZhbHNlO1xuXHRcblx0XHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIGRpciApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBvZlR5cGUgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gXCJvbmx5XCIgJiYgIXN0YXJ0ICYmIFwibmV4dFNpYmxpbmdcIjtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBub24teG1sIDpudGgtY2hpbGQoLi4uKSBzdG9yZXMgY2FjaGUgZGF0YSBvbiBgcGFyZW50YFxuXHRcdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IHBhcmVudDtcblx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRcdG5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTtcblx0XHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4ICYmIGNhY2hlWyAyIF07XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cdFxuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFdoZW4gZm91bmQsIGNhY2hlIGluZGV4ZXMgb24gYHBhcmVudGAgYW5kIGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuXHRcdFx0XHRcdFx0XHRcdGlmICggdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGlmZiA9IG5vZGVJbmRleDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIHhtbCA6bnRoLWNoaWxkKC4uLilcblx0XHRcdFx0XHRcdFx0XHQvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBkaWZmID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KytkaWZmICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDYWNoZSB0aGUgaW5kZXggb2YgZWFjaCBlbmNvdW50ZXJlZCBlbGVtZW50XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBub2RlID09PSBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuXHRcdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcblx0XHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXHRcdFx0XHQvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmVcblx0XHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuXHRcdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0XHQvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zXG5cdFx0XHRcdHZhciBhcmdzLFxuXHRcdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgcHNldWRvICk7XG5cdFxuXHRcdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHRcdC8vIGFyZ3VtZW50cyBhcmUgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgZmlsdGVyIGZ1bmN0aW9uXG5cdFx0XHRcdC8vIGp1c3QgYXMgU2l6emxlIGRvZXNcblx0XHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRcdHJldHVybiBmbiggYXJndW1lbnQgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzXG5cdFx0XHRcdGlmICggZm4ubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0XHRyZXR1cm4gRXhwci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KCBwc2V1ZG8udG9Mb3dlckNhc2UoKSApID9cblx0XHRcdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0XHRtYXRjaGVkID0gZm4oIHNlZWQsIGFyZ3VtZW50ICksXG5cdFx0XHRcdFx0XHRcdFx0aSA9IG1hdGNoZWQubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZHggPSBpbmRleE9mKCBzZWVkLCBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHRcdFx0c2VlZFsgaWR4IF0gPSAhKCBtYXRjaGVzWyBpZHggXSA9IG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIGZuO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdHBzZXVkb3M6IHtcblx0XHRcdC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuXHRcdFx0XCJub3RcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdFx0Ly8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGVcblx0XHRcdFx0Ly8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcblx0XHRcdFx0Ly8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzXG5cdFx0XHRcdHZhciBpbnB1dCA9IFtdLFxuXHRcdFx0XHRcdHJlc3VsdHMgPSBbXSxcblx0XHRcdFx0XHRtYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApICk7XG5cdFxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cblx0XHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRcdGkgPSBzZWVkLmxlbmd0aDtcblx0XG5cdFx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0XHRpbnB1dFswXSA9IGVsZW07XG5cdFx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cdFx0XHRcdFx0XHQvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0XHRcdFx0aW5wdXRbMF0gPSBudWxsO1xuXHRcdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHRcImhhc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0XCJjb250YWluc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGVsZW0uaW5uZXJUZXh0IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0Ly8gXCJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yXG5cdFx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdFx0Ly8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQyxcblx0XHRcdC8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCItXCIuXG5cdFx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHRcdC8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuXCJcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG9cblx0XHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXHRcdFx0XHQvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG5cdFx0XHRcdGlmICggIXJpZGVudGlmaWVyLnRlc3QobGFuZyB8fCBcIlwiKSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW1MYW5nO1xuXHRcdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW1MYW5nID0gZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0XHRcdFx0XHRlbGVtLmxhbmcgOlxuXHRcdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRlbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgXCItXCIgKSA9PT0gMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IHdoaWxlICggKGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XHRcInRhcmdldFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJmb2N1c1wiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gQm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XHRcImVuYWJsZWRcIjogY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIGZhbHNlICksXG5cdFx0XHRcImRpc2FibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCB0cnVlICksXG5cdFxuXHRcdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHQvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcblx0XHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRyZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBDb250ZW50c1xuXHRcdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cblx0XHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0XHQvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG5cdFx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbXCJlbXB0eVwiXSggZWxlbSApO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0XHR9LFxuXHRcblx0XHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgYXR0cjtcblx0XHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdFx0ZWxlbS50eXBlID09PSBcInRleHRcIiAmJlxuXHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdFx0Ly8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sIFwic2VhcmNoXCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCJcblx0XHRcdFx0XHQoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gWyAwIF07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHRcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHRcdH0pLFxuXHRcblx0XHRcdFwiZXFcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRcdHZhciBpID0gMDtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRcdHZhciBpID0gMTtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0XCJsdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHRcdH0pXG5cdFx0fVxuXHR9O1xuXHRcblx0RXhwci5wc2V1ZG9zW1wibnRoXCJdID0gRXhwci5wc2V1ZG9zW1wiZXFcIl07XG5cdFxuXHQvLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuXHRmb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcblx0XHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7XG5cdH1cblx0Zm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcblx0XHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApO1xuXHR9XG5cdFxuXHQvLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcblx0ZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5cdHNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuXHRFeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXHRcblx0dG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcblx0XHR2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSxcblx0XHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0XHRjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cdFxuXHRcdGlmICggY2FjaGVkICkge1xuXHRcdFx0cmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcblx0XHR9XG5cdFxuXHRcdHNvRmFyID0gc2VsZWN0b3I7XG5cdFx0Z3JvdXBzID0gW107XG5cdFx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXHRcblx0XHR3aGlsZSAoIHNvRmFyICkge1xuXHRcblx0XHRcdC8vIENvbW1hIGFuZCBmaXJzdCBydW5cblx0XHRcdGlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHRcdC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG5cdFx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7XG5cdFx0XHRcdH1cblx0XHRcdFx0Z3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRtYXRjaGVkID0gZmFsc2U7XG5cdFxuXHRcdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRcdGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEZpbHRlcnNcblx0XHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRcdGlmICggKG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSkgJiYgKCFwcmVGaWx0ZXJzWyB0eXBlIF0gfHxcblx0XHRcdFx0XHQobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcblx0XHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0XHRtYXRjaGVzOiBtYXRjaFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoICFtYXRjaGVkICkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHRcdC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuXHRcdC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuXHRcdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdFx0c29GYXIubGVuZ3RoIDpcblx0XHRcdHNvRmFyID9cblx0XHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdFx0Ly8gQ2FjaGUgdGhlIHRva2Vuc1xuXHRcdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0c2VsZWN0b3IgKz0gdG9rZW5zW2ldLnZhbHVlO1xuXHRcdH1cblx0XHRyZXR1cm4gc2VsZWN0b3I7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdFx0dmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuXHRcdFx0c2tpcCA9IGNvbWJpbmF0b3IubmV4dCxcblx0XHRcdGtleSA9IHNraXAgfHwgZGlyLFxuXHRcdFx0Y2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYga2V5ID09PSBcInBhcmVudE5vZGVcIixcblx0XHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXHRcblx0XHRyZXR1cm4gY29tYmluYXRvci5maXJzdCA/XG5cdFx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IDpcblx0XG5cdFx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdHZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cdFxuXHRcdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmdcblx0XHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHwgKG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdGlmICggc2tpcCAmJiBza2lwID09PSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZWxlbSA9IGVsZW1bIGRpciBdIHx8IGVsZW07XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIChvbGRDYWNoZSA9IHVuaXF1ZUNhY2hlWyBrZXkgXSkgJiZcblx0XHRcdFx0XHRcdFx0XHRvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsga2V5IF0gPSBuZXdDYWNoZTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQSBtYXRjaCBtZWFucyB3ZSdyZSBkb25lOyBhIGZhaWwgbWVhbnMgd2UgaGF2ZSB0byBrZWVwIGNoZWNraW5nXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkge1xuXHRcdHJldHVybiBtYXRjaGVycy5sZW5ndGggPiAxID9cblx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdHZhciBpID0gbWF0Y2hlcnMubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSA6XG5cdFx0XHRtYXRjaGVyc1swXTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0bmV3VW5tYXRjaGVkID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsXG5cdFx0XHRtYXBwZWQgPSBtYXAgIT0gbnVsbDtcblx0XG5cdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0bmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRpZiAoIG1hcHBlZCApIHtcblx0XHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdFx0aWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRwb3N0RmlsdGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbHRlciApO1xuXHRcdH1cblx0XHRpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdHBvc3RGaW5kZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKTtcblx0XHR9XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIHRlbXAsIGksIGVsZW0sXG5cdFx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0XHRwb3N0TWFwID0gW10sXG5cdFx0XHRcdHByZWV4aXN0aW5nID0gcmVzdWx0cy5sZW5ndGgsXG5cdFxuXHRcdFx0XHQvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuXHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IgfHwgXCIqXCIsIGNvbnRleHQubm9kZVR5cGUgPyBbIGNvbnRleHQgXSA6IGNvbnRleHQsIFtdICksXG5cdFxuXHRcdFx0XHQvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cblx0XHRcdFx0bWF0Y2hlckluID0gcHJlRmlsdGVyICYmICggc2VlZCB8fCAhc2VsZWN0b3IgKSA/XG5cdFx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdGVsZW1zLFxuXHRcblx0XHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG5cdFx0XHRcdFx0cG9zdEZpbmRlciB8fCAoIHNlZWQgPyBwcmVGaWx0ZXIgOiBwcmVleGlzdGluZyB8fCBwb3N0RmlsdGVyICkgP1xuXHRcblx0XHRcdFx0XHRcdC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFx0W10gOlxuXHRcblx0XHRcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuXHRcdFx0XHRcdFx0cmVzdWx0cyA6XG5cdFx0XHRcdFx0bWF0Y2hlckluO1xuXHRcblx0XHRcdC8vIEZpbmQgcHJpbWFyeSBtYXRjaGVzXG5cdFx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRcdG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQXBwbHkgcG9zdEZpbHRlclxuXHRcdFx0aWYgKCBwb3N0RmlsdGVyICkge1xuXHRcdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdFx0cG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXHRcblx0XHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0XHRpID0gdGVtcC5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRcdG1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG5cdFx0XHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0XHR0ZW1wID0gW107XG5cdFx0XHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgbWF0Y2hlckluIHNpbmNlIGVsZW0gaXMgbm90IHlldCBhIGZpbmFsIG1hdGNoXG5cdFx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdFx0KHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkge1xuXHRcblx0XHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdC8vIEFkZCBlbGVtZW50cyB0byByZXN1bHRzLCB0aHJvdWdoIHBvc3RGaW5kZXIgaWYgZGVmaW5lZFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWF0Y2hlck91dCA9IGNvbmRlbnNlKFxuXHRcdFx0XHRcdG1hdGNoZXJPdXQgPT09IHJlc3VsdHMgP1xuXHRcdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRcdG1hdGNoZXJPdXRcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHRcdHZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosXG5cdFx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRcdGltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVtcIiBcIl0sXG5cdFx0XHRpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsXG5cdFxuXHRcdFx0Ly8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocylcblx0XHRcdG1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdFx0bWF0Y2hBbnlDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdFx0bWF0Y2hlcnMgPSBbIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHRcdChjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/XG5cdFx0XHRcdFx0XHRtYXRjaENvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApIDpcblx0XHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdFx0Ly8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdGNoZWNrQ29udGV4dCA9IG51bGw7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9IF07XG5cdFxuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0aWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuXHRcdFx0XHRtYXRjaGVycyA9IFsgYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwgbWF0Y2hlcikgXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTtcblx0XG5cdFx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRcdGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRcdC8vIEZpbmQgdGhlIG5leHQgcmVsYXRpdmUgb3BlcmF0b3IgKGlmIGFueSkgZm9yIHByb3BlciBoYW5kbGluZ1xuXHRcdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbIHRva2Vuc1tqXS50eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRcdGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuXHRcdFx0XHRcdFx0aSA+IDEgJiYgdG9TZWxlY3Rvcihcblx0XHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdFx0dG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gXCIgXCIgPyBcIipcIiA6IFwiXCIgfSlcblx0XHRcdFx0XHRcdCkucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApLFxuXHRcdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRcdGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuXHRcdFx0XHRcdFx0aiA8IGxlbiAmJiBtYXRjaGVyRnJvbVRva2VucyggKHRva2VucyA9IHRva2Vucy5zbGljZSggaiApKSApLFxuXHRcdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG5cdFx0dmFyIGJ5U2V0ID0gc2V0TWF0Y2hlcnMubGVuZ3RoID4gMCxcblx0XHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdFx0c3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHR2YXIgZWxlbSwgaiwgbWF0Y2hlcixcblx0XHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRcdGkgPSBcIjBcIixcblx0XHRcdFx0XHR1bm1hdGNoZWQgPSBzZWVkICYmIFtdLFxuXHRcdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0XHRjb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCxcblx0XHRcdFx0XHQvLyBXZSBtdXN0IGFsd2F5cyBoYXZlIGVpdGhlciBzZWVkIGVsZW1lbnRzIG9yIG91dGVybW9zdCBjb250ZXh0XG5cdFx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0XHQvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlclxuXHRcdFx0XHRcdGRpcnJ1bnNVbmlxdWUgPSAoZGlycnVucyArPSBjb250ZXh0QmFja3VwID09IG51bGwgPyAxIDogTWF0aC5yYW5kb20oKSB8fCAwLjEpLFxuXHRcdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblx0XG5cdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ID09PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU8OSwgU2FmYXJpXG5cdFx0XHRcdC8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiBcImxlbmd0aFwiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZFxuXHRcdFx0XHRmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcblx0XHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdFx0aWYgKCAhY29udGV4dCAmJiBlbGVtLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0XHRcdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHR4bWwgPSAhZG9jdW1lbnRJc0hUTUw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQgfHwgZG9jdW1lbnQsIHhtbCkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0XHRkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnNcblx0XHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdFx0Ly8gVGhleSB3aWxsIGhhdmUgZ29uZSB0aHJvdWdoIGFsbCBwb3NzaWJsZSBtYXRjaGVyc1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0XHRcdHVubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBgaWAgaXMgbm93IHRoZSBjb3VudCBvZiBlbGVtZW50cyB2aXNpdGVkIGFib3ZlLCBhbmQgYWRkaW5nIGl0IHRvIGBtYXRjaGVkQ291bnRgXG5cdFx0XHRcdC8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuXG5cdFx0XHRcdG1hdGNoZWRDb3VudCArPSBpO1xuXHRcblx0XHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHRcdC8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGBcblx0XHRcdFx0Ly8gZXF1YWxzIGBpYCksIHVubGVzcyB3ZSBkaWRuJ3QgdmlzaXQgX2FueV8gZWxlbWVudHMgaW4gdGhlIGFib3ZlIGxvb3AgYmVjYXVzZSB3ZSBoYXZlXG5cdFx0XHRcdC8vIG5vIGVsZW1lbnQgbWF0Y2hlcnMgYW5kIG5vIHNlZWQuXG5cdFx0XHRcdC8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nIFwiMFwiIGBpYCBhbGxvd3MgYGlgIHRvIHJlbWFpbiBhIHN0cmluZyBvbmx5IGluIHRoYXRcblx0XHRcdFx0Ly8gY2FzZSwgd2hpY2ggd2lsbCByZXN1bHQgaW4gYSBcIjAwXCIgYG1hdGNoZWRDb3VudGAgdGhhdCBkaWZmZXJzIGZyb20gYGlgIGJ1dCBpcyBhbHNvXG5cdFx0XHRcdC8vIG51bWVyaWNhbGx5IHplcm8uXG5cdFx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0XHQvLyBSZWludGVncmF0ZSBlbGVtZW50IG1hdGNoZXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciBzb3J0aW5nXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZWRDb3VudCA+IDAgKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggISh1bm1hdGNoZWRbaV0gfHwgc2V0TWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRNYXRjaGVkW2ldID0gcG9wLmNhbGwoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHQvLyBEaXNjYXJkIGluZGV4IHBsYWNlaG9sZGVyIHZhbHVlcyB0byBnZXQgb25seSBhY3R1YWwgbWF0Y2hlc1xuXHRcdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzXG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXHRcblx0XHRcdFx0XHQvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcblx0XHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHRcdCggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkge1xuXHRcblx0XHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBPdmVycmlkZSBtYW5pcHVsYXRpb24gb2YgZ2xvYmFscyBieSBuZXN0ZWQgbWF0Y2hlcnNcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHRCYWNrdXA7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiB1bm1hdGNoZWQ7XG5cdFx0XHR9O1xuXHRcblx0XHRyZXR1cm4gYnlTZXQgP1xuXHRcdFx0bWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG5cdFx0XHRzdXBlck1hdGNoZXI7XG5cdH1cblx0XG5cdGNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdFx0dmFyIGksXG5cdFx0XHRzZXRNYXRjaGVycyA9IFtdLFxuXHRcdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cdFxuXHRcdGlmICggIWNhY2hlZCApIHtcblx0XHRcdC8vIEdlbmVyYXRlIGEgZnVuY3Rpb24gb2YgcmVjdXJzaXZlIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNoZWNrIGVhY2ggZWxlbWVudFxuXHRcdFx0aWYgKCAhbWF0Y2ggKSB7XG5cdFx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cdFx0XHRpID0gbWF0Y2gubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGNhY2hlZCA9IG1hdGNoZXJGcm9tVG9rZW5zKCBtYXRjaFtpXSApO1xuXHRcdFx0XHRpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZSggc2VsZWN0b3IsIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApICk7XG5cdFxuXHRcdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0XHRjYWNoZWQuc2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlZDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBIGxvdy1sZXZlbCBzZWxlY3Rpb24gZnVuY3Rpb24gdGhhdCB3b3JrcyB3aXRoIFNpenpsZSdzIGNvbXBpbGVkXG5cdCAqICBzZWxlY3RvciBmdW5jdGlvbnNcblx0ICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcblx0ICogIHNlbGVjdG9yIGZ1bmN0aW9uIGJ1aWx0IHdpdGggU2l6emxlLmNvbXBpbGVcblx0ICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0XG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuXHQgKiBAcGFyYW0ge0FycmF5fSBbc2VlZF0gQSBzZXQgb2YgZWxlbWVudHMgdG8gbWF0Y2ggYWdhaW5zdFxuXHQgKi9cblx0c2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0XHR2YXIgaSwgdG9rZW5zLCB0b2tlbiwgdHlwZSwgZmluZCxcblx0XHRcdGNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgc2VsZWN0b3IsXG5cdFx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblx0XG5cdFx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cdFxuXHRcdC8vIFRyeSB0byBtaW5pbWl6ZSBvcGVyYXRpb25zIGlmIHRoZXJlIGlzIG9ubHkgb25lIHNlbGVjdG9yIGluIHRoZSBsaXN0IGFuZCBubyBzZWVkXG5cdFx0Ly8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KVxuXHRcdGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXHRcblx0XHRcdC8vIFJlZHVjZSBjb250ZXh0IGlmIHRoZSBsZWFkaW5nIGNvbXBvdW5kIHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0XHR0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7XG5cdFx0XHRpZiAoIHRva2Vucy5sZW5ndGggPiAyICYmICh0b2tlbiA9IHRva2Vuc1swXSkudHlwZSA9PT0gXCJJRFwiICYmXG5cdFx0XHRcdFx0c3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHRcdFx0XHRFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXHRcblx0XHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuXHRcdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcblx0XHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBjb21waWxlZCApIHtcblx0XHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0XHRpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblx0XG5cdFx0XHRcdC8vIEFib3J0IGlmIHdlIGhpdCBhIGNvbWJpbmF0b3Jcblx0XHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHtcblx0XHRcdFx0XHQvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcblx0XHRcdFx0XHRpZiAoIChzZWVkID0gZmluZChcblx0XHRcdFx0XHRcdHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRcdHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHRcdFx0XHQpKSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHRcdHRva2Vucy5zcGxpY2UoIGksIDEgKTtcblx0XHRcdFx0XHRcdHNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7XG5cdFx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2VlZCApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuXHRcdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0XHQoIGNvbXBpbGVkIHx8IGNvbXBpbGUoIHNlbGVjdG9yLCBtYXRjaCApICkoXG5cdFx0XHRzZWVkLFxuXHRcdFx0Y29udGV4dCxcblx0XHRcdCFkb2N1bWVudElzSFRNTCxcblx0XHRcdHJlc3VsdHMsXG5cdFx0XHQhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fTtcblx0XG5cdC8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cdFxuXHQvLyBTb3J0IHN0YWJpbGl0eVxuXHRzdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KFwiXCIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oXCJcIikgPT09IGV4cGFuZG87XG5cdFxuXHQvLyBTdXBwb3J0OiBDaHJvbWUgMTQtMzUrXG5cdC8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cblx0c3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cdFxuXHQvLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcblx0c2V0RG9jdW1lbnQoKTtcblx0XG5cdC8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG5cdC8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuXHRzdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0Ly8gU2hvdWxkIHJldHVybiAxLCBidXQgcmV0dXJucyA0IChmb2xsb3dpbmcpXG5cdFx0cmV0dXJuIGVsLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIikgKSAmIDE7XG5cdH0pO1xuXHRcblx0Ly8gU3VwcG9ydDogSUU8OFxuXHQvLyBQcmV2ZW50IGF0dHJpYnV0ZS9wcm9wZXJ0eSBcImludGVycG9sYXRpb25cIlxuXHQvLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM2NDI5JTI4VlMuODUlMjkuYXNweFxuXHRpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmlubmVySFRNTCA9IFwiPGEgaHJlZj0nIyc+PC9hPlwiO1xuXHRcdHJldHVybiBlbC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiIDtcblx0fSkgKSB7XG5cdFx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0XG5cdC8vIFN1cHBvcnQ6IElFPDlcblx0Ly8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuXHRpZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZWwuaW5uZXJIVE1MID0gXCI8aW5wdXQvPlwiO1xuXHRcdGVsLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0XHRyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xuXHR9KSApIHtcblx0XHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdFx0aWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmRlZmF1bHRWYWx1ZTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRcblx0Ly8gU3VwcG9ydDogSUU8OVxuXHQvLyBVc2UgZ2V0QXR0cmlidXRlTm9kZSB0byBmZXRjaCBib29sZWFucyB3aGVuIGdldEF0dHJpYnV0ZSBsaWVzXG5cdGlmICggIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0cmV0dXJuIGVsLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG5cdH0pICkge1xuXHRcdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRcdHZhciB2YWw7XG5cdFx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0XHRudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRyZXR1cm4gU2l6emxlO1xuXHRcblx0fSkoIHdpbmRvdyApO1xuXHRcblx0XG5cdFxuXHRqUXVlcnkuZmluZCA9IFNpenpsZTtcblx0alF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xuXHRcblx0Ly8gRGVwcmVjYXRlZFxuXHRqUXVlcnkuZXhwclsgXCI6XCIgXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5cdGpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xuXHRqUXVlcnkudGV4dCA9IFNpenpsZS5nZXRUZXh0O1xuXHRqUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5cdGpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblx0alF1ZXJ5LmVzY2FwZVNlbGVjdG9yID0gU2l6emxlLmVzY2FwZTtcblx0XG5cdFxuXHRcblx0XG5cdHZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IFtdLFxuXHRcdFx0dHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkO1xuXHRcblx0XHR3aGlsZSAoICggZWxlbSA9IGVsZW1bIGRpciBdICkgJiYgZWxlbS5ub2RlVHlwZSAhPT0gOSApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0aWYgKCB0cnVuY2F0ZSAmJiBqUXVlcnkoIGVsZW0gKS5pcyggdW50aWwgKSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRtYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG1hdGNoZWQ7XG5cdH07XG5cdFxuXHRcblx0dmFyIHNpYmxpbmdzID0gZnVuY3Rpb24oIG4sIGVsZW0gKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBbXTtcblx0XG5cdFx0Zm9yICggOyBuOyBuID0gbi5uZXh0U2libGluZyApIHtcblx0XHRcdGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuXHRcdFx0XHRtYXRjaGVkLnB1c2goIG4gKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9O1xuXHRcblx0XG5cdHZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXHRcblx0dmFyIHJzaW5nbGVUYWcgPSAoIC9ePChbYS16XVteXFwvXFwwPjpcXHgyMFxcdFxcclxcblxcZl0qKVtcXHgyMFxcdFxcclxcblxcZl0qXFwvPz4oPzo8XFwvXFwxPnwpJC9pICk7XG5cdFxuXHRcblx0XG5cdHZhciByaXNTaW1wbGUgPSAvXi5bXjojXFxbXFwuLF0qJC87XG5cdFxuXHQvLyBJbXBsZW1lbnQgdGhlIGlkZW50aWNhbCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXIgYW5kIG5vdFxuXHRmdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0XHRyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7XG5cdFx0XHR9ICk7XG5cdFxuXHRcdH1cblx0XG5cdFx0aWYgKCBxdWFsaWZpZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDtcblx0XHRcdH0gKTtcblx0XG5cdFx0fVxuXHRcblx0XHRpZiAoIHR5cGVvZiBxdWFsaWZpZXIgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMsIG5vdCApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHF1YWxpZmllciA9IGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMgKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+IC0xICkgIT09IG5vdCAmJiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHRcdH0gKTtcblx0fVxuXHRcblx0alF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHRcdHZhciBlbGVtID0gZWxlbXNbIDAgXTtcblx0XG5cdFx0aWYgKCBub3QgKSB7XG5cdFx0XHRleHByID0gXCI6bm90KFwiICsgZXhwciArIFwiKVwiO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxID9cblx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXSA6XG5cdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTtcblx0XHRcdH0gKSApO1xuXHR9O1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHZhciBpLCByZXQsXG5cdFx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0XHRzZWxmID0gdGhpcztcblx0XG5cdFx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBbXSApO1xuXHRcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gbGVuID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCByZXQgKSA6IHJldDtcblx0XHR9LFxuXHRcdGZpbHRlcjogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSApICk7XG5cdFx0fSxcblx0XHRub3Q6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSApICk7XG5cdFx0fSxcblx0XHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuICEhd2lubm93KFxuXHRcdFx0XHR0aGlzLFxuXHRcblx0XHRcdFx0Ly8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldFxuXHRcdFx0XHQvLyBzbyAkKFwicDpmaXJzdFwiKS5pcyhcInA6bGFzdFwiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gXCJwXCIuXG5cdFx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggc2VsZWN0b3IgKSA6XG5cdFx0XHRcdFx0c2VsZWN0b3IgfHwgW10sXG5cdFx0XHRcdGZhbHNlXG5cdFx0XHQpLmxlbmd0aDtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHQvLyBJbml0aWFsaXplIGEgalF1ZXJ5IG9iamVjdFxuXHRcblx0XG5cdC8vIEEgY2VudHJhbCByZWZlcmVuY2UgdG8gdGhlIHJvb3QgalF1ZXJ5KGRvY3VtZW50KVxuXHR2YXIgcm9vdGpRdWVyeSxcblx0XG5cdFx0Ly8gQSBzaW1wbGUgd2F5IHRvIGNoZWNrIGZvciBIVE1MIHN0cmluZ3Ncblx0XHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdFx0Ly8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpXG5cdFx0Ly8gU2hvcnRjdXQgc2ltcGxlICNpZCBjYXNlIGZvciBzcGVlZFxuXHRcdHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0rKSkkLyxcblx0XG5cdFx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByb290ICkge1xuXHRcdFx0dmFyIG1hdGNoLCBlbGVtO1xuXHRcblx0XHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE1ldGhvZCBpbml0KCkgYWNjZXB0cyBhbiBhbHRlcm5hdGUgcm9vdGpRdWVyeVxuXHRcdFx0Ly8gc28gbWlncmF0ZSBjYW4gc3VwcG9ydCBqUXVlcnkuc3ViIChnaC0yMTAxKVxuXHRcdFx0cm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTtcblx0XG5cdFx0XHQvLyBIYW5kbGUgSFRNTCBzdHJpbmdzXG5cdFx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0aWYgKCBzZWxlY3RvclsgMCBdID09PSBcIjxcIiAmJlxuXHRcdFx0XHRcdHNlbGVjdG9yWyBzZWxlY3Rvci5sZW5ndGggLSAxIF0gPT09IFwiPlwiICYmXG5cdFx0XHRcdFx0c2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdFx0bWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG5cdFx0XHRcdGlmICggbWF0Y2ggJiYgKCBtYXRjaFsgMSBdIHx8ICFjb250ZXh0ICkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRcdGlmICggbWF0Y2hbIDEgXSApIHtcblx0XHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFsgMCBdIDogY29udGV4dDtcblx0XG5cdFx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHRcdC8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoXG5cdFx0XHRcdFx0XHRcdG1hdGNoWyAxIF0sXG5cdFx0XHRcdFx0XHRcdGNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsXG5cdFx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHRcdCkgKTtcblx0XG5cdFx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0XHRpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7XG5cdFx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzWyBtYXRjaCBdKCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBJbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuXHRcdFx0XHRcdFx0XHR0aGlzWyAwIF0gPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgJCguLi4pKVxuXHRcdFx0XHR9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHtcblx0XHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3QgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcblx0XHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG5cdFx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdC8vIEhBTkRMRTogJChET01FbGVtZW50KVxuXHRcdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHRcdHRoaXNbIDAgXSA9IHNlbGVjdG9yO1xuXHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcblx0XHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHRcdC8vIFNob3J0Y3V0IGZvciBkb2N1bWVudCByZWFkeVxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7XG5cdFx0XHRcdHJldHVybiByb290LnJlYWR5ICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRcdHJvb3QucmVhZHkoIHNlbGVjdG9yICkgOlxuXHRcblx0XHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0c2VsZWN0b3IoIGpRdWVyeSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHRcdH07XG5cdFxuXHQvLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5cdGluaXQucHJvdG90eXBlID0galF1ZXJ5LmZuO1xuXHRcblx0Ly8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxuXHRyb290alF1ZXJ5ID0galF1ZXJ5KCBkb2N1bWVudCApO1xuXHRcblx0XG5cdHZhciBycGFyZW50c3ByZXYgPSAvXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxcblx0XG5cdFx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0XHRndWFyYW50ZWVkVW5pcXVlID0ge1xuXHRcdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRcdG5leHQ6IHRydWUsXG5cdFx0XHRwcmV2OiB0cnVlXG5cdFx0fTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRcdGwgPSB0YXJnZXRzLmxlbmd0aDtcblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggdGhpcywgdGFyZ2V0c1sgaSBdICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9LFxuXHRcblx0XHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIGN1cixcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHR0YXJnZXRzID0gdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiAmJiBqUXVlcnkoIHNlbGVjdG9ycyApO1xuXHRcblx0XHRcdC8vIFBvc2l0aW9uYWwgc2VsZWN0b3JzIG5ldmVyIG1hdGNoLCBzaW5jZSB0aGVyZSdzIG5vIF9zZWxlY3Rpb25fIGNvbnRleHRcblx0XHRcdGlmICggIXJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgKSB7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRmb3IgKCBjdXIgPSB0aGlzWyBpIF07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIEFsd2F5cyBza2lwIGRvY3VtZW50IGZyYWdtZW50c1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHRhcmdldHMgP1xuXHRcdFx0XHRcdFx0XHR0YXJnZXRzLmluZGV4KCBjdXIgKSA+IC0xIDpcblx0XG5cdFx0XHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdFx0XHRjdXIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGN1ciwgc2VsZWN0b3JzICkgKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdG1hdGNoZWQucHVzaCggY3VyICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKSA6IG1hdGNoZWQgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgd2l0aGluIHRoZSBzZXRcblx0XHRpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFxuXHRcdFx0Ly8gTm8gYXJndW1lbnQsIHJldHVybiBpbmRleCBpbiBwYXJlbnRcblx0XHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdFx0aWYgKCB0eXBlb2YgZWxlbSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggalF1ZXJ5KCBlbGVtICksIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuXHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblx0XG5cdFx0XHRcdC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuXHRcdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHRcdCk7XG5cdFx0fSxcblx0XG5cdFx0YWRkOiBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soXG5cdFx0XHRcdGpRdWVyeS51bmlxdWVTb3J0KFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdFx0KVxuXHRcdFx0KTtcblx0XHR9LFxuXHRcblx0XHRhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXG5cdFx0XHQpO1xuXHRcdH1cblx0fSApO1xuXHRcblx0ZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdFx0d2hpbGUgKCAoIGN1ciA9IGN1clsgZGlyIF0gKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRcdHJldHVybiBjdXI7XG5cdH1cblx0XG5cdGpRdWVyeS5lYWNoKCB7XG5cdFx0cGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHRcdH0sXG5cdFx0cGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiApO1xuXHRcdH0sXG5cdFx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiwgdW50aWwgKTtcblx0XHR9LFxuXHRcdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuXHRcdH0sXG5cdFx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHRcdH0sXG5cdFx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0XHR9LFxuXHRcdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHRcdH0sXG5cdFx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIsIHVudGlsICk7XG5cdFx0fSxcblx0XHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdFx0fSxcblx0XHRzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gc2libGluZ3MoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHRcdH0sXG5cdFx0Y2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmdzKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0XHR9LFxuXHRcdGNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudCB8fCBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0XHR9XG5cdH0sIGZ1bmN0aW9uKCBuYW1lLCBmbiApIHtcblx0XHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0XHR2YXIgbWF0Y2hlZCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApO1xuXHRcblx0XHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0XHRzZWxlY3RvciA9IHVudGlsO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRtYXRjaGVkID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIG1hdGNoZWQgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHRoaXMubGVuZ3RoID4gMSApIHtcblx0XG5cdFx0XHRcdC8vIFJlbW92ZSBkdXBsaWNhdGVzXG5cdFx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0XHRqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0XHRpZiAoIHJwYXJlbnRzcHJldi50ZXN0KCBuYW1lICkgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlZC5yZXZlcnNlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0XHR9O1xuXHR9ICk7XG5cdHZhciBybm90d2hpdGUgPSAoIC9cXFMrL2cgKTtcblx0XG5cdFxuXHRcblx0Ly8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXNcblx0ZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIHtcblx0XHR2YXIgb2JqZWN0ID0ge307XG5cdFx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0XHR9ICk7XG5cdFx0cmV0dXJuIG9iamVjdDtcblx0fVxuXHRcblx0Lypcblx0ICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG5cdCAqXG5cdCAqXHRvcHRpb25zOiBhbiBvcHRpb25hbCBsaXN0IG9mIHNwYWNlLXNlcGFyYXRlZCBvcHRpb25zIHRoYXQgd2lsbCBjaGFuZ2UgaG93XG5cdCAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuXHQgKlxuXHQgKiBCeSBkZWZhdWx0IGEgY2FsbGJhY2sgbGlzdCB3aWxsIGFjdCBsaWtlIGFuIGV2ZW50IGNhbGxiYWNrIGxpc3QgYW5kIGNhbiBiZVxuXHQgKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG5cdCAqXG5cdCAqIFBvc3NpYmxlIG9wdGlvbnM6XG5cdCAqXG5cdCAqXHRvbmNlOlx0XHRcdHdpbGwgZW5zdXJlIHRoZSBjYWxsYmFjayBsaXN0IGNhbiBvbmx5IGJlIGZpcmVkIG9uY2UgKGxpa2UgYSBEZWZlcnJlZClcblx0ICpcblx0ICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG5cdCAqXHRcdFx0XHRcdGFmdGVyIHRoZSBsaXN0IGhhcyBiZWVuIGZpcmVkIHJpZ2h0IGF3YXkgd2l0aCB0aGUgbGF0ZXN0IFwibWVtb3JpemVkXCJcblx0ICpcdFx0XHRcdFx0dmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpXG5cdCAqXG5cdCAqXHR1bmlxdWU6XHRcdFx0d2lsbCBlbnN1cmUgYSBjYWxsYmFjayBjYW4gb25seSBiZSBhZGRlZCBvbmNlIChubyBkdXBsaWNhdGUgaW4gdGhlIGxpc3QpXG5cdCAqXG5cdCAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuXHQgKlxuXHQgKi9cblx0alF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcblx0XHQvLyBDb252ZXJ0IG9wdGlvbnMgZnJvbSBTdHJpbmctZm9ybWF0dGVkIHRvIE9iamVjdC1mb3JtYXR0ZWQgaWYgbmVlZGVkXG5cdFx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRcdG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRjcmVhdGVPcHRpb25zKCBvcHRpb25zICkgOlxuXHRcdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblx0XG5cdFx0dmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmdcblx0XHRcdGZpcmluZyxcblx0XG5cdFx0XHQvLyBMYXN0IGZpcmUgdmFsdWUgZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0c1xuXHRcdFx0bWVtb3J5LFxuXHRcblx0XHRcdC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IHdhcyBhbHJlYWR5IGZpcmVkXG5cdFx0XHRmaXJlZCxcblx0XG5cdFx0XHQvLyBGbGFnIHRvIHByZXZlbnQgZmlyaW5nXG5cdFx0XHRsb2NrZWQsXG5cdFxuXHRcdFx0Ly8gQWN0dWFsIGNhbGxiYWNrIGxpc3Rcblx0XHRcdGxpc3QgPSBbXSxcblx0XG5cdFx0XHQvLyBRdWV1ZSBvZiBleGVjdXRpb24gZGF0YSBmb3IgcmVwZWF0YWJsZSBsaXN0c1xuXHRcdFx0cXVldWUgPSBbXSxcblx0XG5cdFx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSBhZGQvcmVtb3ZlIGFzIG5lZWRlZClcblx0XHRcdGZpcmluZ0luZGV4ID0gLTEsXG5cdFxuXHRcdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRcdGZpcmUgPSBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdC8vIEVuZm9yY2Ugc2luZ2xlLWZpcmluZ1xuXHRcdFx0XHRsb2NrZWQgPSBvcHRpb25zLm9uY2U7XG5cdFxuXHRcdFx0XHQvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucyxcblx0XHRcdFx0Ly8gcmVzcGVjdGluZyBmaXJpbmdJbmRleCBvdmVycmlkZXMgYW5kIHJ1bnRpbWUgY2hhbmdlc1xuXHRcdFx0XHRmaXJlZCA9IGZpcmluZyA9IHRydWU7XG5cdFx0XHRcdGZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkge1xuXHRcdFx0XHRcdG1lbW9yeSA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdFx0d2hpbGUgKCArK2ZpcmluZ0luZGV4IDwgbGlzdC5sZW5ndGggKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gUnVuIGNhbGxiYWNrIGFuZCBjaGVjayBmb3IgZWFybHkgdGVybWluYXRpb25cblx0XHRcdFx0XHRcdGlmICggbGlzdFsgZmlyaW5nSW5kZXggXS5hcHBseSggbWVtb3J5WyAwIF0sIG1lbW9yeVsgMSBdICkgPT09IGZhbHNlICYmXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBKdW1wIHRvIGVuZCBhbmQgZm9yZ2V0IHRoZSBkYXRhIHNvIC5hZGQgZG9lc24ndCByZS1maXJlXG5cdFx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdFxuXHRcdFx0XHRpZiAoICFvcHRpb25zLm1lbW9yeSApIHtcblx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0ZmlyaW5nID0gZmFsc2U7XG5cdFxuXHRcdFx0XHQvLyBDbGVhbiB1cCBpZiB3ZSdyZSBkb25lIGZpcmluZyBmb3IgZ29vZFxuXHRcdFx0XHRpZiAoIGxvY2tlZCApIHtcblx0XG5cdFx0XHRcdFx0Ly8gS2VlcCBhbiBlbXB0eSBsaXN0IGlmIHdlIGhhdmUgZGF0YSBmb3IgZnV0dXJlIGFkZCBjYWxsc1xuXHRcdFx0XHRcdGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIHRoaXMgb2JqZWN0IGlzIHNwZW50XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGxpc3QgPSBcIlwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdFx0c2VsZiA9IHtcblx0XG5cdFx0XHRcdC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3Rcblx0XHRcdFx0YWRkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmdcblx0XHRcdFx0XHRcdGlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBtZW1vcnkgKTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHQoIGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3MsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYXJnICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsaXN0LnB1c2goIGFyZyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIGpRdWVyeS50eXBlKCBhcmcgKSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJbnNwZWN0IHJlY3Vyc2l2ZWx5XG5cdFx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fSApKCBhcmd1bWVudHMgKTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0Ly8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdFxuXHRcdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0XHR2YXIgaW5kZXg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoICggaW5kZXggPSBqUXVlcnkuaW5BcnJheSggYXJnLCBsaXN0LCBpbmRleCApICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgZmlyaW5nIGluZGV4ZXNcblx0XHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHtcblx0XHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgYSBnaXZlbiBjYWxsYmFjayBpcyBpbiB0aGUgbGlzdC5cblx0XHRcdFx0Ly8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuXG5cdFx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRcdHJldHVybiBmbiA/XG5cdFx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDpcblx0XHRcdFx0XHRcdGxpc3QubGVuZ3RoID4gMDtcblx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdC8vIFJlbW92ZSBhbGwgY2FsbGJhY2tzIGZyb20gdGhlIGxpc3Rcblx0XHRcdFx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHQvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkXG5cdFx0XHRcdC8vIEFib3J0IGFueSBjdXJyZW50L3BlbmRpbmcgZXhlY3V0aW9uc1xuXHRcdFx0XHQvLyBDbGVhciBhbGwgY2FsbGJhY2tzIGFuZCB2YWx1ZXNcblx0XHRcdFx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0XHRsaXN0ID0gbWVtb3J5ID0gXCJcIjtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiAhbGlzdDtcblx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdC8vIERpc2FibGUgLmZpcmVcblx0XHRcdFx0Ly8gQWxzbyBkaXNhYmxlIC5hZGQgdW5sZXNzIHdlIGhhdmUgbWVtb3J5IChzaW5jZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdClcblx0XHRcdFx0Ly8gQWJvcnQgYW55IHBlbmRpbmcgZXhlY3V0aW9uc1xuXHRcdFx0XHRsb2NrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRsb2NrZWQgPSBxdWV1ZSA9IFtdO1xuXHRcdFx0XHRcdGlmICggIW1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRsb2NrZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiAhIWxvY2tlZDtcblx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdC8vIENhbGwgYWxsIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBjb250ZXh0IGFuZCBhcmd1bWVudHNcblx0XHRcdFx0ZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkge1xuXHRcdFx0XHRcdGlmICggIWxvY2tlZCApIHtcblx0XHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdFx0YXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTtcblx0XHRcdFx0XHRcdHF1ZXVlLnB1c2goIGFyZ3MgKTtcblx0XHRcdFx0XHRcdGlmICggIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdC8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzXG5cdFx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuZmlyZVdpdGgoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRcdGZpcmVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gISFmaXJlZDtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XG5cdFx0cmV0dXJuIHNlbGY7XG5cdH07XG5cdFxuXHRcblx0ZnVuY3Rpb24gSWRlbnRpdHkoIHYgKSB7XG5cdFx0cmV0dXJuIHY7XG5cdH1cblx0ZnVuY3Rpb24gVGhyb3dlciggZXggKSB7XG5cdFx0dGhyb3cgZXg7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkb3B0VmFsdWUoIHZhbHVlLCByZXNvbHZlLCByZWplY3QgKSB7XG5cdFx0dmFyIG1ldGhvZDtcblx0XG5cdFx0dHJ5IHtcblx0XG5cdFx0XHQvLyBDaGVjayBmb3IgcHJvbWlzZSBhc3BlY3QgZmlyc3QgdG8gcHJpdmlsZWdlIHN5bmNocm9ub3VzIGJlaGF2aW9yXG5cdFx0XHRpZiAoIHZhbHVlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCAoIG1ldGhvZCA9IHZhbHVlLnByb21pc2UgKSApICkge1xuXHRcdFx0XHRtZXRob2QuY2FsbCggdmFsdWUgKS5kb25lKCByZXNvbHZlICkuZmFpbCggcmVqZWN0ICk7XG5cdFxuXHRcdFx0Ly8gT3RoZXIgdGhlbmFibGVzXG5cdFx0XHR9IGVsc2UgaWYgKCB2YWx1ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS50aGVuICkgKSApIHtcblx0XHRcdFx0bWV0aG9kLmNhbGwoIHZhbHVlLCByZXNvbHZlLCByZWplY3QgKTtcblx0XG5cdFx0XHQvLyBPdGhlciBub24tdGhlbmFibGVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgb25seVxuXHRcdFx0XHQvLyBTdHJpY3QgbW9kZSBmdW5jdGlvbnMgaW52b2tlZCB3aXRob3V0IC5jYWxsLy5hcHBseSBnZXQgZ2xvYmFsLW9iamVjdCBjb250ZXh0XG5cdFx0XHRcdHJlc29sdmUuY2FsbCggdW5kZWZpbmVkLCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcblx0XHQvLyBGb3IgUHJvbWlzZXMvQSssIGNvbnZlcnQgZXhjZXB0aW9ucyBpbnRvIHJlamVjdGlvbnNcblx0XHQvLyBTaW5jZSBqUXVlcnkud2hlbiBkb2Vzbid0IHVud3JhcCB0aGVuYWJsZXMsIHdlIGNhbiBza2lwIHRoZSBleHRyYSBjaGVja3MgYXBwZWFyaW5nIGluXG5cdFx0Ly8gRGVmZXJyZWQjdGhlbiB0byBjb25kaXRpb25hbGx5IHN1cHByZXNzIHJlamVjdGlvbi5cblx0XHR9IGNhdGNoICggdmFsdWUgKSB7XG5cdFxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgb25seVxuXHRcdFx0Ly8gU3RyaWN0IG1vZGUgZnVuY3Rpb25zIGludm9rZWQgd2l0aG91dCAuY2FsbC8uYXBwbHkgZ2V0IGdsb2JhbC1vYmplY3QgY29udGV4dFxuXHRcdFx0cmVqZWN0LmNhbGwoIHVuZGVmaW5lZCwgdmFsdWUgKTtcblx0XHR9XG5cdH1cblx0XG5cdGpRdWVyeS5leHRlbmQoIHtcblx0XG5cdFx0RGVmZXJyZWQ6IGZ1bmN0aW9uKCBmdW5jICkge1xuXHRcdFx0dmFyIHR1cGxlcyA9IFtcblx0XG5cdFx0XHRcdFx0Ly8gYWN0aW9uLCBhZGQgbGlzdGVuZXIsIGNhbGxiYWNrcyxcblx0XHRcdFx0XHQvLyAuLi4gLnRoZW4gaGFuZGxlcnMsIGFyZ3VtZW50IGluZGV4LCBbZmluYWwgc3RhdGVdXG5cdFx0XHRcdFx0WyBcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwibWVtb3J5XCIgKSxcblx0XHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwibWVtb3J5XCIgKSwgMiBdLFxuXHRcdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAwLCBcInJlc29sdmVkXCIgXSxcblx0XHRcdFx0XHRbIFwicmVqZWN0XCIsIFwiZmFpbFwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAxLCBcInJlamVjdGVkXCIgXVxuXHRcdFx0XHRdLFxuXHRcdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRcdHN0YXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGFsd2F5czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XCJjYXRjaFwiOiBmdW5jdGlvbiggZm4gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS50aGVuKCBudWxsLCBmbiApO1xuXHRcdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHRwaXBlOiBmdW5jdGlvbiggLyogZm5Eb25lLCBmbkZhaWwsIGZuUHJvZ3Jlc3MgKi8gKSB7XG5cdFx0XHRcdFx0XHR2YXIgZm5zID0gYXJndW1lbnRzO1xuXHRcblx0XHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBNYXAgdHVwbGVzIChwcm9ncmVzcywgZG9uZSwgZmFpbCkgdG8gYXJndW1lbnRzIChkb25lLCBmYWlsLCBwcm9ncmVzcylcblx0XHRcdFx0XHRcdFx0XHR2YXIgZm4gPSBqUXVlcnkuaXNGdW5jdGlvbiggZm5zWyB0dXBsZVsgNCBdIF0gKSAmJiBmbnNbIHR1cGxlWyA0IF0gXTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQucHJvZ3Jlc3MoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIubm90aWZ5IH0pXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQuZG9uZShmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZXNvbHZlIH0pXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQuZmFpbChmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZWplY3QgfSlcblx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDEgXSBdKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuZmFpbCggbmV3RGVmZXIucmVqZWN0ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50c1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0XHRmbnMgPSBudWxsO1xuXHRcdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRoZW46IGZ1bmN0aW9uKCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgb25Qcm9ncmVzcyApIHtcblx0XHRcdFx0XHRcdHZhciBtYXhEZXB0aCA9IDA7XG5cdFx0XHRcdFx0XHRmdW5jdGlvbiByZXNvbHZlKCBkZXB0aCwgZGVmZXJyZWQsIGhhbmRsZXIsIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0XHRhcmdzID0gYXJndW1lbnRzLFxuXHRcdFx0XHRcdFx0XHRcdFx0bWlnaHRUaHJvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQsIHRoZW47XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuM1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01OVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgZG91YmxlLXJlc29sdXRpb24gYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBkZXB0aCA8IG1heERlcHRoICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQgPSBoYW5kbGVyLmFwcGx5KCB0aGF0LCBhcmdzICk7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4xXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTQ4XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgPT09IGRlZmVycmVkLnByb21pc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCBcIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvblwiICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb25zIDIuMy4zLjEsIDMuNVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01NFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC03NVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBSZXRyaWV2ZSBgdGhlbmAgb25seSBvbmNlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoZW4gPSByZXR1cm5lZCAmJlxuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy40XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IGNoZWNrIG9iamVjdHMgYW5kIGZ1bmN0aW9ucyBmb3IgdGhlbmFiaWxpdHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQoIHR5cGVvZiByZXR1cm5lZCA9PT0gXCJvYmplY3RcIiB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHJldHVybmVkID09PSBcImZ1bmN0aW9uXCIgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnRoZW47XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgYSByZXR1cm5lZCB0aGVuYWJsZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGVuICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFNwZWNpYWwgcHJvY2Vzc29ycyAobm90aWZ5KSBqdXN0IHdhaXQgZm9yIHJlc29sdXRpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGVuLmNhbGwoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgVGhyb3dlciwgc3BlY2lhbCApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBOb3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgYWxzbyBob29rIGludG8gcHJvZ3Jlc3Ncblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBkaXNyZWdhcmQgb2xkZXIgcmVzb2x1dGlvbiB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1heERlcHRoKys7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGFsbCBvdGhlciByZXR1cm5lZCB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGFuZCBtdWx0aXBsZSB2YWx1ZXMgKG5vbi1zcGVjIGJlaGF2aW9yKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gSWRlbnRpdHkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGF0ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJncyA9IFsgcmV0dXJuZWQgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFByb2Nlc3MgdGhlIHZhbHVlKHMpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCBwcm9jZXNzIGlzIHJlc29sdmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQoIHNwZWNpYWwgfHwgZGVmZXJyZWQucmVzb2x2ZVdpdGggKSggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgbm9ybWFsIHByb2Nlc3NvcnMgKHJlc29sdmUpIGNhdGNoIGFuZCByZWplY3QgZXhjZXB0aW9uc1xuXHRcdFx0XHRcdFx0XHRcdFx0cHJvY2VzcyA9IHNwZWNpYWwgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93IDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3coKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayggZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuNC4xXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02MVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWdub3JlIHBvc3QtcmVzb2x1dGlvbiBleGNlcHRpb25zXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoICsgMSA+PSBtYXhEZXB0aCApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgc3Vic3RpdHV0ZSBoYW5kbGVycyBwYXNzIG9uIGNvbnRleHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gVGhyb3dlciApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGF0ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIGUgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjFcblx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01N1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlc29sdmUgcHJvbWlzZXMgaW1tZWRpYXRlbHkgdG8gZG9kZ2UgZmFsc2UgcmVqZWN0aW9uIGZyb21cblx0XHRcdFx0XHRcdFx0XHQvLyBzdWJzZXF1ZW50IGVycm9yc1xuXHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBDYWxsIGFuIG9wdGlvbmFsIGhvb2sgdG8gcmVjb3JkIHRoZSBzdGFjaywgaW4gY2FzZSBvZiBleGNlcHRpb25cblx0XHRcdFx0XHRcdFx0XHRcdC8vIHNpbmNlIGl0J3Mgb3RoZXJ3aXNlIGxvc3Qgd2hlbiBleGVjdXRpb24gZ29lcyBhc3luY1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgPSBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggcHJvY2VzcyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHRcdHR1cGxlc1sgMCBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggb25Qcm9ncmVzcyApID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0b25Qcm9ncmVzcyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIubm90aWZ5V2l0aFxuXHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0KTtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHRcdHR1cGxlc1sgMSBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggb25GdWxmaWxsZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9uRnVsZmlsbGVkIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0SWRlbnRpdHlcblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHRcdHR1cGxlc1sgMiBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggb25SZWplY3RlZCApID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0b25SZWplY3RlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFRocm93ZXJcblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRcdC8vIEdldCBhIHByb21pc2UgZm9yIHRoaXMgZGVmZXJyZWRcblx0XHRcdFx0XHQvLyBJZiBvYmogaXMgcHJvdmlkZWQsIHRoZSBwcm9taXNlIGFzcGVjdCBpcyBhZGRlZCB0byB0aGUgb2JqZWN0XG5cdFx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRcdHJldHVybiBvYmogIT0gbnVsbCA/IGpRdWVyeS5leHRlbmQoIG9iaiwgcHJvbWlzZSApIDogcHJvbWlzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlZmVycmVkID0ge307XG5cdFxuXHRcdFx0Ly8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuXHRcdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdFx0c3RhdGVTdHJpbmcgPSB0dXBsZVsgNSBdO1xuXHRcblx0XHRcdFx0Ly8gcHJvbWlzZS5wcm9ncmVzcyA9IGxpc3QuYWRkXG5cdFx0XHRcdC8vIHByb21pc2UuZG9uZSA9IGxpc3QuYWRkXG5cdFx0XHRcdC8vIHByb21pc2UuZmFpbCA9IGxpc3QuYWRkXG5cdFx0XHRcdHByb21pc2VbIHR1cGxlWyAxIF0gXSA9IGxpc3QuYWRkO1xuXHRcblx0XHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRcdGlmICggc3RhdGVTdHJpbmcgKSB7XG5cdFx0XHRcdFx0bGlzdC5hZGQoXG5cdFx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZXNvbHZlZFwiIChpLmUuLCBmdWxmaWxsZWQpXG5cdFx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZWplY3RlZFwiXG5cdFx0XHRcdFx0XHRcdHN0YXRlID0gc3RhdGVTdHJpbmc7XG5cdFx0XHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0XHRcdC8vIHJlamVjdGVkX2NhbGxiYWNrcy5kaXNhYmxlXG5cdFx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHRcdHR1cGxlc1sgMyAtIGkgXVsgMiBdLmRpc2FibGUsXG5cdFxuXHRcdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfY2FsbGJhY2tzLmxvY2tcblx0XHRcdFx0XHRcdHR1cGxlc1sgMCBdWyAyIF0ubG9ja1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIHByb2dyZXNzX2hhbmRsZXJzLmZpcmVcblx0XHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmZpcmVcblx0XHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuZmlyZVxuXHRcdFx0XHRsaXN0LmFkZCggdHVwbGVbIDMgXS5maXJlICk7XG5cdFxuXHRcdFx0XHQvLyBkZWZlcnJlZC5ub3RpZnkgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQubm90aWZ5V2l0aCguLi4pIH1cblx0XHRcdFx0Ly8gZGVmZXJyZWQucmVzb2x2ZSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZXNvbHZlV2l0aCguLi4pIH1cblx0XHRcdFx0Ly8gZGVmZXJyZWQucmVqZWN0ID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLnJlamVjdFdpdGgoLi4uKSB9XG5cdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gdW5kZWZpbmVkIDogdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH07XG5cdFxuXHRcdFx0XHQvLyBkZWZlcnJlZC5ub3RpZnlXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0XHQvLyBkZWZlcnJlZC5yZXNvbHZlV2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdFx0Ly8gZGVmZXJyZWQucmVqZWN0V2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdID0gbGlzdC5maXJlV2l0aDtcblx0XHRcdH0gKTtcblx0XG5cdFx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRcdHByb21pc2UucHJvbWlzZSggZGVmZXJyZWQgKTtcblx0XG5cdFx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0XHRpZiAoIGZ1bmMgKSB7XG5cdFx0XHRcdGZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQWxsIGRvbmUhXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdFx0fSxcblx0XG5cdFx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdFx0d2hlbjogZnVuY3Rpb24oIHNpbmdsZVZhbHVlICkge1xuXHRcdFx0dmFyXG5cdFxuXHRcdFx0XHQvLyBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXNcblx0XHRcdFx0cmVtYWluaW5nID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XG5cdFx0XHRcdC8vIGNvdW50IG9mIHVucHJvY2Vzc2VkIGFyZ3VtZW50c1xuXHRcdFx0XHRpID0gcmVtYWluaW5nLFxuXHRcblx0XHRcdFx0Ly8gc3Vib3JkaW5hdGUgZnVsZmlsbG1lbnQgZGF0YVxuXHRcdFx0XHRyZXNvbHZlQ29udGV4dHMgPSBBcnJheSggaSApLFxuXHRcdFx0XHRyZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFxuXHRcdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkXG5cdFx0XHRcdG1hc3RlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcblx0XHRcdFx0Ly8gc3Vib3JkaW5hdGUgY2FsbGJhY2sgZmFjdG9yeVxuXHRcdFx0XHR1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRcdHJlc29sdmVDb250ZXh0c1sgaSBdID0gdGhpcztcblx0XHRcdFx0XHRcdHJlc29sdmVWYWx1ZXNbIGkgXSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gc2xpY2UuY2FsbCggYXJndW1lbnRzICkgOiB2YWx1ZTtcblx0XHRcdFx0XHRcdGlmICggISggLS1yZW1haW5pbmcgKSApIHtcblx0XHRcdFx0XHRcdFx0bWFzdGVyLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXHRcblx0XHRcdC8vIFNpbmdsZS0gYW5kIGVtcHR5IGFyZ3VtZW50cyBhcmUgYWRvcHRlZCBsaWtlIFByb21pc2UucmVzb2x2ZVxuXHRcdFx0aWYgKCByZW1haW5pbmcgPD0gMSApIHtcblx0XHRcdFx0YWRvcHRWYWx1ZSggc2luZ2xlVmFsdWUsIG1hc3Rlci5kb25lKCB1cGRhdGVGdW5jKCBpICkgKS5yZXNvbHZlLCBtYXN0ZXIucmVqZWN0ICk7XG5cdFxuXHRcdFx0XHQvLyBVc2UgLnRoZW4oKSB0byB1bndyYXAgc2Vjb25kYXJ5IHRoZW5hYmxlcyAoY2YuIGdoLTMwMDApXG5cdFx0XHRcdGlmICggbWFzdGVyLnN0YXRlKCkgPT09IFwicGVuZGluZ1wiIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiByZXNvbHZlVmFsdWVzWyBpIF0udGhlbiApICkge1xuXHRcblx0XHRcdFx0XHRyZXR1cm4gbWFzdGVyLnRoZW4oKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE11bHRpcGxlIGFyZ3VtZW50cyBhcmUgYWdncmVnYXRlZCBsaWtlIFByb21pc2UuYWxsIGFycmF5IGVsZW1lbnRzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0YWRvcHRWYWx1ZSggcmVzb2x2ZVZhbHVlc1sgaSBdLCB1cGRhdGVGdW5jKCBpICksIG1hc3Rlci5yZWplY3QgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gbWFzdGVyLnByb21pc2UoKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHQvLyBUaGVzZSB1c3VhbGx5IGluZGljYXRlIGEgcHJvZ3JhbW1lciBtaXN0YWtlIGR1cmluZyBkZXZlbG9wbWVudCxcblx0Ly8gd2FybiBhYm91dCB0aGVtIEFTQVAgcmF0aGVyIHRoYW4gc3dhbGxvd2luZyB0aGVtIGJ5IGRlZmF1bHQuXG5cdHZhciByZXJyb3JOYW1lcyA9IC9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO1xuXHRcblx0alF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2sgPSBmdW5jdGlvbiggZXJyb3IsIHN0YWNrICkge1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRSA4IC0gOSBvbmx5XG5cdFx0Ly8gQ29uc29sZSBleGlzdHMgd2hlbiBkZXYgdG9vbHMgYXJlIG9wZW4sIHdoaWNoIGNhbiBoYXBwZW4gYXQgYW55IHRpbWVcblx0XHRpZiAoIHdpbmRvdy5jb25zb2xlICYmIHdpbmRvdy5jb25zb2xlLndhcm4gJiYgZXJyb3IgJiYgcmVycm9yTmFtZXMudGVzdCggZXJyb3IubmFtZSApICkge1xuXHRcdFx0d2luZG93LmNvbnNvbGUud2FybiggXCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiBcIiArIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrLCBzdGFjayApO1xuXHRcdH1cblx0fTtcblx0XG5cdFxuXHRcblx0XG5cdGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCBlcnJvciApIHtcblx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHR0aHJvdyBlcnJvcjtcblx0XHR9ICk7XG5cdH07XG5cdFxuXHRcblx0XG5cdFxuXHQvLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcblx0dmFyIHJlYWR5TGlzdCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xuXHRcblx0alF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkge1xuXHRcblx0XHRyZWFkeUxpc3Rcblx0XHRcdC50aGVuKCBmbiApXG5cdFxuXHRcdFx0Ly8gV3JhcCBqUXVlcnkucmVhZHlFeGNlcHRpb24gaW4gYSBmdW5jdGlvbiBzbyB0aGF0IHRoZSBsb29rdXBcblx0XHRcdC8vIGhhcHBlbnMgYXQgdGhlIHRpbWUgb2YgZXJyb3IgaGFuZGxpbmcgaW5zdGVhZCBvZiBjYWxsYmFja1xuXHRcdFx0Ly8gcmVnaXN0cmF0aW9uLlxuXHRcdFx0LmNhdGNoKCBmdW5jdGlvbiggZXJyb3IgKSB7XG5cdFx0XHRcdGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiggZXJyb3IgKTtcblx0XHRcdH0gKTtcblx0XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFxuXHRcdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdFx0aXNSZWFkeTogZmFsc2UsXG5cdFxuXHRcdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0XHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRcdHJlYWR5V2FpdDogMSxcblx0XG5cdFx0Ly8gSG9sZCAob3IgcmVsZWFzZSkgdGhlIHJlYWR5IGV2ZW50XG5cdFx0aG9sZFJlYWR5OiBmdW5jdGlvbiggaG9sZCApIHtcblx0XHRcdGlmICggaG9sZCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRcdHJlYWR5OiBmdW5jdGlvbiggd2FpdCApIHtcblx0XG5cdFx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0XHRpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXHRcblx0XHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIElmIHRoZXJlIGFyZSBmdW5jdGlvbnMgYm91bmQsIHRvIGV4ZWN1dGVcblx0XHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5yZWFkeS50aGVuID0gcmVhZHlMaXN0LnRoZW47XG5cdFxuXHQvLyBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZFxuXHRmdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCApO1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG5cdFx0alF1ZXJ5LnJlYWR5KCk7XG5cdH1cblx0XG5cdC8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkXG5cdC8vIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLlxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMCBvbmx5XG5cdC8vIE9sZGVyIElFIHNvbWV0aW1lcyBzaWduYWxzIFwiaW50ZXJhY3RpdmVcIiB0b28gc29vblxuXHRpZiAoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiB8fFxuXHRcdCggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIgJiYgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCApICkge1xuXHRcblx0XHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0XHR3aW5kb3cuc2V0VGltZW91dCggalF1ZXJ5LnJlYWR5ICk7XG5cdFxuXHR9IGVsc2Uge1xuXHRcblx0XHQvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCApO1xuXHRcblx0XHQvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG5cdH1cblx0XG5cdFxuXHRcblx0XG5cdC8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvblxuXHQvLyBUaGUgdmFsdWUvcyBjYW4gb3B0aW9uYWxseSBiZSBleGVjdXRlZCBpZiBpdCdzIGEgZnVuY3Rpb25cblx0dmFyIGFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRidWxrID0ga2V5ID09IG51bGw7XG5cdFxuXHRcdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0XHRpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdGNoYWluYWJsZSA9IHRydWU7XG5cdFx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdFx0YWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0XHR9XG5cdFxuXHRcdC8vIFNldHMgb25lIHZhbHVlXG5cdFx0fSBlbHNlIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGNoYWluYWJsZSA9IHRydWU7XG5cdFxuXHRcdFx0aWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJhdyA9IHRydWU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBidWxrICkge1xuXHRcblx0XHRcdFx0Ly8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0XG5cdFx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRcdGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuXHRcdFx0XHRcdGZuID0gbnVsbDtcblx0XG5cdFx0XHRcdC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdFx0Zm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBidWxrLmNhbGwoIGpRdWVyeSggZWxlbSApLCB2YWx1ZSApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGZuICkge1xuXHRcdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRmbihcblx0XHRcdFx0XHRcdGVsZW1zWyBpIF0sIGtleSwgcmF3ID9cblx0XHRcdFx0XHRcdHZhbHVlIDpcblx0XHRcdFx0XHRcdHZhbHVlLmNhbGwoIGVsZW1zWyBpIF0sIGksIGZuKCBlbGVtc1sgaSBdLCBrZXkgKSApXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGNoYWluYWJsZSA/XG5cdFx0XHRlbGVtcyA6XG5cdFxuXHRcdFx0Ly8gR2V0c1xuXHRcdFx0YnVsayA/XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW1zICkgOlxuXHRcdFx0XHRsZW4gPyBmbiggZWxlbXNbIDAgXSwga2V5ICkgOiBlbXB0eUdldDtcblx0fTtcblx0dmFyIGFjY2VwdERhdGEgPSBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFxuXHRcdC8vIEFjY2VwdHMgb25seTpcblx0XHQvLyAgLSBOb2RlXG5cdFx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHRcdC8vICAgIC0gTm9kZS5ET0NVTUVOVF9OT0RFXG5cdFx0Ly8gIC0gT2JqZWN0XG5cdFx0Ly8gICAgLSBBbnlcblx0XHRyZXR1cm4gb3duZXIubm9kZVR5cGUgPT09IDEgfHwgb3duZXIubm9kZVR5cGUgPT09IDkgfHwgISggK293bmVyLm5vZGVUeXBlICk7XG5cdH07XG5cdFxuXHRcblx0XG5cdFxuXHRmdW5jdGlvbiBEYXRhKCkge1xuXHRcdHRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKztcblx0fVxuXHRcblx0RGF0YS51aWQgPSAxO1xuXHRcblx0RGF0YS5wcm90b3R5cGUgPSB7XG5cdFxuXHRcdGNhY2hlOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIG93bmVyIG9iamVjdCBhbHJlYWR5IGhhcyBhIGNhY2hlXG5cdFx0XHR2YXIgdmFsdWUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFxuXHRcdFx0Ly8gSWYgbm90LCBjcmVhdGUgb25lXG5cdFx0XHRpZiAoICF2YWx1ZSApIHtcblx0XHRcdFx0dmFsdWUgPSB7fTtcblx0XG5cdFx0XHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdFx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdFx0XHQvLyBBbHdheXMgcmV0dXJuIGFuIGVtcHR5IG9iamVjdC5cblx0XHRcdFx0aWYgKCBhY2NlcHREYXRhKCBvd25lciApICkge1xuXHRcblx0XHRcdFx0XHQvLyBJZiBpdCBpcyBhIG5vZGUgdW5saWtlbHkgdG8gYmUgc3RyaW5naWZ5LWVkIG9yIGxvb3BlZCBvdmVyXG5cdFx0XHRcdFx0Ly8gdXNlIHBsYWluIGFzc2lnbm1lbnRcblx0XHRcdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdID0gdmFsdWU7XG5cdFxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBzZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eVxuXHRcdFx0XHRcdC8vIGNvbmZpZ3VyYWJsZSBtdXN0IGJlIHRydWUgdG8gYWxsb3cgdGhlIHByb3BlcnR5IHRvIGJlXG5cdFx0XHRcdFx0Ly8gZGVsZXRlZCB3aGVuIGRhdGEgaXMgcmVtb3ZlZFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIG93bmVyLCB0aGlzLmV4cGFuZG8sIHtcblx0XHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWVcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgcHJvcCxcblx0XHRcdFx0Y2FjaGUgPSB0aGlzLmNhY2hlKCBvd25lciApO1xuXHRcblx0XHRcdC8vIEhhbmRsZTogWyBvd25lciwga2V5LCB2YWx1ZSBdIGFyZ3Ncblx0XHRcdC8vIEFsd2F5cyB1c2UgY2FtZWxDYXNlIGtleSAoZ2gtMjI1Nylcblx0XHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdGNhY2hlWyBqUXVlcnkuY2FtZWxDYXNlKCBkYXRhICkgXSA9IHZhbHVlO1xuXHRcblx0XHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0Ly8gQ29weSB0aGUgcHJvcGVydGllcyBvbmUtYnktb25lIHRvIHRoZSBjYWNoZSBvYmplY3Rcblx0XHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRcdGNhY2hlWyBqUXVlcnkuY2FtZWxDYXNlKCBwcm9wICkgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNhY2hlO1xuXHRcdH0sXG5cdFx0Z2V0OiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHRoaXMuY2FjaGUoIG93bmVyICkgOlxuXHRcblx0XHRcdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gJiYgb3duZXJbIHRoaXMuZXhwYW5kbyBdWyBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKSBdO1xuXHRcdH0sXG5cdFx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cdFxuXHRcdFx0Ly8gSW4gY2FzZXMgd2hlcmUgZWl0aGVyOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHRcdC8vICAgMi4gQSBzdHJpbmcga2V5IHdhcyBzcGVjaWZpZWQsIGJ1dCBubyB2YWx1ZSBwcm92aWRlZFxuXHRcdFx0Ly9cblx0XHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdFx0Ly8gd2hpY2ggdmFsdWUgdG8gcmV0dXJuLCByZXNwZWN0aXZlbHkgZWl0aGVyOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHRcdC8vICAgMi4gVGhlIGRhdGEgc3RvcmVkIGF0IHRoZSBrZXlcblx0XHRcdC8vXG5cdFx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0KCAoIGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApICkge1xuXHRcblx0XHRcdFx0cmV0dXJuIHRoaXMuZ2V0KCBvd25lciwga2V5ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWVcblx0XHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcblx0XHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0XHQvL1xuXHRcdFx0dGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7XG5cdFxuXHRcdFx0Ly8gU2luY2UgdGhlIFwic2V0XCIgcGF0aCBjYW4gaGF2ZSB0d28gcG9zc2libGUgZW50cnkgcG9pbnRzXG5cdFx0XHQvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl1cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdFx0fSxcblx0XHRyZW1vdmU6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdFx0dmFyIGksXG5cdFx0XHRcdGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcblx0XHRcdGlmICggY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICgga2V5ICE9PSB1bmRlZmluZWQgKSB7XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2Yga2V5c1xuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCBrZXkgKSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gSWYga2V5IGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0XHQvLyBXZSBhbHdheXMgc2V0IGNhbWVsQ2FzZSBrZXlzLCBzbyByZW1vdmUgdGhhdC5cblx0XHRcdFx0XHRrZXkgPSBrZXkubWFwKCBqUXVlcnkuY2FtZWxDYXNlICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0a2V5ID0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICk7XG5cdFxuXHRcdFx0XHRcdC8vIElmIGEga2V5IHdpdGggdGhlIHNwYWNlcyBleGlzdHMsIHVzZSBpdC5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGNyZWF0ZSBhbiBhcnJheSBieSBtYXRjaGluZyBub24td2hpdGVzcGFjZVxuXHRcdFx0XHRcdGtleSA9IGtleSBpbiBjYWNoZSA/XG5cdFx0XHRcdFx0XHRbIGtleSBdIDpcblx0XHRcdFx0XHRcdCgga2V5Lm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRpID0ga2V5Lmxlbmd0aDtcblx0XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5WyBpIF0gXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiB0aGVyZSdzIG5vIG1vcmUgZGF0YVxuXHRcdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fCBqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKSApIHtcblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PTM1IC0gNDVcblx0XHRcdFx0Ly8gV2Via2l0ICYgQmxpbmsgcGVyZm9ybWFuY2Ugc3VmZmVycyB3aGVuIGRlbGV0aW5nIHByb3BlcnRpZXNcblx0XHRcdFx0Ly8gZnJvbSBET00gbm9kZXMsIHNvIHNldCB0byB1bmRlZmluZWQgaW5zdGVhZFxuXHRcdFx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzg2MDcgKGJ1ZyByZXN0cmljdGVkKVxuXHRcdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWxldGUgb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRoYXNEYXRhOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0XHR2YXIgY2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0XHRyZXR1cm4gY2FjaGUgIT09IHVuZGVmaW5lZCAmJiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICk7XG5cdFx0fVxuXHR9O1xuXHR2YXIgZGF0YVByaXYgPSBuZXcgRGF0YSgpO1xuXHRcblx0dmFyIGRhdGFVc2VyID0gbmV3IERhdGEoKTtcblx0XG5cdFxuXHRcblx0Ly9cdEltcGxlbWVudGF0aW9uIFN1bW1hcnlcblx0Ly9cblx0Ly9cdDEuIEVuZm9yY2UgQVBJIHN1cmZhY2UgYW5kIHNlbWFudGljIGNvbXBhdGliaWxpdHkgd2l0aCAxLjkueCBicmFuY2hcblx0Ly9cdDIuIEltcHJvdmUgdGhlIG1vZHVsZSdzIG1haW50YWluYWJpbGl0eSBieSByZWR1Y2luZyB0aGUgc3RvcmFnZVxuXHQvL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG5cdC8vXHQzLiBVc2UgdGhlIHNhbWUgc2luZ2xlIG1lY2hhbmlzbSB0byBzdXBwb3J0IFwicHJpdmF0ZVwiIGFuZCBcInVzZXJcIiBkYXRhLlxuXHQvL1x0NC4gX05ldmVyXyBleHBvc2UgXCJwcml2YXRlXCIgZGF0YSB0byB1c2VyIGNvZGUgKFRPRE86IERyb3AgX2RhdGEsIF9yZW1vdmVEYXRhKVxuXHQvL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG5cdC8vXHQ2LiBQcm92aWRlIGEgY2xlYXIgcGF0aCBmb3IgaW1wbGVtZW50YXRpb24gdXBncmFkZSB0byBXZWFrTWFwIGluIDIwMTRcblx0XG5cdHZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdFx0cm11bHRpRGFzaCA9IC9bQS1aXS9nO1xuXHRcblx0ZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHtcblx0XHR2YXIgbmFtZTtcblx0XG5cdFx0Ly8gSWYgbm90aGluZyB3YXMgZm91bmQgaW50ZXJuYWxseSwgdHJ5IHRvIGZldGNoIGFueVxuXHRcdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRcdGlmICggZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRuYW1lID0gXCJkYXRhLVwiICsga2V5LnJlcGxhY2UoIHJtdWx0aURhc2gsIFwiLSQmXCIgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cdFxuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRkYXRhID0gZGF0YSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDpcblx0XHRcdFx0XHRcdGRhdGEgPT09IFwiZmFsc2VcIiA/IGZhbHNlIDpcblx0XHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XG5cdFxuXHRcdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0XHRcdFx0XHRcdCtkYXRhICsgXCJcIiA9PT0gZGF0YSA/ICtkYXRhIDpcblx0XHRcdFx0XHRcdHJicmFjZS50ZXN0KCBkYXRhICkgPyBKU09OLnBhcnNlKCBkYXRhICkgOlxuXHRcdFx0XHRcdFx0ZGF0YTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7fVxuXHRcblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyXG5cdFx0XHRcdGRhdGFVc2VyLnNldCggZWxlbSwga2V5LCBkYXRhICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZGF0YTtcblx0fVxuXHRcblx0alF1ZXJ5LmV4dGVuZCgge1xuXHRcdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGRhdGFVc2VyLmhhc0RhdGEoIGVsZW0gKSB8fCBkYXRhUHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdFx0fSxcblx0XG5cdFx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0XHRyZXR1cm4gZGF0YVVzZXIuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdFx0fSxcblx0XG5cdFx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0XHRkYXRhVXNlci5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBUT0RPOiBOb3cgdGhhdCBhbGwgY2FsbHMgdG8gX2RhdGEgYW5kIF9yZW1vdmVEYXRhIGhhdmUgYmVlbiByZXBsYWNlZFxuXHRcdC8vIHdpdGggZGlyZWN0IGNhbGxzIHRvIGRhdGFQcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRcdF9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRcdHJldHVybiBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0XHR9LFxuXHRcblx0XHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRkYXRhOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0XHRhdHRycyA9IGVsZW0gJiYgZWxlbS5hdHRyaWJ1dGVzO1xuXHRcblx0XHRcdC8vIEdldHMgYWxsIHZhbHVlc1xuXHRcdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtICk7XG5cdFxuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhZGF0YVByaXYuZ2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiICkgKSB7XG5cdFx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG5cdFx0XHRcdFx0XHRcdC8vIFRoZSBhdHRycyBlbGVtZW50cyBjYW4gYmUgbnVsbCAoIzE0ODk0KVxuXHRcdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZSA9IGF0dHJzWyBpIF0ubmFtZTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG5hbWUuaW5kZXhPZiggXCJkYXRhLVwiICkgPT09IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSggNSApICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhQXR0ciggZWxlbSwgbmFtZSwgZGF0YVsgbmFtZSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIsIHRydWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG5cdFx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5ICk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBkYXRhO1xuXHRcblx0XHRcdFx0Ly8gVGhlIGNhbGxpbmcgalF1ZXJ5IG9iamVjdCAoZWxlbWVudCBtYXRjaGVzKSBpcyBub3QgZW1wdHlcblx0XHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdFx0Ly8gYHZhbHVlYCBwYXJhbWV0ZXIgd2FzIG5vdCB1bmRlZmluZWQuIEFuIGVtcHR5IGpRdWVyeSBvYmplY3Rcblx0XHRcdFx0Ly8gd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgZm9yIGVsZW0gPSB0aGlzWyAwIF0gd2hpY2ggd2lsbFxuXHRcdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0XHRpZiAoIGVsZW0gJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblx0XG5cdFx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHRcdC8vIFRoZSBrZXkgd2lsbCBhbHdheXMgYmUgY2FtZWxDYXNlZCBpbiBEYXRhXG5cdFx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSwga2V5ICk7XG5cdFx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIEF0dGVtcHQgdG8gXCJkaXNjb3ZlclwiIHRoZSBkYXRhIGluXG5cdFx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRcdGRhdGEgPSBkYXRhQXR0ciggZWxlbSwga2V5ICk7XG5cdFx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIFdlIHRyaWVkIHJlYWxseSBoYXJkLCBidXQgdGhlIGRhdGEgZG9lc24ndCBleGlzdC5cblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFNldCB0aGUgZGF0YS4uLlxuXHRcdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0XHQvLyBXZSBhbHdheXMgc3RvcmUgdGhlIGNhbWVsQ2FzZWQga2V5XG5cdFx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBrZXksIHZhbHVlICk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgdHJ1ZSApO1xuXHRcdH0sXG5cdFxuXHRcdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YVVzZXIucmVtb3ZlKCB0aGlzLCBrZXkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0cXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuXHRcdFx0dmFyIHF1ZXVlO1xuXHRcblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dHlwZSA9ICggdHlwZSB8fCBcImZ4XCIgKSArIFwicXVldWVcIjtcblx0XHRcdFx0cXVldWUgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIHR5cGUgKTtcblx0XG5cdFx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdFx0aWYgKCBkYXRhICkge1xuXHRcdFx0XHRcdGlmICggIXF1ZXVlIHx8IGpRdWVyeS5pc0FycmF5KCBkYXRhICkgKSB7XG5cdFx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHF1ZXVlLnB1c2goIGRhdGEgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHF1ZXVlIHx8IFtdO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcblx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpLFxuXHRcdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIGVsZW0sIHR5cGUgKTtcblx0XHRcdFx0fTtcblx0XG5cdFx0XHQvLyBJZiB0aGUgZnggcXVldWUgaXMgZGVxdWV1ZWQsIGFsd2F5cyByZW1vdmUgdGhlIHByb2dyZXNzIHNlbnRpbmVsXG5cdFx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHRzdGFydExlbmd0aC0tO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggZm4gKSB7XG5cdFxuXHRcdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHRcdC8vIGF1dG9tYXRpY2FsbHkgZGVxdWV1ZWRcblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdC8vIE5vdCBwdWJsaWMgLSBnZW5lcmF0ZSBhIHF1ZXVlSG9va3Mgb2JqZWN0LCBvciByZXR1cm4gdGhlIGN1cnJlbnQgb25lXG5cdFx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRcdHJldHVybiBkYXRhUHJpdi5nZXQoIGVsZW0sIGtleSApIHx8IGRhdGFQcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKS5hZGQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0XHR9IClcblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0XHR2YXIgc2V0dGVyID0gMjtcblx0XG5cdFx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdFx0dHlwZSA9IFwiZnhcIjtcblx0XHRcdFx0c2V0dGVyLS07XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWyAwIF0sIHR5cGUgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cdFxuXHRcdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cdFxuXHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWyAwIF0gIT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHR9LFxuXHRcdGRlcXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0XHR9LFxuXHRcblx0XHQvLyBHZXQgYSBwcm9taXNlIHJlc29sdmVkIHdoZW4gcXVldWVzIG9mIGEgY2VydGFpbiB0eXBlXG5cdFx0Ly8gYXJlIGVtcHRpZWQgKGZ4IGlzIHRoZSB0eXBlIGJ5IGRlZmF1bHQpXG5cdFx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHRcdHZhciB0bXAsXG5cdFx0XHRcdGNvdW50ID0gMSxcblx0XHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdFx0ZWxlbWVudHMgPSB0aGlzLFxuXHRcdFx0XHRpID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoICEoIC0tY291bnQgKSApIHtcblx0XHRcdFx0XHRcdGRlZmVyLnJlc29sdmVXaXRoKCBlbGVtZW50cywgWyBlbGVtZW50cyBdICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcblx0XHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdG9iaiA9IHR5cGU7XG5cdFx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFxuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdHRtcCA9IGRhdGFQcml2LmdldCggZWxlbWVudHNbIGkgXSwgdHlwZSArIFwicXVldWVIb29rc1wiICk7XG5cdFx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHRcdHRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHRcdH1cblx0fSApO1xuXHR2YXIgcG51bSA9ICggL1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8gKS5zb3VyY2U7XG5cdFxuXHR2YXIgcmNzc051bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICk7XG5cdFxuXHRcblx0dmFyIGNzc0V4cGFuZCA9IFsgXCJUb3BcIiwgXCJSaWdodFwiLCBcIkJvdHRvbVwiLCBcIkxlZnRcIiBdO1xuXHRcblx0dmFyIGlzSGlkZGVuV2l0aGluVHJlZSA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblx0XG5cdFx0XHQvLyBpc0hpZGRlbldpdGhpblRyZWUgbWlnaHQgYmUgY2FsbGVkIGZyb20galF1ZXJ5I2ZpbHRlciBmdW5jdGlvbjtcblx0XHRcdC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuXHRcdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cdFxuXHRcdFx0Ly8gSW5saW5lIHN0eWxlIHRydW1wcyBhbGxcblx0XHRcdHJldHVybiBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiIHx8XG5cdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiAmJlxuXHRcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBjaGVjayBjb21wdXRlZCBzdHlsZVxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NDMgLSA0NVxuXHRcdFx0XHQvLyBEaXNjb25uZWN0ZWQgZWxlbWVudHMgY2FuIGhhdmUgY29tcHV0ZWQgZGlzcGxheTogbm9uZSwgc28gZmlyc3QgY29uZmlybSB0aGF0IGVsZW0gaXNcblx0XHRcdFx0Ly8gaW4gdGhlIGRvY3VtZW50LlxuXHRcdFx0XHRqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICYmXG5cdFxuXHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApID09PSBcIm5vbmVcIjtcblx0XHR9O1xuXHRcblx0dmFyIHN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdFx0dmFyIHJldCwgbmFtZSxcblx0XHRcdG9sZCA9IHt9O1xuXHRcblx0XHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcblx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcblx0XHR9XG5cdFxuXHRcdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XG5cdFxuXHRcdC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuXHRcdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcblx0XG5cdFxuXHRcblx0XG5cdGZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7XG5cdFx0dmFyIGFkanVzdGVkLFxuXHRcdFx0c2NhbGUgPSAxLFxuXHRcdFx0bWF4SXRlcmF0aW9ucyA9IDIwLFxuXHRcdFx0Y3VycmVudFZhbHVlID0gdHdlZW4gP1xuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHdlZW4uY3VyKCk7XG5cdFx0XHRcdH0gOlxuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgcHJvcCwgXCJcIiApO1xuXHRcdFx0XHR9LFxuXHRcdFx0aW5pdGlhbCA9IGN1cnJlbnRWYWx1ZSgpLFxuXHRcdFx0dW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXHRcblx0XHRcdC8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzXG5cdFx0XHRpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICtpbml0aWFsICkgJiZcblx0XHRcdFx0cmNzc051bS5leGVjKCBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wICkgKTtcblx0XG5cdFx0aWYgKCBpbml0aWFsSW5Vbml0ICYmIGluaXRpYWxJblVuaXRbIDMgXSAhPT0gdW5pdCApIHtcblx0XG5cdFx0XHQvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG5cdFx0XHR1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07XG5cdFxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgdHdlZW4gcHJvcGVydGllcyBsYXRlciBvblxuXHRcdFx0dmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107XG5cdFxuXHRcdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbCB8fCAxO1xuXHRcblx0XHRcdGRvIHtcblx0XG5cdFx0XHRcdC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLlxuXHRcdFx0XHQvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvd1xuXHRcdFx0XHRzY2FsZSA9IHNjYWxlIHx8IFwiLjVcIjtcblx0XG5cdFx0XHRcdC8vIEFkanVzdCBhbmQgYXBwbHlcblx0XHRcdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApO1xuXHRcblx0XHRcdC8vIFVwZGF0ZSBzY2FsZSwgdG9sZXJhdGluZyB6ZXJvIG9yIE5hTiBmcm9tIHR3ZWVuLmN1cigpXG5cdFx0XHQvLyBCcmVhayB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoLlxuXHRcdFx0fSB3aGlsZSAoXG5cdFx0XHRcdHNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zXG5cdFx0XHQpO1xuXHRcdH1cblx0XG5cdFx0aWYgKCB2YWx1ZVBhcnRzICkge1xuXHRcdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsSW5Vbml0IHx8ICtpbml0aWFsIHx8IDA7XG5cdFxuXHRcdFx0Ly8gQXBwbHkgcmVsYXRpdmUgb2Zmc2V0ICgrPS8tPSkgaWYgc3BlY2lmaWVkXG5cdFx0XHRhZGp1c3RlZCA9IHZhbHVlUGFydHNbIDEgXSA/XG5cdFx0XHRcdGluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6XG5cdFx0XHRcdCt2YWx1ZVBhcnRzWyAyIF07XG5cdFx0XHRpZiAoIHR3ZWVuICkge1xuXHRcdFx0XHR0d2Vlbi51bml0ID0gdW5pdDtcblx0XHRcdFx0dHdlZW4uc3RhcnQgPSBpbml0aWFsSW5Vbml0O1xuXHRcdFx0XHR0d2Vlbi5lbmQgPSBhZGp1c3RlZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGFkanVzdGVkO1xuXHR9XG5cdFxuXHRcblx0dmFyIGRlZmF1bHREaXNwbGF5TWFwID0ge307XG5cdFxuXHRmdW5jdGlvbiBnZXREZWZhdWx0RGlzcGxheSggZWxlbSApIHtcblx0XHR2YXIgdGVtcCxcblx0XHRcdGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudCxcblx0XHRcdG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZSxcblx0XHRcdGRpc3BsYXkgPSBkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXTtcblx0XG5cdFx0aWYgKCBkaXNwbGF5ICkge1xuXHRcdFx0cmV0dXJuIGRpc3BsYXk7XG5cdFx0fVxuXHRcblx0XHR0ZW1wID0gZG9jLmJvZHkuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVFbGVtZW50KCBub2RlTmFtZSApICksXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIHRlbXAsIFwiZGlzcGxheVwiICk7XG5cdFxuXHRcdHRlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdGVtcCApO1xuXHRcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0ZGlzcGxheSA9IFwiYmxvY2tcIjtcblx0XHR9XG5cdFx0ZGVmYXVsdERpc3BsYXlNYXBbIG5vZGVOYW1lIF0gPSBkaXNwbGF5O1xuXHRcblx0XHRyZXR1cm4gZGlzcGxheTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2hvd0hpZGUoIGVsZW1lbnRzLCBzaG93ICkge1xuXHRcdHZhciBkaXNwbGF5LCBlbGVtLFxuXHRcdFx0dmFsdWVzID0gW10sXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cdFxuXHRcdC8vIERldGVybWluZSBuZXcgZGlzcGxheSB2YWx1ZSBmb3IgZWxlbWVudHMgdGhhdCBuZWVkIHRvIGNoYW5nZVxuXHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XG5cdFx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdFx0aWYgKCBzaG93ICkge1xuXHRcblx0XHRcdFx0Ly8gU2luY2Ugd2UgZm9yY2UgdmlzaWJpbGl0eSB1cG9uIGNhc2NhZGUtaGlkZGVuIGVsZW1lbnRzLCBhbiBpbW1lZGlhdGUgKGFuZCBzbG93KVxuXHRcdFx0XHQvLyBjaGVjayBpcyByZXF1aXJlZCBpbiB0aGlzIGZpcnN0IGxvb3AgdW5sZXNzIHdlIGhhdmUgYSBub25lbXB0eSBkaXNwbGF5IHZhbHVlIChlaXRoZXJcblx0XHRcdFx0Ly8gaW5saW5lIG9yIGFib3V0LXRvLWJlLXJlc3RvcmVkKVxuXHRcdFx0XHRpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJkaXNwbGF5XCIgKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSApIHtcblx0XHRcdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuV2l0aGluVHJlZSggZWxlbSApICkge1xuXHRcdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGdldERlZmF1bHREaXNwbGF5KCBlbGVtICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICggZGlzcGxheSAhPT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gXCJub25lXCI7XG5cdFxuXHRcdFx0XHRcdC8vIFJlbWVtYmVyIHdoYXQgd2UncmUgb3ZlcndyaXRpbmdcblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiZGlzcGxheVwiLCBkaXNwbGF5ICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIFNldCB0aGUgZGlzcGxheSBvZiB0aGUgZWxlbWVudHMgaW4gYSBzZWNvbmQgbG9vcCB0byBhdm9pZCBjb25zdGFudCByZWZsb3dcblx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0aWYgKCB2YWx1ZXNbIGluZGV4IF0gIT0gbnVsbCApIHtcblx0XHRcdFx0ZWxlbWVudHNbIGluZGV4IF0uc3R5bGUuZGlzcGxheSA9IHZhbHVlc1sgaW5kZXggXTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBlbGVtZW50cztcblx0fVxuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7XG5cdFx0fSxcblx0XHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBzaG93SGlkZSggdGhpcyApO1xuXHRcdH0sXG5cdFx0dG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggaXNIaWRkZW5XaXRoaW5UcmVlKCB0aGlzICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGpRdWVyeSggdGhpcyApLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH1cblx0fSApO1xuXHR2YXIgcmNoZWNrYWJsZVR5cGUgPSAoIC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pICk7XG5cdFxuXHR2YXIgcnRhZ05hbWUgPSAoIC88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKykvaSApO1xuXHRcblx0dmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pICk7XG5cdFxuXHRcblx0XG5cdC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG5cdHZhciB3cmFwTWFwID0ge1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdG9wdGlvbjogWyAxLCBcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIiwgXCI8L3NlbGVjdD5cIiBdLFxuXHRcblx0XHQvLyBYSFRNTCBwYXJzZXJzIGRvIG5vdCBtYWdpY2FsbHkgaW5zZXJ0IGVsZW1lbnRzIGluIHRoZVxuXHRcdC8vIHNhbWUgd2F5IHRoYXQgdGFnIHNvdXAgcGFyc2VycyBkby4gU28gd2UgY2Fubm90IHNob3J0ZW5cblx0XHQvLyB0aGlzIGJ5IG9taXR0aW5nIDx0Ym9keT4gb3Igb3RoZXIgcmVxdWlyZWQgZWxlbWVudHMuXG5cdFx0dGhlYWQ6IFsgMSwgXCI8dGFibGU+XCIsIFwiPC90YWJsZT5cIiBdLFxuXHRcdGNvbDogWyAyLCBcIjx0YWJsZT48Y29sZ3JvdXA+XCIsIFwiPC9jb2xncm91cD48L3RhYmxlPlwiIF0sXG5cdFx0dHI6IFsgMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXHRcdHRkOiBbIDMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0XG5cdFx0X2RlZmF1bHQ6IFsgMCwgXCJcIiwgXCJcIiBdXG5cdH07XG5cdFxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHR3cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cdFxuXHR3cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xuXHR3cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblx0XG5cdFxuXHRmdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblx0XG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdC8vIFVzZSB0eXBlb2YgdG8gYXZvaWQgemVyby1hcmd1bWVudCBtZXRob2QgaW52b2NhdGlvbiBvbiBob3N0IG9iamVjdHMgKCMxNTE1MSlcblx0XHR2YXIgcmV0ID0gdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgP1xuXHRcdFx0XHRjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRcdHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09IFwidW5kZWZpbmVkXCIgP1xuXHRcdFx0XHRcdGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8IFwiKlwiICkgOlxuXHRcdFx0XHRbXTtcblx0XG5cdFx0cmV0dXJuIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBqUXVlcnkubm9kZU5hbWUoIGNvbnRleHQsIHRhZyApID9cblx0XHRcdGpRdWVyeS5tZXJnZSggWyBjb250ZXh0IF0sIHJldCApIDpcblx0XHRcdHJldDtcblx0fVxuXHRcblx0XG5cdC8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuXHRmdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0bCA9IGVsZW1zLmxlbmd0aDtcblx0XG5cdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0ZGF0YVByaXYuc2V0KFxuXHRcdFx0XHRlbGVtc1sgaSBdLFxuXHRcdFx0XHRcImdsb2JhbEV2YWxcIixcblx0XHRcdFx0IXJlZkVsZW1lbnRzIHx8IGRhdGFQcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblx0XG5cdFxuXHR2YXIgcmh0bWwgPSAvPHwmIz9cXHcrOy87XG5cdFxuXHRmdW5jdGlvbiBidWlsZEZyYWdtZW50KCBlbGVtcywgY29udGV4dCwgc2NyaXB0cywgc2VsZWN0aW9uLCBpZ25vcmVkICkge1xuXHRcdHZhciBlbGVtLCB0bXAsIHRhZywgd3JhcCwgY29udGFpbnMsIGosXG5cdFx0XHRmcmFnbWVudCA9IGNvbnRleHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdFx0bm9kZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IGVsZW1zLmxlbmd0aDtcblx0XG5cdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0ZWxlbSA9IGVsZW1zWyBpIF07XG5cdFxuXHRcdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cdFxuXHRcdFx0XHQvLyBBZGQgbm9kZXMgZGlyZWN0bHlcblx0XHRcdFx0aWYgKCBqUXVlcnkudHlwZSggZWxlbSApID09PSBcIm9iamVjdFwiICkge1xuXHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApO1xuXHRcblx0XHRcdFx0Ly8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG5cdFx0XHRcdH0gZWxzZSBpZiAoICFyaHRtbC50ZXN0KCBlbGVtICkgKSB7XG5cdFx0XHRcdFx0bm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICk7XG5cdFxuXHRcdFx0XHRcdC8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb25cblx0XHRcdFx0XHR0YWcgPSAoIHJ0YWdOYW1lLmV4ZWMoIGVsZW0gKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHR3cmFwID0gd3JhcE1hcFsgdGFnIF0gfHwgd3JhcE1hcC5fZGVmYXVsdDtcblx0XHRcdFx0XHR0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTtcblx0XG5cdFx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTtcblx0XG5cdFx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXHRcblx0XHRcdFx0XHQvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpXG5cdFx0XHRcdFx0dG1wLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0Ly8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuXHRcdGZyYWdtZW50LnRleHRDb250ZW50ID0gXCJcIjtcblx0XG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIGVsZW0gPSBub2Rlc1sgaSsrIF0gKSApIHtcblx0XG5cdFx0XHQvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KVxuXHRcdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApID4gLTEgKSB7XG5cdFx0XHRcdGlmICggaWdub3JlZCApIHtcblx0XHRcdFx0XHRpZ25vcmVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XG5cdFx0XHRjb250YWlucyA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cdFxuXHRcdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0XHR0bXAgPSBnZXRBbGwoIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbGVtICksIFwic2NyaXB0XCIgKTtcblx0XG5cdFx0XHQvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG5cdFx0XHRpZiAoIGNvbnRhaW5zICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0XHRpZiAoIHNjcmlwdHMgKSB7XG5cdFx0XHRcdGogPSAwO1xuXHRcdFx0XHR3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBmcmFnbWVudDtcblx0fVxuXHRcblx0XG5cdCggZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblx0XG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seVxuXHRcdC8vIENoZWNrIHN0YXRlIGxvc3QgaWYgdGhlIG5hbWUgaXMgc2V0ICgjMTEyMTcpXG5cdFx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHRcdC8vIGBuYW1lYCBhbmQgYHR5cGVgIG11c3QgdXNlIC5zZXRBdHRyaWJ1dGUgZm9yIFdXQSAoIzE0OTAxKVxuXHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwicmFkaW9cIiApO1xuXHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJ0XCIgKTtcblx0XG5cdFx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIG9ubHlcblx0XHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0XHRzdXBwb3J0LmNoZWNrQ2xvbmUgPSBkaXYuY2xvbmVOb2RlKCB0cnVlICkuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmNoZWNrZWQ7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHRcdC8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkXG5cdFx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRcdHN1cHBvcnQubm9DbG9uZUNoZWNrZWQgPSAhIWRpdi5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO1xuXHR9ICkoKTtcblx0dmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0XG5cdFxuXHRcblx0dmFyXG5cdFx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRcdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFxuXHRcdHJ0eXBlbmFtZXNwYWNlID0gL14oW14uXSopKD86XFwuKC4rKXwpLztcblx0XG5cdGZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0Ly8gU2VlICMxMzM5MyBmb3IgbW9yZSBpbmZvXG5cdGZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0XHR9IGNhdGNoICggZXJyICkgeyB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9uKCBlbGVtLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUgKSB7XG5cdFx0dmFyIG9yaWdGbiwgdHlwZTtcblx0XG5cdFx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFxuXHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuXHRcdFx0XHRkYXRhID0gZGF0YSB8fCBzZWxlY3Rvcjtcblx0XHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0XHRvbiggZWxlbSwgdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0fVxuXHRcblx0XHRpZiAoIGRhdGEgPT0gbnVsbCAmJiBmbiA9PSBudWxsICkge1xuXHRcblx0XHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcblx0XHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdC8vICggdHlwZXMsIGRhdGEsIGZuIClcblx0XHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0XHRkYXRhID0gc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fSBlbHNlIGlmICggIWZuICkge1xuXHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0fVxuXHRcblx0XHRpZiAoIG9uZSA9PT0gMSApIHtcblx0XHRcdG9yaWdGbiA9IGZuO1xuXHRcdFx0Zm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFxuXHRcdFx0XHQvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cblx0XHRcdFx0alF1ZXJ5KCkub2ZmKCBldmVudCApO1xuXHRcdFx0XHRyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdH07XG5cdFxuXHRcdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0XHR9ICk7XG5cdH1cblx0XG5cdC8qXG5cdCAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cblx0ICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy5cblx0ICovXG5cdGpRdWVyeS5ldmVudCA9IHtcblx0XG5cdFx0Z2xvYmFsOiB7fSxcblx0XG5cdFx0YWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkge1xuXHRcblx0XHRcdHZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCxcblx0XHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblx0XG5cdFx0XHQvLyBEb24ndCBhdHRhY2ggZXZlbnRzIHRvIG5vRGF0YSBvciB0ZXh0L2NvbW1lbnQgbm9kZXMgKGJ1dCBhbGxvdyBwbGFpbiBvYmplY3RzKVxuXHRcdFx0aWYgKCAhZWxlbURhdGEgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRcdGlmICggaGFuZGxlci5oYW5kbGVyICkge1xuXHRcdFx0XHRoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG5cdFx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0XHRzZWxlY3RvciA9IGhhbmRsZU9iakluLnNlbGVjdG9yO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEVuc3VyZSB0aGF0IGludmFsaWQgc2VsZWN0b3JzIHRocm93IGV4Y2VwdGlvbnMgYXQgYXR0YWNoIHRpbWVcblx0XHRcdC8vIEV2YWx1YXRlIGFnYWluc3QgZG9jdW1lbnRFbGVtZW50IGluIGNhc2UgZWxlbSBpcyBhIG5vbi1lbGVtZW50IG5vZGUgKGUuZy4sIGRvY3VtZW50KVxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBkb2N1bWVudEVsZW1lbnQsIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgdGhlIGhhbmRsZXIgaGFzIGEgdW5pcXVlIElELCB1c2VkIHRvIGZpbmQvcmVtb3ZlIGl0IGxhdGVyXG5cdFx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdGhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuXHRcdFx0aWYgKCAhKCBldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgKSApIHtcblx0XHRcdFx0ZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG5cdFx0XHR9XG5cdFx0XHRpZiAoICEoIGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlICkgKSB7XG5cdFx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIERpc2NhcmQgdGhlIHNlY29uZCBldmVudCBvZiBhIGpRdWVyeS5ldmVudC50cmlnZ2VyKCkgYW5kXG5cdFx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRcdHJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQuZGlzcGF0Y2guYXBwbHkoIGVsZW0sIGFyZ3VtZW50cyApIDogdW5kZWZpbmVkO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107XG5cdFx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXHRcblx0XHRcdFx0Ly8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzXG5cdFx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZVxuXHRcdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XG5cdFx0XHRcdC8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZVxuXHRcdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cdFxuXHRcdFx0XHQvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG5cdFx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcblx0XHRcdFx0Ly8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdFx0aGFuZGxlT2JqID0galF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0b3JpZ1R5cGU6IG9yaWdUeXBlLFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdFx0aGFuZGxlcjogaGFuZGxlcixcblx0XHRcdFx0XHRndWlkOiBoYW5kbGVyLmd1aWQsXG5cdFx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRcdG5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksXG5cdFx0XHRcdFx0bmFtZXNwYWNlOiBuYW1lc3BhY2VzLmpvaW4oIFwiLlwiIClcblx0XHRcdFx0fSwgaGFuZGxlT2JqSW4gKTtcblx0XG5cdFx0XHRcdC8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0XG5cdFx0XHRcdGlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50ID0gMDtcblx0XG5cdFx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdFx0aWYgKCAhc3BlY2lhbC5zZXR1cCB8fFxuXHRcdFx0XHRcdFx0c3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0XHRcdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0aWYgKCBzcGVjaWFsLmFkZCApIHtcblx0XHRcdFx0XHRzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XG5cdFx0XHRcdFx0aWYgKCAhaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0XHRpZiAoIHNlbGVjdG9yICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLCAwLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRoYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gS2VlcCB0cmFjayBvZiB3aGljaCBldmVudHMgaGF2ZSBldmVyIGJlZW4gdXNlZCwgZm9yIGV2ZW50IG9wdGltaXphdGlvblxuXHRcdFx0XHRqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlO1xuXHRcdFx0fVxuXHRcblx0XHR9LFxuXHRcblx0XHQvLyBEZXRhY2ggYW4gZXZlbnQgb3Igc2V0IG9mIGV2ZW50cyBmcm9tIGFuIGVsZW1lbnRcblx0XHRyZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkge1xuXHRcblx0XHRcdHZhciBqLCBvcmlnQ291bnQsIHRtcCxcblx0XHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5oYXNEYXRhKCBlbGVtICkgJiYgZGF0YVByaXYuZ2V0KCBlbGVtICk7XG5cdFxuXHRcdFx0aWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBPbmNlIGZvciBlYWNoIHR5cGUubmFtZXNwYWNlIGluIHR5cGVzOyB0eXBlIG1heSBiZSBvbWl0dGVkXG5cdFx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0XHR0eXBlID0gb3JpZ1R5cGUgPSB0bXBbIDEgXTtcblx0XHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblx0XG5cdFx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHR0bXAgPSB0bXBbIDIgXSAmJlxuXHRcdFx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oIFwiXFxcXC4oPzouKlxcXFwufClcIiApICsgXCIoXFxcXC58JClcIiApO1xuXHRcblx0XHRcdFx0Ly8gUmVtb3ZlIG1hdGNoaW5nIGV2ZW50c1xuXHRcdFx0XHRvcmlnQ291bnQgPSBqID0gaGFuZGxlcnMubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaiBdO1xuXHRcblx0XHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0XHQoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJlxuXHRcdFx0XHRcdFx0KCAhdG1wIHx8IHRtcC50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSAmJlxuXHRcdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fFxuXHRcdFx0XHRcdFx0XHRzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBqLCAxICk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRcdHNwZWNpYWwucmVtb3ZlLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0XHQvLyAoYXZvaWRzIHBvdGVudGlhbCBmb3IgZW5kbGVzcyByZWN1cnNpb24gZHVyaW5nIHJlbW92YWwgb2Ygc3BlY2lhbCBldmVudCBoYW5kbGVycylcblx0XHRcdFx0aWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnRlYXJkb3duLmNhbGwoIGVsZW0sIG5hbWVzcGFjZXMsIGVsZW1EYXRhLmhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XG5cdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0ZGVsZXRlIGV2ZW50c1sgdHlwZSBdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gUmVtb3ZlIGRhdGEgYW5kIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkge1xuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiaGFuZGxlIGV2ZW50c1wiICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0ZGlzcGF0Y2g6IGZ1bmN0aW9uKCBuYXRpdmVFdmVudCApIHtcblx0XG5cdFx0XHQvLyBNYWtlIGEgd3JpdGFibGUgalF1ZXJ5LkV2ZW50IGZyb20gdGhlIG5hdGl2ZSBldmVudCBvYmplY3Rcblx0XHRcdHZhciBldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIG5hdGl2ZUV2ZW50ICk7XG5cdFxuXHRcdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLCBoYW5kbGVyUXVldWUsXG5cdFx0XHRcdGFyZ3MgPSBuZXcgQXJyYXkoIGFyZ3VtZW50cy5sZW5ndGggKSxcblx0XHRcdFx0aGFuZGxlcnMgPSAoIGRhdGFQcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307XG5cdFxuXHRcdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRcdGFyZ3NbIDAgXSA9IGV2ZW50O1xuXHRcblx0XHRcdGZvciAoIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRhcmdzWyBpIF0gPSBhcmd1bWVudHNbIGkgXTtcblx0XHRcdH1cblx0XG5cdFx0XHRldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7XG5cdFxuXHRcdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdFx0aWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBEZXRlcm1pbmUgaGFuZGxlcnNcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblx0XG5cdFx0XHQvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1c1xuXHRcdFx0aSA9IDA7XG5cdFx0XHR3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblx0XG5cdFx0XHRcdGogPSAwO1xuXHRcdFx0XHR3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJlxuXHRcdFx0XHRcdCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcblx0XHRcdFx0XHQvLyBUcmlnZ2VyZWQgZXZlbnQgbXVzdCBlaXRoZXIgMSkgaGF2ZSBubyBuYW1lc3BhY2UsIG9yIDIpIGhhdmUgbmFtZXNwYWNlKHMpXG5cdFx0XHRcdFx0Ly8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuXG5cdFx0XHRcdFx0aWYgKCAhZXZlbnQucm5hbWVzcGFjZSB8fCBldmVudC5ybmFtZXNwYWNlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHtcblx0XG5cdFx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0XHRldmVudC5kYXRhID0gaGFuZGxlT2JqLmRhdGE7XG5cdFxuXHRcdFx0XHRcdFx0cmV0ID0gKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSApLmhhbmRsZSB8fFxuXHRcdFx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlciApLmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0XHRpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkge1xuXHRcdFx0XHRzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG5cdFx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0XHRkZWxlZ2F0ZUNvdW50ID0gaGFuZGxlcnMuZGVsZWdhdGVDb3VudCxcblx0XHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OVxuXHRcdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdFx0Ly8gQmxhY2staG9sZSBTVkcgPHVzZT4gaW5zdGFuY2UgdHJlZXMgKCMxMzE4MClcblx0XHRcdC8vXG5cdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NDJcblx0XHRcdC8vIEF2b2lkIG5vbi1sZWZ0LWNsaWNrIGluIEZGIGJ1dCBkb24ndCBibG9jayBJRSByYWRpbyBldmVudHMgKCMzODYxLCBnaC0yMzQzKVxuXHRcdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJlxuXHRcdFx0XHQoIGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIiB8fCBpc05hTiggZXZlbnQuYnV0dG9uICkgfHwgZXZlbnQuYnV0dG9uIDwgMSApICkge1xuXHRcblx0XHRcdFx0Zm9yICggOyBjdXIgIT09IHRoaXM7IGN1ciA9IGN1ci5wYXJlbnROb2RlIHx8IHRoaXMgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KVxuXHRcdFx0XHRcdC8vIERvbid0IHByb2Nlc3MgY2xpY2tzIG9uIGRpc2FibGVkIGVsZW1lbnRzICgjNjkxMSwgIzgxNjUsICMxMTM4MiwgIzExNzY0KVxuXHRcdFx0XHRcdGlmICggY3VyLm5vZGVUeXBlID09PSAxICYmICggY3VyLmRpc2FibGVkICE9PSB0cnVlIHx8IGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIiApICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlcyA9IFtdO1xuXHRcdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBkZWxlZ2F0ZUNvdW50OyBpKysgKSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoIzEzMjAzKVxuXHRcdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblx0XG5cdFx0XHRcdFx0XHRcdGlmICggbWF0Y2hlc1sgc2VsIF0gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdFx0XHRtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdFx0alF1ZXJ5KCBzZWwsIHRoaXMgKS5pbmRleCggY3VyICkgPiAtMSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZmluZCggc2VsLCB0aGlzLCBudWxsLCBbIGN1ciBdICkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmICggbWF0Y2hlc1sgc2VsIF0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogbWF0Y2hlcyB9ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVyc1xuXHRcdFx0aWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRoYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiB0aGlzLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGhhbmRsZXJRdWV1ZTtcblx0XHR9LFxuXHRcblx0XHRhZGRQcm9wOiBmdW5jdGlvbiggbmFtZSwgaG9vayApIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggalF1ZXJ5LkV2ZW50LnByb3RvdHlwZSwgbmFtZSwge1xuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFxuXHRcdFx0XHRnZXQ6IGpRdWVyeS5pc0Z1bmN0aW9uKCBob29rICkgP1xuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCB0aGlzLm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGhvb2soIHRoaXMub3JpZ2luYWxFdmVudCApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gOlxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCB0aGlzLm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFsgbmFtZSBdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIHRoaXMsIG5hbWUsIHtcblx0XHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0sXG5cdFxuXHRcdGZpeDogZnVuY3Rpb24oIG9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRyZXR1cm4gb3JpZ2luYWxFdmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRcdG9yaWdpbmFsRXZlbnQgOlxuXHRcdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7XG5cdFx0fSxcblx0XG5cdFx0c3BlY2lhbDoge1xuXHRcdFx0bG9hZDoge1xuXHRcblx0XHRcdFx0Ly8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuXHRcdFx0XHRub0J1YmJsZTogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdGZvY3VzOiB7XG5cdFxuXHRcdFx0XHQvLyBGaXJlIG5hdGl2ZSBldmVudCBpZiBwb3NzaWJsZSBzbyBibHVyL2ZvY3VzIHNlcXVlbmNlIGlzIGNvcnJlY3Rcblx0XHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmZvY3VzKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNpblwiXG5cdFx0XHR9LFxuXHRcdFx0Ymx1cjoge1xuXHRcdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdFx0dGhpcy5ibHVyKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIlxuXHRcdFx0fSxcblx0XHRcdGNsaWNrOiB7XG5cdFxuXHRcdFx0XHQvLyBGb3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodFxuXHRcdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHRcdHRoaXMuY2xpY2soKTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBldmVudC50YXJnZXQsIFwiYVwiICk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFxuXHRcdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRcdHBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHRcdC8vIEZpcmVmb3ggZG9lc24ndCBhbGVydCBpZiB0aGUgcmV0dXJuVmFsdWUgZmllbGQgaXMgbm90IHNldC5cblx0XHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0XG5cdGpRdWVyeS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBoYW5kbGUgKSB7XG5cdFxuXHRcdC8vIFRoaXMgXCJpZlwiIGlzIG5lZWRlZCBmb3IgcGxhaW4gb2JqZWN0c1xuXHRcdGlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuXHRcdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUgKTtcblx0XHR9XG5cdH07XG5cdFxuXHRqUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHtcblx0XG5cdFx0Ly8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkXG5cdFx0aWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50ICkgKSB7XG5cdFx0XHRyZXR1cm4gbmV3IGpRdWVyeS5FdmVudCggc3JjLCBwcm9wcyApO1xuXHRcdH1cblx0XG5cdFx0Ly8gRXZlbnQgb2JqZWN0XG5cdFx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0XHR0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG5cdFx0XHR0aGlzLnR5cGUgPSBzcmMudHlwZTtcblx0XG5cdFx0XHQvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZFxuXHRcdFx0Ly8gYnkgYSBoYW5kbGVyIGxvd2VyIGRvd24gdGhlIHRyZWU7IHJlZmxlY3QgdGhlIGNvcnJlY3QgdmFsdWUuXG5cdFx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdFx0c3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJlxuXHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9Mi4zIG9ubHlcblx0XHRcdFx0XHRzcmMucmV0dXJuVmFsdWUgPT09IGZhbHNlID9cblx0XHRcdFx0cmV0dXJuVHJ1ZSA6XG5cdFx0XHRcdHJldHVybkZhbHNlO1xuXHRcblx0XHRcdC8vIENyZWF0ZSB0YXJnZXQgcHJvcGVydGllc1xuXHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDw9NiAtIDcgb25seVxuXHRcdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHRcdHRoaXMudGFyZ2V0ID0gKCBzcmMudGFyZ2V0ICYmIHNyYy50YXJnZXQubm9kZVR5cGUgPT09IDMgKSA/XG5cdFx0XHRcdHNyYy50YXJnZXQucGFyZW50Tm9kZSA6XG5cdFx0XHRcdHNyYy50YXJnZXQ7XG5cdFxuXHRcdFx0dGhpcy5jdXJyZW50VGFyZ2V0ID0gc3JjLmN1cnJlbnRUYXJnZXQ7XG5cdFx0XHR0aGlzLnJlbGF0ZWRUYXJnZXQgPSBzcmMucmVsYXRlZFRhcmdldDtcblx0XG5cdFx0Ly8gRXZlbnQgdHlwZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdFx0fVxuXHRcblx0XHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRcdGlmICggcHJvcHMgKSB7XG5cdFx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApO1xuXHRcdH1cblx0XG5cdFx0Ly8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmVcblx0XHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblx0XG5cdFx0Ly8gTWFyayBpdCBhcyBmaXhlZFxuXHRcdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xuXHR9O1xuXHRcblx0Ly8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG5cdC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcblx0alF1ZXJ5LkV2ZW50LnByb3RvdHlwZSA9IHtcblx0XHRjb25zdHJ1Y3RvcjogalF1ZXJ5LkV2ZW50LFxuXHRcdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdFx0aXNQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRcdGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0XHRpc1NpbXVsYXRlZDogZmFsc2UsXG5cdFxuXHRcdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXHRcblx0XHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblx0XG5cdFx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblx0XG5cdFx0XHR0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblx0XG5cdFx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cdFxuXHRcdFx0dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cdFxuXHRcdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHRcblx0XHRcdHRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9O1xuXHRcblx0Ly8gSW5jbHVkZXMgYWxsIGNvbW1vbiBldmVudCBwcm9wcyBpbmNsdWRpbmcgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnQgc3BlY2lmaWMgcHJvcHNcblx0alF1ZXJ5LmVhY2goIHtcblx0XHRhbHRLZXk6IHRydWUsXG5cdFx0YnViYmxlczogdHJ1ZSxcblx0XHRjYW5jZWxhYmxlOiB0cnVlLFxuXHRcdGNoYW5nZWRUb3VjaGVzOiB0cnVlLFxuXHRcdGN0cmxLZXk6IHRydWUsXG5cdFx0ZGV0YWlsOiB0cnVlLFxuXHRcdGV2ZW50UGhhc2U6IHRydWUsXG5cdFx0bWV0YUtleTogdHJ1ZSxcblx0XHRwYWdlWDogdHJ1ZSxcblx0XHRwYWdlWTogdHJ1ZSxcblx0XHRzaGlmdEtleTogdHJ1ZSxcblx0XHR2aWV3OiB0cnVlLFxuXHRcdFwiY2hhclwiOiB0cnVlLFxuXHRcdGNoYXJDb2RlOiB0cnVlLFxuXHRcdGtleTogdHJ1ZSxcblx0XHRrZXlDb2RlOiB0cnVlLFxuXHRcdGJ1dHRvbjogdHJ1ZSxcblx0XHRidXR0b25zOiB0cnVlLFxuXHRcdGNsaWVudFg6IHRydWUsXG5cdFx0Y2xpZW50WTogdHJ1ZSxcblx0XHRvZmZzZXRYOiB0cnVlLFxuXHRcdG9mZnNldFk6IHRydWUsXG5cdFx0cG9pbnRlcklkOiB0cnVlLFxuXHRcdHBvaW50ZXJUeXBlOiB0cnVlLFxuXHRcdHNjcmVlblg6IHRydWUsXG5cdFx0c2NyZWVuWTogdHJ1ZSxcblx0XHR0YXJnZXRUb3VjaGVzOiB0cnVlLFxuXHRcdHRvRWxlbWVudDogdHJ1ZSxcblx0XHR0b3VjaGVzOiB0cnVlLFxuXHRcblx0XHR3aGljaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIGJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjtcblx0XG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCAmJiBya2V5RXZlbnQudGVzdCggZXZlbnQudHlwZSApICkge1xuXHRcdFx0XHRyZXR1cm4gZXZlbnQuY2hhckNvZGUgIT0gbnVsbCA/IGV2ZW50LmNoYXJDb2RlIDogZXZlbnQua2V5Q29kZTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGNsaWNrOiAxID09PSBsZWZ0OyAyID09PSBtaWRkbGU7IDMgPT09IHJpZ2h0XG5cdFx0XHRpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCAmJiBybW91c2VFdmVudC50ZXN0KCBldmVudC50eXBlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGJ1dHRvbiAmIDEgPyAxIDogKCBidXR0b24gJiAyID8gMyA6ICggYnV0dG9uICYgNCA/IDIgOiAwICkgKSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBldmVudC53aGljaDtcblx0XHR9XG5cdH0sIGpRdWVyeS5ldmVudC5hZGRQcm9wICk7XG5cdFxuXHQvLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3Ncblx0Ly8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS5cblx0Ly8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXRcblx0Ly9cblx0Ly8gU3VwcG9ydDogU2FmYXJpIDcgb25seVxuXHQvLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZTpcblx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDcwMjU4XG5cdC8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuXG5cdGpRdWVyeS5lYWNoKCB7XG5cdFx0bW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcblx0XHRtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsXG5cdFx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdFx0cG9pbnRlcmxlYXZlOiBcInBvaW50ZXJvdXRcIlxuXHR9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IGZpeCxcblx0XHRcdGJpbmRUeXBlOiBmaXgsXG5cdFxuXHRcdFx0aGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHZhciByZXQsXG5cdFx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0XHRyZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCxcblx0XHRcdFx0XHRoYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7XG5cdFxuXHRcdFx0XHQvLyBGb3IgbW91c2VlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0XHQvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuXHRcdFx0XHRpZiAoICFyZWxhdGVkIHx8ICggcmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqUXVlcnkuY29udGFpbnMoIHRhcmdldCwgcmVsYXRlZCApICkgKSB7XG5cdFx0XHRcdFx0ZXZlbnQudHlwZSA9IGhhbmRsZU9iai5vcmlnVHlwZTtcblx0XHRcdFx0XHRyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH07XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XG5cdFx0b246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdFx0fSxcblx0XHRvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG5cdFx0fSxcblx0XHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdFx0dmFyIGhhbmRsZU9iaiwgdHlwZTtcblx0XHRcdGlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkge1xuXHRcblx0XHRcdFx0Ly8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudFxuXHRcdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRcdGpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoXG5cdFx0XHRcdFx0aGFuZGxlT2JqLm5hbWVzcGFjZSA/XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOlxuXHRcdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRcdGhhbmRsZU9iai5zZWxlY3Rvcixcblx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlclxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0XHR0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHR2YXJcblx0XG5cdFx0LyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuXHRcblx0XHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VzbGludC9lc2xpbnQvaXNzdWVzLzMyMjlcblx0XHRyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSopW14+XSopXFwvPi9naSxcblx0XG5cdFx0LyogZXNsaW50LWVuYWJsZSAqL1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTEwIC0gMTEsIEVkZ2UgMTIgLSAxM1xuXHRcdC8vIEluIElFL0VkZ2UgdXNpbmcgcmVnZXggZ3JvdXBzIGhlcmUgY2F1c2VzIHNldmVyZSBzbG93ZG93bnMuXG5cdFx0Ly8gU2VlIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvMTczNjUxMi9cblx0XHRybm9Jbm5lcmh0bWwgPSAvPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxcblx0XG5cdFx0Ly8gY2hlY2tlZD1cImNoZWNrZWRcIiBvciBjaGVja2VkXG5cdFx0cmNoZWNrZWQgPSAvY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLFxuXHRcdHJzY3JpcHRUeXBlTWFza2VkID0gL150cnVlXFwvKC4qKS8sXG5cdFx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO1xuXHRcblx0ZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRcdGlmICggalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBjb250ZW50Lm5vZGVUeXBlICE9PSAxMSA/IGNvbnRlbnQgOiBjb250ZW50LmZpcnN0Q2hpbGQsIFwidHJcIiApICkge1xuXHRcblx0XHRcdHJldHVybiBlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInRib2R5XCIgKVsgMCBdIHx8IGVsZW07XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXHRcblx0Ly8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuXHRmdW5jdGlvbiBkaXNhYmxlU2NyaXB0KCBlbGVtICkge1xuXHRcdGVsZW0udHlwZSA9ICggZWxlbS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICkgIT09IG51bGwgKSArIFwiL1wiICsgZWxlbS50eXBlO1xuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cdGZ1bmN0aW9uIHJlc3RvcmVTY3JpcHQoIGVsZW0gKSB7XG5cdFx0dmFyIG1hdGNoID0gcnNjcmlwdFR5cGVNYXNrZWQuZXhlYyggZWxlbS50eXBlICk7XG5cdFxuXHRcdGlmICggbWF0Y2ggKSB7XG5cdFx0XHRlbGVtLnR5cGUgPSBtYXRjaFsgMSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggXCJ0eXBlXCIgKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkge1xuXHRcdHZhciBpLCBsLCB0eXBlLCBwZGF0YU9sZCwgcGRhdGFDdXIsIHVkYXRhT2xkLCB1ZGF0YUN1ciwgZXZlbnRzO1xuXHRcblx0XHRpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHQvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLlxuXHRcdGlmICggZGF0YVByaXYuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0XHRwZGF0YU9sZCA9IGRhdGFQcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0XHRwZGF0YUN1ciA9IGRhdGFQcml2LnNldCggZGVzdCwgcGRhdGFPbGQgKTtcblx0XHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblx0XG5cdFx0XHRpZiAoIGV2ZW50cyApIHtcblx0XHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdFx0cGRhdGFDdXIuZXZlbnRzID0ge307XG5cdFxuXHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IGV2ZW50c1sgdHlwZSBdLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIDIuIENvcHkgdXNlciBkYXRhXG5cdFx0aWYgKCBkYXRhVXNlci5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHRcdHVkYXRhT2xkID0gZGF0YVVzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHRcdHVkYXRhQ3VyID0galF1ZXJ5LmV4dGVuZCgge30sIHVkYXRhT2xkICk7XG5cdFxuXHRcdFx0ZGF0YVVzZXIuc2V0KCBkZXN0LCB1ZGF0YUN1ciApO1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5cdGZ1bmN0aW9uIGZpeElucHV0KCBzcmMsIGRlc3QgKSB7XG5cdFx0dmFyIG5vZGVOYW1lID0gZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcblx0XHQvLyBGYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94IG9yIHJhZGlvIGJ1dHRvbi5cblx0XHRpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHtcblx0XHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXHRcblx0XHQvLyBGYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZCBzdGF0ZSB3aGVuIGNsb25pbmcgb3B0aW9uc1xuXHRcdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRcdGRlc3QuZGVmYXVsdFZhbHVlID0gc3JjLmRlZmF1bHRWYWx1ZTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRvbU1hbmlwKCBjb2xsZWN0aW9uLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApIHtcblx0XG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdGFyZ3MgPSBjb25jYXQuYXBwbHkoIFtdLCBhcmdzICk7XG5cdFxuXHRcdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuXHRcdFx0aU5vQ2xvbmUgPSBsIC0gMSxcblx0XHRcdHZhbHVlID0gYXJnc1sgMCBdLFxuXHRcdFx0aXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXHRcblx0XHQvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXRcblx0XHRpZiAoIGlzRnVuY3Rpb24gfHxcblx0XHRcdFx0KCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0XHQhc3VwcG9ydC5jaGVja0Nsb25lICYmIHJjaGVja2VkLnRlc3QoIHZhbHVlICkgKSApIHtcblx0XHRcdHJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdFx0dmFyIHNlbGYgPSBjb2xsZWN0aW9uLmVxKCBpbmRleCApO1xuXHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZG9tTWFuaXAoIHNlbGYsIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHRcblx0XHRpZiAoIGwgKSB7XG5cdFx0XHRmcmFnbWVudCA9IGJ1aWxkRnJhZ21lbnQoIGFyZ3MsIGNvbGxlY3Rpb25bIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgY29sbGVjdGlvbiwgaWdub3JlZCApO1xuXHRcdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXHRcblx0XHRcdGlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7XG5cdFx0XHRcdGZyYWdtZW50ID0gZmlyc3Q7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gUmVxdWlyZSBlaXRoZXIgbmV3IGNvbnRlbnQgb3IgYW4gaW50ZXJlc3QgaW4gaWdub3JlZCBlbGVtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrXG5cdFx0XHRpZiAoIGZpcnN0IHx8IGlnbm9yZWQgKSB7XG5cdFx0XHRcdHNjcmlwdHMgPSBqUXVlcnkubWFwKCBnZXRBbGwoIGZyYWdtZW50LCBcInNjcmlwdFwiICksIGRpc2FibGVTY3JpcHQgKTtcblx0XHRcdFx0aGFzU2NyaXB0cyA9IHNjcmlwdHMubGVuZ3RoO1xuXHRcblx0XHRcdFx0Ly8gVXNlIHRoZSBvcmlnaW5hbCBmcmFnbWVudCBmb3IgdGhlIGxhc3QgaXRlbVxuXHRcdFx0XHQvLyBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXBcblx0XHRcdFx0Ly8gYmVpbmcgZW1wdGllZCBpbmNvcnJlY3RseSBpbiBjZXJ0YWluIHNpdHVhdGlvbnMgKCM4MDcwKS5cblx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdG5vZGUgPSBmcmFnbWVudDtcblx0XG5cdFx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblx0XG5cdFx0XHRcdFx0XHQvLyBLZWVwIHJlZmVyZW5jZXMgdG8gY2xvbmVkIHNjcmlwdHMgZm9yIGxhdGVyIHJlc3RvcmF0aW9uXG5cdFx0XHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHNjcmlwdHMsIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCBjb2xsZWN0aW9uWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRcdGRvYyA9IHNjcmlwdHNbIHNjcmlwdHMubGVuZ3RoIC0gMSBdLm93bmVyRG9jdW1lbnQ7XG5cdFxuXHRcdFx0XHRcdC8vIFJlZW5hYmxlIHNjcmlwdHNcblx0XHRcdFx0XHRqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7XG5cdFxuXHRcdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdFx0IWRhdGFQcml2LmFjY2Vzcyggbm9kZSwgXCJnbG9iYWxFdmFsXCIgKSAmJlxuXHRcdFx0XHRcdFx0XHRqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkge1xuXHRcblx0XHRcdFx0XHRcdFx0aWYgKCBub2RlLnNyYyApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gT3B0aW9uYWwgQUpBWCBkZXBlbmRlbmN5LCBidXQgd29uJ3QgcnVuIHNjcmlwdHMgaWYgbm90IHByZXNlbnRcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5fZXZhbFVybCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0RE9NRXZhbCggbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKCByY2xlYW5TY3JpcHQsIFwiXCIgKSwgZG9jICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBjb2xsZWN0aW9uO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmUoIGVsZW0sIHNlbGVjdG9yLCBrZWVwRGF0YSApIHtcblx0XHR2YXIgbm9kZSxcblx0XHRcdG5vZGVzID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSxcblx0XHRcdGkgPSAwO1xuXHRcblx0XHRmb3IgKCA7ICggbm9kZSA9IG5vZGVzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRpZiAoICFrZWVwRGF0YSAmJiBub2RlLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIG5vZGUgKSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggbm9kZS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRpZiAoIGtlZXBEYXRhICYmIGpRdWVyeS5jb250YWlucyggbm9kZS5vd25lckRvY3VtZW50LCBub2RlICkgKSB7XG5cdFx0XHRcdFx0c2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIG5vZGUgKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0aHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0XHRyZXR1cm4gaHRtbC5yZXBsYWNlKCByeGh0bWxUYWcsIFwiPCQxPjwvJDI+XCIgKTtcblx0XHR9LFxuXHRcblx0XHRjbG9uZTogZnVuY3Rpb24oIGVsZW0sIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdFx0aW5QYWdlID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblx0XG5cdFx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRcdGlmICggIXN1cHBvcnQubm9DbG9uZUNoZWNrZWQgJiYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGVsZW0ubm9kZVR5cGUgPT09IDExICkgJiZcblx0XHRcdFx0XHQhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBXZSBlc2NoZXcgU2l6emxlIGhlcmUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM6IGh0dHBzOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcblx0XHRcdFx0ZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSApO1xuXHRcdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXHRcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lXG5cdFx0XHRpZiAoIGRhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdFx0c3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTtcblx0XHRcdFx0XHRkZXN0RWxlbWVudHMgPSBkZXN0RWxlbWVudHMgfHwgZ2V0QWxsKCBjbG9uZSApO1xuXHRcblx0XHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRcdGNsb25lQ29weUV2ZW50KCBzcmNFbGVtZW50c1sgaSBdLCBkZXN0RWxlbWVudHNbIGkgXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjbG9uZUNvcHlFdmVudCggZWxlbSwgY2xvbmUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsIFwic2NyaXB0XCIgKTtcblx0XHRcdGlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdFx0cmV0dXJuIGNsb25lO1xuXHRcdH0sXG5cdFxuXHRcdGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsXG5cdFx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdFx0aSA9IDA7XG5cdFxuXHRcdFx0Zm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRpZiAoICggZGF0YSA9IGVsZW1bIGRhdGFQcml2LmV4cGFuZG8gXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NStcblx0XHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdFx0ZWxlbVsgZGF0YVByaXYuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdFx0Ly8gQXNzaWduIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHVzaW5nIGRlbGV0ZSwgc2VlIERhdGEjcmVtb3ZlXG5cdFx0XHRcdFx0XHRlbGVtWyBkYXRhVXNlci5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdH0sXG5cdFxuXHRcdHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0XHR9LFxuXHRcblx0XHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdFx0fSxcblx0XG5cdFx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0YWZ0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzLm5leHRTaWJsaW5nICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9LFxuXHRcblx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0aSA9IDA7XG5cdFxuXHRcdFx0Zm9yICggOyAoIGVsZW0gPSB0aGlzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblx0XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIGFueSByZW1haW5pbmcgbm9kZXNcblx0XHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFxuXHRcdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRkYXRhQW5kRXZlbnRzID0gZGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZmFsc2UgOiBkYXRhQW5kRXZlbnRzO1xuXHRcdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXHRcblx0XHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0aHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0XHRpID0gMCxcblx0XHRcdFx0XHRsID0gdGhpcy5sZW5ndGg7XG5cdFxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5pbm5lckhUTUw7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFNlZSBpZiB3ZSBjYW4gdGFrZSBhIHNob3J0Y3V0IGFuZCBqdXN0IHVzZSBpbm5lckhUTUxcblx0XHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdFx0IXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKSBdICkge1xuXHRcblx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXHRcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdIHx8IHt9O1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblx0XHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0ZWxlbSA9IDA7XG5cdFxuXHRcdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHRcdHRoaXMuZW1wdHkoKS5hcHBlbmQoIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdFx0fSxcblx0XG5cdFx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGlnbm9yZWQgPSBbXTtcblx0XG5cdFx0XHQvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBub24taWdub3JlZCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnRcblx0XHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblx0XG5cdFx0XHRcdGlmICggalF1ZXJ5LmluQXJyYXkoIHRoaXMsIGlnbm9yZWQgKSA8IDAgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblx0XHRcdFx0XHRcdHBhcmVudC5yZXBsYWNlQ2hpbGQoIGVsZW0sIHRoaXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0XHR9LCBpZ25vcmVkICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZWFjaCgge1xuXHRcdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRcdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdFx0aW5zZXJ0QmVmb3JlOiBcImJlZm9yZVwiLFxuXHRcdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdFx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG5cdH0sIGZ1bmN0aW9uKCBuYW1lLCBvcmlnaW5hbCApIHtcblx0XHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHZhciBlbGVtcyxcblx0XHRcdFx0cmV0ID0gW10sXG5cdFx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0XHRpID0gMDtcblx0XG5cdFx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0XHRlbGVtcyA9IGkgPT09IGxhc3QgPyB0aGlzIDogdGhpcy5jbG9uZSggdHJ1ZSApO1xuXHRcdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0Ly8gLmdldCgpIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcblx0XHR9O1xuXHR9ICk7XG5cdHZhciBybWFyZ2luID0gKCAvXm1hcmdpbi8gKTtcblx0XG5cdHZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKD8hcHgpW2EteiVdKyRcIiwgXCJpXCIgKTtcblx0XG5cdHZhciBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHksIEZpcmVmb3ggPD0zMCAoIzE1MDk4LCAjMTQxNTApXG5cdFx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHRcdC8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCBcImRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGVcIlxuXHRcdFx0dmFyIHZpZXcgPSBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG5cdFxuXHRcdFx0aWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7XG5cdFx0XHRcdHZpZXcgPSB3aW5kb3c7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSApO1xuXHRcdH07XG5cdFxuXHRcblx0XG5cdCggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdC8vIEV4ZWN1dGluZyBib3RoIHBpeGVsUG9zaXRpb24gJiBib3hTaXppbmdSZWxpYWJsZSB0ZXN0cyByZXF1aXJlIG9ubHkgb25lIGxheW91dFxuXHRcdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdFx0ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKSB7XG5cdFxuXHRcdFx0Ly8gVGhpcyBpcyBhIHNpbmdsZXRvbiwgd2UgbmVlZCB0byBleGVjdXRlIGl0IG9ubHkgb25jZVxuXHRcdFx0aWYgKCAhZGl2ICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XHRcImJveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcdFwicG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztcIiArXG5cdFx0XHRcdFwibWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDtcIiArXG5cdFx0XHRcdFwidG9wOjElO3dpZHRoOjUwJVwiO1xuXHRcdFx0ZGl2LmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHRkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXHRcblx0XHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYgKTtcblx0XHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5LCBGaXJlZm94IDw9MyAtIDQ0XG5cdFx0XHRyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSBkaXZTdHlsZS5tYXJnaW5MZWZ0ID09PSBcIjJweFwiO1xuXHRcdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5XG5cdFx0XHQvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3Rcblx0XHRcdGRpdi5zdHlsZS5tYXJnaW5SaWdodCA9IFwiNTAlXCI7XG5cdFx0XHRwaXhlbE1hcmdpblJpZ2h0VmFsID0gZGl2U3R5bGUubWFyZ2luUmlnaHQgPT09IFwiNHB4XCI7XG5cdFxuXHRcdFx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0XG5cdFx0XHQvLyBOdWxsaWZ5IHRoZSBkaXYgc28gaXQgd291bGRuJ3QgYmUgc3RvcmVkIGluIHRoZSBtZW1vcnkgYW5kXG5cdFx0XHQvLyBpdCB3aWxsIGFsc28gYmUgYSBzaWduIHRoYXQgY2hlY2tzIGFscmVhZHkgcGVyZm9ybWVkXG5cdFx0XHRkaXYgPSBudWxsO1xuXHRcdH1cblx0XG5cdFx0dmFyIHBpeGVsUG9zaXRpb25WYWwsIGJveFNpemluZ1JlbGlhYmxlVmFsLCBwaXhlbE1hcmdpblJpZ2h0VmFsLCByZWxpYWJsZU1hcmdpbkxlZnRWYWwsXG5cdFx0XHRjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG5cdFx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cdFxuXHRcdC8vIEZpbmlzaCBlYXJseSBpbiBsaW1pdGVkIChub24tYnJvd3NlcikgZW52aXJvbm1lbnRzXG5cdFx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdC8vIFN0eWxlIG9mIGNsb25lZCBlbGVtZW50IGFmZmVjdHMgc291cmNlIGVsZW1lbnQgY2xvbmVkICgjODkwOClcblx0XHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdFx0ZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJcIjtcblx0XHRzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSA9IGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9PT0gXCJjb250ZW50LWJveFwiO1xuXHRcblx0XHRjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwiYm9yZGVyOjA7d2lkdGg6OHB4O2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDtcIiArXG5cdFx0XHRcInBhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiO1xuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7XG5cdFxuXHRcdGpRdWVyeS5leHRlbmQoIHN1cHBvcnQsIHtcblx0XHRcdHBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHRcdH0sXG5cdFx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRcdHJldHVybiBib3hTaXppbmdSZWxpYWJsZVZhbDtcblx0XHRcdH0sXG5cdFx0XHRwaXhlbE1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdFx0cmV0dXJuIHBpeGVsTWFyZ2luUmlnaHRWYWw7XG5cdFx0XHR9LFxuXHRcdFx0cmVsaWFibGVNYXJnaW5MZWZ0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdFx0cmV0dXJuIHJlbGlhYmxlTWFyZ2luTGVmdFZhbDtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0gKSgpO1xuXHRcblx0XG5cdGZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdFx0dmFyIHdpZHRoLCBtaW5XaWR0aCwgbWF4V2lkdGgsIHJldCxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblx0XG5cdFx0Y29tcHV0ZWQgPSBjb21wdXRlZCB8fCBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHQvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG9ubHkgbmVlZGVkIGZvciAuY3NzKCdmaWx0ZXInKSAoIzEyNTM3KVxuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXTtcblx0XG5cdFx0XHRpZiAoIHJldCA9PT0gXCJcIiAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcblx0XHRcdFx0cmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdFx0Ly8gQW5kcm9pZCBCcm93c2VyIHJldHVybnMgcGVyY2VudGFnZSBmb3Igc29tZSB2YWx1ZXMsXG5cdFx0XHQvLyBidXQgd2lkdGggc2VlbXMgdG8gYmUgcmVsaWFibHkgcGl4ZWxzLlxuXHRcdFx0Ly8gVGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOlxuXHRcdFx0Ly8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRcdGlmICggIXN1cHBvcnQucGl4ZWxNYXJnaW5SaWdodCgpICYmIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHtcblx0XG5cdFx0XHRcdC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcblx0XHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdFx0bWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcblx0XHRcdFx0bWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDtcblx0XG5cdFx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdFx0c3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0O1xuXHRcdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblx0XG5cdFx0XHRcdC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblx0XHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdFx0c3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDtcblx0XHRcdFx0c3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cdFxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdFx0Ly8gSUUgcmV0dXJucyB6SW5kZXggdmFsdWUgYXMgYW4gaW50ZWdlci5cblx0XHRcdHJldCArIFwiXCIgOlxuXHRcdFx0cmV0O1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gYWRkR2V0SG9va0lmKCBjb25kaXRpb25GbiwgaG9va0ZuICkge1xuXHRcblx0XHQvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLlxuXHRcdHJldHVybiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGNvbmRpdGlvbkZuKCkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZVxuXHRcdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0XHRkZWxldGUgdGhpcy5nZXQ7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi5cblx0XHRcdFx0cmV0dXJuICggdGhpcy5nZXQgPSBob29rRm4gKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRcblx0XG5cdHZhclxuXHRcblx0XHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlXG5cdFx0Ly8gZXhjZXB0IFwidGFibGVcIiwgXCJ0YWJsZS1jZWxsXCIsIG9yIFwidGFibGUtY2FwdGlvblwiXG5cdFx0Ly8gU2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5XG5cdFx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRcdGNzc1Nob3cgPSB7IHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIsIGRpc3BsYXk6IFwiYmxvY2tcIiB9LFxuXHRcdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRcdGxldHRlclNwYWNpbmc6IFwiMFwiLFxuXHRcdFx0Zm9udFdlaWdodDogXCI0MDBcIlxuXHRcdH0sXG5cdFxuXHRcdGNzc1ByZWZpeGVzID0gWyBcIldlYmtpdFwiLCBcIk1velwiLCBcIm1zXCIgXSxcblx0XHRlbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLnN0eWxlO1xuXHRcblx0Ly8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuXHRmdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHtcblx0XG5cdFx0Ly8gU2hvcnRjdXQgZm9yIG5hbWVzIHRoYXQgYXJlIG5vdCB2ZW5kb3IgcHJlZml4ZWRcblx0XHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0XG5cdFx0Ly8gQ2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lc1xuXHRcdHZhciBjYXBOYW1lID0gbmFtZVsgMCBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKCAxICksXG5cdFx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXHRcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRcdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdFx0XHRyZXR1cm4gbmFtZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cdFxuXHRcdC8vIEFueSByZWxhdGl2ZSAoKy8tKSB2YWx1ZXMgaGF2ZSBhbHJlYWR5IGJlZW5cblx0XHQvLyBub3JtYWxpemVkIGF0IHRoaXMgcG9pbnRcblx0XHR2YXIgbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKTtcblx0XHRyZXR1cm4gbWF0Y2hlcyA/XG5cdFxuXHRcdFx0Ly8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgXCJzdWJ0cmFjdFwiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3Ncblx0XHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAyIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgOlxuXHRcdFx0dmFsdWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSwgaXNCb3JkZXJCb3gsIHN0eWxlcyApIHtcblx0XHR2YXIgaSA9IGV4dHJhID09PSAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICkgP1xuXHRcblx0XHRcdC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmlnaHQgbWVhc3VyZW1lbnQsIGF2b2lkIGF1Z21lbnRhdGlvblxuXHRcdFx0NCA6XG5cdFxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdFx0bmFtZSA9PT0gXCJ3aWR0aFwiID8gMSA6IDAsXG5cdFxuXHRcdFx0dmFsID0gMDtcblx0XG5cdFx0Zm9yICggOyBpIDwgNDsgaSArPSAyICkge1xuXHRcblx0XHRcdC8vIEJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpbiwgc28gYWRkIGl0IGlmIHdlIHdhbnQgaXRcblx0XHRcdGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGlzQm9yZGVyQm94ICkge1xuXHRcblx0XHRcdFx0Ly8gYm9yZGVyLWJveCBpbmNsdWRlcyBwYWRkaW5nLCBzbyByZW1vdmUgaXQgaWYgd2Ugd2FudCBjb250ZW50XG5cdFx0XHRcdGlmICggZXh0cmEgPT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdFx0aWYgKCBleHRyYSAhPT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQsIHNvIGFkZCBwYWRkaW5nXG5cdFx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XG5cdFx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQgbm9yIHBhZGRpbmcsIHNvIGFkZCBib3JkZXJcblx0XHRcdFx0aWYgKCBleHRyYSAhPT0gXCJwYWRkaW5nXCIgKSB7XG5cdFx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiB2YWw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICkge1xuXHRcblx0XHQvLyBTdGFydCB3aXRoIG9mZnNldCBwcm9wZXJ0eSwgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgYm9yZGVyLWJveCB2YWx1ZVxuXHRcdHZhciB2YWwsXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gdHJ1ZSxcblx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLFxuXHRcdFx0aXNCb3JkZXJCb3ggPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHQvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlXG5cdFx0Ly8gaW4gSUUgdGhyb3dzIGFuIGVycm9yLlxuXHRcdGlmICggZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIHtcblx0XHRcdHZhbCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbIG5hbWUgXTtcblx0XHR9XG5cdFxuXHRcdC8vIFNvbWUgbm9uLWh0bWwgZWxlbWVudHMgcmV0dXJuIHVuZGVmaW5lZCBmb3Igb2Zmc2V0V2lkdGgsIHNvIGNoZWNrIGZvciBudWxsL3VuZGVmaW5lZFxuXHRcdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHRcdC8vIE1hdGhNTCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQ5MTY2OFxuXHRcdGlmICggdmFsIDw9IDAgfHwgdmFsID09IG51bGwgKSB7XG5cdFxuXHRcdFx0Ly8gRmFsbCBiYWNrIHRvIGNvbXB1dGVkIHRoZW4gdW5jb21wdXRlZCBjc3MgaWYgbmVjZXNzYXJ5XG5cdFx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdFx0aWYgKCB2YWwgPCAwIHx8IHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQ29tcHV0ZWQgdW5pdCBpcyBub3QgcGl4ZWxzLiBTdG9wIGhlcmUgYW5kIHJldHVybi5cblx0XHRcdGlmICggcm51bW5vbnB4LnRlc3QoIHZhbCApICkge1xuXHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIENoZWNrIGZvciBzdHlsZSBpbiBjYXNlIGEgYnJvd3NlciB3aGljaCByZXR1cm5zIHVucmVsaWFibGUgdmFsdWVzXG5cdFx0XHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3ggJiZcblx0XHRcdFx0KCBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgdmFsID09PSBlbGVtLnN0eWxlWyBuYW1lIF0gKTtcblx0XG5cdFx0XHQvLyBOb3JtYWxpemUgXCJcIiwgYXV0bywgYW5kIHByZXBhcmUgZm9yIGV4dHJhXG5cdFx0XHR2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwO1xuXHRcdH1cblx0XG5cdFx0Ly8gVXNlIHRoZSBhY3RpdmUgYm94LXNpemluZyBtb2RlbCB0byBhZGQvc3VidHJhY3QgaXJyZWxldmFudCBzdHlsZXNcblx0XHRyZXR1cm4gKCB2YWwgK1xuXHRcdFx0YXVnbWVudFdpZHRoT3JIZWlnaHQoXG5cdFx0XHRcdGVsZW0sXG5cdFx0XHRcdG5hbWUsXG5cdFx0XHRcdGV4dHJhIHx8ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSxcblx0XHRcdFx0dmFsdWVJc0JvcmRlckJveCxcblx0XHRcdFx0c3R5bGVzXG5cdFx0XHQpXG5cdFx0KSArIFwicHhcIjtcblx0fVxuXHRcblx0alF1ZXJ5LmV4dGVuZCgge1xuXHRcblx0XHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0XHQvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHlcblx0XHRjc3NIb29rczoge1xuXHRcdFx0b3BhY2l0eToge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5XG5cdFx0XHRcdFx0XHR2YXIgcmV0ID0gY3VyQ1NTKCBlbGVtLCBcIm9wYWNpdHlcIiApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdFx0Y3NzTnVtYmVyOiB7XG5cdFx0XHRcImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50XCI6IHRydWUsXG5cdFx0XHRcImNvbHVtbkNvdW50XCI6IHRydWUsXG5cdFx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XHRcImZsZXhHcm93XCI6IHRydWUsXG5cdFx0XHRcImZsZXhTaHJpbmtcIjogdHJ1ZSxcblx0XHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFx0XCJsaW5lSGVpZ2h0XCI6IHRydWUsXG5cdFx0XHRcIm9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcdFwib3JwaGFuc1wiOiB0cnVlLFxuXHRcdFx0XCJ3aWRvd3NcIjogdHJ1ZSxcblx0XHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XHRcInpvb21cIjogdHJ1ZVxuXHRcdH0sXG5cdFxuXHRcdC8vIEFkZCBpbiBwcm9wZXJ0aWVzIHdob3NlIG5hbWVzIHlvdSB3aXNoIHRvIGZpeCBiZWZvcmVcblx0XHQvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlXG5cdFx0Y3NzUHJvcHM6IHtcblx0XHRcdFwiZmxvYXRcIjogXCJjc3NGbG9hdFwiXG5cdFx0fSxcblx0XG5cdFx0Ly8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGVcblx0XHRzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHtcblx0XG5cdFx0XHQvLyBEb24ndCBzZXQgc3R5bGVzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRcdGlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0XHR2YXIgcmV0LCB0eXBlLCBob29rcyxcblx0XHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblx0XG5cdFx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8XG5cdFx0XHRcdCggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTtcblx0XG5cdFx0XHQvLyBHZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uLCB0aGVuIHVucHJlZml4ZWQgdmVyc2lvblxuXHRcdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cdFxuXHRcdFx0Ly8gQ2hlY2sgaWYgd2UncmUgc2V0dGluZyBhIHZhbHVlXG5cdFx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAoIHJldCA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmIHJldFsgMSBdICkge1xuXHRcdFx0XHRcdHZhbHVlID0gYWRqdXN0Q1NTKCBlbGVtLCBuYW1lLCByZXQgKTtcblx0XG5cdFx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdFx0dHlwZSA9IFwibnVtYmVyXCI7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldCAoIzcxMTYpXG5cdFx0XHRcdGlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBJZiBhIG51bWJlciB3YXMgcGFzc2VkIGluLCBhZGQgdGhlIHVuaXQgKGV4Y2VwdCBmb3IgY2VydGFpbiBDU1MgcHJvcGVydGllcylcblx0XHRcdFx0aWYgKCB0eXBlID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdHZhbHVlICs9IHJldCAmJiByZXRbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIGJhY2tncm91bmQtKiBwcm9wcyBhZmZlY3Qgb3JpZ2luYWwgY2xvbmUncyB2YWx1ZXNcblx0XHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSBcImluaGVyaXRcIjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlXG5cdFx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fFxuXHRcdFx0XHRcdCggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XG5cdFx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0XHQoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBPdGhlcndpc2UganVzdCBnZXQgdGhlIHZhbHVlIGZyb20gdGhlIHN0eWxlIG9iamVjdFxuXHRcdFx0XHRyZXR1cm4gc3R5bGVbIG5hbWUgXTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRjc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkge1xuXHRcdFx0dmFyIHZhbCwgbnVtLCBob29rcyxcblx0XHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG5cdFxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8XG5cdFx0XHRcdCggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTtcblx0XG5cdFx0XHQvLyBUcnkgcHJlZml4ZWQgbmFtZSBmb2xsb3dlZCBieSB0aGUgdW5wcmVmaXhlZCBuYW1lXG5cdFx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblx0XG5cdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0XHR2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcblx0XHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0XHRpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcblx0XHRcdFx0dmFsID0gY3NzTm9ybWFsVHJhbnNmb3JtWyBuYW1lIF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gTWFrZSBudW1lcmljIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljXG5cdFx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0XHRudW0gPSBwYXJzZUZsb2F0KCB2YWwgKTtcblx0XHRcdFx0cmV0dXJuIGV4dHJhID09PSB0cnVlIHx8IGlzRmluaXRlKCBudW0gKSA/IG51bSB8fCAwIDogdmFsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHZhbDtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5lYWNoKCBbIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0XHRqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHtcblx0XHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XG5cdFx0XHRcdFx0Ly8gQ2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG5cdFx0XHRcdFx0Ly8gYnV0IGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXRcblx0XHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJlxuXHRcblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4K1xuXHRcdFx0XHRcdFx0Ly8gVGFibGUgY29sdW1ucyBpbiBTYWZhcmkgaGF2ZSBub24temVybyBvZmZzZXRXaWR0aCAmIHplcm9cblx0XHRcdFx0XHRcdC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIHVubGVzcyBkaXNwbGF5IGlzIGNoYW5nZWQuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHRcdFx0XHRcdC8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEgZGlzY29ubmVjdGVkIG5vZGVcblx0XHRcdFx0XHRcdC8vIGluIElFIHRocm93cyBhbiBlcnJvci5cblx0XHRcdFx0XHRcdCggIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggfHwgIWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKSA/XG5cdFx0XHRcdFx0XHRcdHN3YXAoIGVsZW0sIGNzc1Nob3csIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApO1xuXHRcdFx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdFx0XHRnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHtcblx0XHRcdFx0dmFyIG1hdGNoZXMsXG5cdFx0XHRcdFx0c3R5bGVzID0gZXh0cmEgJiYgZ2V0U3R5bGVzKCBlbGVtICksXG5cdFx0XHRcdFx0c3VidHJhY3QgPSBleHRyYSAmJiBhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRcdGVsZW0sXG5cdFx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiLFxuXHRcdFx0XHRcdFx0c3R5bGVzXG5cdFx0XHRcdFx0KTtcblx0XG5cdFx0XHRcdC8vIENvbnZlcnQgdG8gcGl4ZWxzIGlmIHZhbHVlIGFkanVzdG1lbnQgaXMgbmVlZGVkXG5cdFx0XHRcdGlmICggc3VidHJhY3QgJiYgKCBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiZcblx0XHRcdFx0XHQoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSAhPT0gXCJweFwiICkge1xuXHRcblx0XHRcdFx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9ICk7XG5cdFxuXHRqUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdFx0cmV0dXJuICggcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiApICkgfHxcblx0XHRcdFx0XHRlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLVxuXHRcdFx0XHRcdFx0c3dhcCggZWxlbSwgeyBtYXJnaW5MZWZ0OiAwIH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuXHRcdFx0XHRcdFx0fSApXG5cdFx0XHRcdFx0KSArIFwicHhcIjtcblx0XHRcdH1cblx0XHR9XG5cdCk7XG5cdFxuXHQvLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5cdGpRdWVyeS5lYWNoKCB7XG5cdFx0bWFyZ2luOiBcIlwiLFxuXHRcdHBhZGRpbmc6IFwiXCIsXG5cdFx0Ym9yZGVyOiBcIldpZHRoXCJcblx0fSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0gPSB7XG5cdFx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRcdGV4cGFuZGVkID0ge30sXG5cdFxuXHRcdFx0XHRcdC8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuXHRcdFx0XHRcdHBhcnRzID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUuc3BsaXQoIFwiIFwiICkgOiBbIHZhbHVlIF07XG5cdFxuXHRcdFx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdFx0cGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gZXhwYW5kZWQ7XG5cdFx0XHR9XG5cdFx0fTtcblx0XG5cdFx0aWYgKCAhcm1hcmdpbi50ZXN0KCBwcmVmaXggKSApIHtcblx0XHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBzdHlsZXMsIGxlbixcblx0XHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0XHRpID0gMDtcblx0XG5cdFx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XHRcdFx0XHRsZW4gPSBuYW1lLmxlbmd0aDtcblx0XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRtYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRyZXR1cm4gbWFwO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0XHR9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRmdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdFx0cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcblx0fVxuXHRqUXVlcnkuVHdlZW4gPSBUd2Vlbjtcblx0XG5cdFR3ZWVuLnByb3RvdHlwZSA9IHtcblx0XHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdFx0aW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuXHRcdFx0dGhpcy5lbGVtID0gZWxlbTtcblx0XHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0XHR0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0O1xuXHRcdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHRcdHRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7XG5cdFx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHRcdHRoaXMudW5pdCA9IHVuaXQgfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdFx0fSxcblx0XHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblx0XG5cdFx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdFx0aG9va3MuZ2V0KCB0aGlzICkgOlxuXHRcdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7XG5cdFx0fSxcblx0XHRydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdFx0dmFyIGVhc2VkLFxuXHRcdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cdFxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKSB7XG5cdFx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRcdHBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvblxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IHBlcmNlbnQ7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cdFxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuc3RlcCApIHtcblx0XHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0XHRob29rcy5zZXQoIHRoaXMgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fTtcblx0XG5cdFR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblx0XG5cdFR3ZWVuLnByb3BIb29rcyA9IHtcblx0XHRfZGVmYXVsdDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQ7XG5cdFxuXHRcdFx0XHQvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LFxuXHRcdFx0XHQvLyBvciB3aGVuIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHN0eWxlIHByb3BlcnR5IHRoYXQgZXhpc3RzLlxuXHRcdFx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgIT09IDEgfHxcblx0XHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJiB0d2Vlbi5lbGVtLnN0eWxlWyB0d2Vlbi5wcm9wIF0gPT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdFx0Ly8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlscy5cblx0XHRcdFx0Ly8gU2ltcGxlIHZhbHVlcyBzdWNoIGFzIFwiMTBweFwiIGFyZSBwYXJzZWQgdG8gRmxvYXQ7XG5cdFx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRcdHJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIFwiXCIgKTtcblx0XG5cdFx0XHRcdC8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgXCJhdXRvXCIgYXJlIGNvbnZlcnRlZCB0byAwLlxuXHRcdFx0XHRyZXR1cm4gIXJlc3VsdCB8fCByZXN1bHQgPT09IFwiYXV0b1wiID8gMCA6IHJlc3VsdDtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XG5cdFx0XHRcdC8vIFVzZSBzdGVwIGhvb2sgZm9yIGJhY2sgY29tcGF0LlxuXHRcdFx0XHQvLyBVc2UgY3NzSG9vayBpZiBpdHMgdGhlcmUuXG5cdFx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRcdGlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0KCB0d2Vlbi5lbGVtLnN0eWxlWyBqUXVlcnkuY3NzUHJvcHNbIHR3ZWVuLnByb3AgXSBdICE9IG51bGwgfHxcblx0XHRcdFx0XHRcdGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRcblx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0Ly8gUGFuaWMgYmFzZWQgYXBwcm9hY2ggdG8gc2V0dGluZyB0aGluZ3Mgb24gZGlzY29ubmVjdGVkIG5vZGVzXG5cdFR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdFxuXHRqUXVlcnkuZWFzaW5nID0ge1xuXHRcdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0XHRyZXR1cm4gcDtcblx0XHR9LFxuXHRcdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRcdHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7XG5cdFx0fSxcblx0XHRfZGVmYXVsdDogXCJzd2luZ1wiXG5cdH07XG5cdFxuXHRqUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblx0XG5cdC8vIEJhY2sgY29tcGF0IDwxLjggZXh0ZW5zaW9uIHBvaW50XG5cdGpRdWVyeS5meC5zdGVwID0ge307XG5cdFxuXHRcblx0XG5cdFxuXHR2YXJcblx0XHRmeE5vdywgdGltZXJJZCxcblx0XHRyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxcblx0XHRycnVuID0gL3F1ZXVlSG9va3MkLztcblx0XG5cdGZ1bmN0aW9uIHJhZigpIHtcblx0XHRpZiAoIHRpbWVySWQgKSB7XG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCByYWYgKTtcblx0XHRcdGpRdWVyeS5meC50aWNrKCk7XG5cdFx0fVxuXHR9XG5cdFxuXHQvLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5XG5cdGZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHRcdH0gKTtcblx0XHRyZXR1cm4gKCBmeE5vdyA9IGpRdWVyeS5ub3coKSApO1xuXHR9XG5cdFxuXHQvLyBHZW5lcmF0ZSBwYXJhbWV0ZXJzIHRvIGNyZWF0ZSBhIHN0YW5kYXJkIGFuaW1hdGlvblxuXHRmdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkge1xuXHRcdHZhciB3aGljaCxcblx0XHRcdGkgPSAwLFxuXHRcdFx0YXR0cnMgPSB7IGhlaWdodDogdHlwZSB9O1xuXHRcblx0XHQvLyBJZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsXG5cdFx0Ly8gb3RoZXJ3aXNlIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHRcblx0XHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0XHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7XG5cdFx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdFx0YXR0cnNbIFwibWFyZ2luXCIgKyB3aGljaCBdID0gYXR0cnNbIFwicGFkZGluZ1wiICsgd2hpY2ggXSA9IHR5cGU7XG5cdFx0fVxuXHRcblx0XHRpZiAoIGluY2x1ZGVXaWR0aCApIHtcblx0XHRcdGF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gYXR0cnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKCB2YWx1ZSwgcHJvcCwgYW5pbWF0aW9uICkge1xuXHRcdHZhciB0d2Vlbixcblx0XHRcdGNvbGxlY3Rpb24gPSAoIEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCBBbmltYXRpb24udHdlZW5lcnNbIFwiKlwiIF0gKSxcblx0XHRcdGluZGV4ID0gMCxcblx0XHRcdGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRpZiAoICggdHdlZW4gPSBjb2xsZWN0aW9uWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgcHJvcCwgdmFsdWUgKSApICkge1xuXHRcblx0XHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdFx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIGhvb2tzLCBvbGRmaXJlLCBwcm9wVHdlZW4sIHJlc3RvcmVEaXNwbGF5LCBkaXNwbGF5LFxuXHRcdFx0aXNCb3ggPSBcIndpZHRoXCIgaW4gcHJvcHMgfHwgXCJoZWlnaHRcIiBpbiBwcm9wcyxcblx0XHRcdGFuaW0gPSB0aGlzLFxuXHRcdFx0b3JpZyA9IHt9LFxuXHRcdFx0c3R5bGUgPSBlbGVtLnN0eWxlLFxuXHRcdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbldpdGhpblRyZWUoIGVsZW0gKSxcblx0XHRcdGRhdGFTaG93ID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFxuXHRcdC8vIFF1ZXVlLXNraXBwaW5nIGFuaW1hdGlvbnMgaGlqYWNrIHRoZSBmeCBob29rc1xuXHRcdGlmICggIW9wdHMucXVldWUgKSB7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0XHRpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7XG5cdFx0XHRcdGhvb2tzLnVucXVldWVkID0gMDtcblx0XHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRcdGhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoICFob29rcy51bnF1ZXVlZCApIHtcblx0XHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRob29rcy51bnF1ZXVlZCsrO1xuXHRcblx0XHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdC8vIEVuc3VyZSB0aGUgY29tcGxldGUgaGFuZGxlciBpcyBjYWxsZWQgYmVmb3JlIHRoaXMgY29tcGxldGVzXG5cdFx0XHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRcdGlmICggIWpRdWVyeS5xdWV1ZSggZWxlbSwgXCJmeFwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblx0XG5cdFx0Ly8gRGV0ZWN0IHNob3cvaGlkZSBhbmltYXRpb25zXG5cdFx0Zm9yICggcHJvcCBpbiBwcm9wcyApIHtcblx0XHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRcdGlmICggcmZ4dHlwZXMudGVzdCggdmFsdWUgKSApIHtcblx0XHRcdFx0ZGVsZXRlIHByb3BzWyBwcm9wIF07XG5cdFx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gKCBoaWRkZW4gPyBcImhpZGVcIiA6IFwic2hvd1wiICkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFByZXRlbmQgdG8gYmUgaGlkZGVuIGlmIHRoaXMgaXMgYSBcInNob3dcIiBhbmRcblx0XHRcdFx0XHQvLyB0aGVyZSBpcyBzdGlsbCBkYXRhIGZyb20gYSBzdG9wcGVkIHNob3cvaGlkZVxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGhpZGRlbiA9IHRydWU7XG5cdFxuXHRcdFx0XHRcdC8vIElnbm9yZSBhbGwgb3RoZXIgbm8tb3Agc2hvdy9oaWRlIGRhdGFcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdG9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvLyBCYWlsIG91dCBpZiB0aGlzIGlzIGEgbm8tb3AgbGlrZSAuaGlkZSgpLmhpZGUoKVxuXHRcdHByb3BUd2VlbiA9ICFqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcHMgKTtcblx0XHRpZiAoICFwcm9wVHdlZW4gJiYgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9yaWcgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdC8vIFJlc3RyaWN0IFwib3ZlcmZsb3dcIiBhbmQgXCJkaXNwbGF5XCIgc3R5bGVzIGR1cmluZyBib3ggYW5pbWF0aW9uc1xuXHRcdGlmICggaXNCb3ggJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDEzXG5cdFx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFIGRvZXMgbm90IGluZmVyIHRoZSBzaG9ydGhhbmRcblx0XHRcdC8vIGZyb20gaWRlbnRpY2FsbHktdmFsdWVkIG92ZXJmbG93WCBhbmQgb3ZlcmZsb3dZXG5cdFx0XHRvcHRzLm92ZXJmbG93ID0gWyBzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYLCBzdHlsZS5vdmVyZmxvd1kgXTtcblx0XG5cdFx0XHQvLyBJZGVudGlmeSBhIGRpc3BsYXkgdHlwZSwgcHJlZmVycmluZyBvbGQgc2hvdy9oaWRlIGRhdGEgb3ZlciB0aGUgQ1NTIGNhc2NhZGVcblx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZGF0YVNob3cgJiYgZGF0YVNob3cuZGlzcGxheTtcblx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0XHR9XG5cdFx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgKSB7XG5cdFx0XHRcdFx0ZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0XHQvLyBHZXQgbm9uZW1wdHkgdmFsdWUocykgYnkgdGVtcG9yYXJpbHkgZm9yY2luZyB2aXNpYmlsaXR5XG5cdFx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdLCB0cnVlICk7XG5cdFx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXkgfHwgcmVzdG9yZURpc3BsYXk7XG5cdFx0XHRcdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBbmltYXRlIGlubGluZSBlbGVtZW50cyBhcyBpbmxpbmUtYmxvY2tcblx0XHRcdGlmICggZGlzcGxheSA9PT0gXCJpbmxpbmVcIiB8fCBkaXNwbGF5ID09PSBcImlubGluZS1ibG9ja1wiICYmIHJlc3RvcmVEaXNwbGF5ICE9IG51bGwgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJmbG9hdFwiICkgPT09IFwibm9uZVwiICkge1xuXHRcblx0XHRcdFx0XHQvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlIGF0IHRoZSBlbmQgb2YgcHVyZSBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRcdFx0XHRcdGlmICggIXByb3BUd2VlbiApIHtcblx0XHRcdFx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHN0eWxlLmRpc3BsYXkgPSByZXN0b3JlRGlzcGxheTtcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdFx0ZGlzcGxheSA9IHN0eWxlLmRpc3BsYXk7XG5cdFx0XHRcdFx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZGlzcGxheSA9PT0gXCJub25lXCIgPyBcIlwiIDogZGlzcGxheTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGlmICggb3B0cy5vdmVyZmxvdyApIHtcblx0XHRcdHN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRcdHN0eWxlLm92ZXJmbG93WCA9IG9wdHMub3ZlcmZsb3dbIDEgXTtcblx0XHRcdFx0c3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdO1xuXHRcdFx0fSApO1xuXHRcdH1cblx0XG5cdFx0Ly8gSW1wbGVtZW50IHNob3cvaGlkZSBhbmltYXRpb25zXG5cdFx0cHJvcFR3ZWVuID0gZmFsc2U7XG5cdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcblx0XHRcdC8vIEdlbmVyYWwgc2hvdy9oaWRlIHNldHVwIGZvciB0aGlzIGVsZW1lbnQgYW5pbWF0aW9uXG5cdFx0XHRpZiAoICFwcm9wVHdlZW4gKSB7XG5cdFx0XHRcdGlmICggZGF0YVNob3cgKSB7XG5cdFx0XHRcdFx0aWYgKCBcImhpZGRlblwiIGluIGRhdGFTaG93ICkge1xuXHRcdFx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgXCJmeHNob3dcIiwgeyBkaXNwbGF5OiByZXN0b3JlRGlzcGxheSB9ICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFN0b3JlIGhpZGRlbi92aXNpYmxlIGZvciB0b2dnbGUgc28gYC5zdG9wKCkudG9nZ2xlKClgIFwicmV2ZXJzZXNcIlxuXHRcdFx0XHRpZiAoIHRvZ2dsZSApIHtcblx0XHRcdFx0XHRkYXRhU2hvdy5oaWRkZW4gPSAhaGlkZGVuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBTaG93IGVsZW1lbnRzIGJlZm9yZSBhbmltYXRpbmcgdGhlbVxuXHRcdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tbG9vcC1mdW5jICovXG5cdFxuXHRcdFx0XHRhbmltLmRvbmUoIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0LyogZXNsaW50LWVuYWJsZSBuby1sb29wLWZ1bmMgKi9cblx0XG5cdFx0XHRcdFx0Ly8gVGhlIGZpbmFsIHN0ZXAgb2YgYSBcImhpZGVcIiBhbmltYXRpb24gaXMgYWN0dWFsbHkgaGlkaW5nIHRoZSBlbGVtZW50XG5cdFx0XHRcdFx0aWYgKCAhaGlkZGVuICkge1xuXHRcdFx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgXCJmeHNob3dcIiApO1xuXHRcdFx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gUGVyLXByb3BlcnR5IHNldHVwXG5cdFx0XHRwcm9wVHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblx0XHRcdGlmICggISggcHJvcCBpbiBkYXRhU2hvdyApICkge1xuXHRcdFx0XHRkYXRhU2hvd1sgcHJvcCBdID0gcHJvcFR3ZWVuLnN0YXJ0O1xuXHRcdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0XHRwcm9wVHdlZW4uZW5kID0gcHJvcFR3ZWVuLnN0YXJ0O1xuXHRcdFx0XHRcdHByb3BUd2Vlbi5zdGFydCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuXHRcdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cdFxuXHRcdC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuXHRcdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIGluZGV4ICk7XG5cdFx0XHRlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG5cdFx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdFx0cHJvcHNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdFx0dmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7XG5cdFx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXHRcblx0XHRcdFx0Ly8gTm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBrZXlzLlxuXHRcdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRcdGlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHtcblx0XHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHRcdHZhciByZXN1bHQsXG5cdFx0XHRzdG9wcGVkLFxuXHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0bGVuZ3RoID0gQW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0Ly8gRG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yXG5cdFx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0XHR9ICksXG5cdFx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0XHRyZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksXG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zIG9ubHlcblx0XHRcdFx0XHQvLyBBcmNoYWljIGNyYXNoIGJ1ZyB3b24ndCBhbGxvdyB1cyB0byB1c2UgYDEgLSAoIDAuNSB8fCAwIClgICgjMTI0OTcpXG5cdFx0XHRcdFx0dGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLFxuXHRcdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRcdFx0bGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7XG5cdFxuXHRcdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSApO1xuXHRcblx0XHRcdFx0aWYgKCBwZXJjZW50IDwgMSAmJiBsZW5ndGggKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlbWFpbmluZztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGFuaW1hdGlvbiA9IGRlZmVycmVkLnByb21pc2UoIHtcblx0XHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRcdG9wdHM6IGpRdWVyeS5leHRlbmQoIHRydWUsIHtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nOiB7fSxcblx0XHRcdFx0XHRlYXNpbmc6IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHRcblx0XHRcdFx0fSwgb3B0aW9ucyApLFxuXHRcdFx0XHRvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG5cdFx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdFx0c3RhcnRUaW1lOiBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0XHRkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcblx0XHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdFx0Y3JlYXRlVHdlZW46IGZ1bmN0aW9uKCBwcm9wLCBlbmQgKSB7XG5cdFx0XHRcdFx0dmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLFxuXHRcdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVucy5wdXNoKCB0d2VlbiApO1xuXHRcdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdFx0fSxcblx0XHRcdFx0c3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gMCxcblx0XG5cdFx0XHRcdFx0XHQvLyBJZiB3ZSBhcmUgZ29pbmcgdG8gdGhlIGVuZCwgd2Ugd2FudCB0byBydW4gYWxsIHRoZSB0d2VlbnNcblx0XHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdFx0bGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDtcblx0XHRcdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c3RvcHBlZCA9IHRydWU7XG5cdFx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCAxICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBSZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lOyBvdGhlcndpc2UsIHJlamVjdFxuXHRcdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdH0gKSxcblx0XHRcdHByb3BzID0gYW5pbWF0aW9uLnByb3BzO1xuXHRcblx0XHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXHRcblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0cmVzdWx0ID0gQW5pbWF0aW9uLnByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRcdGlmICggcmVzdWx0ICkge1xuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXN1bHQuc3RvcCApICkge1xuXHRcdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggYW5pbWF0aW9uLmVsZW0sIGFuaW1hdGlvbi5vcHRzLnF1ZXVlICkuc3RvcCA9XG5cdFx0XHRcdFx0XHRqUXVlcnkucHJveHkoIHJlc3VsdC5zdG9wLCByZXN1bHQgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblx0XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcblx0XHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHRcdH1cblx0XG5cdFx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdFx0alF1ZXJ5LmV4dGVuZCggdGljaywge1xuXHRcdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRcdHF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZVxuXHRcdFx0fSApXG5cdFx0KTtcblx0XG5cdFx0Ly8gYXR0YWNoIGNhbGxiYWNrcyBmcm9tIG9wdGlvbnNcblx0XHRyZXR1cm4gYW5pbWF0aW9uLnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApXG5cdFx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdFx0LmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKVxuXHRcdFx0LmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7XG5cdH1cblx0XG5cdGpRdWVyeS5BbmltYXRpb24gPSBqUXVlcnkuZXh0ZW5kKCBBbmltYXRpb24sIHtcblx0XG5cdFx0dHdlZW5lcnM6IHtcblx0XHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKTtcblx0XHRcdFx0YWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7XG5cdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdH0gXVxuXHRcdH0sXG5cdFxuXHRcdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuXHRcdFx0XHRjYWxsYmFjayA9IHByb3BzO1xuXHRcdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHByb3BzID0gcHJvcHMubWF0Y2goIHJub3R3aGl0ZSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBwcm9wLFxuXHRcdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRcdGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblx0XG5cdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRwcm9wID0gcHJvcHNbIGluZGV4IF07XG5cdFx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdID0gQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW107XG5cdFx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0cHJlZmlsdGVyczogWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cdFxuXHRcdHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuXHRcdFx0aWYgKCBwcmVwZW5kICkge1xuXHRcdFx0XHRBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0QW5pbWF0aW9uLnByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcblx0XHR2YXIgb3B0ID0gc3BlZWQgJiYgdHlwZW9mIHNwZWVkID09PSBcIm9iamVjdFwiID8galF1ZXJ5LmV4dGVuZCgge30sIHNwZWVkICkgOiB7XG5cdFx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCxcblx0XHRcdGR1cmF0aW9uOiBzcGVlZCxcblx0XHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHRcdH07XG5cdFxuXHRcdC8vIEdvIHRvIHRoZSBlbmQgc3RhdGUgaWYgZnggYXJlIG9mZiBvciBpZiBkb2N1bWVudCBpcyBoaWRkZW5cblx0XHRpZiAoIGpRdWVyeS5meC5vZmYgfHwgZG9jdW1lbnQuaGlkZGVuICkge1xuXHRcdFx0b3B0LmR1cmF0aW9uID0gMDtcblx0XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9wdC5kdXJhdGlvbiA9IHR5cGVvZiBvcHQuZHVyYXRpb24gPT09IFwibnVtYmVyXCIgP1xuXHRcdFx0XHRvcHQuZHVyYXRpb24gOiBvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyA/XG5cdFx0XHRcdFx0alF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXHRcdH1cblx0XG5cdFx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdFx0aWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7XG5cdFx0XHRvcHQucXVldWUgPSBcImZ4XCI7XG5cdFx0fVxuXHRcblx0XHQvLyBRdWV1ZWluZ1xuXHRcdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cdFxuXHRcdG9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0XHRvcHQub2xkLmNhbGwoIHRoaXMgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIG9wdC5xdWV1ZSApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIG9wdC5xdWV1ZSApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFxuXHRcdHJldHVybiBvcHQ7XG5cdH07XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcblx0XHRcdC8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuXHRcdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbldpdGhpblRyZWUgKS5jc3MoIFwib3BhY2l0eVwiLCAwICkuc2hvdygpXG5cdFxuXHRcdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdFx0LmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0XHR9LFxuXHRcdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRcdHZhciBlbXB0eSA9IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wICksXG5cdFx0XHRcdG9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSxcblx0XHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cdFxuXHRcdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXHRcblx0XHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdFx0dGhpcy5xdWV1ZSggb3B0YWxsLnF1ZXVlLCBkb0FuaW1hdGlvbiApO1xuXHRcdH0sXG5cdFx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0XHR2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkge1xuXHRcdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0XHRzdG9wKCBnb3RvRW5kICk7XG5cdFx0XHR9O1xuXHRcblx0XHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdFx0dGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0XHRpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG5cdFx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICk7XG5cdFxuXHRcdFx0XHRpZiAoIGluZGV4ICkge1xuXHRcdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgJiYgcnJ1bi50ZXN0KCBpbmRleCApICkge1xuXHRcdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJlxuXHRcdFx0XHRcdFx0KCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdFx0Ly8gd2lsbCBkZXF1ZXVlIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kLlxuXHRcdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0sXG5cdFx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaW5kZXgsXG5cdFx0XHRcdFx0ZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRcdGhvb2tzID0gZGF0YVsgdHlwZSArIFwicXVldWVIb29rc1wiIF0sXG5cdFx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cdFxuXHRcdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblx0XG5cdFx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cdFxuXHRcdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRpZiAoIHF1ZXVlWyBpbmRleCBdICYmIHF1ZXVlWyBpbmRleCBdLmZpbmlzaCApIHtcblx0XHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0XHRkZWxldGUgZGF0YS5maW5pc2g7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZWFjaCggWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdFx0dmFyIGNzc0ZuID0galF1ZXJ5LmZuWyBuYW1lIF07XG5cdFx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cblx0XHRcdFx0Y3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDpcblx0XHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHRcdH07XG5cdH0gKTtcblx0XG5cdC8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcblx0alF1ZXJ5LmVhY2goIHtcblx0XHRzbGlkZURvd246IGdlbkZ4KCBcInNob3dcIiApLFxuXHRcdHNsaWRlVXA6IGdlbkZ4KCBcImhpZGVcIiApLFxuXHRcdHNsaWRlVG9nZ2xlOiBnZW5GeCggXCJ0b2dnbGVcIiApLFxuXHRcdGZhZGVJbjogeyBvcGFjaXR5OiBcInNob3dcIiB9LFxuXHRcdGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSxcblx0XHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxuXHR9LCBmdW5jdGlvbiggbmFtZSwgcHJvcHMgKSB7XG5cdFx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0XHR9O1xuXHR9ICk7XG5cdFxuXHRqUXVlcnkudGltZXJzID0gW107XG5cdGpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRpbWVyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzO1xuXHRcblx0XHRmeE5vdyA9IGpRdWVyeS5ub3coKTtcblx0XG5cdFx0Zm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblx0XG5cdFx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRcdGlmICggIXRpbWVyKCkgJiYgdGltZXJzWyBpIF0gPT09IHRpbWVyICkge1xuXHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0XHRqUXVlcnkuZnguc3RvcCgpO1xuXHRcdH1cblx0XHRmeE5vdyA9IHVuZGVmaW5lZDtcblx0fTtcblx0XG5cdGpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0XHRqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7XG5cdFx0aWYgKCB0aW1lcigpICkge1xuXHRcdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpRdWVyeS50aW1lcnMucG9wKCk7XG5cdFx0fVxuXHR9O1xuXHRcblx0alF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cdGpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRpbWVySWQgKSB7XG5cdFx0XHR0aW1lcklkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA/XG5cdFx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHJhZiApIDpcblx0XHRcdFx0d2luZG93LnNldEludGVydmFsKCBqUXVlcnkuZngudGljaywgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdFx0fVxuXHR9O1xuXHRcblx0alF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSApIHtcblx0XHRcdHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSggdGltZXJJZCApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCggdGltZXJJZCApO1xuXHRcdH1cblx0XG5cdFx0dGltZXJJZCA9IG51bGw7XG5cdH07XG5cdFxuXHRqUXVlcnkuZnguc3BlZWRzID0ge1xuXHRcdHNsb3c6IDYwMCxcblx0XHRmYXN0OiAyMDAsXG5cdFxuXHRcdC8vIERlZmF1bHQgc3BlZWRcblx0XHRfZGVmYXVsdDogNDAwXG5cdH07XG5cdFxuXHRcblx0Ly8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLlxuXHQvLyBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMDAzMjQwMTQ3NDcvaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5L1xuXHRqUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0XHR0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lO1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XG5cdFx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHtcblx0XHRcdHZhciB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTtcblx0XHRcdGhvb2tzLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApO1xuXHRcdFx0fTtcblx0XHR9ICk7XG5cdH07XG5cdFxuXHRcblx0KCBmdW5jdGlvbigpIHtcblx0XHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKSxcblx0XHRcdHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic2VsZWN0XCIgKSxcblx0XHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cdFxuXHRcdGlucHV0LnR5cGUgPSBcImNoZWNrYm94XCI7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjMgb25seVxuXHRcdC8vIERlZmF1bHQgdmFsdWUgZm9yIGEgY2hlY2tib3ggc2hvdWxkIGJlIFwib25cIlxuXHRcdHN1cHBvcnQuY2hlY2tPbiA9IGlucHV0LnZhbHVlICE9PSBcIlwiO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRcdHN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHRcdC8vIEFuIGlucHV0IGxvc2VzIGl0cyB2YWx1ZSBhZnRlciBiZWNvbWluZyBhIHJhZGlvXG5cdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblx0XHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRcdGlucHV0LnR5cGUgPSBcInJhZGlvXCI7XG5cdFx0c3VwcG9ydC5yYWRpb1ZhbHVlID0gaW5wdXQudmFsdWUgPT09IFwidFwiO1xuXHR9ICkoKTtcblx0XG5cdFxuXHR2YXIgYm9vbEhvb2ssXG5cdFx0YXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGU7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LmF0dHIsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHRcdH0sXG5cdFxuXHRcdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBuYW1lICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCB0aGlzLCBuYW1lICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0YXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblx0XG5cdFx0XHQvLyBEb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWRcblx0XHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQXR0cmlidXRlIGhvb2tzIGFyZSBkZXRlcm1pbmVkIGJ5IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuXHRcdFx0Ly8gR3JhYiBuZWNlc3NhcnkgaG9vayBpZiBvbmUgaXMgZGVmaW5lZFxuXHRcdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiB1bmRlZmluZWQgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGlmICggdmFsdWUgPT09IG51bGwgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHRcdCggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XG5cdFx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuXHRcdH0sXG5cdFxuXHRcdGF0dHJIb29rczoge1xuXHRcdFx0dHlwZToge1xuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0XHRpZiAoICFzdXBwb3J0LnJhZGlvVmFsdWUgJiYgdmFsdWUgPT09IFwicmFkaW9cIiAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCB2YWx1ZSApO1xuXHRcdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0dmFyIG5hbWUsXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cdFxuXHRcdFx0aWYgKCBhdHRyTmFtZXMgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0d2hpbGUgKCAoIG5hbWUgPSBhdHRyTmFtZXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xuXHRcblx0Ly8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuXHRib29sSG9vayA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHtcblx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcblx0XHRcdFx0Ly8gUmVtb3ZlIGJvb2xlYW4gYXR0cmlidXRlcyB3aGVuIHNldCB0byBmYWxzZVxuXHRcdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0fTtcblx0XG5cdGpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0XHR2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cdFxuXHRcdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRcdHZhciByZXQsIGhhbmRsZSxcblx0XHRcdFx0bG93ZXJjYXNlTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0XG5cdFx0XHRpZiAoICFpc1hNTCApIHtcblx0XG5cdFx0XHRcdC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXJcblx0XHRcdFx0aGFuZGxlID0gYXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdO1xuXHRcdFx0XHRhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF0gPSByZXQ7XG5cdFx0XHRcdHJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID9cblx0XHRcdFx0XHRsb3dlcmNhc2VOYW1lIDpcblx0XHRcdFx0XHRudWxsO1xuXHRcdFx0XHRhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF0gPSBoYW5kbGU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH07XG5cdH0gKTtcblx0XG5cdFxuXHRcblx0XG5cdHZhciByZm9jdXNhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0XHRyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0XHR9LFxuXHRcblx0XHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblx0XG5cdFx0XHQvLyBEb24ndCBnZXQvc2V0IHByb3BlcnRpZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBGaXggbmFtZSBhbmQgYXR0YWNoIGhvb2tzXG5cdFx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0aWYgKCBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdO1xuXHRcdH0sXG5cdFxuXHRcdHByb3BIb29rczoge1xuXHRcdFx0dGFiSW5kZXg6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdFx0XHRcdC8vIGVsZW0udGFiSW5kZXggZG9lc24ndCBhbHdheXMgcmV0dXJuIHRoZVxuXHRcdFx0XHRcdC8vIGNvcnJlY3QgdmFsdWUgd2hlbiBpdCBoYXNuJ3QgYmVlbiBleHBsaWNpdGx5IHNldFxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE0MTExNjIzMzM0Ny9odHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0L1xuXHRcdFx0XHRcdC8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpXG5cdFx0XHRcdFx0dmFyIHRhYmluZGV4ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ0YWJpbmRleFwiICk7XG5cdFxuXHRcdFx0XHRcdHJldHVybiB0YWJpbmRleCA/XG5cdFx0XHRcdFx0XHRwYXJzZUludCggdGFiaW5kZXgsIDEwICkgOlxuXHRcdFx0XHRcdFx0cmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHxcblx0XHRcdFx0XHRcdFx0cmNsaWNrYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgZWxlbS5ocmVmID9cblx0XHRcdFx0XHRcdFx0XHQwIDpcblx0XHRcdFx0XHRcdFx0XHQtMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdHByb3BGaXg6IHtcblx0XHRcdFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuXHRcdFx0XCJjbGFzc1wiOiBcImNsYXNzTmFtZVwiXG5cdFx0fVxuXHR9ICk7XG5cdFxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5XG5cdC8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZXNwZWN0IHNldHRpbmcgc2VsZWN0ZWRcblx0Ly8gb24gdGhlIG9wdGlvblxuXHQvLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZFxuXHQvLyB3aGVuIGluIGFuIG9wdGdyb3VwXG5cdGlmICggIXN1cHBvcnQub3B0U2VsZWN0ZWQgKSB7XG5cdFx0alF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRcdGlmICggcGFyZW50ICYmIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnNlbGVjdGVkSW5kZXg7XG5cdFxuXHRcdFx0XHRcdGlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0XHRwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0XG5cdGpRdWVyeS5lYWNoKCBbXG5cdFx0XCJ0YWJJbmRleFwiLFxuXHRcdFwicmVhZE9ubHlcIixcblx0XHRcIm1heExlbmd0aFwiLFxuXHRcdFwiY2VsbFNwYWNpbmdcIixcblx0XHRcImNlbGxQYWRkaW5nXCIsXG5cdFx0XCJyb3dTcGFuXCIsXG5cdFx0XCJjb2xTcGFuXCIsXG5cdFx0XCJ1c2VNYXBcIixcblx0XHRcImZyYW1lQm9yZGVyXCIsXG5cdFx0XCJjb250ZW50RWRpdGFibGVcIlxuXHRdLCBmdW5jdGlvbigpIHtcblx0XHRqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xuXHR9ICk7XG5cdFxuXHRcblx0XG5cdFxuXHR2YXIgcmNsYXNzID0gL1tcXHRcXHJcXG5cXGZdL2c7XG5cdFxuXHRmdW5jdGlvbiBnZXRDbGFzcyggZWxlbSApIHtcblx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8IFwiXCI7XG5cdH1cblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRhZGRDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0XHRpID0gMDtcblx0XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZSApIHtcblx0XHRcdFx0Y2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblx0XG5cdFx0XHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cdFx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0KCBcIiBcIiArIGN1clZhbHVlICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICk7XG5cdFxuXHRcdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y3VyICs9IGNsYXp6ICsgXCIgXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTtcblx0XHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIGZpbmFsVmFsdWUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcblx0XHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0XHRpID0gMDtcblx0XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5hdHRyKCBcImNsYXNzXCIsIFwiXCIgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZSApIHtcblx0XHRcdFx0Y2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblx0XG5cdFx0XHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cdFxuXHRcdFx0XHRcdC8vIFRoaXMgZXhwcmVzc2lvbiBpcyBoZXJlIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgYWRkQ2xhc3MpXG5cdFx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0KCBcIiBcIiArIGN1clZhbHVlICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICk7XG5cdFxuXHRcdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRcdGN1ciA9IGN1ci5yZXBsYWNlKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIsIFwiIFwiICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTtcblx0XHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIGZpbmFsVmFsdWUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcblx0XHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHRcdHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHRcblx0XHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRyZXR1cm4gc3RhdGVWYWwgPyB0aGlzLmFkZENsYXNzKCB2YWx1ZSApIDogdGhpcy5yZW1vdmVDbGFzcyggdmFsdWUgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcyhcblx0XHRcdFx0XHRcdHZhbHVlLmNhbGwoIHRoaXMsIGksIGdldENsYXNzKCB0aGlzICksIHN0YXRlVmFsICksXG5cdFx0XHRcdFx0XHRzdGF0ZVZhbFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGNsYXNzTmFtZSwgaSwgc2VsZiwgY2xhc3NOYW1lcztcblx0XG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XG5cdFx0XHRcdFx0Ly8gVG9nZ2xlIGluZGl2aWR1YWwgY2xhc3MgbmFtZXNcblx0XHRcdFx0XHRpID0gMDtcblx0XHRcdFx0XHRzZWxmID0galF1ZXJ5KCB0aGlzICk7XG5cdFx0XHRcdFx0Y2xhc3NOYW1lcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblx0XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgZWFjaCBjbGFzc05hbWUgZ2l2ZW4sIHNwYWNlIHNlcGFyYXRlZCBsaXN0XG5cdFx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdHlwZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRcdFx0Y2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTtcblx0XHRcdFx0XHRpZiAoIGNsYXNzTmFtZSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBTdG9yZSBjbGFzc05hbWUgaWYgc2V0XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdFx0Ly8gdGhlbiByZW1vdmUgdGhlIHdob2xlIGNsYXNzbmFtZSAoaWYgdGhlcmUgd2FzIG9uZSwgdGhlIGFib3ZlIHNhdmVkIGl0KS5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuXHRcdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0XHRpZiAoIHRoaXMuc2V0QXR0cmlidXRlICkge1xuXHRcdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIixcblx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lIHx8IHZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRcdFx0XHRcdFwiXCIgOlxuXHRcdFx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiICkgfHwgXCJcIlxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9LFxuXHRcblx0XHRoYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0dmFyIGNsYXNzTmFtZSwgZWxlbSxcblx0XHRcdFx0aSA9IDA7XG5cdFxuXHRcdFx0Y2xhc3NOYW1lID0gXCIgXCIgKyBzZWxlY3RvciArIFwiIFwiO1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHQoIFwiIFwiICsgZ2V0Q2xhc3MoIGVsZW0gKSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApXG5cdFx0XHRcdFx0XHQuaW5kZXhPZiggY2xhc3NOYW1lICkgPiAtMVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRcblx0XG5cdHZhciBycmV0dXJuID0gL1xcci9nLFxuXHRcdHJzcGFjZXMgPSAvW1xceDIwXFx0XFxyXFxuXFxmXSsvZztcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHR2YWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBob29rcywgcmV0LCBpc0Z1bmN0aW9uLFxuXHRcdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXHRcblx0XHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgZWxlbS50eXBlIF0gfHxcblx0XHRcdFx0XHRcdGpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cdFxuXHRcdFx0XHRcdGlmICggaG9va3MgJiZcblx0XHRcdFx0XHRcdFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSApICE9PSB1bmRlZmluZWRcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRyZXQgPSBlbGVtLnZhbHVlO1xuXHRcblx0XHRcdFx0XHRyZXR1cm4gdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiA/XG5cdFxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRcdFx0cmV0LnJlcGxhY2UoIHJyZXR1cm4sIFwiXCIgKSA6XG5cdFxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGNhc2VzIHdoZXJlIHZhbHVlIGlzIG51bGwvdW5kZWYgb3IgbnVtYmVyXG5cdFx0XHRcdFx0XHRyZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdHZhciB2YWw7XG5cdFxuXHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YWwgPSB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gVHJlYXQgbnVsbC91bmRlZmluZWQgYXMgXCJcIjsgY29udmVydCBudW1iZXJzIHRvIHN0cmluZ1xuXHRcdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHRcdHZhbCA9IFwiXCI7XG5cdFxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdHZhbCArPSBcIlwiO1xuXHRcblx0XHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHRcdHZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cdFxuXHRcdFx0XHQvLyBJZiBzZXQgcmV0dXJucyB1bmRlZmluZWQsIGZhbGwgYmFjayB0byBub3JtYWwgc2V0dGluZ1xuXHRcdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0dGhpcy52YWx1ZSA9IHZhbDtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH1cblx0fSApO1xuXHRcblx0alF1ZXJ5LmV4dGVuZCgge1xuXHRcdHZhbEhvb2tzOiB7XG5cdFx0XHRvcHRpb246IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XG5cdFx0XHRcdFx0dmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidmFsdWVcIiApO1xuXHRcdFx0XHRcdHJldHVybiB2YWwgIT0gbnVsbCA/XG5cdFx0XHRcdFx0XHR2YWwgOlxuXHRcblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9MTAgLSAxMSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpXG5cdFx0XHRcdFx0XHQvLyBTdHJpcCBhbmQgY29sbGFwc2Ugd2hpdGVzcGFjZVxuXHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLXdoaXRlc3BhY2Vcblx0XHRcdFx0XHRcdGpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICkucmVwbGFjZSggcnNwYWNlcywgXCIgXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHNlbGVjdDoge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLFxuXHRcdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHRcdGluZGV4ID0gZWxlbS5zZWxlY3RlZEluZGV4LFxuXHRcdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIixcblx0XHRcdFx0XHRcdHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcblx0XHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdFx0aSA9IGluZGV4IDwgMCA/XG5cdFx0XHRcdFx0XHRcdG1heCA6XG5cdFx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblx0XG5cdFx0XHRcdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xuXHRcdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXHRcblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBJRTgtOSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSlcblx0XHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdFx0IW9wdGlvbi5kaXNhYmxlZCAmJlxuXHRcdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQhalF1ZXJ5Lm5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiICkgKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb25cblx0XHRcdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHNcblx0XHRcdFx0XHRcdFx0aWYgKCBvbmUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0XHR2YWx1ZXMucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdFx0dmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSxcblx0XHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblx0XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFxuXHRcdFx0XHRcdFx0LyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0XG5cdFx0XHRcdFx0XHRpZiAoIG9wdGlvbi5zZWxlY3RlZCA9XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTFcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdFx0aWYgKCAhb3B0aW9uU2V0ICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0gKTtcblx0XG5cdC8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5cdGpRdWVyeS5lYWNoKCBbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0ge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdFx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdFx0fTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRcblx0XG5cdC8vIFJldHVybiBqUXVlcnkgZm9yIGF0dHJpYnV0ZXMtb25seSBpbmNsdXNpb25cblx0XG5cdFxuXHR2YXIgcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCBqUXVlcnkuZXZlbnQsIHtcblx0XG5cdFx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7XG5cdFxuXHRcdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCxcblx0XHRcdFx0ZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sXG5cdFx0XHRcdHR5cGUgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwidHlwZVwiICkgPyBldmVudC50eXBlIDogZXZlbnQsXG5cdFx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdCggXCIuXCIgKSA6IFtdO1xuXHRcblx0XHRcdGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXHRcblx0XHRcdC8vIERvbid0IGRvIGV2ZW50cyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIGZvY3VzL2JsdXIgbW9ycGhzIHRvIGZvY3VzaW4vb3V0OyBlbnN1cmUgd2UncmUgbm90IGZpcmluZyB0aGVtIHJpZ2h0IG5vd1xuXHRcdFx0aWYgKCByZm9jdXNNb3JwaC50ZXN0KCB0eXBlICsgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCB0eXBlLmluZGV4T2YoIFwiLlwiICkgPiAtMSApIHtcblx0XG5cdFx0XHRcdC8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKClcblx0XHRcdFx0bmFtZXNwYWNlcyA9IHR5cGUuc3BsaXQoIFwiLlwiICk7XG5cdFx0XHRcdHR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7XG5cdFx0XHRcdG5hbWVzcGFjZXMuc29ydCgpO1xuXHRcdFx0fVxuXHRcdFx0b250eXBlID0gdHlwZS5pbmRleE9mKCBcIjpcIiApIDwgMCAmJiBcIm9uXCIgKyB0eXBlO1xuXHRcblx0XHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZ1xuXHRcdFx0ZXZlbnQgPSBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRcdGV2ZW50IDpcblx0XHRcdFx0bmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSBcIm9iamVjdFwiICYmIGV2ZW50ICk7XG5cdFxuXHRcdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdFx0ZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7XG5cdFx0XHRldmVudC5uYW1lc3BhY2UgPSBuYW1lc3BhY2VzLmpvaW4oIFwiLlwiICk7XG5cdFx0XHRldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICkgOlxuXHRcdFx0XHRudWxsO1xuXHRcblx0XHRcdC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuXHRcdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdFx0aWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuXHRcdFx0XHRldmVudC50YXJnZXQgPSBlbGVtO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3Rcblx0XHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0XHRbIGV2ZW50IF0gOlxuXHRcdFx0XHRqUXVlcnkubWFrZUFycmF5KCBkYXRhLCBbIGV2ZW50IF0gKTtcblx0XG5cdFx0XHQvLyBBbGxvdyBzcGVjaWFsIGV2ZW50cyB0byBkcmF3IG91dHNpZGUgdGhlIGxpbmVzXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpXG5cdFx0XHQvLyBCdWJibGUgdXAgdG8gZG9jdW1lbnQsIHRoZW4gdG8gd2luZG93OyB3YXRjaCBmb3IgYSBnbG9iYWwgb3duZXJEb2N1bWVudCB2YXIgKCM5NzI0KVxuXHRcdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblx0XG5cdFx0XHRcdGJ1YmJsZVR5cGUgPSBzcGVjaWFsLmRlbGVnYXRlVHlwZSB8fCB0eXBlO1xuXHRcdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRcdGN1ciA9IGN1ci5wYXJlbnROb2RlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRldmVudFBhdGgucHVzaCggY3VyICk7XG5cdFx0XHRcdFx0dG1wID0gY3VyO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBPbmx5IGFkZCB3aW5kb3cgaWYgd2UgZ290IHRvIGRvY3VtZW50IChlLmcuLCBub3QgcGxhaW4gb2JqIG9yIGRldGFjaGVkIERPTSlcblx0XHRcdFx0aWYgKCB0bXAgPT09ICggZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgKSB7XG5cdFx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIHRtcC5kZWZhdWx0VmlldyB8fCB0bXAucGFyZW50V2luZG93IHx8IHdpbmRvdyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdFx0aSA9IDA7XG5cdFx0XHR3aGlsZSAoICggY3VyID0gZXZlbnRQYXRoWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0XHRidWJibGVUeXBlIDpcblx0XHRcdFx0XHRzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7XG5cdFxuXHRcdFx0XHQvLyBqUXVlcnkgaGFuZGxlclxuXHRcdFx0XHRoYW5kbGUgPSAoIGRhdGFQcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmXG5cdFx0XHRcdFx0ZGF0YVByaXYuZ2V0KCBjdXIsIFwiaGFuZGxlXCIgKTtcblx0XHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdFx0aGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gTmF0aXZlIGhhbmRsZXJcblx0XHRcdFx0aGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG5cdFx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBhY2NlcHREYXRhKCBjdXIgKSApIHtcblx0XHRcdFx0XHRldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRldmVudC50eXBlID0gdHlwZTtcblx0XG5cdFx0XHQvLyBJZiBub2JvZHkgcHJldmVudGVkIHRoZSBkZWZhdWx0IGFjdGlvbiwgZG8gaXQgbm93XG5cdFx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXHRcblx0XHRcdFx0aWYgKCAoICFzcGVjaWFsLl9kZWZhdWx0IHx8XG5cdFx0XHRcdFx0c3BlY2lhbC5fZGVmYXVsdC5hcHBseSggZXZlbnRQYXRoLnBvcCgpLCBkYXRhICkgPT09IGZhbHNlICkgJiZcblx0XHRcdFx0XHRhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIENhbGwgYSBuYXRpdmUgRE9NIG1ldGhvZCBvbiB0aGUgdGFyZ2V0IHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdFx0Ly8gRG9uJ3QgZG8gZGVmYXVsdCBhY3Rpb25zIG9uIHdpbmRvdywgdGhhdCdzIHdoZXJlIGdsb2JhbCB2YXJpYWJsZXMgYmUgKCM2MTcwKVxuXHRcdFx0XHRcdGlmICggb250eXBlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcmUtdHJpZ2dlciBhbiBvbkZPTyBldmVudCB3aGVuIHdlIGNhbGwgaXRzIEZPTygpIG1ldGhvZFxuXHRcdFx0XHRcdFx0dG1wID0gZWxlbVsgb250eXBlIF07XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuXHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cdFx0XHRcdFx0XHRlbGVtWyB0eXBlIF0oKTtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gdG1wO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdFx0fSxcblx0XG5cdFx0Ly8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lXG5cdFx0Ly8gVXNlZCBvbmx5IGZvciBgZm9jdXMoaW4gfCBvdXQpYCBldmVudHNcblx0XHRzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50ICkge1xuXHRcdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCksXG5cdFx0XHRcdGV2ZW50LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRpc1NpbXVsYXRlZDogdHJ1ZVxuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBlLCBudWxsLCBlbGVtICk7XG5cdFx0fVxuXHRcblx0fSApO1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcblx0XHR0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApO1xuXHRcdFx0fSApO1xuXHRcdH0sXG5cdFx0dHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdFx0dmFyIGVsZW0gPSB0aGlzWyAwIF07XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgZWxlbSwgdHJ1ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdGpRdWVyeS5lYWNoKCAoIFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgXCIgK1xuXHRcdFwibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgXCIgK1xuXHRcdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudVwiICkuc3BsaXQoIFwiIFwiICksXG5cdFx0ZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdFxuXHRcdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdFx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZGF0YSwgZm4gKSB7XG5cdFx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgP1xuXHRcdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdFx0dGhpcy50cmlnZ2VyKCBuYW1lICk7XG5cdFx0fTtcblx0fSApO1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdGhvdmVyOiBmdW5jdGlvbiggZm5PdmVyLCBmbk91dCApIHtcblx0XHRcdHJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApO1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0c3VwcG9ydC5mb2N1c2luID0gXCJvbmZvY3VzaW5cIiBpbiB3aW5kb3c7XG5cdFxuXHRcblx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTQ0XG5cdC8vIEZpcmVmb3ggZG9lc24ndCBoYXZlIGZvY3VzKGluIHwgb3V0KSBldmVudHNcblx0Ly8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02ODc3ODdcblx0Ly9cblx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9NDggLSA0OSwgU2FmYXJpIDw9OS4wIC0gOS4xXG5cdC8vIGZvY3VzKGluIHwgb3V0KSBldmVudHMgZmlyZSBhZnRlciBmb2N1cyAmIGJsdXIgZXZlbnRzLFxuXHQvLyB3aGljaCBpcyBzcGVjIHZpb2xhdGlvbiAtIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWZvY3VzZXZlbnQtZXZlbnQtb3JkZXJcblx0Ly8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDk4NTdcblx0aWYgKCAhc3VwcG9ydC5mb2N1c2luICkge1xuXHRcdGpRdWVyeS5lYWNoKCB7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdFxuXHRcdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHRcdHZhciBoYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApICk7XG5cdFx0XHR9O1xuXHRcblx0XHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApO1xuXHRcblx0XHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRcdGRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsICggYXR0YWNoZXMgfHwgMCApICsgMSApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXHRcblx0XHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGRvYywgZml4ICk7XG5cdFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9ICk7XG5cdH1cblx0dmFyIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuXHRcblx0dmFyIG5vbmNlID0galF1ZXJ5Lm5vdygpO1xuXHRcblx0dmFyIHJxdWVyeSA9ICggL1xcPy8gKTtcblx0XG5cdFxuXHRcblx0Ly8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZ1xuXHRqUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0XHR2YXIgeG1sO1xuXHRcdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdFx0Ly8gSUUgdGhyb3dzIG9uIHBhcnNlRnJvbVN0cmluZyB3aXRoIGludmFsaWQgaW5wdXQuXG5cdFx0dHJ5IHtcblx0XHRcdHhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHR4bWwgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcblx0XHRpZiAoICF4bWwgfHwgeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInBhcnNlcmVycm9yXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHRcdH1cblx0XHRyZXR1cm4geG1sO1xuXHR9O1xuXHRcblx0XG5cdHZhclxuXHRcdHJicmFja2V0ID0gL1xcW1xcXSQvLFxuXHRcdHJDUkxGID0gL1xccj9cXG4vZyxcblx0XHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdFx0cnN1Ym1pdHRhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO1xuXHRcblx0ZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHRcdHZhciBuYW1lO1xuXHRcblx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblx0XG5cdFx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRcdGpRdWVyeS5lYWNoKCBvYmosIGZ1bmN0aW9uKCBpLCB2ICkge1xuXHRcdFx0XHRpZiAoIHRyYWRpdGlvbmFsIHx8IHJicmFja2V0LnRlc3QoIHByZWZpeCApICkge1xuXHRcblx0XHRcdFx0XHQvLyBUcmVhdCBlYWNoIGFycmF5IGl0ZW0gYXMgYSBzY2FsYXIuXG5cdFx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblx0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0XHRcdC8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LlxuXHRcdFx0XHRcdGJ1aWxkUGFyYW1zKFxuXHRcdFx0XHRcdFx0cHJlZml4ICsgXCJbXCIgKyAoIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT0gbnVsbCA/IGkgOiBcIlwiICkgKyBcIl1cIixcblx0XHRcdFx0XHRcdHYsXG5cdFx0XHRcdFx0XHR0cmFkaXRpb25hbCxcblx0XHRcdFx0XHRcdGFkZFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XG5cdFx0fSBlbHNlIGlmICggIXRyYWRpdGlvbmFsICYmIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XG5cdFx0XHQvLyBTZXJpYWxpemUgb2JqZWN0IGl0ZW0uXG5cdFx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCArIFwiW1wiICsgbmFtZSArIFwiXVwiLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdFx0fVxuXHRcblx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdC8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS5cblx0XHRcdGFkZCggcHJlZml4LCBvYmogKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG5cdC8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xuXHRqUXVlcnkucGFyYW0gPSBmdW5jdGlvbiggYSwgdHJhZGl0aW9uYWwgKSB7XG5cdFx0dmFyIHByZWZpeCxcblx0XHRcdHMgPSBbXSxcblx0XHRcdGFkZCA9IGZ1bmN0aW9uKCBrZXksIHZhbHVlT3JGdW5jdGlvbiApIHtcblx0XG5cdFx0XHRcdC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgdXNlIGl0cyByZXR1cm4gdmFsdWVcblx0XHRcdFx0dmFyIHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlT3JGdW5jdGlvbiApID9cblx0XHRcdFx0XHR2YWx1ZU9yRnVuY3Rpb24oKSA6XG5cdFx0XHRcdFx0dmFsdWVPckZ1bmN0aW9uO1xuXHRcblx0XHRcdFx0c1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArXG5cdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0XHR9O1xuXHRcblx0XHQvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7XG5cdFxuXHRcdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG5cdFx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7XG5cdFx0XHR9ICk7XG5cdFxuXHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHRcdC8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LlxuXHRcdFx0Zm9yICggcHJlZml4IGluIGEgKSB7XG5cdFx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uXG5cdFx0cmV0dXJuIHMuam9pbiggXCImXCIgKTtcblx0fTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7XG5cdFx0fSxcblx0XHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0XHR2YXIgZWxlbWVudHMgPSBqUXVlcnkucHJvcCggdGhpcywgXCJlbGVtZW50c1wiICk7XG5cdFx0XHRcdHJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzO1xuXHRcdFx0fSApXG5cdFx0XHQuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cdFxuXHRcdFx0XHQvLyBVc2UgLmlzKCBcIjpkaXNhYmxlZFwiICkgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3Ncblx0XHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRcdHJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiZcblx0XHRcdFx0XHQoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7XG5cdFx0XHR9IClcblx0XHRcdC5tYXAoIGZ1bmN0aW9uKCBpLCBlbGVtICkge1xuXHRcdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cdFxuXHRcdFx0XHRyZXR1cm4gdmFsID09IG51bGwgP1xuXHRcdFx0XHRcdG51bGwgOlxuXHRcdFx0XHRcdGpRdWVyeS5pc0FycmF5KCB2YWwgKSA/XG5cdFx0XHRcdFx0XHRqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdFx0eyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuXHRcdFx0fSApLmdldCgpO1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdHZhclxuXHRcdHIyMCA9IC8lMjAvZyxcblx0XHRyaGFzaCA9IC8jLiokLyxcblx0XHRydHMgPSAvKFs/Jl0pXz1bXiZdKi8sXG5cdFx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXHRcblx0XHQvLyAjNzY1MywgIzgxMjUsICM4MTUyOiBsb2NhbCBwcm90b2NvbCBkZXRlY3Rpb25cblx0XHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRcdHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuXHRcdHJwcm90b2NvbCA9IC9eXFwvXFwvLyxcblx0XG5cdFx0LyogUHJlZmlsdGVyc1xuXHRcdCAqIDEpIFRoZXkgYXJlIHVzZWZ1bCB0byBpbnRyb2R1Y2UgY3VzdG9tIGRhdGFUeXBlcyAoc2VlIGFqYXgvanNvbnAuanMgZm9yIGFuIGV4YW1wbGUpXG5cdFx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0XHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdFx0ICogICAgLSBBRlRFUiBwYXJhbSBzZXJpYWxpemF0aW9uIChzLmRhdGEgaXMgYSBzdHJpbmcgaWYgcy5wcm9jZXNzRGF0YSBpcyB0cnVlKVxuXHRcdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0XHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdFx0ICogNSkgZXhlY3V0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gY29udGludWUgZG93biB0byBcIipcIiBpZiBuZWVkZWRcblx0XHQgKi9cblx0XHRwcmVmaWx0ZXJzID0ge30sXG5cdFxuXHRcdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0XHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdFx0ICogMikgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHRcdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHRcdCAqL1xuXHRcdHRyYW5zcG9ydHMgPSB7fSxcblx0XG5cdFx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdFx0YWxsVHlwZXMgPSBcIiovXCIuY29uY2F0KCBcIipcIiApLFxuXHRcblx0XHQvLyBBbmNob3IgdGFnIGZvciBwYXJzaW5nIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0XHRvcmlnaW5BbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xuXHRcdG9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjtcblx0XG5cdC8vIEJhc2UgXCJjb25zdHJ1Y3RvclwiIGZvciBqUXVlcnkuYWpheFByZWZpbHRlciBhbmQgalF1ZXJ5LmFqYXhUcmFuc3BvcnRcblx0ZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cdFxuXHRcdC8vIGRhdGFUeXBlRXhwcmVzc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gXCIqXCJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblx0XG5cdFx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZUV4cHJlc3Npb24gIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblx0XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBmdW5jICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG5cdFx0XHRcdHdoaWxlICggKCBkYXRhVHlwZSA9IGRhdGFUeXBlc1sgaSsrIF0gKSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gUHJlcGVuZCBpZiByZXF1ZXN0ZWRcblx0XHRcdFx0XHRpZiAoIGRhdGFUeXBlWyAwIF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7XG5cdFxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS5wdXNoKCBmdW5jICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRcblx0Ly8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5cdGZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7XG5cdFxuXHRcdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRcdHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXHRcblx0XHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHRcdHZhciBzZWxlY3RlZDtcblx0XHRcdGluc3BlY3RlZFsgZGF0YVR5cGUgXSA9IHRydWU7XG5cdFx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0XHR2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApO1xuXHRcdFx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0ID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdFx0IXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXHRcblx0XHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHRcdHJldHVybiBzZWxlY3RlZDtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xuXHR9XG5cdFxuXHQvLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcblx0Ly8gdGhhdCB0YWtlcyBcImZsYXRcIiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZClcblx0Ly8gRml4ZXMgIzk4ODdcblx0ZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdFx0dmFyIGtleSwgZGVlcCxcblx0XHRcdGZsYXRPcHRpb25zID0galF1ZXJ5LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTtcblx0XG5cdFx0Zm9yICgga2V5IGluIHNyYyApIHtcblx0XHRcdGlmICggc3JjWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoIGRlZXAgPSB7fSApICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIGRlZXAgKSB7XG5cdFx0XHRqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiB0YXJnZXQ7XG5cdH1cblx0XG5cdC8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcblx0ICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcblx0ICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdCAqL1xuXHRmdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXHRcblx0XHR2YXIgY3QsIHR5cGUsIGZpbmFsRGF0YVR5cGUsIGZpcnN0RGF0YVR5cGUsXG5cdFx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblx0XG5cdFx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0XHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRcdGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIgKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRcdGlmICggY3QgKSB7XG5cdFx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0eXBlICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcmVzcG9uc2UgZm9yIHRoZSBleHBlY3RlZCBkYXRhVHlwZVxuXHRcdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0Ly8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuXHRcdFx0Zm9yICggdHlwZSBpbiByZXNwb25zZXMgKSB7XG5cdFx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWyAwIF0gXSApIHtcblx0XHRcdFx0XHRmaW5hbERhdGFUeXBlID0gdHlwZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFmaXJzdERhdGFUeXBlICkge1xuXHRcdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHRcdH1cblx0XG5cdFx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHRcdC8vIFdlIGFkZCB0aGUgZGF0YVR5cGUgdG8gdGhlIGxpc3QgaWYgbmVlZGVkXG5cdFx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRcdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRcdGlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7XG5cdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VzWyBmaW5hbERhdGFUeXBlIF07XG5cdFx0fVxuXHR9XG5cdFxuXHQvKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG5cdCAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuXHQgKi9cblx0ZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHRcdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdFx0Y29udmVydGVycyA9IHt9LFxuXHRcblx0XHRcdC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cblx0XHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzLnNsaWNlKCk7XG5cdFxuXHRcdC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuXHRcdGlmICggZGF0YVR5cGVzWyAxIF0gKSB7XG5cdFx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdFx0Y29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblx0XG5cdFx0Ly8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcblx0XHR3aGlsZSAoIGN1cnJlbnQgKSB7XG5cdFxuXHRcdFx0aWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG5cdFx0XHRcdGpxWEhSWyBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gXSA9IHJlc3BvbnNlO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEFwcGx5IHRoZSBkYXRhRmlsdGVyIGlmIHByb3ZpZGVkXG5cdFx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdFx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcblx0XHRcdGlmICggY3VycmVudCApIHtcblx0XG5cdFx0XHRcdC8vIFRoZXJlJ3Mgb25seSB3b3JrIHRvIGRvIGlmIGN1cnJlbnQgZGF0YVR5cGUgaXMgbm9uLWF1dG9cblx0XHRcdFx0aWYgKCBjdXJyZW50ID09PSBcIipcIiApIHtcblx0XG5cdFx0XHRcdFx0Y3VycmVudCA9IHByZXY7XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHRcdH0gZWxzZSBpZiAoIHByZXYgIT09IFwiKlwiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIGN1cnJlbnQgXSB8fCBjb252ZXJ0ZXJzWyBcIiogXCIgKyBjdXJyZW50IF07XG5cdFxuXHRcdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdFx0aWYgKCAhY29udiApIHtcblx0XHRcdFx0XHRcdGZvciAoIGNvbnYyIGluIGNvbnZlcnRlcnMgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnRcblx0XHRcdFx0XHRcdFx0dG1wID0gY29udjIuc3BsaXQoIFwiIFwiICk7XG5cdFx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dFxuXHRcdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY29udiApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBjb252MiBdO1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvbnZlcnRlcnNbIGNvbnYyIF0gIT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSB0bXBbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuXHRcdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG5cdFx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgcy50aHJvd3MgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0c3RhdGU6IFwicGFyc2VyZXJyb3JcIixcblx0XHRcdFx0XHRcdFx0XHRcdGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudFxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcblx0fVxuXHRcblx0alF1ZXJ5LmV4dGVuZCgge1xuXHRcblx0XHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0XHRhY3RpdmU6IDAsXG5cdFxuXHRcdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0XHRsYXN0TW9kaWZpZWQ6IHt9LFxuXHRcdGV0YWc6IHt9LFxuXHRcblx0XHRhamF4U2V0dGluZ3M6IHtcblx0XHRcdHVybDogbG9jYXRpb24uaHJlZixcblx0XHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBsb2NhdGlvbi5wcm90b2NvbCApLFxuXHRcdFx0Z2xvYmFsOiB0cnVlLFxuXHRcdFx0cHJvY2Vzc0RhdGE6IHRydWUsXG5cdFx0XHRhc3luYzogdHJ1ZSxcblx0XHRcdGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLFxuXHRcblx0XHRcdC8qXG5cdFx0XHR0aW1lb3V0OiAwLFxuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGRhdGFUeXBlOiBudWxsLFxuXHRcdFx0dXNlcm5hbWU6IG51bGwsXG5cdFx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRcdGNhY2hlOiBudWxsLFxuXHRcdFx0dGhyb3dzOiBmYWxzZSxcblx0XHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRcdGhlYWRlcnM6IHt9LFxuXHRcdFx0Ki9cblx0XG5cdFx0XHRhY2NlcHRzOiB7XG5cdFx0XHRcdFwiKlwiOiBhbGxUeXBlcyxcblx0XHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRcdGh0bWw6IFwidGV4dC9odG1sXCIsXG5cdFx0XHRcdHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG5cdFx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHRcdH0sXG5cdFxuXHRcdFx0Y29udGVudHM6IHtcblx0XHRcdFx0eG1sOiAvXFxieG1sXFxiLyxcblx0XHRcdFx0aHRtbDogL1xcYmh0bWwvLFxuXHRcdFx0XHRqc29uOiAvXFxianNvblxcYi9cblx0XHRcdH0sXG5cdFxuXHRcdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdFx0eG1sOiBcInJlc3BvbnNlWE1MXCIsXG5cdFx0XHRcdHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG5cdFx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0XHQvLyBLZXlzIHNlcGFyYXRlIHNvdXJjZSAob3IgY2F0Y2hhbGwgXCIqXCIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG5cdFx0XHRjb252ZXJ0ZXJzOiB7XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHRcblx0XHRcdFx0XCIqIHRleHRcIjogU3RyaW5nLFxuXHRcblx0XHRcdFx0Ly8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pXG5cdFx0XHRcdFwidGV4dCBodG1sXCI6IHRydWUsXG5cdFxuXHRcdFx0XHQvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG5cdFx0XHRcdFwidGV4dCBqc29uXCI6IEpTT04ucGFyc2UsXG5cdFxuXHRcdFx0XHQvLyBQYXJzZSB0ZXh0IGFzIHhtbFxuXHRcdFx0XHRcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuXHRcdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdFx0Ly8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmVcblx0XHRcdC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuXHRcdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdFx0dXJsOiB0cnVlLFxuXHRcdFx0XHRjb250ZXh0OiB0cnVlXG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0XHQvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuXG5cdFx0Ly8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cblx0XHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdFx0cmV0dXJuIHNldHRpbmdzID9cblx0XG5cdFx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRcdGFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDpcblx0XG5cdFx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdFx0YWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7XG5cdFx0fSxcblx0XG5cdFx0YWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksXG5cdFx0YWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cdFxuXHRcdC8vIE1haW4gbWV0aG9kXG5cdFx0YWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblx0XG5cdFx0XHQvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuXHRcdFx0aWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0XHR1cmwgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gRm9yY2Ugb3B0aW9ucyB0byBiZSBhbiBvYmplY3Rcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0XHRcdHZhciB0cmFuc3BvcnQsXG5cdFxuXHRcdFx0XHQvLyBVUkwgd2l0aG91dCBhbnRpLWNhY2hlIHBhcmFtXG5cdFx0XHRcdGNhY2hlVVJMLFxuXHRcblx0XHRcdFx0Ly8gUmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRcdHJlc3BvbnNlSGVhZGVycyxcblx0XG5cdFx0XHRcdC8vIHRpbWVvdXQgaGFuZGxlXG5cdFx0XHRcdHRpbWVvdXRUaW1lcixcblx0XG5cdFx0XHRcdC8vIFVybCBjbGVhbnVwIHZhclxuXHRcdFx0XHR1cmxBbmNob3IsXG5cdFxuXHRcdFx0XHQvLyBSZXF1ZXN0IHN0YXRlIChiZWNvbWVzIGZhbHNlIHVwb24gc2VuZCBhbmQgdHJ1ZSB1cG9uIGNvbXBsZXRpb24pXG5cdFx0XHRcdGNvbXBsZXRlZCxcblx0XG5cdFx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0XHRmaXJlR2xvYmFscyxcblx0XG5cdFx0XHRcdC8vIExvb3AgdmFyaWFibGVcblx0XHRcdFx0aSxcblx0XG5cdFx0XHRcdC8vIHVuY2FjaGVkIHBhcnQgb2YgdGhlIHVybFxuXHRcdFx0XHR1bmNhY2hlZCxcblx0XG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3Rcblx0XHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cdFxuXHRcdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0XHRjYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcyxcblx0XG5cdFx0XHRcdC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0ID0gcy5jb250ZXh0ICYmXG5cdFx0XHRcdFx0KCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cblx0XHRcdFx0XHRcdGpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LFxuXHRcblx0XHRcdFx0Ly8gRGVmZXJyZWRzXG5cdFx0XHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRcdGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGUgPSBzLnN0YXR1c0NvZGUgfHwge30sXG5cdFxuXHRcdFx0XHQvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKVxuXHRcdFx0XHRyZXF1ZXN0SGVhZGVycyA9IHt9LFxuXHRcdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG5cdFxuXHRcdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdFx0c3RyQWJvcnQgPSBcImNhbmNlbGVkXCIsXG5cdFxuXHRcdFx0XHQvLyBGYWtlIHhoclxuXHRcdFx0XHRqcVhIUiA9IHtcblx0XHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXHRcblx0XHRcdFx0XHQvLyBCdWlsZHMgaGVhZGVycyBoYXNodGFibGUgaWYgbmVlZGVkXG5cdFx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0XHR2YXIgbWF0Y2g7XG5cdFx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAhcmVzcG9uc2VIZWFkZXJzICkge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKCBtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSBdID0gbWF0Y2hbIDIgXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0bWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpIF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdFx0Z2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBjb21wbGV0ZWQgPyByZXNwb25zZUhlYWRlcnNTdHJpbmcgOiBudWxsO1xuXHRcdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRcdC8vIENhY2hlcyB0aGUgaGVhZGVyXG5cdFx0XHRcdFx0c2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIG5hbWUudG9Mb3dlckNhc2UoKSBdID1cblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fCBuYW1lO1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0XHQvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlclxuXHRcdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHR2YXIgY29kZTtcblx0XHRcdFx0XHRcdGlmICggbWFwICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRXhlY3V0ZSB0aGUgYXBwcm9wcmlhdGUgY2FsbGJhY2tzXG5cdFx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2tzIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG5cdFx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzdGF0dXNDb2RlWyBjb2RlIF0gPSBbIHN0YXR1c0NvZGVbIGNvZGUgXSwgbWFwWyBjb2RlIF0gXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRcdGFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHRcdHZhciBmaW5hbFRleHQgPSBzdGF0dXNUZXh0IHx8IHN0ckFib3J0O1xuXHRcdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHRcdHRyYW5zcG9ydC5hYm9ydCggZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XG5cdFx0XHQvLyBBdHRhY2ggZGVmZXJyZWRzXG5cdFx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApO1xuXHRcblx0XHRcdC8vIEFkZCBwcm90b2NvbCBpZiBub3QgcHJvdmlkZWQgKHByZWZpbHRlcnMgbWlnaHQgZXhwZWN0IGl0KVxuXHRcdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHRcdC8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZVxuXHRcdFx0cy51cmwgPSAoICggdXJsIHx8IHMudXJsIHx8IGxvY2F0aW9uLmhyZWYgKSArIFwiXCIgKVxuXHRcdFx0XHQucmVwbGFjZSggcnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiApO1xuXHRcblx0XHRcdC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuXHRcdFx0cy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblx0XG5cdFx0XHQvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG5cdFx0XHRzLmRhdGFUeXBlcyA9ICggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcblx0XHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB0aGUgb3JpZ2luIGRvZXNuJ3QgbWF0Y2ggdGhlIGN1cnJlbnQgb3JpZ2luLlxuXHRcdFx0aWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7XG5cdFx0XHRcdHVybEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTggLSAxMSwgRWRnZSAxMiAtIDEzXG5cdFx0XHRcdC8vIElFIHRocm93cyBleGNlcHRpb24gb24gYWNjZXNzaW5nIHRoZSBocmVmIHByb3BlcnR5IGlmIHVybCBpcyBtYWxmb3JtZWQsXG5cdFx0XHRcdC8vIGUuZy4gaHR0cDovL2V4YW1wbGUuY29tOjgweC9cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHMudXJsO1xuXHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTggLSAxMSBvbmx5XG5cdFx0XHRcdFx0Ly8gQW5jaG9yJ3MgaG9zdCBwcm9wZXJ0eSBpc24ndCBjb3JyZWN0bHkgc2V0IHdoZW4gcy51cmwgaXMgcmVsYXRpdmVcblx0XHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHVybEFuY2hvci5ocmVmO1xuXHRcdFx0XHRcdHMuY3Jvc3NEb21haW4gPSBvcmlnaW5BbmNob3IucHJvdG9jb2wgKyBcIi8vXCIgKyBvcmlnaW5BbmNob3IuaG9zdCAhPT1cblx0XHRcdFx0XHRcdHVybEFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIHVybEFuY2hvci5ob3N0O1xuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYW4gZXJyb3IgcGFyc2luZyB0aGUgVVJMLCBhc3N1bWUgaXQgaXMgY3Jvc3NEb21haW4sXG5cdFx0XHRcdFx0Ly8gaXQgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSB0cmFuc3BvcnQgaWYgaXQgaXMgaW52YWxpZFxuXHRcdFx0XHRcdHMuY3Jvc3NEb21haW4gPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQ29udmVydCBkYXRhIGlmIG5vdCBhbHJlYWR5IGEgc3RyaW5nXG5cdFx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQXBwbHkgcHJlZmlsdGVyc1xuXHRcdFx0aW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cdFxuXHRcdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYSBwcmVmaWx0ZXIsIHN0b3AgdGhlcmVcblx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG9cblx0XHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0XHRmaXJlR2xvYmFscyA9IGpRdWVyeS5ldmVudCAmJiBzLmdsb2JhbDtcblx0XG5cdFx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICYmIGpRdWVyeS5hY3RpdmUrKyA9PT0gMCApIHtcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0YXJ0XCIgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRcdHMudHlwZSA9IHMudHlwZS50b1VwcGVyQ2FzZSgpO1xuXHRcblx0XHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0XHRzLmhhc0NvbnRlbnQgPSAhcm5vQ29udGVudC50ZXN0KCBzLnR5cGUgKTtcblx0XG5cdFx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHRcdC8vIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciBsYXRlciBvblxuXHRcdFx0Ly8gUmVtb3ZlIGhhc2ggdG8gc2ltcGxpZnkgdXJsIG1hbmlwdWxhdGlvblxuXHRcdFx0Y2FjaGVVUkwgPSBzLnVybC5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXHRcblx0XHRcdC8vIE1vcmUgb3B0aW9ucyBoYW5kbGluZyBmb3IgcmVxdWVzdHMgd2l0aCBubyBjb250ZW50XG5cdFx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cdFxuXHRcdFx0XHQvLyBSZW1lbWJlciB0aGUgaGFzaCBzbyB3ZSBjYW4gcHV0IGl0IGJhY2tcblx0XHRcdFx0dW5jYWNoZWQgPSBzLnVybC5zbGljZSggY2FjaGVVUkwubGVuZ3RoICk7XG5cdFxuXHRcdFx0XHQvLyBJZiBkYXRhIGlzIGF2YWlsYWJsZSwgYXBwZW5kIGRhdGEgdG8gdXJsXG5cdFx0XHRcdGlmICggcy5kYXRhICkge1xuXHRcdFx0XHRcdGNhY2hlVVJMICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGE7XG5cdFxuXHRcdFx0XHRcdC8vICM5NjgyOiByZW1vdmUgZGF0YSBzbyB0aGF0IGl0J3Mgbm90IHVzZWQgaW4gYW4gZXZlbnR1YWwgcmV0cnlcblx0XHRcdFx0XHRkZWxldGUgcy5kYXRhO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBBZGQgYW50aS1jYWNoZSBpbiB1bmNhY2hlZCB1cmwgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0Y2FjaGVVUkwgPSBjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiXCIgKTtcblx0XHRcdFx0XHR1bmNhY2hlZCA9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyAoIG5vbmNlKysgKSArIHVuY2FjaGVkO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBQdXQgaGFzaCBhbmQgYW50aS1jYWNoZSBvbiB0aGUgVVJMIHRoYXQgd2lsbCBiZSByZXF1ZXN0ZWQgKGdoLTE3MzIpXG5cdFx0XHRcdHMudXJsID0gY2FjaGVVUkwgKyB1bmNhY2hlZDtcblx0XG5cdFx0XHQvLyBDaGFuZ2UgJyUyMCcgdG8gJysnIGlmIHRoaXMgaXMgZW5jb2RlZCBmb3JtIGJvZHkgY29udGVudCAoZ2gtMjY1OClcblx0XHRcdH0gZWxzZSBpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmXG5cdFx0XHRcdCggcy5jb250ZW50VHlwZSB8fCBcIlwiICkuaW5kZXhPZiggXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiApID09PSAwICkge1xuXHRcdFx0XHRzLmRhdGEgPSBzLmRhdGEucmVwbGFjZSggcjIwLCBcIitcIiApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTZXQgdGhlIGNvcnJlY3QgaGVhZGVyLCBpZiBkYXRhIGlzIGJlaW5nIHNlbnRcblx0XHRcdGlmICggcy5kYXRhICYmIHMuaGFzQ29udGVudCAmJiBzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSB8fCBvcHRpb25zLmNvbnRlbnRUeXBlICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlcihcblx0XHRcdFx0XCJBY2NlcHRcIixcblx0XHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/XG5cdFx0XHRcdFx0cy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gK1xuXHRcdFx0XHRcdFx0KCBzLmRhdGFUeXBlc1sgMCBdICE9PSBcIipcIiA/IFwiLCBcIiArIGFsbFR5cGVzICsgXCI7IHE9MC4wMVwiIDogXCJcIiApIDpcblx0XHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHRcdCk7XG5cdFxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0XHRmb3IgKCBpIGluIHMuaGVhZGVycyApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggaSwgcy5oZWFkZXJzWyBpIF0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBbGxvdyBjdXN0b20gaGVhZGVycy9taW1ldHlwZXMgYW5kIGVhcmx5IGFib3J0XG5cdFx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJlxuXHRcdFx0XHQoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IGNvbXBsZXRlZCApICkge1xuXHRcblx0XHRcdFx0Ly8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuXG5cdFx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdFx0c3RyQWJvcnQgPSBcImFib3J0XCI7XG5cdFxuXHRcdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkLmFkZCggcy5jb21wbGV0ZSApO1xuXHRcdFx0anFYSFIuZG9uZSggcy5zdWNjZXNzICk7XG5cdFx0XHRqcVhIUi5mYWlsKCBzLmVycm9yICk7XG5cdFxuXHRcdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdFx0dHJhbnNwb3J0ID0gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cdFxuXHRcdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0XHRpZiAoICF0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdGRvbmUoIC0xLCBcIk5vIFRyYW5zcG9ydFwiICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gMTtcblx0XG5cdFx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheFNlbmRcIiwgWyBqcVhIUiwgcyBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGFqYXhTZW5kLCBzdG9wIHRoZXJlXG5cdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdHJldHVybiBqcVhIUjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gVGltZW91dFxuXHRcdFx0XHRpZiAoIHMuYXN5bmMgJiYgcy50aW1lb3V0ID4gMCApIHtcblx0XHRcdFx0XHR0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRqcVhIUi5hYm9ydCggXCJ0aW1lb3V0XCIgKTtcblx0XHRcdFx0XHR9LCBzLnRpbWVvdXQgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFJldGhyb3cgcG9zdC1jb21wbGV0aW9uIGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBQcm9wYWdhdGUgb3RoZXJzIGFzIHJlc3VsdHNcblx0XHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0XHRmdW5jdGlvbiBkb25lKCBzdGF0dXMsIG5hdGl2ZVN0YXR1c1RleHQsIHJlc3BvbnNlcywgaGVhZGVycyApIHtcblx0XHRcdFx0dmFyIGlzU3VjY2Vzcywgc3VjY2VzcywgZXJyb3IsIHJlc3BvbnNlLCBtb2RpZmllZCxcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblx0XG5cdFx0XHRcdC8vIElnbm9yZSByZXBlYXQgaW52b2NhdGlvbnNcblx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRjb21wbGV0ZWQgPSB0cnVlO1xuXHRcblx0XHRcdFx0Ly8gQ2xlYXIgdGltZW91dCBpZiBpdCBleGlzdHNcblx0XHRcdFx0aWYgKCB0aW1lb3V0VGltZXIgKSB7XG5cdFx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dFRpbWVyICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIERlcmVmZXJlbmNlIHRyYW5zcG9ydCBmb3IgZWFybHkgZ2FyYmFnZSBjb2xsZWN0aW9uXG5cdFx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHRcdHRyYW5zcG9ydCA9IHVuZGVmaW5lZDtcblx0XG5cdFx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCBcIlwiO1xuXHRcblx0XHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblx0XG5cdFx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRcdGlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXHRcblx0XHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdFx0aWYgKCByZXNwb25zZXMgKSB7XG5cdFx0XHRcdFx0cmVzcG9uc2UgPSBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIENvbnZlcnQgbm8gbWF0dGVyIHdoYXQgKHRoYXQgd2F5IHJlc3BvbnNlWFhYIGZpZWxkcyBhcmUgYWx3YXlzIHNldClcblx0XHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblx0XG5cdFx0XHRcdC8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nXG5cdFx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXHRcblx0XHRcdFx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJMYXN0LU1vZGlmaWVkXCIgKTtcblx0XHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiZXRhZ1wiICk7XG5cdFx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gaWYgbm8gY29udGVudFxuXHRcdFx0XHRcdGlmICggc3RhdHVzID09PSAyMDQgfHwgcy50eXBlID09PSBcIkhFQURcIiApIHtcblx0XHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXHRcblx0XHRcdFx0XHQvLyBpZiBub3QgbW9kaWZpZWRcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vdG1vZGlmaWVkXCI7XG5cdFxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdGU7XG5cdFx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRcdGVycm9yID0gcmVzcG9uc2UuZXJyb3I7XG5cdFx0XHRcdFx0XHRpc1N1Y2Nlc3MgPSAhZXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0XHQvLyBFeHRyYWN0IGVycm9yIGZyb20gc3RhdHVzVGV4dCBhbmQgbm9ybWFsaXplIGZvciBub24tYWJvcnRzXG5cdFx0XHRcdFx0ZXJyb3IgPSBzdGF0dXNUZXh0O1xuXHRcdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcblx0XHRcdFx0XHRcdGlmICggc3RhdHVzIDwgMCApIHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0XG5cdFx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdFx0anFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXHRcblx0XHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdFx0anFYSFIuc3RhdHVzQ29kZSggc3RhdHVzQ29kZSApO1xuXHRcdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXHRcblx0XHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRcdFsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIENvbXBsZXRlXG5cdFx0XHRcdGNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7XG5cdFxuXHRcdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhDb21wbGV0ZVwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyXG5cdFx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBcImFqYXhTdG9wXCIgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0fSxcblx0XG5cdFx0Z2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCBkYXRhLCBjYWxsYmFjaywgXCJqc29uXCIgKTtcblx0XHR9LFxuXHRcblx0XHRnZXRTY3JpcHQ6IGZ1bmN0aW9uKCB1cmwsIGNhbGxiYWNrICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHRcdH1cblx0fSApO1xuXHRcblx0alF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0XHRqUXVlcnlbIG1ldGhvZCBdID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2ssIHR5cGUgKSB7XG5cdFxuXHRcdFx0Ly8gU2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWRcblx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGRhdGEgKSApIHtcblx0XHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBUaGUgdXJsIGNhbiBiZSBhbiBvcHRpb25zIG9iamVjdCAod2hpY2ggdGhlbiBtdXN0IGhhdmUgLnVybClcblx0XHRcdHJldHVybiBqUXVlcnkuYWpheCggalF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0dHlwZTogbWV0aG9kLFxuXHRcdFx0XHRkYXRhVHlwZTogdHlwZSxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0c3VjY2VzczogY2FsbGJhY2tcblx0XHRcdH0sIGpRdWVyeS5pc1BsYWluT2JqZWN0KCB1cmwgKSAmJiB1cmwgKSApO1xuXHRcdH07XG5cdH0gKTtcblx0XG5cdFxuXHRqUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuXHRcdHJldHVybiBqUXVlcnkuYWpheCgge1xuXHRcdFx0dXJsOiB1cmwsXG5cdFxuXHRcdFx0Ly8gTWFrZSB0aGlzIGV4cGxpY2l0LCBzaW5jZSB1c2VyIGNhbiBvdmVycmlkZSB0aGlzIHRocm91Z2ggYWpheFNldHVwICgjMTEyNjQpXG5cdFx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0XHRjYWNoZTogdHJ1ZSxcblx0XHRcdGFzeW5jOiBmYWxzZSxcblx0XHRcdGdsb2JhbDogZmFsc2UsXG5cdFx0XHRcInRocm93c1wiOiB0cnVlXG5cdFx0fSApO1xuXHR9O1xuXHRcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHR3cmFwQWxsOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRcdHZhciB3cmFwO1xuXHRcblx0XHRcdGlmICggdGhpc1sgMCBdICkge1xuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRcdFx0aHRtbCA9IGh0bWwuY2FsbCggdGhpc1sgMCBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG5cdFx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXHRcblx0XHRcdFx0aWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHdyYXAubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cdFxuXHRcdFx0XHRcdHdoaWxlICggZWxlbS5maXJzdEVsZW1lbnRDaGlsZCApIHtcblx0XHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHRcdH0gKS5hcHBlbmQoIHRoaXMgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcblx0XHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwSW5uZXIoIGh0bWwuY2FsbCggdGhpcywgaSApICk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0XHRjb250ZW50cyA9IHNlbGYuY29udGVudHMoKTtcblx0XG5cdFx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRcdGNvbnRlbnRzLndyYXBBbGwoIGh0bWwgKTtcblx0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5hcHBlbmQoIGh0bWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0sXG5cdFxuXHRcdHdyYXA6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdFx0dmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXHRcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBpc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0dW53cmFwOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHR0aGlzLnBhcmVudCggc2VsZWN0b3IgKS5ub3QoIFwiYm9keVwiICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHRcdH0gKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdGpRdWVyeS5leHByLnBzZXVkb3MuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuICFqUXVlcnkuZXhwci5wc2V1ZG9zLnZpc2libGUoIGVsZW0gKTtcblx0fTtcblx0alF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuICEhKCBlbGVtLm9mZnNldFdpZHRoIHx8IGVsZW0ub2Zmc2V0SGVpZ2h0IHx8IGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKTtcblx0fTtcblx0XG5cdFxuXHRcblx0XG5cdGpRdWVyeS5hamF4U2V0dGluZ3MueGhyID0gZnVuY3Rpb24oKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG5cdFx0fSBjYXRjaCAoIGUgKSB7fVxuXHR9O1xuXHRcblx0dmFyIHhoclN1Y2Nlc3NTdGF0dXMgPSB7XG5cdFxuXHRcdFx0Ly8gRmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHRcdDA6IDIwMCxcblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0XHQxMjIzOiAyMDRcblx0XHR9LFxuXHRcdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cdFxuXHRzdXBwb3J0LmNvcnMgPSAhIXhoclN1cHBvcnRlZCAmJiAoIFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyU3VwcG9ydGVkICk7XG5cdHN1cHBvcnQuYWpheCA9IHhoclN1cHBvcnRlZCA9ICEheGhyU3VwcG9ydGVkO1xuXHRcblx0alF1ZXJ5LmFqYXhUcmFuc3BvcnQoIGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHRcdHZhciBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaztcblx0XG5cdFx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRcdGlmICggc3VwcG9ydC5jb3JzIHx8IHhoclN1cHBvcnRlZCAmJiAhb3B0aW9ucy5jcm9zc0RvbWFpbiApIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0XHR2YXIgaSxcblx0XHRcdFx0XHRcdHhociA9IG9wdGlvbnMueGhyKCk7XG5cdFxuXHRcdFx0XHRcdHhoci5vcGVuKFxuXHRcdFx0XHRcdFx0b3B0aW9ucy50eXBlLFxuXHRcdFx0XHRcdFx0b3B0aW9ucy51cmwsXG5cdFx0XHRcdFx0XHRvcHRpb25zLmFzeW5jLFxuXHRcdFx0XHRcdFx0b3B0aW9ucy51c2VybmFtZSxcblx0XHRcdFx0XHRcdG9wdGlvbnMucGFzc3dvcmRcblx0XHRcdFx0XHQpO1xuXHRcblx0XHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdFx0aWYgKCBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdGZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIE92ZXJyaWRlIG1pbWUgdHlwZSBpZiBuZWVkZWRcblx0XHRcdFx0XHRpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG5cdFx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0XHQvLyBGb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzLCBzZWVpbmcgYXMgY29uZGl0aW9ucyBmb3IgYSBwcmVmbGlnaHQgYXJlXG5cdFx0XHRcdFx0Ly8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cblx0XHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0XHQvLyBGb3Igc2FtZS1kb21haW4gcmVxdWVzdHMsIHdvbid0IGNoYW5nZSBoZWFkZXIgaWYgYWxyZWFkeSBwcm92aWRlZC5cblx0XHRcdFx0XHRpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdICkge1xuXHRcdFx0XHRcdFx0aGVhZGVyc1sgXCJYLVJlcXVlc3RlZC1XaXRoXCIgXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIFNldCBoZWFkZXJzXG5cdFx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gQ2FsbGJhY2tcblx0XHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gZXJyb3JDYWxsYmFjayA9IHhoci5vbmxvYWQgPVxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLm9uZXJyb3IgPSB4aHIub25hYm9ydCA9IHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHRcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiYWJvcnRcIiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIHR5cGUgPT09IFwiZXJyb3JcIiApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gT24gYSBtYW51YWwgbmF0aXZlIGFib3J0LCBJRTkgdGhyb3dzXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBlcnJvcnMgb24gYW55IHByb3BlcnR5IGFjY2VzcyB0aGF0IGlzIG5vdCByZWFkeVN0YXRlXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGVvZiB4aHIuc3RhdHVzICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZSggMCwgXCJlcnJvclwiICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHQsXG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJRTkgaGFzIG5vIFhIUjIgYnV0IHRocm93cyBvbiBiaW5hcnkgKHRyYWMtMTE0MjYpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCggeGhyLnJlc3BvbnNlVHlwZSB8fCBcInRleHRcIiApICE9PSBcInRleHRcIiAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHhoci5yZXNwb25zZVRleHQgIT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHsgYmluYXJ5OiB4aHIucmVzcG9uc2UgfSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0eyB0ZXh0OiB4aHIucmVzcG9uc2VUZXh0IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fTtcblx0XG5cdFx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHRcdGVycm9yQ2FsbGJhY2sgPSB4aHIub25lcnJvciA9IGNhbGxiYWNrKCBcImVycm9yXCIgKTtcblx0XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgOSBvbmx5XG5cdFx0XHRcdFx0Ly8gVXNlIG9ucmVhZHlzdGF0ZWNoYW5nZSB0byByZXBsYWNlIG9uYWJvcnRcblx0XHRcdFx0XHQvLyB0byBoYW5kbGUgdW5jYXVnaHQgYWJvcnRzXG5cdFx0XHRcdFx0aWYgKCB4aHIub25hYm9ydCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0eGhyLm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayByZWFkeVN0YXRlIGJlZm9yZSB0aW1lb3V0IGFzIGl0IGNoYW5nZXNcblx0XHRcdFx0XHRcdFx0aWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gNCApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWxsb3cgb25lcnJvciB0byBiZSBjYWxsZWQgZmlyc3QsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYnV0IHRoYXQgd2lsbCBub3QgaGFuZGxlIGEgbmF0aXZlIGFib3J0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbywgc2F2ZSBlcnJvckNhbGxiYWNrIHRvIGEgdmFyaWFibGVcblx0XHRcdFx0XHRcdFx0XHQvLyBhcyB4aHIub25lcnJvciBjYW5ub3QgYmUgYWNjZXNzZWRcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlcnJvckNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIHRoZSBhYm9ydCBjYWxsYmFja1xuXHRcdFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2soIFwiYWJvcnRcIiApO1xuXHRcblx0XHRcdFx0XHR0cnkge1xuXHRcblx0XHRcdFx0XHRcdC8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbilcblx0XHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyAjMTQ2ODM6IE9ubHkgcmV0aHJvdyBpZiB0aGlzIGhhc24ndCBiZWVuIG5vdGlmaWVkIGFzIGFuIGVycm9yIHlldFxuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0Ly8gUHJldmVudCBhdXRvLWV4ZWN1dGlvbiBvZiBzY3JpcHRzIHdoZW4gbm8gZXhwbGljaXQgZGF0YVR5cGUgd2FzIHByb3ZpZGVkIChTZWUgZ2gtMjQzMilcblx0alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIGZ1bmN0aW9uKCBzICkge1xuXHRcdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHRcdHMuY29udGVudHMuc2NyaXB0ID0gZmFsc2U7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHQvLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZVxuXHRqUXVlcnkuYWpheFNldHVwKCB7XG5cdFx0YWNjZXB0czoge1xuXHRcdFx0c2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgXCIgK1xuXHRcdFx0XHRcImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdFx0fSxcblx0XHRjb250ZW50czoge1xuXHRcdFx0c2NyaXB0OiAvXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi9cblx0XHR9LFxuXHRcdGNvbnZlcnRlcnM6IHtcblx0XHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG5cdFx0XHRcdHJldHVybiB0ZXh0O1xuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xuXHRcblx0Ly8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxuXHRqUXVlcnkuYWpheFByZWZpbHRlciggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cdFx0aWYgKCBzLmNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdFx0fVxuXHRcdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHQvLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcblx0alF1ZXJ5LmFqYXhUcmFuc3BvcnQoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRcblx0XHQvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIHJlcXVlc3RzXG5cdFx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRzZW5kOiBmdW5jdGlvbiggXywgY29tcGxldGUgKSB7XG5cdFx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KCBcIjxzY3JpcHQ+XCIgKS5wcm9wKCB7XG5cdFx0XHRcdFx0XHRjaGFyc2V0OiBzLnNjcmlwdENoYXJzZXQsXG5cdFx0XHRcdFx0XHRzcmM6IHMudXJsXG5cdFx0XHRcdFx0fSApLm9uKFxuXHRcdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdHNjcmlwdC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGV2dCApIHtcblx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZSggZXZ0LnR5cGUgPT09IFwiZXJyb3JcIiA/IDQwNCA6IDIwMCwgZXZ0LnR5cGUgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cdFxuXHRcdFx0XHRcdC8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeVxuXHRcdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdFsgMCBdICk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRcblx0XG5cdFxuXHR2YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdFx0cmpzb25wID0gLyg9KVxcPyg/PSZ8JCl8XFw/XFw/Lztcblx0XG5cdC8vIERlZmF1bHQganNvbnAgc2V0dGluZ3Ncblx0alF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRcdGpzb25wOiBcImNhbGxiYWNrXCIsXG5cdFx0anNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHRcdHRoaXNbIGNhbGxiYWNrIF0gPSB0cnVlO1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrO1xuXHRcdH1cblx0fSApO1xuXHRcblx0Ly8gRGV0ZWN0LCBub3JtYWxpemUgb3B0aW9ucyBhbmQgaW5zdGFsbCBjYWxsYmFja3MgZm9yIGpzb25wIHJlcXVlc3RzXG5cdGpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXHRcblx0XHR2YXIgY2FsbGJhY2tOYW1lLCBvdmVyd3JpdHRlbiwgcmVzcG9uc2VDb250YWluZXIsXG5cdFx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XHRcInVybFwiIDpcblx0XHRcdFx0dHlwZW9mIHMuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHRcdCggcy5jb250ZW50VHlwZSB8fCBcIlwiIClcblx0XHRcdFx0XHRcdC5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgJiZcblx0XHRcdFx0XHRyanNvbnAudGVzdCggcy5kYXRhICkgJiYgXCJkYXRhXCJcblx0XHRcdCk7XG5cdFxuXHRcdC8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyBcImpzb25wXCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXRcblx0XHRpZiAoIGpzb25Qcm9wIHx8IHMuZGF0YVR5cGVzWyAwIF0gPT09IFwianNvbnBcIiApIHtcblx0XG5cdFx0XHQvLyBHZXQgY2FsbGJhY2sgbmFtZSwgcmVtZW1iZXJpbmcgcHJlZXhpc3RpbmcgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIGl0XG5cdFx0XHRjYWxsYmFja05hbWUgPSBzLmpzb25wQ2FsbGJhY2sgPSBqUXVlcnkuaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgP1xuXHRcdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRcdHMuanNvbnBDYWxsYmFjaztcblx0XG5cdFx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0XHRpZiAoIGpzb25Qcm9wICkge1xuXHRcdFx0XHRzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsIFwiJDFcIiArIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRcdHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIHMudXJsICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmpzb25wICsgXCI9XCIgKyBjYWxsYmFja05hbWU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gVXNlIGRhdGEgY29udmVydGVyIHRvIHJldHJpZXZlIGpzb24gYWZ0ZXIgc2NyaXB0IGV4ZWN1dGlvblxuXHRcdFx0cy5jb252ZXJ0ZXJzWyBcInNjcmlwdCBqc29uXCIgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXJyb3IoIGNhbGxiYWNrTmFtZSArIFwiIHdhcyBub3QgY2FsbGVkXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTtcblx0XHRcdH07XG5cdFxuXHRcdFx0Ly8gRm9yY2UganNvbiBkYXRhVHlwZVxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSA9IFwianNvblwiO1xuXHRcblx0XHRcdC8vIEluc3RhbGwgY2FsbGJhY2tcblx0XHRcdG92ZXJ3cml0dGVuID0gd2luZG93WyBjYWxsYmFja05hbWUgXTtcblx0XHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7XG5cdFx0XHR9O1xuXHRcblx0XHRcdC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuXHRcdFx0anFYSFIuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdC8vIElmIHByZXZpb3VzIHZhbHVlIGRpZG4ndCBleGlzdCAtIHJlbW92ZSBpdFxuXHRcdFx0XHRpZiAoIG92ZXJ3cml0dGVuID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5KCB3aW5kb3cgKS5yZW1vdmVQcm9wKCBjYWxsYmFja05hbWUgKTtcblx0XG5cdFx0XHRcdC8vIE90aGVyd2lzZSByZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IG92ZXJ3cml0dGVuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBTYXZlIGJhY2sgYXMgZnJlZVxuXHRcdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXHRcblx0XHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0XHRzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7XG5cdFxuXHRcdFx0XHRcdC8vIFNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0XHRvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIENhbGwgaWYgaXQgd2FzIGEgZnVuY3Rpb24gYW5kIHdlIGhhdmUgYSByZXNwb25zZVxuXHRcdFx0XHRpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBvdmVyd3JpdHRlbiApICkge1xuXHRcdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0XHR9ICk7XG5cdFxuXHRcdFx0Ly8gRGVsZWdhdGUgdG8gc2NyaXB0XG5cdFx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRcblx0XG5cdC8vIFN1cHBvcnQ6IFNhZmFyaSA4IG9ubHlcblx0Ly8gSW4gU2FmYXJpIDggZG9jdW1lbnRzIGNyZWF0ZWQgdmlhIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudFxuXHQvLyBjb2xsYXBzZSBzaWJsaW5nIGZvcm1zOiB0aGUgc2Vjb25kIG9uZSBiZWNvbWVzIGEgY2hpbGQgb2YgdGhlIGZpcnN0IG9uZS5cblx0Ly8gQmVjYXVzZSBvZiB0aGF0LCB0aGlzIHNlY3VyaXR5IG1lYXN1cmUgaGFzIHRvIGJlIGRpc2FibGVkIGluIFNhZmFyaSA4LlxuXHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM3MzM3XG5cdHN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ID0gKCBmdW5jdGlvbigpIHtcblx0XHR2YXIgYm9keSA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggXCJcIiApLmJvZHk7XG5cdFx0Ym9keS5pbm5lckhUTUwgPSBcIjxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+XCI7XG5cdFx0cmV0dXJuIGJvZHkuY2hpbGROb2Rlcy5sZW5ndGggPT09IDI7XG5cdH0gKSgpO1xuXHRcblx0XG5cdC8vIEFyZ3VtZW50IFwiZGF0YVwiIHNob3VsZCBiZSBzdHJpbmcgb2YgaHRtbFxuXHQvLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsXG5cdC8vIGRlZmF1bHRzIHRvIGRvY3VtZW50XG5cdC8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmdcblx0alF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcblx0XHRpZiAoIHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRcdGNvbnRleHQgPSBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdHZhciBiYXNlLCBwYXJzZWQsIHNjcmlwdHM7XG5cdFxuXHRcdGlmICggIWNvbnRleHQgKSB7XG5cdFxuXHRcdFx0Ly8gU3RvcCBzY3JpcHRzIG9yIGlubGluZSBldmVudCBoYW5kbGVycyBmcm9tIGJlaW5nIGV4ZWN1dGVkIGltbWVkaWF0ZWx5XG5cdFx0XHQvLyBieSB1c2luZyBkb2N1bWVudC5pbXBsZW1lbnRhdGlvblxuXHRcdFx0aWYgKCBzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCApIHtcblx0XHRcdFx0Y29udGV4dCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggXCJcIiApO1xuXHRcblx0XHRcdFx0Ly8gU2V0IHRoZSBiYXNlIGhyZWYgZm9yIHRoZSBjcmVhdGVkIGRvY3VtZW50XG5cdFx0XHRcdC8vIHNvIGFueSBwYXJzZWQgZWxlbWVudHMgd2l0aCBVUkxzXG5cdFx0XHRcdC8vIGFyZSBiYXNlZCBvbiB0aGUgZG9jdW1lbnQncyBVUkwgKGdoLTI5NjUpXG5cdFx0XHRcdGJhc2UgPSBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiYmFzZVwiICk7XG5cdFx0XHRcdGJhc2UuaHJlZiA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7XG5cdFx0XHRcdGNvbnRleHQuaGVhZC5hcHBlbmRDaGlsZCggYmFzZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29udGV4dCA9IGRvY3VtZW50O1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cGFyc2VkID0gcnNpbmdsZVRhZy5leGVjKCBkYXRhICk7XG5cdFx0c2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblx0XG5cdFx0Ly8gU2luZ2xlIHRhZ1xuXHRcdGlmICggcGFyc2VkICkge1xuXHRcdFx0cmV0dXJuIFsgY29udGV4dC5jcmVhdGVFbGVtZW50KCBwYXJzZWRbIDEgXSApIF07XG5cdFx0fVxuXHRcblx0XHRwYXJzZWQgPSBidWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApO1xuXHRcblx0XHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0XHRqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBwYXJzZWQuY2hpbGROb2RlcyApO1xuXHR9O1xuXHRcblx0XG5cdC8qKlxuXHQgKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG5cdCAqL1xuXHRqUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdFx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRcdHNlbGYgPSB0aGlzLFxuXHRcdFx0b2ZmID0gdXJsLmluZGV4T2YoIFwiIFwiICk7XG5cdFxuXHRcdGlmICggb2ZmID4gLTEgKSB7XG5cdFx0XHRzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0XHR1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuXHRcdH1cblx0XG5cdFx0Ly8gSWYgaXQncyBhIGZ1bmN0aW9uXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7XG5cdFxuXHRcdFx0Ly8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcblx0XHRcdGNhbGxiYWNrID0gcGFyYW1zO1xuXHRcdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXHRcblx0XHQvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nXG5cdFx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHR0eXBlID0gXCJQT1NUXCI7XG5cdFx0fVxuXHRcblx0XHQvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuXHRcdGlmICggc2VsZi5sZW5ndGggPiAwICkge1xuXHRcdFx0alF1ZXJ5LmFqYXgoIHtcblx0XHRcdFx0dXJsOiB1cmwsXG5cdFxuXHRcdFx0XHQvLyBJZiBcInR5cGVcIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gXCJHRVRcIiBtZXRob2Qgd2lsbCBiZSB1c2VkLlxuXHRcdFx0XHQvLyBNYWtlIHZhbHVlIG9mIHRoaXMgZmllbGQgZXhwbGljaXQgc2luY2Vcblx0XHRcdFx0Ly8gdXNlciBjYW4gb3ZlcnJpZGUgaXQgdGhyb3VnaCBhamF4U2V0dXAgbWV0aG9kXG5cdFx0XHRcdHR5cGU6IHR5cGUgfHwgXCJHRVRcIixcblx0XHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxuXHRcdFx0XHRkYXRhOiBwYXJhbXNcblx0XHRcdH0gKS5kb25lKCBmdW5jdGlvbiggcmVzcG9uc2VUZXh0ICkge1xuXHRcblx0XHRcdFx0Ly8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrXG5cdFx0XHRcdHJlc3BvbnNlID0gYXJndW1lbnRzO1xuXHRcblx0XHRcdFx0c2VsZi5odG1sKCBzZWxlY3RvciA/XG5cdFxuXHRcdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHRcdC8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9yc1xuXHRcdFx0XHRcdGpRdWVyeSggXCI8ZGl2PlwiICkuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXHRcblx0XHRcdFx0XHQvLyBPdGhlcndpc2UgdXNlIHRoZSBmdWxsIHJlc3VsdFxuXHRcdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXHRcblx0XHRcdC8vIElmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJkYXRhXCIsIFwic3RhdHVzXCIsIFwianFYSFJcIlxuXHRcdFx0Ly8gYnV0IHRoZXkgYXJlIGlnbm9yZWQgYmVjYXVzZSByZXNwb25zZSB3YXMgc2V0IGFib3ZlLlxuXHRcdFx0Ly8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImpxWEhSXCIsIFwic3RhdHVzXCIsIFwiZXJyb3JcIlxuXHRcdFx0fSApLmFsd2F5cyggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRcdHNlbGYuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcblx0XHRcdFx0fSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRcblx0XG5cdFxuXHQvLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xuXHRqUXVlcnkuZWFjaCggW1xuXHRcdFwiYWpheFN0YXJ0XCIsXG5cdFx0XCJhamF4U3RvcFwiLFxuXHRcdFwiYWpheENvbXBsZXRlXCIsXG5cdFx0XCJhamF4RXJyb3JcIixcblx0XHRcImFqYXhTdWNjZXNzXCIsXG5cdFx0XCJhamF4U2VuZFwiXG5cdF0sIGZ1bmN0aW9uKCBpLCB0eXBlICkge1xuXHRcdGpRdWVyeS5mblsgdHlwZSBdID0gZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdFx0fTtcblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0alF1ZXJ5LmV4cHIucHNldWRvcy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG5cdFx0fSApLmxlbmd0aDtcblx0fTtcblx0XG5cdFxuXHRcblx0XG5cdC8qKlxuXHQgKiBHZXRzIGEgd2luZG93IGZyb20gYW4gZWxlbWVudFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSA/IGVsZW0gOiBlbGVtLm5vZGVUeXBlID09PSA5ICYmIGVsZW0uZGVmYXVsdFZpZXc7XG5cdH1cblx0XG5cdGpRdWVyeS5vZmZzZXQgPSB7XG5cdFx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRcdHBvc2l0aW9uID0galF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICksXG5cdFx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdFx0cHJvcHMgPSB7fTtcblx0XG5cdFx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0XHRlbGVtLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdFx0fVxuXHRcblx0XHRcdGN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCk7XG5cdFx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRcdGNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSAmJlxuXHRcdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKCBcImF1dG9cIiApID4gLTE7XG5cdFxuXHRcdFx0Ly8gTmVlZCB0byBiZSBhYmxlIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBpZiBlaXRoZXJcblx0XHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdFx0aWYgKCBjYWxjdWxhdGVQb3NpdGlvbiApIHtcblx0XHRcdFx0Y3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7XG5cdFx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdFx0Y3VyTGVmdCA9IGN1clBvc2l0aW9uLmxlZnQ7XG5cdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDtcblx0XHRcdFx0Y3VyTGVmdCA9IHBhcnNlRmxvYXQoIGN1ckNTU0xlZnQgKSB8fCAwO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHtcblx0XG5cdFx0XHRcdC8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KVxuXHRcdFx0XHRvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyT2Zmc2V0ICkgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7XG5cdFx0XHRcdHByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkge1xuXHRcdFx0XHRwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIFwidXNpbmdcIiBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdG9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFxuXHRcdFx0Ly8gUHJlc2VydmUgY2hhaW5pbmcgZm9yIHNldHRlclxuXHRcdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0XHR0aGlzIDpcblx0XHRcdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5Lm9mZnNldC5zZXRPZmZzZXQoIHRoaXMsIG9wdGlvbnMsIGkgKTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIGRvY0VsZW0sIHdpbiwgcmVjdCwgZG9jLFxuXHRcdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXHRcblx0XHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHRcdC8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGFcblx0XHRcdC8vIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvclxuXHRcdFx0aWYgKCAhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIHtcblx0XHRcdFx0cmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHRcdFx0Ly8gTWFrZSBzdXJlIGVsZW1lbnQgaXMgbm90IGhpZGRlbiAoZGlzcGxheTogbm9uZSlcblx0XHRcdGlmICggcmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCApIHtcblx0XHRcdFx0ZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuXHRcdFx0XHR3aW4gPSBnZXRXaW5kb3coIGRvYyApO1xuXHRcdFx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dG9wOiByZWN0LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLFxuXHRcdFx0XHRcdGxlZnQ6IHJlY3QubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFJldHVybiB6ZXJvcyBmb3IgZGlzY29ubmVjdGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGdoLTIzMTApXG5cdFx0XHRyZXR1cm4gcmVjdDtcblx0XHR9LFxuXHRcblx0XHRwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICF0aGlzWyAwIF0gKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsXG5cdFx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cdFxuXHRcdFx0Ly8gRml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHdpbmRvdyAocGFyZW50T2Zmc2V0ID0ge3RvcDowLCBsZWZ0OiAwfSxcblx0XHRcdC8vIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdFx0aWYgKCBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSA9PT0gXCJmaXhlZFwiICkge1xuXHRcblx0XHRcdFx0Ly8gQXNzdW1lIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyB0aGVyZSB3aGVuIGNvbXB1dGVkIHBvc2l0aW9uIGlzIGZpeGVkXG5cdFx0XHRcdG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdC8vIEdldCAqcmVhbCogb2Zmc2V0UGFyZW50XG5cdFx0XHRcdG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50KCk7XG5cdFxuXHRcdFx0XHQvLyBHZXQgY29ycmVjdCBvZmZzZXRzXG5cdFx0XHRcdG9mZnNldCA9IHRoaXMub2Zmc2V0KCk7XG5cdFx0XHRcdGlmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50WyAwIF0sIFwiaHRtbFwiICkgKSB7XG5cdFx0XHRcdFx0cGFyZW50T2Zmc2V0ID0gb2Zmc2V0UGFyZW50Lm9mZnNldCgpO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBBZGQgb2Zmc2V0UGFyZW50IGJvcmRlcnNcblx0XHRcdFx0cGFyZW50T2Zmc2V0ID0ge1xuXHRcdFx0XHRcdHRvcDogcGFyZW50T2Zmc2V0LnRvcCArIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKSxcblx0XHRcdFx0XHRsZWZ0OiBwYXJlbnRPZmZzZXQubGVmdCArIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlIClcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIsIHRydWUgKVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcblx0XHQvLyBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBkb2N1bWVudEVsZW1lbnQgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcblx0XHQvLyAxKSBGb3IgdGhlIGVsZW1lbnQgaW5zaWRlIHRoZSBpZnJhbWUgd2l0aG91dCBvZmZzZXRQYXJlbnQsIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuXG5cdFx0Ly8gICAgZG9jdW1lbnRFbGVtZW50IG9mIHRoZSBwYXJlbnQgd2luZG93XG5cdFx0Ly8gMikgRm9yIHRoZSBoaWRkZW4gb3IgZGV0YWNoZWQgZWxlbWVudFxuXHRcdC8vIDMpIEZvciBib2R5IG9yIGh0bWwgZWxlbWVudCwgaS5lLiBpbiBjYXNlIG9mIHRoZSBodG1sIG5vZGUgLSBpdCB3aWxsIHJldHVybiBpdHNlbGZcblx0XHQvL1xuXHRcdC8vIGJ1dCB0aG9zZSBleGNlcHRpb25zIHdlcmUgbmV2ZXIgcHJlc2VudGVkIGFzIGEgcmVhbCBsaWZlIHVzZS1jYXNlc1xuXHRcdC8vIGFuZCBtaWdodCBiZSBjb25zaWRlcmVkIGFzIG1vcmUgcHJlZmVyYWJsZSByZXN1bHRzLlxuXHRcdC8vXG5cdFx0Ly8gVGhpcyBsb2dpYywgaG93ZXZlciwgaXMgbm90IGd1YXJhbnRlZWQgYW5kIGNhbiBjaGFuZ2UgYXQgYW55IHBvaW50IGluIHRoZSBmdXR1cmVcblx0XHRvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50O1xuXHRcblx0XHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50RWxlbWVudDtcblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdC8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kc1xuXHRqUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdFx0dmFyIHRvcCA9IFwicGFnZVlPZmZzZXRcIiA9PT0gcHJvcDtcblx0XG5cdFx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7XG5cdFx0XHRcdHZhciB3aW4gPSBnZXRXaW5kb3coIGVsZW0gKTtcblx0XG5cdFx0XHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHdpbiA/IHdpblsgcHJvcCBdIDogZWxlbVsgbWV0aG9kIF07XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGlmICggd2luICkge1xuXHRcdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHRcdCF0b3AgPyB2YWwgOiB3aW4ucGFnZVhPZmZzZXQsXG5cdFx0XHRcdFx0XHR0b3AgPyB2YWwgOiB3aW4ucGFnZVlPZmZzZXRcblx0XHRcdFx0XHQpO1xuXHRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdFx0fVxuXHRcdFx0fSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0XHR9O1xuXHR9ICk7XG5cdFxuXHQvLyBTdXBwb3J0OiBTYWZhcmkgPD03IC0gOS4xLCBDaHJvbWUgPD0zNyAtIDQ5XG5cdC8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uXG5cdC8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuXHQvLyBCbGluayBidWc6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU4OTM0N1xuXHQvLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuXHQvLyByYXRoZXIgdGhhbiBtYWtlIHRoZSBjc3MgbW9kdWxlIGRlcGVuZCBvbiB0aGUgb2Zmc2V0IG1vZHVsZSwganVzdCBjaGVjayBmb3IgaXQgaGVyZVxuXHRqUXVlcnkuZWFjaCggWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHtcblx0XHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cdFxuXHRcdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRcdHJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/XG5cdFx0XHRcdFx0XHRqUXVlcnkoIGVsZW0gKS5wb3NpdGlvbigpWyBwcm9wIF0gKyBcInB4XCIgOlxuXHRcdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHQpO1xuXHR9ICk7XG5cdFxuXHRcblx0Ly8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5cdGpRdWVyeS5lYWNoKCB7IEhlaWdodDogXCJoZWlnaHRcIiwgV2lkdGg6IFwid2lkdGhcIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHtcblx0XHRqUXVlcnkuZWFjaCggeyBwYWRkaW5nOiBcImlubmVyXCIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCBcIlwiOiBcIm91dGVyXCIgKyBuYW1lIH0sXG5cdFx0XHRmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHtcblx0XG5cdFx0XHQvLyBNYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGhcblx0XHRcdGpRdWVyeS5mblsgZnVuY05hbWUgXSA9IGZ1bmN0aW9uKCBtYXJnaW4sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRcdGV4dHJhID0gZGVmYXVsdEV4dHJhIHx8ICggbWFyZ2luID09PSB0cnVlIHx8IHZhbHVlID09PSB0cnVlID8gXCJtYXJnaW5cIiA6IFwiYm9yZGVyXCIgKTtcblx0XG5cdFx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0XHR2YXIgZG9jO1xuXHRcblx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcblx0XHRcdFx0XHRcdC8vICQoIHdpbmRvdyApLm91dGVyV2lkdGgvSGVpZ2h0IHJldHVybiB3L2ggaW5jbHVkaW5nIHNjcm9sbGJhcnMgKGdoLTE3MjkpXG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY05hbWUuaW5kZXhPZiggXCJvdXRlclwiICkgPT09IDAgP1xuXHRcdFx0XHRcdFx0XHRlbGVtWyBcImlubmVyXCIgKyBuYW1lIF0gOlxuXHRcdFx0XHRcdFx0XHRlbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgXCJjbGllbnRcIiArIG5hbWUgXTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHRcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHRkb2MgPSBlbGVtLmRvY3VtZW50RWxlbWVudDtcblx0XG5cdFx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0XHQvLyB3aGljaGV2ZXIgaXMgZ3JlYXRlc3Rcblx0XHRcdFx0XHRcdHJldHVybiBNYXRoLm1heChcblx0XHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJvZmZzZXRcIiArIG5hbWUgXSwgZG9jWyBcIm9mZnNldFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0XHRkb2NbIFwiY2xpZW50XCIgKyBuYW1lIF1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFxuXHRcdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6XG5cdFxuXHRcdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcblx0XHRcdFx0fSwgdHlwZSwgY2hhaW5hYmxlID8gbWFyZ2luIDogdW5kZWZpbmVkLCBjaGFpbmFibGUgKTtcblx0XHRcdH07XG5cdFx0fSApO1xuXHR9ICk7XG5cdFxuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcblx0XHRiaW5kOiBmdW5jdGlvbiggdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApO1xuXHRcdH0sXG5cdFx0dW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkge1xuXHRcdFx0cmV0dXJuIHRoaXMub2ZmKCB0eXBlcywgbnVsbCwgZm4gKTtcblx0XHR9LFxuXHRcblx0XHRkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHRcdH0sXG5cdFx0dW5kZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZm4gKSB7XG5cdFxuXHRcdFx0Ly8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xuXHRcdFx0XHR0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDpcblx0XHRcdFx0dGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkucGFyc2VKU09OID0gSlNPTi5wYXJzZTtcblx0XG5cdFxuXHRcblx0XG5cdC8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuXHQvLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0XG5cdC8vIHVuZGVyc3RhbmRzIGFub255bW91cyBBTUQgbW9kdWxlcy4gQSBuYW1lZCBBTUQgaXMgc2FmZXN0IGFuZCBtb3N0IHJvYnVzdFxuXHQvLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG5cdC8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZVxuXHQvLyBmaWxlIG5hbWUuIERvIHRoaXMgYWZ0ZXIgY3JlYXRpbmcgdGhlIGdsb2JhbCBzbyB0aGF0IGlmIGFuIEFNRCBtb2R1bGUgd2FudHNcblx0Ly8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXHRcblx0Ly8gTm90ZSB0aGF0IGZvciBtYXhpbXVtIHBvcnRhYmlsaXR5LCBsaWJyYXJpZXMgdGhhdCBhcmUgbm90IGpRdWVyeSBzaG91bGRcblx0Ly8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuXHQvLyBBTUQgbG9hZGVyIGlzIHByZXNlbnQuIGpRdWVyeSBpcyBhIHNwZWNpYWwgY2FzZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvd2lraS9VcGRhdGluZy1leGlzdGluZy1saWJyYXJpZXMjd2lraS1hbm9uXG5cdFxuXHRpZiAoIHRydWUgKSB7XG5cdFx0IShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5O1xuXHRcdH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0fVxuXHRcblx0XG5cdFxuXHRcblx0XG5cdHZhclxuXHRcblx0XHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblx0XG5cdFx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XHRfJCA9IHdpbmRvdy4kO1xuXHRcblx0alF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0XHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0XHR3aW5kb3cuJCA9IF8kO1xuXHRcdH1cblx0XG5cdFx0aWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHtcblx0XHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fTtcblx0XG5cdC8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG5cdC8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcblx0Ly8gYW5kIENvbW1vbkpTIGZvciBicm93c2VyIGVtdWxhdG9ycyAoIzEzNTY2KVxuXHRpZiAoICFub0dsb2JhbCApIHtcblx0XHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG5cdH1cblx0XG5cdFxuXHRyZXR1cm4galF1ZXJ5O1xuXHR9ICk7XG5cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfYmFja2JvbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9iYWNrYm9uZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYWNrYm9uZSk7XG5cdFxuXHR2YXIgX3VuZGVyc2NvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF91bmRlcnNjb3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VuZGVyc2NvcmUpO1xuXHRcblx0dmFyIF9FbnRyeSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX0VudHJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VudHJ5KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBFbnRyaWVzID0gZnVuY3Rpb24gKF9CYWNrYm9uZSRDb2xsZWN0aW9uKSB7XG5cdFx0X2luaGVyaXRzKEVudHJpZXMsIF9CYWNrYm9uZSRDb2xsZWN0aW9uKTtcblx0XG5cdFx0ZnVuY3Rpb24gRW50cmllcyhlbnRyaWVzKSB7XG5cdFx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW50cmllcyk7XG5cdFxuXHRcdFx0cmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChFbnRyaWVzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRW50cmllcykpLmNhbGwodGhpcywgZW50cmllcykpO1xuXHRcdH1cblx0XG5cdFx0X2NyZWF0ZUNsYXNzKEVudHJpZXMsIFt7XG5cdFx0XHRrZXk6ICdpbml0aWFsaXplJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdFx0XHR0aGlzLm1vZGVsID0gX0VudHJ5Mi5kZWZhdWx0O1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2dldFVudmlld2VkRW50cnlJRCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZ2V0VW52aWV3ZWRFbnRyeUlEKCkge1xuXHRcdFx0XHR2YXIgdW52aWV3ZWRFbnRyaWVzID0gdGhpcy53aGVyZSh7IHZpZXdlZDogZmFsc2UgfSk7XG5cdFxuXHRcdFx0XHRpZiAodW52aWV3ZWRFbnRyaWVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRyZXR1cm4gX3VuZGVyc2NvcmUyLmRlZmF1bHQuc2FtcGxlKHVudmlld2VkRW50cmllcykuZ2V0KCdpZCcpO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24gKG1vZGVsKSB7XG5cdFx0XHRcdFx0bW9kZWwuc2V0KCd2aWV3ZWQnLCBmYWxzZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5zYW1wbGUoKS5nZXQoJ2lkJyk7XG5cdFx0XHR9XG5cdFx0fV0pO1xuXHRcblx0XHRyZXR1cm4gRW50cmllcztcblx0fShfYmFja2JvbmUyLmRlZmF1bHQuQ29sbGVjdGlvbik7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBFbnRyaWVzO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9iYWNrYm9uZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2JhY2tib25lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JhY2tib25lKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBFbnRyeSA9IGZ1bmN0aW9uIChfQmFja2JvbmUkTW9kZWwpIHtcblx0XHRfaW5oZXJpdHMoRW50cnksIF9CYWNrYm9uZSRNb2RlbCk7XG5cdFxuXHRcdGZ1bmN0aW9uIEVudHJ5KGF0dHJzKSB7XG5cdFx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW50cnkpO1xuXHRcblx0XHRcdHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRW50cnkuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihFbnRyeSkpLmNhbGwodGhpcywgYXR0cnMpKTtcblx0XHR9XG5cdFxuXHRcdF9jcmVhdGVDbGFzcyhFbnRyeSwgW3tcblx0XHRcdGtleTogJ2luaXRpYWxpemUnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0XHRcdHRoaXMuc2V0KHsgdXJsRnJpZW5kbHlUaXRsZTogdGhpcy5jb252ZXJ0VG9TbHVnKHRoaXMuZ2V0KCd0aXRsZScpKSB9KTtcblx0XHRcdFx0dGhpcy5wYXJzZVRpdGxlKCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZGVmYXVsdHMnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRzKCkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHZpZXdlZDogZmFsc2Vcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdwYXJzZVRpdGxlJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBwYXJzZVRpdGxlKCkge1xuXHRcdFx0XHRpZiAodGhpcy50aXRsZUNvbnRhaW5zUGFyZW50aGVzaXModGhpcy5nZXQoJ3RpdGxlJykpKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXQoJ3RpdGxlJywgdGhpcy53cmFwVGl0bGVQYXJlbnRoZXNpc0luU3BhbnModGhpcy5nZXQoJ3RpdGxlJykpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2NvbnZlcnRUb1NsdWcnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNvbnZlcnRUb1NsdWcodGV4dCkge1xuXHRcdFx0XHRyZXR1cm4gdGV4dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teXFx3IF0rL2csICcnKS5yZXBsYWNlKC8gKy9nLCAnLScpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3RpdGxlQ29udGFpbnNQYXJlbnRoZXNpcycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gdGl0bGVDb250YWluc1BhcmVudGhlc2lzKHRpdGxlKSB7XG5cdFx0XHRcdGlmICh0aXRsZS5pbmRleE9mKCcoJykgPiAtMSB8fCB0aXRsZS5pbmRleE9mKCcpJykgPiAtMSkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnd3JhcFRpdGxlUGFyZW50aGVzaXNJblNwYW5zJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiB3cmFwVGl0bGVQYXJlbnRoZXNpc0luU3BhbnModGl0bGUpIHtcblx0XHRcdFx0cmV0dXJuIHRpdGxlLnJlcGxhY2UoJygnLCAnPHNwYW4+KCcpLnJlcGxhY2UoJyknLCAnKTwvc3Bhbj4nKTtcblx0XHRcdH1cblx0XHR9XSk7XG5cdFxuXHRcdHJldHVybiBFbnRyeTtcblx0fShfYmFja2JvbmUyLmRlZmF1bHQuTW9kZWwpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRW50cnk7XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2JhY2tib25lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfYmFja2JvbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFja2JvbmUpO1xuXHRcblx0dmFyIF9qcXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9qcXVlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfanF1ZXJ5KTtcblx0XG5cdHZhciBfdW5kZXJzY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3VuZGVyc2NvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZXJzY29yZSk7XG5cdFxuXHR2YXIgX0xvYWRlclZpZXcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF9Mb2FkZXJWaWV3MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xvYWRlclZpZXcpO1xuXHRcblx0dmFyIF9FbnRyaWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfRW50cmllczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FbnRyaWVzKTtcblx0XG5cdHZhciBfRW50cmllc1ZpZXcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9FbnRyaWVzVmlldzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FbnRyaWVzVmlldyk7XG5cdFxuXHR2YXIgX0VudHJ5VmlldyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX0VudHJ5VmlldzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FbnRyeVZpZXcpO1xuXHRcblx0dmFyIF9ncmVla0luVGVjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIEFwcFJvdXRlciA9IGZ1bmN0aW9uIChfQmFja2JvbmUkUm91dGVyKSB7XG5cdFx0X2luaGVyaXRzKEFwcFJvdXRlciwgX0JhY2tib25lJFJvdXRlcik7XG5cdFxuXHRcdGZ1bmN0aW9uIEFwcFJvdXRlcigpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHBSb3V0ZXIpO1xuXHRcblx0XHRcdHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChBcHBSb3V0ZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihBcHBSb3V0ZXIpKS5jYWxsKHRoaXMpKTtcblx0XG5cdFx0XHRfdGhpcy5yb3V0ZXMgPSB7XG5cdFx0XHRcdCdlbnRyeS86aWQoLzp0aXRsZSknOiAnc2hvd0VudHJ5Jyxcblx0XHRcdFx0JyphY3Rpb25zJzogJ3Nob3dSYW5kb21FbnRyeSdcblx0XHRcdH07XG5cdFx0XHRfdGhpcy5fYmluZFJvdXRlcygpO1xuXHRcdFx0cmV0dXJuIF90aGlzO1xuXHRcdH1cblx0XG5cdFx0X2NyZWF0ZUNsYXNzKEFwcFJvdXRlciwgW3tcblx0XHRcdGtleTogJ2luaXRpYWxpemUnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0XHRcdHRoaXMuaW5pdGlhbEZyYWdtZW50ID0gbnVsbDtcblx0XHRcdFx0dGhpcy4kZW50cnlFbCA9ICgwLCBfanF1ZXJ5Mi5kZWZhdWx0KSgnI2VudHJ5Jyk7XG5cdFx0XHRcdHRoaXMubG9hZGVyID0gbmV3IF9Mb2FkZXJWaWV3Mi5kZWZhdWx0KCk7XG5cdFx0XHRcdHRoaXMuZW50cmllcyA9IG5ldyBfRW50cmllczIuZGVmYXVsdChKU09OLnBhcnNlKF9ncmVla0luVGVjaC5hbGwpKTtcblx0XHRcdFx0dmFyIGVudHJpZXNWaWV3ID0gbmV3IF9FbnRyaWVzVmlldzIuZGVmYXVsdCh7IGNvbGxlY3Rpb246IHRoaXMuZW50cmllcyB9KTtcblx0XHRcdFx0dGhpcy5saXN0ZW5UbyhlbnRyaWVzVmlldywgJ3JvdXRlVG9VbnZpZXdlZEVudHJ5JywgdGhpcy5zaG93RW50cnkpO1xuXHRcdFx0XHR0aGlzLmxpc3RlblRvKGVudHJpZXNWaWV3LCAnbmF2aWdhdGVCYWNrd2FyZHMnLCB0aGlzLm5hdmlnYXRlQmFja3dhcmRzKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdzaG93UmFuZG9tRW50cnknLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHNob3dSYW5kb21FbnRyeSgpIHtcblx0XHRcdFx0dmFyIHJhbmRvbUVudHJ5SUQgPSB0aGlzLmVudHJpZXMuZ2V0VW52aWV3ZWRFbnRyeUlEKCk7XG5cdFx0XHRcdHRoaXMuc2hvd0VudHJ5KHJhbmRvbUVudHJ5SUQpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3Nob3dFbnRyeScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gc2hvd0VudHJ5KGlkKSB7XG5cdFx0XHRcdGlmICh0aGlzLmxvYWRlci4kZWwuaXMoJzp2aXNpYmxlJykpIHtcblx0XHRcdFx0XHR0aGlzLmxvYWRlci50cmlnZ2VyKCdoaWRlJyk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciBlbnRyeSA9IHRoaXMuZW50cmllcy5maW5kV2hlcmUoeyBpZDogcGFyc2VJbnQoaWQpIH0pO1xuXHRcblx0XHRcdFx0aWYgKF91bmRlcnNjb3JlMi5kZWZhdWx0LmlzVW5kZWZpbmVkKGVudHJ5KSkge1xuXHRcdFx0XHRcdHRoaXMuc2hvd1JhbmRvbUVudHJ5KCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR0aGlzLm5hdmlnYXRlKCdlbnRyeS8nICsgaWQgKyAnLycgKyBlbnRyeS5nZXQoJ3VybEZyaWVuZGx5VGl0bGUnKSwgeyB0cmlnZ2VyOiB0cnVlIH0pO1xuXHRcblx0XHRcdFx0aWYgKCF0aGlzLmluaXRpYWxGcmFnbWVudCkge1xuXHRcdFx0XHRcdHRoaXMuaW5pdGlhbEZyYWdtZW50ID0gX2JhY2tib25lMi5kZWZhdWx0Lmhpc3RvcnkuZ2V0RnJhZ21lbnQoKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0dGhpcy5lbnRyeVZpZXcgPSBuZXcgX0VudHJ5VmlldzIuZGVmYXVsdCh7IG1vZGVsOiBlbnRyeSwgY29udGFpbmVyOiB0aGlzLiRlbnRyeUVsIH0pLnJlbmRlcigpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ25hdmlnYXRlQmFja3dhcmRzJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBuYXZpZ2F0ZUJhY2t3YXJkcygpIHtcblx0XHRcdFx0aWYgKHRoaXMuaW5pdGlhbEZyYWdtZW50ID09PSBfYmFja2JvbmUyLmRlZmF1bHQuaGlzdG9yeS5nZXRGcmFnbWVudCgpKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0XHRcdH1cblx0XHR9XSk7XG5cdFxuXHRcdHJldHVybiBBcHBSb3V0ZXI7XG5cdH0oX2JhY2tib25lMi5kZWZhdWx0LlJvdXRlcik7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBBcHBSb3V0ZXI7XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2JhY2tib25lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfYmFja2JvbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFja2JvbmUpO1xuXHRcblx0dmFyIF9qcXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9qcXVlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfanF1ZXJ5KTtcblx0XG5cdHZhciBfdW5kZXJzY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3VuZGVyc2NvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZXJzY29yZSk7XG5cdFxuXHR2YXIgX2hhbW1lcmpzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2hhbW1lcmpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hhbW1lcmpzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBFbnRyaWVzVmlldyA9IGZ1bmN0aW9uIChfQmFja2JvbmUkVmlldykge1xuXHRcdF9pbmhlcml0cyhFbnRyaWVzVmlldywgX0JhY2tib25lJFZpZXcpO1xuXHRcblx0XHRmdW5jdGlvbiBFbnRyaWVzVmlldyhvcHRpb25zKSB7XG5cdFx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW50cmllc1ZpZXcpO1xuXHRcblx0XHRcdHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRW50cmllc1ZpZXcuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihFbnRyaWVzVmlldykpLmNhbGwodGhpcywge1xuXHRcdFx0XHRlbDogJ2JvZHknLFxuXHRcdFx0XHRjb2xsZWN0aW9uOiBvcHRpb25zLmNvbGxlY3Rpb24sXG5cdFxuXHRcdFx0XHRldmVudHM6IHtcblx0XHRcdFx0XHRjbGljazogJ3JlbmRlclJhbmRvbUVudHJ5Jyxcblx0XHRcdFx0XHRrZXlkb3duOiAnaGFuZGxlS2V5Ym9hcmRFdmVudCdcblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXHRcdH1cblx0XG5cdFx0X2NyZWF0ZUNsYXNzKEVudHJpZXNWaWV3LCBbe1xuXHRcdFx0a2V5OiAnaW5pdGlhbGl6ZScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHRcdFx0dmFyIG1jID0gbmV3IF9oYW1tZXJqczIuZGVmYXVsdCh0aGlzLiRlbC5nZXQoMCkpO1xuXHRcdFx0XHRtYy5vbignc3dpcGVyaWdodCBzd2lwZWxlZnQnLCB0aGlzLmhhbmRsZU1vYmlsZUV2ZW50KTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdyZW5kZXJSYW5kb21FbnRyeScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUmFuZG9tRW50cnkoZSkge1xuXHRcdFx0XHQvLyBUT0RPOiBmaW5kIGEgYmV0dGVyIHdheSB0byBzdXBwcmVzcyBldmVudCBkZWxlZ2F0aW9uXG5cdFx0XHRcdGlmIChlICYmICgwLCBfanF1ZXJ5Mi5kZWZhdWx0KShlLnRhcmdldCkuaXMoJ2EnKSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgdW52aWV3ZWRFbnRyeUlEID0gdGhpcy5jb2xsZWN0aW9uLmdldFVudmlld2VkRW50cnlJRCgpO1xuXHRcdFx0XHR0aGlzLnRyaWdnZXIoJ3JvdXRlVG9VbnZpZXdlZEVudHJ5JywgdW52aWV3ZWRFbnRyeUlEKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdoYW5kbGVLZXlib2FyZEV2ZW50Jyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVLZXlib2FyZEV2ZW50KGUpIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcblx0XHRcdFx0dmFyIGJhY2tLZXlzID0gWzM3LCA3Ml07XG5cdFx0XHRcdHZhciBmb3J3YXJkS2V5cyA9IFszOSwgNzZdO1xuXHRcdFx0XHR2YXIgc3BhY2UgPSBbMzJdO1xuXHRcblx0XHRcdFx0aWYgKCFfdW5kZXJzY29yZTIuZGVmYXVsdC5jb250YWlucyhfdW5kZXJzY29yZTIuZGVmYXVsdC51bmlvbihiYWNrS2V5cywgZm9yd2FyZEtleXMsIHNwYWNlKSwgZS5rZXlDb2RlKSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0dmFyIGlzRm9yd2FyZCA9IF91bmRlcnNjb3JlMi5kZWZhdWx0LmNvbnRhaW5zKGZvcndhcmRLZXlzLCBlLmtleUNvZGUpIHx8IHNwYWNlID09PSBlLmtleUNvZGUgJiYgIWUuc2hpZnRLZXk7XG5cdFx0XHRcdHRoaXMubW92ZVRvRW50cnkoaXNGb3J3YXJkKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdoYW5kbGVNb2JpbGVFdmVudCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaGFuZGxlTW9iaWxlRXZlbnQoZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHRcdFx0XHR2YXIgaXNGb3J3YXJkID0gZS50eXBlID09PSAnc3dpcGVsZWZ0Jztcblx0XHRcdFx0dGhpcy5tb3ZlVG9FbnRyeShpc0ZvcndhcmQpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ21vdmVUb0VudHJ5Jyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBtb3ZlVG9FbnRyeShpc0ZvcndhcmQpIHtcblx0XHRcdFx0aXNGb3J3YXJkID8gdGhpcy5yZW5kZXJSYW5kb21FbnRyeSgpIDogdGhpcy50cmlnZ2VyKCduYXZpZ2F0ZUJhY2t3YXJkcycpO1xuXHRcdFx0fVxuXHRcdH1dKTtcblx0XG5cdFx0cmV0dXJuIEVudHJpZXNWaWV3O1xuXHR9KF9iYWNrYm9uZTIuZGVmYXVsdC5WaWV3KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEVudHJpZXNWaWV3O1xuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9iYWNrYm9uZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2JhY2tib25lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JhY2tib25lKTtcblx0XG5cdHZhciBfanF1ZXJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfanF1ZXJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2pxdWVyeSk7XG5cdFxuXHR2YXIgX3VuZGVyc2NvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF91bmRlcnNjb3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VuZGVyc2NvcmUpO1xuXHRcblx0dmFyIF9lbnRyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9lbnRyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lbnRyeSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgRW50cnlWaWV3ID0gZnVuY3Rpb24gKF9CYWNrYm9uZSRWaWV3KSB7XG5cdFx0X2luaGVyaXRzKEVudHJ5VmlldywgX0JhY2tib25lJFZpZXcpO1xuXHRcblx0XHRmdW5jdGlvbiBFbnRyeVZpZXcob3B0aW9ucykge1xuXHRcdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVudHJ5Vmlldyk7XG5cdFxuXHRcdFx0dmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEVudHJ5Vmlldy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEVudHJ5VmlldykpLmNhbGwodGhpcywge1xuXHRcdFx0XHRlbDogJyNlbnRyeScsXG5cdFx0XHRcdG1vZGVsOiBvcHRpb25zLm1vZGVsLFxuXHRcdFx0XHRjb250YWluZXI6IG9wdGlvbnMuY29udGFpbmVyLFxuXHRcblx0XHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdFx0J2NsaWNrIC5zb2NpYWwtbGlua3MgYSc6ICdzb2NpYWxTaGFyZSdcblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXHRcblx0XHRcdF90aGlzLnRlbXBsYXRlID0gX3VuZGVyc2NvcmUyLmRlZmF1bHQudGVtcGxhdGUoX2VudHJ5Mi5kZWZhdWx0KTtcblx0XHRcdHJldHVybiBfdGhpcztcblx0XHR9XG5cdFxuXHRcdF9jcmVhdGVDbGFzcyhFbnRyeVZpZXcsIFt7XG5cdFx0XHRrZXk6ICdpbml0aWFsaXplJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcblx0XHRcdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCAnY2hhbmdlJywgdGhpcy5yZW5kZXIpO1xuXHRcdFx0XHR0aGlzLkNTU2FuaW1hdGlvbkNsYXNzZXMgPSAnZmxpcEluWCBhbmltYXRlZCc7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG5cdFx0XHRcdHRoaXMuYW5pbWF0ZVZpZXcoKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdyZW5kZXInLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRcdFx0dGhpcy5tb2RlbC5zZXQoJ3ZpZXdlZCcsIHRydWUpO1xuXHRcdFx0XHR0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuXHRcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnYW5pbWF0ZVZpZXcnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGFuaW1hdGVWaWV3KCkge1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLkNTU2FuaW1hdGlvbkNsYXNzZXMpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3NvY2lhbFNoYXJlJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBzb2NpYWxTaGFyZShlKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XG5cdFx0XHRcdHZhciB3aWR0aCA9IDU3NTtcblx0XHRcdFx0dmFyIGhlaWdodCA9IDQwMDtcblx0XHRcdFx0dmFyIGxlZnQgPSAoKDAsIF9qcXVlcnkyLmRlZmF1bHQpKHdpbmRvdykud2lkdGgoKSAtIHdpZHRoKSAvIDI7XG5cdFx0XHRcdHZhciB0b3AgPSAoKDAsIF9qcXVlcnkyLmRlZmF1bHQpKHdpbmRvdykuaGVpZ2h0KCkgLSBoZWlnaHQpIC8gMjtcblx0XHRcdFx0dmFyIHVybCA9ICgwLCBfanF1ZXJ5Mi5kZWZhdWx0KShlLnRhcmdldCkuYXR0cignaHJlZicpO1xuXHRcdFx0XHR2YXIgb3B0cyA9ICdzdGF0dXM9MSx3aWR0aD0nICsgd2lkdGggKyAnLGhlaWdodD0nICsgaGVpZ2h0ICsgJyx0b3A9JyArIHRvcCArICcsbGVmdD0nICsgbGVmdDtcblx0XG5cdFx0XHRcdHdpbmRvdy5vcGVuKHVybCwgJ1NoYXJlJywgb3B0cyk7XG5cdFx0XHR9XG5cdFx0fV0pO1xuXHRcblx0XHRyZXR1cm4gRW50cnlWaWV3O1xuXHR9KF9iYWNrYm9uZTIuZGVmYXVsdC5WaWV3KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEVudHJ5VmlldztcblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfYmFja2JvbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9iYWNrYm9uZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYWNrYm9uZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgTG9hZGVyVmlldyA9IGZ1bmN0aW9uIChfQmFja2JvbmUkVmlldykge1xuXHRcdF9pbmhlcml0cyhMb2FkZXJWaWV3LCBfQmFja2JvbmUkVmlldyk7XG5cdFxuXHRcdGZ1bmN0aW9uIExvYWRlclZpZXcoKSB7XG5cdFx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9hZGVyVmlldyk7XG5cdFxuXHRcdFx0cmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMb2FkZXJWaWV3Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTG9hZGVyVmlldykpLmNhbGwodGhpcywge1xuXHRcdFx0XHRlbDogJy5sb2FkZXInXG5cdFx0XHR9KSk7XG5cdFx0fVxuXHRcblx0XHRfY3JlYXRlQ2xhc3MoTG9hZGVyVmlldywgW3tcblx0XHRcdGtleTogJ2luaXRpYWxpemUnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0XHRcdHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0XHRcdFx0dGhpcy5saXN0ZW5Ubyh0aGlzLCAnaGlkZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRfdGhpczIuJGVsLmhpZGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fV0pO1xuXHRcblx0XHRyZXR1cm4gTG9hZGVyVmlldztcblx0fShfYmFja2JvbmUyLmRlZmF1bHQuVmlldyk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBMb2FkZXJWaWV3O1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZ2V0RW50cnkgPSBleHBvcnRzLnJhbmRvbSA9IGV4cG9ydHMuYWxsID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF91bmlxdWVSYW5kb21BcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0dmFyIF91bmlxdWVSYW5kb21BcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bmlxdWVSYW5kb21BcnJheSk7XG5cdFxuXHR2YXIgX2VudHJpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfZW50cmllczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lbnRyaWVzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgYWxsID0gZXhwb3J0cy5hbGwgPSBfZW50cmllczIuZGVmYXVsdDtcblx0dmFyIHJhbmRvbSA9IGV4cG9ydHMucmFuZG9tID0gKDAsIF91bmlxdWVSYW5kb21BcnJheTIuZGVmYXVsdCkoX2VudHJpZXMyLmRlZmF1bHQpO1xuXHR2YXIgZ2V0RW50cnkgPSBleHBvcnRzLmdldEVudHJ5ID0gZnVuY3Rpb24gZ2V0RW50cnkoKSB7XG5cdCAgdmFyIGlkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1swXTtcblx0XG5cdCAgdmFyIGVudHJ5ID0gX2VudHJpZXMyLmRlZmF1bHRbaWQgLSAxXTtcblx0ICBpZiAoIWVudHJ5KSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSUQnKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBlbnRyeTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohIEhhbW1lci5KUyAtIHYyLjAuNyAtIDIwMTYtMDQtMjJcblx0ICogaHR0cDovL2hhbW1lcmpzLmdpdGh1Yi5pby9cblx0ICpcblx0ICogQ29weXJpZ2h0IChjKSAyMDE2IEpvcmlrIFRhbmdlbGRlcjtcblx0ICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlICovXG5cdChmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCBleHBvcnROYW1lLCB1bmRlZmluZWQpIHtcblx0ICAndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgVkVORE9SX1BSRUZJWEVTID0gWycnLCAnd2Via2l0JywgJ01veicsICdNUycsICdtcycsICdvJ107XG5cdHZhciBURVNUX0VMRU1FTlQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdHZhciBUWVBFX0ZVTkNUSU9OID0gJ2Z1bmN0aW9uJztcblx0XG5cdHZhciByb3VuZCA9IE1hdGgucm91bmQ7XG5cdHZhciBhYnMgPSBNYXRoLmFicztcblx0dmFyIG5vdyA9IERhdGUubm93O1xuXHRcblx0LyoqXG5cdCAqIHNldCBhIHRpbWVvdXQgd2l0aCBhIGdpdmVuIHNjb3BlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRUaW1lb3V0Q29udGV4dChmbiwgdGltZW91dCwgY29udGV4dCkge1xuXHQgICAgcmV0dXJuIHNldFRpbWVvdXQoYmluZEZuKGZuLCBjb250ZXh0KSwgdGltZW91dCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBpZiB0aGUgYXJndW1lbnQgaXMgYW4gYXJyYXksIHdlIHdhbnQgdG8gZXhlY3V0ZSB0aGUgZm4gb24gZWFjaCBlbnRyeVxuXHQgKiBpZiBpdCBhaW50IGFuIGFycmF5IHdlIGRvbid0IHdhbnQgdG8gZG8gYSB0aGluZy5cblx0ICogdGhpcyBpcyB1c2VkIGJ5IGFsbCB0aGUgbWV0aG9kcyB0aGF0IGFjY2VwdCBhIHNpbmdsZSBhbmQgYXJyYXkgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7KnxBcnJheX0gYXJnXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBmblxuXHQgKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHRdXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gaW52b2tlQXJyYXlBcmcoYXJnLCBmbiwgY29udGV4dCkge1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuXHQgICAgICAgIGVhY2goYXJnLCBjb250ZXh0W2ZuXSwgY29udGV4dCk7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiB3YWxrIG9iamVjdHMgYW5kIGFycmF5c1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG5cdCAqL1xuXHRmdW5jdGlvbiBlYWNoKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGlmICghb2JqKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChvYmouZm9yRWFjaCkge1xuXHQgICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTtcblx0ICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgaSA9IDA7XG5cdCAgICAgICAgd2hpbGUgKGkgPCBvYmoubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XG5cdCAgICAgICAgICAgIG9iai5oYXNPd25Qcm9wZXJ0eShpKSAmJiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiB3cmFwIGEgbWV0aG9kIHdpdGggYSBkZXByZWNhdGlvbiB3YXJuaW5nIGFuZCBzdGFjayB0cmFjZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2Rcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2Vcblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyB0aGUgc3VwcGxpZWQgbWV0aG9kLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVwcmVjYXRlKG1ldGhvZCwgbmFtZSwgbWVzc2FnZSkge1xuXHQgICAgdmFyIGRlcHJlY2F0aW9uTWVzc2FnZSA9ICdERVBSRUNBVEVEIE1FVEhPRDogJyArIG5hbWUgKyAnXFxuJyArIG1lc3NhZ2UgKyAnIEFUIFxcbic7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ2dldC1zdGFjay10cmFjZScpO1xuXHQgICAgICAgIHZhciBzdGFjayA9IGUgJiYgZS5zdGFjayA/IGUuc3RhY2sucmVwbGFjZSgvXlteXFwoXSs/W1xcbiRdL2dtLCAnJylcblx0ICAgICAgICAgICAgLnJlcGxhY2UoL15cXHMrYXRcXHMrL2dtLCAnJylcblx0ICAgICAgICAgICAgLnJlcGxhY2UoL15PYmplY3QuPGFub255bW91cz5cXHMqXFwoL2dtLCAne2Fub255bW91c30oKUAnKSA6ICdVbmtub3duIFN0YWNrIFRyYWNlJztcblx0XG5cdCAgICAgICAgdmFyIGxvZyA9IHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS53YXJuIHx8IHdpbmRvdy5jb25zb2xlLmxvZyk7XG5cdCAgICAgICAgaWYgKGxvZykge1xuXHQgICAgICAgICAgICBsb2cuY2FsbCh3aW5kb3cuY29uc29sZSwgZGVwcmVjYXRpb25NZXNzYWdlLCBzdGFjayk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBleHRlbmQgb2JqZWN0LlxuXHQgKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cblx0ICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuXHQgKiBAcGFyYW0gey4uLk9iamVjdH0gb2JqZWN0c190b19hc3NpZ25cblx0ICogQHJldHVybnMge09iamVjdH0gdGFyZ2V0XG5cdCAqL1xuXHR2YXIgYXNzaWduO1xuXHRpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcblx0ICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuXHQgICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXHQgICAgICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkobmV4dEtleSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gb3V0cHV0O1xuXHQgICAgfTtcblx0fSBlbHNlIHtcblx0ICAgIGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBleHRlbmQgb2JqZWN0LlxuXHQgKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cblx0ICogQHBhcmFtIHtPYmplY3R9IGRlc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IHNyY1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFttZXJnZT1mYWxzZV1cblx0ICogQHJldHVybnMge09iamVjdH0gZGVzdFxuXHQgKi9cblx0dmFyIGV4dGVuZCA9IGRlcHJlY2F0ZShmdW5jdGlvbiBleHRlbmQoZGVzdCwgc3JjLCBtZXJnZSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzcmMpO1xuXHQgICAgdmFyIGkgPSAwO1xuXHQgICAgd2hpbGUgKGkgPCBrZXlzLmxlbmd0aCkge1xuXHQgICAgICAgIGlmICghbWVyZ2UgfHwgKG1lcmdlICYmIGRlc3Rba2V5c1tpXV0gPT09IHVuZGVmaW5lZCkpIHtcblx0ICAgICAgICAgICAgZGVzdFtrZXlzW2ldXSA9IHNyY1trZXlzW2ldXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaSsrO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRlc3Q7XG5cdH0sICdleHRlbmQnLCAnVXNlIGBhc3NpZ25gLicpO1xuXHRcblx0LyoqXG5cdCAqIG1lcmdlIHRoZSB2YWx1ZXMgZnJvbSBzcmMgaW4gdGhlIGRlc3QuXG5cdCAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyB0aGF0IGV4aXN0IGluIGRlc3Qgd2lsbCBub3QgYmUgb3ZlcndyaXR0ZW4gYnkgc3JjXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcblx0ICogQHJldHVybnMge09iamVjdH0gZGVzdFxuXHQgKi9cblx0dmFyIG1lcmdlID0gZGVwcmVjYXRlKGZ1bmN0aW9uIG1lcmdlKGRlc3QsIHNyYykge1xuXHQgICAgcmV0dXJuIGV4dGVuZChkZXN0LCBzcmMsIHRydWUpO1xuXHR9LCAnbWVyZ2UnLCAnVXNlIGBhc3NpZ25gLicpO1xuXHRcblx0LyoqXG5cdCAqIHNpbXBsZSBjbGFzcyBpbmhlcml0YW5jZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaGlsZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBiYXNlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc11cblx0ICovXG5cdGZ1bmN0aW9uIGluaGVyaXQoY2hpbGQsIGJhc2UsIHByb3BlcnRpZXMpIHtcblx0ICAgIHZhciBiYXNlUCA9IGJhc2UucHJvdG90eXBlLFxuXHQgICAgICAgIGNoaWxkUDtcblx0XG5cdCAgICBjaGlsZFAgPSBjaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VQKTtcblx0ICAgIGNoaWxkUC5jb25zdHJ1Y3RvciA9IGNoaWxkO1xuXHQgICAgY2hpbGRQLl9zdXBlciA9IGJhc2VQO1xuXHRcblx0ICAgIGlmIChwcm9wZXJ0aWVzKSB7XG5cdCAgICAgICAgYXNzaWduKGNoaWxkUCwgcHJvcGVydGllcyk7XG5cdCAgICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBzaW1wbGUgZnVuY3Rpb24gYmluZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259XG5cdCAqL1xuXHRmdW5jdGlvbiBiaW5kRm4oZm4sIGNvbnRleHQpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBib3VuZEZuKCkge1xuXHQgICAgICAgIHJldHVybiBmbi5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGxldCBhIGJvb2xlYW4gdmFsdWUgYWxzbyBiZSBhIGZ1bmN0aW9uIHRoYXQgbXVzdCByZXR1cm4gYSBib29sZWFuXG5cdCAqIHRoaXMgZmlyc3QgaXRlbSBpbiBhcmdzIHdpbGwgYmUgdXNlZCBhcyB0aGUgY29udGV4dFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IHZhbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBbYXJnc11cblx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBib29sT3JGbih2YWwsIGFyZ3MpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsID09IFRZUEVfRlVOQ1RJT04pIHtcblx0ICAgICAgICByZXR1cm4gdmFsLmFwcGx5KGFyZ3MgPyBhcmdzWzBdIHx8IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogdXNlIHRoZSB2YWwyIHdoZW4gdmFsMSBpcyB1bmRlZmluZWRcblx0ICogQHBhcmFtIHsqfSB2YWwxXG5cdCAqIEBwYXJhbSB7Kn0gdmFsMlxuXHQgKiBAcmV0dXJucyB7Kn1cblx0ICovXG5cdGZ1bmN0aW9uIGlmVW5kZWZpbmVkKHZhbDEsIHZhbDIpIHtcblx0ICAgIHJldHVybiAodmFsMSA9PT0gdW5kZWZpbmVkKSA/IHZhbDIgOiB2YWwxO1xuXHR9XG5cdFxuXHQvKipcblx0ICogYWRkRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG5cdCAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuXHQgICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcblx0ICAgICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHJlbW92ZUV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuXHQgKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSB0YXJnZXRcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVzXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICovXG5cdGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRhcmdldCwgdHlwZXMsIGhhbmRsZXIpIHtcblx0ICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG5cdCAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBmaW5kIGlmIGEgbm9kZSBpcyBpbiB0aGUgZ2l2ZW4gcGFyZW50XG5cdCAqIEBtZXRob2QgaGFzUGFyZW50XG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50XG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59IGZvdW5kXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNQYXJlbnQobm9kZSwgcGFyZW50KSB7XG5cdCAgICB3aGlsZSAobm9kZSkge1xuXHQgICAgICAgIGlmIChub2RlID09IHBhcmVudCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHNtYWxsIGluZGV4T2Ygd3JhcHBlclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufSBmb3VuZFxuXHQgKi9cblx0ZnVuY3Rpb24gaW5TdHIoc3RyLCBmaW5kKSB7XG5cdCAgICByZXR1cm4gc3RyLmluZGV4T2YoZmluZCkgPiAtMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHNwbGl0IHN0cmluZyBvbiB3aGl0ZXNwYWNlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybnMge0FycmF5fSB3b3Jkc1xuXHQgKi9cblx0ZnVuY3Rpb24gc3BsaXRTdHIoc3RyKSB7XG5cdCAgICByZXR1cm4gc3RyLnRyaW0oKS5zcGxpdCgvXFxzKy9nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGZpbmQgaWYgYSBhcnJheSBjb250YWlucyB0aGUgb2JqZWN0IHVzaW5nIGluZGV4T2Ygb3IgYSBzaW1wbGUgcG9seUZpbGxcblx0ICogQHBhcmFtIHtBcnJheX0gc3JjXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbZmluZEJ5S2V5XVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufE51bWJlcn0gZmFsc2Ugd2hlbiBub3QgZm91bmQsIG9yIHRoZSBpbmRleFxuXHQgKi9cblx0ZnVuY3Rpb24gaW5BcnJheShzcmMsIGZpbmQsIGZpbmRCeUtleSkge1xuXHQgICAgaWYgKHNyYy5pbmRleE9mICYmICFmaW5kQnlLZXkpIHtcblx0ICAgICAgICByZXR1cm4gc3JjLmluZGV4T2YoZmluZCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhciBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgaWYgKChmaW5kQnlLZXkgJiYgc3JjW2ldW2ZpbmRCeUtleV0gPT0gZmluZCkgfHwgKCFmaW5kQnlLZXkgJiYgc3JjW2ldID09PSBmaW5kKSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gLTE7XG5cdCAgICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBjb252ZXJ0IGFycmF5LWxpa2Ugb2JqZWN0cyB0byByZWFsIGFycmF5c1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEByZXR1cm5zIHtBcnJheX1cblx0ICovXG5cdGZ1bmN0aW9uIHRvQXJyYXkob2JqKSB7XG5cdCAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwob2JqLCAwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHVuaXF1ZSBhcnJheSB3aXRoIG9iamVjdHMgYmFzZWQgb24gYSBrZXkgKGxpa2UgJ2lkJykgb3IganVzdCBieSB0aGUgYXJyYXkncyB2YWx1ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBzcmMgW3tpZDoxfSx7aWQ6Mn0se2lkOjF9XVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cblx0ICogQHBhcmFtIHtCb29sZWFufSBbc29ydD1GYWxzZV1cblx0ICogQHJldHVybnMge0FycmF5fSBbe2lkOjF9LHtpZDoyfV1cblx0ICovXG5cdGZ1bmN0aW9uIHVuaXF1ZUFycmF5KHNyYywga2V5LCBzb3J0KSB7XG5cdCAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXHQgICAgdmFyIHZhbHVlcyA9IFtdO1xuXHQgICAgdmFyIGkgPSAwO1xuXHRcblx0ICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuXHQgICAgICAgIHZhciB2YWwgPSBrZXkgPyBzcmNbaV1ba2V5XSA6IHNyY1tpXTtcblx0ICAgICAgICBpZiAoaW5BcnJheSh2YWx1ZXMsIHZhbCkgPCAwKSB7XG5cdCAgICAgICAgICAgIHJlc3VsdHMucHVzaChzcmNbaV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YWx1ZXNbaV0gPSB2YWw7XG5cdCAgICAgICAgaSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzb3J0KSB7XG5cdCAgICAgICAgaWYgKCFrZXkpIHtcblx0ICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydCgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNvcnQoZnVuY3Rpb24gc29ydFVuaXF1ZUFycmF5KGEsIGIpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBhW2tleV0gPiBiW2tleV07XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmVzdWx0cztcblx0fVxuXHRcblx0LyoqXG5cdCAqIGdldCB0aGUgcHJlZml4ZWQgcHJvcGVydHlcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlcblx0ICogQHJldHVybnMge1N0cmluZ3xVbmRlZmluZWR9IHByZWZpeGVkXG5cdCAqL1xuXHRmdW5jdGlvbiBwcmVmaXhlZChvYmosIHByb3BlcnR5KSB7XG5cdCAgICB2YXIgcHJlZml4LCBwcm9wO1xuXHQgICAgdmFyIGNhbWVsUHJvcCA9IHByb3BlcnR5WzBdLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zbGljZSgxKTtcblx0XG5cdCAgICB2YXIgaSA9IDA7XG5cdCAgICB3aGlsZSAoaSA8IFZFTkRPUl9QUkVGSVhFUy5sZW5ndGgpIHtcblx0ICAgICAgICBwcmVmaXggPSBWRU5ET1JfUFJFRklYRVNbaV07XG5cdCAgICAgICAgcHJvcCA9IChwcmVmaXgpID8gcHJlZml4ICsgY2FtZWxQcm9wIDogcHJvcGVydHk7XG5cdFxuXHQgICAgICAgIGlmIChwcm9wIGluIG9iaikge1xuXHQgICAgICAgICAgICByZXR1cm4gcHJvcDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaSsrO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGdldCBhIHVuaXF1ZSBpZFxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSB1bmlxdWVJZFxuXHQgKi9cblx0dmFyIF91bmlxdWVJZCA9IDE7XG5cdGZ1bmN0aW9uIHVuaXF1ZUlkKCkge1xuXHQgICAgcmV0dXJuIF91bmlxdWVJZCsrO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IHRoZSB3aW5kb3cgb2JqZWN0IG9mIGFuIGVsZW1lbnRcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuXHQgKiBAcmV0dXJucyB7RG9jdW1lbnRWaWV3fFdpbmRvd31cblx0ICovXG5cdGZ1bmN0aW9uIGdldFdpbmRvd0ZvckVsZW1lbnQoZWxlbWVudCkge1xuXHQgICAgdmFyIGRvYyA9IGVsZW1lbnQub3duZXJEb2N1bWVudCB8fCBlbGVtZW50O1xuXHQgICAgcmV0dXJuIChkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cpO1xuXHR9XG5cdFxuXHR2YXIgTU9CSUxFX1JFR0VYID0gL21vYmlsZXx0YWJsZXR8aXAoYWR8aG9uZXxvZCl8YW5kcm9pZC9pO1xuXHRcblx0dmFyIFNVUFBPUlRfVE9VQ0ggPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KTtcblx0dmFyIFNVUFBPUlRfUE9JTlRFUl9FVkVOVFMgPSBwcmVmaXhlZCh3aW5kb3csICdQb2ludGVyRXZlbnQnKSAhPT0gdW5kZWZpbmVkO1xuXHR2YXIgU1VQUE9SVF9PTkxZX1RPVUNIID0gU1VQUE9SVF9UT1VDSCAmJiBNT0JJTEVfUkVHRVgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblx0XG5cdHZhciBJTlBVVF9UWVBFX1RPVUNIID0gJ3RvdWNoJztcblx0dmFyIElOUFVUX1RZUEVfUEVOID0gJ3Blbic7XG5cdHZhciBJTlBVVF9UWVBFX01PVVNFID0gJ21vdXNlJztcblx0dmFyIElOUFVUX1RZUEVfS0lORUNUID0gJ2tpbmVjdCc7XG5cdFxuXHR2YXIgQ09NUFVURV9JTlRFUlZBTCA9IDI1O1xuXHRcblx0dmFyIElOUFVUX1NUQVJUID0gMTtcblx0dmFyIElOUFVUX01PVkUgPSAyO1xuXHR2YXIgSU5QVVRfRU5EID0gNDtcblx0dmFyIElOUFVUX0NBTkNFTCA9IDg7XG5cdFxuXHR2YXIgRElSRUNUSU9OX05PTkUgPSAxO1xuXHR2YXIgRElSRUNUSU9OX0xFRlQgPSAyO1xuXHR2YXIgRElSRUNUSU9OX1JJR0hUID0gNDtcblx0dmFyIERJUkVDVElPTl9VUCA9IDg7XG5cdHZhciBESVJFQ1RJT05fRE9XTiA9IDE2O1xuXHRcblx0dmFyIERJUkVDVElPTl9IT1JJWk9OVEFMID0gRElSRUNUSU9OX0xFRlQgfCBESVJFQ1RJT05fUklHSFQ7XG5cdHZhciBESVJFQ1RJT05fVkVSVElDQUwgPSBESVJFQ1RJT05fVVAgfCBESVJFQ1RJT05fRE9XTjtcblx0dmFyIERJUkVDVElPTl9BTEwgPSBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTDtcblx0XG5cdHZhciBQUk9QU19YWSA9IFsneCcsICd5J107XG5cdHZhciBQUk9QU19DTElFTlRfWFkgPSBbJ2NsaWVudFgnLCAnY2xpZW50WSddO1xuXHRcblx0LyoqXG5cdCAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuXHQgKiBAcmV0dXJucyB7SW5wdXR9XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gSW5wdXQobWFuYWdlciwgY2FsbGJhY2spIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG5cdCAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdCAgICB0aGlzLmVsZW1lbnQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG5cdCAgICB0aGlzLnRhcmdldCA9IG1hbmFnZXIub3B0aW9ucy5pbnB1dFRhcmdldDtcblx0XG5cdCAgICAvLyBzbWFsbGVyIHdyYXBwZXIgYXJvdW5kIHRoZSBoYW5kbGVyLCBmb3IgdGhlIHNjb3BlIGFuZCB0aGUgZW5hYmxlZCBzdGF0ZSBvZiB0aGUgbWFuYWdlcixcblx0ICAgIC8vIHNvIHdoZW4gZGlzYWJsZWQgdGhlIGlucHV0IGV2ZW50cyBhcmUgY29tcGxldGVseSBieXBhc3NlZC5cblx0ICAgIHRoaXMuZG9tSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG5cdCAgICAgICAgaWYgKGJvb2xPckZuKG1hbmFnZXIub3B0aW9ucy5lbmFibGUsIFttYW5hZ2VyXSkpIHtcblx0ICAgICAgICAgICAgc2VsZi5oYW5kbGVyKGV2KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuaW5pdCgpO1xuXHRcblx0fVxuXHRcblx0SW5wdXQucHJvdG90eXBlID0ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBzaG91bGQgaGFuZGxlIHRoZSBpbnB1dEV2ZW50IGRhdGEgYW5kIHRyaWdnZXIgdGhlIGNhbGxiYWNrXG5cdCAgICAgKiBAdmlydHVhbFxuXHQgICAgICovXG5cdCAgICBoYW5kbGVyOiBmdW5jdGlvbigpIHsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGJpbmQgdGhlIGV2ZW50c1xuXHQgICAgICovXG5cdCAgICBpbml0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB0aGlzLmV2RWwgJiYgYWRkRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG5cdCAgICAgICAgdGhpcy5ldlRhcmdldCAmJiBhZGRFdmVudExpc3RlbmVycyh0aGlzLnRhcmdldCwgdGhpcy5ldlRhcmdldCwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgICAgICB0aGlzLmV2V2luICYmIGFkZEV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiB1bmJpbmQgdGhlIGV2ZW50c1xuXHQgICAgICovXG5cdCAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB0aGlzLmV2RWwgJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG5cdCAgICAgICAgdGhpcy5ldlRhcmdldCAmJiByZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLnRhcmdldCwgdGhpcy5ldlRhcmdldCwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgICAgICB0aGlzLmV2V2luICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBjcmVhdGUgbmV3IGlucHV0IHR5cGUgbWFuYWdlclxuXHQgKiBjYWxsZWQgYnkgdGhlIE1hbmFnZXIgY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcblx0ICogQHJldHVybnMge0lucHV0fVxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlSW5wdXRJbnN0YW5jZShtYW5hZ2VyKSB7XG5cdCAgICB2YXIgVHlwZTtcblx0ICAgIHZhciBpbnB1dENsYXNzID0gbWFuYWdlci5vcHRpb25zLmlucHV0Q2xhc3M7XG5cdFxuXHQgICAgaWYgKGlucHV0Q2xhc3MpIHtcblx0ICAgICAgICBUeXBlID0gaW5wdXRDbGFzcztcblx0ICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9QT0lOVEVSX0VWRU5UUykge1xuXHQgICAgICAgIFR5cGUgPSBQb2ludGVyRXZlbnRJbnB1dDtcblx0ICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9PTkxZX1RPVUNIKSB7XG5cdCAgICAgICAgVHlwZSA9IFRvdWNoSW5wdXQ7XG5cdCAgICB9IGVsc2UgaWYgKCFTVVBQT1JUX1RPVUNIKSB7XG5cdCAgICAgICAgVHlwZSA9IE1vdXNlSW5wdXQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIFR5cGUgPSBUb3VjaE1vdXNlSW5wdXQ7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmV3IChUeXBlKShtYW5hZ2VyLCBpbnB1dEhhbmRsZXIpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogaGFuZGxlIGlucHV0IGV2ZW50c1xuXHQgKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50VHlwZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIGlucHV0SGFuZGxlcihtYW5hZ2VyLCBldmVudFR5cGUsIGlucHV0KSB7XG5cdCAgICB2YXIgcG9pbnRlcnNMZW4gPSBpbnB1dC5wb2ludGVycy5sZW5ndGg7XG5cdCAgICB2YXIgY2hhbmdlZFBvaW50ZXJzTGVuID0gaW5wdXQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aDtcblx0ICAgIHZhciBpc0ZpcnN0ID0gKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIChwb2ludGVyc0xlbiAtIGNoYW5nZWRQb2ludGVyc0xlbiA9PT0gMCkpO1xuXHQgICAgdmFyIGlzRmluYWwgPSAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgKHBvaW50ZXJzTGVuIC0gY2hhbmdlZFBvaW50ZXJzTGVuID09PSAwKSk7XG5cdFxuXHQgICAgaW5wdXQuaXNGaXJzdCA9ICEhaXNGaXJzdDtcblx0ICAgIGlucHV0LmlzRmluYWwgPSAhIWlzRmluYWw7XG5cdFxuXHQgICAgaWYgKGlzRmlyc3QpIHtcblx0ICAgICAgICBtYW5hZ2VyLnNlc3Npb24gPSB7fTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBzb3VyY2UgZXZlbnQgaXMgdGhlIG5vcm1hbGl6ZWQgdmFsdWUgb2YgdGhlIGRvbUV2ZW50c1xuXHQgICAgLy8gbGlrZSAndG91Y2hzdGFydCwgbW91c2V1cCwgcG9pbnRlcmRvd24nXG5cdCAgICBpbnB1dC5ldmVudFR5cGUgPSBldmVudFR5cGU7XG5cdFxuXHQgICAgLy8gY29tcHV0ZSBzY2FsZSwgcm90YXRpb24gZXRjXG5cdCAgICBjb21wdXRlSW5wdXREYXRhKG1hbmFnZXIsIGlucHV0KTtcblx0XG5cdCAgICAvLyBlbWl0IHNlY3JldCBldmVudFxuXHQgICAgbWFuYWdlci5lbWl0KCdoYW1tZXIuaW5wdXQnLCBpbnB1dCk7XG5cdFxuXHQgICAgbWFuYWdlci5yZWNvZ25pemUoaW5wdXQpO1xuXHQgICAgbWFuYWdlci5zZXNzaW9uLnByZXZJbnB1dCA9IGlucHV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogZXh0ZW5kIHRoZSBkYXRhIHdpdGggc29tZSB1c2FibGUgcHJvcGVydGllcyBsaWtlIHNjYWxlLCByb3RhdGUsIHZlbG9jaXR5IGV0Y1xuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFuYWdlclxuXHQgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpIHtcblx0ICAgIHZhciBzZXNzaW9uID0gbWFuYWdlci5zZXNzaW9uO1xuXHQgICAgdmFyIHBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnM7XG5cdCAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cdFxuXHQgICAgLy8gc3RvcmUgdGhlIGZpcnN0IGlucHV0IHRvIGNhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgYW5kIGRpcmVjdGlvblxuXHQgICAgaWYgKCFzZXNzaW9uLmZpcnN0SW5wdXQpIHtcblx0ICAgICAgICBzZXNzaW9uLmZpcnN0SW5wdXQgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdG8gY29tcHV0ZSBzY2FsZSBhbmQgcm90YXRpb24gd2UgbmVlZCB0byBzdG9yZSB0aGUgbXVsdGlwbGUgdG91Y2hlc1xuXHQgICAgaWYgKHBvaW50ZXJzTGVuZ3RoID4gMSAmJiAhc2Vzc2lvbi5maXJzdE11bHRpcGxlKSB7XG5cdCAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuXHQgICAgfSBlbHNlIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIHNlc3Npb24uZmlyc3RNdWx0aXBsZSA9IGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaXJzdElucHV0ID0gc2Vzc2lvbi5maXJzdElucHV0O1xuXHQgICAgdmFyIGZpcnN0TXVsdGlwbGUgPSBzZXNzaW9uLmZpcnN0TXVsdGlwbGU7XG5cdCAgICB2YXIgb2Zmc2V0Q2VudGVyID0gZmlyc3RNdWx0aXBsZSA/IGZpcnN0TXVsdGlwbGUuY2VudGVyIDogZmlyc3RJbnB1dC5jZW50ZXI7XG5cdFxuXHQgICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlciA9IGdldENlbnRlcihwb2ludGVycyk7XG5cdCAgICBpbnB1dC50aW1lU3RhbXAgPSBub3coKTtcblx0ICAgIGlucHV0LmRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGZpcnN0SW5wdXQudGltZVN0YW1wO1xuXHRcblx0ICAgIGlucHV0LmFuZ2xlID0gZ2V0QW5nbGUob2Zmc2V0Q2VudGVyLCBjZW50ZXIpO1xuXHQgICAgaW5wdXQuZGlzdGFuY2UgPSBnZXREaXN0YW5jZShvZmZzZXRDZW50ZXIsIGNlbnRlcik7XG5cdFxuXHQgICAgY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpO1xuXHQgICAgaW5wdXQub2Zmc2V0RGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGlucHV0LmRlbHRhWCwgaW5wdXQuZGVsdGFZKTtcblx0XG5cdCAgICB2YXIgb3ZlcmFsbFZlbG9jaXR5ID0gZ2V0VmVsb2NpdHkoaW5wdXQuZGVsdGFUaW1lLCBpbnB1dC5kZWx0YVgsIGlucHV0LmRlbHRhWSk7XG5cdCAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYID0gb3ZlcmFsbFZlbG9jaXR5Lng7XG5cdCAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZID0gb3ZlcmFsbFZlbG9jaXR5Lnk7XG5cdCAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHkgPSAoYWJzKG92ZXJhbGxWZWxvY2l0eS54KSA+IGFicyhvdmVyYWxsVmVsb2NpdHkueSkpID8gb3ZlcmFsbFZlbG9jaXR5LnggOiBvdmVyYWxsVmVsb2NpdHkueTtcblx0XG5cdCAgICBpbnB1dC5zY2FsZSA9IGZpcnN0TXVsdGlwbGUgPyBnZXRTY2FsZShmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAxO1xuXHQgICAgaW5wdXQucm90YXRpb24gPSBmaXJzdE11bHRpcGxlID8gZ2V0Um90YXRpb24oZmlyc3RNdWx0aXBsZS5wb2ludGVycywgcG9pbnRlcnMpIDogMDtcblx0XG5cdCAgICBpbnB1dC5tYXhQb2ludGVycyA9ICFzZXNzaW9uLnByZXZJbnB1dCA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6ICgoaW5wdXQucG9pbnRlcnMubGVuZ3RoID5cblx0ICAgICAgICBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycykgPyBpbnB1dC5wb2ludGVycy5sZW5ndGggOiBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycyk7XG5cdFxuXHQgICAgY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KTtcblx0XG5cdCAgICAvLyBmaW5kIHRoZSBjb3JyZWN0IHRhcmdldFxuXHQgICAgdmFyIHRhcmdldCA9IG1hbmFnZXIuZWxlbWVudDtcblx0ICAgIGlmIChoYXNQYXJlbnQoaW5wdXQuc3JjRXZlbnQudGFyZ2V0LCB0YXJnZXQpKSB7XG5cdCAgICAgICAgdGFyZ2V0ID0gaW5wdXQuc3JjRXZlbnQudGFyZ2V0O1xuXHQgICAgfVxuXHQgICAgaW5wdXQudGFyZ2V0ID0gdGFyZ2V0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCkge1xuXHQgICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlcjtcblx0ICAgIHZhciBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhIHx8IHt9O1xuXHQgICAgdmFyIHByZXZEZWx0YSA9IHNlc3Npb24ucHJldkRlbHRhIHx8IHt9O1xuXHQgICAgdmFyIHByZXZJbnB1dCA9IHNlc3Npb24ucHJldklucHV0IHx8IHt9O1xuXHRcblx0ICAgIGlmIChpbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX1NUQVJUIHx8IHByZXZJbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX0VORCkge1xuXHQgICAgICAgIHByZXZEZWx0YSA9IHNlc3Npb24ucHJldkRlbHRhID0ge1xuXHQgICAgICAgICAgICB4OiBwcmV2SW5wdXQuZGVsdGFYIHx8IDAsXG5cdCAgICAgICAgICAgIHk6IHByZXZJbnB1dC5kZWx0YVkgfHwgMFxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgPSB7XG5cdCAgICAgICAgICAgIHg6IGNlbnRlci54LFxuXHQgICAgICAgICAgICB5OiBjZW50ZXIueVxuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgaW5wdXQuZGVsdGFYID0gcHJldkRlbHRhLnggKyAoY2VudGVyLnggLSBvZmZzZXQueCk7XG5cdCAgICBpbnB1dC5kZWx0YVkgPSBwcmV2RGVsdGEueSArIChjZW50ZXIueSAtIG9mZnNldC55KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHZlbG9jaXR5IGlzIGNhbGN1bGF0ZWQgZXZlcnkgeCBtc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvblxuXHQgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIGNvbXB1dGVJbnRlcnZhbElucHV0RGF0YShzZXNzaW9uLCBpbnB1dCkge1xuXHQgICAgdmFyIGxhc3QgPSBzZXNzaW9uLmxhc3RJbnRlcnZhbCB8fCBpbnB1dCxcblx0ICAgICAgICBkZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBsYXN0LnRpbWVTdGFtcCxcblx0ICAgICAgICB2ZWxvY2l0eSwgdmVsb2NpdHlYLCB2ZWxvY2l0eVksIGRpcmVjdGlvbjtcblx0XG5cdCAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0NBTkNFTCAmJiAoZGVsdGFUaW1lID4gQ09NUFVURV9JTlRFUlZBTCB8fCBsYXN0LnZlbG9jaXR5ID09PSB1bmRlZmluZWQpKSB7XG5cdCAgICAgICAgdmFyIGRlbHRhWCA9IGlucHV0LmRlbHRhWCAtIGxhc3QuZGVsdGFYO1xuXHQgICAgICAgIHZhciBkZWx0YVkgPSBpbnB1dC5kZWx0YVkgLSBsYXN0LmRlbHRhWTtcblx0XG5cdCAgICAgICAgdmFyIHYgPSBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIGRlbHRhWCwgZGVsdGFZKTtcblx0ICAgICAgICB2ZWxvY2l0eVggPSB2Lng7XG5cdCAgICAgICAgdmVsb2NpdHlZID0gdi55O1xuXHQgICAgICAgIHZlbG9jaXR5ID0gKGFicyh2LngpID4gYWJzKHYueSkpID8gdi54IDogdi55O1xuXHQgICAgICAgIGRpcmVjdGlvbiA9IGdldERpcmVjdGlvbihkZWx0YVgsIGRlbHRhWSk7XG5cdFxuXHQgICAgICAgIHNlc3Npb24ubGFzdEludGVydmFsID0gaW5wdXQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHVzZSBsYXRlc3QgdmVsb2NpdHkgaW5mbyBpZiBpdCBkb2Vzbid0IG92ZXJ0YWtlIGEgbWluaW11bSBwZXJpb2Rcblx0ICAgICAgICB2ZWxvY2l0eSA9IGxhc3QudmVsb2NpdHk7XG5cdCAgICAgICAgdmVsb2NpdHlYID0gbGFzdC52ZWxvY2l0eVg7XG5cdCAgICAgICAgdmVsb2NpdHlZID0gbGFzdC52ZWxvY2l0eVk7XG5cdCAgICAgICAgZGlyZWN0aW9uID0gbGFzdC5kaXJlY3Rpb247XG5cdCAgICB9XG5cdFxuXHQgICAgaW5wdXQudmVsb2NpdHkgPSB2ZWxvY2l0eTtcblx0ICAgIGlucHV0LnZlbG9jaXR5WCA9IHZlbG9jaXR5WDtcblx0ICAgIGlucHV0LnZlbG9jaXR5WSA9IHZlbG9jaXR5WTtcblx0ICAgIGlucHV0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGNyZWF0ZSBhIHNpbXBsZSBjbG9uZSBmcm9tIHRoZSBpbnB1dCB1c2VkIGZvciBzdG9yYWdlIG9mIGZpcnN0SW5wdXQgYW5kIGZpcnN0TXVsdGlwbGVcblx0ICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IGNsb25lZElucHV0RGF0YVxuXHQgKi9cblx0ZnVuY3Rpb24gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpIHtcblx0ICAgIC8vIG1ha2UgYSBzaW1wbGUgY29weSBvZiB0aGUgcG9pbnRlcnMgYmVjYXVzZSB3ZSB3aWxsIGdldCBhIHJlZmVyZW5jZSBpZiB3ZSBkb24ndFxuXHQgICAgLy8gd2Ugb25seSBuZWVkIGNsaWVudFhZIGZvciB0aGUgY2FsY3VsYXRpb25zXG5cdCAgICB2YXIgcG9pbnRlcnMgPSBbXTtcblx0ICAgIHZhciBpID0gMDtcblx0ICAgIHdoaWxlIChpIDwgaW5wdXQucG9pbnRlcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgcG9pbnRlcnNbaV0gPSB7XG5cdCAgICAgICAgICAgIGNsaWVudFg6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFgpLFxuXHQgICAgICAgICAgICBjbGllbnRZOiByb3VuZChpbnB1dC5wb2ludGVyc1tpXS5jbGllbnRZKVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgaSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgdGltZVN0YW1wOiBub3coKSxcblx0ICAgICAgICBwb2ludGVyczogcG9pbnRlcnMsXG5cdCAgICAgICAgY2VudGVyOiBnZXRDZW50ZXIocG9pbnRlcnMpLFxuXHQgICAgICAgIGRlbHRhWDogaW5wdXQuZGVsdGFYLFxuXHQgICAgICAgIGRlbHRhWTogaW5wdXQuZGVsdGFZXG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IHRoZSBjZW50ZXIgb2YgYWxsIHRoZSBwb2ludGVyc1xuXHQgKiBAcGFyYW0ge0FycmF5fSBwb2ludGVyc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9IGNlbnRlciBjb250YWlucyBgeGAgYW5kIGB5YCBwcm9wZXJ0aWVzXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRDZW50ZXIocG9pbnRlcnMpIHtcblx0ICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblx0XG5cdCAgICAvLyBubyBuZWVkIHRvIGxvb3Agd2hlbiBvbmx5IG9uZSB0b3VjaFxuXHQgICAgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgeDogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WCksXG5cdCAgICAgICAgICAgIHk6IHJvdW5kKHBvaW50ZXJzWzBdLmNsaWVudFkpXG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgeCA9IDAsIHkgPSAwLCBpID0gMDtcblx0ICAgIHdoaWxlIChpIDwgcG9pbnRlcnNMZW5ndGgpIHtcblx0ICAgICAgICB4ICs9IHBvaW50ZXJzW2ldLmNsaWVudFg7XG5cdCAgICAgICAgeSArPSBwb2ludGVyc1tpXS5jbGllbnRZO1xuXHQgICAgICAgIGkrKztcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIHg6IHJvdW5kKHggLyBwb2ludGVyc0xlbmd0aCksXG5cdCAgICAgICAgeTogcm91bmQoeSAvIHBvaW50ZXJzTGVuZ3RoKVxuXHQgICAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGNhbGN1bGF0ZSB0aGUgdmVsb2NpdHkgYmV0d2VlbiB0d28gcG9pbnRzLiB1bml0IGlzIGluIHB4IHBlciBtcy5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhVGltZVxuXHQgKiBAcGFyYW0ge051bWJlcn0geFxuXHQgKiBAcGFyYW0ge051bWJlcn0geVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IHZlbG9jaXR5IGB4YCBhbmQgYHlgXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIHgsIHkpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgeDogeCAvIGRlbHRhVGltZSB8fCAwLFxuXHQgICAgICAgIHk6IHkgLyBkZWx0YVRpbWUgfHwgMFxuXHQgICAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGdldCB0aGUgZGlyZWN0aW9uIGJldHdlZW4gdHdvIHBvaW50c1xuXHQgKiBAcGFyYW0ge051bWJlcn0geFxuXHQgKiBAcGFyYW0ge051bWJlcn0geVxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IGRpcmVjdGlvblxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0RGlyZWN0aW9uKHgsIHkpIHtcblx0ICAgIGlmICh4ID09PSB5KSB7XG5cdCAgICAgICAgcmV0dXJuIERJUkVDVElPTl9OT05FO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChhYnMoeCkgPj0gYWJzKHkpKSB7XG5cdCAgICAgICAgcmV0dXJuIHggPCAwID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG5cdCAgICB9XG5cdCAgICByZXR1cm4geSA8IDAgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGNhbGN1bGF0ZSB0aGUgYWJzb2x1dGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwMSB7eCwgeX1cblx0ICogQHBhcmFtIHtPYmplY3R9IHAyIHt4LCB5fVxuXHQgKiBAcGFyYW0ge0FycmF5fSBbcHJvcHNdIGNvbnRhaW5pbmcgeCBhbmQgeSBrZXlzXG5cdCAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2Vcblx0ICovXG5cdGZ1bmN0aW9uIGdldERpc3RhbmNlKHAxLCBwMiwgcHJvcHMpIHtcblx0ICAgIGlmICghcHJvcHMpIHtcblx0ICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuXHQgICAgfVxuXHQgICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG5cdCAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcblx0XG5cdCAgICByZXR1cm4gTWF0aC5zcXJ0KCh4ICogeCkgKyAoeSAqIHkpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGNhbGN1bGF0ZSB0aGUgYW5nbGUgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXNcblx0ICogQHBhcmFtIHtPYmplY3R9IHAxXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwMlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbcHJvcHNdIGNvbnRhaW5pbmcgeCBhbmQgeSBrZXlzXG5cdCAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcblx0ICovXG5cdGZ1bmN0aW9uIGdldEFuZ2xlKHAxLCBwMiwgcHJvcHMpIHtcblx0ICAgIGlmICghcHJvcHMpIHtcblx0ICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuXHQgICAgfVxuXHQgICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG5cdCAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcblx0ICAgIHJldHVybiBNYXRoLmF0YW4yKHksIHgpICogMTgwIC8gTWF0aC5QSTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGNhbGN1bGF0ZSB0aGUgcm90YXRpb24gZGVncmVlcyBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuXHQgKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuXHQgKiBAcGFyYW0ge0FycmF5fSBlbmQgYXJyYXkgb2YgcG9pbnRlcnNcblx0ICogQHJldHVybiB7TnVtYmVyfSByb3RhdGlvblxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0Um90YXRpb24oc3RhcnQsIGVuZCkge1xuXHQgICAgcmV0dXJuIGdldEFuZ2xlKGVuZFsxXSwgZW5kWzBdLCBQUk9QU19DTElFTlRfWFkpICsgZ2V0QW5nbGUoc3RhcnRbMV0sIHN0YXJ0WzBdLCBQUk9QU19DTElFTlRfWFkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSBzY2FsZSBmYWN0b3IgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcblx0ICogbm8gc2NhbGUgaXMgMSwgYW5kIGdvZXMgZG93biB0byAwIHdoZW4gcGluY2hlZCB0b2dldGhlciwgYW5kIGJpZ2dlciB3aGVuIHBpbmNoZWQgb3V0XG5cdCAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IHNjYWxlXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRTY2FsZShzdGFydCwgZW5kKSB7XG5cdCAgICByZXR1cm4gZ2V0RGlzdGFuY2UoZW5kWzBdLCBlbmRbMV0sIFBST1BTX0NMSUVOVF9YWSkgLyBnZXREaXN0YW5jZShzdGFydFswXSwgc3RhcnRbMV0sIFBST1BTX0NMSUVOVF9YWSk7XG5cdH1cblx0XG5cdHZhciBNT1VTRV9JTlBVVF9NQVAgPSB7XG5cdCAgICBtb3VzZWRvd246IElOUFVUX1NUQVJULFxuXHQgICAgbW91c2Vtb3ZlOiBJTlBVVF9NT1ZFLFxuXHQgICAgbW91c2V1cDogSU5QVVRfRU5EXG5cdH07XG5cdFxuXHR2YXIgTU9VU0VfRUxFTUVOVF9FVkVOVFMgPSAnbW91c2Vkb3duJztcblx0dmFyIE1PVVNFX1dJTkRPV19FVkVOVFMgPSAnbW91c2Vtb3ZlIG1vdXNldXAnO1xuXHRcblx0LyoqXG5cdCAqIE1vdXNlIGV2ZW50cyBpbnB1dFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgSW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIE1vdXNlSW5wdXQoKSB7XG5cdCAgICB0aGlzLmV2RWwgPSBNT1VTRV9FTEVNRU5UX0VWRU5UUztcblx0ICAgIHRoaXMuZXZXaW4gPSBNT1VTRV9XSU5ET1dfRVZFTlRTO1xuXHRcblx0ICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlOyAvLyBtb3VzZWRvd24gc3RhdGVcblx0XG5cdCAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cdFxuXHRpbmhlcml0KE1vdXNlSW5wdXQsIElucHV0LCB7XG5cdCAgICAvKipcblx0ICAgICAqIGhhbmRsZSBtb3VzZSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuXHQgICAgICovXG5cdCAgICBoYW5kbGVyOiBmdW5jdGlvbiBNRWhhbmRsZXIoZXYpIHtcblx0ICAgICAgICB2YXIgZXZlbnRUeXBlID0gTU9VU0VfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXHRcblx0ICAgICAgICAvLyBvbiBzdGFydCB3ZSB3YW50IHRvIGhhdmUgdGhlIGxlZnQgbW91c2UgYnV0dG9uIGRvd25cblx0ICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgZXYuYnV0dG9uID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMucHJlc3NlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfTU9WRSAmJiBldi53aGljaCAhPT0gMSkge1xuXHQgICAgICAgICAgICBldmVudFR5cGUgPSBJTlBVVF9FTkQ7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBtb3VzZSBtdXN0IGJlIGRvd25cblx0ICAgICAgICBpZiAoIXRoaXMucHJlc3NlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG5cdCAgICAgICAgICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGV2ZW50VHlwZSwge1xuXHQgICAgICAgICAgICBwb2ludGVyczogW2V2XSxcblx0ICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuXHQgICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9NT1VTRSxcblx0ICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0dmFyIFBPSU5URVJfSU5QVVRfTUFQID0ge1xuXHQgICAgcG9pbnRlcmRvd246IElOUFVUX1NUQVJULFxuXHQgICAgcG9pbnRlcm1vdmU6IElOUFVUX01PVkUsXG5cdCAgICBwb2ludGVydXA6IElOUFVUX0VORCxcblx0ICAgIHBvaW50ZXJjYW5jZWw6IElOUFVUX0NBTkNFTCxcblx0ICAgIHBvaW50ZXJvdXQ6IElOUFVUX0NBTkNFTFxuXHR9O1xuXHRcblx0Ly8gaW4gSUUxMCB0aGUgcG9pbnRlciB0eXBlcyBpcyBkZWZpbmVkIGFzIGFuIGVudW1cblx0dmFyIElFMTBfUE9JTlRFUl9UWVBFX0VOVU0gPSB7XG5cdCAgICAyOiBJTlBVVF9UWVBFX1RPVUNILFxuXHQgICAgMzogSU5QVVRfVFlQRV9QRU4sXG5cdCAgICA0OiBJTlBVVF9UWVBFX01PVVNFLFxuXHQgICAgNTogSU5QVVRfVFlQRV9LSU5FQ1QgLy8gc2VlIGh0dHBzOi8vdHdpdHRlci5jb20vamFjb2Jyb3NzaS9zdGF0dXMvNDgwNTk2NDM4NDg5ODkwODE2XG5cdH07XG5cdFxuXHR2YXIgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdwb2ludGVyZG93bic7XG5cdHZhciBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAncG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwnO1xuXHRcblx0Ly8gSUUxMCBoYXMgcHJlZml4ZWQgc3VwcG9ydCwgYW5kIGNhc2Utc2Vuc2l0aXZlXG5cdGlmICh3aW5kb3cuTVNQb2ludGVyRXZlbnQgJiYgIXdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcblx0ICAgIFBPSU5URVJfRUxFTUVOVF9FVkVOVFMgPSAnTVNQb2ludGVyRG93bic7XG5cdCAgICBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAnTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWwnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUG9pbnRlciBldmVudHMgaW5wdXRcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIElucHV0XG5cdCAqL1xuXHRmdW5jdGlvbiBQb2ludGVyRXZlbnRJbnB1dCgpIHtcblx0ICAgIHRoaXMuZXZFbCA9IFBPSU5URVJfRUxFTUVOVF9FVkVOVFM7XG5cdCAgICB0aGlzLmV2V2luID0gUE9JTlRFUl9XSU5ET1dfRVZFTlRTO1xuXHRcblx0ICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFxuXHQgICAgdGhpcy5zdG9yZSA9ICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzID0gW10pO1xuXHR9XG5cdFxuXHRpbmhlcml0KFBvaW50ZXJFdmVudElucHV0LCBJbnB1dCwge1xuXHQgICAgLyoqXG5cdCAgICAgKiBoYW5kbGUgbW91c2UgZXZlbnRzXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZcblx0ICAgICAqL1xuXHQgICAgaGFuZGxlcjogZnVuY3Rpb24gUEVoYW5kbGVyKGV2KSB7XG5cdCAgICAgICAgdmFyIHN0b3JlID0gdGhpcy5zdG9yZTtcblx0ICAgICAgICB2YXIgcmVtb3ZlUG9pbnRlciA9IGZhbHNlO1xuXHRcblx0ICAgICAgICB2YXIgZXZlbnRUeXBlTm9ybWFsaXplZCA9IGV2LnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdtcycsICcnKTtcblx0ICAgICAgICB2YXIgZXZlbnRUeXBlID0gUE9JTlRFUl9JTlBVVF9NQVBbZXZlbnRUeXBlTm9ybWFsaXplZF07XG5cdCAgICAgICAgdmFyIHBvaW50ZXJUeXBlID0gSUUxMF9QT0lOVEVSX1RZUEVfRU5VTVtldi5wb2ludGVyVHlwZV0gfHwgZXYucG9pbnRlclR5cGU7XG5cdFxuXHQgICAgICAgIHZhciBpc1RvdWNoID0gKHBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfVE9VQ0gpO1xuXHRcblx0ICAgICAgICAvLyBnZXQgaW5kZXggb2YgdGhlIGV2ZW50IGluIHRoZSBzdG9yZVxuXHQgICAgICAgIHZhciBzdG9yZUluZGV4ID0gaW5BcnJheShzdG9yZSwgZXYucG9pbnRlcklkLCAncG9pbnRlcklkJyk7XG5cdFxuXHQgICAgICAgIC8vIHN0YXJ0IGFuZCBtb3VzZSBtdXN0IGJlIGRvd25cblx0ICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKGV2LmJ1dHRvbiA9PT0gMCB8fCBpc1RvdWNoKSkge1xuXHQgICAgICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcblx0ICAgICAgICAgICAgICAgIHN0b3JlLnB1c2goZXYpO1xuXHQgICAgICAgICAgICAgICAgc3RvcmVJbmRleCA9IHN0b3JlLmxlbmd0aCAtIDE7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG5cdCAgICAgICAgICAgIHJlbW92ZVBvaW50ZXIgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gaXQgbm90IGZvdW5kLCBzbyB0aGUgcG9pbnRlciBoYXNuJ3QgYmVlbiBkb3duIChzbyBpdCdzIHByb2JhYmx5IGEgaG92ZXIpXG5cdCAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHVwZGF0ZSB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG5cdCAgICAgICAgc3RvcmVbc3RvcmVJbmRleF0gPSBldjtcblx0XG5cdCAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIGV2ZW50VHlwZSwge1xuXHQgICAgICAgICAgICBwb2ludGVyczogc3RvcmUsXG5cdCAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcblx0ICAgICAgICAgICAgcG9pbnRlclR5cGU6IHBvaW50ZXJUeXBlLFxuXHQgICAgICAgICAgICBzcmNFdmVudDogZXZcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgaWYgKHJlbW92ZVBvaW50ZXIpIHtcblx0ICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gdGhlIHN0b3JlXG5cdCAgICAgICAgICAgIHN0b3JlLnNwbGljZShzdG9yZUluZGV4LCAxKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0dmFyIFNJTkdMRV9UT1VDSF9JTlBVVF9NQVAgPSB7XG5cdCAgICB0b3VjaHN0YXJ0OiBJTlBVVF9TVEFSVCxcblx0ICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcblx0ICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG5cdCAgICB0b3VjaGNhbmNlbDogSU5QVVRfQ0FOQ0VMXG5cdH07XG5cdFxuXHR2YXIgU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFMgPSAndG91Y2hzdGFydCc7XG5cdHZhciBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cdFxuXHQvKipcblx0ICogVG91Y2ggZXZlbnRzIGlucHV0XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBJbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gU2luZ2xlVG91Y2hJbnB1dCgpIHtcblx0ICAgIHRoaXMuZXZUYXJnZXQgPSBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUztcblx0ICAgIHRoaXMuZXZXaW4gPSBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUztcblx0ICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXHRcblx0ICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoU2luZ2xlVG91Y2hJbnB1dCwgSW5wdXQsIHtcblx0ICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFRFaGFuZGxlcihldikge1xuXHQgICAgICAgIHZhciB0eXBlID0gU0lOR0xFX1RPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcblx0XG5cdCAgICAgICAgLy8gc2hvdWxkIHdlIGhhbmRsZSB0aGUgdG91Y2ggZXZlbnRzP1xuXHQgICAgICAgIGlmICh0eXBlID09PSBJTlBVVF9TVEFSVCkge1xuXHQgICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHRvdWNoZXMgPSBub3JtYWxpemVTaW5nbGVUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuXHRcblx0ICAgICAgICAvLyB3aGVuIGRvbmUsIHJlc2V0IHRoZSBzdGFydGVkIHN0YXRlXG5cdCAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiB0b3VjaGVzWzBdLmxlbmd0aCAtIHRvdWNoZXNbMV0ubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcblx0ICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG5cdCAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcblx0ICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG5cdCAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBAdGhpcyB7VG91Y2hJbnB1dH1cblx0ICogQHBhcmFtIHtPYmplY3R9IGV2XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcblx0ICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cblx0ICovXG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMoZXYsIHR5cGUpIHtcblx0ICAgIHZhciBhbGwgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuXHQgICAgdmFyIGNoYW5nZWQgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKTtcblx0XG5cdCAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG5cdCAgICAgICAgYWxsID0gdW5pcXVlQXJyYXkoYWxsLmNvbmNhdChjaGFuZ2VkKSwgJ2lkZW50aWZpZXInLCB0cnVlKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gW2FsbCwgY2hhbmdlZF07XG5cdH1cblx0XG5cdHZhciBUT1VDSF9JTlBVVF9NQVAgPSB7XG5cdCAgICB0b3VjaHN0YXJ0OiBJTlBVVF9TVEFSVCxcblx0ICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcblx0ICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG5cdCAgICB0b3VjaGNhbmNlbDogSU5QVVRfQ0FOQ0VMXG5cdH07XG5cdFxuXHR2YXIgVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cdFxuXHQvKipcblx0ICogTXVsdGktdXNlciB0b3VjaCBldmVudHMgaW5wdXRcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIElucHV0XG5cdCAqL1xuXHRmdW5jdGlvbiBUb3VjaElucHV0KCkge1xuXHQgICAgdGhpcy5ldlRhcmdldCA9IFRPVUNIX1RBUkdFVF9FVkVOVFM7XG5cdCAgICB0aGlzLnRhcmdldElkcyA9IHt9O1xuXHRcblx0ICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoVG91Y2hJbnB1dCwgSW5wdXQsIHtcblx0ICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1URWhhbmRsZXIoZXYpIHtcblx0ICAgICAgICB2YXIgdHlwZSA9IFRPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcblx0ICAgICAgICB2YXIgdG91Y2hlcyA9IGdldFRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG5cdCAgICAgICAgaWYgKCF0b3VjaGVzKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG5cdCAgICAgICAgICAgIHBvaW50ZXJzOiB0b3VjaGVzWzBdLFxuXHQgICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IHRvdWNoZXNbMV0sXG5cdCAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuXHQgICAgICAgICAgICBzcmNFdmVudDogZXZcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHQvKipcblx0ICogQHRoaXMge1RvdWNoSW5wdXR9XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBldlxuXHQgKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG5cdCAqIEByZXR1cm5zIHt1bmRlZmluZWR8QXJyYXl9IFthbGwsIGNoYW5nZWRdXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRUb3VjaGVzKGV2LCB0eXBlKSB7XG5cdCAgICB2YXIgYWxsVG91Y2hlcyA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG5cdCAgICB2YXIgdGFyZ2V0SWRzID0gdGhpcy50YXJnZXRJZHM7XG5cdFxuXHQgICAgLy8gd2hlbiB0aGVyZSBpcyBvbmx5IG9uZSB0b3VjaCwgdGhlIHByb2Nlc3MgY2FuIGJlIHNpbXBsaWZpZWRcblx0ICAgIGlmICh0eXBlICYgKElOUFVUX1NUQVJUIHwgSU5QVVRfTU9WRSkgJiYgYWxsVG91Y2hlcy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICB0YXJnZXRJZHNbYWxsVG91Y2hlc1swXS5pZGVudGlmaWVyXSA9IHRydWU7XG5cdCAgICAgICAgcmV0dXJuIFthbGxUb3VjaGVzLCBhbGxUb3VjaGVzXTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaSxcblx0ICAgICAgICB0YXJnZXRUb3VjaGVzLFxuXHQgICAgICAgIGNoYW5nZWRUb3VjaGVzID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyksXG5cdCAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMgPSBbXSxcblx0ICAgICAgICB0YXJnZXQgPSB0aGlzLnRhcmdldDtcblx0XG5cdCAgICAvLyBnZXQgdGFyZ2V0IHRvdWNoZXMgZnJvbSB0b3VjaGVzXG5cdCAgICB0YXJnZXRUb3VjaGVzID0gYWxsVG91Y2hlcy5maWx0ZXIoZnVuY3Rpb24odG91Y2gpIHtcblx0ICAgICAgICByZXR1cm4gaGFzUGFyZW50KHRvdWNoLnRhcmdldCwgdGFyZ2V0KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIGNvbGxlY3QgdG91Y2hlc1xuXHQgICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG5cdCAgICAgICAgaSA9IDA7XG5cdCAgICAgICAgd2hpbGUgKGkgPCB0YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICB0YXJnZXRJZHNbdGFyZ2V0VG91Y2hlc1tpXS5pZGVudGlmaWVyXSA9IHRydWU7XG5cdCAgICAgICAgICAgIGkrKztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gZmlsdGVyIGNoYW5nZWQgdG91Y2hlcyB0byBvbmx5IGNvbnRhaW4gdG91Y2hlcyB0aGF0IGV4aXN0IGluIHRoZSBjb2xsZWN0ZWQgdGFyZ2V0IGlkc1xuXHQgICAgaSA9IDA7XG5cdCAgICB3aGlsZSAoaSA8IGNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xuXHQgICAgICAgIGlmICh0YXJnZXRJZHNbY2hhbmdlZFRvdWNoZXNbaV0uaWRlbnRpZmllcl0pIHtcblx0ICAgICAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMucHVzaChjaGFuZ2VkVG91Y2hlc1tpXSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBjbGVhbnVwIHJlbW92ZWQgdG91Y2hlc1xuXHQgICAgICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcblx0ICAgICAgICAgICAgZGVsZXRlIHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghY2hhbmdlZFRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBbXG5cdCAgICAgICAgLy8gbWVyZ2UgdGFyZ2V0VG91Y2hlcyB3aXRoIGNoYW5nZWRUYXJnZXRUb3VjaGVzIHNvIGl0IGNvbnRhaW5zIEFMTCB0b3VjaGVzLCBpbmNsdWRpbmcgJ2VuZCcgYW5kICdjYW5jZWwnXG5cdCAgICAgICAgdW5pcXVlQXJyYXkodGFyZ2V0VG91Y2hlcy5jb25jYXQoY2hhbmdlZFRhcmdldFRvdWNoZXMpLCAnaWRlbnRpZmllcicsIHRydWUpLFxuXHQgICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzXG5cdCAgICBdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tYmluZWQgdG91Y2ggYW5kIG1vdXNlIGlucHV0XG5cdCAqXG5cdCAqIFRvdWNoIGhhcyBhIGhpZ2hlciBwcmlvcml0eSB0aGVuIG1vdXNlLCBhbmQgd2hpbGUgdG91Y2hpbmcgbm8gbW91c2UgZXZlbnRzIGFyZSBhbGxvd2VkLlxuXHQgKiBUaGlzIGJlY2F1c2UgdG91Y2ggZGV2aWNlcyBhbHNvIGVtaXQgbW91c2UgZXZlbnRzIHdoaWxlIGRvaW5nIGEgdG91Y2guXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBJbnB1dFxuXHQgKi9cblx0XG5cdHZhciBERURVUF9USU1FT1VUID0gMjUwMDtcblx0dmFyIERFRFVQX0RJU1RBTkNFID0gMjU7XG5cdFxuXHRmdW5jdGlvbiBUb3VjaE1vdXNlSW5wdXQoKSB7XG5cdCAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcblx0ICAgIHZhciBoYW5kbGVyID0gYmluZEZuKHRoaXMuaGFuZGxlciwgdGhpcyk7XG5cdCAgICB0aGlzLnRvdWNoID0gbmV3IFRvdWNoSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcblx0ICAgIHRoaXMubW91c2UgPSBuZXcgTW91c2VJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuXHRcblx0ICAgIHRoaXMucHJpbWFyeVRvdWNoID0gbnVsbDtcblx0ICAgIHRoaXMubGFzdFRvdWNoZXMgPSBbXTtcblx0fVxuXHRcblx0aW5oZXJpdChUb3VjaE1vdXNlSW5wdXQsIElucHV0LCB7XG5cdCAgICAvKipcblx0ICAgICAqIGhhbmRsZSBtb3VzZSBhbmQgdG91Y2ggZXZlbnRzXG5cdCAgICAgKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IGlucHV0RXZlbnRcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcblx0ICAgICAqL1xuXHQgICAgaGFuZGxlcjogZnVuY3Rpb24gVE1FaGFuZGxlcihtYW5hZ2VyLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpIHtcblx0ICAgICAgICB2YXIgaXNUb3VjaCA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCksXG5cdCAgICAgICAgICAgIGlzTW91c2UgPSAoaW5wdXREYXRhLnBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfTU9VU0UpO1xuXHRcblx0ICAgICAgICBpZiAoaXNNb3VzZSAmJiBpbnB1dERhdGEuc291cmNlQ2FwYWJpbGl0aWVzICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMuZmlyZXNUb3VjaEV2ZW50cykge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB3aGVuIHdlJ3JlIGluIGEgdG91Y2ggZXZlbnQsIHJlY29yZCB0b3VjaGVzIHRvICBkZS1kdXBlIHN5bnRoZXRpYyBtb3VzZSBldmVudFxuXHQgICAgICAgIGlmIChpc1RvdWNoKSB7XG5cdCAgICAgICAgICAgIHJlY29yZFRvdWNoZXMuY2FsbCh0aGlzLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNNb3VzZSAmJiBpc1N5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgaW5wdXREYXRhKSkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lcnNcblx0ICAgICAqL1xuXHQgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0ICAgICAgICB0aGlzLnRvdWNoLmRlc3Ryb3koKTtcblx0ICAgICAgICB0aGlzLm1vdXNlLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiByZWNvcmRUb3VjaGVzKGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG5cdCAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcblx0ICAgICAgICB0aGlzLnByaW1hcnlUb3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF0uaWRlbnRpZmllcjtcblx0ICAgICAgICBzZXRMYXN0VG91Y2guY2FsbCh0aGlzLCBldmVudERhdGEpO1xuXHQgICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuXHQgICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldExhc3RUb3VjaChldmVudERhdGEpIHtcblx0ICAgIHZhciB0b3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF07XG5cdFxuXHQgICAgaWYgKHRvdWNoLmlkZW50aWZpZXIgPT09IHRoaXMucHJpbWFyeVRvdWNoKSB7XG5cdCAgICAgICAgdmFyIGxhc3RUb3VjaCA9IHt4OiB0b3VjaC5jbGllbnRYLCB5OiB0b3VjaC5jbGllbnRZfTtcblx0ICAgICAgICB0aGlzLmxhc3RUb3VjaGVzLnB1c2gobGFzdFRvdWNoKTtcblx0ICAgICAgICB2YXIgbHRzID0gdGhpcy5sYXN0VG91Y2hlcztcblx0ICAgICAgICB2YXIgcmVtb3ZlTGFzdFRvdWNoID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHZhciBpID0gbHRzLmluZGV4T2YobGFzdFRvdWNoKTtcblx0ICAgICAgICAgICAgaWYgKGkgPiAtMSkge1xuXHQgICAgICAgICAgICAgICAgbHRzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgc2V0VGltZW91dChyZW1vdmVMYXN0VG91Y2gsIERFRFVQX1RJTUVPVVQpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KGV2ZW50RGF0YSkge1xuXHQgICAgdmFyIHggPSBldmVudERhdGEuc3JjRXZlbnQuY2xpZW50WCwgeSA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRZO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxhc3RUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHQgPSB0aGlzLmxhc3RUb3VjaGVzW2ldO1xuXHQgICAgICAgIHZhciBkeCA9IE1hdGguYWJzKHggLSB0LngpLCBkeSA9IE1hdGguYWJzKHkgLSB0LnkpO1xuXHQgICAgICAgIGlmIChkeCA8PSBERURVUF9ESVNUQU5DRSAmJiBkeSA8PSBERURVUF9ESVNUQU5DRSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdHZhciBQUkVGSVhFRF9UT1VDSF9BQ1RJT04gPSBwcmVmaXhlZChURVNUX0VMRU1FTlQuc3R5bGUsICd0b3VjaEFjdGlvbicpO1xuXHR2YXIgTkFUSVZFX1RPVUNIX0FDVElPTiA9IFBSRUZJWEVEX1RPVUNIX0FDVElPTiAhPT0gdW5kZWZpbmVkO1xuXHRcblx0Ly8gbWFnaWNhbCB0b3VjaEFjdGlvbiB2YWx1ZVxuXHR2YXIgVE9VQ0hfQUNUSU9OX0NPTVBVVEUgPSAnY29tcHV0ZSc7XG5cdHZhciBUT1VDSF9BQ1RJT05fQVVUTyA9ICdhdXRvJztcblx0dmFyIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04gPSAnbWFuaXB1bGF0aW9uJzsgLy8gbm90IGltcGxlbWVudGVkXG5cdHZhciBUT1VDSF9BQ1RJT05fTk9ORSA9ICdub25lJztcblx0dmFyIFRPVUNIX0FDVElPTl9QQU5fWCA9ICdwYW4teCc7XG5cdHZhciBUT1VDSF9BQ1RJT05fUEFOX1kgPSAncGFuLXknO1xuXHR2YXIgVE9VQ0hfQUNUSU9OX01BUCA9IGdldFRvdWNoQWN0aW9uUHJvcHMoKTtcblx0XG5cdC8qKlxuXHQgKiBUb3VjaCBBY3Rpb25cblx0ICogc2V0cyB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgb3IgdXNlcyB0aGUganMgYWx0ZXJuYXRpdmVcblx0ICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIFRvdWNoQWN0aW9uKG1hbmFnZXIsIHZhbHVlKSB7XG5cdCAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuXHQgICAgdGhpcy5zZXQodmFsdWUpO1xuXHR9XG5cdFxuXHRUb3VjaEFjdGlvbi5wcm90b3R5cGUgPSB7XG5cdCAgICAvKipcblx0ICAgICAqIHNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWUgb24gdGhlIGVsZW1lbnQgb3IgZW5hYmxlIHRoZSBwb2x5ZmlsbFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAgICAgKi9cblx0ICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAvLyBmaW5kIG91dCB0aGUgdG91Y2gtYWN0aW9uIGJ5IHRoZSBldmVudCBoYW5kbGVyc1xuXHQgICAgICAgIGlmICh2YWx1ZSA9PSBUT1VDSF9BQ1RJT05fQ09NUFVURSkge1xuXHQgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuY29tcHV0ZSgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKE5BVElWRV9UT1VDSF9BQ1RJT04gJiYgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGUgJiYgVE9VQ0hfQUNUSU9OX01BUFt2YWx1ZV0pIHtcblx0ICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGVbUFJFRklYRURfVE9VQ0hfQUNUSU9OXSA9IHZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmFjdGlvbnMgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBqdXN0IHJlLXNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWVcblx0ICAgICAqL1xuXHQgICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB0aGlzLnNldCh0aGlzLm1hbmFnZXIub3B0aW9ucy50b3VjaEFjdGlvbik7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogY29tcHV0ZSB0aGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgcmVjb2duaXplcidzIHNldHRpbmdzXG5cdCAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuXHQgICAgICovXG5cdCAgICBjb21wdXRlOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuXHQgICAgICAgIGVhY2godGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLCBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG5cdCAgICAgICAgICAgIGlmIChib29sT3JGbihyZWNvZ25pemVyLm9wdGlvbnMuZW5hYmxlLCBbcmVjb2duaXplcl0pKSB7XG5cdCAgICAgICAgICAgICAgICBhY3Rpb25zID0gYWN0aW9ucy5jb25jYXQocmVjb2duaXplci5nZXRUb3VjaEFjdGlvbigpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zLmpvaW4oJyAnKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogdGhpcyBtZXRob2QgaXMgY2FsbGVkIG9uIGVhY2ggaW5wdXQgY3ljbGUgYW5kIHByb3ZpZGVzIHRoZSBwcmV2ZW50aW5nIG9mIHRoZSBicm93c2VyIGJlaGF2aW9yXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICAgICAqL1xuXHQgICAgcHJldmVudERlZmF1bHRzOiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBzcmNFdmVudCA9IGlucHV0LnNyY0V2ZW50O1xuXHQgICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5vZmZzZXREaXJlY3Rpb247XG5cdFxuXHQgICAgICAgIC8vIGlmIHRoZSB0b3VjaCBhY3Rpb24gZGlkIHByZXZlbnRlZCBvbmNlIHRoaXMgc2Vzc2lvblxuXHQgICAgICAgIGlmICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQpIHtcblx0ICAgICAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGFjdGlvbnMgPSB0aGlzLmFjdGlvbnM7XG5cdCAgICAgICAgdmFyIGhhc05vbmUgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuXHQgICAgICAgIHZhciBoYXNQYW5ZID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9ZKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fUEFOX1ldO1xuXHQgICAgICAgIHZhciBoYXNQYW5YID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9YKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fUEFOX1hdO1xuXHRcblx0ICAgICAgICBpZiAoaGFzTm9uZSkge1xuXHQgICAgICAgICAgICAvL2RvIG5vdCBwcmV2ZW50IGRlZmF1bHRzIGlmIHRoaXMgaXMgYSB0YXAgZ2VzdHVyZVxuXHRcblx0ICAgICAgICAgICAgdmFyIGlzVGFwUG9pbnRlciA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gMTtcblx0ICAgICAgICAgICAgdmFyIGlzVGFwTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IDI7XG5cdCAgICAgICAgICAgIHZhciBpc1RhcFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IDI1MDtcblx0XG5cdCAgICAgICAgICAgIGlmIChpc1RhcFBvaW50ZXIgJiYgaXNUYXBNb3ZlbWVudCAmJiBpc1RhcFRvdWNoVGltZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoaGFzUGFuWCAmJiBoYXNQYW5ZKSB7XG5cdCAgICAgICAgICAgIC8vIGBwYW4teCBwYW4teWAgbWVhbnMgYnJvd3NlciBoYW5kbGVzIGFsbCBzY3JvbGxpbmcvcGFubmluZywgZG8gbm90IHByZXZlbnRcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGhhc05vbmUgfHxcblx0ICAgICAgICAgICAgKGhhc1BhblkgJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHx8XG5cdCAgICAgICAgICAgIChoYXNQYW5YICYmIGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudFNyYyhzcmNFdmVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGNhbGwgcHJldmVudERlZmF1bHQgdG8gcHJldmVudCB0aGUgYnJvd3NlcidzIGRlZmF1bHQgYmVoYXZpb3IgKHNjcm9sbGluZyBpbiBtb3N0IGNhc2VzKVxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IHNyY0V2ZW50XG5cdCAgICAgKi9cblx0ICAgIHByZXZlbnRTcmM6IGZ1bmN0aW9uKHNyY0V2ZW50KSB7XG5cdCAgICAgICAgdGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkID0gdHJ1ZTtcblx0ICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHdoZW4gdGhlIHRvdWNoQWN0aW9ucyBhcmUgY29sbGVjdGVkIHRoZXkgYXJlIG5vdCBhIHZhbGlkIHZhbHVlLCBzbyB3ZSBuZWVkIHRvIGNsZWFuIHRoaW5ncyB1cC4gKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uc1xuXHQgKiBAcmV0dXJucyB7Kn1cblx0ICovXG5cdGZ1bmN0aW9uIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMpIHtcblx0ICAgIC8vIG5vbmVcblx0ICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkpIHtcblx0ICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpO1xuXHQgICAgdmFyIGhhc1BhblkgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1kpO1xuXHRcblx0ICAgIC8vIGlmIGJvdGggcGFuLXggYW5kIHBhbi15IGFyZSBzZXQgKGRpZmZlcmVudCByZWNvZ25pemVyc1xuXHQgICAgLy8gZm9yIGRpZmZlcmVudCBkaXJlY3Rpb25zLCBlLmcuIGhvcml6b250YWwgcGFuIGJ1dCB2ZXJ0aWNhbCBzd2lwZT8pXG5cdCAgICAvLyB3ZSBuZWVkIG5vbmUgKGFzIG90aGVyd2lzZSB3aXRoIHBhbi14IHBhbi15IGNvbWJpbmVkIG5vbmUgb2YgdGhlc2Vcblx0ICAgIC8vIHJlY29nbml6ZXJzIHdpbGwgd29yaywgc2luY2UgdGhlIGJyb3dzZXIgd291bGQgaGFuZGxlIGFsbCBwYW5uaW5nXG5cdCAgICBpZiAoaGFzUGFuWCAmJiBoYXNQYW5ZKSB7XG5cdCAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHBhbi14IE9SIHBhbi15XG5cdCAgICBpZiAoaGFzUGFuWCB8fCBoYXNQYW5ZKSB7XG5cdCAgICAgICAgcmV0dXJuIGhhc1BhblggPyBUT1VDSF9BQ1RJT05fUEFOX1ggOiBUT1VDSF9BQ1RJT05fUEFOX1k7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbWFuaXB1bGF0aW9uXG5cdCAgICBpZiAoaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTikpIHtcblx0ICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTjtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX0FVVE87XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFRvdWNoQWN0aW9uUHJvcHMoKSB7XG5cdCAgICBpZiAoIU5BVElWRV9UT1VDSF9BQ1RJT04pIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgdG91Y2hNYXAgPSB7fTtcblx0ICAgIHZhciBjc3NTdXBwb3J0cyA9IHdpbmRvdy5DU1MgJiYgd2luZG93LkNTUy5zdXBwb3J0cztcblx0ICAgIFsnYXV0bycsICdtYW5pcHVsYXRpb24nLCAncGFuLXknLCAncGFuLXgnLCAncGFuLXggcGFuLXknLCAnbm9uZSddLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XG5cdFxuXHQgICAgICAgIC8vIElmIGNzcy5zdXBwb3J0cyBpcyBub3Qgc3VwcG9ydGVkIGJ1dCB0aGVyZSBpcyBuYXRpdmUgdG91Y2gtYWN0aW9uIGFzc3VtZSBpdCBzdXBwb3J0c1xuXHQgICAgICAgIC8vIGFsbCB2YWx1ZXMuIFRoaXMgaXMgdGhlIGNhc2UgZm9yIElFIDEwIGFuZCAxMS5cblx0ICAgICAgICB0b3VjaE1hcFt2YWxdID0gY3NzU3VwcG9ydHMgPyB3aW5kb3cuQ1NTLnN1cHBvcnRzKCd0b3VjaC1hY3Rpb24nLCB2YWwpIDogdHJ1ZTtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHRvdWNoTWFwO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVjb2duaXplciBmbG93IGV4cGxhaW5lZDsgKlxuXHQgKiBBbGwgcmVjb2duaXplcnMgaGF2ZSB0aGUgaW5pdGlhbCBzdGF0ZSBvZiBQT1NTSUJMRSB3aGVuIGEgaW5wdXQgc2Vzc2lvbiBzdGFydHMuXG5cdCAqIFRoZSBkZWZpbml0aW9uIG9mIGEgaW5wdXQgc2Vzc2lvbiBpcyBmcm9tIHRoZSBmaXJzdCBpbnB1dCB1bnRpbCB0aGUgbGFzdCBpbnB1dCwgd2l0aCBhbGwgaXQncyBtb3ZlbWVudCBpbiBpdC4gKlxuXHQgKiBFeGFtcGxlIHNlc3Npb24gZm9yIG1vdXNlLWlucHV0OiBtb3VzZWRvd24gLT4gbW91c2Vtb3ZlIC0+IG1vdXNldXBcblx0ICpcblx0ICogT24gZWFjaCByZWNvZ25pemluZyBjeWNsZSAoc2VlIE1hbmFnZXIucmVjb2duaXplKSB0aGUgLnJlY29nbml6ZSgpIG1ldGhvZCBpcyBleGVjdXRlZFxuXHQgKiB3aGljaCBkZXRlcm1pbmVzIHdpdGggc3RhdGUgaXQgc2hvdWxkIGJlLlxuXHQgKlxuXHQgKiBJZiB0aGUgcmVjb2duaXplciBoYXMgdGhlIHN0YXRlIEZBSUxFRCwgQ0FOQ0VMTEVEIG9yIFJFQ09HTklaRUQgKGVxdWFscyBFTkRFRCksIGl0IGlzIHJlc2V0IHRvXG5cdCAqIFBPU1NJQkxFIHRvIGdpdmUgaXQgYW5vdGhlciBjaGFuZ2Ugb24gdGhlIG5leHQgY3ljbGUuXG5cdCAqXG5cdCAqICAgICAgICAgICAgICAgUG9zc2libGVcblx0ICogICAgICAgICAgICAgICAgICB8XG5cdCAqICAgICAgICAgICAgKy0tLS0tKy0tLS0tLS0tLS0tLS0tLStcblx0ICogICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgfFxuXHQgKiAgICAgICstLS0tLSstLS0tLSsgICAgICAgICAgICAgICB8XG5cdCAqICAgICAgfCAgICAgICAgICAgfCAgICAgICAgICAgICAgIHxcblx0ICogICBGYWlsZWQgICAgICBDYW5jZWxsZWQgICAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0rLS0tLS0tK1xuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgfFxuXHQgKiAgICAgICAgICAgICAgICAgICAgICBSZWNvZ25pemVkICAgICAgIEJlZ2FuXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2VkXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZGVkL1JlY29nbml6ZWRcblx0ICovXG5cdHZhciBTVEFURV9QT1NTSUJMRSA9IDE7XG5cdHZhciBTVEFURV9CRUdBTiA9IDI7XG5cdHZhciBTVEFURV9DSEFOR0VEID0gNDtcblx0dmFyIFNUQVRFX0VOREVEID0gODtcblx0dmFyIFNUQVRFX1JFQ09HTklaRUQgPSBTVEFURV9FTkRFRDtcblx0dmFyIFNUQVRFX0NBTkNFTExFRCA9IDE2O1xuXHR2YXIgU1RBVEVfRkFJTEVEID0gMzI7XG5cdFxuXHQvKipcblx0ICogUmVjb2duaXplclxuXHQgKiBFdmVyeSByZWNvZ25pemVyIG5lZWRzIHRvIGV4dGVuZCBmcm9tIHRoaXMgY2xhc3MuXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0ZnVuY3Rpb24gUmVjb2duaXplcihvcHRpb25zKSB7XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXHRcblx0ICAgIHRoaXMuaWQgPSB1bmlxdWVJZCgpO1xuXHRcblx0ICAgIHRoaXMubWFuYWdlciA9IG51bGw7XG5cdFxuXHQgICAgLy8gZGVmYXVsdCBpcyBlbmFibGUgdHJ1ZVxuXHQgICAgdGhpcy5vcHRpb25zLmVuYWJsZSA9IGlmVW5kZWZpbmVkKHRoaXMub3B0aW9ucy5lbmFibGUsIHRydWUpO1xuXHRcblx0ICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcblx0XG5cdCAgICB0aGlzLnNpbXVsdGFuZW91cyA9IHt9O1xuXHQgICAgdGhpcy5yZXF1aXJlRmFpbCA9IFtdO1xuXHR9XG5cdFxuXHRSZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcblx0ICAgIC8qKlxuXHQgICAgICogQHZpcnR1YWxcblx0ICAgICAqIEB0eXBlIHtPYmplY3R9XG5cdCAgICAgKi9cblx0ICAgIGRlZmF1bHRzOiB7fSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHNldCBvcHRpb25zXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICogQHJldHVybiB7UmVjb2duaXplcn1cblx0ICAgICAqL1xuXHQgICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgICAgYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cdFxuXHQgICAgICAgIC8vIGFsc28gdXBkYXRlIHRoZSB0b3VjaEFjdGlvbiwgaW4gY2FzZSBzb21ldGhpbmcgY2hhbmdlZCBhYm91dCB0aGUgZGlyZWN0aW9ucy9lbmFibGVkIHN0YXRlXG5cdCAgICAgICAgdGhpcy5tYW5hZ2VyICYmIHRoaXMubWFuYWdlci50b3VjaEFjdGlvbi51cGRhdGUoKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiByZWNvZ25pemUgc2ltdWx0YW5lb3VzIHdpdGggYW4gb3RoZXIgcmVjb2duaXplci5cblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG5cdCAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuXHQgICAgICovXG5cdCAgICByZWNvZ25pemVXaXRoOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcblx0ICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHNpbXVsdGFuZW91cyA9IHRoaXMuc2ltdWx0YW5lb3VzO1xuXHQgICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcblx0ICAgICAgICBpZiAoIXNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdKSB7XG5cdCAgICAgICAgICAgIHNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdID0gb3RoZXJSZWNvZ25pemVyO1xuXHQgICAgICAgICAgICBvdGhlclJlY29nbml6ZXIucmVjb2duaXplV2l0aCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogZHJvcCB0aGUgc2ltdWx0YW5lb3VzIGxpbmsuIGl0IGRvZXNudCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgZHJvcFJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdkcm9wUmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJlY29nbml6ZXIgY2FuIG9ubHkgcnVuIHdoZW4gYW4gb3RoZXIgaXMgZmFpbGluZ1xuXHQgICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG5cdCAgICAgKi9cblx0ICAgIHJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcblx0ICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVxdWlyZUZhaWx1cmUnLCB0aGlzKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciByZXF1aXJlRmFpbCA9IHRoaXMucmVxdWlyZUZhaWw7XG5cdCAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuXHQgICAgICAgIGlmIChpbkFycmF5KHJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpID09PSAtMSkge1xuXHQgICAgICAgICAgICByZXF1aXJlRmFpbC5wdXNoKG90aGVyUmVjb2duaXplcik7XG5cdCAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZXF1aXJlRmFpbHVyZSh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogZHJvcCB0aGUgcmVxdWlyZUZhaWx1cmUgbGluay4gaXQgZG9lcyBub3QgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuXHQgICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG5cdCAgICAgKi9cblx0ICAgIGRyb3BSZXF1aXJlRmFpbHVyZTogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG5cdCAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ2Ryb3BSZXF1aXJlRmFpbHVyZScsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuXHQgICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkodGhpcy5yZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKTtcblx0ICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuXHQgICAgICAgICAgICB0aGlzLnJlcXVpcmVGYWlsLnNwbGljZShpbmRleCwgMSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGhhcyByZXF1aXJlIGZhaWx1cmVzIGJvb2xlYW5cblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICovXG5cdCAgICBoYXNSZXF1aXJlRmFpbHVyZXM6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCA+IDA7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogaWYgdGhlIHJlY29nbml6ZXIgY2FuIHJlY29nbml6ZSBzaW11bHRhbmVvdXMgd2l0aCBhbiBvdGhlciByZWNvZ25pemVyXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgKi9cblx0ICAgIGNhblJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuXHQgICAgICAgIHJldHVybiAhIXRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogWW91IHNob3VsZCB1c2UgYHRyeUVtaXRgIGluc3RlYWQgb2YgYGVtaXRgIGRpcmVjdGx5IHRvIGNoZWNrXG5cdCAgICAgKiB0aGF0IGFsbCB0aGUgbmVlZGVkIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQgYmVmb3JlIGVtaXR0aW5nLlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG5cdCAgICAgKi9cblx0ICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7XG5cdFxuXHQgICAgICAgIGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcblx0ICAgICAgICAgICAgc2VsZi5tYW5hZ2VyLmVtaXQoZXZlbnQsIGlucHV0KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vICdwYW5zdGFydCcgYW5kICdwYW5tb3ZlJ1xuXHQgICAgICAgIGlmIChzdGF0ZSA8IFNUQVRFX0VOREVEKSB7XG5cdCAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50KTsgLy8gc2ltcGxlICdldmVudE5hbWUnIGV2ZW50c1xuXHRcblx0ICAgICAgICBpZiAoaW5wdXQuYWRkaXRpb25hbEV2ZW50KSB7IC8vIGFkZGl0aW9uYWwgZXZlbnQocGFubGVmdCwgcGFucmlnaHQsIHBpbmNoaW4sIHBpbmNob3V0Li4uKVxuXHQgICAgICAgICAgICBlbWl0KGlucHV0LmFkZGl0aW9uYWxFdmVudCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBwYW5lbmQgYW5kIHBhbmNhbmNlbFxuXHQgICAgICAgIGlmIChzdGF0ZSA+PSBTVEFURV9FTkRFRCkge1xuXHQgICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrIHRoYXQgYWxsIHRoZSByZXF1aXJlIGZhaWx1cmUgcmVjb2duaXplcnMgaGFzIGZhaWxlZCxcblx0ICAgICAqIGlmIHRydWUsIGl0IGVtaXRzIGEgZ2VzdHVyZSBldmVudCxcblx0ICAgICAqIG90aGVyd2lzZSwgc2V0dXAgdGhlIHN0YXRlIHRvIEZBSUxFRC5cblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgICAgICovXG5cdCAgICB0cnlFbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIGlmICh0aGlzLmNhbkVtaXQoKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KGlucHV0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gaXQncyBmYWlsaW5nIGFueXdheVxuXHQgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogY2FuIHdlIGVtaXQ/XG5cdCAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICAgICAqL1xuXHQgICAgY2FuRW1pdDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgaWYgKCEodGhpcy5yZXF1aXJlRmFpbFtpXS5zdGF0ZSAmIChTVEFURV9GQUlMRUQgfCBTVEFURV9QT1NTSUJMRSkpKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiB1cGRhdGUgdGhlIHJlY29nbml6ZXJcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcblx0ICAgICAqL1xuXHQgICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcblx0ICAgICAgICAvLyBtYWtlIGEgbmV3IGNvcHkgb2YgdGhlIGlucHV0RGF0YVxuXHQgICAgICAgIC8vIHNvIHdlIGNhbiBjaGFuZ2UgdGhlIGlucHV0RGF0YSB3aXRob3V0IG1lc3NpbmcgdXAgdGhlIG90aGVyIHJlY29nbml6ZXJzXG5cdCAgICAgICAgdmFyIGlucHV0RGF0YUNsb25lID0gYXNzaWduKHt9LCBpbnB1dERhdGEpO1xuXHRcblx0ICAgICAgICAvLyBpcyBpcyBlbmFibGVkIGFuZCBhbGxvdyByZWNvZ25pemluZz9cblx0ICAgICAgICBpZiAoIWJvb2xPckZuKHRoaXMub3B0aW9ucy5lbmFibGUsIFt0aGlzLCBpbnB1dERhdGFDbG9uZV0pKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gcmVzZXQgd2hlbiB3ZSd2ZSByZWFjaGVkIHRoZSBlbmRcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZSAmIChTVEFURV9SRUNPR05JWkVEIHwgU1RBVEVfQ0FOQ0VMTEVEIHwgU1RBVEVfRkFJTEVEKSkge1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5wcm9jZXNzKGlucHV0RGF0YUNsb25lKTtcblx0XG5cdCAgICAgICAgLy8gdGhlIHJlY29nbml6ZXIgaGFzIHJlY29nbml6ZWQgYSBnZXN0dXJlXG5cdCAgICAgICAgLy8gc28gdHJpZ2dlciBhbiBldmVudFxuXHQgICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEIHwgU1RBVEVfQ0FOQ0VMTEVEKSkge1xuXHQgICAgICAgICAgICB0aGlzLnRyeUVtaXQoaW5wdXREYXRhQ2xvbmUpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiByZXR1cm4gdGhlIHN0YXRlIG9mIHRoZSByZWNvZ25pemVyXG5cdCAgICAgKiB0aGUgYWN0dWFsIHJlY29nbml6aW5nIGhhcHBlbnMgaW4gdGhpcyBtZXRob2Rcblx0ICAgICAqIEB2aXJ0dWFsXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG5cdCAgICAgKiBAcmV0dXJucyB7Q29uc3R9IFNUQVRFXG5cdCAgICAgKi9cblx0ICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0RGF0YSkgeyB9LCAvLyBqc2hpbnQgaWdub3JlOmxpbmVcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJldHVybiB0aGUgcHJlZmVycmVkIHRvdWNoLWFjdGlvblxuXHQgICAgICogQHZpcnR1YWxcblx0ICAgICAqIEByZXR1cm5zIHtBcnJheX1cblx0ICAgICAqL1xuXHQgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkgeyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogY2FsbGVkIHdoZW4gdGhlIGdlc3R1cmUgaXNuJ3QgYWxsb3dlZCB0byByZWNvZ25pemVcblx0ICAgICAqIGxpa2Ugd2hlbiBhbm90aGVyIGlzIGJlaW5nIHJlY29nbml6ZWQgb3IgaXQgaXMgZGlzYWJsZWRcblx0ICAgICAqIEB2aXJ0dWFsXG5cdCAgICAgKi9cblx0ICAgIHJlc2V0OiBmdW5jdGlvbigpIHsgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGdldCBhIHVzYWJsZSBzdHJpbmcsIHVzZWQgYXMgZXZlbnQgcG9zdGZpeFxuXHQgKiBAcGFyYW0ge0NvbnN0fSBzdGF0ZVxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBzdGF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhdGVTdHIoc3RhdGUpIHtcblx0ICAgIGlmIChzdGF0ZSAmIFNUQVRFX0NBTkNFTExFRCkge1xuXHQgICAgICAgIHJldHVybiAnY2FuY2VsJztcblx0ICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9FTkRFRCkge1xuXHQgICAgICAgIHJldHVybiAnZW5kJztcblx0ICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9DSEFOR0VEKSB7XG5cdCAgICAgICAgcmV0dXJuICdtb3ZlJztcblx0ICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9CRUdBTikge1xuXHQgICAgICAgIHJldHVybiAnc3RhcnQnO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZGlyZWN0aW9uIGNvbnMgdG8gc3RyaW5nXG5cdCAqIEBwYXJhbSB7Q29uc3R9IGRpcmVjdGlvblxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gZGlyZWN0aW9uU3RyKGRpcmVjdGlvbikge1xuXHQgICAgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fRE9XTikge1xuXHQgICAgICAgIHJldHVybiAnZG93bic7XG5cdCAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fVVApIHtcblx0ICAgICAgICByZXR1cm4gJ3VwJztcblx0ICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9MRUZUKSB7XG5cdCAgICAgICAgcmV0dXJuICdsZWZ0Jztcblx0ICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9SSUdIVCkge1xuXHQgICAgICAgIHJldHVybiAncmlnaHQnO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IGEgcmVjb2duaXplciBieSBuYW1lIGlmIGl0IGlzIGJvdW5kIHRvIGEgbWFuYWdlclxuXHQgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSBvdGhlclJlY29nbml6ZXJcblx0ICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG5cdCAqIEByZXR1cm5zIHtSZWNvZ25pemVyfVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHJlY29nbml6ZXIpIHtcblx0ICAgIHZhciBtYW5hZ2VyID0gcmVjb2duaXplci5tYW5hZ2VyO1xuXHQgICAgaWYgKG1hbmFnZXIpIHtcblx0ICAgICAgICByZXR1cm4gbWFuYWdlci5nZXQob3RoZXJSZWNvZ25pemVyKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvdGhlclJlY29nbml6ZXI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGlzIHJlY29nbml6ZXIgaXMganVzdCB1c2VkIGFzIGEgYmFzZSBmb3IgdGhlIHNpbXBsZSBhdHRyaWJ1dGUgcmVjb2duaXplcnMuXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG5cdCAqL1xuXHRmdW5jdGlvbiBBdHRyUmVjb2duaXplcigpIHtcblx0ICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChBdHRyUmVjb2duaXplciwgUmVjb2duaXplciwge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAbmFtZXNwYWNlXG5cdCAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuXHQgICAgICAgICAqIEBkZWZhdWx0IDFcblx0ICAgICAgICAgKi9cblx0ICAgICAgICBwb2ludGVyczogMVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFVzZWQgdG8gY2hlY2sgaWYgaXQgdGhlIHJlY29nbml6ZXIgcmVjZWl2ZXMgdmFsaWQgaW5wdXQsIGxpa2UgaW5wdXQuZGlzdGFuY2UgPiAxMC5cblx0ICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG5cdCAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gcmVjb2duaXplZFxuXHQgICAgICovXG5cdCAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgb3B0aW9uUG9pbnRlcnMgPSB0aGlzLm9wdGlvbnMucG9pbnRlcnM7XG5cdCAgICAgICAgcmV0dXJuIG9wdGlvblBvaW50ZXJzID09PSAwIHx8IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9uUG9pbnRlcnM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUHJvY2VzcyB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgc3RhdGUgZm9yIHRoZSByZWNvZ25pemVyXG5cdCAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgICAgICogQHJldHVybnMgeyp9IFN0YXRlXG5cdCAgICAgKi9cblx0ICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcblx0ICAgICAgICB2YXIgZXZlbnRUeXBlID0gaW5wdXQuZXZlbnRUeXBlO1xuXHRcblx0ICAgICAgICB2YXIgaXNSZWNvZ25pemVkID0gc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEKTtcblx0ICAgICAgICB2YXIgaXNWYWxpZCA9IHRoaXMuYXR0clRlc3QoaW5wdXQpO1xuXHRcblx0ICAgICAgICAvLyBvbiBjYW5jZWwgaW5wdXQgYW5kIHdlJ3ZlIHJlY29nbml6ZWQgYmVmb3JlLCByZXR1cm4gU1RBVEVfQ0FOQ0VMTEVEXG5cdCAgICAgICAgaWYgKGlzUmVjb2duaXplZCAmJiAoZXZlbnRUeXBlICYgSU5QVVRfQ0FOQ0VMIHx8ICFpc1ZhbGlkKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DQU5DRUxMRUQ7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc1JlY29nbml6ZWQgfHwgaXNWYWxpZCkge1xuXHQgICAgICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9FTkRFRDtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmICghKHN0YXRlICYgU1RBVEVfQkVHQU4pKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0hBTkdFRDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUGFuXG5cdCAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb3duIGFuZCBtb3ZlZCBpbiB0aGUgYWxsb3dlZCBkaXJlY3Rpb24uXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gUGFuUmVjb2duaXplcigpIHtcblx0ICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFxuXHQgICAgdGhpcy5wWCA9IG51bGw7XG5cdCAgICB0aGlzLnBZID0gbnVsbDtcblx0fVxuXHRcblx0aW5oZXJpdChQYW5SZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAbmFtZXNwYWNlXG5cdCAgICAgKiBAbWVtYmVyb2YgUGFuUmVjb2duaXplclxuXHQgICAgICovXG5cdCAgICBkZWZhdWx0czoge1xuXHQgICAgICAgIGV2ZW50OiAncGFuJyxcblx0ICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuXHQgICAgICAgIHBvaW50ZXJzOiAxLFxuXHQgICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0FMTFxuXHQgICAgfSxcblx0XG5cdCAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMub3B0aW9ucy5kaXJlY3Rpb247XG5cdCAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcblx0ICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcblx0ICAgICAgICAgICAgYWN0aW9ucy5wdXNoKFRPVUNIX0FDVElPTl9QQU5fWSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcblx0ICAgICAgICAgICAgYWN0aW9ucy5wdXNoKFRPVUNIX0FDVElPTl9QQU5fWCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBhY3Rpb25zO1xuXHQgICAgfSxcblx0XG5cdCAgICBkaXJlY3Rpb25UZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHQgICAgICAgIHZhciBoYXNNb3ZlZCA9IHRydWU7XG5cdCAgICAgICAgdmFyIGRpc3RhbmNlID0gaW5wdXQuZGlzdGFuY2U7XG5cdCAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0LmRpcmVjdGlvbjtcblx0ICAgICAgICB2YXIgeCA9IGlucHV0LmRlbHRhWDtcblx0ICAgICAgICB2YXIgeSA9IGlucHV0LmRlbHRhWTtcblx0XG5cdCAgICAgICAgLy8gbG9jayB0byBheGlzP1xuXHQgICAgICAgIGlmICghKGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uKSkge1xuXHQgICAgICAgICAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuXHQgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHggPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeCA8IDApID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG5cdCAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHggIT0gdGhpcy5wWDtcblx0ICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFYKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICh5ID09PSAwKSA/IERJUkVDVElPTl9OT05FIDogKHkgPCAwKSA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xuXHQgICAgICAgICAgICAgICAgaGFzTW92ZWQgPSB5ICE9IHRoaXMucFk7XG5cdCAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuXHQgICAgICAgIHJldHVybiBoYXNNb3ZlZCAmJiBkaXN0YW5jZSA+IG9wdGlvbnMudGhyZXNob2xkICYmIGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uO1xuXHQgICAgfSxcblx0XG5cdCAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICByZXR1cm4gQXR0clJlY29nbml6ZXIucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG5cdCAgICAgICAgICAgICh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4gfHwgKCEodGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKSAmJiB0aGlzLmRpcmVjdGlvblRlc3QoaW5wdXQpKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdFxuXHQgICAgICAgIHRoaXMucFggPSBpbnB1dC5kZWx0YVg7XG5cdCAgICAgICAgdGhpcy5wWSA9IGlucHV0LmRlbHRhWTtcblx0XG5cdCAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcmVjdGlvblN0cihpbnB1dC5kaXJlY3Rpb24pO1xuXHRcblx0ICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG5cdCAgICAgICAgICAgIGlucHV0LmFkZGl0aW9uYWxFdmVudCA9IHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUGluY2hcblx0ICogUmVjb2duaXplZCB3aGVuIHR3byBvciBtb3JlIHBvaW50ZXJzIGFyZSBtb3ZpbmcgdG93YXJkICh6b29tLWluKSBvciBhd2F5IGZyb20gZWFjaCBvdGhlciAoem9vbS1vdXQpLlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIFBpbmNoUmVjb2duaXplcigpIHtcblx0ICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoUGluY2hSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAbmFtZXNwYWNlXG5cdCAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG5cdCAgICAgKi9cblx0ICAgIGRlZmF1bHRzOiB7XG5cdCAgICAgICAgZXZlbnQ6ICdwaW5jaCcsXG5cdCAgICAgICAgdGhyZXNob2xkOiAwLFxuXHQgICAgICAgIHBvaW50ZXJzOiAyXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG5cdCAgICAgICAgICAgIChNYXRoLmFicyhpbnB1dC5zY2FsZSAtIDEpID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIGlmIChpbnB1dC5zY2FsZSAhPT0gMSkge1xuXHQgICAgICAgICAgICB2YXIgaW5PdXQgPSBpbnB1dC5zY2FsZSA8IDEgPyAnaW4nIDogJ291dCc7XG5cdCAgICAgICAgICAgIGlucHV0LmFkZGl0aW9uYWxFdmVudCA9IHRoaXMub3B0aW9ucy5ldmVudCArIGluT3V0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBQcmVzc1xuXHQgKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBmb3IgeCBtcyB3aXRob3V0IGFueSBtb3ZlbWVudC5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIFJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIFByZXNzUmVjb2duaXplcigpIHtcblx0ICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XG5cdCAgICB0aGlzLl90aW1lciA9IG51bGw7XG5cdCAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG5cdH1cblx0XG5cdGluaGVyaXQoUHJlc3NSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBQcmVzc1JlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3ByZXNzJyxcblx0ICAgICAgICBwb2ludGVyczogMSxcblx0ICAgICAgICB0aW1lOiAyNTEsIC8vIG1pbmltYWwgdGltZSBvZiB0aGUgcG9pbnRlciB0byBiZSBwcmVzc2VkXG5cdCAgICAgICAgdGhyZXNob2xkOiA5IC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9BVVRPXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblx0ICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcblx0ICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG5cdCAgICAgICAgdmFyIHZhbGlkVGltZSA9IGlucHV0LmRlbHRhVGltZSA+IG9wdGlvbnMudGltZTtcblx0XG5cdCAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcblx0XG5cdCAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcblx0ICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG5cdCAgICAgICAgaWYgKCF2YWxpZE1vdmVtZW50IHx8ICF2YWxpZFBvaW50ZXJzIHx8IChpbnB1dC5ldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAhdmFsaWRUaW1lKSkge1xuXHQgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuXHQgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG5cdCAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVDT0dOSVpFRDtcblx0ICAgICAgICAgICAgICAgIHRoaXMudHJ5RW1pdCgpO1xuXHQgICAgICAgICAgICB9LCBvcHRpb25zLnRpbWUsIHRoaXMpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBTVEFURV9SRUNPR05JWkVEO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuXHQgICAgfSxcblx0XG5cdCAgICByZXNldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoaW5wdXQgJiYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkpIHtcblx0ICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50ICsgJ3VwJywgaW5wdXQpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2lucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuXHQgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsIHRoaXMuX2lucHV0KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFJvdGF0ZVxuXHQgKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlciBhcmUgbW92aW5nIGluIGEgY2lyY3VsYXIgbW90aW9uLlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIFJvdGF0ZVJlY29nbml6ZXIoKSB7XG5cdCAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cdFxuXHRpbmhlcml0KFJvdGF0ZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBSb3RhdGVSZWNvZ25pemVyXG5cdCAgICAgKi9cblx0ICAgIGRlZmF1bHRzOiB7XG5cdCAgICAgICAgZXZlbnQ6ICdyb3RhdGUnLFxuXHQgICAgICAgIHRocmVzaG9sZDogMCxcblx0ICAgICAgICBwb2ludGVyczogMlxuXHQgICAgfSxcblx0XG5cdCAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTk9ORV07XG5cdCAgICB9LFxuXHRcblx0ICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuXHQgICAgICAgICAgICAoTWF0aC5hYnMoaW5wdXQucm90YXRpb24pID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBTd2lwZVxuXHQgKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgbW92aW5nIGZhc3QgKHZlbG9jaXR5KSwgd2l0aCBlbm91Z2ggZGlzdGFuY2UgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIFN3aXBlUmVjb2duaXplcigpIHtcblx0ICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoU3dpcGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAbmFtZXNwYWNlXG5cdCAgICAgKiBAbWVtYmVyb2YgU3dpcGVSZWNvZ25pemVyXG5cdCAgICAgKi9cblx0ICAgIGRlZmF1bHRzOiB7XG5cdCAgICAgICAgZXZlbnQ6ICdzd2lwZScsXG5cdCAgICAgICAgdGhyZXNob2xkOiAxMCxcblx0ICAgICAgICB2ZWxvY2l0eTogMC4zLFxuXHQgICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwsXG5cdCAgICAgICAgcG9pbnRlcnM6IDFcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBQYW5SZWNvZ25pemVyLnByb3RvdHlwZS5nZXRUb3VjaEFjdGlvbi5jYWxsKHRoaXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcblx0ICAgICAgICB2YXIgdmVsb2NpdHk7XG5cdFxuXHQgICAgICAgIGlmIChkaXJlY3Rpb24gJiAoRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG5cdCAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5O1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcblx0ICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG5cdCAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5WTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuXHQgICAgICAgICAgICBkaXJlY3Rpb24gJiBpbnB1dC5vZmZzZXREaXJlY3Rpb24gJiZcblx0ICAgICAgICAgICAgaW5wdXQuZGlzdGFuY2UgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkICYmXG5cdCAgICAgICAgICAgIGlucHV0Lm1heFBvaW50ZXJzID09IHRoaXMub3B0aW9ucy5wb2ludGVycyAmJlxuXHQgICAgICAgICAgICBhYnModmVsb2NpdHkpID4gdGhpcy5vcHRpb25zLnZlbG9jaXR5ICYmIGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0Lm9mZnNldERpcmVjdGlvbik7XG5cdCAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb24sIGlucHV0KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgaW5wdXQpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBBIHRhcCBpcyBlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb2luZyBhIHNtYWxsIHRhcC9jbGljay4gTXVsdGlwbGUgdGFwcyBhcmUgcmVjb2duaXplZCBpZiB0aGV5IG9jY3VyXG5cdCAqIGJldHdlZW4gdGhlIGdpdmVuIGludGVydmFsIGFuZCBwb3NpdGlvbi4gVGhlIGRlbGF5IG9wdGlvbiBjYW4gYmUgdXNlZCB0byByZWNvZ25pemUgbXVsdGktdGFwcyB3aXRob3V0IGZpcmluZ1xuXHQgKiBhIHNpbmdsZSB0YXAuXG5cdCAqXG5cdCAqIFRoZSBldmVudERhdGEgZnJvbSB0aGUgZW1pdHRlZCBldmVudCBjb250YWlucyB0aGUgcHJvcGVydHkgYHRhcENvdW50YCwgd2hpY2ggY29udGFpbnMgdGhlIGFtb3VudCBvZlxuXHQgKiBtdWx0aS10YXBzIGJlaW5nIHJlY29nbml6ZWQuXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG5cdCAqL1xuXHRmdW5jdGlvbiBUYXBSZWNvZ25pemVyKCkge1xuXHQgICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcblx0ICAgIC8vIHByZXZpb3VzIHRpbWUgYW5kIGNlbnRlcixcblx0ICAgIC8vIHVzZWQgZm9yIHRhcCBjb3VudGluZ1xuXHQgICAgdGhpcy5wVGltZSA9IGZhbHNlO1xuXHQgICAgdGhpcy5wQ2VudGVyID0gZmFsc2U7XG5cdFxuXHQgICAgdGhpcy5fdGltZXIgPSBudWxsO1xuXHQgICAgdGhpcy5faW5wdXQgPSBudWxsO1xuXHQgICAgdGhpcy5jb3VudCA9IDA7XG5cdH1cblx0XG5cdGluaGVyaXQoVGFwUmVjb2duaXplciwgUmVjb2duaXplciwge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAbmFtZXNwYWNlXG5cdCAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG5cdCAgICAgKi9cblx0ICAgIGRlZmF1bHRzOiB7XG5cdCAgICAgICAgZXZlbnQ6ICd0YXAnLFxuXHQgICAgICAgIHBvaW50ZXJzOiAxLFxuXHQgICAgICAgIHRhcHM6IDEsXG5cdCAgICAgICAgaW50ZXJ2YWw6IDMwMCwgLy8gbWF4IHRpbWUgYmV0d2VlbiB0aGUgbXVsdGktdGFwIHRhcHNcblx0ICAgICAgICB0aW1lOiAyNTAsIC8vIG1heCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIGRvd24gKGxpa2UgZmluZ2VyIG9uIHRoZSBzY3JlZW4pXG5cdCAgICAgICAgdGhyZXNob2xkOiA5LCAvLyBhIG1pbmltYWwgbW92ZW1lbnQgaXMgb2ssIGJ1dCBrZWVwIGl0IGxvd1xuXHQgICAgICAgIHBvc1RocmVzaG9sZDogMTAgLy8gYSBtdWx0aS10YXAgY2FuIGJlIGEgYml0IG9mZiB0aGUgaW5pdGlhbCBwb3NpdGlvblxuXHQgICAgfSxcblx0XG5cdCAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblx0XG5cdCAgICAgICAgdmFyIHZhbGlkUG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvbnMucG9pbnRlcnM7XG5cdCAgICAgICAgdmFyIHZhbGlkTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkO1xuXHQgICAgICAgIHZhciB2YWxpZFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IG9wdGlvbnMudGltZTtcblx0XG5cdCAgICAgICAgdGhpcy5yZXNldCgpO1xuXHRcblx0ICAgICAgICBpZiAoKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSAmJiAodGhpcy5jb3VudCA9PT0gMCkpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHdlIG9ubHkgYWxsb3cgbGl0dGxlIG1vdmVtZW50XG5cdCAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuXHQgICAgICAgIGlmICh2YWxpZE1vdmVtZW50ICYmIHZhbGlkVG91Y2hUaW1lICYmIHZhbGlkUG9pbnRlcnMpIHtcblx0ICAgICAgICAgICAgaWYgKGlucHV0LmV2ZW50VHlwZSAhPSBJTlBVVF9FTkQpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHZhciB2YWxpZEludGVydmFsID0gdGhpcy5wVGltZSA/IChpbnB1dC50aW1lU3RhbXAgLSB0aGlzLnBUaW1lIDwgb3B0aW9ucy5pbnRlcnZhbCkgOiB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgdmFsaWRNdWx0aVRhcCA9ICF0aGlzLnBDZW50ZXIgfHwgZ2V0RGlzdGFuY2UodGhpcy5wQ2VudGVyLCBpbnB1dC5jZW50ZXIpIDwgb3B0aW9ucy5wb3NUaHJlc2hvbGQ7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnBUaW1lID0gaW5wdXQudGltZVN0YW1wO1xuXHQgICAgICAgICAgICB0aGlzLnBDZW50ZXIgPSBpbnB1dC5jZW50ZXI7XG5cdFxuXHQgICAgICAgICAgICBpZiAoIXZhbGlkTXVsdGlUYXAgfHwgIXZhbGlkSW50ZXJ2YWwpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSAxO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXHRcblx0ICAgICAgICAgICAgLy8gaWYgdGFwIGNvdW50IG1hdGNoZXMgd2UgaGF2ZSByZWNvZ25pemVkIGl0LFxuXHQgICAgICAgICAgICAvLyBlbHNlIGl0IGhhcyBiZWdhbiByZWNvZ25pemluZy4uLlxuXHQgICAgICAgICAgICB2YXIgdGFwQ291bnQgPSB0aGlzLmNvdW50ICUgb3B0aW9ucy50YXBzO1xuXHQgICAgICAgICAgICBpZiAodGFwQ291bnQgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIC8vIG5vIGZhaWxpbmcgcmVxdWlyZW1lbnRzLCBpbW1lZGlhdGVseSB0cmlnZ2VyIHRoZSB0YXAgZXZlbnRcblx0ICAgICAgICAgICAgICAgIC8vIG9yIHdhaXQgYXMgbG9uZyBhcyB0aGUgbXVsdGl0YXAgaW50ZXJ2YWwgdG8gdHJpZ2dlclxuXHQgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc1JlcXVpcmVGYWlsdXJlcygpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyeUVtaXQoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zLmludGVydmFsLCB0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmFpbFRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG5cdCAgICAgICAgfSwgdGhpcy5vcHRpb25zLmludGVydmFsLCB0aGlzKTtcblx0ICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuXHQgICAgfSxcblx0XG5cdCAgICByZXNldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZW1pdDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuXHQgICAgICAgICAgICB0aGlzLl9pbnB1dC50YXBDb3VudCA9IHRoaXMuY291bnQ7XG5cdCAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fSk7XG5cdFxuXHQvKipcblx0ICogU2ltcGxlIHdheSB0byBjcmVhdGUgYSBtYW5hZ2VyIHdpdGggYSBkZWZhdWx0IHNldCBvZiByZWNvZ25pemVycy5cblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gSGFtbWVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgICAgb3B0aW9ucy5yZWNvZ25pemVycyA9IGlmVW5kZWZpbmVkKG9wdGlvbnMucmVjb2duaXplcnMsIEhhbW1lci5kZWZhdWx0cy5wcmVzZXQpO1xuXHQgICAgcmV0dXJuIG5ldyBNYW5hZ2VyKGVsZW1lbnQsIG9wdGlvbnMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQGNvbnN0IHtzdHJpbmd9XG5cdCAqL1xuXHRIYW1tZXIuVkVSU0lPTiA9ICcyLjAuNyc7XG5cdFxuXHQvKipcblx0ICogZGVmYXVsdCBzZXR0aW5nc1xuXHQgKiBAbmFtZXNwYWNlXG5cdCAqL1xuXHRIYW1tZXIuZGVmYXVsdHMgPSB7XG5cdCAgICAvKipcblx0ICAgICAqIHNldCBpZiBET00gZXZlbnRzIGFyZSBiZWluZyB0cmlnZ2VyZWQuXG5cdCAgICAgKiBCdXQgdGhpcyBpcyBzbG93ZXIgYW5kIHVudXNlZCBieSBzaW1wbGUgaW1wbGVtZW50YXRpb25zLCBzbyBkaXNhYmxlZCBieSBkZWZhdWx0LlxuXHQgICAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICAgKiBAZGVmYXVsdCBmYWxzZVxuXHQgICAgICovXG5cdCAgICBkb21FdmVudHM6IGZhbHNlLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkvZmFsbGJhY2suXG5cdCAgICAgKiBXaGVuIHNldCB0byBgY29tcHV0ZWAgaXQgd2lsbCBtYWdpY2FsbHkgc2V0IHRoZSBjb3JyZWN0IHZhbHVlIGJhc2VkIG9uIHRoZSBhZGRlZCByZWNvZ25pemVycy5cblx0ICAgICAqIEB0eXBlIHtTdHJpbmd9XG5cdCAgICAgKiBAZGVmYXVsdCBjb21wdXRlXG5cdCAgICAgKi9cblx0ICAgIHRvdWNoQWN0aW9uOiBUT1VDSF9BQ1RJT05fQ09NUFVURSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAgICogQGRlZmF1bHQgdHJ1ZVxuXHQgICAgICovXG5cdCAgICBlbmFibGU6IHRydWUsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBFWFBFUklNRU5UQUwgRkVBVFVSRSAtLSBjYW4gYmUgcmVtb3ZlZC9jaGFuZ2VkXG5cdCAgICAgKiBDaGFuZ2UgdGhlIHBhcmVudCBpbnB1dCB0YXJnZXQgZWxlbWVudC5cblx0ICAgICAqIElmIE51bGwsIHRoZW4gaXQgaXMgYmVpbmcgc2V0IHRoZSB0byBtYWluIGVsZW1lbnQuXG5cdCAgICAgKiBAdHlwZSB7TnVsbHxFdmVudFRhcmdldH1cblx0ICAgICAqIEBkZWZhdWx0IG51bGxcblx0ICAgICAqL1xuXHQgICAgaW5wdXRUYXJnZXQ6IG51bGwsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBmb3JjZSBhbiBpbnB1dCBjbGFzc1xuXHQgICAgICogQHR5cGUge051bGx8RnVuY3Rpb259XG5cdCAgICAgKiBAZGVmYXVsdCBudWxsXG5cdCAgICAgKi9cblx0ICAgIGlucHV0Q2xhc3M6IG51bGwsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEZWZhdWx0IHJlY29nbml6ZXIgc2V0dXAgd2hlbiBjYWxsaW5nIGBIYW1tZXIoKWBcblx0ICAgICAqIFdoZW4gY3JlYXRpbmcgYSBuZXcgTWFuYWdlciB0aGVzZSB3aWxsIGJlIHNraXBwZWQuXG5cdCAgICAgKiBAdHlwZSB7QXJyYXl9XG5cdCAgICAgKi9cblx0ICAgIHByZXNldDogW1xuXHQgICAgICAgIC8vIFJlY29nbml6ZXJDbGFzcywgb3B0aW9ucywgW3JlY29nbml6ZVdpdGgsIC4uLl0sIFtyZXF1aXJlRmFpbHVyZSwgLi4uXVxuXHQgICAgICAgIFtSb3RhdGVSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX1dLFxuXHQgICAgICAgIFtQaW5jaFJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfSwgWydyb3RhdGUnXV0sXG5cdCAgICAgICAgW1N3aXBlUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9XSxcblx0ICAgICAgICBbUGFuUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9LCBbJ3N3aXBlJ11dLFxuXHQgICAgICAgIFtUYXBSZWNvZ25pemVyXSxcblx0ICAgICAgICBbVGFwUmVjb2duaXplciwge2V2ZW50OiAnZG91YmxldGFwJywgdGFwczogMn0sIFsndGFwJ11dLFxuXHQgICAgICAgIFtQcmVzc1JlY29nbml6ZXJdXG5cdCAgICBdLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU29tZSBDU1MgcHJvcGVydGllcyBjYW4gYmUgdXNlZCB0byBpbXByb3ZlIHRoZSB3b3JraW5nIG9mIEhhbW1lci5cblx0ICAgICAqIEFkZCB0aGVtIHRvIHRoaXMgbWV0aG9kIGFuZCB0aGV5IHdpbGwgYmUgc2V0IHdoZW4gY3JlYXRpbmcgYSBuZXcgTWFuYWdlci5cblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqL1xuXHQgICAgY3NzUHJvcHM6IHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBEaXNhYmxlcyB0ZXh0IHNlbGVjdGlvbiB0byBpbXByb3ZlIHRoZSBkcmFnZ2luZyBnZXN0dXJlLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIERpc2FibGUgdGhlIFdpbmRvd3MgUGhvbmUgZ3JpcHBlcnMgd2hlbiBwcmVzc2luZyBhbiBlbGVtZW50LlxuXHQgICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG5cdCAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG5cdCAgICAgICAgICovXG5cdCAgICAgICAgdG91Y2hTZWxlY3Q6ICdub25lJyxcblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogRGlzYWJsZXMgdGhlIGRlZmF1bHQgY2FsbG91dCBzaG93biB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldC5cblx0ICAgICAgICAgKiBPbiBpT1MsIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0IHN1Y2ggYXMgYSBsaW5rLCBTYWZhcmkgZGlzcGxheXNcblx0ICAgICAgICAgKiBhIGNhbGxvdXQgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbGluay4gVGhpcyBwcm9wZXJ0eSBhbGxvd3MgeW91IHRvIGRpc2FibGUgdGhhdCBjYWxsb3V0LlxuXHQgICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG5cdCAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG5cdCAgICAgICAgICovXG5cdCAgICAgICAgdG91Y2hDYWxsb3V0OiAnbm9uZScsXG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHpvb21pbmcgaXMgZW5hYmxlZC4gVXNlZCBieSBJRTEwPlxuXHQgICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG5cdCAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG5cdCAgICAgICAgICovXG5cdCAgICAgICAgY29udGVudFpvb21pbmc6ICdub25lJyxcblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogU3BlY2lmaWVzIHRoYXQgYW4gZW50aXJlIGVsZW1lbnQgc2hvdWxkIGJlIGRyYWdnYWJsZSBpbnN0ZWFkIG9mIGl0cyBjb250ZW50cy4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuXHQgICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG5cdCAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG5cdCAgICAgICAgICovXG5cdCAgICAgICAgdXNlckRyYWc6ICdub25lJyxcblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogT3ZlcnJpZGVzIHRoZSBoaWdobGlnaHQgY29sb3Igc2hvd24gd2hlbiB0aGUgdXNlciB0YXBzIGEgbGluayBvciBhIEphdmFTY3JpcHRcblx0ICAgICAgICAgKiBjbGlja2FibGUgZWxlbWVudCBpbiBpT1MuIFRoaXMgcHJvcGVydHkgb2JleXMgdGhlIGFscGhhIHZhbHVlLCBpZiBzcGVjaWZpZWQuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAncmdiYSgwLDAsMCwwKSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB0YXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknXG5cdCAgICB9XG5cdH07XG5cdFxuXHR2YXIgU1RPUCA9IDE7XG5cdHZhciBGT1JDRURfU1RPUCA9IDI7XG5cdFxuXHQvKipcblx0ICogTWFuYWdlclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBNYW5hZ2VyKGVsZW1lbnQsIG9wdGlvbnMpIHtcblx0ICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgSGFtbWVyLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQgPSB0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQgfHwgZWxlbWVudDtcblx0XG5cdCAgICB0aGlzLmhhbmRsZXJzID0ge307XG5cdCAgICB0aGlzLnNlc3Npb24gPSB7fTtcblx0ICAgIHRoaXMucmVjb2duaXplcnMgPSBbXTtcblx0ICAgIHRoaXMub2xkQ3NzUHJvcHMgPSB7fTtcblx0XG5cdCAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXHQgICAgdGhpcy5pbnB1dCA9IGNyZWF0ZUlucHV0SW5zdGFuY2UodGhpcyk7XG5cdCAgICB0aGlzLnRvdWNoQWN0aW9uID0gbmV3IFRvdWNoQWN0aW9uKHRoaXMsIHRoaXMub3B0aW9ucy50b3VjaEFjdGlvbik7XG5cdFxuXHQgICAgdG9nZ2xlQ3NzUHJvcHModGhpcywgdHJ1ZSk7XG5cdFxuXHQgICAgZWFjaCh0aGlzLm9wdGlvbnMucmVjb2duaXplcnMsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0ICAgICAgICB2YXIgcmVjb2duaXplciA9IHRoaXMuYWRkKG5ldyAoaXRlbVswXSkoaXRlbVsxXSkpO1xuXHQgICAgICAgIGl0ZW1bMl0gJiYgcmVjb2duaXplci5yZWNvZ25pemVXaXRoKGl0ZW1bMl0pO1xuXHQgICAgICAgIGl0ZW1bM10gJiYgcmVjb2duaXplci5yZXF1aXJlRmFpbHVyZShpdGVtWzNdKTtcblx0ICAgIH0sIHRoaXMpO1xuXHR9XG5cdFxuXHRNYW5hZ2VyLnByb3RvdHlwZSA9IHtcblx0ICAgIC8qKlxuXHQgICAgICogc2V0IG9wdGlvbnNcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cblx0ICAgICAqL1xuXHQgICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgICAgYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cdFxuXHQgICAgICAgIC8vIE9wdGlvbnMgdGhhdCBuZWVkIGEgbGl0dGxlIG1vcmUgc2V0dXBcblx0ICAgICAgICBpZiAob3B0aW9ucy50b3VjaEFjdGlvbikge1xuXHQgICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAob3B0aW9ucy5pbnB1dFRhcmdldCkge1xuXHQgICAgICAgICAgICAvLyBDbGVhbiB1cCBleGlzdGluZyBldmVudCBsaXN0ZW5lcnMgYW5kIHJlaW5pdGlhbGl6ZVxuXHQgICAgICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcblx0ICAgICAgICAgICAgdGhpcy5pbnB1dC50YXJnZXQgPSBvcHRpb25zLmlucHV0VGFyZ2V0O1xuXHQgICAgICAgICAgICB0aGlzLmlucHV0LmluaXQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogc3RvcCByZWNvZ25pemluZyBmb3IgdGhpcyBzZXNzaW9uLlxuXHQgICAgICogVGhpcyBzZXNzaW9uIHdpbGwgYmUgZGlzY2FyZGVkLCB3aGVuIGEgbmV3IFtpbnB1dF1zdGFydCBldmVudCBpcyBmaXJlZC5cblx0ICAgICAqIFdoZW4gZm9yY2VkLCB0aGUgcmVjb2duaXplciBjeWNsZSBpcyBzdG9wcGVkIGltbWVkaWF0ZWx5LlxuXHQgICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VdXG5cdCAgICAgKi9cblx0ICAgIHN0b3A6IGZ1bmN0aW9uKGZvcmNlKSB7XG5cdCAgICAgICAgdGhpcy5zZXNzaW9uLnN0b3BwZWQgPSBmb3JjZSA/IEZPUkNFRF9TVE9QIDogU1RPUDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBydW4gdGhlIHJlY29nbml6ZXJzIVxuXHQgICAgICogY2FsbGVkIGJ5IHRoZSBpbnB1dEhhbmRsZXIgZnVuY3Rpb24gb24gZXZlcnkgbW92ZW1lbnQgb2YgdGhlIHBvaW50ZXJzICh0b3VjaGVzKVxuXHQgICAgICogaXQgd2Fsa3MgdGhyb3VnaCBhbGwgdGhlIHJlY29nbml6ZXJzIGFuZCB0cmllcyB0byBkZXRlY3QgdGhlIGdlc3R1cmUgdGhhdCBpcyBiZWluZyBtYWRlXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG5cdCAgICAgKi9cblx0ICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG5cdCAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG5cdCAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBydW4gdGhlIHRvdWNoLWFjdGlvbiBwb2x5ZmlsbFxuXHQgICAgICAgIHRoaXMudG91Y2hBY3Rpb24ucHJldmVudERlZmF1bHRzKGlucHV0RGF0YSk7XG5cdFxuXHQgICAgICAgIHZhciByZWNvZ25pemVyO1xuXHQgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG5cdFxuXHQgICAgICAgIC8vIHRoaXMgaG9sZHMgdGhlIHJlY29nbml6ZXIgdGhhdCBpcyBiZWluZyByZWNvZ25pemVkLlxuXHQgICAgICAgIC8vIHNvIHRoZSByZWNvZ25pemVyJ3Mgc3RhdGUgbmVlZHMgdG8gYmUgQkVHQU4sIENIQU5HRUQsIEVOREVEIG9yIFJFQ09HTklaRURcblx0ICAgICAgICAvLyBpZiBubyByZWNvZ25pemVyIGlzIGRldGVjdGluZyBhIHRoaW5nLCBpdCBpcyBzZXQgdG8gYG51bGxgXG5cdCAgICAgICAgdmFyIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXI7XG5cdFxuXHQgICAgICAgIC8vIHJlc2V0IHdoZW4gdGhlIGxhc3QgcmVjb2duaXplciBpcyByZWNvZ25pemVkXG5cdCAgICAgICAgLy8gb3Igd2hlbiB3ZSdyZSBpbiBhIG5ldyBzZXNzaW9uXG5cdCAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyIHx8IChjdXJSZWNvZ25pemVyICYmIGN1clJlY29nbml6ZXIuc3RhdGUgJiBTVEFURV9SRUNPR05JWkVEKSkge1xuXHQgICAgICAgICAgICBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyID0gbnVsbDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IHJlY29nbml6ZXJzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICByZWNvZ25pemVyID0gcmVjb2duaXplcnNbaV07XG5cdFxuXHQgICAgICAgICAgICAvLyBmaW5kIG91dCBpZiB3ZSBhcmUgYWxsb3dlZCB0cnkgdG8gcmVjb2duaXplIHRoZSBpbnB1dCBmb3IgdGhpcyBvbmUuXG5cdCAgICAgICAgICAgIC8vIDEuICAgYWxsb3cgaWYgdGhlIHNlc3Npb24gaXMgTk9UIGZvcmNlZCBzdG9wcGVkIChzZWUgdGhlIC5zdG9wKCkgbWV0aG9kKVxuXHQgICAgICAgICAgICAvLyAyLiAgIGFsbG93IGlmIHdlIHN0aWxsIGhhdmVuJ3QgcmVjb2duaXplZCBhIGdlc3R1cmUgaW4gdGhpcyBzZXNzaW9uLCBvciB0aGUgdGhpcyByZWNvZ25pemVyIGlzIHRoZSBvbmVcblx0ICAgICAgICAgICAgLy8gICAgICB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG5cdCAgICAgICAgICAgIC8vIDMuICAgYWxsb3cgaWYgdGhlIHJlY29nbml6ZXIgaXMgYWxsb3dlZCB0byBydW4gc2ltdWx0YW5lb3VzIHdpdGggdGhlIGN1cnJlbnQgcmVjb2duaXplZCByZWNvZ25pemVyLlxuXHQgICAgICAgICAgICAvLyAgICAgIHRoaXMgY2FuIGJlIHNldHVwIHdpdGggdGhlIGByZWNvZ25pemVXaXRoKClgIG1ldGhvZCBvbiB0aGUgcmVjb2duaXplci5cblx0ICAgICAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCAhPT0gRk9SQ0VEX1NUT1AgJiYgKCAvLyAxXG5cdCAgICAgICAgICAgICAgICAgICAgIWN1clJlY29nbml6ZXIgfHwgcmVjb2duaXplciA9PSBjdXJSZWNvZ25pemVyIHx8IC8vIDJcblx0ICAgICAgICAgICAgICAgICAgICByZWNvZ25pemVyLmNhblJlY29nbml6ZVdpdGgoY3VyUmVjb2duaXplcikpKSB7IC8vIDNcblx0ICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVjb2duaXplKGlucHV0RGF0YSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZWNvZ25pemVyLnJlc2V0KCk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIGlmIHRoZSByZWNvZ25pemVyIGhhcyBiZWVuIHJlY29nbml6aW5nIHRoZSBpbnB1dCBhcyBhIHZhbGlkIGdlc3R1cmUsIHdlIHdhbnQgdG8gc3RvcmUgdGhpcyBvbmUgYXMgdGhlXG5cdCAgICAgICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIHJlY29nbml6ZXIuIGJ1dCBvbmx5IGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgcmVjb2duaXplclxuXHQgICAgICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgJiYgcmVjb2duaXplci5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCkpIHtcblx0ICAgICAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSByZWNvZ25pemVyO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGkrKztcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogZ2V0IGEgcmVjb2duaXplciBieSBpdHMgZXZlbnQgbmFtZS5cblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfE51bGx9XG5cdCAgICAgKi9cblx0ICAgIGdldDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChyZWNvZ25pemVyIGluc3RhbmNlb2YgUmVjb2duaXplcikge1xuXHQgICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvZ25pemVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBpZiAocmVjb2duaXplcnNbaV0ub3B0aW9ucy5ldmVudCA9PSByZWNvZ25pemVyKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcnNbaV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogYWRkIGEgcmVjb2duaXplciB0byB0aGUgbWFuYWdlclxuXHQgICAgICogZXhpc3RpbmcgcmVjb2duaXplcnMgd2l0aCB0aGUgc2FtZSBldmVudCBuYW1lIHdpbGwgYmUgcmVtb3ZlZFxuXHQgICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG5cdCAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcnxNYW5hZ2VyfVxuXHQgICAgICovXG5cdCAgICBhZGQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcblx0ICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ2FkZCcsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gcmVtb3ZlIGV4aXN0aW5nXG5cdCAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXQocmVjb2duaXplci5vcHRpb25zLmV2ZW50KTtcblx0ICAgICAgICBpZiAoZXhpc3RpbmcpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZW1vdmUoZXhpc3RpbmcpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5yZWNvZ25pemVycy5wdXNoKHJlY29nbml6ZXIpO1xuXHQgICAgICAgIHJlY29nbml6ZXIubWFuYWdlciA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG5cdCAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcmVtb3ZlIGEgcmVjb2duaXplciBieSBuYW1lIG9yIGluc3RhbmNlXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSByZWNvZ25pemVyXG5cdCAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cblx0ICAgICAqL1xuXHQgICAgcmVtb3ZlOiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG5cdCAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdyZW1vdmUnLCB0aGlzKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlY29nbml6ZXIgPSB0aGlzLmdldChyZWNvZ25pemVyKTtcblx0XG5cdCAgICAgICAgLy8gbGV0J3MgbWFrZSBzdXJlIHRoaXMgcmVjb2duaXplciBleGlzdHNcblx0ICAgICAgICBpZiAocmVjb2duaXplcikge1xuXHQgICAgICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuXHQgICAgICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHJlY29nbml6ZXJzLCByZWNvZ25pemVyKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgICAgIHJlY29nbml6ZXJzLnNwbGljZShpbmRleCwgMSk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBiaW5kIGV2ZW50XG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG5cdCAgICAgKi9cblx0ICAgIG9uOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcblx0ICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG5cdCAgICAgICAgZWFjaChzcGxpdFN0cihldmVudHMpLCBmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gPSBoYW5kbGVyc1tldmVudF0gfHwgW107XG5cdCAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHVuYmluZCBldmVudCwgbGVhdmUgZW1pdCBibGFuayB0byByZW1vdmUgYWxsIGhhbmRsZXJzXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaGFuZGxlcl1cblx0ICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgb2ZmOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcblx0ICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcblx0ICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmICghaGFuZGxlcikge1xuXHQgICAgICAgICAgICAgICAgZGVsZXRlIGhhbmRsZXJzW2V2ZW50XTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSAmJiBoYW5kbGVyc1tldmVudF0uc3BsaWNlKGluQXJyYXkoaGFuZGxlcnNbZXZlbnRdLCBoYW5kbGVyKSwgMSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBlbWl0IGV2ZW50IHRvIHRoZSBsaXN0ZW5lcnNcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcblx0ICAgICAqL1xuXHQgICAgZW1pdDogZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcblx0ICAgICAgICAvLyB3ZSBhbHNvIHdhbnQgdG8gdHJpZ2dlciBkb20gZXZlbnRzXG5cdCAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kb21FdmVudHMpIHtcblx0ICAgICAgICAgICAgdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIG5vIGhhbmRsZXJzLCBzbyBza2lwIGl0IGFsbFxuXHQgICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdICYmIHRoaXMuaGFuZGxlcnNbZXZlbnRdLnNsaWNlKCk7XG5cdCAgICAgICAgaWYgKCFoYW5kbGVycyB8fCAhaGFuZGxlcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGRhdGEudHlwZSA9IGV2ZW50O1xuXHQgICAgICAgIGRhdGEucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgZGF0YS5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHZhciBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IGhhbmRsZXJzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBoYW5kbGVyc1tpXShkYXRhKTtcblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBkZXN0cm95IHRoZSBtYW5hZ2VyIGFuZCB1bmJpbmRzIGFsbCBldmVudHNcblx0ICAgICAqIGl0IGRvZXNuJ3QgdW5iaW5kIGRvbSBldmVudHMsIHRoYXQgaXMgdGhlIHVzZXIgb3duIHJlc3BvbnNpYmlsaXR5XG5cdCAgICAgKi9cblx0ICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuZWxlbWVudCAmJiB0b2dnbGVDc3NQcm9wcyh0aGlzLCBmYWxzZSk7XG5cdFxuXHQgICAgICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcblx0ICAgICAgICB0aGlzLnNlc3Npb24gPSB7fTtcblx0ICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcblx0ICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGFkZC9yZW1vdmUgdGhlIGNzcyBwcm9wZXJ0aWVzIGFzIGRlZmluZWQgaW4gbWFuYWdlci5vcHRpb25zLmNzc1Byb3BzXG5cdCAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGFkZFxuXHQgKi9cblx0ZnVuY3Rpb24gdG9nZ2xlQ3NzUHJvcHMobWFuYWdlciwgYWRkKSB7XG5cdCAgICB2YXIgZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcblx0ICAgIGlmICghZWxlbWVudC5zdHlsZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9wO1xuXHQgICAgZWFjaChtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHMsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgcHJvcCA9IHByZWZpeGVkKGVsZW1lbnQuc3R5bGUsIG5hbWUpO1xuXHQgICAgICAgIGlmIChhZGQpIHtcblx0ICAgICAgICAgICAgbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSA9IGVsZW1lbnQuc3R5bGVbcHJvcF07XG5cdCAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BdID0gbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSB8fCAnJztcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIGlmICghYWRkKSB7XG5cdCAgICAgICAgbWFuYWdlci5vbGRDc3NQcm9wcyA9IHt9O1xuXHQgICAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogdHJpZ2dlciBkb20gZXZlbnRcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpIHtcblx0ICAgIHZhciBnZXN0dXJlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcblx0ICAgIGdlc3R1cmVFdmVudC5pbml0RXZlbnQoZXZlbnQsIHRydWUsIHRydWUpO1xuXHQgICAgZ2VzdHVyZUV2ZW50Lmdlc3R1cmUgPSBkYXRhO1xuXHQgICAgZGF0YS50YXJnZXQuZGlzcGF0Y2hFdmVudChnZXN0dXJlRXZlbnQpO1xuXHR9XG5cdFxuXHRhc3NpZ24oSGFtbWVyLCB7XG5cdCAgICBJTlBVVF9TVEFSVDogSU5QVVRfU1RBUlQsXG5cdCAgICBJTlBVVF9NT1ZFOiBJTlBVVF9NT1ZFLFxuXHQgICAgSU5QVVRfRU5EOiBJTlBVVF9FTkQsXG5cdCAgICBJTlBVVF9DQU5DRUw6IElOUFVUX0NBTkNFTCxcblx0XG5cdCAgICBTVEFURV9QT1NTSUJMRTogU1RBVEVfUE9TU0lCTEUsXG5cdCAgICBTVEFURV9CRUdBTjogU1RBVEVfQkVHQU4sXG5cdCAgICBTVEFURV9DSEFOR0VEOiBTVEFURV9DSEFOR0VELFxuXHQgICAgU1RBVEVfRU5ERUQ6IFNUQVRFX0VOREVELFxuXHQgICAgU1RBVEVfUkVDT0dOSVpFRDogU1RBVEVfUkVDT0dOSVpFRCxcblx0ICAgIFNUQVRFX0NBTkNFTExFRDogU1RBVEVfQ0FOQ0VMTEVELFxuXHQgICAgU1RBVEVfRkFJTEVEOiBTVEFURV9GQUlMRUQsXG5cdFxuXHQgICAgRElSRUNUSU9OX05PTkU6IERJUkVDVElPTl9OT05FLFxuXHQgICAgRElSRUNUSU9OX0xFRlQ6IERJUkVDVElPTl9MRUZULFxuXHQgICAgRElSRUNUSU9OX1JJR0hUOiBESVJFQ1RJT05fUklHSFQsXG5cdCAgICBESVJFQ1RJT05fVVA6IERJUkVDVElPTl9VUCxcblx0ICAgIERJUkVDVElPTl9ET1dOOiBESVJFQ1RJT05fRE9XTixcblx0ICAgIERJUkVDVElPTl9IT1JJWk9OVEFMOiBESVJFQ1RJT05fSE9SSVpPTlRBTCxcblx0ICAgIERJUkVDVElPTl9WRVJUSUNBTDogRElSRUNUSU9OX1ZFUlRJQ0FMLFxuXHQgICAgRElSRUNUSU9OX0FMTDogRElSRUNUSU9OX0FMTCxcblx0XG5cdCAgICBNYW5hZ2VyOiBNYW5hZ2VyLFxuXHQgICAgSW5wdXQ6IElucHV0LFxuXHQgICAgVG91Y2hBY3Rpb246IFRvdWNoQWN0aW9uLFxuXHRcblx0ICAgIFRvdWNoSW5wdXQ6IFRvdWNoSW5wdXQsXG5cdCAgICBNb3VzZUlucHV0OiBNb3VzZUlucHV0LFxuXHQgICAgUG9pbnRlckV2ZW50SW5wdXQ6IFBvaW50ZXJFdmVudElucHV0LFxuXHQgICAgVG91Y2hNb3VzZUlucHV0OiBUb3VjaE1vdXNlSW5wdXQsXG5cdCAgICBTaW5nbGVUb3VjaElucHV0OiBTaW5nbGVUb3VjaElucHV0LFxuXHRcblx0ICAgIFJlY29nbml6ZXI6IFJlY29nbml6ZXIsXG5cdCAgICBBdHRyUmVjb2duaXplcjogQXR0clJlY29nbml6ZXIsXG5cdCAgICBUYXA6IFRhcFJlY29nbml6ZXIsXG5cdCAgICBQYW46IFBhblJlY29nbml6ZXIsXG5cdCAgICBTd2lwZTogU3dpcGVSZWNvZ25pemVyLFxuXHQgICAgUGluY2g6IFBpbmNoUmVjb2duaXplcixcblx0ICAgIFJvdGF0ZTogUm90YXRlUmVjb2duaXplcixcblx0ICAgIFByZXNzOiBQcmVzc1JlY29nbml6ZXIsXG5cdFxuXHQgICAgb246IGFkZEV2ZW50TGlzdGVuZXJzLFxuXHQgICAgb2ZmOiByZW1vdmVFdmVudExpc3RlbmVycyxcblx0ICAgIGVhY2g6IGVhY2gsXG5cdCAgICBtZXJnZTogbWVyZ2UsXG5cdCAgICBleHRlbmQ6IGV4dGVuZCxcblx0ICAgIGFzc2lnbjogYXNzaWduLFxuXHQgICAgaW5oZXJpdDogaW5oZXJpdCxcblx0ICAgIGJpbmRGbjogYmluZEZuLFxuXHQgICAgcHJlZml4ZWQ6IHByZWZpeGVkXG5cdH0pO1xuXHRcblx0Ly8gdGhpcyBwcmV2ZW50cyBlcnJvcnMgd2hlbiBIYW1tZXIgaXMgbG9hZGVkIGluIHRoZSBwcmVzZW5jZSBvZiBhbiBBTURcblx0Ly8gIHN0eWxlIGxvYWRlciBidXQgYnkgc2NyaXB0IHRhZywgbm90IGJ5IHRoZSBsb2FkZXIuXG5cdHZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fSkpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcblx0ZnJlZUdsb2JhbC5IYW1tZXIgPSBIYW1tZXI7XG5cdFxuXHRpZiAodHJ1ZSkge1xuXHQgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBIYW1tZXI7XG5cdCAgICB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gSGFtbWVyO1xuXHR9IGVsc2Uge1xuXHQgICAgd2luZG93W2V4cG9ydE5hbWVdID0gSGFtbWVyO1xuXHR9XG5cdFxuXHR9KSh3aW5kb3csIGRvY3VtZW50LCAnSGFtbWVyJyk7XG5cblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiW3tcXG4gIFxcXCJpZFxcXCI6IDEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQ3JvbiAoam9iIHNjaGVkdWxlcilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkl0IGNvbWVzIGZyb20gdGhlIEdyZWVrIHdvcmQgZm9yIHRpbWUsIGNocm9ub3MgKM+Hz4HPjM69zr/PgikuIENocm9ub3MgaXMgdGhlIHBlcnNvbmlmaWNhdGlvbiBvZiB0aW1lIGluIGVhcmx5IEdyZWVrIG15dGhvbG9neSBhbmQgbGl0ZXJhdHVyZS4gSGUgbGF0ZXIgYXBwZWFycyBpbiB0aGUgUmVuYWlzc2FuY2UgYXMgRmF0aGVyIFRpbWUuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiT1NcXFwiLFxcbiAgICBcXFwidW5peFxcXCIsXFxuICAgIFxcXCJsaW51eFxcXCIsXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb25cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEYWVtb25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB0ZXJtIGNvaW5lZCBieSBwcm9ncmFtbWVycyBvZiBNSVQncyBQcm9qZWN0IE1BQywgd2FzIGluc3BpcmVkIGJ5IHRoZSBwaHlzaWNpc3QgSmFtZXMgQ2xlcmsgTWF4d2VsbCdzIGRlbW9uLiBJdCBvcmlnaW5hdGVkIGFzIGFuIGltYWdpbmFyeSBiZWluZyBmcm9tIGEgdGhvdWdodCBleHBlcmltZW50IHRoYXQgY29uc3RhbnRseSB3b3JrcyBpbiB0aGUgYmFja2dyb3VuZCBzb3J0aW5nIG1vbGVjdWxlcy4gSW4gR3JlZWsgbXl0aG9sb2d5LCBhIGRhZW1vbiBpcyBhIHN1cGVybmF0dXJhbCBiZWluZyB3b3JraW5nIGluIHRoZSBiYWNrZ3JvdW5kLCB3aXRoIG5vIHBhcnRpY3VsYXIgYmlhcyB0b3dhcmRzIGdvb2Qgb3IgZXZpbC4gVGhlIGRhZW1vbiBjb25jZXB0IHdhcyBzdWJzZXF1ZW50bHkgYWRvcHRlZCBieSBVbml4IHN5c3RlbXMsIGhvd2V2ZXIsIEJTRCBhbmQgc29tZSBvZiBpdHMgZGVyaXZhdGl2ZXMgaGF2ZSB1c2VkIGEgQ2hyaXN0aWFuIGludGVycHJldGF0aW9uIG9mIHRoZSBteXRob2xvZ2ljYWwgZGVhbW9uIGFzIHRoZWlyIG1hc2NvdCByYXRoZXIgdGhhbiBhIEdyZWVrIGRhZW1vbi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJPU1xcXCIsXFxuICAgIFxcXCJ1bml4XFxcIixcXG4gICAgXFxcImxpbnV4XFxcIixcXG4gICAgXFxcIm9wZW4gc291cmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGFlbW9uXyhjb21wdXRpbmcpI0V0eW1vbG9neVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBvbHltb3JwaGlzbVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiSW4gcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzIGFuZCB0eXBlIHRoZW9yeSwgcG9seW1vcnBoaXNtIGlzIHRoZSBwcm92aXNpb24gb2YgYSBzaW5nbGUgaW50ZXJmYWNlIHRvIGVudGl0aWVzIG9mIGRpZmZlcmVudCB0eXBlcy4gUG9seW1vcnBoaXNtIGNvbWVzIGZyb20gdGhlIGdyZWVrIHdvcmRzLCBwb2x5cyAoz4DOv867z43PgiksIG1lYW5pbmcgXFxcXFxcXCJtdWNoXFxcXFxcXCIgb3IgXFxcXFxcXCJtYW55XFxcXFxcXCIgYW5kIG1vcnBoxJMgKM68zr/Pgc+Gzq4pLCBtZWFuaW5nIFxcXFxcXFwiZm9ybVxcXFxcXFwiIG9yIFxcXFxcXFwic2hhcGVcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiKEFwYWNoZSkgQ2Fzc2FuZHJhXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBcGFjaGUgQ2Fzc2FuZHJhIHdhcyBuYW1lZCBhZnRlciBDYXNzYW5kcmEgKEdyZWVrOiDOms6xz4PPg86szr3OtM+BzrEsIGFsc28gzprOsc+DzqzOvc60z4HOsSksIGRhdWdodGVyIG9mIEtpbmcgUHJpYW0gYW5kIFF1ZWVuIEhlY3ViYSBvZiBUcm95LiBBIGNvbW1vbiB2ZXJzaW9uIG9mIGhlciBzdG9yeSBpcyB0aGF0IEFwb2xsbyBnYXZlIGhlciB0aGUgcG93ZXIgb2YgcHJvcGhlY3kgaW4gb3JkZXIgdG8gc2VkdWNlIGhlciwgYnV0IHdoZW4gc2hlIHNwdXJuZWQgaGlzIGFkdmFuY2VzLCBoZSBzcGF0IGludG8gaGVyIG1vdXRoIHRvIGVuc3VyZSB0aGF0IENhZGFuZHJh4oCZcyBwcm9waGVzaWVzIGZlbGwgb24gZGVhZiBlYXJzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm9wZW4gc291cmNlXFxcIixcXG4gICAgXFxcImRhdGFiYXNlc1xcXCIsXFxuICAgIFxcXCJiaWcgZGF0YVxcXCIsXFxuICAgIFxcXCJub1NRTFxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQc2V1ZG9cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBwcmVmaXggcHNldWRvIGNvbWVzIGZyb20gcHNldWRlcyAoz4jOtc+FzrTOrs+CLCksIG1lYW5pbmcgXFxcXFxcXCJseWluZ1xcXFxcXFwiIG9yIFxcXFxcXFwiZmFsc2VcXFxcXFxcIi4gVGhlIHRlcm0gcmVmZXJzIHRvIHNvbWV0aGluZyB3aGljaCBhcHBlYXJzLCBvbiB0aGUgc3VyZmFjZSwgdG8gYmUgb25lIHRoaW5nLCBidXQgaXMgYWN0dWFsbHkgYW5vdGhlci4gUHNldWRvIG1heSBjb25ub3RlIGNvaW5jaWRlbmNlLCBpbWl0YXRpb24sIGludGVudGlvbmFsIGRlY2VwdGlvbiwgb3IgYSBjb21iaW5hdGlvbiB0aGVyZW9mLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCIsXFxuICAgIFxcXCJDU1NcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiVHJvamFuIGhvcnNlXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgdGVybSBjb21lcyBmcm9tIHRoZSBBbmNpZW50IEdyZWVrIHN0b3J5IG9mIHRoZSB3b29kZW4gaG9yc2UgdGhhdCB3YXMgdXNlZCBieSB0aGUgR3JlZWsgdHJvb3BzIHRvIGludmFkZSBUcm95IGJ5IHN0ZWFsdGggZnJvbSB3aXRoaW4gdGhlIGNpdHnigJlzIHdhbGxzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvY2lhbCBlbmdpbmVlcmluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlRlY2hub2xvZ3lcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRlY2hub2xvZ3kgZGVyaXZlcyBmcm9tIHRoZSBHcmVlayB3b3JkcyB0ZWNobmUgKM+Ezq3Ph869zrcpLCBtZWFuaW5nIGFydCwgc2tpbGwgb3Igc2xlaWdodCBvZiBoYW5kIGFuZCBsb2dpYSAozrvOv86zzq/OsSksIHdoaWNoIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gb2YgdGVjaG5pcXVlcywgc2tpbGxzIGFuZCBwcm9jZXNzZXMgdXNlZCBpbiB0aGUgcHJvZHVjdGlvbiBvZiBnb29kcywgc2VydmljZXMgb3IgaW4gdGhlIGFjY29tcGxpc2htZW50IG9mIG9iamVjdGl2ZXMuIEl0IGlzIGVhc3kgdG8gc2VlIGhvdyB0aGVzZSBjb25jZXB0cyBhcHBseSB0byBvdXIgY29udGVtcG9yYXJ5IHVuZGVyc3RhbmRpbmcgb2YgdGVjaG5vbG9neS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzY2llbmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA4LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIktlcmJlcm9zIChwcm90b2NvbClcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBwcm90b2NvbCB3YXMgbmFtZWQgYWZ0ZXIgS2VyYmVyb3MgKG9yIENlcmJlcnVzKSBpbiBHcmVlayBteXRob2xvZ3ksIHRoZSBmZXJvY2lvdXMgdGhyZWUtaGVhZGVkIGd1YXJkIGRvZyBvZiBIYWRlcy4gSXRzIGRlc2lnbmVycyBjb25jZWl2ZWQgaXQgcHJpbWFyaWx5IGFzIGEgY2xpZW504oCTc2VydmVyIG1vZGVsIGFuZCBpdCBwcm92aWRlcyBtdXR1YWwgYXV0aGVudGljYXRpb24gLSBib3RoIHRoZSB1c2VyIGFuZCB0aGUgc2VydmVyIHZlcmlmeSBlYWNoIG90aGVyJ3MgaWRlbnRpdHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya2luZ1xcXCIsXFxuICAgIFxcXCJhdXRoZW50aWNhdGlvbiBwcm90b2NvbFxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogOSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTa2V1b21vcnBoIOKAkyBTa2V1b21vcnBoaXNtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgdGVybSBza2V1b21vcnBoIGlzIGNvbXBvdW5kZWQgZnJvbSB0aGUgR3JlZWs6IHNrw6l1b3MgKM+DzrrOteG/ps6/z4IpLCBtZWFuaW5nIFxcXFxcXFwiY29udGFpbmVyXFxcXFxcXCIgb3IgXFxcXFxcXCJ0b29sXFxcXFxcXCIsIGFuZCBtb3JwaOG4lyAozrzOv8+Bz4bOriksIFxcXFxcXFwic2hhcGVcXFxcXFxcIi4gQSBza2V1b21vcnBoIGlzIGEgZGVyaXZhdGl2ZSBvYmplY3QgdGhhdCByZXRhaW5zIG9ybmFtZW50YWwgZGVzaWduIGN1ZXMgZnJvbSBzdHJ1Y3R1cmVzIHRoYXQgd2VyZSBuZWNlc3NhcnkgaW4gdGhlIG9yaWdpbmFsLCBsaWtlIGEgc29mdHdhcmUgY2FsZW5kYXIgdGhhdCBpbWl0YXRlcyB0aGUgYXBwZWFyYW5jZSBvZiBiaW5kaW5nIG9uIGEgcGFwZXIgZGVzayBjYWxlbmRhci4gU2tldW9tb3JwaCBjYW4gYmUgdXNlZCB0byBkZXNjcmliZSBjb21wdXRlciBhbmQgbW9iaWxlIGludGVyZmFjZXMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiZGVzaWduXFxcIixcXG4gICAgXFxcImludGVyZmFjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRWNsaXBzZVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHRlcm0gZWNsaXBzZSBpcyBkZXJpdmVkIGZyb20gdGhlIGFuY2llbnQgR3JlZWsgw6lrbGVpcHNpcyAo4byUzrrOu861zrnPiM65z4IpLCB3aGljaCBtZWFucyBcXFxcXFxcInRoZSBhYmFuZG9ubWVudCwgZG93bmZhbGwsIG9yIGRhcmtlbmluZyBvZiBhIGhlYXZlbmx5IGJvZHlcXFxcXFxcIi4gRWNsaXBzZSBzb2Z0d2FyZSwgaW5pdGlhbGx5IGRldmVsb3BlZCBieSBJQk0sIGlzIHByaW1hcmlseSB1c2VkIHRvIHByb2R1Y2UgSmF2YSBhcHBsaWNhdGlvbnMuIE1hbnkgdmVyc2lvbnMgb2YgRWNsaXBzZSBoYXZlIGJlZW4gbmFtZWQgYWZ0ZXIgYSBjZWxlc3RpYWwgYm9kaWVzLCBzdWNoIGFzIEp1bm8sIEx1bmEgYW5kIE1hcnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiSURFXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJKYXZhXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxMSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBbmRyb2lkXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCB3YXMgY29pbmVkIGZyb20gdGhlIHByZWZpeCBhbmRyby0gZm9yIFxcXFxcXFwibWFuXFxcXFxcXCIgb3IgXFxcXFxcXCJtYWxlXFxcXFxcXCIgKOG8gM69zrTPgSkgYW5kIHRoZSBzdWZmaXggLW9pZCBcXFxcXFxcImhhdmluZyB0aGUgZm9ybSBvciBsaWtlbmVzcyBvZlxcXFxcXFwiLiBJdCBoYXMgcmVjZW50bHkgY29tZSB0byByZWZlciB0byBhbiBvcGVyYXRpbmcgc3lzdGVtIGVuZG9yc2VkIGJ5IEdvb2dsZSwgd2hpY2ggaGFzIGJlY29tZSBhIGxlYWRlciBpbiB0aGUgbW9iaWxlIGRldmljZSBtYXJrZXQuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiT1NcXFwiLFxcbiAgICBcXFwibW9iaWxlXFxcIixcXG4gICAgXFxcIkdvb2dsZVxcXCIsXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSWNvblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQW4gaWNvbiwgZnJvbSB0aGUgR3JlZWsgZWlrxY1uICjOteG8sM66z47OvSkgZGVmaW5lZCBhcyBcXFxcXFxcImltYWdlXFxcXFxcXCIsIGlzIGdlbmVyYWxseSBhIGZsYXQgcGFuZWwgcGFpbnRpbmcgZGVwaWN0aW5nIHJlbGlnaW91cyBmaWd1cmVzIG9yIHNjZW5lcy4gVGhlIHRlcm0gaGFzIGJlZW4gYWRhcHRlZCB0byByZWZlciB0byBhIGdyYXBoaWNhbCB1c2VyIGludGVyZmFjZSAoR1VJKSwgd2hpY2ggaXMgdGhlIHZpc3VhbCBzeW1ib2wgaWRlbnRpZnlpbmcgYSBjb21tYW5kLCBmaWxlLCBkaXJlY3Rvcnkgb3IgZGV2aWNlLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIkdVSVxcXCIsXFxuICAgIFxcXCJpbnRlcmZhY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDEzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBhcmFtZXRlclxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiUGFyYW1ldGVyIGNvbWVzIGZyb20gdGhlIGFuY2llbnQgR3JlZWsgd29yZHMgXFxcXFxcXCJwYXJhXFxcXFxcXCIgKM+AzrHPgc6sKSwgbWVhbmluZyBcXFxcXFxcImJlc2lkZSwgc3Vic2lkaWFyeVxcXFxcXFwiIGFuZCBcXFxcXFxcIm1ldHJvblxcXFxcXFwiICjOvM6tz4TPgc6/zr0pLCBtZWFuaW5nIFxcXFxcXFwibWVhc3VyZVxcXFxcXFwiLiBJdCBjb21tb25seSByZWZlcnMgdG8gYSBcXFxcXFxcImNoYXJhY3RlcmlzdGljLCBmZWF0dXJlLCBvciBtZWFzdXJhYmxlIGZhY3RvciB0aGF0IGNhbiBoZWxwIGluIGRlZmluaW5nIGEgcGFydGljdWxhciBzeXN0ZW1cXFxcXFxcIi4gQSBwYXJhbWV0ZXIgaXMgYW4gaW1wb3J0YW50IGVsZW1lbnQgdG8gY29uc2lkZXIgaW4gZXZhbHVhdGlvbiBvciBjb21wcmVoZW5zaW9uIG9mIGFuIGV2ZW50LCBwcm9qZWN0LCBvciBzaXR1YXRpb24uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxNCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBc3ltbWV0cmljXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBc3ltbWV0cmljIG9yaWdpbmF0ZWQgZnJvbSB0aGUgYW5jaWVudCBHcmVlayB3b3JkIGFzdW1tZXRyw61hICjhvIDPg8+FzrzOvM61z4TPgc6vzrEpLCBtZWFuaW5nIFxcXFxcXFwiZGlzcHJvcG9ydGlvbiwgZGVmb3JtaXR5XFxcXFxcXCIuIEl0IGNhbiBiZSBmb3VuZCBpbiBtYW55IGNvbXB1dGluZy1yZWxhdGVkIHRvcGljcyBzdWNoIGFzIGFzeW1tZXRyaWMgY3J5cHRvZ3JhcGh5LCBhc3ltbWV0cmljIGRpZ2l0YWwgc3Vic2NyaWJlciBsaW5lIChBRFNMKSBpbiBpbnRlcm5ldCBjb25uZWN0aXZpdHkgYW5kIGFzeW1tZXRyaWMgbXVsdGlwcm9jZXNzaW5nIGluIGNvbXB1dGVyIGFyY2hpdGVjdHVyZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjcnlwdG9ncmFwaHlcXFwiLFxcbiAgICBcXFwiaW50ZXJuZXQgY29ubmVjdGl2aXR5XFxcIixcXG4gICAgXFxcImNvbXB1dGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU3luY2hyb25vdXMg4oCTIEFzeW5jaHJvbm91c1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiU3luY2hyb25vdXMsIG1lYW5pbmcgXFxcXFxcXCJoYXBwZW5pbmcgYXQgdGhlIHNhbWUgdGltZVxcXFxcXFwiLCBpcyBmcm9tIHRoZSBHcmVlayB3b3JkIHN5bmtocm9ub3MgKM+Dz4XOs8+Hz4HPjM69z4nPgikuIEl0IGlzIGEgY29tcG91bmQgd29yZCBmb3JtZWQgYnkgc3luLSBcXFxcXFxcInRvZ2V0aGVyXFxcXFxcXCIgYW5kIC1raHJvbm9zIFxcXFxcXFwidGltZVxcXFxcXFwiLiBBc3luY2hyb25vdXMgaGFzIHRoZSBvcHBvc2l0ZSBtZWFuaW5nLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiLFxcbiAgICBcXFwidGVsZWNvbW11bmljYXRpb25zXFxcIixcXG4gICAgXFxcInN5c3RlbXNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDE2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkFub255bW91c1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQW5vbnltaXR5IGlzIGRlcml2ZWQgZnJvbSB0aGUgR3JlZWsgd29yZCBhbm9ueW1pYSAo4byAzr3Pic69z4XOvM6vzrEpLCBmb3IgXFxcXFxcXCJ3aXRob3V0IGEgbmFtZVxcXFxcXFwiIG9yIFxcXFxcXFwibmFtZWxlc3NuZXNzXFxcXFxcXCIuIEluIGNvbGxvcXVpYWwgdXNlLCBcXFxcXFxcImFub255bW91c1xcXFxcXFwiIGlzIHVzZWQgdG8gZGVzY3JpYmUgc2l0dWF0aW9ucyB3aGVyZSB0aGUgYWN0aW5nIHBlcnNvbidzIG5hbWUgaXMgdW5rbm93bi4gU29tZSB3cml0ZXJzIGhhdmUgYXJndWVkIHRoYXQgbmFtZWxlc3NuZXNzLCB0aG91Z2ggdGVjaG5pY2FsbHkgY29ycmVjdCwgZG9lcyBub3QgY2FwdHVyZSB3aGF0IGlzIG1vcmUgY2VudHJhbGx5IGF0IHN0YWtlIGluIGNvbnRleHRzIG9mIGFub255bWl0eS4gVGhlIGltcG9ydGFudCBpZGVhIGhlcmUgaXMgdGhhdCBhIHBlcnNvbiBiZSB1bmlkZW50aWZpYWJsZSwgdW5yZWFjaGFibGUsIG9yIHVudHJhY2VhYmxlLiBBbm9ueW1pdHkgaXMgc2VlbiBhcyBhIHRlY2huaXF1ZSwgb3IgYSB3YXkgb2YgcmVhbGl6aW5nLCBjZXJ0YWluIG90aGVyIHZhbHVlcywgc3VjaCBhcyBwcml2YWN5LCBvciBsaWJlcnR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhY2tpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxNyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNb3NhaWMgKHdlYiBicm93c2VyKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiTW9zYWljIGlzIHRoZSBhcnQgb2YgY3JlYXRpbmcgaW1hZ2VzIHdpdGggYW4gYXNzZW1ibGFnZSBvZiBzbWFsbCBwaWVjZXMgb2YgY29sb3JlZCBnbGFzcywgc3RvbmUsIG9yIG90aGVyIG1hdGVyaWFscy4gSXQgY29tZXMgZnJvbSB0aGUgR3JlZWsgd29yZCBtb3VzZWlvbiwgJ3BsYWNlIGhvbHkgdG8gdGhlIE11c2VzLCcgYW5kIG1heSBoYXZlIGJlZW4gb3JpZ2luYWxseSBkZWRpY2F0ZWQgdG8gdGhlIE11c2VzLiBUaGlzIGFwcGxpZWQgYXJ0IGZvcm0gc2hhcmVzIGEgbmFtZSB3aXRoIGEgZGlzY29udGludWVkIGVhcmx5IHdlYiBicm93c2VyIGNyZWRpdGVkIHdpdGggcG9wdWxhcml6aW5nIHRoZSBXb3JsZCBXaWRlIFdlYi4gTW9zYWljIG9yIE5DU0EgTW9zYWljIHdhcyBuYW1lZCBmb3IgaXRzIHN1cHBvcnQgb2YgbXVsdGlwbGUgaW50ZXJuZXQgcHJvdG9jb2xzIGFuZCB3YXMgYWxzbyB0aGUgZmlyc3QgYnJvd3NlciB0byBkaXNwbGF5IGltYWdlcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJicm93c2VyXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxOCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJLdWJlcm5ldGVzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgR3JlZWsgd29yZCBrdWJlcm5ldGVzLCBtZWFucyBcXFxcXFxcImhlbG1zbWFuIG9mIGEgc2hpcCxcXFxcXFxcIiBvciwgbW9yZSBtZXRhcGhvcmljYWxseSwgXFxcXFxcXCJydWxlclxcXFxcXFwiLCB3aGlsZSB0aGUgTGF0aW4gdHJhbnNsYXRpb24gb2YgXFxcXFxcXCJrdWJlcm5ldGVzXFxcXFxcXCIgaXMgXFxcXFxcXCJndWJlcm5hcmVcXFxcXFxcIiwgbWVhbmluZyBcXFxcXFxcInRvIHJ1bGVcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCIsXFxuICAgIFxcXCJjbHVzdGVyXFxcIixcXG4gICAgXFxcInBsYXRmb3JtXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxOSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQeXRob25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlB5dGhvbiAozqDPjc64z4nOvSksIHRoZSBkcmFnb24gb2YgRGVscGhpLCB3YXMgYWx3YXlzIHJlcHJlc2VudGVkIGluIEdyZWVrIHNjdWxwdHVyZSBhbmQgdmFzZS1wYWludGluZ3MgYXMgYSBzZXJwZW50LiBIZSBwcmVzaWRlZCBhdCB0aGUgRGVscGhpYyBvcmFjbGUsIHdoaWNoIHdhcyB0aG91Z2h0IHRvIGV4aXN0IGF0IHRoZSBjZW50ZXIgb2YgdGhlIEVhcnRoLW1vdGhlciBjdWx0IG9mIEdhaWEsIFxcXFxcXFwiRWFydGhcXFxcXFxcIi4gR3JlZWtzIGNvbnNpZGVyZWQgdGhlIHNpdGUgdG8gYmUgdGhlIGNlbnRlciBvZiB0aGUgZWFydGgsIGFuZCB0aGUgY2VudGVyIG9mIERlbHBoaSB3YXMgcmVwcmVzZW50ZWQgYnkgYSBzdG9uZTsgdGhlIG9tcGhhbG9zLCBvciBuYXZlbCwgd2hpY2ggUHl0aG9uIGd1YXJkZWQuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmcgbGFuZ3VhZ2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDIwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1ldGVvclxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHJvb3Qgd29yZCBtZXRlb3IgY29tZXMgZnJvbSB0aGUgR3JlZWsgbWV0ZcWNcm9zICjOvM61z4TOrc+Jz4HOv8+CKSwgbWVhbmluZyBcXFxcXFxcImhpZ2ggaW4gdGhlIGFpclxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImphdmFzY3JpcHRcXFwiLFxcbiAgICBcXFwiZnJhbWV3b3JrXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyMSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJIeXBlciAodGV4dCwgbGluaywgZXRjLilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBFbmdsaXNoIHByZWZpeCBoeXBlci0gY29tZXMgZnJvbSB0aGUgR3JlZWsgcHJlZml4IFxcXFxcXFwi4b2Rz4DOtc+BLVxcXFxcXFwiIGFuZCBtZWFucyBcXFxcXFxcIm92ZXJcXFxcXFxcIiBvciBcXFxcXFxcImJleW9uZFxcXFxcXFwiIGFuZCBzaWduaWZpZXMgdGhlIG92ZXJjb21pbmcgb2YgdGhlIHByZXZpb3VzIGNvbnN0cmFpbnRzLiBJdCBoYXMgc2ltaWxhciBsaW5ndWlzdGljIHJvb3RzIGFzIHRoZSBwcmVmaXggXFxcXFxcXCJzdXBlci1cXFxcXFxcIiB3aGljaCBjb21lcyBmcm9tIExhdGluLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImludGVybmV0XFxcIixcXG4gICAgXFxcIndlYlxcXCIsXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyMixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJHcmFwaGljc1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgZ3JhcGhpY3MgY29tZXMgZnJvbSB0aGUgR3JlZWsgZ3JhcGhpa29zICjOs8+BzrHPhs65zrrPjM+CKSwgZm9yIFxcXFxcXFwic29tZXRoaW5nIHdyaXR0ZW5cXFxcXFxcIiwgbGlrZSBhbiBhdXRvZ3JhcGgsIGZvciBleGFtcGxlLiBUaGUgY29udGVtcG9yYXJ5IG1lYW5pbmcgb2YgdGhlIHdvcmQgZ3JhcGhpY3MgaXMgXFxcXFxcXCJ2aXN1YWwgaW1hZ2VzIG9yIGRlc2lnbnMgb24gc29tZSBzdXJmYWNlLCBzdWNoIGFzIGEgd2FsbCwgY2FudmFzLCBzY3JlZW4sIHBhcGVyLCBvciBzdG9uZSB0byBpbmZvcm0sIGlsbHVzdHJhdGUsIG9yIGVudGVydGFpblxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIkdVSVxcXCIsXFxuICAgIFxcXCJpbnRlcmZhY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDIzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBlcmlwaGVyYWxcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkEgcGVyaXBoZXJhbCBpcyBhIGRldmljZSB0aGF0IGlzIHVzZWQgdG8gcHV0IGluZm9ybWF0aW9uIGludG8gb3IgZ2V0IGluZm9ybWF0aW9uIG91dCBvZiB0aGUgY29tcHV0ZXIuIFBlcmlwaGVyYWwgY29tZXMgZnJvbSB0aGUgYW5jaWVudCBHcmVlayB3b3JkcyBwZXJpcGjDqXJlaWEgKM+AzrXPgc65z4bOrc+BzrXOuc6xKSwgbWVhbmluZyBcXFxcXFxcInRoZSBsaW5lIGFyb3VuZCB0aGUgY2lyY2xlLCBjaXJjdW1mZXJlbmNlLCBwYXJ0IG9mIGEgY2lyY2xlLCBhbiBhcmMsIHRoZSBvdXRlciBzdXJmYWNlXFxcXFxcXCIgYW5kIHBow6lyxY0gKM+Gzq3Pgc+JKSBcXFxcXFxcIuKAjmJlYXIsIGNhcnJ5XFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkRlbHBoaVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiSW4gbXl0aHMsIHRoZSBzaXRlIG9mIERlbHBoaSAozpTOtc67z4bOv86vKSB3YXMgYmVsaWV2ZWQgdG8gYmUgdGhlIGNlbnRlciBvZiB0aGUgXFxcXFxcXCJFYXJ0aFxcXFxcXFwiIChcXFxcXFxcIkdhaWFcXFxcXFxcIiksICBncmFuZG1vdGhlciBvZiBaZXVzLiBQZW9wbGUgY29uc3VsdGVkIHRoZSBEZWxwaGljIG9yYWNsZSBQeXRoaWEgKGFsd2F5cyBhIHdvbWFuKSwgb24gZXZlcnl0aGluZyBmcm9tIGltcG9ydGFudCBtYXR0ZXJzIG9mIHB1YmxpYyBwb2xpY3kgdG8gcGVyc29uYWwgYWZmYWlycy4gVGhlIFB5dGhpYSBhbmQgcHJpZXN0cyBvZiBBcG9sbG8ncyB0ZW1wbGUga2VwdCB2ZXJ5IGRldGFpbGVkIHJlY29yZHMgb2YgdGhlaXIgdmlzaXRvcnMsIGtpbmQgb2YgbGlrZSBhbiBhbmNpZW50IGRhdGFiYXNlLiBEZWxwaGkgd2FzIG9yaWdpbmFsbHkgb25lIG9mIG1hbnkgY29kZW5hbWVzIG9mIGEgcHJlLXJlbGVhc2UgZGV2ZWxvcG1lbnQgdG9vbCBwcm9qZWN0IGF0IEJvcmxhbmQuIEJvcmxhbmQgZGV2ZWxvcGVyIERhbm55IFRob3JwZSBzdWdnZXN0ZWQgRGVscGhpIGFzIGEgY29kZW5hbWUgaW4gcmVmZXJlbmNlIHRvIHRoZSBPcmFjbGUgb2YgRGVscGhpLiBPbmUgb2YgdGhlIGRlc2lnbiBnb2FscyBvZiB0aGUgcHJvZHVjdCB3YXMgdG8gcHJvdmlkZSBkYXRhYmFzZSBjb25uZWN0aXZpdHkgdG8gcHJvZ3JhbW1lcnMgYXMgYSBrZXkgZmVhdHVyZSBhbmQgYSBwb3B1bGFyIGRhdGFiYXNlIHBhY2thZ2UgYXQgdGhlIHRpbWUgd2FzIE9yYWNsZSBkYXRhYmFzZTsgaGVuY2UsIFxcXFxcXFwiSWYgeW91IHdhbnQgdG8gdGFsayB0byBbdGhlXSBPcmFjbGUsIGdvIHRvIERlbHBoaVxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nIGxhbmd1YWdlXFxcIixcXG4gICAgXFxcImRhdGFiYXNlXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcIklERVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSG9tb2ljb25pY1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRGVyaXZlZCBmcm9tIFxcXFxcXFwiaG9tb1xcXFxcXFwiICjPjM68zr8pIG1lYW5pbmcgdGhlIHNhbWUgYW5kIFxcXFxcXFwiaWNvblxcXFxcXFwiICjOtc65zrrPjs69KSBtZWFuaW5nIHJlcHJlc2VudGF0aW9uLiBBIHByb2dhbW1pbmcgbGFuZ3VhZ2UgaXMgc2FpZCB0byBiZSBob21vaWNvbmljIHdoZW4gaXQgc2hhcmVzIHRoZSBzYW1lIHJlcHJlc2VudGF0aW9uIGZvciBjb2RlIGFuZCBkYXRhLiBBIHdlbGwta25vd24gZXhhbXBsZSBpcyBMSVNQLCB3aGVyZSB0aGUgcHJpbWFyeSBwcmltaXRpdmUgZGF0YSBzdHJ1Y3R1cmUgaXMgdGhlIGxpc3QgYW5kIHByb2dyYW1zIGFyZSB3cml0dGVuIGFzIGxpc3RzLiBBcyBzdWNoLCBjb2RlIGNhbiBiZSBtYW5pcHVsYXRlZCBhcyBpZiBpdCB3YXMgZGF0YSBhbmQgdmljZS12ZXJzYVxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyNixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJDcnlwdG9ncmFwaHlcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkRlcml2ZWQgZnJvbSBrcnlwdMOzcyAozrrPgc+Fz4DPhM+Mz4IpIGZvciBcXFxcXFxcImhpZGRlbiwgc2VjcmV0XFxcXFxcXCIgYW5kIGdyYXBoZWluICjOs8+BzqzPhs61zrnOvSkgZm9yIFxcXFxcXFwid3JpdGluZ1xcXFxcXFwiLiBDcnlwdG9ncmFwaHkgaXMgdGhlIHByYWN0aWNlIGFuZCBzdHVkeSBvZiB0ZWNobmlxdWVzIGZvciBzZWN1cmUgY29tbXVuaWNhdGlvbiBpbiB0aGUgcHJlc2VuY2Ugb2YgdGhpcmQgcGFydGllcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzZWN1cml0eVxcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3J5cHRvZ3JhcGh5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlN0ZWdhbm9ncmFwaHlcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkNvbWJpbmVzIHRoZSB3b3JkcyBzdGVnYW5vcyAoz4PPhM61zrPOsc69z4zPgiksIG1lYW5pbmcgXFxcXFxcXCJjb3ZlcmVkLCBjb25jZWFsZWQsIG9yIHByb3RlY3RlZFxcXFxcXFwiLCBhbmQgZ3JhcGhlaW4gKM6zz4HOrM+GzrXOuc69KSBtZWFuaW5nIFxcXFxcXFwid3JpdGluZ1xcXFxcXFwiLiBTdGVnYW5vZ3JhcGh5IGlzIHRoZSBwcmFjdGljZSBvZiBjb25jZWFsaW5nIGEgZmlsZSwgbWVzc2FnZSwgaW1hZ2Ugb3IgdmlkZW8gd2l0aGluIGFub3RoZXIgZmlsZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzZWN1cml0eVxcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3RlZ2Fub2dyYXBoeVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyOCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJFbnRyb3B5XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJDb21lcyBmcm9tIHRoZSB3b3JkIHRyb3BlZSAoz4TPgc6/z4DOrikgd2hpY2ggbWVhbnMgXFxcXFxcXCJ0dXJuaW5nIHRvd2FyZFxcXFxcXFwiIG9yIFxcXFxcXFwidHJhbnNmb3JtYXRpb25cXFxcXFxcIi4gRW50cm9weSBpcyB0aGUgcmFuZG9tbmVzcyBjb2xsZWN0ZWQgYnkgYW4gYXBwbGljYXRpb24gZm9yIHVzZSBpbiBjcnlwdG9ncmFwaHkgb3Igb3RoZXIgdGhhdCByZXF1aXJlcyByYW5kb20gZGF0YS4gVGhpcyByYW5kb21uZXNzIGlzIG9mdGVuIGNvbGxlY3RlZCBmcm9tIGhhcmR3YXJlIHNvdXJjZXMgc3VjaCBhcyBtb3VzZSBtb3ZlbWVudHMgb3IgcmFuZG9tbmVzcyBnZW5lcmF0b3JzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNyeXB0b2dyYXBoeVxcXCIsXFxuICAgIFxcXCJzZWN1cml0eVxcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2VudHJvcHlcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjksXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTW9ub2xpdGhpY1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRGVyaXZlcyBmcm9tIG1vbsOzbGl0aG9zICjOvM6/zr3PjM67zrnOuM6/z4IpIHdoaWNoIGFjdHVhbGx5IG1lYW5zIFxcXFxcXFwibWFkZSBvZiBvbmUgc3RvbmVcXFxcXFxcIi4gQSBzb2Z0d2FyZSBpcyBjYWxsZWQgXFxcXFxcXCJtb25vbGl0aGljXFxcXFxcXCIgaWYgaXQgaGFzIGEgbW9ub2xpdGhpYyBhcmNoaXRlY3R1cmUsIGluIHdoaWNoIGZ1bmN0aW9uYWxseSBkaXN0aW5ndWlzaGFibGUgYXNwZWN0cyBhcmUgbm90IHNlcGFyYXRlIGNvbXBvbmVudHMgYnV0IGFyZSBhbGwgaW50ZWdyYXRlZC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJhcmNoaXRlY3R1cmVcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Nb25vbGl0aFxcXCIsXFxuICAgIFxcXCJodHRwOi8vZGljdGlvbmFyeS5yZWZlcmVuY2UuY29tL2Jyb3dzZS9tb25vbGl0aFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzMCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBdXRoZW50aWNhdGlvblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSB0aGUgd29yZCBhdXRoZW50aWtvcyAozrHPhc64zrXOvc+EzrnOus+Mz4IpIG1lYW5pbmcgXFxcXFxcXCJyZWFsLCBnZW51aW5lXFxcXFxcXCIsIGlzIHRoZSBhY3Qgb2YgY29uZmlybWluZyB0aGUgdHJ1dGggb2YgYW4gYXR0cmlidXRlIG9mIGEgc2luZ2xlIHBpZWNlIG9mIGRhdGEsIGZvciBleGFtcGxlIGFuIGlkZW50aXR5LCBjbGFpbWVkIHRydWUgYnkgYW4gZW50aXR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcInNlY3VyaXR5XFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXV0aGVudGljYXRpb25cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTW91c2VcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkNvbWVzIGZyb20gdGhlIHdvcmQgbWVlcyAozrzPhc+CKSB3aGljaCBpcyB0aGUgYW5jaWVudCBHcmVlayBuYW1lIG9mIHRoZSByb2RlbnQgbW91c2UuIEluIHRoZSB3b3JsZCBvZiBjb21wdXRpbmcgaXQncyB0aGUgbmFtZSBvZiBhIGhhcmR3YXJlIGRldmljZSwgdGhlIHdlbGwta25vd24gc291cmNlIG9mIGlucHV0IG9mIGEgY29tcHV0ZXIgc3lzdGVtLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInBlcmlwaGVyYWxcXFwiLFxcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwOi8vZGljdGlvbmFyeS5yZWZlcmVuY2UuY29tL2Jyb3dzZS9tb3VzZVxcXCIsXFxuICAgIFxcXCJodHRwOi8vd3d3LmV0eW1vbmxpbmUuY29tL2luZGV4LnBocD90ZXJtPW1vdXNlXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDMyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBhcmFsbGVsaXNtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIHRoZSB3b3JkIHBhcsOhbGxlbG9zICjPgM6xz4HOrM67zrvOt867zr/Pgikgd2hpY2ggY29tYmluZXMgdHdvIHdvcmRzIFxcXFxcXFwiz4DOsc+BzqxcXFxcXFxcIiArIFxcXFxcXFwizqzOu867zrfOu86/z4JcXFxcXFxcIiBtZWFuaW5nIFxcXFxcXFwiYWxvbmcgZWFjaCBvdGhlclxcXFxcXFwiLiBQYXJhbGxlbGlzbSBpcyBhIHR5cGUgb2YgY29tcHV0YXRpb24gaW4gd2hpY2ggY2FsY3VsYXRpb25zIGFyZSBjYXJyaWVkIG91dCBzaW11bHRhbmVvdXNseS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9wYXJhbGxlbCNFdHltb2xvZ3lcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSXNvbW9ycGhpc21cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkluIG1hdGhlbWF0aWNzLCBhbiBpc29tb3JwaGlzbSAoZnJvbSB0aGUgQW5jaWVudCBHcmVlazog4by0z4POv8+CIGlzb3MgXFxcXFxcXCJlcXVhbFxcXFxcXFwiLCBhbmQgzrzOv8+Bz4bOriBtb3JwaGUgXFxcXFxcXCJmb3JtXFxcXFxcXCIgb3IgXFxcXFxcXCJzaGFwZVxcXFxcXFwiKSBpcyBhIGhvbW9tb3JwaGlzbSAob3IgbW9yZSBnZW5lcmFsbHkgYSBtb3JwaGlzbSkgdGhhdCBhZG1pdHMgYW4gaW52ZXJzZS4gVHdvIG1hdGhlbWF0aWNhbCBvYmplY3RzIGFyZSBpc29tb3JwaGljIGlmIGFuIGlzb21vcnBoaXNtIGV4aXN0cyBiZXR3ZWVuIHRoZW0uIEluIHRoZSBkZXZlbG9wbWVudCB3b3JsZCB0aGVyZSBhcmUgYSBsb3Qgb2YgaXNvbW9ycGhpYyBmcmFtZXdvcmtzIGxhdGVseVxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzNCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJFcGhlbWVyYWxcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkVwaGVtZXJhbGl0eSAoZnJvbSBHcmVlayDOtc+Gzq7OvM61z4HOv8+CIOKAkyBlcGhlbWVyb3MsIGxpdGVyYWxseSBcXFxcXFxcImxhc3Rpbmcgb25seSBvbmUgZGF5XFxcXFxcXCIpIGlzIHRoZSBjb25jZXB0IG9mIHRoaW5ncyBiZWluZyB0cmFuc2l0b3J5LCBleGlzdGluZyBvbmx5IGJyaWVmbHkuIEFuIGVwaGVtZXJhbCBwb3J0IGlzIGEgc2hvcnQtbGl2ZWQgdHJhbnNwb3J0IHByb3RvY29sIHBvcnQgZm9yIEludGVybmV0IFByb3RvY29sIChJUCkgY29tbXVuaWNhdGlvbnMgYWxsb2NhdGVkIGF1dG9tYXRpY2FsbHkgZnJvbSBhIHByZWRlZmluZWQgcmFuZ2UgYnkgdGhlIElQIHNvZnR3YXJlXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya2luZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQ3ViZSAoT0xBUClcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkluIGNvbXB1dGVyIHNjaWVuY2UgYW5kIEJJIGFuIE9MQVAgQ3ViZSBpcyBhIGNvbGxlY3Rpb24gb2YgRGltZW5zaW9ucywgTWVhc3VyZXMgYW5kIEhpZXJhcmNoaWVzIHRoYXQgYXJlIHByZXByb2Nlc3NlZCBhbmQgc3RvcmVkIGluIGEgd2F5IHRoYXQgYWxsb3dzIGRhdGEgdG8gYXBwZWFyIGluc3RhbnRhbmVvdXNseSB3aGVuIGEgdXNlciBtYWtlcyBoaXMvaGVyIGFuYWx5c2lzLiBUaGUgdGVybSBjdWJlIGlzIGRlcml2ZWQgZnJvbSBcXFxcXFxcImt1Ym9zXFxcXFxcXCIgKM66z43Oss6/z4IpLiBJbiBhbmNpZW50IGdyZWVrLCBrdWJvcyB3YXMgYSBkaWUuIExhdGVyIG9uIHRoZSBtZWFuaW5nIGV4cGFuZGVkIHRvIG1hbnkgY3ViZS1zaGFwZWQgb2JqZWN0cy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJiaWcgZGF0YVxcXCIsXFxuICAgIFxcXCJkYXRhYmFzZXNcXFwiLFxcbiAgICBcXFwiZGF0YS13YXJlaG91c2VcXFwiLFxcbiAgICBcXFwiYnVzaW5lc3MgaW50ZWxsaWdlbmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzNixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTY2hlbWFcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIHNjaGVtYSBjb21lcyBmcm9tIHRoZSBHcmVlayB3b3JkIM+Dz4fOrs68zrEgKHNraMSTbWEpLCB3aGljaCBtZWFucyBzaGFwZSwgb3IgbW9yZSBnZW5lcmFsbHksIHBsYW4uIEEgZGF0YWJhc2Ugc2NoZW1hIGRlc2NyaWJlcyB0aGUgc3RydWN0dXJlIG9mIGl0cyBkYXRhYmFzZSBzeXN0ZW0uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiZGF0YWJhc2VzXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzNyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCIoQWRvYmUpIEFjcm9iYXRcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkFkb2JlIEFjcm9iYXQgaXMgYSBmYW1pbHkgb2YgYXBwbGljYXRpb24gc29mdHdhcmUgYW5kIFdlYiBzZXJ2aWNlcyBkZXZlbG9wZWQgYnkgQWRvYmUgU3lzdGVtcyB0byB2aWV3LCBjcmVhdGUsIG1hbmlwdWxhdGUsIHByaW50IGFuZCBtYW5hZ2UgZmlsZXMgaW4gUG9ydGFibGUgRG9jdW1lbnQgRm9ybWF0IChQREYpLiBCYXNlZCBvbiBhbmNpZW50IEdyZWVrIHdvcmQg4byAzrrPgc6/zrLOrM+EzrfPguKAjiAoYWtyb2LDoXTEk3MsIFxcXFxcXFwid2Fsa2luZyBvbiB0aXB0b2UsIGNsaW1iaW5nIGFsb2Z0XFxcXFxcXCIpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvZnR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzOCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBbHBoYSAvIEJldGFcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkEgc29mdHdhcmUgcmVsZWFzZSBsaWZlIGN5Y2xlIGNvbnRhaW5zIHRoZSBcXFxcXFxcImFscGhhXFxcXFxcXCIgYW5kIFxcXFxcXFwiYmV0YVxcXFxcXFwiIHN0YWdlcyBvZiBkZXZlbG9wbWVudC4gVGhlIGFscGhhIHBoYXNlIG9mIHRoZSByZWxlYXNlIGxpZmUgY3ljbGUgaXMgdGhlIGZpcnN0IHBoYXNlIHRvIGJlZ2luIHNvZnR3YXJlIHRlc3RpbmcgKGFscGhhIGlzIHRoZSBmaXJzdCBsZXR0ZXIgb2YgdGhlIEdyZWVrIGFscGhhYmV0LCB1c2VkIGFsc28gYXMgdGhlIG51bWJlciAxKS4gQmV0YSwgbmFtZWQgYWZ0ZXIgdGhlIHNlY29uZCBsZXR0ZXIgb2YgdGhlIEdyZWVrIGFscGhhYmV0LCBpcyB0aGUgc29mdHdhcmUgZGV2ZWxvcG1lbnQgcGhhc2UgZm9sbG93aW5nIGFscGhhLiBCZXRhIHBoYXNlIGdlbmVyYWxseSBiZWdpbnMgd2hlbiB0aGUgc29mdHdhcmUgaXMgZmVhdHVyZSBjb21wbGV0ZSBidXQgbGlrZWx5IHRvIGNvbnRhaW4gYSBudW1iZXIgb2Yga25vd24gb3IgdW5rbm93biBidWdzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcImRldmVsb3BtZW50XFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzOSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEaXNrIChvciBkaXNjKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM60zq/Pg866zr/PgiAoZMOtc2tvcywgXFxcXFxcXCJhIGNpcmN1bGFyIHBsYXRlIHN1aXRlZCBmb3IgaHVybGluZ1xcXFxcXFwiKSwgZnJvbSDOtM65zrrOteG/ls69IOKAjihkaWtlw65uLCBcXFxcXFxcInRvIGh1cmwsIHRvIGxhdW5jaFxcXFxcXFwiKS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYXJkd2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUHJvZ3JhbVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQSBjb21wdXRlciBwcm9ncmFtIGlzIGEgY29sbGVjdGlvbiBvZiBpbnN0cnVjdGlvbnMgdGhhdCBwZXJmb3JtcyBhIHNwZWNpZmljIHRhc2sgd2hlbiBleGVjdXRlZCBieSBhIGNvbXB1dGVyLiBUaGUgd29yZCBwcm9ncmFtIGNvbWVzIGZyb20gQW5jaWVudCBHcmVlayDPgM+Bz4zOs8+BzrHOvM68zrEg4oCOKHByw7NncmFtbWEsIFxcXFxcXFwiYSB3cml0dGVuIHB1YmxpYyBub3RpY2UsIGFuIGVkaWN0XFxcXFxcXCIpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhcmR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0MSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCIoR29vZ2xlKSBDaHJvbWUgLyBDaHJvbWl1bVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiR29vZ2xlIENocm9tZSAvIENocm9taXVtIGFyZSB3ZWIgYnJvd3NlcnMgZGV2ZWxvcGVkIGJ5IEdvb2dsZS4gVGhlaXIgbmFtZXMgYXJlIGRlcml2ZWQgZnJvbSB0aGUgR3JlZWsgd29yZCDPh8+B4b+2zrzOsSwgY2hyxY1tYSwgbWVhbmluZyBjb2xvci5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJicm93c2VyXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0MixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBdXRvbWF0b25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIFxcXFxcXFwiYXV0b21hdG9uXFxcXFxcXCIgaXMgdGhlIGxhdGluaXphdGlvbiBvZiB0aGUgR3JlZWsgzrHhvZDPhM+MzrzOsc+Ezr/OvSwgYXV0b21hdG9uLCBcXFxcXFxcImFjdGluZyBvZiBvbmUncyBvd24gd2lsbFxcXFxcXFwiLiBBbiBhdXRvbWF0b24gKHBsdXJhbDogYXV0b21hdGEgb3IgYXV0b21hdG9ucykgaXMgYSBzZWxmLW9wZXJhdGluZyBtYWNoaW5lLCBvciBhIG1hY2hpbmUgb3IgY29udHJvbCBtZWNoYW5pc20gZGVzaWduZWQgdG8gZm9sbG93IGF1dG9tYXRpY2FsbHkgYSBwcmVkZXRlcm1pbmVkIHNlcXVlbmNlIG9mIG9wZXJhdGlvbnMsIG9yIHJlc3BvbmQgdG8gcHJlZGV0ZXJtaW5lZCBpbnN0cnVjdGlvbnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkN5YmVyXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgcHJlZml4IGN5YmVyLSBpcyBkZXJpdmVkIGZyb20gXFxcXFxcXCJjeWJlcm5ldGljLFxcXFxcXFwiIHdoaWNoIGNvbWVzIGZyb20gdGhlIEdyZWVrIHdvcmQgzrrPhc6yzrXPgc69zrfPhM65zrrPjM+CIG1lYW5pbmcgc2tpbGxlZCBpbiBzdGVlcmluZyBvciBnb3Zlcm5pbmcuIEl0IGlzIHVzZWQgaW4gdGhlIHRlcm1zIGN5YmVyc3BhY2UsIGN5YmVycHVuaywgY3liZXJnb3RoLCBjeWJlcmxhdywgY3liZXJjcmltZSwgY3liZXJ3YXJmYXJlLCBjeWJlcnRlcnJvcmlzbSwgY3liZXJzZXgsIGFuZCBjeWJlcmJ1bGx5aW5nLCBhbW9uZyBvdGhlcnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaW50ZXJuZXRcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlN5bWZvbnkgKHdlYiBhcHBsaWNhdGlvbiBmcmFtZXdvcmspXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJPcmlnaW5hdGVzIGZyb20gdGhlIGhvbW9waG9uZSB3b3JkIFxcXFxcXFwiU3ltcGhvbnlcXFxcXFxcIiB3aGljaCBpcyBkZXJpdmVkIGZyb20gdGhlIHdvcmQgz4PPhc68z4bPic69zq/OsSAoc3ltcGhvbmlhKSwgbWVhbmluZyBcXFxcXFxcImFncmVlbWVudCAvIGNvbmNvcmQgb2Ygc291bmRcXFxcXFxcIiBhbmQgZGVzY3JpYmVzIGFuIGV4dGVuZGVkIG11c2ljYWwgY29tcG9zaXRpb24gaW4gd2VzdGVybiBjbGFzc2ljYWwgbXVzaWMuIFN5bWZvbnkgaXMgYSBcXFxcXFxcImZ1bGwtc3RhY2tcXFxcXFxcIiBQSFAgZnJhbWV3b3JrIHdoaWNoIHByb21vdGVzIGJlc3QgcHJhY3RpY2VzIGFuZCBjb25zaXN0cyBvZiBhIHNldCBvZiBkZWNvdXBsZWQgYW5kIHJldXNhYmxlIGxpYnJhcmllcy4gSXQgaW1wbGVtZW50cyB0aGUgTVZDIGFyY2hpdGVjdHVyYWwgZGVzaWduIHBhdHRlcm4gYW5kIG1hbnkgb3RoZXIgZGVzaWduIHBhdHRlcm5zIGxpa2UgXFxcXFxcXCJEZXBlbmRlbmN5IEluamVjdGlvblxcXFxcXFwiLCBcXFxcXFxcIkRhdGEgQWNjZXNzIE9iamVjdFxcXFxcXFwiIGFuZCBcXFxcXFxcIk9ic2VydmVyXFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiZnJhbWV3b3Jrc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bXBob255I09yaWdpbnNcXFwiLFxcbiAgICBcXFwiaHR0cDovL3N5bWZvbnkuY29tL3doYXQtaXMtc3ltZm9ueVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0NSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBdG9taWNpdHkgKGRhdGFiYXNlIHN5c3RlbXMpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBdG9taWNpdHkgY29tZXMgZnJvbSB0aGUgd29yZCDOrM+Ezr/OvM6/z4IgKGF0b21vcykgd2hpY2ggbWVhbnMgXFxcXFxcXCJpbmRpdmlzaWJsZVxcXFxcXFwiLiBJdCdzIG9uZSBvZiB0aGUgQUNJRCBwcm9wZXJ0aWVzIHRoYXQgZ3VhcmFudGVlIHRyYW5zYWN0aW9uIHJlbGlhYmlsaXR5LiBBdG9taWNpdHkgcmVxdWlyZXMgdGhhdCBlYWNoIHRyYW5zYWN0aW9uIG11c3QgYmUgXFxcXFxcXCJhbGwgb3Igbm90aGluZ1xcXFxcXFwiLCBzbyB0aGF0IGlmIG9uZSBwYXJ0IG9mIHRoZSB0cmFuc2FjdGlvbiBmYWlscywgdGhlIGVudGlyZSB0cmFuc2FjdGlvbiBmYWlscyB0b28gYW5kIHRoZSBkYXRhYmFzZSBzdGF0ZSBpcyBsZWZ0IHVuY2hhbmdlZC4gQWxzbyB0aGUgc2VyaWVzIG9mIG9wZXJhdGlvbnMgY2Fubm90IGJlIGRpdmlkZWQgYXBhcnQgYW5kIGV4ZWN1dGVkIHBhcnRpYWxseSBmcm9tIGVhY2ggb3RoZXIsIHdoaWNoIG1ha2VzIHRoZSBzZXJpZXMgb2Ygb3BlcmF0aW9ucyBcXFxcXFxcImluZGl2aXNpYmxlXFxcXFxcXCIsIGhlbmNlIHRoZSBuYW1lLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImRhdGFiYXNlc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0F0b21pY2l0eV8oZGF0YWJhc2Vfc3lzdGVtcylcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRGVsdGEgKGRpZmZlcmVuY2luZylcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIs6Uzq3Ou8+EzrEgKGRlbHRhKSBpcyBhIGxldHRlciBvZiB0aGUgR3JlZWsgYWxwaGFiZXQgKM6UIG9yIM60KS4gRGVsdGEgZGlmZmVyZW5jaW5nIGlzIGEgd2F5IG9mIHN0b3Jpbmcgb3IgdHJhbnNtaXR0aW5nIGZpbGUgZGlmZmVyZW5jZXMgcmF0aGVyIHRoYW4gY29tcGxldGUgZmlsZXMuIERlbHRhcywgZm9yIGV4YW1wbGUsIGFyZSB0aGUgY2hhbmdlcyBhZnRlciBhIGZ1bGwgYmFja3VwLiBUaGUgZGlmZmVyZW5jZXMgYXJlIHN0b3JlZCBpbiBmaWxlcyBjYWxsZWQgZGVsdGFzLiBBcyBhIGJhY2t1cCBhcHByb2FjaCBzYXZlcyBiYW5kd2lkdGgsIHJlZHVjZXMgcmVkdW5kYW5jeSBhbmQgc3RvcmFnZS4gWW91IGNhbiBhbHNvIGZpbmQgZGVsdGFzIG9uIHRoZSBkZXBsb3ltZW50IHByb2Nlc3Mgb2YgYW4gYXBwbGljYXRpb24gdGhhdCByZXF1aXJlcyBkYXRhYmFzZSBjaGFuZ2VzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImJhY2t1cFxcXCIsXFxuICAgIFxcXCJkYXRhYmFzZXNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWx0YV9lbmNvZGluZ1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0NyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTeW50YXhcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIHN5bnRheCBjb21lcyBmcm9tIEFuY2llbnQgR3JlZWs6IM+Dz43Ovc+EzrHOvs65z4IgXFxcXFxcXCJjb29yZGluYXRpb25cXFxcXFxcIiwgd2hpY2ggY29uc2lzdHMgb2Ygz4PPjc69IHN5biwgXFxcXFxcXCJ0b2dldGhlclxcXFxcXFwiLCBhbmQgz4TOrM6+zrnPgiB0w6F4aXMsIFxcXFxcXFwiYW4gb3JkZXJpbmdcXFxcXFxcIi4gSW4gY29tcHV0ZXIgc2NpZW5jZSwgdGhlIHN5bnRheCBvZiBhIGNvbXB1dGVyIGxhbmd1YWdlIGlzIHRoZSBzZXQgb2YgcnVsZXMgdGhhdCBkZWZpbmVzIHRoZSBjb21iaW5hdGlvbnMgb2Ygc3ltYm9scyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIGEgY29ycmVjdGx5IHN0cnVjdHVyZWQgZG9jdW1lbnQgb3IgZnJhZ21lbnQgaW4gdGhhdCBsYW5ndWFnZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bnRheF8ocHJvZ3JhbW1pbmdfbGFuZ3VhZ2VzKVxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TeW50YXhcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU2VtYW50aWNzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJTZW1hbnRpY3MgKGZyb20gQW5jaWVudCBHcmVlazogz4POt868zrHOvc+EzrnOus+Mz4Igc8STbWFudGlrw7NzLCBcXFxcXFxcInNpZ25pZmljYW50XFxcXFxcXCIpIGlzIHRoZSBzdHVkeSBvZiBtZWFuaW5nLiBJbiBjb21wdXRlciBzY2llbmNlLCB0aGUgdGVybSBzZW1hbnRpY3MgcmVmZXJzIHRvIHRoZSBtZWFuaW5nIG9mIGxhbmd1YWdlcywgYXMgb3Bwb3NlZCB0byB0aGVpciBmb3JtIChzeW50YXgpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2VtYW50aWNzXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ5LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIktpbG9cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkRlcml2ZWQgZnJvbSBhbmNpZW50IGdyZWVrIM+Hzq/Ou865zr/OuSAoY2hpbGlvaSApIFxcXFxcXFwib25lIHRob3VzYW5kXFxcXFxcXCIuIEluIGNvbXB1dGluZyBpdCByZWZlcnMgdG8gbXVsdGlwbHlpbmcgdGhlIHVuaXQgdG8gd2hpY2ggaXQgaXMgYXR0YWNoZWQgYnkgMl4xMCAoMTAyNCkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2tpbG8tXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0tpbG8tXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDUwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBhcmFnb25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDPgM6xz4HOsc66zr/Ovc6sz4kgKHBhcmFrb27DocWNLCBcXFxcXFxcIkkgc2hhcnBlbiwgd2hldFxcXFxcXFwiKS4gVGhlIEludGVsIFBhcmFnb24gaXMgYSBkaXNjb250aW51ZWQgc2VyaWVzIG9mIG1hc3NpdmVseSBwYXJhbGxlbCBzdXBlcmNvbXB1dGVycyB0aGF0IHdhcyBwcm9kdWNlZCBieSBJbnRlbCBpbiB0aGUgMTk5MHMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiLFxcbiAgICBcXFwic3VwZXJjb21wdXRlclxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9wYXJhZ29uXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0ludGVsX1BhcmFnb25cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiVGl0YW5cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOpM65z4TOrM69IChUaXTDoW4pLCBhIHJhY2Ugb2YgZ2lhbnQgZ29kcyBpbiBHcmVlayBteXRob2xvZ3kgdGhhdCBwcmVjZWRlZCBhbmQgd2FzIG92ZXJ0aHJvd24gYnkgdGhlIE9seW1waWFuIGdvZHMuIFRpdGFuIGlzIGEgc3VwZXJjb21wdXRlciBidWlsdCBieSBDcmF5IGF0IE9hayBSaWRnZSBOYXRpb25hbCBMYWJvcmF0b3J5IGZvciB1c2UgaW4gYSB2YXJpZXR5IG9mIHNjaWVuY2UgcHJvamVjdHMuIEl0IHVzZXMgZ3JhcGhpY3MgcHJvY2Vzc2luZyB1bml0cyAoR1BVcykgaW4gYWRkaXRpb24gdG8gY29udmVudGlvbmFsIGNlbnRyYWwgcHJvY2Vzc2luZyB1bml0cyAoQ1BVcykuIFRpdGFuIGlzIGFsc28gdGhlIG5hbWUgb2YgdGhlIHByb3RvdHlwZSBvZiB0aGUgQXRsYXMgMiBjb21wdXRlciBkZXZlbG9wZWQgYnkgRmVycmFudGkgYW5kIHRoZSBVbml2ZXJzaXR5IG9mIENhbWJyaWRnZSBNYXRoZW1hdGljYWwgTGFib3JhdG9yeSBpbiBDYW1icmlkZ2UsIEVuZ2xhbmQuIEZhY2Vib29rIGFsc28gZ2F2ZSB0aGUgbmFtZSBUaXRhbiB0byBpdCdzIG1vZGVybiBtZXNzYWdpbmcgc3lzdGVtIHVudmVpbGVkIGluIDIwMTAuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiLFxcbiAgICBcXFwic3VwZXJjb21wdXRlcnNcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvVGl0YW5cXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGl0YW5fKHN1cGVyY29tcHV0ZXIpXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RpdGFuXyhjb21wdXRlcilcXFwiLFxcbiAgICBcXFwiaHR0cDovL3d3dy5kaWdpdGFsdHJlbmRzLmNvbS9jb21wdXRpbmcvZmFjZWJvb2tzLXByb2plY3QtdGl0YW4taXMtdGhlLW1vZGVybi1tZXNzYWdpbmctc3lzdGVtLWJ1dC1pcy1ub3QtYW4tZS1tYWlsLWtpbGxlci9cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiT2N0ZXRcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gYW5jaWVudCBHcmVlayDhvYDOus+Ez44gKG9rdOG5kykuIEFuIG9jdGV0IGlzIGEgdW5pdCBvZiBkaWdpdGFsIGluZm9ybWF0aW9uIGluIGNvbXB1dGluZyBhbmQgdGVsZWNvbW11bmljYXRpb25zIHRoYXQgY29uc2lzdHMgb2YgZWlnaHQgYml0cy4gVGhlIHRlcm0gaXMgb2Z0ZW4gdXNlZCB3aGVuIHRoZSB0ZXJtIGJ5dGUgbWlnaHQgYmUgYW1iaWd1b3VzLCBhcyBoaXN0b3JpY2FsbHkgdGhlcmUgd2FzIG5vIHN0YW5kYXJkIGRlZmluaXRpb24gZm9yIHRoZSBzaXplIG9mIHRoZSBieXRlLiBPY3RldHMgYXJlIHVzZWQgaW4gdGhlIHJlcHJlc2VudGF0aW9uIG9mIEludGVybmV0IFByb3RvY29sIGNvbXB1dGVyIG5ldHdvcmsgYWRkcmVzc2VzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL29jdG9cXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT2N0ZXRfKGNvbXB1dGluZylcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTmV1cmFsXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzr3OteG/ps+Bzr/OvSAobmXDu3Jvbiwg4oCcYSBzaW5ldywgbmVydmXigJ0pICsgLWFsLiBJbiBjb21wdXRpbmcgaXQgbWVhbnMgc29tZXRoaW5nIHRoYXQgaXMgbW9kZWxsZWQgb24gdGhlIGFycmFuZ2VtZW50IG9mIG5ldXJvbnMgaW4gdGhlIGJyYWluLiBOZXVyYWwgbmV0d29yayBzb2Z0d2FyZSBpcyB1c2VkIHRvIHNpbXVsYXRlLCByZXNlYXJjaCwgZGV2ZWxvcCBhbmQgYXBwbHkgYXJ0aWZpY2lhbCBuZXVyYWwgbmV0d29ya3MsIGJpb2xvZ2ljYWwgbmV1cmFsIG5ldHdvcmtzIGFuZCwgaW4gc29tZSBjYXNlcywgYSB3aWRlciBhcnJheSBvZiBhZGFwdGl2ZSBzeXN0ZW1zLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImFydGlmaWNhbCBpbnRlbGxpZ2VuY2VcXFwiLFxcbiAgICBcXFwibmV0d29ya2luZ1xcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJtYWNoaW5lIGxlYXJuaW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL25ldXJhbFxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BcnRpZmljaWFsX25ldXJhbF9uZXR3b3JrXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlByb3RvY29sXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEJ5emFudGluZSBHcmVlayDPgM+Bz4nPhM+MzrrOv867zrvOv869ICjigJxmaXJzdCBzaGVldCBnbHVlZCBvbnRvIGEgbWFudXNjcmlwdOKAnSksIGZyb20gz4DPgeG/ts+Ezr/PgiAocHLDtHRvcywgXFxcXFxcXCJmaXJzdFxcXFxcXFwiKSArIM66z4zOu867zrEgKGvDs2xsYSwgXFxcXFxcXCJnbHVlXFxcXFxcXCIpLiBJbiB0ZWxlY29tbXVuaWNhdGlvbnMsIGEgY29tbXVuaWNhdGlvbnMgcHJvdG9jb2wgaXMgYSBzeXN0ZW0gb2YgcnVsZXMgdGhhdCBhbGxvdyB0d28gb3IgbW9yZSBlbnRpdGllcyBvZiBhIGNvbW11bmljYXRpb25zIHN5c3RlbSB0byB0cmFuc21pdCBpbmZvcm1hdGlvbiB2aWEgYW55IGtpbmQgb2YgdmFyaWF0aW9uIG9mIGEgcGh5c2ljYWwgcXVhbnRpdHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya2luZ1xcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9wcm90b2NvbFxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db21tdW5pY2F0aW9uc19wcm90b2NvbFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1NSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNZXRob2RcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOvM6tzrjOv860zr/PgiAobcOpdGhvZG9zLCBcXFxcXFxcInB1cnN1aXQgb2Yga25vd2xlZGdlLCBpbnZlc3RpZ2F0aW9uLCBtb2RlIG9mIHByb3NlY3V0aW5nIHN1Y2ggaW5xdWlyeSwgc3lzdGVtXFxcXFxcXCIpLiBJbiBvYmplY3Qgb3JpZW50ZWQgcHJvZ3JhbW1pbmcgaXQgZGVzY3JpYmVzIGEgc3Vicm91dGluZSBvciBmdW5jdGlvbiBiZWxvbmdpbmcgdG8gYSBjbGFzcyBvciBvYmplY3QuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvbWV0aG9kXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlRvcG9sb2d5XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgz4TPjM+Azr/PgiAodMOzcG9zLCBcXFxcXFxcInBsYWNlLCBsb2NhbGl0eVxcXFxcXFwiKSArIC0obylsb2d5IChcXFxcXFxcInN0dWR5IG9mXFxcXFxcXCIsIFxcXFxcXFwiYSBicmFuY2ggb2Yga25vd2xlZGdlXFxcXFxcXCIpLiBJbiBjb21wdXRpbmcgdG9wb2xvZ3kgbWVhbnMgdGhlIGFycmFuZ2VtZW50IG9mIG5vZGVzIGluIGEgY29tbXVuaWNhdGlvbnMgbmV0d29yay5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIixcXG4gICAgXFxcImhhcmR3YXJlXFxcIixcXG4gICAgXFxcImNvbW11bmljYXRpb25zXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL3RvcG9sb2d5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkRpYWdub3N0aWNzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEdyZWVrIGRpYWduxY1zdGlrb3Mg4oCYYWJsZSB0byBkaXN0aW5ndWlzaOKAmSwgZnJvbSBkaWFnaWduxY1za2VpbiDigJhkaXN0aW5ndWlzaOKAmS4gQW55IHRvb2wgb3IgdGVjaG5pcXVlLCB1c3VhbGx5IGEgc3BlY2lhbCBwaWVjZSBvZiBzb2Z0d2FyZSwgdXNlZCB0byBmaW5kIHRoZSByb290IG9mIGEgaGFyZHdhcmUgb3Igc29mdHdhcmUgcHJvYmxlbSBhbmQgYXNzaXN0IHdpdGggaXQncyBmaXhpbmcuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZGlhZ25vc2lzXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9kaWFnbm9zdGljI0VuZ2xpc2hcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSGV4YWRlY2ltYWxcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIGhleGFkZWNpbWFsIGlzIGNvbXBvc2VkIG9mIGhleGEtLCBkZXJpdmVkIGZyb20gdGhlIEdyZWVrIM6tzr4gKGhleCkgZm9yIHNpeCwgYW5kIC1kZWNpbWFsLCBkZXJpdmVkIGZyb20gdGhlIExhdGluIGZvciB0ZW50aC4gSW4gbWF0aGVtYXRpY3MgYW5kIGNvbXB1dGluZywgaGV4YWRlY2ltYWwgKGFsc28gYmFzZSAxNiwgb3IgaGV4KSBpcyBhIHBvc2l0aW9uYWwgbnVtZXJhbCBzeXN0ZW0gd2l0aCBhIHJhZGl4LCBvciBiYXNlLCBvZiAxNi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvaGV4YS0jRW5nbGlzaFxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IZXhhZGVjaW1hbFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1OSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJHaWdhXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzrPOr86zzrHPgiDigI4oZ8OtZ2FzLCDigJxnaWFudOKAnSkuIEluIGNvbXB1dGluZyBpdCBpcyBhIHByZWZpeCB0aGF0IG1lYW5zIG11bHRpcGx5aW5nIHRoZSB1bml0IHRvIHdoaWNoIGl0IGlzIGF0dGFjaGVkIGJ5IDJeMzAgb3IgMSwwNzMsNzQxLDgyNC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZ2lnYS1cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTWV0YSAocHJvZ3JhbW1pbmcsIGRhdGEsIGV0Yy4pXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJNZXRhIChmcm9tIHRoZSBHcmVlayBwcmVwb3NpdGlvbiBhbmQgcHJlZml4IG1ldGEtICjOvM61z4TOrC0pIG1lYW5pbmcgXFxcXFxcXCJhZnRlclxcXFxcXFwiLCBvciBcXFxcXFxcImJleW9uZFxcXFxcXFwiKSBpcyBhIHByZWZpeCB1c2VkIGluIEVuZ2xpc2ggdG8gaW5kaWNhdGUgYSBjb25jZXB0IHdoaWNoIGlzIGFuIGFic3RyYWN0aW9uIGZyb20gYW5vdGhlciBjb25jZXB0LCB1c2VkIHRvIGNvbXBsZXRlIG9yIGFkZCB0byB0aGUgbGF0dGVyLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01ldGFcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTGFtYmRhIChmdW5jdGlvbilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkxhbWJkYSBjYWxjdWx1cyAoYWxzbyB3cml0dGVuIGFzIM67LWNhbGN1bHVzKSBpcyBhIGZvcm1hbCBzeXN0ZW0gaW4gbWF0aGVtYXRpY2FsIGxvZ2ljIGZvciBleHByZXNzaW5nIGNvbXB1dGF0aW9uIGJhc2VkIG9uIGZ1bmN0aW9uIGFic3RyYWN0aW9uIGFuZCBhcHBsaWNhdGlvbiB1c2luZyB2YXJpYWJsZSBiaW5kaW5nIGFuZCBzdWJzdGl0dXRpb24uIEl0IHdhcyBmaXJzdCBpbnRyb2R1Y2VkIGJ5IG1hdGhlbWF0aWNpYW4gQWxvbnpvIENodXJjaCBpbiB0aGUgMTkzMHMgYXMgcGFydCBvZiBhbiBpbnZlc3RpZ2F0aW9uIGludG8gdGhlIGZvdW5kYXRpb25zIG9mIG1hdGhlbWF0aWNzLiBMYW1iZGEgY2FsY3VsdXMgaXMgYSB1bml2ZXJzYWwgbW9kZWwgb2YgY29tcHV0YXRpb24gZXF1aXZhbGVudCB0byBhIFR1cmluZyBtYWNoaW5lIChDaHVyY2gtVHVyaW5nIHRoZXNpcywgMTkzNykuIEl0cyBuYW1lc2FrZSwgR3JlZWsgbGV0dGVyIGxhbWJkYSAozrspLCBpcyB1c2VkIGluIGxhbWJkYSB0ZXJtcyAoYWxzbyBjYWxsZWQgbGFtYmRhIGV4cHJlc3Npb25zKSB0byBkZW5vdGUgYmluZGluZyBhIHZhcmlhYmxlIGluIGEgZnVuY3Rpb24uIExhbWJkYSBjYWxjdWx1cyBtYXkgYmUgdHlwZWQgYW5kIHVudHlwZWQuIEluIHR5cGVkIGxhbWJkYSBjYWxjdWx1cyBmdW5jdGlvbnMgY2FuIGJlIGFwcGxpZWQgb25seSBpZiB0aGV5IGFyZSBjYXBhYmxlIG9mIGFjY2VwdGluZyB0aGUgZ2l2ZW4gaW5wdXQncyBcXFxcXFxcInR5cGVcXFxcXFxcIiBvZiBkYXRhLiBMYW1iZGEgY2FsY3VsdXMgaGFzIGFwcGxpY2F0aW9ucyBpbiBtYW55IGRpZmZlcmVudCBhcmVhcyBpbiBtYXRoZW1hdGljcywgcGhpbG9zb3BoeSwgbGluZ3Vpc3RpY3MgYW5kIGNvbXB1dGVyIHNjaWVuY2UuIExhbWJkYSBjYWxjdWx1cyBoYXMgcGxheWVkIGFuIGltcG9ydGFudCByb2xlIGluIHRoZSBkZXZlbG9wbWVudCBvZiB0aGUgdGhlb3J5IG9mIHByb2dyYW1taW5nIGxhbmd1YWdlcy4gRnVuY3Rpb25hbCBwcm9ncmFtbWluZyBsYW5ndWFnZXMgaW1wbGVtZW50IHRoZSBsYW1iZGEgY2FsY3VsdXMuIExhbWJkYSBjYWxjdWx1cyBhbHNvIGlzIGEgY3VycmVudCByZXNlYXJjaCB0b3BpYyBpbiBDYXRlZ29yeSB0aGVvcnkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGFtYmRhX2NhbGN1bHVzXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDYyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1lZ2FcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOvM6tzrPOsc+CIOKAjihtw6lnYXMsIOKAnGdyZWF0LCBsYXJnZSwgbWlnaHR54oCdKS4gSW4gY29tcHV0aW5nLCBtZWdhIG1heSBzb21ldGltZXMgZGVub3RlIDEsMDQ4LDU3NiAoMl4yMCkgb2YgaW5mb3JtYXRpb24gdW5pdHMgKGV4YW1wbGU6IGEgbWVnYWJ5dGUsIGEgbWVnYXdvcmQpLCBidXQgZGVub3RlcyAxMDAwMDAwICgxMF42KSB1bml0cyBvZiBvdGhlciBxdWFudGl0aWVzLCBmb3IgZXhhbXBsZSwgdHJhbnNmZXIgcmF0ZXM6IDFtZWdhYml0L3MgPSAxMDAwMDAwYml0L3MuIFRoZSBwcmVmaXggbWViaSBoYXMgYmVlbiBzdWdnZXN0ZWQgYXMgYSBwcmVmaXggZm9yIDJeMjAgdG8gYXZvaWQgYW1iaWd1aXR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9tZWdhLVxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NZWdhLVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2MyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBbmFsb2dcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDhvIDOvc6szrvOv86zzr/PgiDigI4oYW7DoWxvZ29zLCDigJxwcm9wb3J0aW9uYXRl4oCdKS5BIGRldmljZSBvciBzeXN0ZW0gaW4gd2hpY2ggdGhlIHZhbHVlIG9mIGEgZGF0YSBpdGVtIChzdWNoIGFzIHRpbWUpIGlzIHJlcHJlc2VudGVkIGJ5IGEgY29udGludW91cyhseSkgdmFyaWFibGUgcGh5c2ljYWwgcXVhbnRpdHkgdGhhdCBjYW4gYmUgbWVhc3VyZWQgKHN1Y2ggYXMgdGhlIHNoYWRvdyBvZiBhIHN1bmRpYWwpXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwidGVjaG5vbG9neVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9hbmFsb2dcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRHluYW1pY1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiZnJvbSBBbmNpZW50IEdyZWVrIM60z4XOvc6xzrzOuc66z4zPgiDigI4oZHVuYW1pa8Ozcywg4oCccG93ZXJmdWzigJ0pLkluIGNvbXB1dGluZyBpdCBtZWFucyBzb21ldGhpbmcgdGhhdCBpcyBoYXBwZW5pbmcgYXQgcnVudGltZSBpbnN0ZWFkIG9mIGJlaW5nIHByZWRldGVybWluZWQgYXQgY29tcGlsZSB0aW1lLkZvciBpbnN0YW5jZTogZHluYW1pYyBhbGxvY2F0aW9uLCBkeW5hbWljIElQIGFkZHJlc3NlcywgdGhlIGR5bmFtaWMgcmVzaXppbmcgb2YgYW4gYXJyYXlcXFxcblxcXFxuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2R5bmFtaWNcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTWFjcm9cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOvM6xzrrPgc+Mz4Ig4oCOKG1ha3LDs3MsIOKAnGxvbmfigJ0pLiBBIGNvbXBhcmF0aXZlbHkgaHVtYW4tZnJpZW5kbHkgYWJicmV2aWF0aW9uIG9mIGNvbXBsaWNhdGVkIGlucHV0IHRvIGEgY29tcHV0ZXIgcHJvZ3JhbS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvbWFjcm9cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRXRoZXJuZXRcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIEV0aGVybmV0IGlzIGEgY29tcG91bmQgd29yZCBmb3JtZWQgYnkgam9pbmluZyAnRXRoZXInIGFuZCAnTmV0Jy4gIFRoZSB3b3JkICdFdGhlcicgaXMgYmFzZWQgb24gQW5jaWVudCBHcmVlayB3b3JkIM6x4bywzrjOrs+BIOKAjihhaXRo4biXciwg4oCcdXBwZXIgYWly4oCdKS5JbiBjb21wdXRpbmcgaXQgcmVmZXJzIHRvIGEgc2V0IG9mIG5ldHdvcmsgY2FibGluZyBhbmQgbmV0d29yayBhY2Nlc3MgKENTTUEvQ0QpIHByb3RvY29sIHN0YW5kYXJkcyBmb3IgYnVzIHRvcG9sb2d5IGNvbXB1dGVyIG5ldHdvcmtzIGludmVudGVkIGJ5IFhlcm94IGJ1dCBub3cgY29udHJvbGxlZCBieSB0aGUgODAyLjMgc3ViY29tbWl0dGVlIG9mIHRoZSBJRUVFLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm5ldHdvcmtzXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL0V0aGVybmV0XFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9ldGhlclxcXCJcXG4gIF1cXG59XVxcblwiXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxoZWFkZXI+XFxuXFx0PGRpdiBjbGFzcz1cXFwiY29udGFpbmVyXFxcIj5cXG5cXHRcXHQ8aDE+PCU9IHRpdGxlICU+PC9oMT5cXG5cXHRcXHQ8dWwgY2xhc3M9XFxcInNvY2lhbC1saW5rc1xcXCI+XFxuXFx0XFx0XFx0PGxpPlxcblxcdFxcdFxcdFxcdDxhIGNsYXNzPVxcXCJpb24tc29jaWFsLXR3aXR0ZXJcXFwiXFxuXFx0XFx0XFx0XFx0XFx0aHJlZj1cXFwiaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/XFxuXFx0XFx0XFx0XFx0XFx0dGV4dD1EaWQlMjB5b3UlMjBrbm93JTIwdGhhdCUyMCUyMjwlPSB0aXRsZSAlPiUyMiUyMGlzJTIwYSUyMGdyZWVrJTIwd29yZCUzRiUyMCZhbXA7XFxuXFx0XFx0XFx0XFx0XFx0dXJsPWh0dHAlM0ElMkYlMkZncmVla2ludGVjaC5jb20lMkY8JT0gaWQgJT4lMkY8JT0gdXJsRnJpZW5kbHlUaXRsZSAlPiZhbXA7XFxuXFx0XFx0XFx0XFx0XFx0aGFzaHRhZ3M9Z3JlZWtpbnRlY2hcXFwiXFxuXFx0XFx0XFx0XFx0XFx0ZGF0YS1jb3VudD1cXFwibm9uZVxcXCI+XFxuXFx0XFx0XFx0XFx0PC9hPlxcblxcdFxcdFxcdDwvbGk+XFxuXFx0XFx0XFx0PGxpPlxcblxcdFxcdFxcdFxcdDxhIGNsYXNzPVxcXCJpb24tc29jaWFsLWZhY2Vib29rXFxcIlxcblxcdFxcdFxcdFxcdFxcdGhyZWY9XFxcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocFxcblxcdFxcdFxcdFxcdFxcdD91PWh0dHA6Ly9ncmVla2ludGVjaC5jb20vI2VudHJ5LzwlPSBpZCAlPi88JT0gdXJsRnJpZW5kbHlUaXRsZSAlPlxcXCI+XFxuXFx0XFx0XFx0XFx0PC9hPlxcblxcdFxcdFxcdDwvbGk+XFxuXFx0XFx0PC91bD5cXG5cXHQ8L2Rpdj5cXG48L2hlYWRlcj5cXG48cD48JT0gZGVzY3JpcHRpb24gJT48L3A+XFxuPGZvb3Rlcj5cXG5cXHQ8cCBjbGFzcz1cXFwidGFncy1jb3B5XFxcIj5UYWdzOiA8L3A+XFxuXFx0PHVsIGNsYXNzPVxcXCJ0YWdzXFxcIj5cXG5cXHRcXHQ8JSBfLmVhY2goY2F0ZWdvcmllcywgZnVuY3Rpb24oY2F0ZWdvcnkpIHsgJT5cXG5cXHRcXHRcXHQ8bGk+PCU9IGNhdGVnb3J5ICU+PC9saT5cXG5cXHRcXHQ8JSB9KSAlPlxcblxcdDwvdWw+XFxuXFxuXFx0PCUgaWYgKCFfLmlzRW1wdHkocmVmZXJlbmNlcykpIHsgJT5cXG5cXHRcXHQ8cCBjbGFzcz1cXFwicmVmZXJlbmNlcy1jb3B5XFxcIj5SZWZlcmVuY2VzOiA8L3A+XFxuXFx0XFx0PHVsIGNsYXNzPVxcXCJyZWZlcmVuY2VzXFxcIj5cXG5cXHRcXHRcXHQ8JSBfLmVhY2gocmVmZXJlbmNlcywgZnVuY3Rpb24ocmVmZXJlbmNlKSB7ICU+XFxuXFx0XFx0XFx0XFx0PGxpPjxhIGhyZWY9XFxcIjwlPSByZWZlcmVuY2UgJT5cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj48JT0gcmVmZXJlbmNlICU+PC9hPjwvbGk+XFxuXFx0XFx0XFx0PCUgfSkgJT5cXG5cXHRcXHQ8L3VsPlxcblxcdDwlIH0gJT5cXG48L2Zvb3Rlcj5cIlxuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHVuaXF1ZVJhbmRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJyKSB7XG5cdFx0dmFyIHJhbmQgPSB1bmlxdWVSYW5kb20oMCwgYXJyLmxlbmd0aCAtIDEpO1xuXHRcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIGFycltyYW5kKCldO1xuXHRcdH07XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG5cdFx0dmFyIHByZXY7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHJhbmQoKSB7XG5cdFx0XHR2YXIgbnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKTtcblx0XHRcdHJldHVybiBwcmV2ID0gbnVtID09PSBwcmV2ICYmIG1pbiAhPT0gbWF4ID8gcmFuZCgpIDogbnVtO1xuXHRcdH07XG5cdH07XG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogYnVuZGxlLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiZGlzdC9cIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGYzZmU4MmQ4YTg3ZWIwNjFlOTEwXG4gKiovIiwicmVxdWlyZSgnLi4vc2Nzcy9tYWluLnNjc3MnKTtcbmltcG9ydCBCYWNrYm9uZSBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQgQXBwUm91dGVyIGZyb20gJy4vcm91dGVyL0FwcFJvdXRlcic7XG5cbm5ldyBBcHBSb3V0ZXIoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbkJhY2tib25lLmhpc3Rvcnkuc3RhcnQoKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vYXBwLmpzXG4gKiovIiwiLy8gICAgIEJhY2tib25lLmpzIDEuMy4zXG5cbi8vICAgICAoYykgMjAxMC0yMDE2IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4vLyAgICAgQmFja2JvbmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyAgICAgRm9yIGFsbCBkZXRhaWxzIGFuZCBkb2N1bWVudGF0aW9uOlxuLy8gICAgIGh0dHA6Ly9iYWNrYm9uZWpzLm9yZ1xuXG4oZnVuY3Rpb24oZmFjdG9yeSkge1xuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIChgc2VsZmApIGluIHRoZSBicm93c2VyLCBvciBgZ2xvYmFsYCBvbiB0aGUgc2VydmVyLlxuICAvLyBXZSB1c2UgYHNlbGZgIGluc3RlYWQgb2YgYHdpbmRvd2AgZm9yIGBXZWJXb3JrZXJgIHN1cHBvcnQuXG4gIHZhciByb290ID0gKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZiAmJiBzZWxmKSB8fFxuICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsICYmIGdsb2JhbCk7XG5cbiAgLy8gU2V0IHVwIEJhY2tib25lIGFwcHJvcHJpYXRlbHkgZm9yIHRoZSBlbnZpcm9ubWVudC4gU3RhcnQgd2l0aCBBTUQuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWyd1bmRlcnNjb3JlJywgJ2pxdWVyeScsICdleHBvcnRzJ10sIGZ1bmN0aW9uKF8sICQsIGV4cG9ydHMpIHtcbiAgICAgIC8vIEV4cG9ydCBnbG9iYWwgZXZlbiBpbiBBTUQgY2FzZSBpbiBjYXNlIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCB3aXRoXG4gICAgICAvLyBvdGhlcnMgdGhhdCBtYXkgc3RpbGwgZXhwZWN0IGEgZ2xvYmFsIEJhY2tib25lLlxuICAgICAgcm9vdC5CYWNrYm9uZSA9IGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXywgJCk7XG4gICAgfSk7XG5cbiAgLy8gTmV4dCBmb3IgTm9kZS5qcyBvciBDb21tb25KUy4galF1ZXJ5IG1heSBub3QgYmUgbmVlZGVkIGFzIGEgbW9kdWxlLlxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBfID0gcmVxdWlyZSgndW5kZXJzY29yZScpLCAkO1xuICAgIHRyeSB7ICQgPSByZXF1aXJlKCdqcXVlcnknKTsgfSBjYXRjaCAoZSkge31cbiAgICBmYWN0b3J5KHJvb3QsIGV4cG9ydHMsIF8sICQpO1xuXG4gIC8vIEZpbmFsbHksIGFzIGEgYnJvd3NlciBnbG9iYWwuXG4gIH0gZWxzZSB7XG4gICAgcm9vdC5CYWNrYm9uZSA9IGZhY3Rvcnkocm9vdCwge30sIHJvb3QuXywgKHJvb3QualF1ZXJ5IHx8IHJvb3QuWmVwdG8gfHwgcm9vdC5lbmRlciB8fCByb290LiQpKTtcbiAgfVxuXG59KShmdW5jdGlvbihyb290LCBCYWNrYm9uZSwgXywgJCkge1xuXG4gIC8vIEluaXRpYWwgU2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAvLyByZXN0b3JlZCBsYXRlciBvbiwgaWYgYG5vQ29uZmxpY3RgIGlzIHVzZWQuXG4gIHZhciBwcmV2aW91c0JhY2tib25lID0gcm9vdC5CYWNrYm9uZTtcblxuICAvLyBDcmVhdGUgYSBsb2NhbCByZWZlcmVuY2UgdG8gYSBjb21tb24gYXJyYXkgbWV0aG9kIHdlJ2xsIHdhbnQgdG8gdXNlIGxhdGVyLlxuICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uIG9mIHRoZSBsaWJyYXJ5LiBLZWVwIGluIHN5bmMgd2l0aCBgcGFja2FnZS5qc29uYC5cbiAgQmFja2JvbmUuVkVSU0lPTiA9ICcxLjMuMyc7XG5cbiAgLy8gRm9yIEJhY2tib25lJ3MgcHVycG9zZXMsIGpRdWVyeSwgWmVwdG8sIEVuZGVyLCBvciBNeSBMaWJyYXJ5IChraWRkaW5nKSBvd25zXG4gIC8vIHRoZSBgJGAgdmFyaWFibGUuXG4gIEJhY2tib25lLiQgPSAkO1xuXG4gIC8vIFJ1bnMgQmFja2JvbmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYEJhY2tib25lYCB2YXJpYWJsZVxuICAvLyB0byBpdHMgcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhpcyBCYWNrYm9uZSBvYmplY3QuXG4gIEJhY2tib25lLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290LkJhY2tib25lID0gcHJldmlvdXNCYWNrYm9uZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUdXJuIG9uIGBlbXVsYXRlSFRUUGAgdG8gc3VwcG9ydCBsZWdhY3kgSFRUUCBzZXJ2ZXJzLiBTZXR0aW5nIHRoaXMgb3B0aW9uXG4gIC8vIHdpbGwgZmFrZSBgXCJQQVRDSFwiYCwgYFwiUFVUXCJgIGFuZCBgXCJERUxFVEVcImAgcmVxdWVzdHMgdmlhIHRoZSBgX21ldGhvZGAgcGFyYW1ldGVyIGFuZFxuICAvLyBzZXQgYSBgWC1IdHRwLU1ldGhvZC1PdmVycmlkZWAgaGVhZGVyLlxuICBCYWNrYm9uZS5lbXVsYXRlSFRUUCA9IGZhbHNlO1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVKU09OYCB0byBzdXBwb3J0IGxlZ2FjeSBzZXJ2ZXJzIHRoYXQgY2FuJ3QgZGVhbCB3aXRoIGRpcmVjdFxuICAvLyBgYXBwbGljYXRpb24vanNvbmAgcmVxdWVzdHMgLi4uIHRoaXMgd2lsbCBlbmNvZGUgdGhlIGJvZHkgYXNcbiAgLy8gYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGAgaW5zdGVhZCBhbmQgd2lsbCBzZW5kIHRoZSBtb2RlbCBpbiBhXG4gIC8vIGZvcm0gcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgQmFja2JvbmUuZW11bGF0ZUpTT04gPSBmYWxzZTtcblxuICAvLyBQcm94eSBCYWNrYm9uZSBjbGFzcyBtZXRob2RzIHRvIFVuZGVyc2NvcmUgZnVuY3Rpb25zLCB3cmFwcGluZyB0aGUgbW9kZWwnc1xuICAvLyBgYXR0cmlidXRlc2Agb2JqZWN0IG9yIGNvbGxlY3Rpb24ncyBgbW9kZWxzYCBhcnJheSBiZWhpbmQgdGhlIHNjZW5lcy5cbiAgLy9cbiAgLy8gY29sbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24obW9kZWwpIHsgcmV0dXJuIG1vZGVsLmdldCgnYWdlJykgPiAxMCB9KTtcbiAgLy8gY29sbGVjdGlvbi5lYWNoKHRoaXMuYWRkVmlldyk7XG4gIC8vXG4gIC8vIGBGdW5jdGlvbiNhcHBseWAgY2FuIGJlIHNsb3cgc28gd2UgdXNlIHRoZSBtZXRob2QncyBhcmcgY291bnQsIGlmIHdlIGtub3cgaXQuXG4gIHZhciBhZGRNZXRob2QgPSBmdW5jdGlvbihsZW5ndGgsIG1ldGhvZCwgYXR0cmlidXRlKSB7XG4gICAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIHZhbHVlKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSwgY2IoaXRlcmF0ZWUsIHRoaXMpLCBjb250ZXh0KTtcbiAgICAgIH07XG4gICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihpdGVyYXRlZSwgZGVmYXVsdFZhbCwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSwgY2IoaXRlcmF0ZWUsIHRoaXMpLCBkZWZhdWx0VmFsLCBjb250ZXh0KTtcbiAgICAgIH07XG4gICAgICBkZWZhdWx0OiByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICBhcmdzLnVuc2hpZnQodGhpc1thdHRyaWJ1dGVdKTtcbiAgICAgICAgcmV0dXJuIF9bbWV0aG9kXS5hcHBseShfLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICB2YXIgYWRkVW5kZXJzY29yZU1ldGhvZHMgPSBmdW5jdGlvbihDbGFzcywgbWV0aG9kcywgYXR0cmlidXRlKSB7XG4gICAgXy5lYWNoKG1ldGhvZHMsIGZ1bmN0aW9uKGxlbmd0aCwgbWV0aG9kKSB7XG4gICAgICBpZiAoX1ttZXRob2RdKSBDbGFzcy5wcm90b3R5cGVbbWV0aG9kXSA9IGFkZE1ldGhvZChsZW5ndGgsIG1ldGhvZCwgYXR0cmlidXRlKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBTdXBwb3J0IGBjb2xsZWN0aW9uLnNvcnRCeSgnYXR0cicpYCBhbmQgYGNvbGxlY3Rpb24uZmluZFdoZXJlKHtpZDogMX0pYC5cbiAgdmFyIGNiID0gZnVuY3Rpb24oaXRlcmF0ZWUsIGluc3RhbmNlKSB7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHJldHVybiBpdGVyYXRlZTtcbiAgICBpZiAoXy5pc09iamVjdChpdGVyYXRlZSkgJiYgIWluc3RhbmNlLl9pc01vZGVsKGl0ZXJhdGVlKSkgcmV0dXJuIG1vZGVsTWF0Y2hlcihpdGVyYXRlZSk7XG4gICAgaWYgKF8uaXNTdHJpbmcoaXRlcmF0ZWUpKSByZXR1cm4gZnVuY3Rpb24obW9kZWwpIHsgcmV0dXJuIG1vZGVsLmdldChpdGVyYXRlZSk7IH07XG4gICAgcmV0dXJuIGl0ZXJhdGVlO1xuICB9O1xuICB2YXIgbW9kZWxNYXRjaGVyID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICB2YXIgbWF0Y2hlciA9IF8ubWF0Y2hlcyhhdHRycyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICByZXR1cm4gbWF0Y2hlcihtb2RlbC5hdHRyaWJ1dGVzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEJhY2tib25lLkV2ZW50c1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBBIG1vZHVsZSB0aGF0IGNhbiBiZSBtaXhlZCBpbiB0byAqYW55IG9iamVjdCogaW4gb3JkZXIgdG8gcHJvdmlkZSBpdCB3aXRoXG4gIC8vIGEgY3VzdG9tIGV2ZW50IGNoYW5uZWwuIFlvdSBtYXkgYmluZCBhIGNhbGxiYWNrIHRvIGFuIGV2ZW50IHdpdGggYG9uYCBvclxuICAvLyByZW1vdmUgd2l0aCBgb2ZmYDsgYHRyaWdnZXJgLWluZyBhbiBldmVudCBmaXJlcyBhbGwgY2FsbGJhY2tzIGluXG4gIC8vIHN1Y2Nlc3Npb24uXG4gIC8vXG4gIC8vICAgICB2YXIgb2JqZWN0ID0ge307XG4gIC8vICAgICBfLmV4dGVuZChvYmplY3QsIEJhY2tib25lLkV2ZW50cyk7XG4gIC8vICAgICBvYmplY3Qub24oJ2V4cGFuZCcsIGZ1bmN0aW9uKCl7IGFsZXJ0KCdleHBhbmRlZCcpOyB9KTtcbiAgLy8gICAgIG9iamVjdC50cmlnZ2VyKCdleHBhbmQnKTtcbiAgLy9cbiAgdmFyIEV2ZW50cyA9IEJhY2tib25lLkV2ZW50cyA9IHt9O1xuXG4gIC8vIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHNwbGl0IGV2ZW50IHN0cmluZ3MuXG4gIHZhciBldmVudFNwbGl0dGVyID0gL1xccysvO1xuXG4gIC8vIEl0ZXJhdGVzIG92ZXIgdGhlIHN0YW5kYXJkIGBldmVudCwgY2FsbGJhY2tgIChhcyB3ZWxsIGFzIHRoZSBmYW5jeSBtdWx0aXBsZVxuICAvLyBzcGFjZS1zZXBhcmF0ZWQgZXZlbnRzIGBcImNoYW5nZSBibHVyXCIsIGNhbGxiYWNrYCBhbmQgalF1ZXJ5LXN0eWxlIGV2ZW50XG4gIC8vIG1hcHMgYHtldmVudDogY2FsbGJhY2t9YCkuXG4gIHZhciBldmVudHNBcGkgPSBmdW5jdGlvbihpdGVyYXRlZSwgZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0cykge1xuICAgIHZhciBpID0gMCwgbmFtZXM7XG4gICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBIYW5kbGUgZXZlbnQgbWFwcy5cbiAgICAgIGlmIChjYWxsYmFjayAhPT0gdm9pZCAwICYmICdjb250ZXh0JyBpbiBvcHRzICYmIG9wdHMuY29udGV4dCA9PT0gdm9pZCAwKSBvcHRzLmNvbnRleHQgPSBjYWxsYmFjaztcbiAgICAgIGZvciAobmFtZXMgPSBfLmtleXMobmFtZSk7IGkgPCBuYW1lcy5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgZXZlbnRzID0gZXZlbnRzQXBpKGl0ZXJhdGVlLCBldmVudHMsIG5hbWVzW2ldLCBuYW1lW25hbWVzW2ldXSwgb3B0cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChuYW1lICYmIGV2ZW50U3BsaXR0ZXIudGVzdChuYW1lKSkge1xuICAgICAgLy8gSGFuZGxlIHNwYWNlLXNlcGFyYXRlZCBldmVudCBuYW1lcyBieSBkZWxlZ2F0aW5nIHRoZW0gaW5kaXZpZHVhbGx5LlxuICAgICAgZm9yIChuYW1lcyA9IG5hbWUuc3BsaXQoZXZlbnRTcGxpdHRlcik7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBldmVudHMgPSBpdGVyYXRlZShldmVudHMsIG5hbWVzW2ldLCBjYWxsYmFjaywgb3B0cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZpbmFsbHksIHN0YW5kYXJkIGV2ZW50cy5cbiAgICAgIGV2ZW50cyA9IGl0ZXJhdGVlKGV2ZW50cywgbmFtZSwgY2FsbGJhY2ssIG9wdHMpO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnRzO1xuICB9O1xuXG4gIC8vIEJpbmQgYW4gZXZlbnQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLiBQYXNzaW5nIGBcImFsbFwiYCB3aWxsIGJpbmRcbiAgLy8gdGhlIGNhbGxiYWNrIHRvIGFsbCBldmVudHMgZmlyZWQuXG4gIEV2ZW50cy5vbiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGludGVybmFsT24odGhpcywgbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEd1YXJkIHRoZSBgbGlzdGVuaW5nYCBhcmd1bWVudCBmcm9tIHRoZSBwdWJsaWMgQVBJLlxuICB2YXIgaW50ZXJuYWxPbiA9IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQsIGxpc3RlbmluZykge1xuICAgIG9iai5fZXZlbnRzID0gZXZlbnRzQXBpKG9uQXBpLCBvYmouX2V2ZW50cyB8fCB7fSwgbmFtZSwgY2FsbGJhY2ssIHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICBjdHg6IG9iaixcbiAgICAgIGxpc3RlbmluZzogbGlzdGVuaW5nXG4gICAgfSk7XG5cbiAgICBpZiAobGlzdGVuaW5nKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzID0gb2JqLl9saXN0ZW5lcnMgfHwgKG9iai5fbGlzdGVuZXJzID0ge30pO1xuICAgICAgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF0gPSBsaXN0ZW5pbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBJbnZlcnNpb24tb2YtY29udHJvbCB2ZXJzaW9ucyBvZiBgb25gLiBUZWxsICp0aGlzKiBvYmplY3QgdG8gbGlzdGVuIHRvXG4gIC8vIGFuIGV2ZW50IGluIGFub3RoZXIgb2JqZWN0Li4uIGtlZXBpbmcgdHJhY2sgb2Ygd2hhdCBpdCdzIGxpc3RlbmluZyB0b1xuICAvLyBmb3IgZWFzaWVyIHVuYmluZGluZyBsYXRlci5cbiAgRXZlbnRzLmxpc3RlblRvID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuICAgIGlmICghb2JqKSByZXR1cm4gdGhpcztcbiAgICB2YXIgaWQgPSBvYmouX2xpc3RlbklkIHx8IChvYmouX2xpc3RlbklkID0gXy51bmlxdWVJZCgnbCcpKTtcbiAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbyB8fCAodGhpcy5fbGlzdGVuaW5nVG8gPSB7fSk7XG4gICAgdmFyIGxpc3RlbmluZyA9IGxpc3RlbmluZ1RvW2lkXTtcblxuICAgIC8vIFRoaXMgb2JqZWN0IGlzIG5vdCBsaXN0ZW5pbmcgdG8gYW55IG90aGVyIGV2ZW50cyBvbiBgb2JqYCB5ZXQuXG4gICAgLy8gU2V0dXAgdGhlIG5lY2Vzc2FyeSByZWZlcmVuY2VzIHRvIHRyYWNrIHRoZSBsaXN0ZW5pbmcgY2FsbGJhY2tzLlxuICAgIGlmICghbGlzdGVuaW5nKSB7XG4gICAgICB2YXIgdGhpc0lkID0gdGhpcy5fbGlzdGVuSWQgfHwgKHRoaXMuX2xpc3RlbklkID0gXy51bmlxdWVJZCgnbCcpKTtcbiAgICAgIGxpc3RlbmluZyA9IGxpc3RlbmluZ1RvW2lkXSA9IHtvYmo6IG9iaiwgb2JqSWQ6IGlkLCBpZDogdGhpc0lkLCBsaXN0ZW5pbmdUbzogbGlzdGVuaW5nVG8sIGNvdW50OiAwfTtcbiAgICB9XG5cbiAgICAvLyBCaW5kIGNhbGxiYWNrcyBvbiBvYmosIGFuZCBrZWVwIHRyYWNrIG9mIHRoZW0gb24gbGlzdGVuaW5nLlxuICAgIGludGVybmFsT24ob2JqLCBuYW1lLCBjYWxsYmFjaywgdGhpcywgbGlzdGVuaW5nKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUaGUgcmVkdWNpbmcgQVBJIHRoYXQgYWRkcyBhIGNhbGxiYWNrIHRvIHRoZSBgZXZlbnRzYCBvYmplY3QuXG4gIHZhciBvbkFwaSA9IGZ1bmN0aW9uKGV2ZW50cywgbmFtZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXSB8fCAoZXZlbnRzW25hbWVdID0gW10pO1xuICAgICAgdmFyIGNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQsIGN0eCA9IG9wdGlvbnMuY3R4LCBsaXN0ZW5pbmcgPSBvcHRpb25zLmxpc3RlbmluZztcbiAgICAgIGlmIChsaXN0ZW5pbmcpIGxpc3RlbmluZy5jb3VudCsrO1xuXG4gICAgICBoYW5kbGVycy5wdXNoKHtjYWxsYmFjazogY2FsbGJhY2ssIGNvbnRleHQ6IGNvbnRleHQsIGN0eDogY29udGV4dCB8fCBjdHgsIGxpc3RlbmluZzogbGlzdGVuaW5nfSk7XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH07XG5cbiAgLy8gUmVtb3ZlIG9uZSBvciBtYW55IGNhbGxiYWNrcy4gSWYgYGNvbnRleHRgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gIC8vIGNhbGxiYWNrcyB3aXRoIHRoYXQgZnVuY3Rpb24uIElmIGBjYWxsYmFja2AgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcbiAgLy8gY2FsbGJhY2tzIGZvciB0aGUgZXZlbnQuIElmIGBuYW1lYCBpcyBudWxsLCByZW1vdmVzIGFsbCBib3VuZFxuICAvLyBjYWxsYmFja3MgZm9yIGFsbCBldmVudHMuXG4gIEV2ZW50cy5vZmYgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcbiAgICB0aGlzLl9ldmVudHMgPSBldmVudHNBcGkob2ZmQXBpLCB0aGlzLl9ldmVudHMsIG5hbWUsIGNhbGxiYWNrLCB7XG4gICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgbGlzdGVuZXJzOiB0aGlzLl9saXN0ZW5lcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUZWxsIHRoaXMgb2JqZWN0IHRvIHN0b3AgbGlzdGVuaW5nIHRvIGVpdGhlciBzcGVjaWZpYyBldmVudHMgLi4uIG9yXG4gIC8vIHRvIGV2ZXJ5IG9iamVjdCBpdCdzIGN1cnJlbnRseSBsaXN0ZW5pbmcgdG8uXG4gIEV2ZW50cy5zdG9wTGlzdGVuaW5nID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvO1xuICAgIGlmICghbGlzdGVuaW5nVG8pIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIGlkcyA9IG9iaiA/IFtvYmouX2xpc3RlbklkXSA6IF8ua2V5cyhsaXN0ZW5pbmdUbyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpc3RlbmluZyA9IGxpc3RlbmluZ1RvW2lkc1tpXV07XG5cbiAgICAgIC8vIElmIGxpc3RlbmluZyBkb2Vzbid0IGV4aXN0LCB0aGlzIG9iamVjdCBpcyBub3QgY3VycmVudGx5XG4gICAgICAvLyBsaXN0ZW5pbmcgdG8gb2JqLiBCcmVhayBvdXQgZWFybHkuXG4gICAgICBpZiAoIWxpc3RlbmluZykgYnJlYWs7XG5cbiAgICAgIGxpc3RlbmluZy5vYmoub2ZmKG5hbWUsIGNhbGxiYWNrLCB0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUaGUgcmVkdWNpbmcgQVBJIHRoYXQgcmVtb3ZlcyBhIGNhbGxiYWNrIGZyb20gdGhlIGBldmVudHNgIG9iamVjdC5cbiAgdmFyIG9mZkFwaSA9IGZ1bmN0aW9uKGV2ZW50cywgbmFtZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBpZiAoIWV2ZW50cykgcmV0dXJuO1xuXG4gICAgdmFyIGkgPSAwLCBsaXN0ZW5pbmc7XG4gICAgdmFyIGNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQsIGxpc3RlbmVycyA9IG9wdGlvbnMubGlzdGVuZXJzO1xuXG4gICAgLy8gRGVsZXRlIGFsbCBldmVudHMgbGlzdGVuZXJzIGFuZCBcImRyb3BcIiBldmVudHMuXG4gICAgaWYgKCFuYW1lICYmICFjYWxsYmFjayAmJiAhY29udGV4dCkge1xuICAgICAgdmFyIGlkcyA9IF8ua2V5cyhsaXN0ZW5lcnMpO1xuICAgICAgZm9yICg7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGlzdGVuaW5nID0gbGlzdGVuZXJzW2lkc1tpXV07XG4gICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbbGlzdGVuaW5nLmlkXTtcbiAgICAgICAgZGVsZXRlIGxpc3RlbmluZy5saXN0ZW5pbmdUb1tsaXN0ZW5pbmcub2JqSWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuYW1lcyA9IG5hbWUgPyBbbmFtZV0gOiBfLmtleXMoZXZlbnRzKTtcbiAgICBmb3IgKDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICB2YXIgaGFuZGxlcnMgPSBldmVudHNbbmFtZV07XG5cbiAgICAgIC8vIEJhaWwgb3V0IGlmIHRoZXJlIGFyZSBubyBldmVudHMgc3RvcmVkLlxuICAgICAgaWYgKCFoYW5kbGVycykgYnJlYWs7XG5cbiAgICAgIC8vIFJlcGxhY2UgZXZlbnRzIGlmIHRoZXJlIGFyZSBhbnkgcmVtYWluaW5nLiAgT3RoZXJ3aXNlLCBjbGVhbiB1cC5cbiAgICAgIHZhciByZW1haW5pbmcgPSBbXTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGFuZGxlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBoYW5kbGVyc1tqXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrICE9PSBoYW5kbGVyLmNhbGxiYWNrICYmXG4gICAgICAgICAgICBjYWxsYmFjayAhPT0gaGFuZGxlci5jYWxsYmFjay5fY2FsbGJhY2sgfHxcbiAgICAgICAgICAgICAgY29udGV4dCAmJiBjb250ZXh0ICE9PSBoYW5kbGVyLmNvbnRleHRcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVtYWluaW5nLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGlzdGVuaW5nID0gaGFuZGxlci5saXN0ZW5pbmc7XG4gICAgICAgICAgaWYgKGxpc3RlbmluZyAmJiAtLWxpc3RlbmluZy5jb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIGxpc3RlbmVyc1tsaXN0ZW5pbmcuaWRdO1xuICAgICAgICAgICAgZGVsZXRlIGxpc3RlbmluZy5saXN0ZW5pbmdUb1tsaXN0ZW5pbmcub2JqSWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGFpbCBldmVudCBpZiB0aGUgbGlzdCBoYXMgYW55IGV2ZW50cy4gIE90aGVyd2lzZSwgY2xlYW4gdXAuXG4gICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCkge1xuICAgICAgICBldmVudHNbbmFtZV0gPSByZW1haW5pbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgZXZlbnRzW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXZlbnRzO1xuICB9O1xuXG4gIC8vIEJpbmQgYW4gZXZlbnQgdG8gb25seSBiZSB0cmlnZ2VyZWQgYSBzaW5nbGUgdGltZS4gQWZ0ZXIgdGhlIGZpcnN0IHRpbWVcbiAgLy8gdGhlIGNhbGxiYWNrIGlzIGludm9rZWQsIGl0cyBsaXN0ZW5lciB3aWxsIGJlIHJlbW92ZWQuIElmIG11bHRpcGxlIGV2ZW50c1xuICAvLyBhcmUgcGFzc2VkIGluIHVzaW5nIHRoZSBzcGFjZS1zZXBhcmF0ZWQgc3ludGF4LCB0aGUgaGFuZGxlciB3aWxsIGZpcmVcbiAgLy8gb25jZSBmb3IgZWFjaCBldmVudCwgbm90IG9uY2UgZm9yIGEgY29tYmluYXRpb24gb2YgYWxsIGV2ZW50cy5cbiAgRXZlbnRzLm9uY2UgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIC8vIE1hcCB0aGUgZXZlbnQgaW50byBhIGB7ZXZlbnQ6IG9uY2V9YCBvYmplY3QuXG4gICAgdmFyIGV2ZW50cyA9IGV2ZW50c0FwaShvbmNlTWFwLCB7fSwgbmFtZSwgY2FsbGJhY2ssIF8uYmluZCh0aGlzLm9mZiwgdGhpcykpO1xuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgJiYgY29udGV4dCA9PSBudWxsKSBjYWxsYmFjayA9IHZvaWQgMDtcbiAgICByZXR1cm4gdGhpcy5vbihldmVudHMsIGNhbGxiYWNrLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBJbnZlcnNpb24tb2YtY29udHJvbCB2ZXJzaW9ucyBvZiBgb25jZWAuXG4gIEV2ZW50cy5saXN0ZW5Ub09uY2UgPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cbiAgICB2YXIgZXZlbnRzID0gZXZlbnRzQXBpKG9uY2VNYXAsIHt9LCBuYW1lLCBjYWxsYmFjaywgXy5iaW5kKHRoaXMuc3RvcExpc3RlbmluZywgdGhpcywgb2JqKSk7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuVG8ob2JqLCBldmVudHMpO1xuICB9O1xuXG4gIC8vIFJlZHVjZXMgdGhlIGV2ZW50IGNhbGxiYWNrcyBpbnRvIGEgbWFwIG9mIGB7ZXZlbnQ6IG9uY2VXcmFwcGVyfWAuXG4gIC8vIGBvZmZlcmAgdW5iaW5kcyB0aGUgYG9uY2VXcmFwcGVyYCBhZnRlciBpdCBoYXMgYmVlbiBjYWxsZWQuXG4gIHZhciBvbmNlTWFwID0gZnVuY3Rpb24obWFwLCBuYW1lLCBjYWxsYmFjaywgb2ZmZXIpIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBvbmNlID0gbWFwW25hbWVdID0gXy5vbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICBvZmZlcihuYW1lLCBvbmNlKTtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgICAgb25jZS5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbiAgfTtcblxuICAvLyBUcmlnZ2VyIG9uZSBvciBtYW55IGV2ZW50cywgZmlyaW5nIGFsbCBib3VuZCBjYWxsYmFja3MuIENhbGxiYWNrcyBhcmVcbiAgLy8gcGFzc2VkIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBgdHJpZ2dlcmAgaXMsIGFwYXJ0IGZyb20gdGhlIGV2ZW50IG5hbWVcbiAgLy8gKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrIHRvXG4gIC8vIHJlY2VpdmUgdGhlIHRydWUgbmFtZSBvZiB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50KS5cbiAgRXZlbnRzLnRyaWdnZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KDAsIGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICB2YXIgYXJncyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG5cbiAgICBldmVudHNBcGkodHJpZ2dlckFwaSwgdGhpcy5fZXZlbnRzLCBuYW1lLCB2b2lkIDAsIGFyZ3MpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIEhhbmRsZXMgdHJpZ2dlcmluZyB0aGUgYXBwcm9wcmlhdGUgZXZlbnQgY2FsbGJhY2tzLlxuICB2YXIgdHJpZ2dlckFwaSA9IGZ1bmN0aW9uKG9iakV2ZW50cywgbmFtZSwgY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICBpZiAob2JqRXZlbnRzKSB7XG4gICAgICB2YXIgZXZlbnRzID0gb2JqRXZlbnRzW25hbWVdO1xuICAgICAgdmFyIGFsbEV2ZW50cyA9IG9iakV2ZW50cy5hbGw7XG4gICAgICBpZiAoZXZlbnRzICYmIGFsbEV2ZW50cykgYWxsRXZlbnRzID0gYWxsRXZlbnRzLnNsaWNlKCk7XG4gICAgICBpZiAoZXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGV2ZW50cywgYXJncyk7XG4gICAgICBpZiAoYWxsRXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGFsbEV2ZW50cywgW25hbWVdLmNvbmNhdChhcmdzKSk7XG4gICAgfVxuICAgIHJldHVybiBvYmpFdmVudHM7XG4gIH07XG5cbiAgLy8gQSBkaWZmaWN1bHQtdG8tYmVsaWV2ZSwgYnV0IG9wdGltaXplZCBpbnRlcm5hbCBkaXNwYXRjaCBmdW5jdGlvbiBmb3JcbiAgLy8gdHJpZ2dlcmluZyBldmVudHMuIFRyaWVzIHRvIGtlZXAgdGhlIHVzdWFsIGNhc2VzIHNwZWVkeSAobW9zdCBpbnRlcm5hbFxuICAvLyBCYWNrYm9uZSBldmVudHMgaGF2ZSAzIGFyZ3VtZW50cykuXG4gIHZhciB0cmlnZ2VyRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRzLCBhcmdzKSB7XG4gICAgdmFyIGV2LCBpID0gLTEsIGwgPSBldmVudHMubGVuZ3RoLCBhMSA9IGFyZ3NbMF0sIGEyID0gYXJnc1sxXSwgYTMgPSBhcmdzWzJdO1xuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgpOyByZXR1cm47XG4gICAgICBjYXNlIDE6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSk7IHJldHVybjtcbiAgICAgIGNhc2UgMjogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMik7IHJldHVybjtcbiAgICAgIGNhc2UgMzogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMiwgYTMpOyByZXR1cm47XG4gICAgICBkZWZhdWx0OiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5hcHBseShldi5jdHgsIGFyZ3MpOyByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIC8vIEFsaWFzZXMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICBFdmVudHMuYmluZCAgID0gRXZlbnRzLm9uO1xuICBFdmVudHMudW5iaW5kID0gRXZlbnRzLm9mZjtcblxuICAvLyBBbGxvdyB0aGUgYEJhY2tib25lYCBvYmplY3QgdG8gc2VydmUgYXMgYSBnbG9iYWwgZXZlbnQgYnVzLCBmb3IgZm9sa3Mgd2hvXG4gIC8vIHdhbnQgZ2xvYmFsIFwicHVic3ViXCIgaW4gYSBjb252ZW5pZW50IHBsYWNlLlxuICBfLmV4dGVuZChCYWNrYm9uZSwgRXZlbnRzKTtcblxuICAvLyBCYWNrYm9uZS5Nb2RlbFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEJhY2tib25lICoqTW9kZWxzKiogYXJlIHRoZSBiYXNpYyBkYXRhIG9iamVjdCBpbiB0aGUgZnJhbWV3b3JrIC0tXG4gIC8vIGZyZXF1ZW50bHkgcmVwcmVzZW50aW5nIGEgcm93IGluIGEgdGFibGUgaW4gYSBkYXRhYmFzZSBvbiB5b3VyIHNlcnZlci5cbiAgLy8gQSBkaXNjcmV0ZSBjaHVuayBvZiBkYXRhIGFuZCBhIGJ1bmNoIG9mIHVzZWZ1bCwgcmVsYXRlZCBtZXRob2RzIGZvclxuICAvLyBwZXJmb3JtaW5nIGNvbXB1dGF0aW9ucyBhbmQgdHJhbnNmb3JtYXRpb25zIG9uIHRoYXQgZGF0YS5cblxuICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMuIEEgY2xpZW50IGlkIChgY2lkYClcbiAgLy8gaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYW5kIGFzc2lnbmVkIGZvciB5b3UuXG4gIHZhciBNb2RlbCA9IEJhY2tib25lLk1vZGVsID0gZnVuY3Rpb24oYXR0cmlidXRlcywgb3B0aW9ucykge1xuICAgIHZhciBhdHRycyA9IGF0dHJpYnV0ZXMgfHwge307XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQodGhpcy5jaWRQcmVmaXgpO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChvcHRpb25zLmNvbGxlY3Rpb24pIHRoaXMuY29sbGVjdGlvbiA9IG9wdGlvbnMuY29sbGVjdGlvbjtcbiAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSB0aGlzLnBhcnNlKGF0dHJzLCBvcHRpb25zKSB8fCB7fTtcbiAgICB2YXIgZGVmYXVsdHMgPSBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKTtcbiAgICBhdHRycyA9IF8uZGVmYXVsdHMoXy5leHRlbmQoe30sIGRlZmF1bHRzLCBhdHRycyksIGRlZmF1bHRzKTtcbiAgICB0aGlzLnNldChhdHRycywgb3B0aW9ucyk7XG4gICAgdGhpcy5jaGFuZ2VkID0ge307XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQXR0YWNoIGFsbCBpbmhlcml0YWJsZSBtZXRob2RzIHRvIHRoZSBNb2RlbCBwcm90b3R5cGUuXG4gIF8uZXh0ZW5kKE1vZGVsLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBBIGhhc2ggb2YgYXR0cmlidXRlcyB3aG9zZSBjdXJyZW50IGFuZCBwcmV2aW91cyB2YWx1ZSBkaWZmZXIuXG4gICAgY2hhbmdlZDogbnVsbCxcblxuICAgIC8vIFRoZSB2YWx1ZSByZXR1cm5lZCBkdXJpbmcgdGhlIGxhc3QgZmFpbGVkIHZhbGlkYXRpb24uXG4gICAgdmFsaWRhdGlvbkVycm9yOiBudWxsLFxuXG4gICAgLy8gVGhlIGRlZmF1bHQgbmFtZSBmb3IgdGhlIEpTT04gYGlkYCBhdHRyaWJ1dGUgaXMgYFwiaWRcImAuIE1vbmdvREIgYW5kXG4gICAgLy8gQ291Y2hEQiB1c2VycyBtYXkgd2FudCB0byBzZXQgdGhpcyB0byBgXCJfaWRcImAuXG4gICAgaWRBdHRyaWJ1dGU6ICdpZCcsXG5cbiAgICAvLyBUaGUgcHJlZml4IGlzIHVzZWQgdG8gY3JlYXRlIHRoZSBjbGllbnQgaWQgd2hpY2ggaXMgdXNlZCB0byBpZGVudGlmeSBtb2RlbHMgbG9jYWxseS5cbiAgICAvLyBZb3UgbWF5IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcyBpZiB5b3UncmUgZXhwZXJpZW5jaW5nIG5hbWUgY2xhc2hlcyB3aXRoIG1vZGVsIGlkcy5cbiAgICBjaWRQcmVmaXg6ICdjJyxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG1vZGVsJ3MgYGF0dHJpYnV0ZXNgIG9iamVjdC5cbiAgICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0IC0tIGJ1dCBvdmVycmlkZSB0aGlzIGlmIHlvdSBuZWVkXG4gICAgLy8gY3VzdG9tIHN5bmNpbmcgc2VtYW50aWNzIGZvciAqdGhpcyogcGFydGljdWxhciBtb2RlbC5cbiAgICBzeW5jOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuICAgIGdldDogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyXTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBIVE1MLWVzY2FwZWQgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuICAgIGVzY2FwZTogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIF8uZXNjYXBlKHRoaXMuZ2V0KGF0dHIpKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGF0dHJpYnV0ZSBjb250YWlucyBhIHZhbHVlIHRoYXQgaXMgbm90IG51bGxcbiAgICAvLyBvciB1bmRlZmluZWQuXG4gICAgaGFzOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXQoYXR0cikgIT0gbnVsbDtcbiAgICB9LFxuXG4gICAgLy8gU3BlY2lhbC1jYXNlZCBwcm94eSB0byB1bmRlcnNjb3JlJ3MgYF8ubWF0Y2hlc2AgbWV0aG9kLlxuICAgIG1hdGNoZXM6IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gISFfLml0ZXJhdGVlKGF0dHJzLCB0aGlzKSh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMgb24gdGhlIG9iamVjdCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gVGhpcyBpc1xuICAgIC8vIHRoZSBjb3JlIHByaW1pdGl2ZSBvcGVyYXRpb24gb2YgYSBtb2RlbCwgdXBkYXRpbmcgdGhlIGRhdGEgYW5kIG5vdGlmeWluZ1xuICAgIC8vIGFueW9uZSB3aG8gbmVlZHMgdG8ga25vdyBhYm91dCB0aGUgY2hhbmdlIGluIHN0YXRlLiBUaGUgaGVhcnQgb2YgdGhlIGJlYXN0LlxuICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChrZXkgPT0gbnVsbCkgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIEhhbmRsZSBib3RoIGBcImtleVwiLCB2YWx1ZWAgYW5kIGB7a2V5OiB2YWx1ZX1gIC1zdHlsZSBhcmd1bWVudHMuXG4gICAgICB2YXIgYXR0cnM7XG4gICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYXR0cnMgPSBrZXk7XG4gICAgICAgIG9wdGlvbnMgPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoYXR0cnMgPSB7fSlba2V5XSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuICAgICAgLy8gUnVuIHZhbGlkYXRpb24uXG4gICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBFeHRyYWN0IGF0dHJpYnV0ZXMgYW5kIG9wdGlvbnMuXG4gICAgICB2YXIgdW5zZXQgICAgICA9IG9wdGlvbnMudW5zZXQ7XG4gICAgICB2YXIgc2lsZW50ICAgICA9IG9wdGlvbnMuc2lsZW50O1xuICAgICAgdmFyIGNoYW5nZXMgICAgPSBbXTtcbiAgICAgIHZhciBjaGFuZ2luZyAgID0gdGhpcy5fY2hhbmdpbmc7XG4gICAgICB0aGlzLl9jaGFuZ2luZyA9IHRydWU7XG5cbiAgICAgIGlmICghY2hhbmdpbmcpIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzID0gXy5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICB2YXIgY2hhbmdlZCA9IHRoaXMuY2hhbmdlZDtcbiAgICAgIHZhciBwcmV2ICAgID0gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzO1xuXG4gICAgICAvLyBGb3IgZWFjaCBgc2V0YCBhdHRyaWJ1dGUsIHVwZGF0ZSBvciBkZWxldGUgdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICBmb3IgKHZhciBhdHRyIGluIGF0dHJzKSB7XG4gICAgICAgIHZhbCA9IGF0dHJzW2F0dHJdO1xuICAgICAgICBpZiAoIV8uaXNFcXVhbChjdXJyZW50W2F0dHJdLCB2YWwpKSBjaGFuZ2VzLnB1c2goYXR0cik7XG4gICAgICAgIGlmICghXy5pc0VxdWFsKHByZXZbYXR0cl0sIHZhbCkpIHtcbiAgICAgICAgICBjaGFuZ2VkW2F0dHJdID0gdmFsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSBjaGFuZ2VkW2F0dHJdO1xuICAgICAgICB9XG4gICAgICAgIHVuc2V0ID8gZGVsZXRlIGN1cnJlbnRbYXR0cl0gOiBjdXJyZW50W2F0dHJdID0gdmFsO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIGBpZGAuXG4gICAgICBpZiAodGhpcy5pZEF0dHJpYnV0ZSBpbiBhdHRycykgdGhpcy5pZCA9IHRoaXMuZ2V0KHRoaXMuaWRBdHRyaWJ1dGUpO1xuXG4gICAgICAvLyBUcmlnZ2VyIGFsbCByZWxldmFudCBhdHRyaWJ1dGUgY2hhbmdlcy5cbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCkgdGhpcy5fcGVuZGluZyA9IG9wdGlvbnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlOicgKyBjaGFuZ2VzW2ldLCB0aGlzLCBjdXJyZW50W2NoYW5nZXNbaV1dLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBZb3UgbWlnaHQgYmUgd29uZGVyaW5nIHdoeSB0aGVyZSdzIGEgYHdoaWxlYCBsb29wIGhlcmUuIENoYW5nZXMgY2FuXG4gICAgICAvLyBiZSByZWN1cnNpdmVseSBuZXN0ZWQgd2l0aGluIGBcImNoYW5nZVwiYCBldmVudHMuXG4gICAgICBpZiAoY2hhbmdpbmcpIHJldHVybiB0aGlzO1xuICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuX3BlbmRpbmcpIHtcbiAgICAgICAgICBvcHRpb25zID0gdGhpcy5fcGVuZGluZztcbiAgICAgICAgICB0aGlzLl9wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fY2hhbmdpbmcgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gdGhlIG1vZGVsLCBmaXJpbmcgYFwiY2hhbmdlXCJgLiBgdW5zZXRgIGlzIGEgbm9vcFxuICAgIC8vIGlmIHRoZSBhdHRyaWJ1dGUgZG9lc24ndCBleGlzdC5cbiAgICB1bnNldDogZnVuY3Rpb24oYXR0ciwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHIsIHZvaWQgMCwgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt1bnNldDogdHJ1ZX0pKTtcbiAgICB9LFxuXG4gICAgLy8gQ2xlYXIgYWxsIGF0dHJpYnV0ZXMgb24gdGhlIG1vZGVsLCBmaXJpbmcgYFwiY2hhbmdlXCJgLlxuICAgIGNsZWFyOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cnMgPSB7fTtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmF0dHJpYnV0ZXMpIGF0dHJzW2tleV0gPSB2b2lkIDA7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoYXR0cnMsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIERldGVybWluZSBpZiB0aGUgbW9kZWwgaGFzIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgIC8vIElmIHlvdSBzcGVjaWZ5IGFuIGF0dHJpYnV0ZSBuYW1lLCBkZXRlcm1pbmUgaWYgdGhhdCBhdHRyaWJ1dGUgaGFzIGNoYW5nZWQuXG4gICAgaGFzQ2hhbmdlZDogZnVuY3Rpb24oYXR0cikge1xuICAgICAgaWYgKGF0dHIgPT0gbnVsbCkgcmV0dXJuICFfLmlzRW1wdHkodGhpcy5jaGFuZ2VkKTtcbiAgICAgIHJldHVybiBfLmhhcyh0aGlzLmNoYW5nZWQsIGF0dHIpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHRoZSBhdHRyaWJ1dGVzIHRoYXQgaGF2ZSBjaGFuZ2VkLCBvclxuICAgIC8vIGZhbHNlIGlmIHRoZXJlIGFyZSBubyBjaGFuZ2VkIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3IgZGV0ZXJtaW5pbmcgd2hhdFxuICAgIC8vIHBhcnRzIG9mIGEgdmlldyBuZWVkIHRvIGJlIHVwZGF0ZWQgYW5kL29yIHdoYXQgYXR0cmlidXRlcyBuZWVkIHRvIGJlXG4gICAgLy8gcGVyc2lzdGVkIHRvIHRoZSBzZXJ2ZXIuIFVuc2V0IGF0dHJpYnV0ZXMgd2lsbCBiZSBzZXQgdG8gdW5kZWZpbmVkLlxuICAgIC8vIFlvdSBjYW4gYWxzbyBwYXNzIGFuIGF0dHJpYnV0ZXMgb2JqZWN0IHRvIGRpZmYgYWdhaW5zdCB0aGUgbW9kZWwsXG4gICAgLy8gZGV0ZXJtaW5pbmcgaWYgdGhlcmUgKndvdWxkIGJlKiBhIGNoYW5nZS5cbiAgICBjaGFuZ2VkQXR0cmlidXRlczogZnVuY3Rpb24oZGlmZikge1xuICAgICAgaWYgKCFkaWZmKSByZXR1cm4gdGhpcy5oYXNDaGFuZ2VkKCkgPyBfLmNsb25lKHRoaXMuY2hhbmdlZCkgOiBmYWxzZTtcbiAgICAgIHZhciBvbGQgPSB0aGlzLl9jaGFuZ2luZyA/IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA6IHRoaXMuYXR0cmlidXRlcztcbiAgICAgIHZhciBjaGFuZ2VkID0ge307XG4gICAgICBmb3IgKHZhciBhdHRyIGluIGRpZmYpIHtcbiAgICAgICAgdmFyIHZhbCA9IGRpZmZbYXR0cl07XG4gICAgICAgIGlmIChfLmlzRXF1YWwob2xkW2F0dHJdLCB2YWwpKSBjb250aW51ZTtcbiAgICAgICAgY2hhbmdlZFthdHRyXSA9IHZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfLnNpemUoY2hhbmdlZCkgPyBjaGFuZ2VkIDogZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgcHJldmlvdXMgdmFsdWUgb2YgYW4gYXR0cmlidXRlLCByZWNvcmRlZCBhdCB0aGUgdGltZSB0aGUgbGFzdFxuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudCB3YXMgZmlyZWQuXG4gICAgcHJldmlvdXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwgfHwgIXRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcykgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYWxsIG9mIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBtb2RlbCBhdCB0aGUgdGltZSBvZiB0aGUgcHJldmlvdXNcbiAgICAvLyBgXCJjaGFuZ2VcImAgZXZlbnQuXG4gICAgcHJldmlvdXNBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIEZldGNoIHRoZSBtb2RlbCBmcm9tIHRoZSBzZXJ2ZXIsIG1lcmdpbmcgdGhlIHJlc3BvbnNlIHdpdGggdGhlIG1vZGVsJ3NcbiAgICAvLyBsb2NhbCBhdHRyaWJ1dGVzLiBBbnkgY2hhbmdlZCBhdHRyaWJ1dGVzIHdpbGwgdHJpZ2dlciBhIFwiY2hhbmdlXCIgZXZlbnQuXG4gICAgZmV0Y2g6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7cGFyc2U6IHRydWV9LCBvcHRpb25zKTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgdmFyIHNlcnZlckF0dHJzID0gb3B0aW9ucy5wYXJzZSA/IG1vZGVsLnBhcnNlKHJlc3AsIG9wdGlvbnMpIDogcmVzcDtcbiAgICAgICAgaWYgKCFtb2RlbC5zZXQoc2VydmVyQXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMsIGFuZCBzeW5jIHRoZSBtb2RlbCB0byB0aGUgc2VydmVyLlxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBhdHRyaWJ1dGVzIGhhc2ggdGhhdCBkaWZmZXJzLCB0aGUgbW9kZWwnc1xuICAgIC8vIHN0YXRlIHdpbGwgYmUgYHNldGAgYWdhaW4uXG4gICAgc2F2ZTogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcbiAgICAgIC8vIEhhbmRsZSBib3RoIGBcImtleVwiLCB2YWx1ZWAgYW5kIGB7a2V5OiB2YWx1ZX1gIC1zdHlsZSBhcmd1bWVudHMuXG4gICAgICB2YXIgYXR0cnM7XG4gICAgICBpZiAoa2V5ID09IG51bGwgfHwgdHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYXR0cnMgPSBrZXk7XG4gICAgICAgIG9wdGlvbnMgPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoYXR0cnMgPSB7fSlba2V5XSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt2YWxpZGF0ZTogdHJ1ZSwgcGFyc2U6IHRydWV9LCBvcHRpb25zKTtcbiAgICAgIHZhciB3YWl0ID0gb3B0aW9ucy53YWl0O1xuXG4gICAgICAvLyBJZiB3ZSdyZSBub3Qgd2FpdGluZyBhbmQgYXR0cmlidXRlcyBleGlzdCwgc2F2ZSBhY3RzIGFzXG4gICAgICAvLyBgc2V0KGF0dHIpLnNhdmUobnVsbCwgb3B0cylgIHdpdGggdmFsaWRhdGlvbi4gT3RoZXJ3aXNlLCBjaGVjayBpZlxuICAgICAgLy8gdGhlIG1vZGVsIHdpbGwgYmUgdmFsaWQgd2hlbiB0aGUgYXR0cmlidXRlcywgaWYgYW55LCBhcmUgc2V0LlxuICAgICAgaWYgKGF0dHJzICYmICF3YWl0KSB7XG4gICAgICAgIGlmICghdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZnRlciBhIHN1Y2Nlc3NmdWwgc2VydmVyLXNpZGUgc2F2ZSwgdGhlIGNsaWVudCBpcyAob3B0aW9uYWxseSlcbiAgICAgIC8vIHVwZGF0ZWQgd2l0aCB0aGUgc2VydmVyLXNpZGUgc3RhdGUuXG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgLy8gRW5zdXJlIGF0dHJpYnV0ZXMgYXJlIHJlc3RvcmVkIGR1cmluZyBzeW5jaHJvbm91cyBzYXZlcy5cbiAgICAgICAgbW9kZWwuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBzZXJ2ZXJBdHRycyA9IG9wdGlvbnMucGFyc2UgPyBtb2RlbC5wYXJzZShyZXNwLCBvcHRpb25zKSA6IHJlc3A7XG4gICAgICAgIGlmICh3YWl0KSBzZXJ2ZXJBdHRycyA9IF8uZXh0ZW5kKHt9LCBhdHRycywgc2VydmVyQXR0cnMpO1xuICAgICAgICBpZiAoc2VydmVyQXR0cnMgJiYgIW1vZGVsLnNldChzZXJ2ZXJBdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFNldCB0ZW1wb3JhcnkgYXR0cmlidXRlcyBpZiBge3dhaXQ6IHRydWV9YCB0byBwcm9wZXJseSBmaW5kIG5ldyBpZHMuXG4gICAgICBpZiAoYXR0cnMgJiYgd2FpdCkgdGhpcy5hdHRyaWJ1dGVzID0gXy5leHRlbmQoe30sIGF0dHJpYnV0ZXMsIGF0dHJzKTtcblxuICAgICAgdmFyIG1ldGhvZCA9IHRoaXMuaXNOZXcoKSA/ICdjcmVhdGUnIDogKG9wdGlvbnMucGF0Y2ggPyAncGF0Y2gnIDogJ3VwZGF0ZScpO1xuICAgICAgaWYgKG1ldGhvZCA9PT0gJ3BhdGNoJyAmJiAhb3B0aW9ucy5hdHRycykgb3B0aW9ucy5hdHRycyA9IGF0dHJzO1xuICAgICAgdmFyIHhociA9IHRoaXMuc3luYyhtZXRob2QsIHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBSZXN0b3JlIGF0dHJpYnV0ZXMuXG4gICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuXG4gICAgICByZXR1cm4geGhyO1xuICAgIH0sXG5cbiAgICAvLyBEZXN0cm95IHRoaXMgbW9kZWwgb24gdGhlIHNlcnZlciBpZiBpdCB3YXMgYWxyZWFkeSBwZXJzaXN0ZWQuXG4gICAgLy8gT3B0aW1pc3RpY2FsbHkgcmVtb3ZlcyB0aGUgbW9kZWwgZnJvbSBpdHMgY29sbGVjdGlvbiwgaWYgaXQgaGFzIG9uZS5cbiAgICAvLyBJZiBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCB3YWl0cyBmb3IgdGhlIHNlcnZlciB0byByZXNwb25kIGJlZm9yZSByZW1vdmFsLlxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgdmFyIHdhaXQgPSBvcHRpb25zLndhaXQ7XG5cbiAgICAgIHZhciBkZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1vZGVsLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignZGVzdHJveScsIG1vZGVsLCBtb2RlbC5jb2xsZWN0aW9uLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYgKHdhaXQpIGRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFtb2RlbC5pc05ldygpKSBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHhociA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuaXNOZXcoKSkge1xuICAgICAgICBfLmRlZmVyKG9wdGlvbnMuc3VjY2Vzcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIHhociA9IHRoaXMuc3luYygnZGVsZXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAoIXdhaXQpIGRlc3Ryb3koKTtcbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlZmF1bHQgVVJMIGZvciB0aGUgbW9kZWwncyByZXByZXNlbnRhdGlvbiBvbiB0aGUgc2VydmVyIC0tIGlmIHlvdSdyZVxuICAgIC8vIHVzaW5nIEJhY2tib25lJ3MgcmVzdGZ1bCBtZXRob2RzLCBvdmVycmlkZSB0aGlzIHRvIGNoYW5nZSB0aGUgZW5kcG9pbnRcbiAgICAvLyB0aGF0IHdpbGwgYmUgY2FsbGVkLlxuICAgIHVybDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmFzZSA9XG4gICAgICAgIF8ucmVzdWx0KHRoaXMsICd1cmxSb290JykgfHxcbiAgICAgICAgXy5yZXN1bHQodGhpcy5jb2xsZWN0aW9uLCAndXJsJykgfHxcbiAgICAgICAgdXJsRXJyb3IoKTtcbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHJldHVybiBiYXNlO1xuICAgICAgdmFyIGlkID0gdGhpcy5nZXQodGhpcy5pZEF0dHJpYnV0ZSk7XG4gICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC9bXlxcL10kLywgJyQmLycpICsgZW5jb2RlVVJJQ29tcG9uZW50KGlkKTtcbiAgICB9LFxuXG4gICAgLy8gKipwYXJzZSoqIGNvbnZlcnRzIGEgcmVzcG9uc2UgaW50byB0aGUgaGFzaCBvZiBhdHRyaWJ1dGVzIHRvIGJlIGBzZXRgIG9uXG4gICAgLy8gdGhlIG1vZGVsLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgdGhlIHJlc3BvbnNlIGFsb25nLlxuICAgIHBhcnNlOiBmdW5jdGlvbihyZXNwLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gcmVzcDtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IG1vZGVsIHdpdGggaWRlbnRpY2FsIGF0dHJpYnV0ZXMgdG8gdGhpcyBvbmUuXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIEEgbW9kZWwgaXMgbmV3IGlmIGl0IGhhcyBuZXZlciBiZWVuIHNhdmVkIHRvIHRoZSBzZXJ2ZXIsIGFuZCBsYWNrcyBhbiBpZC5cbiAgICBpc05ldzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuaGFzKHRoaXMuaWRBdHRyaWJ1dGUpO1xuICAgIH0sXG5cbiAgICAvLyBDaGVjayBpZiB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGluIGEgdmFsaWQgc3RhdGUuXG4gICAgaXNWYWxpZDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRlKHt9LCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3ZhbGlkYXRlOiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbnN0IHRoZSBuZXh0IGNvbXBsZXRlIHNldCBvZiBtb2RlbCBhdHRyaWJ1dGVzLFxuICAgIC8vIHJldHVybmluZyBgdHJ1ZWAgaWYgYWxsIGlzIHdlbGwuIE90aGVyd2lzZSwgZmlyZSBhbiBgXCJpbnZhbGlkXCJgIGV2ZW50LlxuICAgIF92YWxpZGF0ZTogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghb3B0aW9ucy52YWxpZGF0ZSB8fCAhdGhpcy52YWxpZGF0ZSkgcmV0dXJuIHRydWU7XG4gICAgICBhdHRycyA9IF8uZXh0ZW5kKHt9LCB0aGlzLmF0dHJpYnV0ZXMsIGF0dHJzKTtcbiAgICAgIHZhciBlcnJvciA9IHRoaXMudmFsaWRhdGlvbkVycm9yID0gdGhpcy52YWxpZGF0ZShhdHRycywgb3B0aW9ucykgfHwgbnVsbDtcbiAgICAgIGlmICghZXJyb3IpIHJldHVybiB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgZXJyb3IsIF8uZXh0ZW5kKG9wdGlvbnMsIHt2YWxpZGF0aW9uRXJyb3I6IGVycm9yfSkpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgTW9kZWwsIG1hcHBlZCB0byB0aGVcbiAgLy8gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGV5IHRha2UuXG4gIHZhciBtb2RlbE1ldGhvZHMgPSB7a2V5czogMSwgdmFsdWVzOiAxLCBwYWlyczogMSwgaW52ZXJ0OiAxLCBwaWNrOiAwLFxuICAgICAgb21pdDogMCwgY2hhaW46IDEsIGlzRW1wdHk6IDF9O1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYE1vZGVsI2F0dHJpYnV0ZXNgLlxuICBhZGRVbmRlcnNjb3JlTWV0aG9kcyhNb2RlbCwgbW9kZWxNZXRob2RzLCAnYXR0cmlidXRlcycpO1xuXG4gIC8vIEJhY2tib25lLkNvbGxlY3Rpb25cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIElmIG1vZGVscyB0ZW5kIHRvIHJlcHJlc2VudCBhIHNpbmdsZSByb3cgb2YgZGF0YSwgYSBCYWNrYm9uZSBDb2xsZWN0aW9uIGlzXG4gIC8vIG1vcmUgYW5hbG9nb3VzIHRvIGEgdGFibGUgZnVsbCBvZiBkYXRhIC4uLiBvciBhIHNtYWxsIHNsaWNlIG9yIHBhZ2Ugb2YgdGhhdFxuICAvLyB0YWJsZSwgb3IgYSBjb2xsZWN0aW9uIG9mIHJvd3MgdGhhdCBiZWxvbmcgdG9nZXRoZXIgZm9yIGEgcGFydGljdWxhciByZWFzb25cbiAgLy8gLS0gYWxsIG9mIHRoZSBtZXNzYWdlcyBpbiB0aGlzIHBhcnRpY3VsYXIgZm9sZGVyLCBhbGwgb2YgdGhlIGRvY3VtZW50c1xuICAvLyBiZWxvbmdpbmcgdG8gdGhpcyBwYXJ0aWN1bGFyIGF1dGhvciwgYW5kIHNvIG9uLiBDb2xsZWN0aW9ucyBtYWludGFpblxuICAvLyBpbmRleGVzIG9mIHRoZWlyIG1vZGVscywgYm90aCBpbiBvcmRlciwgYW5kIGZvciBsb29rdXAgYnkgYGlkYC5cblxuICAvLyBDcmVhdGUgYSBuZXcgKipDb2xsZWN0aW9uKiosIHBlcmhhcHMgdG8gY29udGFpbiBhIHNwZWNpZmljIHR5cGUgb2YgYG1vZGVsYC5cbiAgLy8gSWYgYSBgY29tcGFyYXRvcmAgaXMgc3BlY2lmaWVkLCB0aGUgQ29sbGVjdGlvbiB3aWxsIG1haW50YWluXG4gIC8vIGl0cyBtb2RlbHMgaW4gc29ydCBvcmRlciwgYXMgdGhleSdyZSBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAgdmFyIENvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uID0gZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICBpZiAob3B0aW9ucy5tb2RlbCkgdGhpcy5tb2RlbCA9IG9wdGlvbnMubW9kZWw7XG4gICAgaWYgKG9wdGlvbnMuY29tcGFyYXRvciAhPT0gdm9pZCAwKSB0aGlzLmNvbXBhcmF0b3IgPSBvcHRpb25zLmNvbXBhcmF0b3I7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAobW9kZWxzKSB0aGlzLnJlc2V0KG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcbiAgfTtcblxuICAvLyBEZWZhdWx0IG9wdGlvbnMgZm9yIGBDb2xsZWN0aW9uI3NldGAuXG4gIHZhciBzZXRPcHRpb25zID0ge2FkZDogdHJ1ZSwgcmVtb3ZlOiB0cnVlLCBtZXJnZTogdHJ1ZX07XG4gIHZhciBhZGRPcHRpb25zID0ge2FkZDogdHJ1ZSwgcmVtb3ZlOiBmYWxzZX07XG5cbiAgLy8gU3BsaWNlcyBgaW5zZXJ0YCBpbnRvIGBhcnJheWAgYXQgaW5kZXggYGF0YC5cbiAgdmFyIHNwbGljZSA9IGZ1bmN0aW9uKGFycmF5LCBpbnNlcnQsIGF0KSB7XG4gICAgYXQgPSBNYXRoLm1pbihNYXRoLm1heChhdCwgMCksIGFycmF5Lmxlbmd0aCk7XG4gICAgdmFyIHRhaWwgPSBBcnJheShhcnJheS5sZW5ndGggLSBhdCk7XG4gICAgdmFyIGxlbmd0aCA9IGluc2VydC5sZW5ndGg7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IHRhaWwubGVuZ3RoOyBpKyspIHRhaWxbaV0gPSBhcnJheVtpICsgYXRdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYXJyYXlbaSArIGF0XSA9IGluc2VydFtpXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFpbC5sZW5ndGg7IGkrKykgYXJyYXlbaSArIGxlbmd0aCArIGF0XSA9IHRhaWxbaV07XG4gIH07XG5cbiAgLy8gRGVmaW5lIHRoZSBDb2xsZWN0aW9uJ3MgaW5oZXJpdGFibGUgbWV0aG9kcy5cbiAgXy5leHRlbmQoQ29sbGVjdGlvbi5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgbW9kZWwgZm9yIGEgY29sbGVjdGlvbiBpcyBqdXN0IGEgKipCYWNrYm9uZS5Nb2RlbCoqLlxuICAgIC8vIFRoaXMgc2hvdWxkIGJlIG92ZXJyaWRkZW4gaW4gbW9zdCBjYXNlcy5cbiAgICBtb2RlbDogTW9kZWwsXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIENvbGxlY3Rpb24gaXMgYW4gYXJyYXkgb2YgdGhlXG4gICAgLy8gbW9kZWxzJyBhdHRyaWJ1dGVzLlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKG1vZGVsKSB7IHJldHVybiBtb2RlbC50b0pTT04ob3B0aW9ucyk7IH0pO1xuICAgIH0sXG5cbiAgICAvLyBQcm94eSBgQmFja2JvbmUuc3luY2AgYnkgZGVmYXVsdC5cbiAgICBzeW5jOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsLCBvciBsaXN0IG9mIG1vZGVscyB0byB0aGUgc2V0LiBgbW9kZWxzYCBtYXkgYmUgQmFja2JvbmVcbiAgICAvLyBNb2RlbHMgb3IgcmF3IEphdmFTY3JpcHQgb2JqZWN0cyB0byBiZSBjb252ZXJ0ZWQgdG8gTW9kZWxzLCBvciBhbnlcbiAgICAvLyBjb21iaW5hdGlvbiBvZiB0aGUgdHdvLlxuICAgIGFkZDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQobW9kZWxzLCBfLmV4dGVuZCh7bWVyZ2U6IGZhbHNlfSwgb3B0aW9ucywgYWRkT3B0aW9ucykpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYSBtb2RlbCwgb3IgYSBsaXN0IG9mIG1vZGVscyBmcm9tIHRoZSBzZXQuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgb3B0aW9ucyk7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogbW9kZWxzLnNsaWNlKCk7XG4gICAgICB2YXIgcmVtb3ZlZCA9IHRoaXMuX3JlbW92ZU1vZGVscyhtb2RlbHMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCAmJiByZW1vdmVkLmxlbmd0aCkge1xuICAgICAgICBvcHRpb25zLmNoYW5nZXMgPSB7YWRkZWQ6IFtdLCBtZXJnZWQ6IFtdLCByZW1vdmVkOiByZW1vdmVkfTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IHJlbW92ZWRbMF0gOiByZW1vdmVkO1xuICAgIH0sXG5cbiAgICAvLyBVcGRhdGUgYSBjb2xsZWN0aW9uIGJ5IGBzZXRgLWluZyBhIG5ldyBsaXN0IG9mIG1vZGVscywgYWRkaW5nIG5ldyBvbmVzLFxuICAgIC8vIHJlbW92aW5nIG1vZGVscyB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudCwgYW5kIG1lcmdpbmcgbW9kZWxzIHRoYXRcbiAgICAvLyBhbHJlYWR5IGV4aXN0IGluIHRoZSBjb2xsZWN0aW9uLCBhcyBuZWNlc3NhcnkuIFNpbWlsYXIgdG8gKipNb2RlbCNzZXQqKixcbiAgICAvLyB0aGUgY29yZSBvcGVyYXRpb24gZm9yIHVwZGF0aW5nIHRoZSBkYXRhIGNvbnRhaW5lZCBieSB0aGUgY29sbGVjdGlvbi5cbiAgICBzZXQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgaWYgKG1vZGVscyA9PSBudWxsKSByZXR1cm47XG5cbiAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgc2V0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSAmJiAhdGhpcy5faXNNb2RlbChtb2RlbHMpKSB7XG4gICAgICAgIG1vZGVscyA9IHRoaXMucGFyc2UobW9kZWxzLCBvcHRpb25zKSB8fCBbXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpbmd1bGFyID0gIV8uaXNBcnJheShtb2RlbHMpO1xuICAgICAgbW9kZWxzID0gc2luZ3VsYXIgPyBbbW9kZWxzXSA6IG1vZGVscy5zbGljZSgpO1xuXG4gICAgICB2YXIgYXQgPSBvcHRpb25zLmF0O1xuICAgICAgaWYgKGF0ICE9IG51bGwpIGF0ID0gK2F0O1xuICAgICAgaWYgKGF0ID4gdGhpcy5sZW5ndGgpIGF0ID0gdGhpcy5sZW5ndGg7XG4gICAgICBpZiAoYXQgPCAwKSBhdCArPSB0aGlzLmxlbmd0aCArIDE7XG5cbiAgICAgIHZhciBzZXQgPSBbXTtcbiAgICAgIHZhciB0b0FkZCA9IFtdO1xuICAgICAgdmFyIHRvTWVyZ2UgPSBbXTtcbiAgICAgIHZhciB0b1JlbW92ZSA9IFtdO1xuICAgICAgdmFyIG1vZGVsTWFwID0ge307XG5cbiAgICAgIHZhciBhZGQgPSBvcHRpb25zLmFkZDtcbiAgICAgIHZhciBtZXJnZSA9IG9wdGlvbnMubWVyZ2U7XG4gICAgICB2YXIgcmVtb3ZlID0gb3B0aW9ucy5yZW1vdmU7XG5cbiAgICAgIHZhciBzb3J0ID0gZmFsc2U7XG4gICAgICB2YXIgc29ydGFibGUgPSB0aGlzLmNvbXBhcmF0b3IgJiYgYXQgPT0gbnVsbCAmJiBvcHRpb25zLnNvcnQgIT09IGZhbHNlO1xuICAgICAgdmFyIHNvcnRBdHRyID0gXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpID8gdGhpcy5jb21wYXJhdG9yIDogbnVsbDtcblxuICAgICAgLy8gVHVybiBiYXJlIG9iamVjdHMgaW50byBtb2RlbCByZWZlcmVuY2VzLCBhbmQgcHJldmVudCBpbnZhbGlkIG1vZGVsc1xuICAgICAgLy8gZnJvbSBiZWluZyBhZGRlZC5cbiAgICAgIHZhciBtb2RlbCwgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbW9kZWwgPSBtb2RlbHNbaV07XG5cbiAgICAgICAgLy8gSWYgYSBkdXBsaWNhdGUgaXMgZm91bmQsIHByZXZlbnQgaXQgZnJvbSBiZWluZyBhZGRlZCBhbmRcbiAgICAgICAgLy8gb3B0aW9uYWxseSBtZXJnZSBpdCBpbnRvIHRoZSBleGlzdGluZyBtb2RlbC5cbiAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXQobW9kZWwpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICBpZiAobWVyZ2UgJiYgbW9kZWwgIT09IGV4aXN0aW5nKSB7XG4gICAgICAgICAgICB2YXIgYXR0cnMgPSB0aGlzLl9pc01vZGVsKG1vZGVsKSA/IG1vZGVsLmF0dHJpYnV0ZXMgOiBtb2RlbDtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBhdHRycyA9IGV4aXN0aW5nLnBhcnNlKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnNldChhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0b01lcmdlLnB1c2goZXhpc3RpbmcpO1xuICAgICAgICAgICAgaWYgKHNvcnRhYmxlICYmICFzb3J0KSBzb3J0ID0gZXhpc3RpbmcuaGFzQ2hhbmdlZChzb3J0QXR0cik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghbW9kZWxNYXBbZXhpc3RpbmcuY2lkXSkge1xuICAgICAgICAgICAgbW9kZWxNYXBbZXhpc3RpbmcuY2lkXSA9IHRydWU7XG4gICAgICAgICAgICBzZXQucHVzaChleGlzdGluZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vZGVsc1tpXSA9IGV4aXN0aW5nO1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBuZXcsIHZhbGlkIG1vZGVsLCBwdXNoIGl0IHRvIHRoZSBgdG9BZGRgIGxpc3QuXG4gICAgICAgIH0gZWxzZSBpZiAoYWRkKSB7XG4gICAgICAgICAgbW9kZWwgPSBtb2RlbHNbaV0gPSB0aGlzLl9wcmVwYXJlTW9kZWwobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICAgICAgdG9BZGQucHVzaChtb2RlbCk7XG4gICAgICAgICAgICB0aGlzLl9hZGRSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgbW9kZWxNYXBbbW9kZWwuY2lkXSA9IHRydWU7XG4gICAgICAgICAgICBzZXQucHVzaChtb2RlbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBzdGFsZSBtb2RlbHMuXG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbW9kZWwgPSB0aGlzLm1vZGVsc1tpXTtcbiAgICAgICAgICBpZiAoIW1vZGVsTWFwW21vZGVsLmNpZF0pIHRvUmVtb3ZlLnB1c2gobW9kZWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b1JlbW92ZS5sZW5ndGgpIHRoaXMuX3JlbW92ZU1vZGVscyh0b1JlbW92ZSwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZSBpZiBzb3J0aW5nIGlzIG5lZWRlZCwgdXBkYXRlIGBsZW5ndGhgIGFuZCBzcGxpY2UgaW4gbmV3IG1vZGVscy5cbiAgICAgIHZhciBvcmRlckNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIHZhciByZXBsYWNlID0gIXNvcnRhYmxlICYmIGFkZCAmJiByZW1vdmU7XG4gICAgICBpZiAoc2V0Lmxlbmd0aCAmJiByZXBsYWNlKSB7XG4gICAgICAgIG9yZGVyQ2hhbmdlZCA9IHRoaXMubGVuZ3RoICE9PSBzZXQubGVuZ3RoIHx8IF8uc29tZSh0aGlzLm1vZGVscywgZnVuY3Rpb24obSwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gbSAhPT0gc2V0W2luZGV4XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubW9kZWxzLmxlbmd0aCA9IDA7XG4gICAgICAgIHNwbGljZSh0aGlzLm1vZGVscywgc2V0LCAwKTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGg7XG4gICAgICB9IGVsc2UgaWYgKHRvQWRkLmxlbmd0aCkge1xuICAgICAgICBpZiAoc29ydGFibGUpIHNvcnQgPSB0cnVlO1xuICAgICAgICBzcGxpY2UodGhpcy5tb2RlbHMsIHRvQWRkLCBhdCA9PSBudWxsID8gdGhpcy5sZW5ndGggOiBhdCk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5tb2RlbHMubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICAvLyBTaWxlbnRseSBzb3J0IHRoZSBjb2xsZWN0aW9uIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgaWYgKHNvcnQpIHRoaXMuc29ydCh7c2lsZW50OiB0cnVlfSk7XG5cbiAgICAgIC8vIFVubGVzcyBzaWxlbmNlZCwgaXQncyB0aW1lIHRvIGZpcmUgYWxsIGFwcHJvcHJpYXRlIGFkZC9zb3J0L3VwZGF0ZSBldmVudHMuXG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b0FkZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChhdCAhPSBudWxsKSBvcHRpb25zLmluZGV4ID0gYXQgKyBpO1xuICAgICAgICAgIG1vZGVsID0gdG9BZGRbaV07XG4gICAgICAgICAgbW9kZWwudHJpZ2dlcignYWRkJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3J0IHx8IG9yZGVyQ2hhbmdlZCkgdGhpcy50cmlnZ2VyKCdzb3J0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIGlmICh0b0FkZC5sZW5ndGggfHwgdG9SZW1vdmUubGVuZ3RoIHx8IHRvTWVyZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgb3B0aW9ucy5jaGFuZ2VzID0ge1xuICAgICAgICAgICAgYWRkZWQ6IHRvQWRkLFxuICAgICAgICAgICAgcmVtb3ZlZDogdG9SZW1vdmUsXG4gICAgICAgICAgICBtZXJnZWQ6IHRvTWVyZ2VcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMudHJpZ2dlcigndXBkYXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIHRoZSBhZGRlZCAob3IgbWVyZ2VkKSBtb2RlbCAob3IgbW9kZWxzKS5cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gV2hlbiB5b3UgaGF2ZSBtb3JlIGl0ZW1zIHRoYW4geW91IHdhbnQgdG8gYWRkIG9yIHJlbW92ZSBpbmRpdmlkdWFsbHksXG4gICAgLy8geW91IGNhbiByZXNldCB0aGUgZW50aXJlIHNldCB3aXRoIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCB3aXRob3V0IGZpcmluZ1xuICAgIC8vIGFueSBncmFudWxhciBgYWRkYCBvciBgcmVtb3ZlYCBldmVudHMuIEZpcmVzIGByZXNldGAgd2hlbiBmaW5pc2hlZC5cbiAgICAvLyBVc2VmdWwgZm9yIGJ1bGsgb3BlcmF0aW9ucyBhbmQgb3B0aW1pemF0aW9ucy5cbiAgICByZXNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW2ldLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMucHJldmlvdXNNb2RlbHMgPSB0aGlzLm1vZGVscztcbiAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICBtb2RlbHMgPSB0aGlzLmFkZChtb2RlbHMsIF8uZXh0ZW5kKHtzaWxlbnQ6IHRydWV9LCBvcHRpb25zKSk7XG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3Jlc2V0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHB1c2g6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogdGhpcy5sZW5ndGh9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBwb3A6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgdW5zaGlmdDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZChtb2RlbCwgXy5leHRlbmQoe2F0OiAwfSwgb3B0aW9ucykpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgYSBtb2RlbCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgc2hpZnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQoMCk7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBTbGljZSBvdXQgYSBzdWItYXJyYXkgb2YgbW9kZWxzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgc2xpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWNlLmFwcGx5KHRoaXMubW9kZWxzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYSBtb2RlbCBmcm9tIHRoZSBzZXQgYnkgaWQsIGNpZCwgbW9kZWwgb2JqZWN0IHdpdGggaWQgb3IgY2lkXG4gICAgLy8gcHJvcGVydGllcywgb3IgYW4gYXR0cmlidXRlcyBvYmplY3QgdGhhdCBpcyB0cmFuc2Zvcm1lZCB0aHJvdWdoIG1vZGVsSWQuXG4gICAgZ2V0OiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLl9ieUlkW29ial0gfHxcbiAgICAgICAgdGhpcy5fYnlJZFt0aGlzLm1vZGVsSWQob2JqLmF0dHJpYnV0ZXMgfHwgb2JqKV0gfHxcbiAgICAgICAgb2JqLmNpZCAmJiB0aGlzLl9ieUlkW29iai5jaWRdO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgbW9kZWwgaXMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgaGFzOiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0aGlzLmdldChvYmopICE9IG51bGw7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbW9kZWwgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgIGF0OiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggKz0gdGhpcy5sZW5ndGg7XG4gICAgICByZXR1cm4gdGhpcy5tb2RlbHNbaW5kZXhdO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm4gbW9kZWxzIHdpdGggbWF0Y2hpbmcgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBzaW1wbGUgY2FzZXMgb2ZcbiAgICAvLyBgZmlsdGVyYC5cbiAgICB3aGVyZTogZnVuY3Rpb24oYXR0cnMsIGZpcnN0KSB7XG4gICAgICByZXR1cm4gdGhpc1tmaXJzdCA/ICdmaW5kJyA6ICdmaWx0ZXInXShhdHRycyk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybiB0aGUgZmlyc3QgbW9kZWwgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlc1xuICAgIC8vIG9mIGBmaW5kYC5cbiAgICBmaW5kV2hlcmU6IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gdGhpcy53aGVyZShhdHRycywgdHJ1ZSk7XG4gICAgfSxcblxuICAgIC8vIEZvcmNlIHRoZSBjb2xsZWN0aW9uIHRvIHJlLXNvcnQgaXRzZWxmLiBZb3UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgdW5kZXJcbiAgICAvLyBub3JtYWwgY2lyY3Vtc3RhbmNlcywgYXMgdGhlIHNldCB3aWxsIG1haW50YWluIHNvcnQgb3JkZXIgYXMgZWFjaCBpdGVtXG4gICAgLy8gaXMgYWRkZWQuXG4gICAgc29ydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3I7XG4gICAgICBpZiAoIWNvbXBhcmF0b3IpIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNvcnQgYSBzZXQgd2l0aG91dCBhIGNvbXBhcmF0b3InKTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cbiAgICAgIHZhciBsZW5ndGggPSBjb21wYXJhdG9yLmxlbmd0aDtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24oY29tcGFyYXRvcikpIGNvbXBhcmF0b3IgPSBfLmJpbmQoY29tcGFyYXRvciwgdGhpcyk7XG5cbiAgICAgIC8vIFJ1biBzb3J0IGJhc2VkIG9uIHR5cGUgb2YgYGNvbXBhcmF0b3JgLlxuICAgICAgaWYgKGxlbmd0aCA9PT0gMSB8fCBfLmlzU3RyaW5nKGNvbXBhcmF0b3IpKSB7XG4gICAgICAgIHRoaXMubW9kZWxzID0gdGhpcy5zb3J0QnkoY29tcGFyYXRvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1vZGVscy5zb3J0KGNvbXBhcmF0b3IpO1xuICAgICAgfVxuICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy50cmlnZ2VyKCdzb3J0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUGx1Y2sgYW4gYXR0cmlidXRlIGZyb20gZWFjaCBtb2RlbCBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICBwbHVjazogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIHRoaXMubWFwKGF0dHIgKyAnJyk7XG4gICAgfSxcblxuICAgIC8vIEZldGNoIHRoZSBkZWZhdWx0IHNldCBvZiBtb2RlbHMgZm9yIHRoaXMgY29sbGVjdGlvbiwgcmVzZXR0aW5nIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24gd2hlbiB0aGV5IGFycml2ZS4gSWYgYHJlc2V0OiB0cnVlYCBpcyBwYXNzZWQsIHRoZSByZXNwb25zZVxuICAgIC8vIGRhdGEgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgYHJlc2V0YCBtZXRob2QgaW5zdGVhZCBvZiBgc2V0YC5cbiAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHtwYXJzZTogdHJ1ZX0sIG9wdGlvbnMpO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBvcHRpb25zLnJlc2V0ID8gJ3Jlc2V0JyA6ICdzZXQnO1xuICAgICAgICBjb2xsZWN0aW9uW21ldGhvZF0ocmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgY29sbGVjdGlvbi50cmlnZ2VyKCdzeW5jJywgY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgYSBtb2RlbCBpbiB0aGlzIGNvbGxlY3Rpb24uIEFkZCB0aGUgbW9kZWwgdG8gdGhlXG4gICAgLy8gY29sbGVjdGlvbiBpbW1lZGlhdGVseSwgdW5sZXNzIGB3YWl0OiB0cnVlYCBpcyBwYXNzZWQsIGluIHdoaWNoIGNhc2Ugd2VcbiAgICAvLyB3YWl0IGZvciB0aGUgc2VydmVyIHRvIGFncmVlLlxuICAgIGNyZWF0ZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgdmFyIHdhaXQgPSBvcHRpb25zLndhaXQ7XG4gICAgICBtb2RlbCA9IHRoaXMuX3ByZXBhcmVNb2RlbChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAoIW1vZGVsKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIXdhaXQpIHRoaXMuYWRkKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24obSwgcmVzcCwgY2FsbGJhY2tPcHRzKSB7XG4gICAgICAgIGlmICh3YWl0KSBjb2xsZWN0aW9uLmFkZChtLCBjYWxsYmFja09wdHMpO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKGNhbGxiYWNrT3B0cy5jb250ZXh0LCBtLCByZXNwLCBjYWxsYmFja09wdHMpO1xuICAgICAgfTtcbiAgICAgIG1vZGVsLnNhdmUobnVsbCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gYSBsaXN0IG9mIG1vZGVscyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgaXQgdGhyb3VnaC5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uIHdpdGggYW4gaWRlbnRpY2FsIGxpc3Qgb2YgbW9kZWxzIGFzIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscywge1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgICAgY29tcGFyYXRvcjogdGhpcy5jb21wYXJhdG9yXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gRGVmaW5lIGhvdyB0byB1bmlxdWVseSBpZGVudGlmeSBtb2RlbHMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgbW9kZWxJZDogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiBhdHRyc1t0aGlzLm1vZGVsLnByb3RvdHlwZS5pZEF0dHJpYnV0ZSB8fCAnaWQnXTtcbiAgICB9LFxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gcmVzZXQgYWxsIGludGVybmFsIHN0YXRlLiBDYWxsZWQgd2hlbiB0aGUgY29sbGVjdGlvblxuICAgIC8vIGlzIGZpcnN0IGluaXRpYWxpemVkIG9yIHJlc2V0LlxuICAgIF9yZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLm1vZGVscyA9IFtdO1xuICAgICAgdGhpcy5fYnlJZCAgPSB7fTtcbiAgICB9LFxuXG4gICAgLy8gUHJlcGFyZSBhIGhhc2ggb2YgYXR0cmlidXRlcyAob3Igb3RoZXIgbW9kZWwpIHRvIGJlIGFkZGVkIHRvIHRoaXNcbiAgICAvLyBjb2xsZWN0aW9uLlxuICAgIF9wcmVwYXJlTW9kZWw6IGZ1bmN0aW9uKGF0dHJzLCBvcHRpb25zKSB7XG4gICAgICBpZiAodGhpcy5faXNNb2RlbChhdHRycykpIHtcbiAgICAgICAgaWYgKCFhdHRycy5jb2xsZWN0aW9uKSBhdHRycy5jb2xsZWN0aW9uID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGF0dHJzO1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBvcHRpb25zLmNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdmFyIG1vZGVsID0gbmV3IHRoaXMubW9kZWwoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFtb2RlbC52YWxpZGF0aW9uRXJyb3IpIHJldHVybiBtb2RlbDtcbiAgICAgIHRoaXMudHJpZ2dlcignaW52YWxpZCcsIHRoaXMsIG1vZGVsLnZhbGlkYXRpb25FcnJvciwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCBjYWxsZWQgYnkgYm90aCByZW1vdmUgYW5kIHNldC5cbiAgICBfcmVtb3ZlTW9kZWxzOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciByZW1vdmVkID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vZGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLmdldChtb2RlbHNbaV0pO1xuICAgICAgICBpZiAoIW1vZGVsKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2YobW9kZWwpO1xuICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLmxlbmd0aC0tO1xuXG4gICAgICAgIC8vIFJlbW92ZSByZWZlcmVuY2VzIGJlZm9yZSB0cmlnZ2VyaW5nICdyZW1vdmUnIGV2ZW50IHRvIHByZXZlbnQgYW5cbiAgICAgICAgLy8gaW5maW5pdGUgbG9vcC4gIzM2OTNcbiAgICAgICAgZGVsZXRlIHRoaXMuX2J5SWRbbW9kZWwuY2lkXTtcbiAgICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgICBpZiAoaWQgIT0gbnVsbCkgZGVsZXRlIHRoaXMuX2J5SWRbaWRdO1xuXG4gICAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICBvcHRpb25zLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbW9kZWwudHJpZ2dlcigncmVtb3ZlJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVtb3ZlZC5wdXNoKG1vZGVsKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZW1vdmVkO1xuICAgIH0sXG5cbiAgICAvLyBNZXRob2QgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IHNob3VsZCBiZSBjb25zaWRlcmVkIGEgbW9kZWwgZm9yXG4gICAgLy8gdGhlIHB1cnBvc2VzIG9mIGFkZGluZyB0byB0aGUgY29sbGVjdGlvbi5cbiAgICBfaXNNb2RlbDogZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgIHJldHVybiBtb2RlbCBpbnN0YW5jZW9mIE1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gY3JlYXRlIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfYWRkUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5fYnlJZFttb2RlbC5jaWRdID0gbW9kZWw7XG4gICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICBpZiAoaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFtpZF0gPSBtb2RlbDtcbiAgICAgIG1vZGVsLm9uKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gc2V2ZXIgYSBtb2RlbCdzIHRpZXMgdG8gYSBjb2xsZWN0aW9uLlxuICAgIF9yZW1vdmVSZWZlcmVuY2U6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5jaWRdO1xuICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKGlkICE9IG51bGwpIGRlbGV0ZSB0aGlzLl9ieUlkW2lkXTtcbiAgICAgIGlmICh0aGlzID09PSBtb2RlbC5jb2xsZWN0aW9uKSBkZWxldGUgbW9kZWwuY29sbGVjdGlvbjtcbiAgICAgIG1vZGVsLm9mZignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIGNhbGxlZCBldmVyeSB0aW1lIGEgbW9kZWwgaW4gdGhlIHNldCBmaXJlcyBhbiBldmVudC5cbiAgICAvLyBTZXRzIG5lZWQgdG8gdXBkYXRlIHRoZWlyIGluZGV4ZXMgd2hlbiBtb2RlbHMgY2hhbmdlIGlkcy4gQWxsIG90aGVyXG4gICAgLy8gZXZlbnRzIHNpbXBseSBwcm94eSB0aHJvdWdoLiBcImFkZFwiIGFuZCBcInJlbW92ZVwiIGV2ZW50cyB0aGF0IG9yaWdpbmF0ZVxuICAgIC8vIGluIG90aGVyIGNvbGxlY3Rpb25zIGFyZSBpZ25vcmVkLlxuICAgIF9vbk1vZGVsRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlbCwgY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIGlmICgoZXZlbnQgPT09ICdhZGQnIHx8IGV2ZW50ID09PSAncmVtb3ZlJykgJiYgY29sbGVjdGlvbiAhPT0gdGhpcykgcmV0dXJuO1xuICAgICAgICBpZiAoZXZlbnQgPT09ICdkZXN0cm95JykgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoZXZlbnQgPT09ICdjaGFuZ2UnKSB7XG4gICAgICAgICAgdmFyIHByZXZJZCA9IHRoaXMubW9kZWxJZChtb2RlbC5wcmV2aW91c0F0dHJpYnV0ZXMoKSk7XG4gICAgICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgICAgIGlmIChwcmV2SWQgIT09IGlkKSB7XG4gICAgICAgICAgICBpZiAocHJldklkICE9IG51bGwpIGRlbGV0ZSB0aGlzLl9ieUlkW3ByZXZJZF07XG4gICAgICAgICAgICBpZiAoaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFtpZF0gPSBtb2RlbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgQ29sbGVjdGlvbi5cbiAgLy8gOTAlIG9mIHRoZSBjb3JlIHVzZWZ1bG5lc3Mgb2YgQmFja2JvbmUgQ29sbGVjdGlvbnMgaXMgYWN0dWFsbHkgaW1wbGVtZW50ZWRcbiAgLy8gcmlnaHQgaGVyZTpcbiAgdmFyIGNvbGxlY3Rpb25NZXRob2RzID0ge2ZvckVhY2g6IDMsIGVhY2g6IDMsIG1hcDogMywgY29sbGVjdDogMywgcmVkdWNlOiAwLFxuICAgICAgZm9sZGw6IDAsIGluamVjdDogMCwgcmVkdWNlUmlnaHQ6IDAsIGZvbGRyOiAwLCBmaW5kOiAzLCBkZXRlY3Q6IDMsIGZpbHRlcjogMyxcbiAgICAgIHNlbGVjdDogMywgcmVqZWN0OiAzLCBldmVyeTogMywgYWxsOiAzLCBzb21lOiAzLCBhbnk6IDMsIGluY2x1ZGU6IDMsIGluY2x1ZGVzOiAzLFxuICAgICAgY29udGFpbnM6IDMsIGludm9rZTogMCwgbWF4OiAzLCBtaW46IDMsIHRvQXJyYXk6IDEsIHNpemU6IDEsIGZpcnN0OiAzLFxuICAgICAgaGVhZDogMywgdGFrZTogMywgaW5pdGlhbDogMywgcmVzdDogMywgdGFpbDogMywgZHJvcDogMywgbGFzdDogMyxcbiAgICAgIHdpdGhvdXQ6IDAsIGRpZmZlcmVuY2U6IDAsIGluZGV4T2Y6IDMsIHNodWZmbGU6IDEsIGxhc3RJbmRleE9mOiAzLFxuICAgICAgaXNFbXB0eTogMSwgY2hhaW46IDEsIHNhbXBsZTogMywgcGFydGl0aW9uOiAzLCBncm91cEJ5OiAzLCBjb3VudEJ5OiAzLFxuICAgICAgc29ydEJ5OiAzLCBpbmRleEJ5OiAzLCBmaW5kSW5kZXg6IDMsIGZpbmRMYXN0SW5kZXg6IDN9O1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYENvbGxlY3Rpb24jbW9kZWxzYC5cbiAgYWRkVW5kZXJzY29yZU1ldGhvZHMoQ29sbGVjdGlvbiwgY29sbGVjdGlvbk1ldGhvZHMsICdtb2RlbHMnKTtcblxuICAvLyBCYWNrYm9uZS5WaWV3XG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBCYWNrYm9uZSBWaWV3cyBhcmUgYWxtb3N0IG1vcmUgY29udmVudGlvbiB0aGFuIHRoZXkgYXJlIGFjdHVhbCBjb2RlLiBBIFZpZXdcbiAgLy8gaXMgc2ltcGx5IGEgSmF2YVNjcmlwdCBvYmplY3QgdGhhdCByZXByZXNlbnRzIGEgbG9naWNhbCBjaHVuayBvZiBVSSBpbiB0aGVcbiAgLy8gRE9NLiBUaGlzIG1pZ2h0IGJlIGEgc2luZ2xlIGl0ZW0sIGFuIGVudGlyZSBsaXN0LCBhIHNpZGViYXIgb3IgcGFuZWwsIG9yXG4gIC8vIGV2ZW4gdGhlIHN1cnJvdW5kaW5nIGZyYW1lIHdoaWNoIHdyYXBzIHlvdXIgd2hvbGUgYXBwLiBEZWZpbmluZyBhIGNodW5rIG9mXG4gIC8vIFVJIGFzIGEgKipWaWV3KiogYWxsb3dzIHlvdSB0byBkZWZpbmUgeW91ciBET00gZXZlbnRzIGRlY2xhcmF0aXZlbHksIHdpdGhvdXRcbiAgLy8gaGF2aW5nIHRvIHdvcnJ5IGFib3V0IHJlbmRlciBvcmRlciAuLi4gYW5kIG1ha2VzIGl0IGVhc3kgZm9yIHRoZSB2aWV3IHRvXG4gIC8vIHJlYWN0IHRvIHNwZWNpZmljIGNoYW5nZXMgaW4gdGhlIHN0YXRlIG9mIHlvdXIgbW9kZWxzLlxuXG4gIC8vIENyZWF0aW5nIGEgQmFja2JvbmUuVmlldyBjcmVhdGVzIGl0cyBpbml0aWFsIGVsZW1lbnQgb3V0c2lkZSBvZiB0aGUgRE9NLFxuICAvLyBpZiBhbiBleGlzdGluZyBlbGVtZW50IGlzIG5vdCBwcm92aWRlZC4uLlxuICB2YXIgVmlldyA9IEJhY2tib25lLlZpZXcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKCd2aWV3Jyk7XG4gICAgXy5leHRlbmQodGhpcywgXy5waWNrKG9wdGlvbnMsIHZpZXdPcHRpb25zKSk7XG4gICAgdGhpcy5fZW5zdXJlRWxlbWVudCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIENhY2hlZCByZWdleCB0byBzcGxpdCBrZXlzIGZvciBgZGVsZWdhdGVgLlxuICB2YXIgZGVsZWdhdGVFdmVudFNwbGl0dGVyID0gL14oXFxTKylcXHMqKC4qKSQvO1xuXG4gIC8vIExpc3Qgb2YgdmlldyBvcHRpb25zIHRvIGJlIHNldCBhcyBwcm9wZXJ0aWVzLlxuICB2YXIgdmlld09wdGlvbnMgPSBbJ21vZGVsJywgJ2NvbGxlY3Rpb24nLCAnZWwnLCAnaWQnLCAnYXR0cmlidXRlcycsICdjbGFzc05hbWUnLCAndGFnTmFtZScsICdldmVudHMnXTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuVmlldyoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKFZpZXcucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGB0YWdOYW1lYCBvZiBhIFZpZXcncyBlbGVtZW50IGlzIGBcImRpdlwiYC5cbiAgICB0YWdOYW1lOiAnZGl2JyxcblxuICAgIC8vIGpRdWVyeSBkZWxlZ2F0ZSBmb3IgZWxlbWVudCBsb29rdXAsIHNjb3BlZCB0byBET00gZWxlbWVudHMgd2l0aGluIHRoZVxuICAgIC8vIGN1cnJlbnQgdmlldy4gVGhpcyBzaG91bGQgYmUgcHJlZmVycmVkIHRvIGdsb2JhbCBsb29rdXBzIHdoZXJlIHBvc3NpYmxlLlxuICAgICQ6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gdGhpcy4kZWwuZmluZChzZWxlY3Rvcik7XG4gICAgfSxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vICoqcmVuZGVyKiogaXMgdGhlIGNvcmUgZnVuY3Rpb24gdGhhdCB5b3VyIHZpZXcgc2hvdWxkIG92ZXJyaWRlLCBpbiBvcmRlclxuICAgIC8vIHRvIHBvcHVsYXRlIGl0cyBlbGVtZW50IChgdGhpcy5lbGApLCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBIVE1MLiBUaGVcbiAgICAvLyBjb252ZW50aW9uIGlzIGZvciAqKnJlbmRlcioqIHRvIGFsd2F5cyByZXR1cm4gYHRoaXNgLlxuICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIHRoaXMgdmlldyBieSB0YWtpbmcgdGhlIGVsZW1lbnQgb3V0IG9mIHRoZSBET00sIGFuZCByZW1vdmluZyBhbnlcbiAgICAvLyBhcHBsaWNhYmxlIEJhY2tib25lLkV2ZW50cyBsaXN0ZW5lcnMuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQoKTtcbiAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSB0aGlzIHZpZXcncyBlbGVtZW50IGZyb20gdGhlIGRvY3VtZW50IGFuZCBhbGwgZXZlbnQgbGlzdGVuZXJzXG4gICAgLy8gYXR0YWNoZWQgdG8gaXQuIEV4cG9zZWQgZm9yIHN1YmNsYXNzZXMgdXNpbmcgYW4gYWx0ZXJuYXRpdmUgRE9NXG4gICAgLy8gbWFuaXB1bGF0aW9uIEFQSS5cbiAgICBfcmVtb3ZlRWxlbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICB9LFxuXG4gICAgLy8gQ2hhbmdlIHRoZSB2aWV3J3MgZWxlbWVudCAoYHRoaXMuZWxgIHByb3BlcnR5KSBhbmQgcmUtZGVsZWdhdGUgdGhlXG4gICAgLy8gdmlldydzIGV2ZW50cyBvbiB0aGUgbmV3IGVsZW1lbnQuXG4gICAgc2V0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICB0aGlzLl9zZXRFbGVtZW50KGVsZW1lbnQpO1xuICAgICAgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZXMgdGhlIGB0aGlzLmVsYCBhbmQgYHRoaXMuJGVsYCByZWZlcmVuY2VzIGZvciB0aGlzIHZpZXcgdXNpbmcgdGhlXG4gICAgLy8gZ2l2ZW4gYGVsYC4gYGVsYCBjYW4gYmUgYSBDU1Mgc2VsZWN0b3Igb3IgYW4gSFRNTCBzdHJpbmcsIGEgalF1ZXJ5XG4gICAgLy8gY29udGV4dCBvciBhbiBlbGVtZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZSB0aGlzIHRvIHV0aWxpemUgYW5cbiAgICAvLyBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSSBhbmQgYXJlIG9ubHkgcmVxdWlyZWQgdG8gc2V0IHRoZVxuICAgIC8vIGB0aGlzLmVsYCBwcm9wZXJ0eS5cbiAgICBfc2V0RWxlbWVudDogZnVuY3Rpb24oZWwpIHtcbiAgICAgIHRoaXMuJGVsID0gZWwgaW5zdGFuY2VvZiBCYWNrYm9uZS4kID8gZWwgOiBCYWNrYm9uZS4kKGVsKTtcbiAgICAgIHRoaXMuZWwgPSB0aGlzLiRlbFswXTtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGNhbGxiYWNrcywgd2hlcmUgYHRoaXMuZXZlbnRzYCBpcyBhIGhhc2ggb2ZcbiAgICAvL1xuICAgIC8vICp7XCJldmVudCBzZWxlY3RvclwiOiBcImNhbGxiYWNrXCJ9KlxuICAgIC8vXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAnbW91c2Vkb3duIC50aXRsZSc6ICAnZWRpdCcsXG4gICAgLy8gICAgICAgJ2NsaWNrIC5idXR0b24nOiAgICAgJ3NhdmUnLFxuICAgIC8vICAgICAgICdjbGljayAub3Blbic6ICAgICAgIGZ1bmN0aW9uKGUpIHsgLi4uIH1cbiAgICAvLyAgICAgfVxuICAgIC8vXG4gICAgLy8gcGFpcnMuIENhbGxiYWNrcyB3aWxsIGJlIGJvdW5kIHRvIHRoZSB2aWV3LCB3aXRoIGB0aGlzYCBzZXQgcHJvcGVybHkuXG4gICAgLy8gVXNlcyBldmVudCBkZWxlZ2F0aW9uIGZvciBlZmZpY2llbmN5LlxuICAgIC8vIE9taXR0aW5nIHRoZSBzZWxlY3RvciBiaW5kcyB0aGUgZXZlbnQgdG8gYHRoaXMuZWxgLlxuICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcbiAgICAgIGV2ZW50cyB8fCAoZXZlbnRzID0gXy5yZXN1bHQodGhpcywgJ2V2ZW50cycpKTtcbiAgICAgIGlmICghZXZlbnRzKSByZXR1cm4gdGhpcztcbiAgICAgIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgZm9yICh2YXIga2V5IGluIGV2ZW50cykge1xuICAgICAgICB2YXIgbWV0aG9kID0gZXZlbnRzW2tleV07XG4gICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKG1ldGhvZCkpIG1ldGhvZCA9IHRoaXNbbWV0aG9kXTtcbiAgICAgICAgaWYgKCFtZXRob2QpIGNvbnRpbnVlO1xuICAgICAgICB2YXIgbWF0Y2ggPSBrZXkubWF0Y2goZGVsZWdhdGVFdmVudFNwbGl0dGVyKTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0ZShtYXRjaFsxXSwgbWF0Y2hbMl0sIF8uYmluZChtZXRob2QsIHRoaXMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIHZpZXcncyBlbGVtZW50IChvciBhIGNoaWxkIGVsZW1lbnRcbiAgICAvLyB1c2luZyBgc2VsZWN0b3JgKS4gVGhpcyBvbmx5IHdvcmtzIGZvciBkZWxlZ2F0ZS1hYmxlIGV2ZW50czogbm90IGBmb2N1c2AsXG4gICAgLy8gYGJsdXJgLCBhbmQgbm90IGBjaGFuZ2VgLCBgc3VibWl0YCwgYW5kIGByZXNldGAgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgZGVsZWdhdGU6IGZ1bmN0aW9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIGxpc3RlbmVyKSB7XG4gICAgICB0aGlzLiRlbC5vbihldmVudE5hbWUgKyAnLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkLCBzZWxlY3RvciwgbGlzdGVuZXIpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENsZWFycyBhbGwgY2FsbGJhY2tzIHByZXZpb3VzbHkgYm91bmQgdG8gdGhlIHZpZXcgYnkgYGRlbGVnYXRlRXZlbnRzYC5cbiAgICAvLyBZb3UgdXN1YWxseSBkb24ndCBuZWVkIHRvIHVzZSB0aGlzLCBidXQgbWF5IHdpc2ggdG8gaWYgeW91IGhhdmUgbXVsdGlwbGVcbiAgICAvLyBCYWNrYm9uZSB2aWV3cyBhdHRhY2hlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudC5cbiAgICB1bmRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLiRlbCkgdGhpcy4kZWwub2ZmKCcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEEgZmluZXItZ3JhaW5lZCBgdW5kZWxlZ2F0ZUV2ZW50c2AgZm9yIHJlbW92aW5nIGEgc2luZ2xlIGRlbGVnYXRlZCBldmVudC5cbiAgICAvLyBgc2VsZWN0b3JgIGFuZCBgbGlzdGVuZXJgIGFyZSBib3RoIG9wdGlvbmFsLlxuICAgIHVuZGVsZWdhdGU6IGZ1bmN0aW9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIGxpc3RlbmVyKSB7XG4gICAgICB0aGlzLiRlbC5vZmYoZXZlbnROYW1lICsgJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCwgc2VsZWN0b3IsIGxpc3RlbmVyKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBQcm9kdWNlcyBhIERPTSBlbGVtZW50IHRvIGJlIGFzc2lnbmVkIHRvIHlvdXIgdmlldy4gRXhwb3NlZCBmb3JcbiAgICAvLyBzdWJjbGFzc2VzIHVzaW5nIGFuIGFsdGVybmF0aXZlIERPTSBtYW5pcHVsYXRpb24gQVBJLlxuICAgIF9jcmVhdGVFbGVtZW50OiBmdW5jdGlvbih0YWdOYW1lKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgICB9LFxuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIFZpZXcgaGFzIGEgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAgLy8gSWYgYHRoaXMuZWxgIGlzIGEgc3RyaW5nLCBwYXNzIGl0IHRocm91Z2ggYCQoKWAsIHRha2UgdGhlIGZpcnN0XG4gICAgLy8gbWF0Y2hpbmcgZWxlbWVudCwgYW5kIHJlLWFzc2lnbiBpdCB0byBgZWxgLiBPdGhlcndpc2UsIGNyZWF0ZVxuICAgIC8vIGFuIGVsZW1lbnQgZnJvbSB0aGUgYGlkYCwgYGNsYXNzTmFtZWAgYW5kIGB0YWdOYW1lYCBwcm9wZXJ0aWVzLlxuICAgIF9lbnN1cmVFbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5lbCkge1xuICAgICAgICB2YXIgYXR0cnMgPSBfLmV4dGVuZCh7fSwgXy5yZXN1bHQodGhpcywgJ2F0dHJpYnV0ZXMnKSk7XG4gICAgICAgIGlmICh0aGlzLmlkKSBhdHRycy5pZCA9IF8ucmVzdWx0KHRoaXMsICdpZCcpO1xuICAgICAgICBpZiAodGhpcy5jbGFzc05hbWUpIGF0dHJzWydjbGFzcyddID0gXy5yZXN1bHQodGhpcywgJ2NsYXNzTmFtZScpO1xuICAgICAgICB0aGlzLnNldEVsZW1lbnQodGhpcy5fY3JlYXRlRWxlbWVudChfLnJlc3VsdCh0aGlzLCAndGFnTmFtZScpKSk7XG4gICAgICAgIHRoaXMuX3NldEF0dHJpYnV0ZXMoYXR0cnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50KF8ucmVzdWx0KHRoaXMsICdlbCcpKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gU2V0IGF0dHJpYnV0ZXMgZnJvbSBhIGhhc2ggb24gdGhpcyB2aWV3J3MgZWxlbWVudC4gIEV4cG9zZWQgZm9yXG4gICAgLy8gc3ViY2xhc3NlcyB1c2luZyBhbiBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSS5cbiAgICBfc2V0QXR0cmlidXRlczogZnVuY3Rpb24oYXR0cmlidXRlcykge1xuICAgICAgdGhpcy4kZWwuYXR0cihhdHRyaWJ1dGVzKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuc3luY1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIG1hbm5lciBpbiB3aGljaCBCYWNrYm9uZSBwZXJzaXN0c1xuICAvLyBtb2RlbHMgdG8gdGhlIHNlcnZlci4gWW91IHdpbGwgYmUgcGFzc2VkIHRoZSB0eXBlIG9mIHJlcXVlc3QsIGFuZCB0aGVcbiAgLy8gbW9kZWwgaW4gcXVlc3Rpb24uIEJ5IGRlZmF1bHQsIG1ha2VzIGEgUkVTVGZ1bCBBamF4IHJlcXVlc3RcbiAgLy8gdG8gdGhlIG1vZGVsJ3MgYHVybCgpYC4gU29tZSBwb3NzaWJsZSBjdXN0b21pemF0aW9ucyBjb3VsZCBiZTpcbiAgLy9cbiAgLy8gKiBVc2UgYHNldFRpbWVvdXRgIHRvIGJhdGNoIHJhcGlkLWZpcmUgdXBkYXRlcyBpbnRvIGEgc2luZ2xlIHJlcXVlc3QuXG4gIC8vICogU2VuZCB1cCB0aGUgbW9kZWxzIGFzIFhNTCBpbnN0ZWFkIG9mIEpTT04uXG4gIC8vICogUGVyc2lzdCBtb2RlbHMgdmlhIFdlYlNvY2tldHMgaW5zdGVhZCBvZiBBamF4LlxuICAvL1xuICAvLyBUdXJuIG9uIGBCYWNrYm9uZS5lbXVsYXRlSFRUUGAgaW4gb3JkZXIgdG8gc2VuZCBgUFVUYCBhbmQgYERFTEVURWAgcmVxdWVzdHNcbiAgLy8gYXMgYFBPU1RgLCB3aXRoIGEgYF9tZXRob2RgIHBhcmFtZXRlciBjb250YWluaW5nIHRoZSB0cnVlIEhUVFAgbWV0aG9kLFxuICAvLyBhcyB3ZWxsIGFzIGFsbCByZXF1ZXN0cyB3aXRoIHRoZSBib2R5IGFzIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgXG4gIC8vIGluc3RlYWQgb2YgYGFwcGxpY2F0aW9uL2pzb25gIHdpdGggdGhlIG1vZGVsIGluIGEgcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgLy8gVXNlZnVsIHdoZW4gaW50ZXJmYWNpbmcgd2l0aCBzZXJ2ZXItc2lkZSBsYW5ndWFnZXMgbGlrZSAqKlBIUCoqIHRoYXQgbWFrZVxuICAvLyBpdCBkaWZmaWN1bHQgdG8gcmVhZCB0aGUgYm9keSBvZiBgUFVUYCByZXF1ZXN0cy5cbiAgQmFja2JvbmUuc3luYyA9IGZ1bmN0aW9uKG1ldGhvZCwgbW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IG1ldGhvZE1hcFttZXRob2RdO1xuXG4gICAgLy8gRGVmYXVsdCBvcHRpb25zLCB1bmxlc3Mgc3BlY2lmaWVkLlxuICAgIF8uZGVmYXVsdHMob3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KSwge1xuICAgICAgZW11bGF0ZUhUVFA6IEJhY2tib25lLmVtdWxhdGVIVFRQLFxuICAgICAgZW11bGF0ZUpTT046IEJhY2tib25lLmVtdWxhdGVKU09OXG4gICAgfSk7XG5cbiAgICAvLyBEZWZhdWx0IEpTT04tcmVxdWVzdCBvcHRpb25zLlxuICAgIHZhciBwYXJhbXMgPSB7dHlwZTogdHlwZSwgZGF0YVR5cGU6ICdqc29uJ307XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIGEgVVJMLlxuICAgIGlmICghb3B0aW9ucy51cmwpIHtcbiAgICAgIHBhcmFtcy51cmwgPSBfLnJlc3VsdChtb2RlbCwgJ3VybCcpIHx8IHVybEVycm9yKCk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoYXQgd2UgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgcmVxdWVzdCBkYXRhLlxuICAgIGlmIChvcHRpb25zLmRhdGEgPT0gbnVsbCAmJiBtb2RlbCAmJiAobWV0aG9kID09PSAnY3JlYXRlJyB8fCBtZXRob2QgPT09ICd1cGRhdGUnIHx8IG1ldGhvZCA9PT0gJ3BhdGNoJykpIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgIHBhcmFtcy5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5hdHRycyB8fCBtb2RlbC50b0pTT04ob3B0aW9ucykpO1xuICAgIH1cblxuICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEpTT04gYnkgZW5jb2RpbmcgdGhlIHJlcXVlc3QgaW50byBhbiBIVE1MLWZvcm0uXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuICAgICAgcGFyYW1zLmRhdGEgPSBwYXJhbXMuZGF0YSA/IHttb2RlbDogcGFyYW1zLmRhdGF9IDoge307XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSFRUUCBieSBtaW1pY2tpbmcgdGhlIEhUVFAgbWV0aG9kIHdpdGggYF9tZXRob2RgXG4gICAgLy8gQW5kIGFuIGBYLUhUVFAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUhUVFAgJiYgKHR5cGUgPT09ICdQVVQnIHx8IHR5cGUgPT09ICdERUxFVEUnIHx8IHR5cGUgPT09ICdQQVRDSCcpKSB7XG4gICAgICBwYXJhbXMudHlwZSA9ICdQT1NUJztcbiAgICAgIGlmIChvcHRpb25zLmVtdWxhdGVKU09OKSBwYXJhbXMuZGF0YS5fbWV0aG9kID0gdHlwZTtcbiAgICAgIHZhciBiZWZvcmVTZW5kID0gb3B0aW9ucy5iZWZvcmVTZW5kO1xuICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUhUVFAtTWV0aG9kLU92ZXJyaWRlJywgdHlwZSk7XG4gICAgICAgIGlmIChiZWZvcmVTZW5kKSByZXR1cm4gYmVmb3JlU2VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBwcm9jZXNzIGRhdGEgb24gYSBub24tR0VUIHJlcXVlc3QuXG4gICAgaWYgKHBhcmFtcy50eXBlICE9PSAnR0VUJyAmJiAhb3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLnByb2Nlc3NEYXRhID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gUGFzcyBhbG9uZyBgdGV4dFN0YXR1c2AgYW5kIGBlcnJvclRocm93bmAgZnJvbSBqUXVlcnkuXG4gICAgdmFyIGVycm9yID0gb3B0aW9ucy5lcnJvcjtcbiAgICBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24oeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgb3B0aW9ucy50ZXh0U3RhdHVzID0gdGV4dFN0YXR1cztcbiAgICAgIG9wdGlvbnMuZXJyb3JUaHJvd24gPSBlcnJvclRocm93bjtcbiAgICAgIGlmIChlcnJvcikgZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuICAgIH07XG5cbiAgICAvLyBNYWtlIHRoZSByZXF1ZXN0LCBhbGxvd2luZyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnkgQWpheCBvcHRpb25zLlxuICAgIHZhciB4aHIgPSBvcHRpb25zLnhociA9IEJhY2tib25lLmFqYXgoXy5leHRlbmQocGFyYW1zLCBvcHRpb25zKSk7XG4gICAgbW9kZWwudHJpZ2dlcigncmVxdWVzdCcsIG1vZGVsLCB4aHIsIG9wdGlvbnMpO1xuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgLy8gTWFwIGZyb20gQ1JVRCB0byBIVFRQIGZvciBvdXIgZGVmYXVsdCBgQmFja2JvbmUuc3luY2AgaW1wbGVtZW50YXRpb24uXG4gIHZhciBtZXRob2RNYXAgPSB7XG4gICAgJ2NyZWF0ZSc6ICdQT1NUJyxcbiAgICAndXBkYXRlJzogJ1BVVCcsXG4gICAgJ3BhdGNoJzogJ1BBVENIJyxcbiAgICAnZGVsZXRlJzogJ0RFTEVURScsXG4gICAgJ3JlYWQnOiAnR0VUJ1xuICB9O1xuXG4gIC8vIFNldCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBgQmFja2JvbmUuYWpheGAgdG8gcHJveHkgdGhyb3VnaCB0byBgJGAuXG4gIC8vIE92ZXJyaWRlIHRoaXMgaWYgeW91J2QgbGlrZSB0byB1c2UgYSBkaWZmZXJlbnQgbGlicmFyeS5cbiAgQmFja2JvbmUuYWpheCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS4kLmFqYXguYXBwbHkoQmFja2JvbmUuJCwgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBCYWNrYm9uZS5Sb3V0ZXJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUm91dGVycyBtYXAgZmF1eC1VUkxzIHRvIGFjdGlvbnMsIGFuZCBmaXJlIGV2ZW50cyB3aGVuIHJvdXRlcyBhcmVcbiAgLy8gbWF0Y2hlZC4gQ3JlYXRpbmcgYSBuZXcgb25lIHNldHMgaXRzIGByb3V0ZXNgIGhhc2gsIGlmIG5vdCBzZXQgc3RhdGljYWxseS5cbiAgdmFyIFJvdXRlciA9IEJhY2tib25lLlJvdXRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLnJvdXRlcykgdGhpcy5yb3V0ZXMgPSBvcHRpb25zLnJvdXRlcztcbiAgICB0aGlzLl9iaW5kUm91dGVzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm9yIG1hdGNoaW5nIG5hbWVkIHBhcmFtIHBhcnRzIGFuZCBzcGxhdHRlZFxuICAvLyBwYXJ0cyBvZiByb3V0ZSBzdHJpbmdzLlxuICB2YXIgb3B0aW9uYWxQYXJhbSA9IC9cXCgoLio/KVxcKS9nO1xuICB2YXIgbmFtZWRQYXJhbSAgICA9IC8oXFwoXFw/KT86XFx3Ky9nO1xuICB2YXIgc3BsYXRQYXJhbSAgICA9IC9cXCpcXHcrL2c7XG4gIHZhciBlc2NhcGVSZWdFeHAgID0gL1tcXC17fVxcW1xcXSs/LixcXFxcXFxeJHwjXFxzXS9nO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5Sb3V0ZXIqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChSb3V0ZXIucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIE1hbnVhbGx5IGJpbmQgYSBzaW5nbGUgbmFtZWQgcm91dGUgdG8gYSBjYWxsYmFjay4gRm9yIGV4YW1wbGU6XG4gICAgLy9cbiAgICAvLyAgICAgdGhpcy5yb3V0ZSgnc2VhcmNoLzpxdWVyeS9wOm51bScsICdzZWFyY2gnLCBmdW5jdGlvbihxdWVyeSwgbnVtKSB7XG4gICAgLy8gICAgICAgLi4uXG4gICAgLy8gICAgIH0pO1xuICAgIC8vXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCFfLmlzUmVnRXhwKHJvdXRlKSkgcm91dGUgPSB0aGlzLl9yb3V0ZVRvUmVnRXhwKHJvdXRlKTtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuYW1lO1xuICAgICAgICBuYW1lID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IHRoaXNbbmFtZV07XG4gICAgICB2YXIgcm91dGVyID0gdGhpcztcbiAgICAgIEJhY2tib25lLmhpc3Rvcnkucm91dGUocm91dGUsIGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gcm91dGVyLl9leHRyYWN0UGFyYW1ldGVycyhyb3V0ZSwgZnJhZ21lbnQpO1xuICAgICAgICBpZiAocm91dGVyLmV4ZWN1dGUoY2FsbGJhY2ssIGFyZ3MsIG5hbWUpICE9PSBmYWxzZSkge1xuICAgICAgICAgIHJvdXRlci50cmlnZ2VyLmFwcGx5KHJvdXRlciwgWydyb3V0ZTonICsgbmFtZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICByb3V0ZXIudHJpZ2dlcigncm91dGUnLCBuYW1lLCBhcmdzKTtcbiAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnRyaWdnZXIoJ3JvdXRlJywgcm91dGVyLCBuYW1lLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gRXhlY3V0ZSBhIHJvdXRlIGhhbmRsZXIgd2l0aCB0aGUgcHJvdmlkZWQgcGFyYW1ldGVycy4gIFRoaXMgaXMgYW5cbiAgICAvLyBleGNlbGxlbnQgcGxhY2UgdG8gZG8gcHJlLXJvdXRlIHNldHVwIG9yIHBvc3Qtcm91dGUgY2xlYW51cC5cbiAgICBleGVjdXRlOiBmdW5jdGlvbihjYWxsYmFjaywgYXJncywgbmFtZSkge1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9LFxuXG4gICAgLy8gU2ltcGxlIHByb3h5IHRvIGBCYWNrYm9uZS5oaXN0b3J5YCB0byBzYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoZnJhZ21lbnQsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEJpbmQgYWxsIGRlZmluZWQgcm91dGVzIHRvIGBCYWNrYm9uZS5oaXN0b3J5YC4gV2UgaGF2ZSB0byByZXZlcnNlIHRoZVxuICAgIC8vIG9yZGVyIG9mIHRoZSByb3V0ZXMgaGVyZSB0byBzdXBwb3J0IGJlaGF2aW9yIHdoZXJlIHRoZSBtb3N0IGdlbmVyYWxcbiAgICAvLyByb3V0ZXMgY2FuIGJlIGRlZmluZWQgYXQgdGhlIGJvdHRvbSBvZiB0aGUgcm91dGUgbWFwLlxuICAgIF9iaW5kUm91dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5yb3V0ZXMpIHJldHVybjtcbiAgICAgIHRoaXMucm91dGVzID0gXy5yZXN1bHQodGhpcywgJ3JvdXRlcycpO1xuICAgICAgdmFyIHJvdXRlLCByb3V0ZXMgPSBfLmtleXModGhpcy5yb3V0ZXMpO1xuICAgICAgd2hpbGUgKChyb3V0ZSA9IHJvdXRlcy5wb3AoKSkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnJvdXRlKHJvdXRlLCB0aGlzLnJvdXRlc1tyb3V0ZV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBDb252ZXJ0IGEgcm91dGUgc3RyaW5nIGludG8gYSByZWd1bGFyIGV4cHJlc3Npb24sIHN1aXRhYmxlIGZvciBtYXRjaGluZ1xuICAgIC8vIGFnYWluc3QgdGhlIGN1cnJlbnQgbG9jYXRpb24gaGFzaC5cbiAgICBfcm91dGVUb1JlZ0V4cDogZnVuY3Rpb24ocm91dGUpIHtcbiAgICAgIHJvdXRlID0gcm91dGUucmVwbGFjZShlc2NhcGVSZWdFeHAsICdcXFxcJCYnKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG9wdGlvbmFsUGFyYW0sICcoPzokMSk/JylcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShuYW1lZFBhcmFtLCBmdW5jdGlvbihtYXRjaCwgb3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25hbCA/IG1hdGNoIDogJyhbXi8/XSspJztcbiAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKHNwbGF0UGFyYW0sICcoW14/XSo/KScpO1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcm91dGUgKyAnKD86XFxcXD8oW1xcXFxzXFxcXFNdKikpPyQnKTtcbiAgICB9LFxuXG4gICAgLy8gR2l2ZW4gYSByb3V0ZSwgYW5kIGEgVVJMIGZyYWdtZW50IHRoYXQgaXQgbWF0Y2hlcywgcmV0dXJuIHRoZSBhcnJheSBvZlxuICAgIC8vIGV4dHJhY3RlZCBkZWNvZGVkIHBhcmFtZXRlcnMuIEVtcHR5IG9yIHVubWF0Y2hlZCBwYXJhbWV0ZXJzIHdpbGwgYmVcbiAgICAvLyB0cmVhdGVkIGFzIGBudWxsYCB0byBub3JtYWxpemUgY3Jvc3MtYnJvd3NlciBiZWhhdmlvci5cbiAgICBfZXh0cmFjdFBhcmFtZXRlcnM6IGZ1bmN0aW9uKHJvdXRlLCBmcmFnbWVudCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHJvdXRlLmV4ZWMoZnJhZ21lbnQpLnNsaWNlKDEpO1xuICAgICAgcmV0dXJuIF8ubWFwKHBhcmFtcywgZnVuY3Rpb24ocGFyYW0sIGkpIHtcbiAgICAgICAgLy8gRG9uJ3QgZGVjb2RlIHRoZSBzZWFyY2ggcGFyYW1zLlxuICAgICAgICBpZiAoaSA9PT0gcGFyYW1zLmxlbmd0aCAtIDEpIHJldHVybiBwYXJhbSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gcGFyYW0gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW0pIDogbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5IaXN0b3J5XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBIYW5kbGVzIGNyb3NzLWJyb3dzZXIgaGlzdG9yeSBtYW5hZ2VtZW50LCBiYXNlZCBvbiBlaXRoZXJcbiAgLy8gW3B1c2hTdGF0ZV0oaHR0cDovL2RpdmVpbnRvaHRtbDUuaW5mby9oaXN0b3J5Lmh0bWwpIGFuZCByZWFsIFVSTHMsIG9yXG4gIC8vIFtvbmhhc2hjaGFuZ2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL3dpbmRvdy5vbmhhc2hjaGFuZ2UpXG4gIC8vIGFuZCBVUkwgZnJhZ21lbnRzLiBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBuZWl0aGVyIChvbGQgSUUsIG5hdGNoKSxcbiAgLy8gZmFsbHMgYmFjayB0byBwb2xsaW5nLlxuICB2YXIgSGlzdG9yeSA9IEJhY2tib25lLkhpc3RvcnkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgdGhpcy5jaGVja1VybCA9IF8uYmluZCh0aGlzLmNoZWNrVXJsLCB0aGlzKTtcblxuICAgIC8vIEVuc3VyZSB0aGF0IGBIaXN0b3J5YCBjYW4gYmUgdXNlZCBvdXRzaWRlIG9mIHRoZSBicm93c2VyLlxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICAgIHRoaXMuaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICAgIH1cbiAgfTtcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyBhIGxlYWRpbmcgaGFzaC9zbGFzaCBhbmQgdHJhaWxpbmcgc3BhY2UuXG4gIHZhciByb3V0ZVN0cmlwcGVyID0gL15bI1xcL118XFxzKyQvZztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzLlxuICB2YXIgcm9vdFN0cmlwcGVyID0gL15cXC8rfFxcLyskL2c7XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgdXJscyBvZiBoYXNoLlxuICB2YXIgcGF0aFN0cmlwcGVyID0gLyMuKiQvO1xuXG4gIC8vIEhhcyB0aGUgaGlzdG9yeSBoYW5kbGluZyBhbHJlYWR5IGJlZW4gc3RhcnRlZD9cbiAgSGlzdG9yeS5zdGFydGVkID0gZmFsc2U7XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLkhpc3RvcnkqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChIaXN0b3J5LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBpbnRlcnZhbCB0byBwb2xsIGZvciBoYXNoIGNoYW5nZXMsIGlmIG5lY2Vzc2FyeSwgaXNcbiAgICAvLyB0d2VudHkgdGltZXMgYSBzZWNvbmQuXG4gICAgaW50ZXJ2YWw6IDUwLFxuXG4gICAgLy8gQXJlIHdlIGF0IHRoZSBhcHAgcm9vdD9cbiAgICBhdFJvb3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhdGggPSB0aGlzLmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1teXFwvXSQvLCAnJCYvJyk7XG4gICAgICByZXR1cm4gcGF0aCA9PT0gdGhpcy5yb290ICYmICF0aGlzLmdldFNlYXJjaCgpO1xuICAgIH0sXG5cbiAgICAvLyBEb2VzIHRoZSBwYXRobmFtZSBtYXRjaCB0aGUgcm9vdD9cbiAgICBtYXRjaFJvb3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhdGggPSB0aGlzLmRlY29kZUZyYWdtZW50KHRoaXMubG9jYXRpb24ucGF0aG5hbWUpO1xuICAgICAgdmFyIHJvb3RQYXRoID0gcGF0aC5zbGljZSgwLCB0aGlzLnJvb3QubGVuZ3RoIC0gMSkgKyAnLyc7XG4gICAgICByZXR1cm4gcm9vdFBhdGggPT09IHRoaXMucm9vdDtcbiAgICB9LFxuXG4gICAgLy8gVW5pY29kZSBjaGFyYWN0ZXJzIGluIGBsb2NhdGlvbi5wYXRobmFtZWAgYXJlIHBlcmNlbnQgZW5jb2RlZCBzbyB0aGV5J3JlXG4gICAgLy8gZGVjb2RlZCBmb3IgY29tcGFyaXNvbi4gYCUyNWAgc2hvdWxkIG5vdCBiZSBkZWNvZGVkIHNpbmNlIGl0IG1heSBiZSBwYXJ0XG4gICAgLy8gb2YgYW4gZW5jb2RlZCBwYXJhbWV0ZXIuXG4gICAgZGVjb2RlRnJhZ21lbnQ6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJKGZyYWdtZW50LnJlcGxhY2UoLyUyNS9nLCAnJTI1MjUnKSk7XG4gICAgfSxcblxuICAgIC8vIEluIElFNiwgdGhlIGhhc2ggZnJhZ21lbnQgYW5kIHNlYXJjaCBwYXJhbXMgYXJlIGluY29ycmVjdCBpZiB0aGVcbiAgICAvLyBmcmFnbWVudCBjb250YWlucyBgP2AuXG4gICAgZ2V0U2VhcmNoOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtYXRjaCA9IHRoaXMubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCAnJykubWF0Y2goL1xcPy4rLyk7XG4gICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXSA6ICcnO1xuICAgIH0sXG5cbiAgICAvLyBHZXRzIHRoZSB0cnVlIGhhc2ggdmFsdWUuIENhbm5vdCB1c2UgbG9jYXRpb24uaGFzaCBkaXJlY3RseSBkdWUgdG8gYnVnXG4gICAgLy8gaW4gRmlyZWZveCB3aGVyZSBsb2NhdGlvbi5oYXNoIHdpbGwgYWx3YXlzIGJlIGRlY29kZWQuXG4gICAgZ2V0SGFzaDogZnVuY3Rpb24od2luZG93KSB7XG4gICAgICB2YXIgbWF0Y2ggPSAod2luZG93IHx8IHRoaXMpLmxvY2F0aW9uLmhyZWYubWF0Y2goLyMoLiopJC8pO1xuICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiAnJztcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBwYXRobmFtZSBhbmQgc2VhcmNoIHBhcmFtcywgd2l0aG91dCB0aGUgcm9vdC5cbiAgICBnZXRQYXRoOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXRoID0gdGhpcy5kZWNvZGVGcmFnbWVudChcbiAgICAgICAgdGhpcy5sb2NhdGlvbi5wYXRobmFtZSArIHRoaXMuZ2V0U2VhcmNoKClcbiAgICAgICkuc2xpY2UodGhpcy5yb290Lmxlbmd0aCAtIDEpO1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoLnNsaWNlKDEpIDogcGF0aDtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBjcm9zcy1icm93c2VyIG5vcm1hbGl6ZWQgVVJMIGZyYWdtZW50IGZyb20gdGhlIHBhdGggb3IgaGFzaC5cbiAgICBnZXRGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgIGlmIChmcmFnbWVudCA9PSBudWxsKSB7XG4gICAgICAgIGlmICh0aGlzLl91c2VQdXNoU3RhdGUgfHwgIXRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICAgIGZyYWdtZW50ID0gdGhpcy5nZXRQYXRoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEhhc2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgIH0sXG5cbiAgICAvLyBTdGFydCB0aGUgaGFzaCBjaGFuZ2UgaGFuZGxpbmcsIHJldHVybmluZyBgdHJ1ZWAgaWYgdGhlIGN1cnJlbnQgVVJMIG1hdGNoZXNcbiAgICAvLyBhbiBleGlzdGluZyByb3V0ZSwgYW5kIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgIHN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoSGlzdG9yeS5zdGFydGVkKSB0aHJvdyBuZXcgRXJyb3IoJ0JhY2tib25lLmhpc3RvcnkgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkJyk7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAvLyBGaWd1cmUgb3V0IHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb24uIERvIHdlIG5lZWQgYW4gaWZyYW1lP1xuICAgICAgLy8gSXMgcHVzaFN0YXRlIGRlc2lyZWQgLi4uIGlzIGl0IGF2YWlsYWJsZT9cbiAgICAgIHRoaXMub3B0aW9ucyAgICAgICAgICA9IF8uZXh0ZW5kKHtyb290OiAnLyd9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5yb290ICAgICAgICAgICAgID0gdGhpcy5vcHRpb25zLnJvb3Q7XG4gICAgICB0aGlzLl93YW50c0hhc2hDaGFuZ2UgPSB0aGlzLm9wdGlvbnMuaGFzaENoYW5nZSAhPT0gZmFsc2U7XG4gICAgICB0aGlzLl9oYXNIYXNoQ2hhbmdlICAgPSAnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3cgJiYgKGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gdm9pZCAwIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDcpO1xuICAgICAgdGhpcy5fdXNlSGFzaENoYW5nZSAgID0gdGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmIHRoaXMuX2hhc0hhc2hDaGFuZ2U7XG4gICAgICB0aGlzLl93YW50c1B1c2hTdGF0ZSAgPSAhIXRoaXMub3B0aW9ucy5wdXNoU3RhdGU7XG4gICAgICB0aGlzLl9oYXNQdXNoU3RhdGUgICAgPSAhISh0aGlzLmhpc3RvcnkgJiYgdGhpcy5oaXN0b3J5LnB1c2hTdGF0ZSk7XG4gICAgICB0aGlzLl91c2VQdXNoU3RhdGUgICAgPSB0aGlzLl93YW50c1B1c2hTdGF0ZSAmJiB0aGlzLl9oYXNQdXNoU3RhdGU7XG4gICAgICB0aGlzLmZyYWdtZW50ICAgICAgICAgPSB0aGlzLmdldEZyYWdtZW50KCk7XG5cbiAgICAgIC8vIE5vcm1hbGl6ZSByb290IHRvIGFsd2F5cyBpbmNsdWRlIGEgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2guXG4gICAgICB0aGlzLnJvb3QgPSAoJy8nICsgdGhpcy5yb290ICsgJy8nKS5yZXBsYWNlKHJvb3RTdHJpcHBlciwgJy8nKTtcblxuICAgICAgLy8gVHJhbnNpdGlvbiBmcm9tIGhhc2hDaGFuZ2UgdG8gcHVzaFN0YXRlIG9yIHZpY2UgdmVyc2EgaWYgYm90aCBhcmVcbiAgICAgIC8vIHJlcXVlc3RlZC5cbiAgICAgIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5fd2FudHNQdXNoU3RhdGUpIHtcblxuICAgICAgICAvLyBJZiB3ZSd2ZSBzdGFydGVkIG9mZiB3aXRoIGEgcm91dGUgZnJvbSBhIGBwdXNoU3RhdGVgLWVuYWJsZWRcbiAgICAgICAgLy8gYnJvd3NlciwgYnV0IHdlJ3JlIGN1cnJlbnRseSBpbiBhIGJyb3dzZXIgdGhhdCBkb2Vzbid0IHN1cHBvcnQgaXQuLi5cbiAgICAgICAgaWYgKCF0aGlzLl9oYXNQdXNoU3RhdGUgJiYgIXRoaXMuYXRSb290KCkpIHtcbiAgICAgICAgICB2YXIgcm9vdFBhdGggPSB0aGlzLnJvb3Quc2xpY2UoMCwgLTEpIHx8ICcvJztcbiAgICAgICAgICB0aGlzLmxvY2F0aW9uLnJlcGxhY2Uocm9vdFBhdGggKyAnIycgKyB0aGlzLmdldFBhdGgoKSk7XG4gICAgICAgICAgLy8gUmV0dXJuIGltbWVkaWF0ZWx5IGFzIGJyb3dzZXIgd2lsbCBkbyByZWRpcmVjdCB0byBuZXcgdXJsXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gT3IgaWYgd2UndmUgc3RhcnRlZCBvdXQgd2l0aCBhIGhhc2gtYmFzZWQgcm91dGUsIGJ1dCB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgLy8gaW4gYSBicm93c2VyIHdoZXJlIGl0IGNvdWxkIGJlIGBwdXNoU3RhdGVgLWJhc2VkIGluc3RlYWQuLi5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUgJiYgdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHRoaXMubmF2aWdhdGUodGhpcy5nZXRIYXNoKCksIHtyZXBsYWNlOiB0cnVlfSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBQcm94eSBhbiBpZnJhbWUgdG8gaGFuZGxlIGxvY2F0aW9uIGV2ZW50cyBpZiB0aGUgYnJvd3NlciBkb2Vzbid0XG4gICAgICAvLyBzdXBwb3J0IHRoZSBgaGFzaGNoYW5nZWAgZXZlbnQsIEhUTUw1IGhpc3RvcnksIG9yIHRoZSB1c2VyIHdhbnRzXG4gICAgICAvLyBgaGFzaENoYW5nZWAgYnV0IG5vdCBgcHVzaFN0YXRlYC5cbiAgICAgIGlmICghdGhpcy5faGFzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgIXRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuICAgICAgICB0aGlzLmlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICB0aGlzLmlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDowJztcbiAgICAgICAgdGhpcy5pZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5pZnJhbWUudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICAvLyBVc2luZyBgYXBwZW5kQ2hpbGRgIHdpbGwgdGhyb3cgb24gSUUgPCA5IGlmIHRoZSBkb2N1bWVudCBpcyBub3QgcmVhZHkuXG4gICAgICAgIHZhciBpV2luZG93ID0gYm9keS5pbnNlcnRCZWZvcmUodGhpcy5pZnJhbWUsIGJvZHkuZmlyc3RDaGlsZCkuY29udGVudFdpbmRvdztcbiAgICAgICAgaVdpbmRvdy5kb2N1bWVudC5vcGVuKCk7XG4gICAgICAgIGlXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcbiAgICAgICAgaVdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnICsgdGhpcy5mcmFnbWVudDtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGEgY3Jvc3MtcGxhdGZvcm0gYGFkZEV2ZW50TGlzdGVuZXJgIHNoaW0gZm9yIG9sZGVyIGJyb3dzZXJzLlxuICAgICAgdmFyIGFkZEV2ZW50TGlzdGVuZXIgPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCBmdW5jdGlvbihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiBhdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICB9O1xuXG4gICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB3ZSdyZSB1c2luZyBwdXNoU3RhdGUgb3IgaGFzaGVzLCBhbmQgd2hldGhlclxuICAgICAgLy8gJ29uaGFzaGNoYW5nZScgaXMgc3VwcG9ydGVkLCBkZXRlcm1pbmUgaG93IHdlIGNoZWNrIHRoZSBVUkwgc3RhdGUuXG4gICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl91c2VIYXNoQ2hhbmdlICYmICF0aGlzLmlmcmFtZSkge1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tVcmxJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuY2hlY2tVcmwsIHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5zaWxlbnQpIHJldHVybiB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gRGlzYWJsZSBCYWNrYm9uZS5oaXN0b3J5LCBwZXJoYXBzIHRlbXBvcmFyaWx5LiBOb3QgdXNlZnVsIGluIGEgcmVhbCBhcHAsXG4gICAgLy8gYnV0IHBvc3NpYmx5IHVzZWZ1bCBmb3IgdW5pdCB0ZXN0aW5nIFJvdXRlcnMuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICAvLyBBZGQgYSBjcm9zcy1wbGF0Zm9ybSBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAgc2hpbSBmb3Igb2xkZXIgYnJvd3NlcnMuXG4gICAgICB2YXIgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyIHx8IGZ1bmN0aW9uKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIGRldGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFJlbW92ZSB3aW5kb3cgbGlzdGVuZXJzLlxuICAgICAgaWYgKHRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMuY2hlY2tVcmwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fdXNlSGFzaENoYW5nZSAmJiAhdGhpcy5pZnJhbWUpIHtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tVcmwsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYW4gdXAgdGhlIGlmcmFtZSBpZiBuZWNlc3NhcnkuXG4gICAgICBpZiAodGhpcy5pZnJhbWUpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmlmcmFtZSk7XG4gICAgICAgIHRoaXMuaWZyYW1lID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgd2lsbCB0aHJvdyB3aGVuIGNsZWFyaW5nIGFuIHVuZGVmaW5lZCBpbnRlcnZhbC5cbiAgICAgIGlmICh0aGlzLl9jaGVja1VybEludGVydmFsKSBjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpO1xuICAgICAgSGlzdG9yeS5zdGFydGVkID0gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIHJvdXRlIHRvIGJlIHRlc3RlZCB3aGVuIHRoZSBmcmFnbWVudCBjaGFuZ2VzLiBSb3V0ZXMgYWRkZWQgbGF0ZXJcbiAgICAvLyBtYXkgb3ZlcnJpZGUgcHJldmlvdXMgcm91dGVzLlxuICAgIHJvdXRlOiBmdW5jdGlvbihyb3V0ZSwgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuaGFuZGxlcnMudW5zaGlmdCh7cm91dGU6IHJvdXRlLCBjYWxsYmFjazogY2FsbGJhY2t9KTtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2tzIHRoZSBjdXJyZW50IFVSTCB0byBzZWUgaWYgaXQgaGFzIGNoYW5nZWQsIGFuZCBpZiBpdCBoYXMsXG4gICAgLy8gY2FsbHMgYGxvYWRVcmxgLCBub3JtYWxpemluZyBhY3Jvc3MgdGhlIGhpZGRlbiBpZnJhbWUuXG4gICAgY2hlY2tVcmw6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRGcmFnbWVudCgpO1xuXG4gICAgICAvLyBJZiB0aGUgdXNlciBwcmVzc2VkIHRoZSBiYWNrIGJ1dHRvbiwgdGhlIGlmcmFtZSdzIGhhc2ggd2lsbCBoYXZlXG4gICAgICAvLyBjaGFuZ2VkIGFuZCB3ZSBzaG91bGQgdXNlIHRoYXQgZm9yIGNvbXBhcmlzb24uXG4gICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5mcmFnbWVudCAmJiB0aGlzLmlmcmFtZSkge1xuICAgICAgICBjdXJyZW50ID0gdGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5mcmFnbWVudCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKHRoaXMuaWZyYW1lKSB0aGlzLm5hdmlnYXRlKGN1cnJlbnQpO1xuICAgICAgdGhpcy5sb2FkVXJsKCk7XG4gICAgfSxcblxuICAgIC8vIEF0dGVtcHQgdG8gbG9hZCB0aGUgY3VycmVudCBVUkwgZnJhZ21lbnQuIElmIGEgcm91dGUgc3VjY2VlZHMgd2l0aCBhXG4gICAgLy8gbWF0Y2gsIHJldHVybnMgYHRydWVgLiBJZiBubyBkZWZpbmVkIHJvdXRlcyBtYXRjaGVzIHRoZSBmcmFnbWVudCxcbiAgICAvLyByZXR1cm5zIGBmYWxzZWAuXG4gICAgbG9hZFVybDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgIC8vIElmIHRoZSByb290IGRvZXNuJ3QgbWF0Y2gsIG5vIHJvdXRlcyBjYW4gbWF0Y2ggZWl0aGVyLlxuICAgICAgaWYgKCF0aGlzLm1hdGNoUm9vdCgpKSByZXR1cm4gZmFsc2U7XG4gICAgICBmcmFnbWVudCA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50KTtcbiAgICAgIHJldHVybiBfLnNvbWUodGhpcy5oYW5kbGVycywgZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICBpZiAoaGFuZGxlci5yb3V0ZS50ZXN0KGZyYWdtZW50KSkge1xuICAgICAgICAgIGhhbmRsZXIuY2FsbGJhY2soZnJhZ21lbnQpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gU2F2ZSBhIGZyYWdtZW50IGludG8gdGhlIGhhc2ggaGlzdG9yeSwgb3IgcmVwbGFjZSB0aGUgVVJMIHN0YXRlIGlmIHRoZVxuICAgIC8vICdyZXBsYWNlJyBvcHRpb24gaXMgcGFzc2VkLiBZb3UgYXJlIHJlc3BvbnNpYmxlIGZvciBwcm9wZXJseSBVUkwtZW5jb2RpbmdcbiAgICAvLyB0aGUgZnJhZ21lbnQgaW4gYWR2YW5jZS5cbiAgICAvL1xuICAgIC8vIFRoZSBvcHRpb25zIG9iamVjdCBjYW4gY29udGFpbiBgdHJpZ2dlcjogdHJ1ZWAgaWYgeW91IHdpc2ggdG8gaGF2ZSB0aGVcbiAgICAvLyByb3V0ZSBjYWxsYmFjayBiZSBmaXJlZCAobm90IHVzdWFsbHkgZGVzaXJhYmxlKSwgb3IgYHJlcGxhY2U6IHRydWVgLCBpZlxuICAgIC8vIHlvdSB3aXNoIHRvIG1vZGlmeSB0aGUgY3VycmVudCBVUkwgd2l0aG91dCBhZGRpbmcgYW4gZW50cnkgdG8gdGhlIGhpc3RvcnkuXG4gICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LCBvcHRpb25zKSB7XG4gICAgICBpZiAoIUhpc3Rvcnkuc3RhcnRlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMgPT09IHRydWUpIG9wdGlvbnMgPSB7dHJpZ2dlcjogISFvcHRpb25zfTtcblxuICAgICAgLy8gTm9ybWFsaXplIHRoZSBmcmFnbWVudC5cbiAgICAgIGZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChmcmFnbWVudCB8fCAnJyk7XG5cbiAgICAgIC8vIERvbid0IGluY2x1ZGUgYSB0cmFpbGluZyBzbGFzaCBvbiB0aGUgcm9vdC5cbiAgICAgIHZhciByb290UGF0aCA9IHRoaXMucm9vdDtcbiAgICAgIGlmIChmcmFnbWVudCA9PT0gJycgfHwgZnJhZ21lbnQuY2hhckF0KDApID09PSAnPycpIHtcbiAgICAgICAgcm9vdFBhdGggPSByb290UGF0aC5zbGljZSgwLCAtMSkgfHwgJy8nO1xuICAgICAgfVxuICAgICAgdmFyIHVybCA9IHJvb3RQYXRoICsgZnJhZ21lbnQ7XG5cbiAgICAgIC8vIFN0cmlwIHRoZSBoYXNoIGFuZCBkZWNvZGUgZm9yIG1hdGNoaW5nLlxuICAgICAgZnJhZ21lbnQgPSB0aGlzLmRlY29kZUZyYWdtZW50KGZyYWdtZW50LnJlcGxhY2UocGF0aFN0cmlwcGVyLCAnJykpO1xuXG4gICAgICBpZiAodGhpcy5mcmFnbWVudCA9PT0gZnJhZ21lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudDtcblxuICAgICAgLy8gSWYgcHVzaFN0YXRlIGlzIGF2YWlsYWJsZSwgd2UgdXNlIGl0IHRvIHNldCB0aGUgZnJhZ21lbnQgYXMgYSByZWFsIFVSTC5cbiAgICAgIGlmICh0aGlzLl91c2VQdXNoU3RhdGUpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5W29wdGlvbnMucmVwbGFjZSA/ICdyZXBsYWNlU3RhdGUnIDogJ3B1c2hTdGF0ZSddKHt9LCBkb2N1bWVudC50aXRsZSwgdXJsKTtcblxuICAgICAgLy8gSWYgaGFzaCBjaGFuZ2VzIGhhdmVuJ3QgYmVlbiBleHBsaWNpdGx5IGRpc2FibGVkLCB1cGRhdGUgdGhlIGhhc2hcbiAgICAgIC8vIGZyYWdtZW50IHRvIHN0b3JlIGhpc3RvcnkuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB0aGlzLl91cGRhdGVIYXNoKHRoaXMubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuICAgICAgICBpZiAodGhpcy5pZnJhbWUgJiYgZnJhZ21lbnQgIT09IHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSkge1xuICAgICAgICAgIHZhciBpV2luZG93ID0gdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdztcblxuICAgICAgICAgIC8vIE9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGlmcmFtZSB0cmlja3MgSUU3IGFuZCBlYXJsaWVyIHRvIHB1c2ggYVxuICAgICAgICAgIC8vIGhpc3RvcnkgZW50cnkgb24gaGFzaC10YWcgY2hhbmdlLiAgV2hlbiByZXBsYWNlIGlzIHRydWUsIHdlIGRvbid0XG4gICAgICAgICAgLy8gd2FudCB0aGlzLlxuICAgICAgICAgIGlmICghb3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAgICAgICBpV2luZG93LmRvY3VtZW50Lm9wZW4oKTtcbiAgICAgICAgICAgIGlXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl91cGRhdGVIYXNoKGlXaW5kb3cubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuICAgICAgICB9XG5cbiAgICAgIC8vIElmIHlvdSd2ZSB0b2xkIHVzIHRoYXQgeW91IGV4cGxpY2l0bHkgZG9uJ3Qgd2FudCBmYWxsYmFjayBoYXNoY2hhbmdlLVxuICAgICAgLy8gYmFzZWQgaGlzdG9yeSwgdGhlbiBgbmF2aWdhdGVgIGJlY29tZXMgYSBwYWdlIHJlZnJlc2guXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnRyaWdnZXIpIHJldHVybiB0aGlzLmxvYWRVcmwoZnJhZ21lbnQpO1xuICAgIH0sXG5cbiAgICAvLyBVcGRhdGUgdGhlIGhhc2ggbG9jYXRpb24sIGVpdGhlciByZXBsYWNpbmcgdGhlIGN1cnJlbnQgZW50cnksIG9yIGFkZGluZ1xuICAgIC8vIGEgbmV3IG9uZSB0byB0aGUgYnJvd3NlciBoaXN0b3J5LlxuICAgIF91cGRhdGVIYXNoOiBmdW5jdGlvbihsb2NhdGlvbiwgZnJhZ21lbnQsIHJlcGxhY2UpIHtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIHZhciBocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oamF2YXNjcmlwdDp8IykuKiQvLCAnJyk7XG4gICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoaHJlZiArICcjJyArIGZyYWdtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgcmVxdWlyZSB0aGF0IGBoYXNoYCBjb250YWlucyBhIGxlYWRpbmcgIy5cbiAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcjJyArIGZyYWdtZW50O1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICAvLyBDcmVhdGUgdGhlIGRlZmF1bHQgQmFja2JvbmUuaGlzdG9yeS5cbiAgQmFja2JvbmUuaGlzdG9yeSA9IG5ldyBIaXN0b3J5O1xuXG4gIC8vIEhlbHBlcnNcbiAgLy8gLS0tLS0tLVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4gZm9yIHN1YmNsYXNzZXMuXG4gIC8vIFNpbWlsYXIgdG8gYGdvb2cuaW5oZXJpdHNgLCBidXQgdXNlcyBhIGhhc2ggb2YgcHJvdG90eXBlIHByb3BlcnRpZXMgYW5kXG4gIC8vIGNsYXNzIHByb3BlcnRpZXMgdG8gYmUgZXh0ZW5kZWQuXG4gIHZhciBleHRlbmQgPSBmdW5jdGlvbihwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIHZhciBjaGlsZDtcblxuICAgIC8vIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgdGhlIG5ldyBzdWJjbGFzcyBpcyBlaXRoZXIgZGVmaW5lZCBieSB5b3VcbiAgICAvLyAodGhlIFwiY29uc3RydWN0b3JcIiBwcm9wZXJ0eSBpbiB5b3VyIGBleHRlbmRgIGRlZmluaXRpb24pLCBvciBkZWZhdWx0ZWRcbiAgICAvLyBieSB1cyB0byBzaW1wbHkgY2FsbCB0aGUgcGFyZW50IGNvbnN0cnVjdG9yLlxuICAgIGlmIChwcm90b1Byb3BzICYmIF8uaGFzKHByb3RvUHJvcHMsICdjb25zdHJ1Y3RvcicpKSB7XG4gICAgICBjaGlsZCA9IHByb3RvUHJvcHMuY29uc3RydWN0b3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9O1xuICAgIH1cblxuICAgIC8vIEFkZCBzdGF0aWMgcHJvcGVydGllcyB0byB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24sIGlmIHN1cHBsaWVkLlxuICAgIF8uZXh0ZW5kKGNoaWxkLCBwYXJlbnQsIHN0YXRpY1Byb3BzKTtcblxuICAgIC8vIFNldCB0aGUgcHJvdG90eXBlIGNoYWluIHRvIGluaGVyaXQgZnJvbSBgcGFyZW50YCwgd2l0aG91dCBjYWxsaW5nXG4gICAgLy8gYHBhcmVudGAncyBjb25zdHJ1Y3RvciBmdW5jdGlvbiBhbmQgYWRkIHRoZSBwcm90b3R5cGUgcHJvcGVydGllcy5cbiAgICBjaGlsZC5wcm90b3R5cGUgPSBfLmNyZWF0ZShwYXJlbnQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBjaGlsZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjaGlsZDtcblxuICAgIC8vIFNldCBhIGNvbnZlbmllbmNlIHByb3BlcnR5IGluIGNhc2UgdGhlIHBhcmVudCdzIHByb3RvdHlwZSBpcyBuZWVkZWRcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlO1xuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9O1xuXG4gIC8vIFNldCB1cCBpbmhlcml0YW5jZSBmb3IgdGhlIG1vZGVsLCBjb2xsZWN0aW9uLCByb3V0ZXIsIHZpZXcgYW5kIGhpc3RvcnkuXG4gIE1vZGVsLmV4dGVuZCA9IENvbGxlY3Rpb24uZXh0ZW5kID0gUm91dGVyLmV4dGVuZCA9IFZpZXcuZXh0ZW5kID0gSGlzdG9yeS5leHRlbmQgPSBleHRlbmQ7XG5cbiAgLy8gVGhyb3cgYW4gZXJyb3Igd2hlbiBhIFVSTCBpcyBuZWVkZWQsIGFuZCBub25lIGlzIHN1cHBsaWVkLlxuICB2YXIgdXJsRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgXCJ1cmxcIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICB9O1xuXG4gIC8vIFdyYXAgYW4gb3B0aW9uYWwgZXJyb3IgY2FsbGJhY2sgd2l0aCBhIGZhbGxiYWNrIGVycm9yIGV2ZW50LlxuICB2YXIgd3JhcEVycm9yID0gZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgZXJyb3IgPSBvcHRpb25zLmVycm9yO1xuICAgIG9wdGlvbnMuZXJyb3IgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICBpZiAoZXJyb3IpIGVycm9yLmNhbGwob3B0aW9ucy5jb250ZXh0LCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICBtb2RlbC50cmlnZ2VyKCdlcnJvcicsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBCYWNrYm9uZTtcbn0pO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuLi9+L2JhY2tib25lL2JhY2tib25lLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gICAgIFVuZGVyc2NvcmUuanMgMS44LjNcbi8vICAgICBodHRwOi8vdW5kZXJzY29yZWpzLm9yZ1xuLy8gICAgIChjKSAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbi8vICAgICBVbmRlcnNjb3JlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4oZnVuY3Rpb24oKSB7XG5cbiAgLy8gQmFzZWxpbmUgc2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLS1cblxuICAvLyBFc3RhYmxpc2ggdGhlIHJvb3Qgb2JqZWN0LCBgd2luZG93YCBpbiB0aGUgYnJvd3Nlciwgb3IgYGV4cG9ydHNgIG9uIHRoZSBzZXJ2ZXIuXG4gIHZhciByb290ID0gdGhpcztcblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYF9gIHZhcmlhYmxlLlxuICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fO1xuXG4gIC8vIFNhdmUgYnl0ZXMgaW4gdGhlIG1pbmlmaWVkIChidXQgbm90IGd6aXBwZWQpIHZlcnNpb246XG4gIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGUsIEZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcblxuICAvLyBDcmVhdGUgcXVpY2sgcmVmZXJlbmNlIHZhcmlhYmxlcyBmb3Igc3BlZWQgYWNjZXNzIHRvIGNvcmUgcHJvdG90eXBlcy5cbiAgdmFyXG4gICAgcHVzaCAgICAgICAgICAgICA9IEFycmF5UHJvdG8ucHVzaCxcbiAgICBzbGljZSAgICAgICAgICAgID0gQXJyYXlQcm90by5zbGljZSxcbiAgICB0b1N0cmluZyAgICAgICAgID0gT2JqUHJvdG8udG9TdHJpbmcsXG4gICAgaGFzT3duUHJvcGVydHkgICA9IE9ialByb3RvLmhhc093blByb3BlcnR5O1xuXG4gIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZVxuICAvLyBhcmUgZGVjbGFyZWQgaGVyZS5cbiAgdmFyXG4gICAgbmF0aXZlSXNBcnJheSAgICAgID0gQXJyYXkuaXNBcnJheSxcbiAgICBuYXRpdmVLZXlzICAgICAgICAgPSBPYmplY3Qua2V5cyxcbiAgICBuYXRpdmVCaW5kICAgICAgICAgPSBGdW5jUHJvdG8uYmluZCxcbiAgICBuYXRpdmVDcmVhdGUgICAgICAgPSBPYmplY3QuY3JlYXRlO1xuXG4gIC8vIE5ha2VkIGZ1bmN0aW9uIHJlZmVyZW5jZSBmb3Igc3Vycm9nYXRlLXByb3RvdHlwZS1zd2FwcGluZy5cbiAgdmFyIEN0b3IgPSBmdW5jdGlvbigpe307XG5cbiAgLy8gQ3JlYXRlIGEgc2FmZSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciB1c2UgYmVsb3cuXG4gIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIF8pIHJldHVybiBvYmo7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIF8pKSByZXR1cm4gbmV3IF8ob2JqKTtcbiAgICB0aGlzLl93cmFwcGVkID0gb2JqO1xuICB9O1xuXG4gIC8vIEV4cG9ydCB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yICoqTm9kZS5qcyoqLCB3aXRoXG4gIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW5cbiAgLy8gdGhlIGJyb3dzZXIsIGFkZCBgX2AgYXMgYSBnbG9iYWwgb2JqZWN0LlxuICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfO1xuICAgIH1cbiAgICBleHBvcnRzLl8gPSBfO1xuICB9IGVsc2Uge1xuICAgIHJvb3QuXyA9IF87XG4gIH1cblxuICAvLyBDdXJyZW50IHZlcnNpb24uXG4gIF8uVkVSU0lPTiA9ICcxLjguMyc7XG5cbiAgLy8gSW50ZXJuYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGVmZmljaWVudCAoZm9yIGN1cnJlbnQgZW5naW5lcykgdmVyc2lvblxuICAvLyBvZiB0aGUgcGFzc2VkLWluIGNhbGxiYWNrLCB0byBiZSByZXBlYXRlZGx5IGFwcGxpZWQgaW4gb3RoZXIgVW5kZXJzY29yZVxuICAvLyBmdW5jdGlvbnMuXG4gIHZhciBvcHRpbWl6ZUNiID0gZnVuY3Rpb24oZnVuYywgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSByZXR1cm4gZnVuYztcbiAgICBzd2l0Y2ggKGFyZ0NvdW50ID09IG51bGwgPyAzIDogYXJnQ291bnQpIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBvdGhlcik7XG4gICAgICB9O1xuICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQSBtb3N0bHktaW50ZXJuYWwgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAgLy8gdG8gZWFjaCBlbGVtZW50IGluIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBkZXNpcmVkIHJlc3VsdCDigJQgZWl0aGVyXG4gIC8vIGlkZW50aXR5LCBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cbiAgdmFyIGNiID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBfLmlkZW50aXR5O1xuICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gb3B0aW1pemVDYih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpO1xuICAgIGlmIChfLmlzT2JqZWN0KHZhbHVlKSkgcmV0dXJuIF8ubWF0Y2hlcih2YWx1ZSk7XG4gICAgcmV0dXJuIF8ucHJvcGVydHkodmFsdWUpO1xuICB9O1xuICBfLml0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gY2IodmFsdWUsIGNvbnRleHQsIEluZmluaXR5KTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYXNzaWduZXIgZnVuY3Rpb25zLlxuICB2YXIgY3JlYXRlQXNzaWduZXIgPSBmdW5jdGlvbihrZXlzRnVuYywgdW5kZWZpbmVkT25seSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCA8IDIgfHwgb2JqID09IG51bGwpIHJldHVybiBvYmo7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdLFxuICAgICAgICAgICAga2V5cyA9IGtleXNGdW5jKHNvdXJjZSksXG4gICAgICAgICAgICBsID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKCF1bmRlZmluZWRPbmx5IHx8IG9ialtrZXldID09PSB2b2lkIDApIG9ialtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyLlxuICB2YXIgYmFzZUNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuICAgIGlmICghXy5pc09iamVjdChwcm90b3R5cGUpKSByZXR1cm4ge307XG4gICAgaWYgKG5hdGl2ZUNyZWF0ZSkgcmV0dXJuIG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIEN0b3IucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgIHZhciByZXN1bHQgPSBuZXcgQ3RvcjtcbiAgICBDdG9yLnByb3RvdHlwZSA9IG51bGw7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB2YXIgcHJvcGVydHkgPSBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gb2JqID09IG51bGwgPyB2b2lkIDAgOiBvYmpba2V5XTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEhlbHBlciBmb3IgY29sbGVjdGlvbiBtZXRob2RzIHRvIGRldGVybWluZSB3aGV0aGVyIGEgY29sbGVjdGlvblxuICAvLyBzaG91bGQgYmUgaXRlcmF0ZWQgYXMgYW4gYXJyYXkgb3IgYXMgYW4gb2JqZWN0XG4gIC8vIFJlbGF0ZWQ6IGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoXG4gIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0XG4gIHZhciBNQVhfQVJSQVlfSU5ERVggPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuICB2YXIgZ2V0TGVuZ3RoID0gcHJvcGVydHkoJ2xlbmd0aCcpO1xuICB2YXIgaXNBcnJheUxpa2UgPSBmdW5jdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChjb2xsZWN0aW9uKTtcbiAgICByZXR1cm4gdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyAmJiBsZW5ndGggPj0gMCAmJiBsZW5ndGggPD0gTUFYX0FSUkFZX0lOREVYO1xuICB9O1xuXG4gIC8vIENvbGxlY3Rpb24gRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gVGhlIGNvcm5lcnN0b25lLCBhbiBgZWFjaGAgaW1wbGVtZW50YXRpb24sIGFrYSBgZm9yRWFjaGAuXG4gIC8vIEhhbmRsZXMgcmF3IG9iamVjdHMgaW4gYWRkaXRpb24gdG8gYXJyYXktbGlrZXMuIFRyZWF0cyBhbGxcbiAgLy8gc3BhcnNlIGFycmF5LWxpa2VzIGFzIGlmIHRoZXkgd2VyZSBkZW5zZS5cbiAgXy5lYWNoID0gXy5mb3JFYWNoID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGksIGxlbmd0aDtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtpXSwgaSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2tleXNbaV1dLCBrZXlzW2ldLCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50LlxuICBfLm1hcCA9IF8uY29sbGVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0cyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIHJlc3VsdHNbaW5kZXhdID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDcmVhdGUgYSByZWR1Y2luZyBmdW5jdGlvbiBpdGVyYXRpbmcgbGVmdCBvciByaWdodC5cbiAgZnVuY3Rpb24gY3JlYXRlUmVkdWNlKGRpcikge1xuICAgIC8vIE9wdGltaXplZCBpdGVyYXRvciBmdW5jdGlvbiBhcyB1c2luZyBhcmd1bWVudHMubGVuZ3RoXG4gICAgLy8gaW4gdGhlIG1haW4gZnVuY3Rpb24gd2lsbCBkZW9wdGltaXplIHRoZSwgc2VlICMxOTkxLlxuICAgIGZ1bmN0aW9uIGl0ZXJhdG9yKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGtleXMsIGluZGV4LCBsZW5ndGgpIHtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgICAgbWVtbyA9IGl0ZXJhdGVlKG1lbW8sIG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDQpO1xuICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIC8vIERldGVybWluZSB0aGUgaW5pdGlhbCB2YWx1ZSBpZiBub25lIGlzIHByb3ZpZGVkLlxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7XG4gICAgICAgIG1lbW8gPSBvYmpba2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXhdO1xuICAgICAgICBpbmRleCArPSBkaXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCk7XG4gICAgfTtcbiAgfVxuXG4gIC8vICoqUmVkdWNlKiogYnVpbGRzIHVwIGEgc2luZ2xlIHJlc3VsdCBmcm9tIGEgbGlzdCBvZiB2YWx1ZXMsIGFrYSBgaW5qZWN0YCxcbiAgLy8gb3IgYGZvbGRsYC5cbiAgXy5yZWR1Y2UgPSBfLmZvbGRsID0gXy5pbmplY3QgPSBjcmVhdGVSZWR1Y2UoMSk7XG5cbiAgLy8gVGhlIHJpZ2h0LWFzc29jaWF0aXZlIHZlcnNpb24gb2YgcmVkdWNlLCBhbHNvIGtub3duIGFzIGBmb2xkcmAuXG4gIF8ucmVkdWNlUmlnaHQgPSBfLmZvbGRyID0gY3JlYXRlUmVkdWNlKC0xKTtcblxuICAvLyBSZXR1cm4gdGhlIGZpcnN0IHZhbHVlIHdoaWNoIHBhc3NlcyBhIHRydXRoIHRlc3QuIEFsaWFzZWQgYXMgYGRldGVjdGAuXG4gIF8uZmluZCA9IF8uZGV0ZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIga2V5O1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBrZXkgPSBfLmZpbmRJbmRleChvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IF8uZmluZEtleShvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGlmIChrZXkgIT09IHZvaWQgMCAmJiBrZXkgIT09IC0xKSByZXR1cm4gb2JqW2tleV07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBwYXNzIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgc2VsZWN0YC5cbiAgXy5maWx0ZXIgPSBfLnNlbGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGxpc3QpKSByZXN1bHRzLnB1c2godmFsdWUpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGZvciB3aGljaCBhIHRydXRoIHRlc3QgZmFpbHMuXG4gIF8ucmVqZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm5lZ2F0ZShjYihwcmVkaWNhdGUpKSwgY29udGV4dCk7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgYWxsIG9mIHRoZSBlbGVtZW50cyBtYXRjaCBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFsbGAuXG4gIF8uZXZlcnkgPSBfLmFsbCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgaWYgKCFwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgb2JqZWN0IG1hdGNoZXMgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBhbnlgLlxuICBfLnNvbWUgPSBfLmFueSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgaWYgKHByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBhcnJheSBvciBvYmplY3QgY29udGFpbnMgYSBnaXZlbiBpdGVtICh1c2luZyBgPT09YCkuXG4gIC8vIEFsaWFzZWQgYXMgYGluY2x1ZGVzYCBhbmQgYGluY2x1ZGVgLlxuICBfLmNvbnRhaW5zID0gXy5pbmNsdWRlcyA9IF8uaW5jbHVkZSA9IGZ1bmN0aW9uKG9iaiwgaXRlbSwgZnJvbUluZGV4LCBndWFyZCkge1xuICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcbiAgICBpZiAodHlwZW9mIGZyb21JbmRleCAhPSAnbnVtYmVyJyB8fCBndWFyZCkgZnJvbUluZGV4ID0gMDtcbiAgICByZXR1cm4gXy5pbmRleE9mKG9iaiwgaXRlbSwgZnJvbUluZGV4KSA+PSAwO1xuICB9O1xuXG4gIC8vIEludm9rZSBhIG1ldGhvZCAod2l0aCBhcmd1bWVudHMpIG9uIGV2ZXJ5IGl0ZW0gaW4gYSBjb2xsZWN0aW9uLlxuICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgdmFyIGlzRnVuYyA9IF8uaXNGdW5jdGlvbihtZXRob2QpO1xuICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgZnVuYyA9IGlzRnVuYyA/IG1ldGhvZCA6IHZhbHVlW21ldGhvZF07XG4gICAgICByZXR1cm4gZnVuYyA9PSBudWxsID8gZnVuYyA6IGZ1bmMuYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYG1hcGA6IGZldGNoaW5nIGEgcHJvcGVydHkuXG4gIF8ucGx1Y2sgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBfLm1hcChvYmosIF8ucHJvcGVydHkoa2V5KSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmlsdGVyYDogc2VsZWN0aW5nIG9ubHkgb2JqZWN0c1xuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLndoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbmRgOiBnZXR0aW5nIHRoZSBmaXJzdCBvYmplY3RcbiAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5maW5kV2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmluZChvYmosIF8ubWF0Y2hlcihhdHRycykpO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWF4aW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5tYXggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IC1JbmZpbml0eSwgbGFzdENvbXB1dGVkID0gLUluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlID4gcmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPiBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IC1JbmZpbml0eSAmJiByZXN1bHQgPT09IC1JbmZpbml0eSkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG1pbmltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG4gIF8ubWluID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSBJbmZpbml0eSwgbGFzdENvbXB1dGVkID0gSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPCByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA8IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gSW5maW5pdHkgJiYgcmVzdWx0ID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBTaHVmZmxlIGEgY29sbGVjdGlvbiwgdXNpbmcgdGhlIG1vZGVybiB2ZXJzaW9uIG9mIHRoZVxuICAvLyBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVy4oCTWWF0ZXNfc2h1ZmZsZSkuXG4gIF8uc2h1ZmZsZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBzZXQgPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0gc2V0Lmxlbmd0aDtcbiAgICB2YXIgc2h1ZmZsZWQgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMCwgcmFuZDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJhbmQgPSBfLnJhbmRvbSgwLCBpbmRleCk7XG4gICAgICBpZiAocmFuZCAhPT0gaW5kZXgpIHNodWZmbGVkW2luZGV4XSA9IHNodWZmbGVkW3JhbmRdO1xuICAgICAgc2h1ZmZsZWRbcmFuZF0gPSBzZXRbaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gc2h1ZmZsZWQ7XG4gIH07XG5cbiAgLy8gU2FtcGxlICoqbioqIHJhbmRvbSB2YWx1ZXMgZnJvbSBhIGNvbGxlY3Rpb24uXG4gIC8vIElmICoqbioqIGlzIG5vdCBzcGVjaWZpZWQsIHJldHVybnMgYSBzaW5nbGUgcmFuZG9tIGVsZW1lbnQuXG4gIC8vIFRoZSBpbnRlcm5hbCBgZ3VhcmRgIGFyZ3VtZW50IGFsbG93cyBpdCB0byB3b3JrIHdpdGggYG1hcGAuXG4gIF8uc2FtcGxlID0gZnVuY3Rpb24ob2JqLCBuLCBndWFyZCkge1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHtcbiAgICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcbiAgICAgIHJldHVybiBvYmpbXy5yYW5kb20ob2JqLmxlbmd0aCAtIDEpXTtcbiAgICB9XG4gICAgcmV0dXJuIF8uc2h1ZmZsZShvYmopLnNsaWNlKDAsIE1hdGgubWF4KDAsIG4pKTtcbiAgfTtcblxuICAvLyBTb3J0IHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24gcHJvZHVjZWQgYnkgYW4gaXRlcmF0ZWUuXG4gIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHJldHVybiBfLnBsdWNrKF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgY3JpdGVyaWE6IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdClcbiAgICAgIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhO1xuICAgICAgdmFyIGIgPSByaWdodC5jcml0ZXJpYTtcbiAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgIGlmIChhID4gYiB8fCBhID09PSB2b2lkIDApIHJldHVybiAxO1xuICAgICAgICBpZiAoYSA8IGIgfHwgYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVmdC5pbmRleCAtIHJpZ2h0LmluZGV4O1xuICAgIH0pLCAndmFsdWUnKTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgXCJncm91cCBieVwiIG9wZXJhdGlvbnMuXG4gIHZhciBncm91cCA9IGZ1bmN0aW9uKGJlaGF2aW9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciBrZXkgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIG9iaik7XG4gICAgICAgIGJlaGF2aW9yKHJlc3VsdCwgdmFsdWUsIGtleSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBHcm91cHMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbi4gUGFzcyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlXG4gIC8vIHRvIGdyb3VwIGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgY3JpdGVyaW9uLlxuICBfLmdyb3VwQnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XS5wdXNoKHZhbHVlKTsgZWxzZSByZXN1bHRba2V5XSA9IFt2YWx1ZV07XG4gIH0pO1xuXG4gIC8vIEluZGV4ZXMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiwgc2ltaWxhciB0byBgZ3JvdXBCeWAsIGJ1dCBmb3JcbiAgLy8gd2hlbiB5b3Uga25vdyB0aGF0IHlvdXIgaW5kZXggdmFsdWVzIHdpbGwgYmUgdW5pcXVlLlxuICBfLmluZGV4QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9KTtcblxuICAvLyBDb3VudHMgaW5zdGFuY2VzIG9mIGFuIG9iamVjdCB0aGF0IGdyb3VwIGJ5IGEgY2VydGFpbiBjcml0ZXJpb24uIFBhc3NcbiAgLy8gZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZSB0byBjb3VudCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gIC8vIGNyaXRlcmlvbi5cbiAgXy5jb3VudEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKF8uaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7XG4gIH0pO1xuXG4gIC8vIFNhZmVseSBjcmVhdGUgYSByZWFsLCBsaXZlIGFycmF5IGZyb20gYW55dGhpbmcgaXRlcmFibGUuXG4gIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghb2JqKSByZXR1cm4gW107XG4gICAgaWYgKF8uaXNBcnJheShvYmopKSByZXR1cm4gc2xpY2UuY2FsbChvYmopO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSByZXR1cm4gXy5tYXAob2JqLCBfLmlkZW50aXR5KTtcbiAgICByZXR1cm4gXy52YWx1ZXMob2JqKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuXG4gIF8uc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoO1xuICB9O1xuXG4gIC8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIHR3byBhcnJheXM6IG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgc2F0aXNmeSB0aGUgZ2l2ZW5cbiAgLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuICBfLnBhcnRpdGlvbiA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIgcGFzcyA9IFtdLCBmYWlsID0gW107XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7XG4gICAgICAocHJlZGljYXRlKHZhbHVlLCBrZXksIG9iaikgPyBwYXNzIDogZmFpbCkucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtwYXNzLCBmYWlsXTtcbiAgfTtcblxuICAvLyBBcnJheSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gR2V0IHRoZSBmaXJzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBmaXJzdCBOXG4gIC8vIHZhbHVlcyBpbiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYGhlYWRgIGFuZCBgdGFrZWAuIFRoZSAqKmd1YXJkKiogY2hlY2tcbiAgLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLlxuICBfLmZpcnN0ID0gXy5oZWFkID0gXy50YWtlID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5WzBdO1xuICAgIHJldHVybiBfLmluaXRpYWwoYXJyYXksIGFycmF5Lmxlbmd0aCAtIG4pO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvblxuICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLlxuICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpO1xuICB9O1xuXG4gIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBfLnJlc3QoYXJyYXksIE1hdGgubWF4KDAsIGFycmF5Lmxlbmd0aCAtIG4pKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYHRhaWxgIGFuZCBgZHJvcGAuXG4gIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqbioqIHdpbGwgcmV0dXJuXG4gIC8vIHRoZSByZXN0IE4gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5yZXN0ID0gXy50YWlsID0gXy5kcm9wID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKTtcbiAgfTtcblxuICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuXG4gIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBfLmlkZW50aXR5KTtcbiAgfTtcblxuICAvLyBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiBhIHJlY3Vyc2l2ZSBgZmxhdHRlbmAgZnVuY3Rpb24uXG4gIHZhciBmbGF0dGVuID0gZnVuY3Rpb24oaW5wdXQsIHNoYWxsb3csIHN0cmljdCwgc3RhcnRJbmRleCkge1xuICAgIHZhciBvdXRwdXQgPSBbXSwgaWR4ID0gMDtcbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleCB8fCAwLCBsZW5ndGggPSBnZXRMZW5ndGgoaW5wdXQpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGlucHV0W2ldO1xuICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJiAoXy5pc0FycmF5KHZhbHVlKSB8fCBfLmlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgICAgLy9mbGF0dGVuIGN1cnJlbnQgbGV2ZWwgb2YgYXJyYXkgb3IgYXJndW1lbnRzIG9iamVjdFxuICAgICAgICBpZiAoIXNoYWxsb3cpIHZhbHVlID0gZmxhdHRlbih2YWx1ZSwgc2hhbGxvdywgc3RyaWN0KTtcbiAgICAgICAgdmFyIGogPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgIG91dHB1dC5sZW5ndGggKz0gbGVuO1xuICAgICAgICB3aGlsZSAoaiA8IGxlbikge1xuICAgICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZVtqKytdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFzdHJpY3QpIHtcbiAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIC8vIEZsYXR0ZW4gb3V0IGFuIGFycmF5LCBlaXRoZXIgcmVjdXJzaXZlbHkgKGJ5IGRlZmF1bHQpLCBvciBqdXN0IG9uZSBsZXZlbC5cbiAgXy5mbGF0dGVuID0gZnVuY3Rpb24oYXJyYXksIHNoYWxsb3cpIHtcbiAgICByZXR1cm4gZmxhdHRlbihhcnJheSwgc2hhbGxvdywgZmFsc2UpO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHZlcnNpb24gb2YgdGhlIGFycmF5IHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIHZhbHVlKHMpLlxuICBfLndpdGhvdXQgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHlcbiAgLy8gYmVlbiBzb3J0ZWQsIHlvdSBoYXZlIHRoZSBvcHRpb24gb2YgdXNpbmcgYSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkge1xuICAgICAgY29udGV4dCA9IGl0ZXJhdGVlO1xuICAgICAgaXRlcmF0ZWUgPSBpc1NvcnRlZDtcbiAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpdGVyYXRlZSAhPSBudWxsKSBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSxcbiAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGksIGFycmF5KSA6IHZhbHVlO1xuICAgICAgaWYgKGlzU29ydGVkKSB7XG4gICAgICAgIGlmICghaSB8fCBzZWVuICE9PSBjb21wdXRlZCkgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICBzZWVuID0gY29tcHV0ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGl0ZXJhdGVlKSB7XG4gICAgICAgIGlmICghXy5jb250YWlucyhzZWVuLCBjb21wdXRlZCkpIHtcbiAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghXy5jb250YWlucyhyZXN1bHQsIHZhbHVlKSkge1xuICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1bmlvbjogZWFjaCBkaXN0aW5jdCBlbGVtZW50IGZyb20gYWxsIG9mXG4gIC8vIHRoZSBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLnVuaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIF8udW5pcShmbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSkpO1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGVcbiAgLy8gcGFzc2VkLWluIGFycmF5cy5cbiAgXy5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBhcnJheVtpXTtcbiAgICAgIGlmIChfLmNvbnRhaW5zKHJlc3VsdCwgaXRlbSkpIGNvbnRpbnVlO1xuICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKGFyZ3VtZW50c1tqXSwgaXRlbSkpIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGogPT09IGFyZ3NMZW5ndGgpIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFRha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBvbmUgYXJyYXkgYW5kIGEgbnVtYmVyIG9mIG90aGVyIGFycmF5cy5cbiAgLy8gT25seSB0aGUgZWxlbWVudHMgcHJlc2VudCBpbiBqdXN0IHRoZSBmaXJzdCBhcnJheSB3aWxsIHJlbWFpbi5cbiAgXy5kaWZmZXJlbmNlID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdCA9IGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlLCAxKTtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIHJldHVybiAhXy5jb250YWlucyhyZXN0LCB2YWx1ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gWmlwIHRvZ2V0aGVyIG11bHRpcGxlIGxpc3RzIGludG8gYSBzaW5nbGUgYXJyYXkgLS0gZWxlbWVudHMgdGhhdCBzaGFyZVxuICAvLyBhbiBpbmRleCBnbyB0b2dldGhlci5cbiAgXy56aXAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bnppcChhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIENvbXBsZW1lbnQgb2YgXy56aXAuIFVuemlwIGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIGFuZCBncm91cHNcbiAgLy8gZWFjaCBhcnJheSdzIGVsZW1lbnRzIG9uIHNoYXJlZCBpbmRpY2VzXG4gIF8udW56aXAgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheSAmJiBfLm1heChhcnJheSwgZ2V0TGVuZ3RoKS5sZW5ndGggfHwgMDtcbiAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHJlc3VsdFtpbmRleF0gPSBfLnBsdWNrKGFycmF5LCBpbmRleCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gQ29udmVydHMgbGlzdHMgaW50byBvYmplY3RzLiBQYXNzIGVpdGhlciBhIHNpbmdsZSBhcnJheSBvZiBgW2tleSwgdmFsdWVdYFxuICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2ZcbiAgLy8gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzLlxuICBfLm9iamVjdCA9IGZ1bmN0aW9uKGxpc3QsIHZhbHVlcykge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGxpc3QpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgICAgcmVzdWx0W2xpc3RbaV1dID0gdmFsdWVzW2ldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2xpc3RbaV1bMF1dID0gbGlzdFtpXVsxXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBmaW5kSW5kZXggYW5kIGZpbmRMYXN0SW5kZXggZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKGRpcikge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICB2YXIgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGluZGV4IG9uIGFuIGFycmF5LWxpa2UgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdFxuICBfLmZpbmRJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKDEpO1xuICBfLmZpbmRMYXN0SW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigtMSk7XG5cbiAgLy8gVXNlIGEgY29tcGFyYXRvciBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IHRoZSBzbWFsbGVzdCBpbmRleCBhdCB3aGljaFxuICAvLyBhbiBvYmplY3Qgc2hvdWxkIGJlIGluc2VydGVkIHNvIGFzIHRvIG1haW50YWluIG9yZGVyLiBVc2VzIGJpbmFyeSBzZWFyY2guXG4gIF8uc29ydGVkSW5kZXggPSBmdW5jdGlvbihhcnJheSwgb2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIHZhciB2YWx1ZSA9IGl0ZXJhdGVlKG9iaik7XG4gICAgdmFyIGxvdyA9IDAsIGhpZ2ggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKTtcbiAgICAgIGlmIChpdGVyYXRlZShhcnJheVttaWRdKSA8IHZhbHVlKSBsb3cgPSBtaWQgKyAxOyBlbHNlIGhpZ2ggPSBtaWQ7XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG4gIH07XG5cbiAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgaW5kZXhPZiBhbmQgbGFzdEluZGV4T2YgZnVuY3Rpb25zXG4gIGZ1bmN0aW9uIGNyZWF0ZUluZGV4RmluZGVyKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlkeCkge1xuICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICAgIGkgPSBpZHggPj0gMCA/IGlkeCA6IE1hdGgubWF4KGlkeCArIGxlbmd0aCwgaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZW5ndGggPSBpZHggPj0gMCA/IE1hdGgubWluKGlkeCArIDEsIGxlbmd0aCkgOiBpZHggKyBsZW5ndGggKyAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNvcnRlZEluZGV4ICYmIGlkeCAmJiBsZW5ndGgpIHtcbiAgICAgICAgaWR4ID0gc29ydGVkSW5kZXgoYXJyYXksIGl0ZW0pO1xuICAgICAgICByZXR1cm4gYXJyYXlbaWR4XSA9PT0gaXRlbSA/IGlkeCA6IC0xO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW0gIT09IGl0ZW0pIHtcbiAgICAgICAgaWR4ID0gcHJlZGljYXRlRmluZChzbGljZS5jYWxsKGFycmF5LCBpLCBsZW5ndGgpLCBfLmlzTmFOKTtcbiAgICAgICAgcmV0dXJuIGlkeCA+PSAwID8gaWR4ICsgaSA6IC0xO1xuICAgICAgfVxuICAgICAgZm9yIChpZHggPSBkaXIgPiAwID8gaSA6IGxlbmd0aCAtIDE7IGlkeCA+PSAwICYmIGlkeCA8IGxlbmd0aDsgaWR4ICs9IGRpcikge1xuICAgICAgICBpZiAoYXJyYXlbaWR4XSA9PT0gaXRlbSkgcmV0dXJuIGlkeDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LFxuICAvLyBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LlxuICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcbiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cbiAgXy5pbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoMSwgXy5maW5kSW5kZXgsIF8uc29ydGVkSW5kZXgpO1xuICBfLmxhc3RJbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoLTEsIF8uZmluZExhc3RJbmRleCk7XG5cbiAgLy8gR2VuZXJhdGUgYW4gaW50ZWdlciBBcnJheSBjb250YWluaW5nIGFuIGFyaXRobWV0aWMgcHJvZ3Jlc3Npb24uIEEgcG9ydCBvZlxuICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuICBfLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICBpZiAoc3RvcCA9PSBudWxsKSB7XG4gICAgICBzdG9wID0gc3RhcnQgfHwgMDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgc3RlcCA9IHN0ZXAgfHwgMTtcblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7XG4gICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyssIHN0YXJ0ICs9IHN0ZXApIHtcbiAgICAgIHJhbmdlW2lkeF0gPSBzdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uIGFzIGEgY29uc3RydWN0b3JcbiAgLy8gb3IgYSBub3JtYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnRzXG4gIHZhciBleGVjdXRlQm91bmQgPSBmdW5jdGlvbihzb3VyY2VGdW5jLCBib3VuZEZ1bmMsIGNvbnRleHQsIGNhbGxpbmdDb250ZXh0LCBhcmdzKSB7XG4gICAgaWYgKCEoY2FsbGluZ0NvbnRleHQgaW5zdGFuY2VvZiBib3VuZEZ1bmMpKSByZXR1cm4gc291cmNlRnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB2YXIgc2VsZiA9IGJhc2VDcmVhdGUoc291cmNlRnVuYy5wcm90b3R5cGUpO1xuICAgIHZhciByZXN1bHQgPSBzb3VyY2VGdW5jLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIGlmIChfLmlzT2JqZWN0KHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgZnVuY3Rpb24gYm91bmQgdG8gYSBnaXZlbiBvYmplY3QgKGFzc2lnbmluZyBgdGhpc2AsIGFuZCBhcmd1bWVudHMsXG4gIC8vIG9wdGlvbmFsbHkpLiBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgRnVuY3Rpb24uYmluZGAgaWZcbiAgLy8gYXZhaWxhYmxlLlxuICBfLmJpbmQgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0KSB7XG4gICAgaWYgKG5hdGl2ZUJpbmQgJiYgZnVuYy5iaW5kID09PSBuYXRpdmVCaW5kKSByZXR1cm4gbmF0aXZlQmluZC5hcHBseShmdW5jLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGZ1bmMpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24nKTtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgYm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9O1xuXG4gIC8vIFBhcnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIGJ5IGNyZWF0aW5nIGEgdmVyc2lvbiB0aGF0IGhhcyBoYWQgc29tZSBvZiBpdHNcbiAgLy8gYXJndW1lbnRzIHByZS1maWxsZWQsIHdpdGhvdXQgY2hhbmdpbmcgaXRzIGR5bmFtaWMgYHRoaXNgIGNvbnRleHQuIF8gYWN0c1xuICAvLyBhcyBhIHBsYWNlaG9sZGVyLCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlIHByZS1maWxsZWQuXG4gIF8ucGFydGlhbCA9IGZ1bmN0aW9uKGZ1bmMpIHtcbiAgICB2YXIgYm91bmRBcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gXyA/IGFyZ3VtZW50c1twb3NpdGlvbisrXSA6IGJvdW5kQXJnc1tpXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChwb3NpdGlvbiA8IGFyZ3VtZW50cy5sZW5ndGgpIGFyZ3MucHVzaChhcmd1bWVudHNbcG9zaXRpb24rK10pO1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgdGhpcywgdGhpcywgYXJncyk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gQmluZCBhIG51bWJlciBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBSZW1haW5pbmcgYXJndW1lbnRzXG4gIC8vIGFyZSB0aGUgbWV0aG9kIG5hbWVzIHRvIGJlIGJvdW5kLiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQgYWxsIGNhbGxiYWNrc1xuICAvLyBkZWZpbmVkIG9uIGFuIG9iamVjdCBiZWxvbmcgdG8gaXQuXG4gIF8uYmluZEFsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBpLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLCBrZXk7XG4gICAgaWYgKGxlbmd0aCA8PSAxKSB0aHJvdyBuZXcgRXJyb3IoJ2JpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMnKTtcbiAgICBmb3IgKGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIG9ialtrZXldID0gXy5iaW5kKG9ialtrZXldLCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIE1lbW9pemUgYW4gZXhwZW5zaXZlIGZ1bmN0aW9uIGJ5IHN0b3JpbmcgaXRzIHJlc3VsdHMuXG4gIF8ubWVtb2l6ZSA9IGZ1bmN0aW9uKGZ1bmMsIGhhc2hlcikge1xuICAgIHZhciBtZW1vaXplID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICB2YXIgY2FjaGUgPSBtZW1vaXplLmNhY2hlO1xuICAgICAgdmFyIGFkZHJlc3MgPSAnJyArIChoYXNoZXIgPyBoYXNoZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IGtleSk7XG4gICAgICBpZiAoIV8uaGFzKGNhY2hlLCBhZGRyZXNzKSkgY2FjaGVbYWRkcmVzc10gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gY2FjaGVbYWRkcmVzc107XG4gICAgfTtcbiAgICBtZW1vaXplLmNhY2hlID0ge307XG4gICAgcmV0dXJuIG1lbW9pemU7XG4gIH07XG5cbiAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG4gIF8uZGVsYXkgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0sIHdhaXQpO1xuICB9O1xuXG4gIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhc1xuICAvLyBjbGVhcmVkLlxuICBfLmRlZmVyID0gXy5wYXJ0aWFsKF8uZGVsYXksIF8sIDEpO1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuICAvLyBkdXJpbmcgYSBnaXZlbiB3aW5kb3cgb2YgdGltZS4gTm9ybWFsbHksIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbCBydW5cbiAgLy8gYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuICAvLyBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuICAvLyBge2xlYWRpbmc6IGZhbHNlfWAuIFRvIGRpc2FibGUgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlLCBkaXR0by5cbiAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xuICAgIHZhciB0aW1lb3V0ID0gbnVsbDtcbiAgICB2YXIgcHJldmlvdXMgPSAwO1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IF8ubm93KCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub3cgPSBfLm5vdygpO1xuICAgICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcbiAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICAvLyBiZSB0cmlnZ2VyZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBpdCBzdG9wcyBiZWluZyBjYWxsZWQgZm9yXG4gIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICAvLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICBfLmRlYm91bmNlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGFzdCA9IF8ubm93KCkgLSB0aW1lc3RhbXA7XG5cbiAgICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdGltZXN0YW1wID0gXy5ub3coKTtcbiAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICBpZiAoY2FsbE5vdykge1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBmdW5jdGlvbiBwYXNzZWQgYXMgYW4gYXJndW1lbnQgdG8gdGhlIHNlY29uZCxcbiAgLy8gYWxsb3dpbmcgeW91IHRvIGFkanVzdCBhcmd1bWVudHMsIHJ1biBjb2RlIGJlZm9yZSBhbmQgYWZ0ZXIsIGFuZFxuICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICBfLndyYXAgPSBmdW5jdGlvbihmdW5jLCB3cmFwcGVyKSB7XG4gICAgcmV0dXJuIF8ucGFydGlhbCh3cmFwcGVyLCBmdW5jKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgbmVnYXRlZCB2ZXJzaW9uIG9mIHRoZSBwYXNzZWQtaW4gcHJlZGljYXRlLlxuICBfLm5lZ2F0ZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhcHJlZGljYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaFxuICAvLyBjb25zdW1pbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gdGhhdCBmb2xsb3dzLlxuICBfLmNvbXBvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgc3RhcnQgPSBhcmdzLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGkgPSBzdGFydDtcbiAgICAgIHZhciByZXN1bHQgPSBhcmdzW3N0YXJ0XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgd2hpbGUgKGktLSkgcmVzdWx0ID0gYXJnc1tpXS5jYWxsKHRoaXMsIHJlc3VsdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIG9uIGFuZCBhZnRlciB0aGUgTnRoIGNhbGwuXG4gIF8uYWZ0ZXIgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXRpbWVzIDwgMSkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIHVwIHRvIChidXQgbm90IGluY2x1ZGluZykgdGhlIE50aCBjYWxsLlxuICBfLmJlZm9yZSA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgdmFyIG1lbW87XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPiAwKSB7XG4gICAgICAgIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICBpZiAodGltZXMgPD0gMSkgZnVuYyA9IG51bGw7XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYXQgbW9zdCBvbmUgdGltZSwgbm8gbWF0dGVyIGhvd1xuICAvLyBvZnRlbiB5b3UgY2FsbCBpdC4gVXNlZnVsIGZvciBsYXp5IGluaXRpYWxpemF0aW9uLlxuICBfLm9uY2UgPSBfLnBhcnRpYWwoXy5iZWZvcmUsIDIpO1xuXG4gIC8vIE9iamVjdCBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEtleXMgaW4gSUUgPCA5IHRoYXQgd29uJ3QgYmUgaXRlcmF0ZWQgYnkgYGZvciBrZXkgaW4gLi4uYCBhbmQgdGh1cyBtaXNzZWQuXG4gIHZhciBoYXNFbnVtQnVnID0gIXt0b1N0cmluZzogbnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7XG4gIHZhciBub25FbnVtZXJhYmxlUHJvcHMgPSBbJ3ZhbHVlT2YnLCAnaXNQcm90b3R5cGVPZicsICd0b1N0cmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJ2hhc093blByb3BlcnR5JywgJ3RvTG9jYWxlU3RyaW5nJ107XG5cbiAgZnVuY3Rpb24gY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpIHtcbiAgICB2YXIgbm9uRW51bUlkeCA9IG5vbkVudW1lcmFibGVQcm9wcy5sZW5ndGg7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuICAgIHZhciBwcm90byA9IChfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSkgfHwgT2JqUHJvdG87XG5cbiAgICAvLyBDb25zdHJ1Y3RvciBpcyBhIHNwZWNpYWwgY2FzZS5cbiAgICB2YXIgcHJvcCA9ICdjb25zdHJ1Y3Rvcic7XG4gICAgaWYgKF8uaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTtcblxuICAgIHdoaWxlIChub25FbnVtSWR4LS0pIHtcbiAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07XG4gICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkge1xuICAgICAgICBrZXlzLnB1c2gocHJvcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgT2JqZWN0LmtleXNgXG4gIF8ua2V5cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107XG4gICAgaWYgKG5hdGl2ZUtleXMpIHJldHVybiBuYXRpdmVLZXlzKG9iaik7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBpZiAoXy5oYXMob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cbiAgXy5hbGxLZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5c1tpXV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3RcbiAgLy8gSW4gY29udHJhc3QgdG8gXy5tYXAgaXQgcmV0dXJucyBhbiBvYmplY3RcbiAgXy5tYXBPYmplY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAgXy5rZXlzKG9iaiksXG4gICAgICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0cyA9IHt9LFxuICAgICAgICAgIGN1cnJlbnRLZXk7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGN1cnJlbnRLZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgICAgcmVzdWx0c1tjdXJyZW50S2V5XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENvbnZlcnQgYW4gb2JqZWN0IGludG8gYSBsaXN0IG9mIGBba2V5LCB2YWx1ZV1gIHBhaXJzLlxuICBfLnBhaXJzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHBhaXJzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBwYWlyc1tpXSA9IFtrZXlzW2ldLCBvYmpba2V5c1tpXV1dO1xuICAgIH1cbiAgICByZXR1cm4gcGFpcnM7XG4gIH07XG5cbiAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHRbb2JqW2tleXNbaV1dXSA9IGtleXNbaV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LlxuICAvLyBBbGlhc2VkIGFzIGBtZXRob2RzYFxuICBfLmZ1bmN0aW9ucyA9IF8ubWV0aG9kcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBuYW1lcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24ob2JqW2tleV0pKSBuYW1lcy5wdXNoKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lcy5zb3J0KCk7XG4gIH07XG5cbiAgLy8gRXh0ZW5kIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBwcm9wZXJ0aWVzIGluIHBhc3NlZC1pbiBvYmplY3QocykuXG4gIF8uZXh0ZW5kID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTtcblxuICAvLyBBc3NpZ25zIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBvd24gcHJvcGVydGllcyBpbiB0aGUgcGFzc2VkLWluIG9iamVjdChzKVxuICAvLyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbilcbiAgXy5leHRlbmRPd24gPSBfLmFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKF8ua2V5cyk7XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3Qga2V5IG9uIGFuIG9iamVjdCB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEtleSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLCBrZXk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtrZXldLCBrZXksIG9iaikpIHJldHVybiBrZXk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ucGljayA9IGZ1bmN0aW9uKG9iamVjdCwgb2l0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9LCBvYmogPSBvYmplY3QsIGl0ZXJhdGVlLCBrZXlzO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKG9pdGVyYXRlZSkpIHtcbiAgICAgIGtleXMgPSBfLmFsbEtleXMob2JqKTtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihvaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXlzID0gZmxhdHRlbihhcmd1bWVudHMsIGZhbHNlLCBmYWxzZSwgMSk7XG4gICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikgeyByZXR1cm4ga2V5IGluIG9iajsgfTtcbiAgICAgIG9iaiA9IE9iamVjdChvYmopO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgIGlmIChpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmopKSByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2l0aG91dCB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5vbWl0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmIChfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKSB7XG4gICAgICBpdGVyYXRlZSA9IF8ubmVnYXRlKGl0ZXJhdGVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGtleXMgPSBfLm1hcChmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKSwgU3RyaW5nKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7XG4gIH07XG5cbiAgLy8gRmlsbCBpbiBhIGdpdmVuIG9iamVjdCB3aXRoIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgXy5kZWZhdWx0cyA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cywgdHJ1ZSk7XG5cbiAgLy8gQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBwcm90b3R5cGUgb2JqZWN0LlxuICAvLyBJZiBhZGRpdGlvbmFsIHByb3BlcnRpZXMgYXJlIHByb3ZpZGVkIHRoZW4gdGhleSB3aWxsIGJlIGFkZGVkIHRvIHRoZVxuICAvLyBjcmVhdGVkIG9iamVjdC5cbiAgXy5jcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUsIHByb3BzKSB7XG4gICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTtcbiAgICBpZiAocHJvcHMpIF8uZXh0ZW5kT3duKHJlc3VsdCwgcHJvcHMpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LlxuICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIF8uaXNBcnJheShvYmopID8gb2JqLnNsaWNlKCkgOiBfLmV4dGVuZCh7fSwgb2JqKTtcbiAgfTtcblxuICAvLyBJbnZva2VzIGludGVyY2VwdG9yIHdpdGggdGhlIG9iaiwgYW5kIHRoZW4gcmV0dXJucyBvYmouXG4gIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kIGNoYWluLCBpblxuICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi5cbiAgXy50YXAgPSBmdW5jdGlvbihvYmosIGludGVyY2VwdG9yKSB7XG4gICAgaW50ZXJjZXB0b3Iob2JqKTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmlzTWF0Y2ggPSBmdW5jdGlvbihvYmplY3QsIGF0dHJzKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMoYXR0cnMpLCBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAhbGVuZ3RoO1xuICAgIHZhciBvYmogPSBPYmplY3Qob2JqZWN0KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChhdHRyc1trZXldICE9PSBvYmpba2V5XSB8fCAhKGtleSBpbiBvYmopKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG5cbiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cbiAgdmFyIGVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHtcbiAgICAvLyBJZGVudGljYWwgb2JqZWN0cyBhcmUgZXF1YWwuIGAwID09PSAtMGAsIGJ1dCB0aGV5IGFyZW4ndCBpZGVudGljYWwuXG4gICAgLy8gU2VlIHRoZSBbSGFybW9ueSBgZWdhbGAgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbCkuXG4gICAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjtcbiAgICAvLyBBIHN0cmljdCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGBudWxsID09IHVuZGVmaW5lZGAuXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBhID09PSBiO1xuICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLlxuICAgIGlmIChhIGluc3RhbmNlb2YgXykgYSA9IGEuX3dyYXBwZWQ7XG4gICAgaWYgKGIgaW5zdGFuY2VvZiBfKSBiID0gYi5fd3JhcHBlZDtcbiAgICAvLyBDb21wYXJlIGBbW0NsYXNzXV1gIG5hbWVzLlxuICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpO1xuICAgIGlmIChjbGFzc05hbWUgIT09IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTtcbiAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgcmVndWxhciBleHByZXNzaW9ucywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuXG4gICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgLy8gUmVnRXhwcyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGZvciBjb21wYXJpc29uIChOb3RlOiAnJyArIC9hL2kgPT09ICcvYS9pJylcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICAgIC8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgXCI1XCJgIGlzXG4gICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gYG5ldyBTdHJpbmcoXCI1XCIpYC5cbiAgICAgICAgcmV0dXJuICcnICsgYSA9PT0gJycgKyBiO1xuICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgICAgLy8gYE5hTmBzIGFyZSBlcXVpdmFsZW50LCBidXQgbm9uLXJlZmxleGl2ZS5cbiAgICAgICAgLy8gT2JqZWN0KE5hTikgaXMgZXF1aXZhbGVudCB0byBOYU5cbiAgICAgICAgaWYgKCthICE9PSArYSkgcmV0dXJuICtiICE9PSArYjtcbiAgICAgICAgLy8gQW4gYGVnYWxgIGNvbXBhcmlzb24gaXMgcGVyZm9ybWVkIGZvciBvdGhlciBudW1lcmljIHZhbHVlcy5cbiAgICAgICAgcmV0dXJuICthID09PSAwID8gMSAvICthID09PSAxIC8gYiA6ICthID09PSArYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtZXJpYyBwcmltaXRpdmUgdmFsdWVzLiBEYXRlcyBhcmUgY29tcGFyZWQgYnkgdGhlaXJcbiAgICAgICAgLy8gbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zLiBOb3RlIHRoYXQgaW52YWxpZCBkYXRlcyB3aXRoIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9uc1xuICAgICAgICAvLyBvZiBgTmFOYCBhcmUgbm90IGVxdWl2YWxlbnQuXG4gICAgICAgIHJldHVybiArYSA9PT0gK2I7XG4gICAgfVxuXG4gICAgdmFyIGFyZUFycmF5cyA9IGNsYXNzTmFtZSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICBpZiAoIWFyZUFycmF5cykge1xuICAgICAgaWYgKHR5cGVvZiBhICE9ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudCwgYnV0IGBPYmplY3RgcyBvciBgQXJyYXlgc1xuICAgICAgLy8gZnJvbSBkaWZmZXJlbnQgZnJhbWVzIGFyZS5cbiAgICAgIHZhciBhQ3RvciA9IGEuY29uc3RydWN0b3IsIGJDdG9yID0gYi5jb25zdHJ1Y3RvcjtcbiAgICAgIGlmIChhQ3RvciAhPT0gYkN0b3IgJiYgIShfLmlzRnVuY3Rpb24oYUN0b3IpICYmIGFDdG9yIGluc3RhbmNlb2YgYUN0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24oYkN0b3IpICYmIGJDdG9yIGluc3RhbmNlb2YgYkN0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICYmICgnY29uc3RydWN0b3InIGluIGEgJiYgJ2NvbnN0cnVjdG9yJyBpbiBiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFzc3VtZSBlcXVhbGl0eSBmb3IgY3ljbGljIHN0cnVjdHVyZXMuIFRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWNcbiAgICAvLyBzdHJ1Y3R1cmVzIGlzIGFkYXB0ZWQgZnJvbSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYC5cblxuICAgIC8vIEluaXRpYWxpemluZyBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICAvLyBJdCdzIGRvbmUgaGVyZSBzaW5jZSB3ZSBvbmx5IG5lZWQgdGhlbSBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIGNvbXBhcmlzb24uXG4gICAgYVN0YWNrID0gYVN0YWNrIHx8IFtdO1xuICAgIGJTdGFjayA9IGJTdGFjayB8fCBbXTtcbiAgICB2YXIgbGVuZ3RoID0gYVN0YWNrLmxlbmd0aDtcbiAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgIC8vIExpbmVhciBzZWFyY2guIFBlcmZvcm1hbmNlIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZlxuICAgICAgLy8gdW5pcXVlIG5lc3RlZCBzdHJ1Y3R1cmVzLlxuICAgICAgaWYgKGFTdGFja1tsZW5ndGhdID09PSBhKSByZXR1cm4gYlN0YWNrW2xlbmd0aF0gPT09IGI7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBmaXJzdCBvYmplY3QgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wdXNoKGEpO1xuICAgIGJTdGFjay5wdXNoKGIpO1xuXG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAgaWYgKGFyZUFycmF5cykge1xuICAgICAgLy8gQ29tcGFyZSBhcnJheSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkuXG4gICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBEZWVwIGNvbXBhcmUgdGhlIGNvbnRlbnRzLCBpZ25vcmluZyBub24tbnVtZXJpYyBwcm9wZXJ0aWVzLlxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmICghZXEoYVtsZW5ndGhdLCBiW2xlbmd0aF0sIGFTdGFjaywgYlN0YWNrKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZWVwIGNvbXBhcmUgb2JqZWN0cy5cbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKGEpLCBrZXk7XG4gICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgIC8vIEVuc3VyZSB0aGF0IGJvdGggb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIG51bWJlciBvZiBwcm9wZXJ0aWVzIGJlZm9yZSBjb21wYXJpbmcgZGVlcCBlcXVhbGl0eS5cbiAgICAgIGlmIChfLmtleXMoYikubGVuZ3RoICE9PSBsZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAvLyBEZWVwIGNvbXBhcmUgZWFjaCBtZW1iZXJcbiAgICAgICAga2V5ID0ga2V5c1tsZW5ndGhdO1xuICAgICAgICBpZiAoIShfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wb3AoKTtcbiAgICBiU3RhY2sucG9wKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG4gIF8uaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXEoYSwgYik7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG4gIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG4gIF8uaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICByZXR1cm4gXy5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD9cbiAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cbiAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXlcbiAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0P1xuICBfLmlzT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9O1xuXG4gIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLlxuICBfLmVhY2goWydBcmd1bWVudHMnLCAnRnVuY3Rpb24nLCAnU3RyaW5nJywgJ051bWJlcicsICdEYXRlJywgJ1JlZ0V4cCcsICdFcnJvciddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgX1snaXMnICsgbmFtZV0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0ICcgKyBuYW1lICsgJ10nO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIERlZmluZSBhIGZhbGxiYWNrIHZlcnNpb24gb2YgdGhlIG1ldGhvZCBpbiBicm93c2VycyAoYWhlbSwgSUUgPCA5KSwgd2hlcmVcbiAgLy8gdGhlcmUgaXNuJ3QgYW55IGluc3BlY3RhYmxlIFwiQXJndW1lbnRzXCIgdHlwZS5cbiAgaWYgKCFfLmlzQXJndW1lbnRzKGFyZ3VtZW50cykpIHtcbiAgICBfLmlzQXJndW1lbnRzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5oYXMob2JqLCAnY2FsbGVlJyk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIE9wdGltaXplIGBpc0Z1bmN0aW9uYCBpZiBhcHByb3ByaWF0ZS4gV29yayBhcm91bmQgc29tZSB0eXBlb2YgYnVncyBpbiBvbGQgdjgsXG4gIC8vIElFIDExICgjMTYyMSksIGFuZCBpbiBTYWZhcmkgOCAoIzE5MjkpLlxuICBpZiAodHlwZW9mIC8uLyAhPSAnZnVuY3Rpb24nICYmIHR5cGVvZiBJbnQ4QXJyYXkgIT0gJ29iamVjdCcpIHtcbiAgICBfLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicgfHwgZmFsc2U7XG4gICAgfTtcbiAgfVxuXG4gIC8vIElzIGEgZ2l2ZW4gb2JqZWN0IGEgZmluaXRlIG51bWJlcj9cbiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBpc0Zpbml0ZShvYmopICYmICFpc05hTihwYXJzZUZsb2F0KG9iaikpO1xuICB9O1xuXG4gIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD8gKE5hTiBpcyB0aGUgb25seSBudW1iZXIgd2hpY2ggZG9lcyBub3QgZXF1YWwgaXRzZWxmKS5cbiAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgb2JqICE9PSArb2JqO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuP1xuICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJvb2xlYW5dJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGVxdWFsIHRvIG51bGw/XG4gIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gbnVsbDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIHVuZGVmaW5lZD9cbiAgXy5pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHZvaWQgMDtcbiAgfTtcblxuICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5XG4gIC8vIG9uIGl0c2VsZiAoaW4gb3RoZXIgd29yZHMsIG5vdCBvbiBhIHByb3RvdHlwZSkuXG4gIF8uaGFzID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG4gIH07XG5cbiAgLy8gVXRpbGl0eSBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSdW4gVW5kZXJzY29yZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzXG4gIC8vIHByZXZpb3VzIG93bmVyLiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcm9vdC5fID0gcHJldmlvdXNVbmRlcnNjb3JlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIEtlZXAgdGhlIGlkZW50aXR5IGZ1bmN0aW9uIGFyb3VuZCBmb3IgZGVmYXVsdCBpdGVyYXRlZXMuXG4gIF8uaWRlbnRpdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvLyBQcmVkaWNhdGUtZ2VuZXJhdGluZyBmdW5jdGlvbnMuIE9mdGVuIHVzZWZ1bCBvdXRzaWRlIG9mIFVuZGVyc2NvcmUuXG4gIF8uY29uc3RhbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICB9O1xuXG4gIF8ubm9vcCA9IGZ1bmN0aW9uKCl7fTtcblxuICBfLnByb3BlcnR5ID0gcHJvcGVydHk7XG5cbiAgLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LlxuICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09IG51bGwgPyBmdW5jdGlvbigpe30gOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZlxuICAvLyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5tYXRjaGVyID0gXy5tYXRjaGVzID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaXNNYXRjaChvYmosIGF0dHJzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgYWNjdW1baV0gPSBpdGVyYXRlZShpKTtcbiAgICByZXR1cm4gYWNjdW07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cbiAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT0gbnVsbCkge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gIH07XG5cbiAgLy8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLlxuICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfTtcblxuICAgLy8gTGlzdCBvZiBIVE1MIGVudGl0aWVzIGZvciBlc2NhcGluZy5cbiAgdmFyIGVzY2FwZU1hcCA9IHtcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmI3gyNzsnLFxuICAgICdgJzogJyYjeDYwOydcbiAgfTtcbiAgdmFyIHVuZXNjYXBlTWFwID0gXy5pbnZlcnQoZXNjYXBlTWFwKTtcblxuICAvLyBGdW5jdGlvbnMgZm9yIGVzY2FwaW5nIGFuZCB1bmVzY2FwaW5nIHN0cmluZ3MgdG8vZnJvbSBIVE1MIGludGVycG9sYXRpb24uXG4gIHZhciBjcmVhdGVFc2NhcGVyID0gZnVuY3Rpb24obWFwKSB7XG4gICAgdmFyIGVzY2FwZXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgcmV0dXJuIG1hcFttYXRjaF07XG4gICAgfTtcbiAgICAvLyBSZWdleGVzIGZvciBpZGVudGlmeWluZyBhIGtleSB0aGF0IG5lZWRzIHRvIGJlIGVzY2FwZWRcbiAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XG4gICAgdmFyIHRlc3RSZWdleHAgPSBSZWdFeHAoc291cmNlKTtcbiAgICB2YXIgcmVwbGFjZVJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UsICdnJyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyAnJyA6ICcnICsgc3RyaW5nO1xuICAgICAgcmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpID8gc3RyaW5nLnJlcGxhY2UocmVwbGFjZVJlZ2V4cCwgZXNjYXBlcikgOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgXy5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7XG4gIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcblxuICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIG5hbWVkIGBwcm9wZXJ0eWAgaXMgYSBmdW5jdGlvbiB0aGVuIGludm9rZSBpdCB3aXRoIHRoZVxuICAvLyBgb2JqZWN0YCBhcyBjb250ZXh0OyBvdGhlcndpc2UsIHJldHVybiBpdC5cbiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5LCBmYWxsYmFjaykge1xuICAgIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdm9pZCAwIDogb2JqZWN0W3Byb3BlcnR5XTtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgdmFsdWUgPSBmYWxsYmFjaztcbiAgICB9XG4gICAgcmV0dXJuIF8uaXNGdW5jdGlvbih2YWx1ZSkgPyB2YWx1ZS5jYWxsKG9iamVjdCkgOiB2YWx1ZTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLlxuICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLlxuICB2YXIgaWRDb3VudGVyID0gMDtcbiAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIHZhciBpZCA9ICsraWRDb3VudGVyICsgJyc7XG4gICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7XG4gIH07XG5cbiAgLy8gQnkgZGVmYXVsdCwgVW5kZXJzY29yZSB1c2VzIEVSQi1zdHlsZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLCBjaGFuZ2UgdGhlXG4gIC8vIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cbiAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgIGV2YWx1YXRlICAgIDogLzwlKFtcXHNcXFNdKz8pJT4vZyxcbiAgICBpbnRlcnBvbGF0ZSA6IC88JT0oW1xcc1xcU10rPyklPi9nLFxuICAgIGVzY2FwZSAgICAgIDogLzwlLShbXFxzXFxTXSs/KSU+L2dcbiAgfTtcblxuICAvLyBXaGVuIGN1c3RvbWl6aW5nIGB0ZW1wbGF0ZVNldHRpbmdzYCwgaWYgeW91IGRvbid0IHdhbnQgdG8gZGVmaW5lIGFuXG4gIC8vIGludGVycG9sYXRpb24sIGV2YWx1YXRpb24gb3IgZXNjYXBpbmcgcmVnZXgsIHdlIG5lZWQgb25lIHRoYXQgaXNcbiAgLy8gZ3VhcmFudGVlZCBub3QgdG8gbWF0Y2guXG4gIHZhciBub01hdGNoID0gLyguKV4vO1xuXG4gIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhXG4gIC8vIHN0cmluZyBsaXRlcmFsLlxuICB2YXIgZXNjYXBlcyA9IHtcbiAgICBcIidcIjogICAgICBcIidcIixcbiAgICAnXFxcXCc6ICAgICAnXFxcXCcsXG4gICAgJ1xccic6ICAgICAncicsXG4gICAgJ1xcbic6ICAgICAnbicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIHZhciBlc2NhcGVyID0gL1xcXFx8J3xcXHJ8XFxufFxcdTIwMjh8XFx1MjAyOS9nO1xuXG4gIHZhciBlc2NhcGVDaGFyID0gZnVuY3Rpb24obWF0Y2gpIHtcbiAgICByZXR1cm4gJ1xcXFwnICsgZXNjYXBlc1ttYXRjaF07XG4gIH07XG5cbiAgLy8gSmF2YVNjcmlwdCBtaWNyby10ZW1wbGF0aW5nLCBzaW1pbGFyIHRvIEpvaG4gUmVzaWcncyBpbXBsZW1lbnRhdGlvbi5cbiAgLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLFxuICAvLyBhbmQgY29ycmVjdGx5IGVzY2FwZXMgcXVvdGVzIHdpdGhpbiBpbnRlcnBvbGF0ZWQgY29kZS5cbiAgLy8gTkI6IGBvbGRTZXR0aW5nc2Agb25seSBleGlzdHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICBfLnRlbXBsYXRlID0gZnVuY3Rpb24odGV4dCwgc2V0dGluZ3MsIG9sZFNldHRpbmdzKSB7XG4gICAgaWYgKCFzZXR0aW5ncyAmJiBvbGRTZXR0aW5ncykgc2V0dGluZ3MgPSBvbGRTZXR0aW5ncztcbiAgICBzZXR0aW5ncyA9IF8uZGVmYXVsdHMoe30sIHNldHRpbmdzLCBfLnRlbXBsYXRlU2V0dGluZ3MpO1xuXG4gICAgLy8gQ29tYmluZSBkZWxpbWl0ZXJzIGludG8gb25lIHJlZ3VsYXIgZXhwcmVzc2lvbiB2aWEgYWx0ZXJuYXRpb24uXG4gICAgdmFyIG1hdGNoZXIgPSBSZWdFeHAoW1xuICAgICAgKHNldHRpbmdzLmVzY2FwZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuaW50ZXJwb2xhdGUgfHwgbm9NYXRjaCkuc291cmNlLFxuICAgICAgKHNldHRpbmdzLmV2YWx1YXRlIHx8IG5vTWF0Y2gpLnNvdXJjZVxuICAgIF0uam9pbignfCcpICsgJ3wkJywgJ2cnKTtcblxuICAgIC8vIENvbXBpbGUgdGhlIHRlbXBsYXRlIHNvdXJjZSwgZXNjYXBpbmcgc3RyaW5nIGxpdGVyYWxzIGFwcHJvcHJpYXRlbHkuXG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgc291cmNlID0gXCJfX3ArPSdcIjtcbiAgICB0ZXh0LnJlcGxhY2UobWF0Y2hlciwgZnVuY3Rpb24obWF0Y2gsIGVzY2FwZSwgaW50ZXJwb2xhdGUsIGV2YWx1YXRlLCBvZmZzZXQpIHtcbiAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UoZXNjYXBlciwgZXNjYXBlQ2hhcik7XG4gICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGVzY2FwZSArIFwiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGludGVycG9sYXRlICsgXCIpKT09bnVsbD8nJzpfX3QpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoZXZhbHVhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlICsgXCJcXG5fX3ArPSdcIjtcbiAgICAgIH1cblxuICAgICAgLy8gQWRvYmUgVk1zIG5lZWQgdGhlIG1hdGNoIHJldHVybmVkIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3Qgb2ZmZXN0LlxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgICAvLyBJZiBhIHZhcmlhYmxlIGlzIG5vdCBzcGVjaWZpZWQsIHBsYWNlIGRhdGEgdmFsdWVzIGluIGxvY2FsIHNjb3BlLlxuICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xcbicgKyBzb3VyY2UgKyAnfVxcbic7XG5cbiAgICBzb3VyY2UgPSBcInZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixcIiArXG4gICAgICBcInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XFxuXCIgK1xuICAgICAgc291cmNlICsgJ3JldHVybiBfX3A7XFxuJztcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZS5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cblxuICAgIHZhciB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHJldHVybiByZW5kZXIuY2FsbCh0aGlzLCBkYXRhLCBfKTtcbiAgICB9O1xuXG4gICAgLy8gUHJvdmlkZSB0aGUgY29tcGlsZWQgc291cmNlIGFzIGEgY29udmVuaWVuY2UgZm9yIHByZWNvbXBpbGF0aW9uLlxuICAgIHZhciBhcmd1bWVudCA9IHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonO1xuICAgIHRlbXBsYXRlLnNvdXJjZSA9ICdmdW5jdGlvbignICsgYXJndW1lbnQgKyAnKXtcXG4nICsgc291cmNlICsgJ30nO1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9O1xuXG4gIC8vIEFkZCBhIFwiY2hhaW5cIiBmdW5jdGlvbi4gU3RhcnQgY2hhaW5pbmcgYSB3cmFwcGVkIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLmNoYWluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGluc3RhbmNlID0gXyhvYmopO1xuICAgIGluc3RhbmNlLl9jaGFpbiA9IHRydWU7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9O1xuXG4gIC8vIE9PUFxuICAvLyAtLS0tLS0tLS0tLS0tLS1cbiAgLy8gSWYgVW5kZXJzY29yZSBpcyBjYWxsZWQgYXMgYSBmdW5jdGlvbiwgaXQgcmV0dXJucyBhIHdyYXBwZWQgb2JqZWN0IHRoYXRcbiAgLy8gY2FuIGJlIHVzZWQgT08tc3R5bGUuIFRoaXMgd3JhcHBlciBob2xkcyBhbHRlcmVkIHZlcnNpb25zIG9mIGFsbCB0aGVcbiAgLy8gdW5kZXJzY29yZSBmdW5jdGlvbnMuIFdyYXBwZWQgb2JqZWN0cyBtYXkgYmUgY2hhaW5lZC5cblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udGludWUgY2hhaW5pbmcgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXG4gIHZhciByZXN1bHQgPSBmdW5jdGlvbihpbnN0YW5jZSwgb2JqKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLl9jaGFpbiA/IF8ob2JqKS5jaGFpbigpIDogb2JqO1xuICB9O1xuXG4gIC8vIEFkZCB5b3VyIG93biBjdXN0b20gZnVuY3Rpb25zIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIF8uZWFjaChfLmZ1bmN0aW9ucyhvYmopLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IF9bbmFtZV0gPSBvYmpbbmFtZV07XG4gICAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IFt0aGlzLl93cmFwcGVkXTtcbiAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIGZ1bmMuYXBwbHkoXywgYXJncykpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuXG4gIF8ubWl4aW4oXyk7XG5cbiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7XG4gICAgICBtZXRob2QuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKChuYW1lID09PSAnc2hpZnQnIHx8IG5hbWUgPT09ICdzcGxpY2UnKSAmJiBvYmoubGVuZ3RoID09PSAwKSBkZWxldGUgb2JqWzBdO1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBvYmopO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEFkZCBhbGwgYWNjZXNzb3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydjb25jYXQnLCAnam9pbicsICdzbGljZSddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG4gICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByZXN1bHQodGhpcywgbWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LlxuICBfLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIFByb3ZpZGUgdW53cmFwcGluZyBwcm94eSBmb3Igc29tZSBtZXRob2RzIHVzZWQgaW4gZW5naW5lIG9wZXJhdGlvbnNcbiAgLy8gc3VjaCBhcyBhcml0aG1ldGljIGFuZCBKU09OIHN0cmluZ2lmaWNhdGlvbi5cbiAgXy5wcm90b3R5cGUudmFsdWVPZiA9IF8ucHJvdG90eXBlLnRvSlNPTiA9IF8ucHJvdG90eXBlLnZhbHVlO1xuXG4gIF8ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICcnICsgdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBBTUQgcmVnaXN0cmF0aW9uIGhhcHBlbnMgYXQgdGhlIGVuZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEFNRCBsb2FkZXJzXG4gIC8vIHRoYXQgbWF5IG5vdCBlbmZvcmNlIG5leHQtdHVybiBzZW1hbnRpY3Mgb24gbW9kdWxlcy4gRXZlbiB0aG91Z2ggZ2VuZXJhbFxuICAvLyBwcmFjdGljZSBmb3IgQU1EIHJlZ2lzdHJhdGlvbiBpcyB0byBiZSBhbm9ueW1vdXMsIHVuZGVyc2NvcmUgcmVnaXN0ZXJzXG4gIC8vIGFzIGEgbmFtZWQgbW9kdWxlIGJlY2F1c2UsIGxpa2UgalF1ZXJ5LCBpdCBpcyBhIGJhc2UgbGlicmFyeSB0aGF0IGlzXG4gIC8vIHBvcHVsYXIgZW5vdWdoIHRvIGJlIGJ1bmRsZWQgaW4gYSB0aGlyZCBwYXJ0eSBsaWIsIGJ1dCBub3QgYmUgcGFydCBvZlxuICAvLyBhbiBBTUQgbG9hZCByZXF1ZXN0LiBUaG9zZSBjYXNlcyBjb3VsZCBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGFuXG4gIC8vIGFub255bW91cyBkZWZpbmUoKSBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGxvYWRlciByZXF1ZXN0LlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCd1bmRlcnNjb3JlJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbn0uY2FsbCh0aGlzKSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL34vdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4vKiFcbiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjMuMS4wXG4gKiBodHRwczovL2pxdWVyeS5jb20vXG4gKlxuICogSW5jbHVkZXMgU2l6emxlLmpzXG4gKiBodHRwczovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwczovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTYtMDctMDdUMjE6NDRaXG4gKi9cbiggZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSApKCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIEVkZ2UgPD0gMTIgLSAxMyssIEZpcmVmb3ggPD0xOCAtIDQ1KywgSUUgMTAgLSAxMSwgU2FmYXJpIDUuMSAtIDkrLCBpT1MgNiAtIDkuMVxuLy8gdGhyb3cgZXhjZXB0aW9ucyB3aGVuIG5vbi1zdHJpY3QgY29kZSAoZS5nLiwgQVNQLk5FVCA0LjUpIGFjY2Vzc2VzIHN0cmljdCBtb2RlXG4vLyBhcmd1bWVudHMuY2FsbGVlLmNhbGxlciAodHJhYy0xMzMzNSkuIEJ1dCBhcyBvZiBqUXVlcnkgMy4wICgyMDE2KSwgc3RyaWN0IG1vZGUgc2hvdWxkIGJlIGNvbW1vblxuLy8gZW5vdWdoIHRoYXQgYWxsIHN1Y2ggYXR0ZW1wdHMgYXJlIGd1YXJkZWQgaW4gYSB0cnkgYmxvY2suXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGFyciA9IFtdO1xuXG52YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cbnZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBmblRvU3RyaW5nID0gaGFzT3duLnRvU3RyaW5nO1xuXG52YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmcgPSBmblRvU3RyaW5nLmNhbGwoIE9iamVjdCApO1xuXG52YXIgc3VwcG9ydCA9IHt9O1xuXG5cblxuXHRmdW5jdGlvbiBET01FdmFsKCBjb2RlLCBkb2MgKSB7XG5cdFx0ZG9jID0gZG9jIHx8IGRvY3VtZW50O1xuXG5cdFx0dmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCBcInNjcmlwdFwiICk7XG5cblx0XHRzY3JpcHQudGV4dCA9IGNvZGU7XG5cdFx0ZG9jLmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApO1xuXHR9XG4vKiBnbG9iYWwgU3ltYm9sICovXG4vLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuZXNsaW50cmMgd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWxcbi8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBkZWZpbmUgZ2xvYmFsIG9ubHkgZm9yIHRoaXMgbW9kdWxlXG5cblxuXG52YXJcblx0dmVyc2lvbiA9IFwiMy4xLjBcIixcblxuXHQvLyBEZWZpbmUgYSBsb2NhbCBjb3B5IG9mIGpRdWVyeVxuXHRqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5XG5cdC8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUFxuXHRydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcblxuXHQvLyBNYXRjaGVzIGRhc2hlZCBzdHJpbmcgZm9yIGNhbWVsaXppbmdcblx0cm1zUHJlZml4ID0gL14tbXMtLyxcblx0cmRhc2hBbHBoYSA9IC8tKFthLXpdKS9nLFxuXG5cdC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcblx0ZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcblx0XHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cdH07XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cblx0Ly8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZFxuXHRqcXVlcnk6IHZlcnNpb24sXG5cblx0Y29uc3RydWN0b3I6IGpRdWVyeSxcblxuXHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0bGVuZ3RoOiAwLFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuXHQvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuXHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0cmV0dXJuIG51bSAhPSBudWxsID9cblxuXHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdFx0KCBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdICkgOlxuXG5cdFx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0XHRzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gVGFrZSBhbiBhcnJheSBvZiBlbGVtZW50cyBhbmQgcHVzaCBpdCBvbnRvIHRoZSBzdGFja1xuXHQvLyAocmV0dXJuaW5nIHRoZSBuZXcgbWF0Y2hlZCBlbGVtZW50IHNldClcblx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cblx0XHQvLyBCdWlsZCBhIG5ldyBqUXVlcnkgbWF0Y2hlZCBlbGVtZW50IHNldFxuXHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblxuXHRcdC8vIEFkZCB0aGUgb2xkIG9iamVjdCBvbnRvIHRoZSBzdGFjayAoYXMgYSByZWZlcmVuY2UpXG5cdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXG5cdFx0Ly8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXRcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdC8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuXG5cdGVhY2g6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmVhY2goIHRoaXMsIGNhbGxiYWNrICk7XG5cdH0sXG5cblx0bWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKCBlbGVtLCBpLCBlbGVtICk7XG5cdFx0fSApICk7XG5cdH0sXG5cblx0c2xpY2U6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7XG5cdH0sXG5cblx0Zmlyc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAwICk7XG5cdH0sXG5cblx0bGFzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIC0xICk7XG5cdH0sXG5cblx0ZXE6IGZ1bmN0aW9uKCBpICkge1xuXHRcdHZhciBsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdGogPSAraSArICggaSA8IDAgPyBsZW4gOiAwICk7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqID49IDAgJiYgaiA8IGxlbiA/IFsgdGhpc1sgaiBdIF0gOiBbXSApO1xuXHR9LFxuXG5cdGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKCk7XG5cdH0sXG5cblx0Ly8gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuXHQvLyBCZWhhdmVzIGxpa2UgYW4gQXJyYXkncyBtZXRob2QsIG5vdCBsaWtlIGEgalF1ZXJ5IG1ldGhvZC5cblx0cHVzaDogcHVzaCxcblx0c29ydDogYXJyLnNvcnQsXG5cdHNwbGljZTogYXJyLnNwbGljZVxufTtcblxualF1ZXJ5LmV4dGVuZCA9IGpRdWVyeS5mbi5leHRlbmQgPSBmdW5jdGlvbigpIHtcblx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1sgMCBdIHx8IHt9LFxuXHRcdGkgPSAxLFxuXHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0ZGVlcCA9IGZhbHNlO1xuXG5cdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0aWYgKCB0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRkZWVwID0gdGFyZ2V0O1xuXG5cdFx0Ly8gU2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1sgaSBdIHx8IHt9O1xuXHRcdGkrKztcblx0fVxuXG5cdC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KVxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCB0YXJnZXQgKSApIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxuXHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdGktLTtcblx0fVxuXG5cdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXG5cdFx0Ly8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlc1xuXHRcdGlmICggKCBvcHRpb25zID0gYXJndW1lbnRzWyBpIF0gKSAhPSBudWxsICkge1xuXG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29weSApIHx8XG5cdFx0XHRcdFx0KCBjb3B5SXNBcnJheSA9IGpRdWVyeS5pc0FycmF5KCBjb3B5ICkgKSApICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSApIHtcblx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNBcnJheSggc3JjICkgPyBzcmMgOiBbXTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggc3JjICkgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGpRdWVyeS5leHRlbmQoIGRlZXAsIGNsb25lLCBjb3B5ICk7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBjb3B5O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3Rcblx0cmV0dXJuIHRhcmdldDtcbn07XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2Vcblx0ZXhwYW5kbzogXCJqUXVlcnlcIiArICggdmVyc2lvbiArIE1hdGgucmFuZG9tKCkgKS5yZXBsYWNlKCAvXFxEL2csIFwiXCIgKSxcblxuXHQvLyBBc3N1bWUgalF1ZXJ5IGlzIHJlYWR5IHdpdGhvdXQgdGhlIHJlYWR5IG1vZHVsZVxuXHRpc1JlYWR5OiB0cnVlLFxuXG5cdGVycm9yOiBmdW5jdGlvbiggbXNnICkge1xuXHRcdHRocm93IG5ldyBFcnJvciggbXNnICk7XG5cdH0sXG5cblx0bm9vcDogZnVuY3Rpb24oKSB7fSxcblxuXHRpc0Z1bmN0aW9uOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHJldHVybiBqUXVlcnkudHlwZSggb2JqICkgPT09IFwiZnVuY3Rpb25cIjtcblx0fSxcblxuXHRpc0FycmF5OiBBcnJheS5pc0FycmF5LFxuXG5cdGlzV2luZG93OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG5cdH0sXG5cblx0aXNOdW1lcmljOiBmdW5jdGlvbiggb2JqICkge1xuXG5cdFx0Ly8gQXMgb2YgalF1ZXJ5IDMuMCwgaXNOdW1lcmljIGlzIGxpbWl0ZWQgdG9cblx0XHQvLyBzdHJpbmdzIGFuZCBudW1iZXJzIChwcmltaXRpdmVzIG9yIG9iamVjdHMpXG5cdFx0Ly8gdGhhdCBjYW4gYmUgY29lcmNlZCB0byBmaW5pdGUgbnVtYmVycyAoZ2gtMjY2Milcblx0XHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblx0XHRyZXR1cm4gKCB0eXBlID09PSBcIm51bWJlclwiIHx8IHR5cGUgPT09IFwic3RyaW5nXCIgKSAmJlxuXG5cdFx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAoXCJcIilcblx0XHRcdC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0XHRcdC8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTlxuXHRcdFx0IWlzTmFOKCBvYmogLSBwYXJzZUZsb2F0KCBvYmogKSApO1xuXHR9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIHByb3RvLCBDdG9yO1xuXG5cdFx0Ly8gRGV0ZWN0IG9idmlvdXMgbmVnYXRpdmVzXG5cdFx0Ly8gVXNlIHRvU3RyaW5nIGluc3RlYWQgb2YgalF1ZXJ5LnR5cGUgdG8gY2F0Y2ggaG9zdCBvYmplY3RzXG5cdFx0aWYgKCAhb2JqIHx8IHRvU3RyaW5nLmNhbGwoIG9iaiApICE9PSBcIltvYmplY3QgT2JqZWN0XVwiICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHByb3RvID0gZ2V0UHJvdG8oIG9iaiApO1xuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIG5vIHByb3RvdHlwZSAoZS5nLiwgYE9iamVjdC5jcmVhdGUoIG51bGwgKWApIGFyZSBwbGFpblxuXHRcdGlmICggIXByb3RvICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gT2JqZWN0cyB3aXRoIHByb3RvdHlwZSBhcmUgcGxhaW4gaWZmIHRoZXkgd2VyZSBjb25zdHJ1Y3RlZCBieSBhIGdsb2JhbCBPYmplY3QgZnVuY3Rpb25cblx0XHRDdG9yID0gaGFzT3duLmNhbGwoIHByb3RvLCBcImNvbnN0cnVjdG9yXCIgKSAmJiBwcm90by5jb25zdHJ1Y3Rvcjtcblx0XHRyZXR1cm4gdHlwZW9mIEN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBmblRvU3RyaW5nLmNhbGwoIEN0b3IgKSA9PT0gT2JqZWN0RnVuY3Rpb25TdHJpbmc7XG5cdH0sXG5cblx0aXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblxuXHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5cdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lc2xpbnQvZXNsaW50L2lzc3Vlcy82MTI1XG5cdFx0dmFyIG5hbWU7XG5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0dHlwZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRpZiAoIG9iaiA9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIG9iaiArIFwiXCI7XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTIuMyBvbmx5IChmdW5jdGlvbmlzaCBSZWdFeHApXG5cdFx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRcdGNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwoIG9iaiApIF0gfHwgXCJvYmplY3RcIiA6XG5cdFx0XHR0eXBlb2Ygb2JqO1xuXHR9LFxuXG5cdC8vIEV2YWx1YXRlcyBhIHNjcmlwdCBpbiBhIGdsb2JhbCBjb250ZXh0XG5cdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkge1xuXHRcdERPTUV2YWwoIGNvZGUgKTtcblx0fSxcblxuXHQvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExLCBFZGdlIDEyIC0gMTNcblx0Ly8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuXHRjYW1lbENhc2U6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG5cdFx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG5cdH0sXG5cblx0bm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHR9LFxuXG5cdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrICkge1xuXHRcdHZhciBsZW5ndGgsIGkgPSAwO1xuXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7XG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBvYmo7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5XG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBPYmplY3QoIGFyciApICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggcmV0LFxuXHRcdFx0XHRcdHR5cGVvZiBhcnIgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdFsgYXJyIF0gOiBhcnJcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guY2FsbCggcmV0LCBhcnIgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdGluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7XG5cdFx0cmV0dXJuIGFyciA9PSBudWxsID8gLTEgOiBpbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdG1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHtcblx0XHR2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsXG5cdFx0XHRqID0gMCxcblx0XHRcdGkgPSBmaXJzdC5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdGZpcnN0WyBpKysgXSA9IHNlY29uZFsgaiBdO1xuXHRcdH1cblxuXHRcdGZpcnN0Lmxlbmd0aCA9IGk7XG5cblx0XHRyZXR1cm4gZmlyc3Q7XG5cdH0sXG5cblx0Z3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuXHRcdHZhciBjYWxsYmFja0ludmVyc2UsXG5cdFx0XHRtYXRjaGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcblx0XHRcdGNhbGxiYWNrRXhwZWN0ID0gIWludmVydDtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXNcblx0XHQvLyB0aGF0IHBhc3MgdGhlIHZhbGlkYXRvciBmdW5jdGlvblxuXHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0Y2FsbGJhY2tJbnZlcnNlID0gIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7XG5cdFx0XHRpZiAoIGNhbGxiYWNrSW52ZXJzZSAhPT0gY2FsbGJhY2tFeHBlY3QgKSB7XG5cdFx0XHRcdG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVzO1xuXHR9LFxuXG5cdC8vIGFyZyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHtcblx0XHR2YXIgbGVuZ3RoLCB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0cmV0ID0gW107XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgdHJhbnNsYXRpbmcgZWFjaCBvZiB0aGUgaXRlbXMgdG8gdGhlaXIgbmV3IHZhbHVlc1xuXHRcdGlmICggaXNBcnJheUxpa2UoIGVsZW1zICkgKSB7XG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGg7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIGVsZW1zICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0cmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuXHR9LFxuXG5cdC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuXHRndWlkOiAxLFxuXG5cdC8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuXHQvLyBhcmd1bWVudHMuXG5cdHByb3h5OiBmdW5jdGlvbiggZm4sIGNvbnRleHQgKSB7XG5cdFx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dG1wID0gZm5bIGNvbnRleHQgXTtcblx0XHRcdGNvbnRleHQgPSBmbjtcblx0XHRcdGZuID0gdG1wO1xuXHRcdH1cblxuXHRcdC8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjXG5cdFx0Ly8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cblx0XHRpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggZm4gKSApIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gU2ltdWxhdGVkIGJpbmRcblx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG5cdFx0cHJveHkgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApO1xuXHRcdH07XG5cblx0XHQvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWRcblx0XHRwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblxuXHRcdHJldHVybiBwcm94eTtcblx0fSxcblxuXHRub3c6IERhdGUubm93LFxuXG5cdC8vIGpRdWVyeS5zdXBwb3J0IGlzIG5vdCB1c2VkIGluIENvcmUgYnV0IG90aGVyIHByb2plY3RzIGF0dGFjaCB0aGVpclxuXHQvLyBwcm9wZXJ0aWVzIHRvIGl0IHNvIGl0IG5lZWRzIHRvIGV4aXN0LlxuXHRzdXBwb3J0OiBzdXBwb3J0XG59ICk7XG5cbmlmICggdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRqUXVlcnkuZm5bIFN5bWJvbC5pdGVyYXRvciBdID0gYXJyWyBTeW1ib2wuaXRlcmF0b3IgXTtcbn1cblxuLy8gUG9wdWxhdGUgdGhlIGNsYXNzMnR5cGUgbWFwXG5qUXVlcnkuZWFjaCggXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbFwiLnNwbGl0KCBcIiBcIiApLFxuZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSApO1xuXG5mdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkge1xuXG5cdC8vIFN1cHBvcnQ6IHJlYWwgaU9TIDguMiBvbmx5IChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcilcblx0Ly8gYGluYCBjaGVjayB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0yMTQ1KVxuXHQvLyBoYXNPd24gaXNuJ3QgdXNlZCBoZXJlIGR1ZSB0byBmYWxzZSBuZWdhdGl2ZXNcblx0Ly8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRVxuXHR2YXIgbGVuZ3RoID0gISFvYmogJiYgXCJsZW5ndGhcIiBpbiBvYmogJiYgb2JqLmxlbmd0aCxcblx0XHR0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApO1xuXG5cdGlmICggdHlwZSA9PT0gXCJmdW5jdGlvblwiIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIHR5cGUgPT09IFwiYXJyYXlcIiB8fCBsZW5ndGggPT09IDAgfHxcblx0XHR0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiICYmIGxlbmd0aCA+IDAgJiYgKCBsZW5ndGggLSAxICkgaW4gb2JqO1xufVxudmFyIFNpenpsZSA9XG4vKiFcbiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjMuMFxuICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTYtMDEtMDRcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0aGFzT3duID0gKHt9KS5oYXNPd25Qcm9wZXJ0eSxcblx0YXJyID0gW10sXG5cdHBvcCA9IGFyci5wb3AsXG5cdHB1c2hfbmF0aXZlID0gYXJyLnB1c2gsXG5cdHB1c2ggPSBhcnIucHVzaCxcblx0c2xpY2UgPSBhcnIuc2xpY2UsXG5cdC8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBhcyBpdCdzIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQvLyBodHRwczovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zZWxlY3RvcnMvI3doaXRlc3BhY2Vcblx0d2hpdGVzcGFjZSA9IFwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixcblxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IFwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFwwLVxcXFx4YTBdKStcIixcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBpZGVudGlmaWVyICsgXCIpKD86XCIgKyB3aGl0ZXNwYWNlICtcblx0XHQvLyBPcGVyYXRvciAoY2FwdHVyZSAyKVxuXHRcdFwiKihbKl4kfCF+XT89KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gXCJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdIG9yIHN0cmluZ3MgW2NhcHR1cmUgMyBvciBjYXB0dXJlIDRdXCJcblx0XHRcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiICsgaWRlbnRpZmllciArIFwiKSl8KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XCIqXFxcXF1cIixcblxuXHRwc2V1ZG9zID0gXCI6KFwiICsgaWRlbnRpZmllciArIFwiKSg/OlxcXFwoKFwiICtcblx0XHQvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOlxuXHRcdC8vIDEuIHF1b3RlZCAoY2FwdHVyZSAzOyBjYXB0dXJlIDQgb3IgY2FwdHVyZSA1KVxuXHRcdFwiKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8XCIgK1xuXHRcdC8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KVxuXHRcdFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiICsgYXR0cmlidXRlcyArIFwiKSopfFwiICtcblx0XHQvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpXG5cdFx0XCIuKlwiICtcblx0XHRcIilcXFxcKXwpXCIsXG5cblx0Ly8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlclxuXHRyd2hpdGVzcGFjZSA9IG5ldyBSZWdFeHAoIHdoaXRlc3BhY2UgKyBcIitcIiwgXCJnXCIgKSxcblx0cnRyaW0gPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIgKyB3aGl0ZXNwYWNlICsgXCIrJFwiLCBcImdcIiApLFxuXG5cdHJjb21tYSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKixcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXHRyY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiooWz4rfl18XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblxuXHRyYXR0cmlidXRlUXVvdGVzID0gbmV3IFJlZ0V4cCggXCI9XCIgKyB3aGl0ZXNwYWNlICsgXCIqKFteXFxcXF0nXFxcIl0qPylcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcXVwiLCBcImdcIiApLFxuXG5cdHJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksXG5cdHJpZGVudGlmaWVyID0gbmV3IFJlZ0V4cCggXCJeXCIgKyBpZGVudGlmaWVyICsgXCIkXCIgKSxcblxuXHRtYXRjaEV4cHIgPSB7XG5cdFx0XCJJRFwiOiBuZXcgUmVnRXhwKCBcIl4jKFwiICsgaWRlbnRpZmllciArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFwiVEFHXCI6IG5ldyBSZWdFeHAoIFwiXihcIiArIGlkZW50aWZpZXIgKyBcInxbKl0pXCIgKSxcblx0XHRcIkFUVFJcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBhdHRyaWJ1dGVzICksXG5cdFx0XCJQU0VVRE9cIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBwc2V1ZG9zICksXG5cdFx0XCJDSElMRFwiOiBuZXcgUmVnRXhwKCBcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86KFsrLV18KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIiooXFxcXGQrKXwpKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfClcIiwgXCJpXCIgKSxcblx0XHRcImJvb2xcIjogbmV3IFJlZ0V4cCggXCJeKD86XCIgKyBib29sZWFucyArIFwiKSRcIiwgXCJpXCIgKSxcblx0XHQvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKClcblx0XHQvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgXG5cdFx0XCJuZWVkc0NvbnRleHRcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiICtcblx0XHRcdHdoaXRlc3BhY2UgKyBcIiooKD86LVxcXFxkKT9cXFxcZCopXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KSg/PVteLV18JClcIiwgXCJpXCIgKVxuXHR9LFxuXG5cdHJpbnB1dHMgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyaGVhZGVyID0gL15oXFxkJC9pLFxuXG5cdHJuYXRpdmUgPSAvXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLFxuXG5cdC8vIEVhc2lseS1wYXJzZWFibGUvcmV0cmlldmFibGUgSUQgb3IgVEFHIG9yIENMQVNTIHNlbGVjdG9yc1xuXHRycXVpY2tFeHByID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sXG5cblx0cnNpYmxpbmcgPSAvWyt+XS8sXG5cblx0Ly8gQ1NTIGVzY2FwZXNcblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI2VzY2FwZWQtY2hhcmFjdGVyc1xuXHRydW5lc2NhcGUgPSBuZXcgUmVnRXhwKCBcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiICsgd2hpdGVzcGFjZSArIFwiP3woXCIgKyB3aGl0ZXNwYWNlICsgXCIpfC4pXCIsIFwiaWdcIiApLFxuXHRmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7XG5cdFx0dmFyIGhpZ2ggPSBcIjB4XCIgKyBlc2NhcGVkIC0gMHgxMDAwMDtcblx0XHQvLyBOYU4gbWVhbnMgbm9uLWNvZGVwb2ludFxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjRcblx0XHQvLyBXb3JrYXJvdW5kIGVycm9uZW91cyBudW1lcmljIGludGVycHJldGF0aW9uIG9mICtcIjB4XCJcblx0XHRyZXR1cm4gaGlnaCAhPT0gaGlnaCB8fCBlc2NhcGVkV2hpdGVzcGFjZSA/XG5cdFx0XHRlc2NhcGVkIDpcblx0XHRcdGhpZ2ggPCAwID9cblx0XHRcdFx0Ly8gQk1QIGNvZGVwb2ludFxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDpcblx0XHRcdFx0Ly8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpXG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggPj4gMTAgfCAweEQ4MDAsIGhpZ2ggJiAweDNGRiB8IDB4REMwMCApO1xuXHR9LFxuXG5cdC8vIENTUyBzdHJpbmcvaWRlbnRpZmllciBzZXJpYWxpemF0aW9uXG5cdC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jY29tbW9uLXNlcmlhbGl6aW5nLWlkaW9tc1xuXHRyY3NzZXNjYXBlID0gLyhbXFwwLVxceDFmXFx4N2ZdfF4tP1xcZCl8Xi0kfFteXFx4ODAtXFx1RkZGRlxcdy1dL2csXG5cdGZjc3Nlc2NhcGUgPSBmdW5jdGlvbiggY2gsIGFzQ29kZVBvaW50ICkge1xuXHRcdGlmICggYXNDb2RlUG9pbnQgKSB7XG5cblx0XHRcdC8vIFUrMDAwMCBOVUxMIGJlY29tZXMgVStGRkZEIFJFUExBQ0VNRU5UIENIQVJBQ1RFUlxuXHRcdFx0aWYgKCBjaCA9PT0gXCJcXDBcIiApIHtcblx0XHRcdFx0cmV0dXJuIFwiXFx1RkZGRFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb250cm9sIGNoYXJhY3RlcnMgYW5kIChkZXBlbmRlbnQgdXBvbiBwb3NpdGlvbikgbnVtYmVycyBnZXQgZXNjYXBlZCBhcyBjb2RlIHBvaW50c1xuXHRcdFx0cmV0dXJuIGNoLnNsaWNlKCAwLCAtMSApICsgXCJcXFxcXCIgKyBjaC5jaGFyQ29kZUF0KCBjaC5sZW5ndGggLSAxICkudG9TdHJpbmcoIDE2ICkgKyBcIiBcIjtcblx0XHR9XG5cblx0XHQvLyBPdGhlciBwb3RlbnRpYWxseS1zcGVjaWFsIEFTQ0lJIGNoYXJhY3RlcnMgZ2V0IGJhY2tzbGFzaC1lc2NhcGVkXG5cdFx0cmV0dXJuIFwiXFxcXFwiICsgY2g7XG5cdH0sXG5cblx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHQvLyBTZWUgc2V0RG9jdW1lbnQoKVxuXHQvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSBcIlBlcm1pc3Npb24gRGVuaWVkXCJcblx0Ly8gZXJyb3IgaW4gSUVcblx0dW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHNldERvY3VtZW50KCk7XG5cdH0sXG5cblx0ZGlzYWJsZWRBbmNlc3RvciA9IGFkZENvbWJpbmF0b3IoXG5cdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXHRcdHsgZGlyOiBcInBhcmVudE5vZGVcIiwgbmV4dDogXCJsZWdlbmRcIiB9XG5cdCk7XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG0sIGksIGVsZW0sIG5pZCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsXG5cdFx0bmV3Q29udGV4dCA9IGNvbnRleHQgJiYgY29udGV4dC5vd25lckRvY3VtZW50LFxuXG5cdFx0Ly8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHRcdG5vZGVUeXBlID0gY29udGV4dCA/IGNvbnRleHQubm9kZVR5cGUgOiA5O1xuXG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdC8vIFJldHVybiBlYXJseSBmcm9tIGNhbGxzIHdpdGggaW52YWxpZCBzZWxlY3RvciBvciBjb250ZXh0XG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50c1xuXHRpZiAoICFzZWVkICkge1xuXG5cdFx0aWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdFx0fVxuXHRcdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdFx0Ly8gSWYgdGhlIHNlbGVjdG9yIGlzIHN1ZmZpY2llbnRseSBzaW1wbGUsIHRyeSB1c2luZyBhIFwiZ2V0KkJ5KlwiIERPTSBtZXRob2Rcblx0XHRcdC8vIChleGNlcHRpbmcgRG9jdW1lbnRGcmFnbWVudCBjb250ZXh0LCB3aGVyZSB0aGUgbWV0aG9kcyBkb24ndCBleGlzdClcblx0XHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0Ly8gSUQgc2VsZWN0b3Jcblx0XHRcdFx0aWYgKCAobSA9IG1hdGNoWzFdKSApIHtcblxuXHRcdFx0XHRcdC8vIERvY3VtZW50IGNvbnRleHRcblx0XHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnNcblx0XHRcdFx0XHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0XHRpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRWxlbWVudCBjb250ZXh0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRpZiAoIG5ld0NvbnRleHQgJiYgKGVsZW0gPSBuZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICYmXG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiZcblx0XHRcdFx0XHRcdFx0ZWxlbS5pZCA9PT0gbSApIHtcblxuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFR5cGUgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHRcdC8vIENsYXNzIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoIChtID0gbWF0Y2hbM10pICYmIHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJlxuXHRcdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVGFrZSBhZHZhbnRhZ2Ugb2YgcXVlcnlTZWxlY3RvckFsbFxuXHRcdFx0aWYgKCBzdXBwb3J0LnFzYSAmJlxuXHRcdFx0XHQhY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdICYmXG5cdFx0XHRcdCghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dDtcblx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IHNlbGVjdG9yO1xuXG5cdFx0XHRcdC8vIHFTQSBsb29rcyBvdXRzaWRlIEVsZW1lbnQgY29udGV4dCwgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudFxuXHRcdFx0XHQvLyBUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhpcyB3b3JrYXJvdW5kIHRlY2huaXF1ZVxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PThcblx0XHRcdFx0Ly8gRXhjbHVkZSBvYmplY3QgZWxlbWVudHNcblx0XHRcdFx0fSBlbHNlIGlmICggY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHRcdFx0Ly8gQ2FwdHVyZSB0aGUgY29udGV4dCBJRCwgc2V0dGluZyBpdCBmaXJzdCBpZiBuZWNlc3Nhcnlcblx0XHRcdFx0XHRpZiAoIChuaWQgPSBjb250ZXh0LmdldEF0dHJpYnV0ZSggXCJpZFwiICkpICkge1xuXHRcdFx0XHRcdFx0bmlkID0gbmlkLnJlcGxhY2UoIHJjc3Nlc2NhcGUsIGZjc3Nlc2NhcGUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgKG5pZCA9IGV4cGFuZG8pICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUHJlZml4IGV2ZXJ5IHNlbGVjdG9yIGluIHRoZSBsaXN0XG5cdFx0XHRcdFx0Z3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0XHRcdFx0aSA9IGdyb3Vwcy5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRncm91cHNbaV0gPSBcIiNcIiArIG5pZCArIFwiIFwiICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oIFwiLFwiICk7XG5cblx0XHRcdFx0XHQvLyBFeHBhbmQgY29udGV4dCBmb3Igc2libGluZyBzZWxlY3RvcnNcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHxcblx0XHRcdFx0XHRcdGNvbnRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9IGNhdGNoICggcXNhRXJyb3IgKSB7XG5cdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdGlmICggbmlkID09PSBleHBhbmRvICkge1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsIG90aGVyc1xuXHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdHZhciBrZXlzID0gW107XG5cblx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cdFx0Ly8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1Nylcblx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cdFx0XHQvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcblx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07XG5cdFx0fVxuXHRcdHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG5cdH1cblx0cmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRmblsgZXhwYW5kbyBdID0gdHJ1ZTtcblx0cmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZWxlbWVudCBhbmQgcmV0dXJucyBhIGJvb2xlYW4gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBlbCApO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9IGZpbmFsbHkge1xuXHRcdC8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdFxuXHRcdGlmICggZWwucGFyZW50Tm9kZSApIHtcblx0XHRcdGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGVsICk7XG5cdFx0fVxuXHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0ZWwgPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG5cdHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG5cdFx0aSA9IGFyci5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0RXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYlxuICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gKi9cbmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHtcblx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0YS5zb3VyY2VJbmRleCAtIGIuc291cmNlSW5kZXg7XG5cblx0Ly8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG5cdGlmICggZGlmZiApIHtcblx0XHRyZXR1cm4gZGlmZjtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG5cdGlmICggY3VyICkge1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7XG5cdFx0XHRpZiAoIGN1ciA9PT0gYiApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gKG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciA6ZW5hYmxlZC86ZGlzYWJsZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGlzYWJsZWQgdHJ1ZSBmb3IgOmRpc2FibGVkOyBmYWxzZSBmb3IgOmVuYWJsZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIGRpc2FibGVkICkge1xuXHQvLyBLbm93biA6ZGlzYWJsZWQgZmFsc2UgcG9zaXRpdmVzOlxuXHQvLyBJRTogKltkaXNhYmxlZF06bm90KGJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIG9wdGdyb3VwLCBvcHRpb24sIG1lbnVpdGVtLCBmaWVsZHNldClcblx0Ly8gbm90IElFOiBmaWVsZHNldFtkaXNhYmxlZF0gPiBsZWdlbmQ6bnRoLW9mLXR5cGUobisyKSA6Y2FuLWRpc2FibGVcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gQ2hlY2sgZm9ybSBlbGVtZW50cyBhbmQgb3B0aW9uIGVsZW1lbnRzIGZvciBleHBsaWNpdCBkaXNhYmxpbmdcblx0XHRyZXR1cm4gXCJsYWJlbFwiIGluIGVsZW0gJiYgZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblx0XHRcdFwiZm9ybVwiIGluIGVsZW0gJiYgZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblxuXHRcdFx0Ly8gQ2hlY2sgbm9uLWRpc2FibGVkIGZvcm0gZWxlbWVudHMgZm9yIGZpZWxkc2V0W2Rpc2FibGVkXSBhbmNlc3RvcnNcblx0XHRcdFwiZm9ybVwiIGluIGVsZW0gJiYgZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2UgJiYgKFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTYtMTErXG5cdFx0XHRcdC8vIEFuY2VzdHJ5IGlzIGNvdmVyZWQgZm9yIHVzXG5cdFx0XHRcdGVsZW0uaXNEaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UsIGFzc3VtZSBhbnkgbm9uLTxvcHRpb24+IHVuZGVyIGZpZWxkc2V0W2Rpc2FibGVkXSBpcyBkaXNhYmxlZFxuXHRcdFx0XHQvKiBqc2hpbnQgLVcwMTggKi9cblx0XHRcdFx0ZWxlbS5pc0Rpc2FibGVkICE9PSAhZGlzYWJsZWQgJiZcblx0XHRcdFx0XHQoXCJsYWJlbFwiIGluIGVsZW0gfHwgIWRpc2FibGVkQW5jZXN0b3IoIGVsZW0gKSkgIT09IGRpc2FibGVkXG5cdFx0XHQpO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkge1xuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHtcblx0XHRhcmd1bWVudCA9ICthcmd1bWVudDtcblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0dmFyIGosXG5cdFx0XHRcdG1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksXG5cdFx0XHRcdGkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoO1xuXG5cdFx0XHQvLyBNYXRjaCBlbGVtZW50cyBmb3VuZCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4ZXNcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoIHNlZWRbIChqID0gbWF0Y2hJbmRleGVzW2ldKSBdICkge1xuXHRcdFx0XHRcdHNlZWRbal0gPSAhKG1hdGNoZXNbal0gPSBzZWVkW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dFxuICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkge1xuXHRyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb250ZXh0O1xufVxuXG4vLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZVxuc3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307XG5cbi8qKlxuICogRGV0ZWN0cyBYTUwgbm9kZXNcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlXG4gKi9cbmlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIGRvY3VtZW50RWxlbWVudCBpcyB2ZXJpZmllZCBmb3IgY2FzZXMgd2hlcmUgaXQgZG9lc24ndCB5ZXQgZXhpc3Rcblx0Ly8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpXG5cdHZhciBkb2N1bWVudEVsZW1lbnQgPSBlbGVtICYmIChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSkuZG9jdW1lbnRFbGVtZW50O1xuXHRyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSBcIkhUTUxcIiA6IGZhbHNlO1xufTtcblxuLyoqXG4gKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IFtkb2NdIEFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgb2JqZWN0IHRvIHVzZSB0byBzZXQgdGhlIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKi9cbnNldERvY3VtZW50ID0gU2l6emxlLnNldERvY3VtZW50ID0gZnVuY3Rpb24oIG5vZGUgKSB7XG5cdHZhciBoYXNDb21wYXJlLCBzdWJXaW5kb3csXG5cdFx0ZG9jID0gbm9kZSA/IG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlIDogcHJlZmVycmVkRG9jO1xuXG5cdC8vIFJldHVybiBlYXJseSBpZiBkb2MgaXMgaW52YWxpZCBvciBhbHJlYWR5IHNlbGVjdGVkXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gVXBkYXRlIGdsb2JhbCB2YXJpYWJsZXNcblx0ZG9jdW1lbnQgPSBkb2M7XG5cdGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdGRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2N1bWVudCApO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2Vcblx0Ly8gQWNjZXNzaW5nIGlmcmFtZSBkb2N1bWVudHMgYWZ0ZXIgdW5sb2FkIHRocm93cyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KVxuXHRpZiAoIHByZWZlcnJlZERvYyAhPT0gZG9jdW1lbnQgJiZcblx0XHQoc3ViV2luZG93ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHN1YldpbmRvdy50b3AgIT09IHN1YldpbmRvdyApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDExLCBFZGdlXG5cdFx0aWYgKCBzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdHN1YldpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcInVubG9hZFwiLCB1bmxvYWRIYW5kbGVyLCBmYWxzZSApO1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDEwIG9ubHlcblx0XHR9IGVsc2UgaWYgKCBzdWJXaW5kb3cuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRzdWJXaW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIEF0dHJpYnV0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFN1cHBvcnQ6IElFPDhcblx0Ly8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzXG5cdC8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuXHRzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmNsYXNzTmFtZSA9IFwiaVwiO1xuXHRcdHJldHVybiAhZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpO1xuXHR9KTtcblxuXHQvKiBnZXRFbGVtZW50KHMpQnkqXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzXG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpICk7XG5cdFx0cmV0dXJuICFlbC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDEwXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZVxuXHQvLyBUaGUgYnJva2VuIGdldEVsZW1lbnRCeUlkIG1ldGhvZHMgZG9uJ3QgcGljayB1cCBwcm9ncmFtbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pZCA9IGV4cGFuZG87XG5cdFx0cmV0dXJuICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7XG5cdH0pO1xuXG5cdC8vIElEIGZpbmQgYW5kIGZpbHRlclxuXHRpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHtcblx0XHRFeHByLmZpbmRbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdHZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblx0XHRcdFx0cmV0dXJuIG0gPyBbIG0gXSA6IFtdO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdC8vIFN1cHBvcnQ6IElFNi83XG5cdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgaXMgbm90IHJlbGlhYmxlIGFzIGEgZmluZCBzaG9ydGN1dFxuXHRcdGRlbGV0ZSBFeHByLmZpbmRbXCJJRFwiXTtcblxuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSAgZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuXHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH1cblxuXHQvLyBUYWdcblx0RXhwci5maW5kW1wiVEFHXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/XG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRG9jdW1lbnRGcmFnbWVudCBub2RlcyBkb24ndCBoYXZlIGdFQlROXG5cdFx0XHR9IGVsc2UgaWYgKCBzdXBwb3J0LnFzYSApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdHRtcCA9IFtdLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0Ly8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvb1xuXHRcdFx0XHRyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIEZpbHRlciBvdXQgcG9zc2libGUgY29tbWVudHNcblx0XHRcdGlmICggdGFnID09PSBcIipcIiApIHtcblx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRcdFx0dG1wLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdG1wO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fTtcblxuXHQvLyBDbGFzc1xuXHRFeHByLmZpbmRbXCJDTEFTU1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkge1xuXHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcblx0cmJ1Z2d5UVNBID0gW107XG5cblx0aWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHQvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG5cdFx0XHQvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHlcblx0XHRcdC8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLFxuXHRcdFx0Ly8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcblx0XHRcdC8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pbm5lckhUTUwgPSBcIjxhIGlkPSdcIiArIGV4cGFuZG8gKyBcIic+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGlkPSdcIiArIGV4cGFuZG8gKyBcIi1cXHJcXFxcJyBtc2FsbG93Y2FwdHVyZT0nJz5cIiArXG5cdFx0XHRcdFwiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIjtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4LCBPcGVyYSAxMS0xMi4xNlxuXHRcdFx0Ly8gTm90aGluZyBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiBlbXB0eSBzdHJpbmdzIGZvbGxvdyBePSBvciAkPSBvciAqPVxuXHRcdFx0Ly8gVGhlIHRlc3QgYXR0cmlidXRlIG11c3QgYmUgdW5rbm93biBpbiBPcGVyYSBidXQgXCJzYWZlXCIgZm9yIFdpblJUXG5cdFx0XHQvLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiWypeJF09XCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86Jyd8XFxcIlxcXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kIFwidmFsdWVcIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5XG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86dmFsdWV8XCIgKyBib29sZWFucyArIFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjQsIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS44K1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCggXCJbaWR+PVwiICsgZXhwYW5kbyArIFwiLV1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCJ+PVwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCI6Y2hlY2tlZFwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDgrLCBpT1MgOCtcblx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzY4NTFcblx0XHRcdC8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmxpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHNcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiYSNcIiArIGV4cGFuZG8gKyBcIisqXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiLiMuK1srfl1cIik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0ZWwuaW5uZXJIVE1MID0gXCI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwc1xuXHRcdFx0Ly8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50XG5cdFx0XHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRlbC5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcIkRcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEVuZm9yY2UgY2FzZS1zZW5zaXRpdml0eSBvZiBuYW1lIGF0dHJpYnV0ZVxuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHRcdC8vIElFJ3MgOmRpc2FibGVkIHNlbGVjdG9yIGRvZXMgbm90IHBpY2sgdXAgdGhlIGNoaWxkcmVuIG9mIGRpc2FibGVkIGZpZWxkc2V0c1xuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZGlzYWJsZWRcIikubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zXG5cdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKTtcblx0XHRcdHJidWdneVFTQS5wdXNoKFwiLC4qOlwiKTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fFxuXHRcdGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBlbCwgXCIqXCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBlbCwgXCJbcyE9JyddOnhcIiApO1xuXHRcdFx0cmJ1Z2d5TWF0Y2hlcy5wdXNoKCBcIiE9XCIsIHBzZXVkb3MgKTtcblx0XHR9KTtcblx0fVxuXG5cdHJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oXCJ8XCIpICk7XG5cdHJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oXCJ8XCIpICk7XG5cblx0LyogQ29udGFpbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRoYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7XG5cblx0Ly8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG5cdC8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZVxuXHQvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuXHRjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0dmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcblx0XHRcdFx0YnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG5cdFx0XHRyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0YWRvd24uY29udGFpbnMgP1xuXHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG5cdFx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG5cdFx0XHQpKTtcblx0XHR9IDpcblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdGlmICggYiApIHtcblx0XHRcdFx0d2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBiID09PSBhICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHQvKiBTb3J0aW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG5cdHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuXHRmdW5jdGlvbiggYSwgYiApIHtcblxuXHRcdC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cblx0XHR2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247XG5cdFx0aWYgKCBjb21wYXJlICkge1xuXHRcdFx0cmV0dXJuIGNvbXBhcmU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuXHRcdGNvbXBhcmUgPSAoIGEub3duZXJEb2N1bWVudCB8fCBhICkgPT09ICggYi5vd25lckRvY3VtZW50IHx8IGIgKSA/XG5cdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWRcblx0XHRcdDE7XG5cblx0XHQvLyBEaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRpZiAoIGNvbXBhcmUgJiAxIHx8XG5cdFx0XHQoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cblx0XHRcdC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuXHRcdFx0aWYgKCBhID09PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlclxuXHRcdFx0cmV0dXJuIHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7XG5cdH0gOlxuXHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHQvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF1cCA9IGEucGFyZW50Tm9kZSxcblx0XHRcdGJ1cCA9IGIucGFyZW50Tm9kZSxcblx0XHRcdGFwID0gWyBhIF0sXG5cdFx0XHRicCA9IFsgYiBdO1xuXG5cdFx0Ly8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcblx0XHRpZiAoICFhdXAgfHwgIWJ1cCApIHtcblx0XHRcdHJldHVybiBhID09PSBkb2N1bWVudCA/IC0xIDpcblx0XHRcdFx0YiA9PT0gZG9jdW1lbnQgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2N1bWVudDtcbn07XG5cblNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkge1xuXHRyZXR1cm4gU2l6emxlKCBleHByLCBudWxsLCBudWxsLCBlbGVtZW50cyApO1xufTtcblxuU2l6emxlLm1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKCBlbGVtLCBleHByICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHQvLyBNYWtlIHN1cmUgdGhhdCBhdHRyaWJ1dGUgc2VsZWN0b3JzIGFyZSBxdW90ZWRcblx0ZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgXCI9JyQxJ11cIiApO1xuXG5cdGlmICggc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHQhY29tcGlsZXJDYWNoZVsgZXhwciArIFwiIFwiIF0gJiZcblx0XHQoICFyYnVnZ3lNYXRjaGVzIHx8ICFyYnVnZ3lNYXRjaGVzLnRlc3QoIGV4cHIgKSApICYmXG5cdFx0KCAhcmJ1Z2d5UVNBICAgICB8fCAhcmJ1Z2d5UVNBLnRlc3QoIGV4cHIgKSApICkge1xuXG5cdFx0dHJ5IHtcblx0XHRcdHZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTtcblxuXHRcdFx0Ly8gSUUgOSdzIG1hdGNoZXNTZWxlY3RvciByZXR1cm5zIGZhbHNlIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdFx0aWYgKCByZXQgfHwgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCB8fFxuXHRcdFx0XHRcdC8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50XG5cdFx0XHRcdFx0Ly8gZnJhZ21lbnQgaW4gSUUgOVxuXHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQgJiYgZWxlbS5kb2N1bWVudC5ub2RlVHlwZSAhPT0gMTEgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge31cblx0fVxuXG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7XG59O1xuXG5TaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHR9XG5cdHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xufTtcblxuU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0dmFyIGZuID0gRXhwci5hdHRySGFuZGxlWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSxcblx0XHQvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcblx0XHR2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuXHRcdFx0dW5kZWZpbmVkO1xuXG5cdHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG5cdFx0dmFsIDpcblx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cblx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuXHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG59O1xuXG5TaXp6bGUuZXNjYXBlID0gZnVuY3Rpb24oIHNlbCApIHtcblx0cmV0dXJuIChzZWwgKyBcIlwiKS5yZXBsYWNlKCByY3NzZXNjYXBlLCBmY3NzZXNjYXBlICk7XG59O1xuXG5TaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuXHR0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcbn07XG5cbi8qKlxuICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlc1xuICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAqL1xuU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHtcblx0dmFyIGVsZW0sXG5cdFx0ZHVwbGljYXRlcyA9IFtdLFxuXHRcdGogPSAwLFxuXHRcdGkgPSAwO1xuXG5cdC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2Vcblx0aGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcblx0c29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG5cdHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cblx0aWYgKCBoYXNEdXBsaWNhdGUgKSB7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcblx0XHRcdFx0aiA9IGR1cGxpY2F0ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdHJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0c1xuXHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjVcblx0c29ydElucHV0ID0gbnVsbDtcblxuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXNcbiAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuICovXG5nZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0dmFyIG5vZGUsXG5cdFx0cmV0ID0gXCJcIixcblx0XHRpID0gMCxcblx0XHRub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0aWYgKCAhbm9kZVR5cGUgKSB7XG5cdFx0Ly8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcblx0XHR3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHtcblx0XHRcdC8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzXG5cdFx0XHRyZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkge1xuXHRcdC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcblx0XHQvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuXHRcdGlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0cmV0ICs9IGdldFRleHQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVWYWx1ZTtcblx0fVxuXHQvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblxuXHRyZXR1cm4gcmV0O1xufTtcblxuRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cblx0Ly8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyXG5cdGNhY2hlTGVuZ3RoOiA1MCxcblxuXHRjcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbixcblxuXHRtYXRjaDogbWF0Y2hFeHByLFxuXG5cdGF0dHJIYW5kbGU6IHt9LFxuXG5cdGZpbmQ6IHt9LFxuXG5cdHJlbGF0aXZlOiB7XG5cdFx0XCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG5cdFx0XCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9XG5cdH0sXG5cblx0cHJlRmlsdGVyOiB7XG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0Ly8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWRcblx0XHRcdG1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuXHRcdFx0XHRtYXRjaFszXSA9IFwiIFwiICsgbWF0Y2hbM10gKyBcIiBcIjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0LyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwcltcIkNISUxEXCJdXG5cdFx0XHRcdDEgdHlwZSAob25seXxudGh8Li4uKVxuXHRcdFx0XHQyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdDMgYXJndW1lbnQgKGV2ZW58b2RkfFxcZCp8XFxkKm4oWystXVxcZCspP3wuLi4pXG5cdFx0XHRcdDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuXHRcdFx0XHQ1IHNpZ24gb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDYgeCBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NyBzaWduIG9mIHktY29tcG9uZW50XG5cdFx0XHRcdDggeSBvZiB5LWNvbXBvbmVudFxuXHRcdFx0Ki9cblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSBcIm50aFwiICkge1xuXHRcdFx0XHQvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudFxuXHRcdFx0XHRpZiAoICFtYXRjaFszXSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTERcblx0XHRcdFx0Ly8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuXHRcdFx0XHRtYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKSApO1xuXHRcdFx0XHRtYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICk7XG5cblx0XHRcdC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHR2YXIgZXhjZXNzLFxuXHRcdFx0XHR1bnF1b3RlZCA9ICFtYXRjaFs2XSAmJiBtYXRjaFsyXTtcblxuXHRcdFx0aWYgKCBtYXRjaEV4cHJbXCJDSElMRFwiXS50ZXN0KCBtYXRjaFswXSApICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXNcblx0XHRcdGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdG1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIjtcblxuXHRcdFx0Ly8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuXHRcdFx0XHQvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KVxuXHRcdFx0XHQoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmXG5cdFx0XHRcdC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHQoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggXCIpXCIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHtcblxuXHRcdFx0XHQvLyBleGNlc3MgaXMgYSBuZWdhdGl2ZSBpbmRleFxuXHRcdFx0XHRtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdFx0bWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KVxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7XG5cdFx0fVxuXHR9LFxuXG5cdGZpbHRlcjoge1xuXG5cdFx0XCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSBcIipcIiA/XG5cdFx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcblx0XHRcdHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuXHRcdFx0cmV0dXJuIHBhdHRlcm4gfHxcblx0XHRcdFx0KHBhdHRlcm4gPSBuZXcgUmVnRXhwKCBcIihefFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApKSAmJlxuXHRcdFx0XHRjbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiICk7XG5cdFx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRcIkFUVFJcIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHJlc3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHRcdFx0aWYgKCByZXN1bHQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiIT1cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFvcGVyYXRvciApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdCArPSBcIlwiO1xuXG5cdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCI9XCIgPyByZXN1bHQgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIhPVwiID8gcmVzdWx0ICE9PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiXj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIqPVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiJD1cIiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifj1cIiA/ICggXCIgXCIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsIFwiIFwiICkgKyBcIiBcIiApLmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifD1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgXCItXCIgOlxuXHRcdFx0XHRcdGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkge1xuXHRcdFx0dmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gXCJudGhcIixcblx0XHRcdFx0Zm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuXHRcdFx0XHRvZlR5cGUgPSB3aGF0ID09PSBcIm9mLXR5cGVcIjtcblxuXHRcdFx0cmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXG5cdFx0XHRcdC8vIFNob3J0Y3V0IGZvciA6bnRoLSoobilcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHR9IDpcblxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBjYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZSxcblx0XHRcdFx0XHRcdGRpZmYgPSBmYWxzZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKVxuXHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gXCJvbmx5XCIgJiYgIXN0YXJ0ICYmIFwibmV4dFNpYmxpbmdcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTtcblxuXHRcdFx0XHRcdFx0Ly8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGBcblx0XHRcdFx0XHRcdGlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTZWVrIGBlbGVtYCBmcm9tIGEgcHJldmlvdXNseS1jYWNoZWQgaW5kZXhcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXggJiYgY2FjaGVbIDIgXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXg7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyB4bWwgOm50aC1jaGlsZCguLi4pXG5cdFx0XHRcdFx0XHRcdC8vIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcblx0XHRcdFx0XHRcdFx0aWYgKCBkaWZmID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNhbWUgbG9vcCBhcyBhYm92ZSB0byBzZWVrIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQrK2RpZmYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuXHRcdFx0XHRcdFx0ZGlmZiAtPSBsYXN0O1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHtcblx0XHRcdC8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZVxuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuXHRcdFx0Ly8gUHJpb3JpdGl6ZSBieSBjYXNlIHNlbnNpdGl2aXR5IGluIGNhc2UgY3VzdG9tIHBzZXVkb3MgYXJlIGFkZGVkIHdpdGggdXBwZXJjYXNlIGxldHRlcnNcblx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3Ncblx0XHRcdHZhciBhcmdzLFxuXHRcdFx0XHRmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIgKyBwc2V1ZG8gKTtcblxuXHRcdFx0Ly8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdFxuXHRcdFx0Ly8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb25cblx0XHRcdC8vIGp1c3QgYXMgU2l6emxlIGRvZXNcblx0XHRcdGlmICggZm5bIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0cmV0dXJuIGZuKCBhcmd1bWVudCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXNcblx0XHRcdGlmICggZm4ubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0YXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sIFwiXCIsIGFyZ3VtZW50IF07XG5cdFx0XHRcdHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0XHRcdHZhciBpZHgsXG5cdFx0XHRcdFx0XHRcdG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRcdFx0aSA9IG1hdGNoZWQubGVuZ3RoO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdFx0c2VlZFsgaWR4IF0gPSAhKCBtYXRjaGVzWyBpZHggXSA9IG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZm4oIGVsZW0sIDAsIGFyZ3MgKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZm47XG5cdFx0fVxuXHR9LFxuXG5cdHBzZXVkb3M6IHtcblx0XHQvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3Ncblx0XHRcIm5vdFwiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0Ly8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGVcblx0XHRcdC8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nXG5cdFx0XHQvLyBzcGFjZXMgYXMgY29tYmluYXRvcnNcblx0XHRcdHZhciBpbnB1dCA9IFtdLFxuXHRcdFx0XHRyZXN1bHRzID0gW10sXG5cdFx0XHRcdG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/XG5cdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdFx0dW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLFxuXHRcdFx0XHRcdFx0aSA9IHNlZWQubGVuZ3RoO1xuXG5cdFx0XHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYFxuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdHNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pIDpcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRpbnB1dFswXSA9IGVsZW07XG5cdFx0XHRcdFx0bWF0Y2hlciggaW5wdXQsIG51bGwsIHhtbCwgcmVzdWx0cyApO1xuXHRcdFx0XHRcdC8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBudWxsO1xuXHRcdFx0XHRcdHJldHVybiAhcmVzdWx0cy5wb3AoKTtcblx0XHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiaGFzXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBTaXp6bGUoIHNlbGVjdG9yLCBlbGVtICkubGVuZ3RoID4gMDtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImNvbnRhaW5zXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gXCJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yXG5cdFx0Ly8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWVcblx0XHQvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLFxuXHRcdC8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCItXCIuXG5cdFx0Ly8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuXG5cdFx0Ly8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS5cIlxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG9cblx0XHRcImxhbmdcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHtcblx0XHRcdC8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcblx0XHRcdGlmICggIXJpZGVudGlmaWVyLnRlc3QobGFuZyB8fCBcIlwiKSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgbGFuZyApO1xuXHRcdFx0fVxuXHRcdFx0bGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgZWxlbUxhbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID9cblx0XHRcdFx0XHRcdGVsZW0ubGFuZyA6XG5cdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgKSB7XG5cblx0XHRcdFx0XHRcdGVsZW1MYW5nID0gZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgXCItXCIgKSA9PT0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gTWlzY2VsbGFuZW91c1xuXHRcdFwidGFyZ2V0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7XG5cdFx0fSxcblxuXHRcdFwicm9vdFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2NFbGVtO1xuXHRcdH0sXG5cblx0XHRcImZvY3VzXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTtcblx0XHR9LFxuXG5cdFx0Ly8gQm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XCJlbmFibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCBmYWxzZSApLFxuXHRcdFwiZGlzYWJsZWRcIjogY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIHRydWUgKSxcblxuXHRcdFwiY2hlY2tlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEluIENTUzMsIDpjaGVja2VkIHNob3VsZCByZXR1cm4gYm90aCBjaGVja2VkIGFuZCBzZWxlY3RlZCBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdHZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiAobm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiAhIWVsZW0uY2hlY2tlZCkgfHwgKG5vZGVOYW1lID09PSBcIm9wdGlvblwiICYmICEhZWxlbS5zZWxlY3RlZCk7XG5cdFx0fSxcblxuXHRcdFwic2VsZWN0ZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHQvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5XG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuXHRcdH0sXG5cblx0XHQvLyBDb250ZW50c1xuXHRcdFwiZW1wdHlcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkb1xuXHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0Ly8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLilcblx0XHRcdC8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdFwicGFyZW50XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbXCJlbXB0eVwiXSggZWxlbSApO1xuXHRcdH0sXG5cblx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XCJoZWFkZXJcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmhlYWRlci50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiaW5wdXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gXCJidXR0b25cIiB8fCBuYW1lID09PSBcImJ1dHRvblwiO1xuXHRcdH0sXG5cblx0XHRcInRleHRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgYXR0cjtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiAmJlxuXHRcdFx0XHRlbGVtLnR5cGUgPT09IFwidGV4dFwiICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU8OFxuXHRcdFx0XHQvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgXCJzZWFyY2hcIikgYXBwZWFyIHdpdGggZWxlbS50eXBlID09PSBcInRleHRcIlxuXHRcdFx0XHQoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHR9LFxuXG5cdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFwiZmlyc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbIDAgXTtcblx0XHR9KSxcblxuXHRcdFwibGFzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHR9KSxcblxuXHRcdFwiZXFcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0cmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJldmVuXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDE7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImx0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgLS1pID49IDA7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwiZ3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KVxuXHR9XG59O1xuXG5FeHByLnBzZXVkb3NbXCJudGhcIl0gPSBFeHByLnBzZXVkb3NbXCJlcVwiXTtcblxuLy8gQWRkIGJ1dHRvbi9pbnB1dCB0eXBlIHBzZXVkb3NcbmZvciAoIGkgaW4geyByYWRpbzogdHJ1ZSwgY2hlY2tib3g6IHRydWUsIGZpbGU6IHRydWUsIHBhc3N3b3JkOiB0cnVlLCBpbWFnZTogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7XG59XG5mb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApO1xufVxuXG4vLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcbmZ1bmN0aW9uIHNldEZpbHRlcnMoKSB7fVxuc2V0RmlsdGVycy5wcm90b3R5cGUgPSBFeHByLmZpbHRlcnMgPSBFeHByLnBzZXVkb3M7XG5FeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXG50b2tlbml6ZSA9IFNpenpsZS50b2tlbml6ZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgcGFyc2VPbmx5ICkge1xuXHR2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSxcblx0XHRzb0ZhciwgZ3JvdXBzLCBwcmVGaWx0ZXJzLFxuXHRcdGNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoIGNhY2hlZCApIHtcblx0XHRyZXR1cm4gcGFyc2VPbmx5ID8gMCA6IGNhY2hlZC5zbGljZSggMCApO1xuXHR9XG5cblx0c29GYXIgPSBzZWxlY3Rvcjtcblx0Z3JvdXBzID0gW107XG5cdHByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjtcblxuXHR3aGlsZSAoIHNvRmFyICkge1xuXG5cdFx0Ly8gQ29tbWEgYW5kIGZpcnN0IHJ1blxuXHRcdGlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0aWYgKCBtYXRjaCApIHtcblx0XHRcdFx0Ly8gRG9uJ3QgY29uc3VtZSB0cmFpbGluZyBjb21tYXMgYXMgdmFsaWRcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7XG5cdFx0XHR9XG5cdFx0XHRncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApO1xuXHRcdH1cblxuXHRcdG1hdGNoZWQgPSBmYWxzZTtcblxuXHRcdC8vIENvbWJpbmF0b3JzXG5cdFx0aWYgKCAobWF0Y2ggPSByY29tYmluYXRvcnMuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHR0eXBlOiBtYXRjaFswXS5yZXBsYWNlKCBydHJpbSwgXCIgXCIgKVxuXHRcdFx0fSk7XG5cdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZpbHRlcnNcblx0XHRmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkge1xuXHRcdFx0aWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fFxuXHRcdFx0XHQobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcblx0XHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRcdG1hdGNoZXM6IG1hdGNoXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggIW1hdGNoZWQgKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgaW52YWxpZCBleGNlc3Ncblx0Ly8gaWYgd2UncmUganVzdCBwYXJzaW5nXG5cdC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuXHRyZXR1cm4gcGFyc2VPbmx5ID9cblx0XHRzb0Zhci5sZW5ndGggOlxuXHRcdHNvRmFyID9cblx0XHRcdFNpenpsZS5lcnJvciggc2VsZWN0b3IgKSA6XG5cdFx0XHQvLyBDYWNoZSB0aGUgdG9rZW5zXG5cdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcbn07XG5cbmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7XG5cdH1cblx0cmV0dXJuIHNlbGVjdG9yO1xufVxuXG5mdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkge1xuXHR2YXIgZGlyID0gY29tYmluYXRvci5kaXIsXG5cdFx0c2tpcCA9IGNvbWJpbmF0b3IubmV4dCxcblx0XHRrZXkgPSBza2lwIHx8IGRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBrZXkgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSxcblx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cblx0XHRcdC8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGNvbWJpbmF0b3IgY2FjaGluZ1xuXHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHwgKG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0aWYgKCBza2lwICYmIHNraXAgPT09IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0ZWxlbSA9IGVsZW1bIGRpciBdIHx8IGVsZW07XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCAob2xkQ2FjaGUgPSB1bmlxdWVDYWNoZVsga2V5IF0pICYmXG5cdFx0XHRcdFx0XHRcdG9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQXNzaWduIHRvIG5ld0NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXVzZSBuZXdjYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyBrZXkgXSA9IG5ld0NhY2hlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZ1xuXHRcdFx0XHRcdFx0XHRpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkge1xuXHRyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBpID0gbWF0Y2hlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gOlxuXHRcdG1hdGNoZXJzWzBdO1xufVxuXG5mdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG5cdHZhciBlbGVtLFxuXHRcdG5ld1VubWF0Y2hlZCA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsXG5cdFx0bWFwcGVkID0gbWFwICE9IG51bGw7XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0bmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0aWYgKCBtYXBwZWQgKSB7XG5cdFx0XHRcdFx0bWFwLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuZXdVbm1hdGNoZWQ7XG59XG5cbmZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcblx0aWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTtcblx0fVxuXHRpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG5cdH1cblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuXHRcdHZhciB0ZW1wLCBpLCBlbGVtLFxuXHRcdFx0cHJlTWFwID0gW10sXG5cdFx0XHRwb3N0TWFwID0gW10sXG5cdFx0XHRwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuXHRcdFx0ZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8IFwiKlwiLCBjb250ZXh0Lm5vZGVUeXBlID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LCBbXSApLFxuXG5cdFx0XHQvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cblx0XHRcdG1hdGNoZXJJbiA9IHByZUZpbHRlciAmJiAoIHNlZWQgfHwgIXNlbGVjdG9yICkgP1xuXHRcdFx0XHRjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdGVsZW1zLFxuXG5cdFx0XHRtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG5cdFx0XHRcdHBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID9cblxuXHRcdFx0XHRcdC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFtdIDpcblxuXHRcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuXHRcdFx0XHRcdHJlc3VsdHMgOlxuXHRcdFx0XHRtYXRjaGVySW47XG5cblx0XHQvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuXHRcdGlmICggbWF0Y2hlciApIHtcblx0XHRcdG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcG9zdEZpbHRlclxuXHRcdGlmICggcG9zdEZpbHRlciApIHtcblx0XHRcdHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuXHRcdFx0cG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG5cdFx0XHQvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG5cdFx0XHRpID0gdGVtcC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAoZWxlbSA9IHRlbXBbaV0pICkge1xuXHRcdFx0XHRcdG1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggc2VlZCApIHtcblx0XHRcdGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG5cdFx0XHRcdGlmICggcG9zdEZpbmRlciApIHtcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcblx0XHRcdFx0XHR0ZW1wID0gW107XG5cdFx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaFxuXHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuXHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJlxuXHRcdFx0XHRcdFx0KHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkge1xuXG5cdFx0XHRcdFx0XHRzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWRcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlck91dCA9IGNvbmRlbnNlKFxuXHRcdFx0XHRtYXRjaGVyT3V0ID09PSByZXN1bHRzID9cblx0XHRcdFx0XHRtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuXHRcdFx0XHRcdG1hdGNoZXJPdXRcblx0XHRcdCk7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG5cdHZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMF0udHlwZSBdLFxuXHRcdGltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVtcIiBcIl0sXG5cdFx0aSA9IGxlYWRpbmdSZWxhdGl2ZSA/IDEgOiAwLFxuXG5cdFx0Ly8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocylcblx0XHRtYXRjaENvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoQW55Q29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIHJldCA9ICggIWxlYWRpbmdSZWxhdGl2ZSAmJiAoIHhtbCB8fCBjb250ZXh0ICE9PSBvdXRlcm1vc3RDb250ZXh0ICkgKSB8fCAoXG5cdFx0XHRcdChjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/XG5cdFx0XHRcdFx0bWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdFx0bWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuXHRcdFx0Ly8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRjaGVja0NvbnRleHQgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9IF07XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuXHRcdFx0bWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcblx0XHRcdGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHQvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcblx0XHRcdFx0aiA9ICsraTtcblx0XHRcdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXRNYXRjaGVyKFxuXHRcdFx0XHRcdGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuXHRcdFx0XHRcdGkgPiAxICYmIHRvU2VsZWN0b3IoXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYFxuXHRcdFx0XHRcdFx0dG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gXCIgXCIgPyBcIipcIiA6IFwiXCIgfSlcblx0XHRcdFx0XHQpLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSxcblx0XHRcdFx0XHRtYXRjaGVyLFxuXHRcdFx0XHRcdGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG5cdHZhciBieVNldCA9IHNldE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0YnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0c3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkge1xuXHRcdFx0dmFyIGVsZW0sIGosIG1hdGNoZXIsXG5cdFx0XHRcdG1hdGNoZWRDb3VudCA9IDAsXG5cdFx0XHRcdGkgPSBcIjBcIixcblx0XHRcdFx0dW5tYXRjaGVkID0gc2VlZCAmJiBbXSxcblx0XHRcdFx0c2V0TWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHRjb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCxcblx0XHRcdFx0Ly8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dFxuXHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFtcIlRBR1wiXSggXCIqXCIsIG91dGVybW9zdCApLFxuXHRcdFx0XHQvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlclxuXHRcdFx0XHRkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSxcblx0XHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT09IGRvY3VtZW50IHx8IGNvbnRleHQgfHwgb3V0ZXJtb3N0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gU3VwcG9ydDogSUU8OSwgU2FmYXJpXG5cdFx0XHQvLyBUb2xlcmF0ZSBOb2RlTGlzdCBwcm9wZXJ0aWVzIChJRTogXCJsZW5ndGhcIjsgU2FmYXJpOiA8bnVtYmVyPikgbWF0Y2hpbmcgZWxlbWVudHMgYnkgaWRcblx0XHRcdGZvciAoIDsgaSAhPT0gbGVuICYmIChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHRpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdFx0XHRcdFx0eG1sID0gIWRvY3VtZW50SXNIVE1MO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0IHx8IGRvY3VtZW50LCB4bWwpICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gYGlgIGlzIG5vdyB0aGUgY291bnQgb2YgZWxlbWVudHMgdmlzaXRlZCBhYm92ZSwgYW5kIGFkZGluZyBpdCB0byBgbWF0Y2hlZENvdW50YFxuXHRcdFx0Ly8gbWFrZXMgdGhlIGxhdHRlciBub25uZWdhdGl2ZS5cblx0XHRcdG1hdGNoZWRDb3VudCArPSBpO1xuXG5cdFx0XHQvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcblx0XHRcdC8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZVxuXHRcdFx0Ly8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC5cblx0XHRcdC8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nIFwiMFwiIGBpYCBhbGxvd3MgYGlgIHRvIHJlbWFpbiBhIHN0cmluZyBvbmx5IGluIHRoYXRcblx0XHRcdC8vIGNhc2UsIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgXCIwMFwiIGBtYXRjaGVkQ291bnRgIHRoYXQgZGlmZmVycyBmcm9tIGBpYCBidXQgaXMgYWxzb1xuXHRcdFx0Ly8gbnVtZXJpY2FsbHkgemVyby5cblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBzZWxlY3RvciBpbiB0aGUgbGlzdCBhbmQgbm8gc2VlZFxuXHQvLyAodGhlIGxhdHRlciBvZiB3aGljaCBndWFyYW50ZWVzIHVzIGNvbnRleHQpXG5cdGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXG5cdFx0Ly8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSURcblx0XHR0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7XG5cdFx0aWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09IFwiSURcIiAmJlxuXHRcdFx0XHRzdXBwb3J0LmdldEJ5SWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdFx0XHRFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXG5cdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG5cdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0fSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG5cdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRva2VuID0gdG9rZW5zW2ldO1xuXG5cdFx0XHQvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yXG5cdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuXHRcdFx0XHQvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcblx0XHRcdFx0aWYgKCAoc2VlZCA9IGZpbmQoXG5cdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuXHRcdFx0XHRcdHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHRcdFx0KSkgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHR0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0KCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuXHRcdHNlZWQsXG5cdFx0Y29udGV4dCxcblx0XHQhZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmVzdWx0cyxcblx0XHQhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdCk7XG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1K1xuLy8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cbi8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuc2V0RG9jdW1lbnQoKTtcblxuLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcbi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGVsLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyMnPjwvYT5cIjtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIgO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdGVsLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSA9PSBudWxsO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgdmFsO1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdH1cblx0fSk7XG59XG5cbnJldHVybiBTaXp6bGU7XG5cbn0pKCB3aW5kb3cgKTtcblxuXG5cbmpRdWVyeS5maW5kID0gU2l6emxlO1xualF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xuXG4vLyBEZXByZWNhdGVkXG5qUXVlcnkuZXhwclsgXCI6XCIgXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5qUXVlcnkudW5pcXVlU29ydCA9IGpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDtcbmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7XG5qUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5qUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7XG5qUXVlcnkuZXNjYXBlU2VsZWN0b3IgPSBTaXp6bGUuZXNjYXBlO1xuXG5cblxuXG52YXIgZGlyID0gZnVuY3Rpb24oIGVsZW0sIGRpciwgdW50aWwgKSB7XG5cdHZhciBtYXRjaGVkID0gW10sXG5cdFx0dHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkO1xuXG5cdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkge1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXRjaGVkO1xufTtcblxuXG52YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHtcblx0dmFyIG1hdGNoZWQgPSBbXTtcblxuXHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuXHRcdFx0bWF0Y2hlZC5wdXNoKCBuICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG52YXIgcnNpbmdsZVRhZyA9ICggL148KFthLXpdW15cXC9cXDA+OlxceDIwXFx0XFxyXFxuXFxmXSopW1xceDIwXFx0XFxyXFxuXFxmXSpcXC8/Pig/OjxcXC9cXDE+fCkkL2kgKTtcblxuXG5cbnZhciByaXNTaW1wbGUgPSAvXi5bXjojXFxbXFwuLF0qJC87XG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG5mdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7XG5cdFx0fSApO1xuXG5cdH1cblxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSApO1xuXG5cdH1cblxuXHRpZiAoIHR5cGVvZiBxdWFsaWZpZXIgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0aWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7XG5cdFx0fVxuXG5cdFx0cXVhbGlmaWVyID0galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cyApO1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+IC0xICkgIT09IG5vdCAmJiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHR9ICk7XG59XG5cbmpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHtcblx0dmFyIGVsZW0gPSBlbGVtc1sgMCBdO1xuXG5cdGlmICggbm90ICkge1xuXHRcdGV4cHIgPSBcIjpub3QoXCIgKyBleHByICsgXCIpXCI7XG5cdH1cblxuXHRyZXR1cm4gZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgP1xuXHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXSA6XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlcyggZXhwciwgalF1ZXJ5LmdyZXAoIGVsZW1zLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHRcdH0gKSApO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRmaW5kOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGksIHJldCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0c2VsZiA9IHRoaXM7XG5cblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9ICkgKTtcblx0XHR9XG5cblx0XHRyZXQgPSB0aGlzLnB1c2hTdGFjayggW10gKTtcblxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRqUXVlcnkuZmluZCggc2VsZWN0b3IsIHNlbGZbIGkgXSwgcmV0ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGxlbiA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggcmV0ICkgOiByZXQ7XG5cdH0sXG5cdGZpbHRlcjogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UgKSApO1xuXHR9LFxuXHRub3Q6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIHRydWUgKSApO1xuXHR9LFxuXHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdHRoaXMsXG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cblx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRzZWxlY3RvciB8fCBbXSxcblx0XHRcdGZhbHNlXG5cdFx0KS5sZW5ndGg7XG5cdH1cbn0gKTtcblxuXG4vLyBJbml0aWFsaXplIGEgalF1ZXJ5IG9iamVjdFxuXG5cbi8vIEEgY2VudHJhbCByZWZlcmVuY2UgdG8gdGhlIHJvb3QgalF1ZXJ5KGRvY3VtZW50KVxudmFyIHJvb3RqUXVlcnksXG5cblx0Ly8gQSBzaW1wbGUgd2F5IHRvIGNoZWNrIGZvciBIVE1MIHN0cmluZ3Ncblx0Ly8gUHJpb3JpdGl6ZSAjaWQgb3ZlciA8dGFnPiB0byBhdm9pZCBYU1MgdmlhIGxvY2F0aW9uLmhhc2ggKCM5NTIxKVxuXHQvLyBTdHJpY3QgSFRNTCByZWNvZ25pdGlvbiAoIzExMjkwOiBtdXN0IHN0YXJ0IHdpdGggPClcblx0Ly8gU2hvcnRjdXQgc2ltcGxlICNpZCBjYXNlIGZvciBzcGVlZFxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKykpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByb290ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gTWV0aG9kIGluaXQoKSBhY2NlcHRzIGFuIGFsdGVybmF0ZSByb290alF1ZXJ5XG5cdFx0Ly8gc28gbWlncmF0ZSBjYW4gc3VwcG9ydCBqUXVlcnkuc3ViIChnaC0yMTAxKVxuXHRcdHJvb3QgPSByb290IHx8IHJvb3RqUXVlcnk7XG5cblx0XHQvLyBIYW5kbGUgSFRNTCBzdHJpbmdzXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRpZiAoIHNlbGVjdG9yWyAwIF0gPT09IFwiPFwiICYmXG5cdFx0XHRcdHNlbGVjdG9yWyBzZWxlY3Rvci5sZW5ndGggLSAxIF0gPT09IFwiPlwiICYmXG5cdFx0XHRcdHNlbGVjdG9yLmxlbmd0aCA+PSAzICkge1xuXG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAoIG1hdGNoWyAxIF0gfHwgIWNvbnRleHQgKSApIHtcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCkgLT4gJChhcnJheSlcblx0XHRcdFx0aWYgKCBtYXRjaFsgMSBdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFsgMCBdIDogY29udGV4dDtcblxuXHRcdFx0XHRcdC8vIE9wdGlvbiB0byBydW4gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdFxuXHRcdFx0XHRcdC8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLCBqUXVlcnkucGFyc2VIVE1MKFxuXHRcdFx0XHRcdFx0bWF0Y2hbIDEgXSxcblx0XHRcdFx0XHRcdGNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsXG5cdFx0XHRcdFx0XHR0cnVlXG5cdFx0XHRcdFx0KSApO1xuXG5cdFx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwsIHByb3BzKVxuXHRcdFx0XHRcdGlmICggcnNpbmdsZVRhZy50ZXN0KCBtYXRjaFsgMSBdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gUHJvcGVydGllcyBvZiBjb250ZXh0IGFyZSBjYWxsZWQgYXMgbWV0aG9kcyBpZiBwb3NzaWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbIDIgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuXHRcdFx0XHRcdFx0dGhpc1sgMCBdID0gZWxlbTtcblx0XHRcdFx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3QgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzWyAwIF0gPSBzZWxlY3Rvcjtcblx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0Ly8gSEFORExFOiAkKGZ1bmN0aW9uKVxuXHRcdC8vIFNob3J0Y3V0IGZvciBkb2N1bWVudCByZWFkeVxuXHRcdH0gZWxzZSBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBzZWxlY3RvciApICkge1xuXHRcdFx0cmV0dXJuIHJvb3QucmVhZHkgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHJvb3QucmVhZHkoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgaWYgcmVhZHkgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0c2VsZWN0b3IoIGpRdWVyeSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cblx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0Z3VhcmFudGVlZFVuaXF1ZSA9IHtcblx0XHRjaGlsZHJlbjogdHJ1ZSxcblx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRuZXh0OiB0cnVlLFxuXHRcdHByZXY6IHRydWVcblx0fTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0dmFyIHRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLFxuXHRcdFx0bCA9IHRhcmdldHMubGVuZ3RoO1xuXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGNsb3Nlc3Q6IGZ1bmN0aW9uKCBzZWxlY3RvcnMsIGNvbnRleHQgKSB7XG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0dGFyZ2V0cyA9IHR5cGVvZiBzZWxlY3RvcnMgIT09IFwic3RyaW5nXCIgJiYgalF1ZXJ5KCBzZWxlY3RvcnMgKTtcblxuXHRcdC8vIFBvc2l0aW9uYWwgc2VsZWN0b3JzIG5ldmVyIG1hdGNoLCBzaW5jZSB0aGVyZSdzIG5vIF9zZWxlY3Rpb25fIGNvbnRleHRcblx0XHRpZiAoICFybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmb3IgKCBjdXIgPSB0aGlzWyBpIF07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzXG5cdFx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHRhcmdldHMgP1xuXHRcdFx0XHRcdFx0dGFyZ2V0cy5pbmRleCggY3VyICkgPiAtMSA6XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdFx0Y3VyLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggY3VyLCBzZWxlY3RvcnMgKSApICkge1xuXG5cdFx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApIDogbWF0Y2hlZCApO1xuXHR9LFxuXG5cdC8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4gdGhlIHNldFxuXHRpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudFxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG5cdFx0fVxuXG5cdFx0Ly8gSW5kZXggaW4gc2VsZWN0b3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggalF1ZXJ5KCBlbGVtICksIHRoaXNbIDAgXSApO1xuXHRcdH1cblxuXHRcdC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuXHRcdHJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsXG5cblx0XHRcdC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuXHRcdFx0ZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtXG5cdFx0KTtcblx0fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soXG5cdFx0XHRqUXVlcnkudW5pcXVlU29ydChcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLmdldCgpLCBqUXVlcnkoIHNlbGVjdG9yLCBjb250ZXh0ICkgKVxuXHRcdFx0KVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXG5cdFx0KTtcblx0fVxufSApO1xuXG5mdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHtcblx0d2hpbGUgKCAoIGN1ciA9IGN1clsgZGlyIF0gKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCgge1xuXHRwYXJlbnQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0cmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDtcblx0fSxcblx0cGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdH0sXG5cdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTtcblx0fSxcblx0Y2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5ncyggZWxlbS5maXJzdENoaWxkICk7XG5cdH0sXG5cdGNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZWxlbS5jb250ZW50RG9jdW1lbnQgfHwgalF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7XG5cdH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBmbiApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggdW50aWwsIHNlbGVjdG9yICkge1xuXHRcdHZhciBtYXRjaGVkID0galF1ZXJ5Lm1hcCggdGhpcywgZm4sIHVudGlsICk7XG5cblx0XHRpZiAoIG5hbWUuc2xpY2UoIC01ICkgIT09IFwiVW50aWxcIiApIHtcblx0XHRcdHNlbGVjdG9yID0gdW50aWw7XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWxlY3RvciAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRtYXRjaGVkID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIG1hdGNoZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV2ZXJzZSBvcmRlciBmb3IgcGFyZW50cyogYW5kIHByZXYtZGVyaXZhdGl2ZXNcblx0XHRcdGlmICggcnBhcmVudHNwcmV2LnRlc3QoIG5hbWUgKSApIHtcblx0XHRcdFx0bWF0Y2hlZC5yZXZlcnNlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkICk7XG5cdH07XG59ICk7XG52YXIgcm5vdHdoaXRlID0gKCAvXFxTKy9nICk7XG5cblxuXG4vLyBDb252ZXJ0IFN0cmluZy1mb3JtYXR0ZWQgb3B0aW9ucyBpbnRvIE9iamVjdC1mb3JtYXR0ZWQgb25lc1xuZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIHtcblx0dmFyIG9iamVjdCA9IHt9O1xuXHRqUXVlcnkuZWFjaCggb3B0aW9ucy5tYXRjaCggcm5vdHdoaXRlICkgfHwgW10sIGZ1bmN0aW9uKCBfLCBmbGFnICkge1xuXHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0fSApO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSA6XG5cdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblxuXHR2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZ1xuXHRcdGZpcmluZyxcblxuXHRcdC8vIExhc3QgZmlyZSB2YWx1ZSBmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzXG5cdFx0bWVtb3J5LFxuXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblxuXHRcdC8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmdcblx0XHRsb2NrZWQsXG5cblx0XHQvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuXHRcdGxpc3QgPSBbXSxcblxuXHRcdC8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzXG5cdFx0cXVldWUgPSBbXSxcblxuXHRcdC8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4ID0gLTEsXG5cblx0XHQvLyBGaXJlIGNhbGxiYWNrc1xuXHRcdGZpcmUgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5mb3JjZSBzaW5nbGUtZmlyaW5nXG5cdFx0XHRsb2NrZWQgPSBvcHRpb25zLm9uY2U7XG5cblx0XHRcdC8vIEV4ZWN1dGUgY2FsbGJhY2tzIGZvciBhbGwgcGVuZGluZyBleGVjdXRpb25zLFxuXHRcdFx0Ly8gcmVzcGVjdGluZyBmaXJpbmdJbmRleCBvdmVycmlkZXMgYW5kIHJ1bnRpbWUgY2hhbmdlc1xuXHRcdFx0ZmlyZWQgPSBmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBxdWV1ZS5sZW5ndGg7IGZpcmluZ0luZGV4ID0gLTEgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdHdoaWxlICggKytmaXJpbmdJbmRleCA8IGxpc3QubGVuZ3RoICkge1xuXG5cdFx0XHRcdFx0Ly8gUnVuIGNhbGxiYWNrIGFuZCBjaGVjayBmb3IgZWFybHkgdGVybWluYXRpb25cblx0XHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIG1lbW9yeVsgMCBdLCBtZW1vcnlbIDEgXSApID09PSBmYWxzZSAmJlxuXHRcdFx0XHRcdFx0b3B0aW9ucy5zdG9wT25GYWxzZSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSnVtcCB0byBlbmQgYW5kIGZvcmdldCB0aGUgZGF0YSBzbyAuYWRkIGRvZXNuJ3QgcmUtZmlyZVxuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3JnZXQgdGhlIGRhdGEgaWYgd2UncmUgZG9uZSB3aXRoIGl0XG5cdFx0XHRpZiAoICFvcHRpb25zLm1lbW9yeSApIHtcblx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGZpcmluZyA9IGZhbHNlO1xuXG5cdFx0XHQvLyBDbGVhbiB1cCBpZiB3ZSdyZSBkb25lIGZpcmluZyBmb3IgZ29vZFxuXHRcdFx0aWYgKCBsb2NrZWQgKSB7XG5cblx0XHRcdFx0Ly8gS2VlcCBhbiBlbXB0eSBsaXN0IGlmIHdlIGhhdmUgZGF0YSBmb3IgZnV0dXJlIGFkZCBjYWxsc1xuXHRcdFx0XHRpZiAoIG1lbW9yeSApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0aGlzIG9iamVjdCBpcyBzcGVudFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxpc3QgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0XG5cdFx0c2VsZiA9IHtcblxuXHRcdFx0Ly8gQWRkIGEgY2FsbGJhY2sgb3IgYSBjb2xsZWN0aW9uIG9mIGNhbGxiYWNrcyB0byB0aGUgbGlzdFxuXHRcdFx0YWRkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmdcblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBtZW1vcnkgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQoIGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIGpRdWVyeS50eXBlKCBhcmcgKSAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0fSApKCBhcmd1bWVudHMgKTtcblxuXHRcdFx0XHRcdGlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdFxuXHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHR2YXIgaW5kZXg7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRpZiAoIGluZGV4IDw9IGZpcmluZ0luZGV4ICkge1xuXHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gP1xuXHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBmbiwgbGlzdCApID4gLTEgOlxuXHRcdFx0XHRcdGxpc3QubGVuZ3RoID4gMDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhbGwgY2FsbGJhY2tzIGZyb20gdGhlIGxpc3Rcblx0XHRcdGVtcHR5OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmUgYW5kIC5hZGRcblx0XHRcdC8vIEFib3J0IGFueSBjdXJyZW50L3BlbmRpbmcgZXhlY3V0aW9uc1xuXHRcdFx0Ly8gQ2xlYXIgYWxsIGNhbGxiYWNrcyBhbmQgdmFsdWVzXG5cdFx0XHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGRpc2FibGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFsaXN0O1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRGlzYWJsZSAuZmlyZVxuXHRcdFx0Ly8gQWxzbyBkaXNhYmxlIC5hZGQgdW5sZXNzIHdlIGhhdmUgbWVtb3J5IChzaW5jZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdClcblx0XHRcdC8vIEFib3J0IGFueSBwZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdGxvY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsb2NrZWQgPSBxdWV1ZSA9IFtdO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRsaXN0ID0gbWVtb3J5ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRsb2NrZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gISFsb2NrZWQ7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggIWxvY2tlZCApIHtcblx0XHRcdFx0XHRhcmdzID0gYXJncyB8fCBbXTtcblx0XHRcdFx0XHRhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdO1xuXHRcdFx0XHRcdHF1ZXVlLnB1c2goIGFyZ3MgKTtcblx0XHRcdFx0XHRpZiAoICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBUbyBrbm93IGlmIHRoZSBjYWxsYmFja3MgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2Vcblx0XHRcdGZpcmVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhZmlyZWQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRyZXR1cm4gc2VsZjtcbn07XG5cblxuZnVuY3Rpb24gSWRlbnRpdHkoIHYgKSB7XG5cdHJldHVybiB2O1xufVxuZnVuY3Rpb24gVGhyb3dlciggZXggKSB7XG5cdHRocm93IGV4O1xufVxuXG5mdW5jdGlvbiBhZG9wdFZhbHVlKCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0ICkge1xuXHR2YXIgbWV0aG9kO1xuXG5cdHRyeSB7XG5cblx0XHQvLyBDaGVjayBmb3IgcHJvbWlzZSBhc3BlY3QgZmlyc3QgdG8gcHJpdmlsZWdlIHN5bmNocm9ub3VzIGJlaGF2aW9yXG5cdFx0aWYgKCB2YWx1ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS5wcm9taXNlICkgKSApIHtcblx0XHRcdG1ldGhvZC5jYWxsKCB2YWx1ZSApLmRvbmUoIHJlc29sdmUgKS5mYWlsKCByZWplY3QgKTtcblxuXHRcdC8vIE90aGVyIHRoZW5hYmxlc1xuXHRcdH0gZWxzZSBpZiAoIHZhbHVlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCAoIG1ldGhvZCA9IHZhbHVlLnRoZW4gKSApICkge1xuXHRcdFx0bWV0aG9kLmNhbGwoIHZhbHVlLCByZXNvbHZlLCByZWplY3QgKTtcblxuXHRcdC8vIE90aGVyIG5vbi10aGVuYWJsZXNcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCBvbmx5XG5cdFx0XHQvLyBTdHJpY3QgbW9kZSBmdW5jdGlvbnMgaW52b2tlZCB3aXRob3V0IC5jYWxsLy5hcHBseSBnZXQgZ2xvYmFsLW9iamVjdCBjb250ZXh0XG5cdFx0XHRyZXNvbHZlLmNhbGwoIHVuZGVmaW5lZCwgdmFsdWUgKTtcblx0XHR9XG5cblx0Ly8gRm9yIFByb21pc2VzL0ErLCBjb252ZXJ0IGV4Y2VwdGlvbnMgaW50byByZWplY3Rpb25zXG5cdC8vIFNpbmNlIGpRdWVyeS53aGVuIGRvZXNuJ3QgdW53cmFwIHRoZW5hYmxlcywgd2UgY2FuIHNraXAgdGhlIGV4dHJhIGNoZWNrcyBhcHBlYXJpbmcgaW5cblx0Ly8gRGVmZXJyZWQjdGhlbiB0byBjb25kaXRpb25hbGx5IHN1cHByZXNzIHJlamVjdGlvbi5cblx0fSBjYXRjaCAoIHZhbHVlICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgb25seVxuXHRcdC8vIFN0cmljdCBtb2RlIGZ1bmN0aW9ucyBpbnZva2VkIHdpdGhvdXQgLmNhbGwvLmFwcGx5IGdldCBnbG9iYWwtb2JqZWN0IGNvbnRleHRcblx0XHRyZWplY3QuY2FsbCggdW5kZWZpbmVkLCB2YWx1ZSApO1xuXHR9XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHREZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG5cdFx0dmFyIHR1cGxlcyA9IFtcblxuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgY2FsbGJhY2tzLFxuXHRcdFx0XHQvLyAuLi4gLnRoZW4gaGFuZGxlcnMsIGFyZ3VtZW50IGluZGV4LCBbZmluYWwgc3RhdGVdXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApLCAyIF0sXG5cdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgMCwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAxLCBcInJlamVjdGVkXCIgXVxuXHRcdFx0XSxcblx0XHRcdHN0YXRlID0gXCJwZW5kaW5nXCIsXG5cdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRzdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbHdheXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLmRvbmUoIGFyZ3VtZW50cyApLmZhaWwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImNhdGNoXCI6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS50aGVuKCBudWxsLCBmbiApO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0cGlwZTogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gTWFwIHR1cGxlcyAocHJvZ3Jlc3MsIGRvbmUsIGZhaWwpIHRvIGFyZ3VtZW50cyAoZG9uZSwgZmFpbCwgcHJvZ3Jlc3MpXG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIHR1cGxlWyA0IF0gXSApICYmIGZuc1sgdHVwbGVbIDQgXSBdO1xuXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLnByb2dyZXNzKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLm5vdGlmeSB9KVxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5kb25lKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlc29sdmUgfSlcblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQuZmFpbChmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZWplY3QgfSlcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAxIF0gXSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZhaWwoIG5ld0RlZmVyLnJlamVjdCApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZuID8gWyByZXR1cm5lZCBdIDogYXJndW1lbnRzXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0Zm5zID0gbnVsbDtcblx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0aGVuOiBmdW5jdGlvbiggb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MgKSB7XG5cdFx0XHRcdFx0dmFyIG1heERlcHRoID0gMDtcblx0XHRcdFx0XHRmdW5jdGlvbiByZXNvbHZlKCBkZXB0aCwgZGVmZXJyZWQsIGhhbmRsZXIsIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdFx0XHRcdFx0XHRhcmdzID0gYXJndW1lbnRzLFxuXHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3cgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCwgdGhlbjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjNcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU5XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgZG91YmxlLXJlc29sdXRpb24gYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggPCBtYXhEZXB0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCA9IGhhbmRsZXIuYXBwbHkoIHRoYXQsIGFyZ3MgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNDhcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgPT09IGRlZmVycmVkLnByb21pc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvciggXCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb25cIiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9ucyAyLjMuMy4xLCAzLjVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC03NVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmV0cmlldmUgYHRoZW5gIG9ubHkgb25jZVxuXHRcdFx0XHRcdFx0XHRcdFx0dGhlbiA9IHJldHVybmVkICYmXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuNFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02NFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IGNoZWNrIG9iamVjdHMgYW5kIGZ1bmN0aW9ucyBmb3IgdGhlbmFiaWxpdHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCB0eXBlb2YgcmV0dXJuZWQgPT09IFwib2JqZWN0XCIgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgcmV0dXJuZWQgPT09IFwiZnVuY3Rpb25cIiApICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnRoZW47XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhIHJldHVybmVkIHRoZW5hYmxlXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGVuICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3BlY2lhbCBwcm9jZXNzb3JzIChub3RpZnkpIGp1c3Qgd2FpdCBmb3IgcmVzb2x1dGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTm9ybWFsIHByb2Nlc3NvcnMgKHJlc29sdmUpIGFsc28gaG9vayBpbnRvIHByb2dyZXNzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgZGlzcmVnYXJkIG9sZGVyIHJlc29sdXRpb24gdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWF4RGVwdGgrKztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoZW4uY2FsbChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBUaHJvd2VyLCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhbGwgb3RoZXIgcmV0dXJuZWQgdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgc3Vic3RpdHV0ZSBoYW5kbGVycyBwYXNzIG9uIGNvbnRleHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gSWRlbnRpdHkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhhdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcmdzID0gWyByZXR1cm5lZCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUHJvY2VzcyB0aGUgdmFsdWUocylcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCBwcm9jZXNzIGlzIHJlc29sdmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCBzcGVjaWFsIHx8IGRlZmVycmVkLnJlc29sdmVXaXRoICkoIHRoYXQsIGFyZ3MgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBub3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgY2F0Y2ggYW5kIHJlamVjdCBleGNlcHRpb25zXG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcyA9IHNwZWNpYWwgP1xuXHRcdFx0XHRcdFx0XHRcdFx0bWlnaHRUaHJvdyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKCBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuNC4xXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgcG9zdC1yZXNvbHV0aW9uIGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoICsgMSA+PSBtYXhEZXB0aCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGhhbmRsZXIgIT09IFRocm93ZXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoYXQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIGUgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuMVxuXHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01N1xuXHRcdFx0XHRcdFx0XHQvLyBSZS1yZXNvbHZlIHByb21pc2VzIGltbWVkaWF0ZWx5IHRvIGRvZGdlIGZhbHNlIHJlamVjdGlvbiBmcm9tXG5cdFx0XHRcdFx0XHRcdC8vIHN1YnNlcXVlbnQgZXJyb3JzXG5cdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcygpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ2FsbCBhbiBvcHRpb25hbCBob29rIHRvIHJlY29yZCB0aGUgc3RhY2ssIGluIGNhc2Ugb2YgZXhjZXB0aW9uXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2luY2UgaXQncyBvdGhlcndpc2UgbG9zdCB3aGVuIGV4ZWN1dGlvbiBnb2VzIGFzeW5jXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cHJvY2Vzcy5zdGFja1RyYWNlID0galF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggcHJvY2VzcyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblxuXHRcdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggb25Qcm9ncmVzcyApID9cblx0XHRcdFx0XHRcdFx0XHRcdG9uUHJvZ3Jlc3MgOlxuXHRcdFx0XHRcdFx0XHRcdFx0SWRlbnRpdHksXG5cdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIubm90aWZ5V2l0aFxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAxIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggb25GdWxmaWxsZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvbkZ1bGZpbGxlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRJZGVudGl0eVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDIgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5pc0Z1bmN0aW9uKCBvblJlamVjdGVkICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25SZWplY3RlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRUaHJvd2VyXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuXHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblx0XHRcdHZhciBsaXN0ID0gdHVwbGVbIDIgXSxcblx0XHRcdFx0c3RhdGVTdHJpbmcgPSB0dXBsZVsgNSBdO1xuXG5cdFx0XHQvLyBwcm9taXNlLnByb2dyZXNzID0gbGlzdC5hZGRcblx0XHRcdC8vIHByb21pc2UuZG9uZSA9IGxpc3QuYWRkXG5cdFx0XHQvLyBwcm9taXNlLmZhaWwgPSBsaXN0LmFkZFxuXHRcdFx0cHJvbWlzZVsgdHVwbGVbIDEgXSBdID0gbGlzdC5hZGQ7XG5cblx0XHRcdC8vIEhhbmRsZSBzdGF0ZVxuXHRcdFx0aWYgKCBzdGF0ZVN0cmluZyApIHtcblx0XHRcdFx0bGlzdC5hZGQoXG5cdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZXNvbHZlZFwiIChpLmUuLCBmdWxmaWxsZWQpXG5cdFx0XHRcdFx0XHQvLyBzdGF0ZSA9IFwicmVqZWN0ZWRcIlxuXHRcdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHR0dXBsZXNbIDMgLSBpIF1bIDIgXS5kaXNhYmxlLFxuXG5cdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfY2FsbGJhY2tzLmxvY2tcblx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMiBdLmxvY2tcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMuZmlyZVxuXHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmZpcmVcblx0XHRcdC8vIHJlamVjdGVkX2hhbmRsZXJzLmZpcmVcblx0XHRcdGxpc3QuYWRkKCB0dXBsZVsgMyBdLmZpcmUgKTtcblxuXHRcdFx0Ly8gZGVmZXJyZWQubm90aWZ5ID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLm5vdGlmeVdpdGgoLi4uKSB9XG5cdFx0XHQvLyBkZWZlcnJlZC5yZXNvbHZlID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLnJlc29sdmVXaXRoKC4uLikgfVxuXHRcdFx0Ly8gZGVmZXJyZWQucmVqZWN0ID0gZnVuY3Rpb24oKSB7IGRlZmVycmVkLnJlamVjdFdpdGgoLi4uKSB9XG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSggdGhpcyA9PT0gZGVmZXJyZWQgPyB1bmRlZmluZWQgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBkZWZlcnJlZC5ub3RpZnlXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0Ly8gZGVmZXJyZWQucmVzb2x2ZVdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHQvLyBkZWZlcnJlZC5yZWplY3RXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdID0gbGlzdC5maXJlV2l0aDtcblx0XHR9ICk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzaW5nbGVWYWx1ZSApIHtcblx0XHR2YXJcblxuXHRcdFx0Ly8gY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBhcmd1bWVudHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBjb3VudCBvZiB1bnByb2Nlc3NlZCBhcmd1bWVudHNcblx0XHRcdGkgPSByZW1haW5pbmcsXG5cblx0XHRcdC8vIHN1Ym9yZGluYXRlIGZ1bGZpbGxtZW50IGRhdGFcblx0XHRcdHJlc29sdmVDb250ZXh0cyA9IEFycmF5KCBpICksXG5cdFx0XHRyZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cblx0XHRcdC8vIHRoZSBtYXN0ZXIgRGVmZXJyZWRcblx0XHRcdG1hc3RlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXG5cdFx0XHQvLyBzdWJvcmRpbmF0ZSBjYWxsYmFjayBmYWN0b3J5XG5cdFx0XHR1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZUNvbnRleHRzWyBpIF0gPSB0aGlzO1xuXHRcdFx0XHRcdHJlc29sdmVWYWx1ZXNbIGkgXSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gc2xpY2UuY2FsbCggYXJndW1lbnRzICkgOiB2YWx1ZTtcblx0XHRcdFx0XHRpZiAoICEoIC0tcmVtYWluaW5nICkgKSB7XG5cdFx0XHRcdFx0XHRtYXN0ZXIucmVzb2x2ZVdpdGgoIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH07XG5cblx0XHQvLyBTaW5nbGUtIGFuZCBlbXB0eSBhcmd1bWVudHMgYXJlIGFkb3B0ZWQgbGlrZSBQcm9taXNlLnJlc29sdmVcblx0XHRpZiAoIHJlbWFpbmluZyA8PSAxICkge1xuXHRcdFx0YWRvcHRWYWx1ZSggc2luZ2xlVmFsdWUsIG1hc3Rlci5kb25lKCB1cGRhdGVGdW5jKCBpICkgKS5yZXNvbHZlLCBtYXN0ZXIucmVqZWN0ICk7XG5cblx0XHRcdC8vIFVzZSAudGhlbigpIHRvIHVud3JhcCBzZWNvbmRhcnkgdGhlbmFibGVzIChjZi4gZ2gtMzAwMClcblx0XHRcdGlmICggbWFzdGVyLnN0YXRlKCkgPT09IFwicGVuZGluZ1wiIHx8XG5cdFx0XHRcdGpRdWVyeS5pc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgcmVzb2x2ZVZhbHVlc1sgaSBdLnRoZW4gKSApIHtcblxuXHRcdFx0XHRyZXR1cm4gbWFzdGVyLnRoZW4oKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBNdWx0aXBsZSBhcmd1bWVudHMgYXJlIGFnZ3JlZ2F0ZWQgbGlrZSBQcm9taXNlLmFsbCBhcnJheSBlbGVtZW50c1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0YWRvcHRWYWx1ZSggcmVzb2x2ZVZhbHVlc1sgaSBdLCB1cGRhdGVGdW5jKCBpICksIG1hc3Rlci5yZWplY3QgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbWFzdGVyLnByb21pc2UoKTtcblx0fVxufSApO1xuXG5cbi8vIFRoZXNlIHVzdWFsbHkgaW5kaWNhdGUgYSBwcm9ncmFtbWVyIG1pc3Rha2UgZHVyaW5nIGRldmVsb3BtZW50LFxuLy8gd2FybiBhYm91dCB0aGVtIEFTQVAgcmF0aGVyIHRoYW4gc3dhbGxvd2luZyB0aGVtIGJ5IGRlZmF1bHQuXG52YXIgcmVycm9yTmFtZXMgPSAvXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztcblxualF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2sgPSBmdW5jdGlvbiggZXJyb3IsIHN0YWNrICkge1xuXG5cdC8vIFN1cHBvcnQ6IElFIDggLSA5IG9ubHlcblx0Ly8gQ29uc29sZSBleGlzdHMgd2hlbiBkZXYgdG9vbHMgYXJlIG9wZW4sIHdoaWNoIGNhbiBoYXBwZW4gYXQgYW55IHRpbWVcblx0aWYgKCB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS53YXJuICYmIGVycm9yICYmIHJlcnJvck5hbWVzLnRlc3QoIGVycm9yLm5hbWUgKSApIHtcblx0XHR3aW5kb3cuY29uc29sZS53YXJuKCBcImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246IFwiICsgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2ssIHN0YWNrICk7XG5cdH1cbn07XG5cblxuXG5cbmpRdWVyeS5yZWFkeUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCBlcnJvciApIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdHRocm93IGVycm9yO1xuXHR9ICk7XG59O1xuXG5cblxuXG4vLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcbnZhciByZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTtcblxualF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkge1xuXG5cdHJlYWR5TGlzdFxuXHRcdC50aGVuKCBmbiApXG5cblx0XHQvLyBXcmFwIGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiBpbiBhIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIGxvb2t1cFxuXHRcdC8vIGhhcHBlbnMgYXQgdGhlIHRpbWUgb2YgZXJyb3IgaGFuZGxpbmcgaW5zdGVhZCBvZiBjYWxsYmFja1xuXHRcdC8vIHJlZ2lzdHJhdGlvbi5cblx0XHQuY2F0Y2goIGZ1bmN0aW9uKCBlcnJvciApIHtcblx0XHRcdGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiggZXJyb3IgKTtcblx0XHR9ICk7XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cblx0aXNSZWFkeTogZmFsc2UsXG5cblx0Ly8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZVxuXHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRyZWFkeVdhaXQ6IDEsXG5cblx0Ly8gSG9sZCAob3IgcmVsZWFzZSkgdGhlIHJlYWR5IGV2ZW50XG5cdGhvbGRSZWFkeTogZnVuY3Rpb24oIGhvbGQgKSB7XG5cdFx0aWYgKCBob2xkICkge1xuXHRcdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkucmVhZHkoIHRydWUgKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7XG5cblx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0aWYgKCB3YWl0ID09PSB0cnVlID8gLS1qUXVlcnkucmVhZHlXYWl0IDogalF1ZXJ5LmlzUmVhZHkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5XG5cdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXG5cdFx0Ly8gSWYgYSBub3JtYWwgRE9NIFJlYWR5IGV2ZW50IGZpcmVkLCBkZWNyZW1lbnQsIGFuZCB3YWl0IGlmIG5lZWQgYmVcblx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlXG5cdFx0cmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5yZWFkeS50aGVuID0gcmVhZHlMaXN0LnRoZW47XG5cbi8vIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kXG5mdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG5cdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbi8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkXG4vLyBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cbi8vIFN1cHBvcnQ6IElFIDw9OSAtIDEwIG9ubHlcbi8vIE9sZGVyIElFIHNvbWV0aW1lcyBzaWduYWxzIFwiaW50ZXJhY3RpdmVcIiB0b28gc29vblxuaWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgfHxcblx0KCBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIiAmJiAhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICkgKSB7XG5cblx0Ly8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblxufSBlbHNlIHtcblxuXHQvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblxuXHQvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xufVxuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGVsZW1zLmxlbmd0aCxcblx0XHRidWxrID0ga2V5ID09IG51bGw7XG5cblx0Ly8gU2V0cyBtYW55IHZhbHVlc1xuXHRpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXHRcdGZvciAoIGkgaW4ga2V5ICkge1xuXHRcdFx0YWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cblx0XHRcdC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuXHRcdFx0aWYgKCByYXcgKSB7XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuXHRcdFx0XHRmbiA9IG51bGw7XG5cblx0XHRcdC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1bGsgPSBmbjtcblx0XHRcdFx0Zm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGZuKFxuXHRcdFx0XHRcdGVsZW1zWyBpIF0sIGtleSwgcmF3ID9cblx0XHRcdFx0XHR2YWx1ZSA6XG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY2hhaW5hYmxlID9cblx0XHRlbGVtcyA6XG5cblx0XHQvLyBHZXRzXG5cdFx0YnVsayA/XG5cdFx0XHRmbi5jYWxsKCBlbGVtcyApIDpcblx0XHRcdGxlbiA/IGZuKCBlbGVtc1sgMCBdLCBrZXkgKSA6IGVtcHR5R2V0O1xufTtcbnZhciBhY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXG5cdC8vIEFjY2VwdHMgb25seTpcblx0Ly8gIC0gTm9kZVxuXHQvLyAgICAtIE5vZGUuRUxFTUVOVF9OT0RFXG5cdC8vICAgIC0gTm9kZS5ET0NVTUVOVF9OT0RFXG5cdC8vICAtIE9iamVjdFxuXHQvLyAgICAtIEFueVxuXHRyZXR1cm4gb3duZXIubm9kZVR5cGUgPT09IDEgfHwgb3duZXIubm9kZVR5cGUgPT09IDkgfHwgISggK293bmVyLm5vZGVUeXBlICk7XG59O1xuXG5cblxuXG5mdW5jdGlvbiBEYXRhKCkge1xuXHR0aGlzLmV4cGFuZG8gPSBqUXVlcnkuZXhwYW5kbyArIERhdGEudWlkKys7XG59XG5cbkRhdGEudWlkID0gMTtcblxuRGF0YS5wcm90b3R5cGUgPSB7XG5cblx0Y2FjaGU6IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHRcdC8vIENoZWNrIGlmIHRoZSBvd25lciBvYmplY3QgYWxyZWFkeSBoYXMgYSBjYWNoZVxuXHRcdHZhciB2YWx1ZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdC8vIElmIG5vdCwgY3JlYXRlIG9uZVxuXHRcdGlmICggIXZhbHVlICkge1xuXHRcdFx0dmFsdWUgPSB7fTtcblxuXHRcdFx0Ly8gV2UgY2FuIGFjY2VwdCBkYXRhIGZvciBub24tZWxlbWVudCBub2RlcyBpbiBtb2Rlcm4gYnJvd3NlcnMsXG5cdFx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdFx0Ly8gQWx3YXlzIHJldHVybiBhbiBlbXB0eSBvYmplY3QuXG5cdFx0XHRpZiAoIGFjY2VwdERhdGEoIG93bmVyICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYgaXQgaXMgYSBub2RlIHVubGlrZWx5IHRvIGJlIHN0cmluZ2lmeS1lZCBvciBsb29wZWQgb3ZlclxuXHRcdFx0XHQvLyB1c2UgcGxhaW4gYXNzaWdubWVudFxuXHRcdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHZhbHVlO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBzZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eVxuXHRcdFx0XHQvLyBjb25maWd1cmFibGUgbXVzdCBiZSB0cnVlIHRvIGFsbG93IHRoZSBwcm9wZXJ0eSB0byBiZVxuXHRcdFx0XHQvLyBkZWxldGVkIHdoZW4gZGF0YSBpcyByZW1vdmVkXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBvd25lciwgdGhpcy5leHBhbmRvLCB7XG5cdFx0XHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWVcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0sXG5cdHNldDogZnVuY3Rpb24oIG93bmVyLCBkYXRhLCB2YWx1ZSApIHtcblx0XHR2YXIgcHJvcCxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZSggb3duZXIgKTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwga2V5LCB2YWx1ZSBdIGFyZ3Ncblx0XHQvLyBBbHdheXMgdXNlIGNhbWVsQ2FzZSBrZXkgKGdoLTIyNTcpXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBqUXVlcnkuY2FtZWxDYXNlKCBkYXRhICkgXSA9IHZhbHVlO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCB7IHByb3BlcnRpZXMgfSBdIGFyZ3Ncblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBDb3B5IHRoZSBwcm9wZXJ0aWVzIG9uZS1ieS1vbmUgdG8gdGhlIGNhY2hlIG9iamVjdFxuXHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRjYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggcHJvcCApIF0gPSBkYXRhWyBwcm9wIF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBjYWNoZTtcblx0fSxcblx0Z2V0OiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHRyZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcy5jYWNoZSggb3duZXIgKSA6XG5cblx0XHRcdC8vIEFsd2F5cyB1c2UgY2FtZWxDYXNlIGtleSAoZ2gtMjI1Nylcblx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSAmJiBvd25lclsgdGhpcy5leHBhbmRvIF1bIGpRdWVyeS5jYW1lbENhc2UoIGtleSApIF07XG5cdH0sXG5cdGFjY2VzczogZnVuY3Rpb24oIG93bmVyLCBrZXksIHZhbHVlICkge1xuXG5cdFx0Ly8gSW4gY2FzZXMgd2hlcmUgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBObyBrZXkgd2FzIHNwZWNpZmllZFxuXHRcdC8vICAgMi4gQSBzdHJpbmcga2V5IHdhcyBzcGVjaWZpZWQsIGJ1dCBubyB2YWx1ZSBwcm92aWRlZFxuXHRcdC8vXG5cdFx0Ly8gVGFrZSB0aGUgXCJyZWFkXCIgcGF0aCBhbmQgYWxsb3cgdGhlIGdldCBtZXRob2QgdG8gZGV0ZXJtaW5lXG5cdFx0Ly8gd2hpY2ggdmFsdWUgdG8gcmV0dXJuLCByZXNwZWN0aXZlbHkgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBUaGUgZW50aXJlIGNhY2hlIG9iamVjdFxuXHRcdC8vICAgMi4gVGhlIGRhdGEgc3RvcmVkIGF0IHRoZSBrZXlcblx0XHQvL1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0KCAoIGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApICkge1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblx0XHR9XG5cblx0XHQvLyBXaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksXG5cdFx0XHRjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdGlmICggY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIGtleSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2Yga2V5c1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSgga2V5ICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYga2V5IGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0Ly8gV2UgYWx3YXlzIHNldCBjYW1lbENhc2Uga2V5cywgc28gcmVtb3ZlIHRoYXQuXG5cdFx0XHRcdGtleSA9IGtleS5tYXAoIGpRdWVyeS5jYW1lbENhc2UgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGtleSA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHRcdC8vIElmIGEga2V5IHdpdGggdGhlIHNwYWNlcyBleGlzdHMsIHVzZSBpdC5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBjcmVhdGUgYW4gYXJyYXkgYnkgbWF0Y2hpbmcgbm9uLXdoaXRlc3BhY2Vcblx0XHRcdFx0a2V5ID0ga2V5IGluIGNhY2hlID9cblx0XHRcdFx0XHRbIGtleSBdIDpcblx0XHRcdFx0XHQoIGtleS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW10gKTtcblx0XHRcdH1cblxuXHRcdFx0aSA9IGtleS5sZW5ndGg7XG5cblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIGtleVsgaSBdIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIHRoZXJlJ3Mgbm8gbW9yZSBkYXRhXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fCBqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKSApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NVxuXHRcdFx0Ly8gV2Via2l0ICYgQmxpbmsgcGVyZm9ybWFuY2Ugc3VmZmVycyB3aGVuIGRlbGV0aW5nIHByb3BlcnRpZXNcblx0XHRcdC8vIGZyb20gRE9NIG5vZGVzLCBzbyBzZXQgdG8gdW5kZWZpbmVkIGluc3RlYWRcblx0XHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM3ODYwNyAoYnVnIHJlc3RyaWN0ZWQpXG5cdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWxldGUgb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHZhciBjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0XHRyZXR1cm4gY2FjaGUgIT09IHVuZGVmaW5lZCAmJiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICk7XG5cdH1cbn07XG52YXIgZGF0YVByaXYgPSBuZXcgRGF0YSgpO1xuXG52YXIgZGF0YVVzZXIgPSBuZXcgRGF0YSgpO1xuXG5cblxuLy9cdEltcGxlbWVudGF0aW9uIFN1bW1hcnlcbi8vXG4vL1x0MS4gRW5mb3JjZSBBUEkgc3VyZmFjZSBhbmQgc2VtYW50aWMgY29tcGF0aWJpbGl0eSB3aXRoIDEuOS54IGJyYW5jaFxuLy9cdDIuIEltcHJvdmUgdGhlIG1vZHVsZSdzIG1haW50YWluYWJpbGl0eSBieSByZWR1Y2luZyB0aGUgc3RvcmFnZVxuLy9cdFx0cGF0aHMgdG8gYSBzaW5nbGUgbWVjaGFuaXNtLlxuLy9cdDMuIFVzZSB0aGUgc2FtZSBzaW5nbGUgbWVjaGFuaXNtIHRvIHN1cHBvcnQgXCJwcml2YXRlXCIgYW5kIFwidXNlclwiIGRhdGEuXG4vL1x0NC4gX05ldmVyXyBleHBvc2UgXCJwcml2YXRlXCIgZGF0YSB0byB1c2VyIGNvZGUgKFRPRE86IERyb3AgX2RhdGEsIF9yZW1vdmVEYXRhKVxuLy9cdDUuIEF2b2lkIGV4cG9zaW5nIGltcGxlbWVudGF0aW9uIGRldGFpbHMgb24gdXNlciBvYmplY3RzIChlZy4gZXhwYW5kbyBwcm9wZXJ0aWVzKVxuLy9cdDYuIFByb3ZpZGUgYSBjbGVhciBwYXRoIGZvciBpbXBsZW1lbnRhdGlvbiB1cGdyYWRlIHRvIFdlYWtNYXAgaW4gMjAxNFxuXG52YXIgcmJyYWNlID0gL14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFxuXHRybXVsdGlEYXNoID0gL1tBLVpdL2c7XG5cbmZ1bmN0aW9uIGRhdGFBdHRyKCBlbGVtLCBrZXksIGRhdGEgKSB7XG5cdHZhciBuYW1lO1xuXG5cdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnlcblx0Ly8gZGF0YSBmcm9tIHRoZSBIVE1MNSBkYXRhLSogYXR0cmlidXRlXG5cdGlmICggZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0bmFtZSA9IFwiZGF0YS1cIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kJlwiICkudG9Mb3dlckNhc2UoKTtcblx0XHRkYXRhID0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKTtcblxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRhID0gZGF0YSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDpcblx0XHRcdFx0XHRkYXRhID09PSBcImZhbHNlXCIgPyBmYWxzZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJudWxsXCIgPyBudWxsIDpcblxuXHRcdFx0XHRcdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXG5cdFx0XHRcdFx0K2RhdGEgKyBcIlwiID09PSBkYXRhID8gK2RhdGEgOlxuXHRcdFx0XHRcdHJicmFjZS50ZXN0KCBkYXRhICkgPyBKU09OLnBhcnNlKCBkYXRhICkgOlxuXHRcdFx0XHRcdGRhdGE7XG5cdFx0XHR9IGNhdGNoICggZSApIHt9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGRhdGEgc28gaXQgaXNuJ3QgY2hhbmdlZCBsYXRlclxuXHRcdFx0ZGF0YVVzZXIuc2V0KCBlbGVtLCBrZXksIGRhdGEgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGRhdGE7XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aGFzRGF0YTogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRhdGFVc2VyLmhhc0RhdGEoIGVsZW0gKSB8fCBkYXRhUHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFVc2VyLmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFVc2VyLnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9LFxuXG5cdC8vIFRPRE86IE5vdyB0aGF0IGFsbCBjYWxscyB0byBfZGF0YSBhbmQgX3JlbW92ZURhdGEgaGF2ZSBiZWVuIHJlcGxhY2VkXG5cdC8vIHdpdGggZGlyZWN0IGNhbGxzIHRvIGRhdGFQcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHR9LFxuXG5cdF9yZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSApO1xuXG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhZGF0YVByaXYuZ2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiICkgKSB7XG5cdFx0XHRcdFx0aSA9IGF0dHJzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgMTEgb25seVxuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSggNSApICk7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YUF0dHIoIGVsZW0sIG5hbWUsIGRhdGFbIG5hbWUgXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG5cdFx0aWYgKCB0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5ICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGRhdGE7XG5cblx0XHRcdC8vIFRoZSBjYWxsaW5nIGpRdWVyeSBvYmplY3QgKGVsZW1lbnQgbWF0Y2hlcykgaXMgbm90IGVtcHR5XG5cdFx0XHQvLyAoYW5kIHRoZXJlZm9yZSBoYXMgYW4gZWxlbWVudCBhcHBlYXJzIGF0IHRoaXNbIDAgXSkgYW5kIHRoZVxuXHRcdFx0Ly8gYHZhbHVlYCBwYXJhbWV0ZXIgd2FzIG5vdCB1bmRlZmluZWQuIEFuIGVtcHR5IGpRdWVyeSBvYmplY3Rcblx0XHRcdC8vIHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGZvciBlbGVtID0gdGhpc1sgMCBdIHdoaWNoIHdpbGxcblx0XHRcdC8vIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhbiBhdHRlbXB0IHRvIHJlYWQgYSBkYXRhIGNhY2hlIGlzIG1hZGUuXG5cdFx0XHRpZiAoIGVsZW0gJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIFRoZSBrZXkgd2lsbCBhbHdheXMgYmUgY2FtZWxDYXNlZCBpbiBEYXRhXG5cdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0sIGtleSApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gXCJkaXNjb3ZlclwiIHRoZSBkYXRhIGluXG5cdFx0XHRcdC8vIEhUTUw1IGN1c3RvbSBkYXRhLSogYXR0cnNcblx0XHRcdFx0ZGF0YSA9IGRhdGFBdHRyKCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFdlIGFsd2F5cyBzdG9yZSB0aGUgY2FtZWxDYXNlZCBrZXlcblx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBrZXksIHZhbHVlICk7XG5cdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRhdGFVc2VyLnJlbW92ZSggdGhpcywga2V5ICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHF1ZXVlO1xuXG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0dHlwZSA9ICggdHlwZSB8fCBcImZ4XCIgKSArIFwicXVldWVcIjtcblx0XHRcdHF1ZXVlID0gZGF0YVByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cXVldWUucHVzaCggZGF0YSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcXVldWUgfHwgW107XG5cdFx0fVxuXHR9LFxuXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCksXG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuXHRcdFx0fTtcblxuXHRcdC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcblx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdHN0YXJ0TGVuZ3RoLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblxuXHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0Ly8gYXV0b21hdGljYWxseSBkZXF1ZXVlZFxuXHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHR9XG5cblx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmVcblx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBrZXksIHtcblx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKS5hZGQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdH0gKVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgc2V0dGVyID0gMjtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRzZXR0ZXItLTtcblx0XHR9XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWyAwIF0sIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMgOlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbIDAgXSAhPT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHR9LFxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSApO1xuXHR9LFxuXHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdH0sXG5cblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhUHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0aWYgKCB0bXAgJiYgdG1wLmVtcHR5ICkge1xuXHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJlc29sdmUoKTtcblx0XHRyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7XG5cdH1cbn0gKTtcbnZhciBwbnVtID0gKCAvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLyApLnNvdXJjZTtcblxudmFyIHJjc3NOdW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApO1xuXG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuV2l0aGluVHJlZSA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblxuXHRcdC8vIGlzSGlkZGVuV2l0aGluVHJlZSBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuXHRcdC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuXHRcdGVsZW0gPSBlbCB8fCBlbGVtO1xuXG5cdFx0Ly8gSW5saW5lIHN0eWxlIHRydW1wcyBhbGxcblx0XHRyZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fFxuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmXG5cblx0XHRcdC8vIE90aGVyd2lzZSwgY2hlY2sgY29tcHV0ZWQgc3R5bGVcblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MyAtIDQ1XG5cdFx0XHQvLyBEaXNjb25uZWN0ZWQgZWxlbWVudHMgY2FuIGhhdmUgY29tcHV0ZWQgZGlzcGxheTogbm9uZSwgc28gZmlyc3QgY29uZmlybSB0aGF0IGVsZW0gaXNcblx0XHRcdC8vIGluIHRoZSBkb2N1bWVudC5cblx0XHRcdGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgJiZcblxuXHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSA9PT0gXCJub25lXCI7XG5cdH07XG5cbnZhciBzd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzICkge1xuXHR2YXIgcmV0LCBuYW1lLFxuXHRcdG9sZCA9IHt9O1xuXG5cdC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0b2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb3B0aW9uc1sgbmFtZSBdO1xuXHR9XG5cblx0cmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTtcblxuXHQvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG5cblxuXG5cbmZ1bmN0aW9uIGFkanVzdENTUyggZWxlbSwgcHJvcCwgdmFsdWVQYXJ0cywgdHdlZW4gKSB7XG5cdHZhciBhZGp1c3RlZCxcblx0XHRzY2FsZSA9IDEsXG5cdFx0bWF4SXRlcmF0aW9ucyA9IDIwLFxuXHRcdGN1cnJlbnRWYWx1ZSA9IHR3ZWVuID9cblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uY3VyKCk7XG5cdFx0XHR9IDpcblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgcHJvcCwgXCJcIiApO1xuXHRcdFx0fSxcblx0XHRpbml0aWFsID0gY3VycmVudFZhbHVlKCksXG5cdFx0dW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG5cdFx0Ly8gU3RhcnRpbmcgdmFsdWUgY29tcHV0YXRpb24gaXMgcmVxdWlyZWQgZm9yIHBvdGVudGlhbCB1bml0IG1pc21hdGNoZXNcblx0XHRpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICtpbml0aWFsICkgJiZcblx0XHRcdHJjc3NOdW0uZXhlYyggalF1ZXJ5LmNzcyggZWxlbSwgcHJvcCApICk7XG5cblx0aWYgKCBpbml0aWFsSW5Vbml0ICYmIGluaXRpYWxJblVuaXRbIDMgXSAhPT0gdW5pdCApIHtcblxuXHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHR1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07XG5cblx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0dmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107XG5cblx0XHQvLyBJdGVyYXRpdmVseSBhcHByb3hpbWF0ZSBmcm9tIGEgbm9uemVybyBzdGFydGluZyBwb2ludFxuXHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbCB8fCAxO1xuXG5cdFx0ZG8ge1xuXG5cdFx0XHQvLyBJZiBwcmV2aW91cyBpdGVyYXRpb24gemVyb2VkIG91dCwgZG91YmxlIHVudGlsIHdlIGdldCAqc29tZXRoaW5nKi5cblx0XHRcdC8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93XG5cdFx0XHRzY2FsZSA9IHNjYWxlIHx8IFwiLjVcIjtcblxuXHRcdFx0Ly8gQWRqdXN0IGFuZCBhcHBseVxuXHRcdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTtcblx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgaW5pdGlhbEluVW5pdCArIHVuaXQgKTtcblxuXHRcdC8vIFVwZGF0ZSBzY2FsZSwgdG9sZXJhdGluZyB6ZXJvIG9yIE5hTiBmcm9tIHR3ZWVuLmN1cigpXG5cdFx0Ly8gQnJlYWsgdGhlIGxvb3AgaWYgc2NhbGUgaXMgdW5jaGFuZ2VkIG9yIHBlcmZlY3QsIG9yIGlmIHdlJ3ZlIGp1c3QgaGFkIGVub3VnaC5cblx0XHR9IHdoaWxlIChcblx0XHRcdHNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zXG5cdFx0KTtcblx0fVxuXG5cdGlmICggdmFsdWVQYXJ0cyApIHtcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWxJblVuaXQgfHwgK2luaXRpYWwgfHwgMDtcblxuXHRcdC8vIEFwcGx5IHJlbGF0aXZlIG9mZnNldCAoKz0vLT0pIGlmIHNwZWNpZmllZFxuXHRcdGFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID9cblx0XHRcdGluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6XG5cdFx0XHQrdmFsdWVQYXJ0c1sgMiBdO1xuXHRcdGlmICggdHdlZW4gKSB7XG5cdFx0XHR0d2Vlbi51bml0ID0gdW5pdDtcblx0XHRcdHR3ZWVuLnN0YXJ0ID0gaW5pdGlhbEluVW5pdDtcblx0XHRcdHR3ZWVuLmVuZCA9IGFkanVzdGVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gYWRqdXN0ZWQ7XG59XG5cblxudmFyIGRlZmF1bHREaXNwbGF5TWFwID0ge307XG5cbmZ1bmN0aW9uIGdldERlZmF1bHREaXNwbGF5KCBlbGVtICkge1xuXHR2YXIgdGVtcCxcblx0XHRkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQsXG5cdFx0bm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLFxuXHRcdGRpc3BsYXkgPSBkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXTtcblxuXHRpZiAoIGRpc3BsYXkgKSB7XG5cdFx0cmV0dXJuIGRpc3BsYXk7XG5cdH1cblxuXHR0ZW1wID0gZG9jLmJvZHkuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVFbGVtZW50KCBub2RlTmFtZSApICksXG5cdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCB0ZW1wLCBcImRpc3BsYXlcIiApO1xuXG5cdHRlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdGVtcCApO1xuXG5cdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0ZGlzcGxheSA9IFwiYmxvY2tcIjtcblx0fVxuXHRkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbmZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHtcblx0dmFyIGRpc3BsYXksIGVsZW0sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHQvLyBEZXRlcm1pbmUgbmV3IGRpc3BsYXkgdmFsdWUgZm9yIGVsZW1lbnRzIHRoYXQgbmVlZCB0byBjaGFuZ2Vcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7XG5cdFx0aWYgKCBzaG93ICkge1xuXG5cdFx0XHQvLyBTaW5jZSB3ZSBmb3JjZSB2aXNpYmlsaXR5IHVwb24gY2FzY2FkZS1oaWRkZW4gZWxlbWVudHMsIGFuIGltbWVkaWF0ZSAoYW5kIHNsb3cpXG5cdFx0XHQvLyBjaGVjayBpcyByZXF1aXJlZCBpbiB0aGlzIGZpcnN0IGxvb3AgdW5sZXNzIHdlIGhhdmUgYSBub25lbXB0eSBkaXNwbGF5IHZhbHVlIChlaXRoZXJcblx0XHRcdC8vIGlubGluZSBvciBhYm91dC10by1iZS1yZXN0b3JlZClcblx0XHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJkaXNwbGF5XCIgKSB8fCBudWxsO1xuXHRcdFx0XHRpZiAoICF2YWx1ZXNbIGluZGV4IF0gKSB7XG5cdFx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiYgaXNIaWRkZW5XaXRoaW5UcmVlKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGdldERlZmF1bHREaXNwbGF5KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggZGlzcGxheSAhPT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IFwibm9uZVwiO1xuXG5cdFx0XHRcdC8vIFJlbWVtYmVyIHdoYXQgd2UncmUgb3ZlcndyaXRpbmdcblx0XHRcdFx0ZGF0YVByaXYuc2V0KCBlbGVtLCBcImRpc3BsYXlcIiwgZGlzcGxheSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiB0aGUgZWxlbWVudHMgaW4gYSBzZWNvbmQgbG9vcCB0byBhdm9pZCBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoIHZhbHVlc1sgaW5kZXggXSAhPSBudWxsICkge1xuXHRcdFx0ZWxlbWVudHNbIGluZGV4IF0uc3R5bGUuZGlzcGxheSA9IHZhbHVlc1sgaW5kZXggXTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudHM7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0c2hvdzogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7XG5cdH0sXG5cdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcyApO1xuXHR9LFxuXHR0b2dnbGU6IGZ1bmN0aW9uKCBzdGF0ZSApIHtcblx0XHRpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRyZXR1cm4gc3RhdGUgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBpc0hpZGRlbldpdGhpblRyZWUoIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxufSApO1xudmFyIHJjaGVja2FibGVUeXBlID0gKCAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSApO1xuXG52YXIgcnRhZ05hbWUgPSAoIC88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKykvaSApO1xuXG52YXIgcnNjcmlwdFR5cGUgPSAoIC9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kgKTtcblxuXG5cbi8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG52YXIgd3JhcE1hcCA9IHtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHQvLyBYSFRNTCBwYXJzZXJzIGRvIG5vdCBtYWdpY2FsbHkgaW5zZXJ0IGVsZW1lbnRzIGluIHRoZVxuXHQvLyBzYW1lIHdheSB0aGF0IHRhZyBzb3VwIHBhcnNlcnMgZG8uIFNvIHdlIGNhbm5vdCBzaG9ydGVuXG5cdC8vIHRoaXMgYnkgb21pdHRpbmcgPHRib2R5PiBvciBvdGhlciByZXF1aXJlZCBlbGVtZW50cy5cblx0dGhlYWQ6IFsgMSwgXCI8dGFibGU+XCIsIFwiPC90YWJsZT5cIiBdLFxuXHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHR0cjogWyAyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiIF0sXG5cdHRkOiBbIDMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCIgXSxcblxuXHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cbn07XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdC8vIFVzZSB0eXBlb2YgdG8gYXZvaWQgemVyby1hcmd1bWVudCBtZXRob2QgaW52b2NhdGlvbiBvbiBob3N0IG9iamVjdHMgKCMxNTE1MSlcblx0dmFyIHJldCA9IHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiID9cblx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09IFwidW5kZWZpbmVkXCIgP1xuXHRcdFx0XHRjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFtdO1xuXG5cdHJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/XG5cdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdHJldDtcbn1cblxuXG4vLyBNYXJrIHNjcmlwdHMgYXMgaGF2aW5nIGFscmVhZHkgYmVlbiBldmFsdWF0ZWRcbmZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGRhdGFQcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sXG5cdFx0XHRcImdsb2JhbEV2YWxcIixcblx0XHRcdCFyZWZFbGVtZW50cyB8fCBkYXRhUHJpdi5nZXQoIHJlZkVsZW1lbnRzWyBpIF0sIFwiZ2xvYmFsRXZhbFwiIClcblx0XHQpO1xuXHR9XG59XG5cblxudmFyIHJodG1sID0gLzx8JiM/XFx3KzsvO1xuXG5mdW5jdGlvbiBidWlsZEZyYWdtZW50KCBlbGVtcywgY29udGV4dCwgc2NyaXB0cywgc2VsZWN0aW9uLCBpZ25vcmVkICkge1xuXHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGNvbnRhaW5zLCBqLFxuXHRcdGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0bm9kZXMgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdGlmICggZWxlbSB8fCBlbGVtID09PSAwICkge1xuXG5cdFx0XHQvLyBBZGQgbm9kZXMgZGlyZWN0bHlcblx0XHRcdGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cblx0XHRcdC8vIENvbnZlcnQgbm9uLWh0bWwgaW50byBhIHRleHQgbm9kZVxuXHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0bm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cblx0XHRcdC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dG1wID0gdG1wIHx8IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApO1xuXG5cdFx0XHRcdC8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb25cblx0XHRcdFx0dGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHR0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgalF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIGVsZW0gKSArIHdyYXBbIDIgXTtcblxuXHRcdFx0XHQvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcblx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdFx0dG1wID0gdG1wLmxhc3RDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIHRtcC5jaGlsZE5vZGVzICk7XG5cblx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0dG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdFx0XHQvLyBFbnN1cmUgdGhlIGNyZWF0ZWQgbm9kZXMgYXJlIG9ycGhhbmVkICgjMTIzOTIpXG5cdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuXHRmcmFnbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG5cblx0aSA9IDA7XG5cdHdoaWxlICggKCBlbGVtID0gbm9kZXNbIGkrKyBdICkgKSB7XG5cblx0XHQvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KVxuXHRcdGlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSA+IC0xICkge1xuXHRcdFx0aWYgKCBpZ25vcmVkICkge1xuXHRcdFx0XHRpZ25vcmVkLnB1c2goIGVsZW0gKTtcblx0XHRcdH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdC8vIEFwcGVuZCB0byBmcmFnbWVudFxuXHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGlmICggY29udGFpbnMgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHR9XG5cblx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0aWYgKCBzY3JpcHRzICkge1xuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHtcblx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuXHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZyYWdtZW50O1xufVxuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRkaXYgPSBmcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICksXG5cdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5XG5cdC8vIENoZWNrIHN0YXRlIGxvc3QgaWYgdGhlIG5hbWUgaXMgc2V0ICgjMTEyMTcpXG5cdC8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSlcblx0Ly8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpXG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwicmFkaW9cIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXG5cdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIG9ubHlcblx0Ly8gT2xkZXIgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzXG5cdHN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0gKSgpO1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuXG5cbnZhclxuXHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFxuXHRydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KS87XG5cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuLy8gU2VlICMxMzM5MyBmb3IgbW9yZSBpbmZvXG5mdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0fSBjYXRjaCAoIGVyciApIHsgfVxufVxuXG5mdW5jdGlvbiBvbiggZWxlbSwgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lICkge1xuXHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdC8vIFR5cGVzIGNhbiBiZSBhIG1hcCBvZiB0eXBlcy9oYW5kbGVyc1xuXHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vICggdHlwZXMtT2JqZWN0LCBzZWxlY3RvciwgZGF0YSApXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdGRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRvbiggZWxlbSwgdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggZGF0YSA9PSBudWxsICYmIGZuID09IG51bGwgKSB7XG5cblx0XHQvLyAoIHR5cGVzLCBmbiApXG5cdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoIGZuID09IG51bGwgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMsIHNlbGVjdG9yLCBmbiApXG5cdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vICggdHlwZXMsIGRhdGEsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHR9IGVsc2UgaWYgKCAhZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblxuXHRpZiAoIG9uZSA9PT0gMSApIHtcblx0XHRvcmlnRm4gPSBmbjtcblx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRqUXVlcnkoKS5vZmYoIGV2ZW50ICk7XG5cdFx0XHRyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9O1xuXG5cdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRmbi5ndWlkID0gb3JpZ0ZuLmd1aWQgfHwgKCBvcmlnRm4uZ3VpZCA9IGpRdWVyeS5ndWlkKysgKTtcblx0fVxuXHRyZXR1cm4gZWxlbS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yICk7XG5cdH0gKTtcbn1cblxuLypcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cbiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuXG4gKi9cbmpRdWVyeS5ldmVudCA9IHtcblxuXHRnbG9iYWw6IHt9LFxuXG5cdGFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHtcblxuXHRcdHZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCxcblx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0c3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuXHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdC8vIERvbid0IGF0dGFjaCBldmVudHMgdG8gbm9EYXRhIG9yIHRleHQvY29tbWVudCBub2RlcyAoYnV0IGFsbG93IHBsYWluIG9iamVjdHMpXG5cdFx0aWYgKCAhZWxlbURhdGEgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyXG5cdFx0aWYgKCBoYW5kbGVyLmhhbmRsZXIgKSB7XG5cdFx0XHRoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG5cdFx0XHRoYW5kbGVyID0gaGFuZGxlT2JqSW4uaGFuZGxlcjtcblx0XHRcdHNlbGVjdG9yID0gaGFuZGxlT2JqSW4uc2VsZWN0b3I7XG5cdFx0fVxuXG5cdFx0Ly8gRW5zdXJlIHRoYXQgaW52YWxpZCBzZWxlY3RvcnMgdGhyb3cgZXhjZXB0aW9ucyBhdCBhdHRhY2ggdGltZVxuXHRcdC8vIEV2YWx1YXRlIGFnYWluc3QgZG9jdW1lbnRFbGVtZW50IGluIGNhc2UgZWxlbSBpcyBhIG5vbi1lbGVtZW50IG5vZGUgKGUuZy4sIGRvY3VtZW50KVxuXHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGRvY3VtZW50RWxlbWVudCwgc2VsZWN0b3IgKTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0ZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG5cdFx0fVxuXHRcdGlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHtcblx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZWxlbSwgYXJndW1lbnRzICkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnNcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblxuXHRcdFx0Ly8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRoYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdG9yaWdUeXBlOiBvcmlnVHlwZSxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0aGFuZGxlcjogaGFuZGxlcixcblx0XHRcdFx0Z3VpZDogaGFuZGxlci5ndWlkLFxuXHRcdFx0XHRzZWxlY3Rvcjogc2VsZWN0b3IsXG5cdFx0XHRcdG5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksXG5cdFx0XHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApXG5cdFx0XHR9LCBoYW5kbGVPYmpJbiApO1xuXG5cdFx0XHQvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuXHRcdFx0aWYgKCAhKCBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdICkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHxcblx0XHRcdFx0XHRzcGVjaWFsLnNldHVwLmNhbGwoIGVsZW0sIGRhdGEsIG5hbWVzcGFjZXMsIGV2ZW50SGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuaGFzRGF0YSggZWxlbSApICYmIGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0aWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107XG5cdFx0XHR0eXBlID0gb3JpZ1R5cGUgPSB0bXBbIDEgXTtcblx0XHRcdG5hbWVzcGFjZXMgPSAoIHRtcFsgMiBdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdHRtcCA9IHRtcFsgMiBdICYmXG5cdFx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oIFwiXFxcXC4oPzouKlxcXFwufClcIiApICsgXCIoXFxcXC58JClcIiApO1xuXG5cdFx0XHQvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzXG5cdFx0XHRvcmlnQ291bnQgPSBqID0gaGFuZGxlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBqIF07XG5cblx0XHRcdFx0aWYgKCAoIG1hcHBlZFR5cGVzIHx8IG9yaWdUeXBlID09PSBoYW5kbGVPYmoub3JpZ1R5cGUgKSAmJlxuXHRcdFx0XHRcdCggIWhhbmRsZXIgfHwgaGFuZGxlci5ndWlkID09PSBoYW5kbGVPYmouZ3VpZCApICYmXG5cdFx0XHRcdFx0KCAhdG1wIHx8IHRtcC50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSAmJlxuXHRcdFx0XHRcdCggIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSBoYW5kbGVPYmouc2VsZWN0b3IgfHxcblx0XHRcdFx0XHRcdHNlbGVjdG9yID09PSBcIioqXCIgJiYgaGFuZGxlT2JqLnNlbGVjdG9yICkgKSB7XG5cdFx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBqLCAxICk7XG5cblx0XHRcdFx0XHRpZiAoIGhhbmRsZU9iai5zZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBzcGVjaWFsLnJlbW92ZSApIHtcblx0XHRcdFx0XHRcdHNwZWNpYWwucmVtb3ZlLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0XG5cdFx0XHQvLyAoYXZvaWRzIHBvdGVudGlhbCBmb3IgZW5kbGVzcyByZWN1cnNpb24gZHVyaW5nIHJlbW92YWwgb2Ygc3BlY2lhbCBldmVudCBoYW5kbGVycylcblx0XHRcdGlmICggb3JpZ0NvdW50ICYmICFoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRcdGlmICggIXNwZWNpYWwudGVhcmRvd24gfHxcblx0XHRcdFx0XHRzcGVjaWFsLnRlYXJkb3duLmNhbGwoIGVsZW0sIG5hbWVzcGFjZXMsIGVsZW1EYXRhLmhhbmRsZSApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgZXZlbnRzWyB0eXBlIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIGRhdGEgYW5kIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgXCJoYW5kbGUgZXZlbnRzXCIgKTtcblx0XHR9XG5cdH0sXG5cblx0ZGlzcGF0Y2g6IGZ1bmN0aW9uKCBuYXRpdmVFdmVudCApIHtcblxuXHRcdC8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdFxuXHRcdHZhciBldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIG5hdGl2ZUV2ZW50ICk7XG5cblx0XHR2YXIgaSwgaiwgcmV0LCBtYXRjaGVkLCBoYW5kbGVPYmosIGhhbmRsZXJRdWV1ZSxcblx0XHRcdGFyZ3MgPSBuZXcgQXJyYXkoIGFyZ3VtZW50cy5sZW5ndGggKSxcblx0XHRcdGhhbmRsZXJzID0gKCBkYXRhUHJpdi5nZXQoIHRoaXMsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gfHwgW10sXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGV2ZW50LnR5cGUgXSB8fCB7fTtcblxuXHRcdC8vIFVzZSB0aGUgZml4LWVkIGpRdWVyeS5FdmVudCByYXRoZXIgdGhhbiB0aGUgKHJlYWQtb25seSkgbmF0aXZlIGV2ZW50XG5cdFx0YXJnc1sgMCBdID0gZXZlbnQ7XG5cblx0XHRmb3IgKCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKyApIHtcblx0XHRcdGFyZ3NbIGkgXSA9IGFyZ3VtZW50c1sgaSBdO1xuXHRcdH1cblxuXHRcdGV2ZW50LmRlbGVnYXRlVGFyZ2V0ID0gdGhpcztcblxuXHRcdC8vIENhbGwgdGhlIHByZURpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZSwgYW5kIGxldCBpdCBiYWlsIGlmIGRlc2lyZWRcblx0XHRpZiAoIHNwZWNpYWwucHJlRGlzcGF0Y2ggJiYgc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgaGFuZGxlcnNcblx0XHRoYW5kbGVyUXVldWUgPSBqUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCggdGhpcywgZXZlbnQsIGhhbmRsZXJzICk7XG5cblx0XHQvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1c1xuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKCBtYXRjaGVkID0gaGFuZGxlclF1ZXVlWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJlxuXHRcdFx0XHQhZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0XHQvLyBUcmlnZ2VyZWQgZXZlbnQgbXVzdCBlaXRoZXIgMSkgaGF2ZSBubyBuYW1lc3BhY2UsIG9yIDIpIGhhdmUgbmFtZXNwYWNlKHMpXG5cdFx0XHRcdC8vIGEgc3Vic2V0IG9yIGVxdWFsIHRvIHRob3NlIGluIHRoZSBib3VuZCBldmVudCAoYm90aCBjYW4gaGF2ZSBubyBuYW1lc3BhY2UpLlxuXHRcdFx0XHRpZiAoICFldmVudC5ybmFtZXNwYWNlIHx8IGV2ZW50LnJuYW1lc3BhY2UudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkge1xuXG5cdFx0XHRcdFx0ZXZlbnQuaGFuZGxlT2JqID0gaGFuZGxlT2JqO1xuXHRcdFx0XHRcdGV2ZW50LmRhdGEgPSBoYW5kbGVPYmouZGF0YTtcblxuXHRcdFx0XHRcdHJldCA9ICggKCBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgaGFuZGxlT2JqLm9yaWdUeXBlIF0gfHwge30gKS5oYW5kbGUgfHxcblx0XHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyICkuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKCBldmVudC5yZXN1bHQgPSByZXQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGwgdGhlIHBvc3REaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGVcblx0XHRpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkge1xuXHRcdFx0c3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdGhhbmRsZXJzOiBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXJzICkge1xuXHRcdHZhciBpLCBtYXRjaGVzLCBzZWwsIGhhbmRsZU9iaixcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0ZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsXG5cdFx0XHRjdXIgPSBldmVudC50YXJnZXQ7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTlcblx0XHQvLyBGaW5kIGRlbGVnYXRlIGhhbmRsZXJzXG5cdFx0Ly8gQmxhY2staG9sZSBTVkcgPHVzZT4gaW5zdGFuY2UgdHJlZXMgKCMxMzE4MClcblx0XHQvL1xuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MlxuXHRcdC8vIEF2b2lkIG5vbi1sZWZ0LWNsaWNrIGluIEZGIGJ1dCBkb24ndCBibG9jayBJRSByYWRpbyBldmVudHMgKCMzODYxLCBnaC0yMzQzKVxuXHRcdGlmICggZGVsZWdhdGVDb3VudCAmJiBjdXIubm9kZVR5cGUgJiZcblx0XHRcdCggZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiIHx8IGlzTmFOKCBldmVudC5idXR0b24gKSB8fCBldmVudC5idXR0b24gPCAxICkgKSB7XG5cblx0XHRcdGZvciAoIDsgY3VyICE9PSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkge1xuXG5cdFx0XHRcdC8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KVxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgKCBjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiICkgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlcyA9IFtdO1xuXHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGkgXTtcblxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKCMxMzIwMylcblx0XHRcdFx0XHRcdHNlbCA9IGhhbmRsZU9iai5zZWxlY3RvciArIFwiIFwiO1xuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZXNbIHNlbCBdID0gaGFuZGxlT2JqLm5lZWRzQ29udGV4dCA/XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5KCBzZWwsIHRoaXMgKS5pbmRleCggY3VyICkgPiAtMSA6XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQoIHNlbCwgdGhpcywgbnVsbCwgWyBjdXIgXSApLmxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlc1sgc2VsIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZXMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggbWF0Y2hlcy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBZGQgdGhlIHJlbWFpbmluZyAoZGlyZWN0bHktYm91bmQpIGhhbmRsZXJzXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogdGhpcywgaGFuZGxlcnM6IGhhbmRsZXJzLnNsaWNlKCBkZWxlZ2F0ZUNvdW50ICkgfSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdH0sXG5cblx0YWRkUHJvcDogZnVuY3Rpb24oIG5hbWUsIGhvb2sgKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBqUXVlcnkuRXZlbnQucHJvdG90eXBlLCBuYW1lLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXG5cdFx0XHRnZXQ6IGpRdWVyeS5pc0Z1bmN0aW9uKCBob29rICkgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGhvb2soIHRoaXMub3JpZ2luYWxFdmVudCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50WyBuYW1lIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCB0aGlzLCBuYW1lLCB7XG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHRcdFx0dmFsdWU6IHZhbHVlXG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggb3JpZ2luYWxFdmVudCApIHtcblx0XHRyZXR1cm4gb3JpZ2luYWxFdmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRvcmlnaW5hbEV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTtcblx0fSxcblxuXHRzcGVjaWFsOiB7XG5cdFx0bG9hZDoge1xuXG5cdFx0XHQvLyBQcmV2ZW50IHRyaWdnZXJlZCBpbWFnZS5sb2FkIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHRvIHdpbmRvdy5sb2FkXG5cdFx0XHRub0J1YmJsZTogdHJ1ZVxuXHRcdH0sXG5cdFx0Zm9jdXM6IHtcblxuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXG5cdFx0XHQvLyBGb3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcy50eXBlID09PSBcImNoZWNrYm94XCIgJiYgdGhpcy5jbGljayAmJiBqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHRoaXMuY2xpY2soKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rc1xuXHRcdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZXZlbnQudGFyZ2V0LCBcImFcIiApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRiZWZvcmV1bmxvYWQ6IHtcblx0XHRcdHBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggMjArXG5cdFx0XHRcdC8vIEZpcmVmb3ggZG9lc24ndCBhbGVydCBpZiB0aGUgcmV0dXJuVmFsdWUgZmllbGQgaXMgbm90IHNldC5cblx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBldmVudC5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSBldmVudC5yZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBoYW5kbGUgKSB7XG5cblx0Ly8gVGhpcyBcImlmXCIgaXMgbmVlZGVkIGZvciBwbGFpbiBvYmplY3RzXG5cdGlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuXHRcdGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgaGFuZGxlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXG5cdC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZFxuXHRpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQgKSApIHtcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5FdmVudCggc3JjLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gRXZlbnQgb2JqZWN0XG5cdGlmICggc3JjICYmIHNyYy50eXBlICkge1xuXHRcdHRoaXMub3JpZ2luYWxFdmVudCA9IHNyYztcblx0XHR0aGlzLnR5cGUgPSBzcmMudHlwZTtcblxuXHRcdC8vIEV2ZW50cyBidWJibGluZyB1cCB0aGUgZG9jdW1lbnQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcHJldmVudGVkXG5cdFx0Ly8gYnkgYSBoYW5kbGVyIGxvd2VyIGRvd24gdGhlIHRyZWU7IHJlZmxlY3QgdGhlIGNvcnJlY3QgdmFsdWUuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBzcmMuZGVmYXVsdFByZXZlbnRlZCB8fFxuXHRcdFx0XHRzcmMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdW5kZWZpbmVkICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTIuMyBvbmx5XG5cdFx0XHRcdHNyYy5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0cmV0dXJuVHJ1ZSA6XG5cdFx0XHRyZXR1cm5GYWxzZTtcblxuXHRcdC8vIENyZWF0ZSB0YXJnZXQgcHJvcGVydGllc1xuXHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA8PTYgLSA3IG9ubHlcblx0XHQvLyBUYXJnZXQgc2hvdWxkIG5vdCBiZSBhIHRleHQgbm9kZSAoIzUwNCwgIzEzMTQzKVxuXHRcdHRoaXMudGFyZ2V0ID0gKCBzcmMudGFyZ2V0ICYmIHNyYy50YXJnZXQubm9kZVR5cGUgPT09IDMgKSA/XG5cdFx0XHRzcmMudGFyZ2V0LnBhcmVudE5vZGUgOlxuXHRcdFx0c3JjLnRhcmdldDtcblxuXHRcdHRoaXMuY3VycmVudFRhcmdldCA9IHNyYy5jdXJyZW50VGFyZ2V0O1xuXHRcdHRoaXMucmVsYXRlZFRhcmdldCA9IHNyYy5yZWxhdGVkVGFyZ2V0O1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwMzAzMzEvZWNtYS1zY3JpcHQtYmluZGluZy5odG1sXG5qUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LkV2ZW50LFxuXHRpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLFxuXHRpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNTaW11bGF0ZWQ6IGZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cbn07XG5cbi8vIEluY2x1ZGVzIGFsbCBjb21tb24gZXZlbnQgcHJvcHMgaW5jbHVkaW5nIEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50IHNwZWNpZmljIHByb3BzXG5qUXVlcnkuZWFjaCgge1xuXHRhbHRLZXk6IHRydWUsXG5cdGJ1YmJsZXM6IHRydWUsXG5cdGNhbmNlbGFibGU6IHRydWUsXG5cdGNoYW5nZWRUb3VjaGVzOiB0cnVlLFxuXHRjdHJsS2V5OiB0cnVlLFxuXHRkZXRhaWw6IHRydWUsXG5cdGV2ZW50UGhhc2U6IHRydWUsXG5cdG1ldGFLZXk6IHRydWUsXG5cdHBhZ2VYOiB0cnVlLFxuXHRwYWdlWTogdHJ1ZSxcblx0c2hpZnRLZXk6IHRydWUsXG5cdHZpZXc6IHRydWUsXG5cdFwiY2hhclwiOiB0cnVlLFxuXHRjaGFyQ29kZTogdHJ1ZSxcblx0a2V5OiB0cnVlLFxuXHRrZXlDb2RlOiB0cnVlLFxuXHRidXR0b246IHRydWUsXG5cdGJ1dHRvbnM6IHRydWUsXG5cdGNsaWVudFg6IHRydWUsXG5cdGNsaWVudFk6IHRydWUsXG5cdG9mZnNldFg6IHRydWUsXG5cdG9mZnNldFk6IHRydWUsXG5cdHBvaW50ZXJJZDogdHJ1ZSxcblx0cG9pbnRlclR5cGU6IHRydWUsXG5cdHNjcmVlblg6IHRydWUsXG5cdHNjcmVlblk6IHRydWUsXG5cdHRhcmdldFRvdWNoZXM6IHRydWUsXG5cdHRvRWxlbWVudDogdHJ1ZSxcblx0dG91Y2hlczogdHJ1ZSxcblxuXHR3aGljaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBidXR0b24gPSBldmVudC5idXR0b247XG5cblx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRpZiAoIGV2ZW50LndoaWNoID09IG51bGwgJiYgcmtleUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdHJldHVybiBldmVudC5jaGFyQ29kZSAhPSBudWxsID8gZXZlbnQuY2hhckNvZGUgOiBldmVudC5rZXlDb2RlO1xuXHRcdH1cblxuXHRcdC8vIEFkZCB3aGljaCBmb3IgY2xpY2s6IDEgPT09IGxlZnQ7IDIgPT09IG1pZGRsZTsgMyA9PT0gcmlnaHRcblx0XHRpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCAmJiBybW91c2VFdmVudC50ZXN0KCBldmVudC50eXBlICkgKSB7XG5cdFx0XHRyZXR1cm4gKCBidXR0b24gJiAxID8gMSA6ICggYnV0dG9uICYgMiA/IDMgOiAoIGJ1dHRvbiAmIDQgPyAyIDogMCApICkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQud2hpY2g7XG5cdH1cbn0sIGpRdWVyeS5ldmVudC5hZGRQcm9wICk7XG5cbi8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrc1xuLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS5cbi8vIERvIHRoZSBzYW1lIGZvciBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGFuZCBwb2ludGVyb3Zlci9wb2ludGVyb3V0XG4vL1xuLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seVxuLy8gU2FmYXJpIHNlbmRzIG1vdXNlZW50ZXIgdG9vIG9mdGVuOyBzZWU6XG4vLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NzAyNThcbi8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuXG5qUXVlcnkuZWFjaCgge1xuXHRtb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLFxuXHRtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsXG5cdHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLFxuXHRwb2ludGVybGVhdmU6IFwicG9pbnRlcm91dFwiXG59LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0ge1xuXHRcdGRlbGVnYXRlVHlwZTogZml4LFxuXHRcdGJpbmRUeXBlOiBmaXgsXG5cblx0XHRoYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciByZXQsXG5cdFx0XHRcdHRhcmdldCA9IHRoaXMsXG5cdFx0XHRcdHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0LFxuXHRcdFx0XHRoYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7XG5cblx0XHRcdC8vIEZvciBtb3VzZWVudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG5cdFx0XHQvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuXHRcdFx0aWYgKCAhcmVsYXRlZCB8fCAoIHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSApICkge1xuXHRcdFx0XHRldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlO1xuXHRcdFx0XHRyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBmaXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gb24oIHRoaXMsIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIDEgKTtcblx0fSxcblx0b2ZmOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBmbiApIHtcblx0XHR2YXIgaGFuZGxlT2JqLCB0eXBlO1xuXHRcdGlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkge1xuXG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID9cblx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOlxuXHRcdFx0XHRcdGhhbmRsZU9iai5vcmlnVHlwZSxcblx0XHRcdFx0aGFuZGxlT2JqLnNlbGVjdG9yLFxuXHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlclxuXHRcdFx0KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzIFssIGZuXSApXG5cdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxudmFyXG5cblx0LyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuXG5cdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZXNsaW50L2VzbGludC9pc3N1ZXMvMzIyOVxuXHRyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbYS16XVteXFwvXFwwPlxceDIwXFx0XFxyXFxuXFxmXSopW14+XSopXFwvPi9naSxcblxuXHQvKiBlc2xpbnQtZW5hYmxlICovXG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMCAtIDExLCBFZGdlIDEyIC0gMTNcblx0Ly8gSW4gSUUvRWRnZSB1c2luZyByZWdleCBncm91cHMgaGVyZSBjYXVzZXMgc2V2ZXJlIHNsb3dkb3ducy5cblx0Ly8gU2VlIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvMTczNjUxMi9cblx0cm5vSW5uZXJodG1sID0gLzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksXG5cblx0Ly8gY2hlY2tlZD1cImNoZWNrZWRcIiBvciBjaGVja2VkXG5cdHJjaGVja2VkID0gL2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxcblx0cnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO1xuXG5mdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7XG5cdGlmICggalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSApIHtcblxuXHRcdHJldHVybiBlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInRib2R5XCIgKVsgMCBdIHx8IGVsZW07XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKCBlbGVtLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSAhPT0gbnVsbCApICsgXCIvXCIgKyBlbGVtLnR5cGU7XG5cdHJldHVybiBlbGVtO1xufVxuZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcblx0dmFyIG1hdGNoID0gcnNjcmlwdFR5cGVNYXNrZWQuZXhlYyggZWxlbS50eXBlICk7XG5cblx0aWYgKCBtYXRjaCApIHtcblx0XHRlbGVtLnR5cGUgPSBtYXRjaFsgMSBdO1xuXHR9IGVsc2Uge1xuXHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBcInR5cGVcIiApO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBpLCBsLCB0eXBlLCBwZGF0YU9sZCwgcGRhdGFDdXIsIHVkYXRhT2xkLCB1ZGF0YUN1ciwgZXZlbnRzO1xuXG5cdGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLlxuXHRpZiAoIGRhdGFQcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YVByaXYuYWNjZXNzKCBzcmMgKTtcblx0XHRwZGF0YUN1ciA9IGRhdGFQcml2LnNldCggZGVzdCwgcGRhdGFPbGQgKTtcblx0XHRldmVudHMgPSBwZGF0YU9sZC5ldmVudHM7XG5cblx0XHRpZiAoIGV2ZW50cyApIHtcblx0XHRcdGRlbGV0ZSBwZGF0YUN1ci5oYW5kbGU7XG5cdFx0XHRwZGF0YUN1ci5ldmVudHMgPSB7fTtcblxuXHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIDIuIENvcHkgdXNlciBkYXRhXG5cdGlmICggZGF0YVVzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhVXNlci5hY2Nlc3MoIHNyYyApO1xuXHRcdHVkYXRhQ3VyID0galF1ZXJ5LmV4dGVuZCgge30sIHVkYXRhT2xkICk7XG5cblx0XHRkYXRhVXNlci5zZXQoIGRlc3QsIHVkYXRhQ3VyICk7XG5cdH1cbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxuZnVuY3Rpb24gZG9tTWFuaXAoIGNvbGxlY3Rpb24sIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICkge1xuXG5cdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHR2YXIgZnJhZ21lbnQsIGZpcnN0LCBzY3JpcHRzLCBoYXNTY3JpcHRzLCBub2RlLCBkb2MsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuXHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0dmFsdWUgPSBhcmdzWyAwIF0sXG5cdFx0aXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRpZiAoIGlzRnVuY3Rpb24gfHxcblx0XHRcdCggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdHJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdHZhciBzZWxmID0gY29sbGVjdGlvbi5lcSggaW5kZXggKTtcblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHR9XG5cdFx0XHRkb21NYW5pcCggc2VsZiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKTtcblx0XHR9ICk7XG5cdH1cblxuXHRpZiAoIGwgKSB7XG5cdFx0ZnJhZ21lbnQgPSBidWlsZEZyYWdtZW50KCBhcmdzLCBjb2xsZWN0aW9uWyAwIF0ub3duZXJEb2N1bWVudCwgZmFsc2UsIGNvbGxlY3Rpb24sIGlnbm9yZWQgKTtcblx0XHRmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cblx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0ZnJhZ21lbnQgPSBmaXJzdDtcblx0XHR9XG5cblx0XHQvLyBSZXF1aXJlIGVpdGhlciBuZXcgY29udGVudCBvciBhbiBpbnRlcmVzdCBpbiBpZ25vcmVkIGVsZW1lbnRzIHRvIGludm9rZSB0aGUgY2FsbGJhY2tcblx0XHRpZiAoIGZpcnN0IHx8IGlnbm9yZWQgKSB7XG5cdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRoYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7XG5cblx0XHRcdC8vIFVzZSB0aGUgb3JpZ2luYWwgZnJhZ21lbnQgZm9yIHRoZSBsYXN0IGl0ZW1cblx0XHRcdC8vIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0Ly8gYmVpbmcgZW1wdGllZCBpbmNvcnJlY3RseSBpbiBjZXJ0YWluIHNpdHVhdGlvbnMgKCM4MDcwKS5cblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdGlmICggaSAhPT0gaU5vQ2xvbmUgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGpRdWVyeS5jbG9uZSggbm9kZSwgdHJ1ZSwgdHJ1ZSApO1xuXG5cdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHNjcmlwdHMsIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y2FsbGJhY2suY2FsbCggY29sbGVjdGlvblsgaSBdLCBub2RlLCBpICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0ZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDtcblxuXHRcdFx0XHQvLyBSZWVuYWJsZSBzY3JpcHRzXG5cdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHQvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgaGFzU2NyaXB0czsgaSsrICkge1xuXHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBub2RlLnR5cGUgfHwgXCJcIiApICYmXG5cdFx0XHRcdFx0XHQhZGF0YVByaXYuYWNjZXNzKCBub2RlLCBcImdsb2JhbEV2YWxcIiApICYmXG5cdFx0XHRcdFx0XHRqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5Ll9ldmFsVXJsICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0RE9NRXZhbCggbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKCByY2xlYW5TY3JpcHQsIFwiXCIgKSwgZG9jICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNvbGxlY3Rpb247XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSggZWxlbSwgc2VsZWN0b3IsIGtlZXBEYXRhICkge1xuXHR2YXIgbm9kZSxcblx0XHRub2RlcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIGVsZW0gKSA6IGVsZW0sXG5cdFx0aSA9IDA7XG5cblx0Zm9yICggOyAoIG5vZGUgPSBub2Rlc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdGlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIG5vZGUgKSApO1xuXHRcdH1cblxuXHRcdGlmICggbm9kZS5wYXJlbnROb2RlICkge1xuXHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIG5vZGUub3duZXJEb2N1bWVudCwgbm9kZSApICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0cmV0dXJuIGh0bWwucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cdH0sXG5cblx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHR2YXIgaSwgbCwgc3JjRWxlbWVudHMsIGRlc3RFbGVtZW50cyxcblx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdGluUGFnZSA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cblx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdCFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwczovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRjbGVhbkRhdGE6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblx0XHR2YXIgZGF0YSwgZWxlbSwgdHlwZSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cdFx0XHRcdGlmICggKCBkYXRhID0gZWxlbVsgZGF0YVByaXYuZXhwYW5kbyBdICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdGZvciAoIHR5cGUgaW4gZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbFsgdHlwZSBdICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NStcblx0XHRcdFx0XHQvLyBBc3NpZ24gdW5kZWZpbmVkIGluc3RlYWQgb2YgdXNpbmcgZGVsZXRlLCBzZWUgRGF0YSNyZW1vdmVcblx0XHRcdFx0XHRlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBlbGVtWyBkYXRhVXNlci5leHBhbmRvIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0fSxcblxuXHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMubmV4dFNpYmxpbmcgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblxuXHRcdFx0XHQvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuXHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdGRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7XG5cdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoICggZSApIHt9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaWdub3JlZCA9IFtdO1xuXG5cdFx0Ly8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggbm9uLWlnbm9yZWQgY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaW5BcnJheSggdGhpcywgaWdub3JlZCApIDwgMCApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0fSwgaWdub3JlZCApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCB7XG5cdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuXHRpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG5cdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgZWxlbXMsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcblx0XHRcdGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7XG5cdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0Ly8gLmdldCgpIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0cHVzaC5hcHBseSggcmV0LCBlbGVtcy5nZXQoKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7XG5cdH07XG59ICk7XG52YXIgcm1hcmdpbiA9ICggL15tYXJnaW4vICk7XG5cbnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKD8hcHgpW2EteiVdKyRcIiwgXCJpXCIgKTtcblxudmFyIGdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5LCBGaXJlZm94IDw9MzAgKCMxNTA5OCwgIzE0MTUwKVxuXHRcdC8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwc1xuXHRcdC8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCBcImRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGVcIlxuXHRcdHZhciB2aWV3ID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG5cdFx0aWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7XG5cdFx0XHR2aWV3ID0gd2luZG93O1xuXHRcdH1cblxuXHRcdHJldHVybiB2aWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcblx0fTtcblxuXG5cbiggZnVuY3Rpb24oKSB7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkge1xuXG5cdFx0Ly8gVGhpcyBpcyBhIHNpbmdsZXRvbiwgd2UgbmVlZCB0byBleGVjdXRlIGl0IG9ubHkgb25jZVxuXHRcdGlmICggIWRpdiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkaXYuc3R5bGUuY3NzVGV4dCA9XG5cdFx0XHRcImJveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcInBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7XCIgK1xuXHRcdFx0XCJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O1wiICtcblx0XHRcdFwidG9wOjElO3dpZHRoOjUwJVwiO1xuXHRcdGRpdi5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICk7XG5cblx0XHR2YXIgZGl2U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2ICk7XG5cdFx0cGl4ZWxQb3NpdGlvblZhbCA9IGRpdlN0eWxlLnRvcCAhPT0gXCIxJVwiO1xuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seSwgRmlyZWZveCA8PTMgLSA0NFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IGRpdlN0eWxlLm1hcmdpbkxlZnQgPT09IFwiMnB4XCI7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHlcblx0XHQvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3Rcblx0XHRkaXYuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjUwJVwiO1xuXHRcdHBpeGVsTWFyZ2luUmlnaHRWYWwgPSBkaXZTdHlsZS5tYXJnaW5SaWdodCA9PT0gXCI0cHhcIjtcblxuXHRcdGRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG5cblx0XHQvLyBOdWxsaWZ5IHRoZSBkaXYgc28gaXQgd291bGRuJ3QgYmUgc3RvcmVkIGluIHRoZSBtZW1vcnkgYW5kXG5cdFx0Ly8gaXQgd2lsbCBhbHNvIGJlIGEgc2lnbiB0aGF0IGNoZWNrcyBhbHJlYWR5IHBlcmZvcm1lZFxuXHRcdGRpdiA9IG51bGw7XG5cdH1cblxuXHR2YXIgcGl4ZWxQb3NpdGlvblZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsIHBpeGVsTWFyZ2luUmlnaHRWYWwsIHJlbGlhYmxlTWFyZ2luTGVmdFZhbCxcblx0XHRjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG5cdFx0ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG5cdC8vIEZpbmlzaCBlYXJseSBpbiBsaW1pdGVkIChub24tYnJvd3NlcikgZW52aXJvbm1lbnRzXG5cdGlmICggIWRpdi5zdHlsZSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdC8vIFN0eWxlIG9mIGNsb25lZCBlbGVtZW50IGFmZmVjdHMgc291cmNlIGVsZW1lbnQgY2xvbmVkICgjODkwOClcblx0ZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJjb250ZW50LWJveFwiO1xuXHRkaXYuY2xvbmVOb2RlKCB0cnVlICkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiO1xuXHRzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSA9IGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9PT0gXCJjb250ZW50LWJveFwiO1xuXG5cdGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O1wiICtcblx0XHRcInBhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiO1xuXHRjb250YWluZXIuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXG5cdGpRdWVyeS5leHRlbmQoIHN1cHBvcnQsIHtcblx0XHRwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHR9LFxuXHRcdGJveFNpemluZ1JlbGlhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7XG5cdFx0fSxcblx0XHRwaXhlbE1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gcGl4ZWxNYXJnaW5SaWdodFZhbDtcblx0XHR9LFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHJlbGlhYmxlTWFyZ2luTGVmdFZhbDtcblx0XHR9XG5cdH0gKTtcbn0gKSgpO1xuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0Ly8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBvbmx5IG5lZWRlZCBmb3IgLmNzcygnZmlsdGVyJykgKCMxMjUzNylcblx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRyZXQgPSBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXTtcblxuXHRcdGlmICggcmV0ID09PSBcIlwiICYmICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0cmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIEFuZHJvaWQgQnJvd3NlciByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIHNvbWUgdmFsdWVzLFxuXHRcdC8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMuXG5cdFx0Ly8gVGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOlxuXHRcdC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5waXhlbE1hcmdpblJpZ2h0KCkgJiYgcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJtYXJnaW4udGVzdCggbmFtZSApICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR3aWR0aCA9IHN0eWxlLndpZHRoO1xuXHRcdFx0bWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcblx0XHRcdG1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7XG5cblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcblx0XHRcdHJldCA9IGNvbXB1dGVkLndpZHRoO1xuXG5cdFx0XHQvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzXG5cdFx0XHRzdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0c3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDtcblx0XHRcdHN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldCAhPT0gdW5kZWZpbmVkID9cblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cblx0Ly8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC5cblx0cmV0dXJuIHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBjb25kaXRpb25GbigpICkge1xuXG5cdFx0XHRcdC8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZVxuXHRcdFx0XHQvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLmdldDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi5cblx0XHRcdHJldHVybiAoIHRoaXMuZ2V0ID0gaG9va0ZuICkuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG52YXJcblxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlXG5cdC8vIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRjc3NTaG93ID0geyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImJsb2NrXCIgfSxcblx0Y3NzTm9ybWFsVHJhbnNmb3JtID0ge1xuXHRcdGxldHRlclNwYWNpbmc6IFwiMFwiLFxuXHRcdGZvbnRXZWlnaHQ6IFwiNDAwXCJcblx0fSxcblxuXHRjc3NQcmVmaXhlcyA9IFsgXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJtc1wiIF0sXG5cdGVtcHR5U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkuc3R5bGU7XG5cbi8vIFJldHVybiBhIGNzcyBwcm9wZXJ0eSBtYXBwZWQgdG8gYSBwb3RlbnRpYWxseSB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHlcbmZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cblx0Ly8gQ2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lc1xuXHR2YXIgY2FwTmFtZSA9IG5hbWVbIDAgXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSggMSApLFxuXHRcdGkgPSBjc3NQcmVmaXhlcy5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0bmFtZSA9IGNzc1ByZWZpeGVzWyBpIF0gKyBjYXBOYW1lO1xuXHRcdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdFx0cmV0dXJuIG5hbWU7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cblx0Ly8gQW55IHJlbGF0aXZlICgrLy0pIHZhbHVlcyBoYXZlIGFscmVhZHkgYmVlblxuXHQvLyBub3JtYWxpemVkIGF0IHRoaXMgcG9pbnRcblx0dmFyIG1hdGNoZXMgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblxuXHRcdC8vIEd1YXJkIGFnYWluc3QgdW5kZWZpbmVkIFwic3VidHJhY3RcIiwgZS5nLiwgd2hlbiB1c2VkIGFzIGluIGNzc0hvb2tzXG5cdFx0TWF0aC5tYXgoIDAsIG1hdGNoZXNbIDIgXSAtICggc3VidHJhY3QgfHwgMCApICkgKyAoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSA6XG5cdFx0dmFsdWU7XG59XG5cbmZ1bmN0aW9uIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSwgaXNCb3JkZXJCb3gsIHN0eWxlcyApIHtcblx0dmFyIGkgPSBleHRyYSA9PT0gKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApID9cblxuXHRcdC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmlnaHQgbWVhc3VyZW1lbnQsIGF2b2lkIGF1Z21lbnRhdGlvblxuXHRcdDQgOlxuXG5cdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG5cdFx0dmFsID0gMDtcblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cblx0XHQvLyBCb3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW4sIHNvIGFkZCBpdCBpZiB3ZSB3YW50IGl0XG5cdFx0aWYgKCBleHRyYSA9PT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGlzQm9yZGVyQm94ICkge1xuXG5cdFx0XHQvLyBib3JkZXItYm94IGluY2x1ZGVzIHBhZGRpbmcsIHNvIHJlbW92ZSBpdCBpZiB3ZSB3YW50IGNvbnRlbnRcblx0XHRcdGlmICggZXh0cmEgPT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGJvcmRlciBub3IgbWFyZ2luLCBzbyByZW1vdmUgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcIm1hcmdpblwiICkge1xuXHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcblx0dmFyIHZhbCxcblx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gdHJ1ZSxcblx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEgZGlzY29ubmVjdGVkIG5vZGVcblx0Ly8gaW4gSUUgdGhyb3dzIGFuIGVycm9yLlxuXHRpZiAoIGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7XG5cdFx0dmFsID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVsgbmFtZSBdO1xuXHR9XG5cblx0Ly8gU29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG5cdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0aWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcblxuXHRcdC8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuY29tcHV0ZWQgY3NzIGlmIG5lY2Vzc2FyeVxuXHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0aWYgKCB2YWwgPCAwIHx8IHZhbCA9PSBudWxsICkge1xuXHRcdFx0dmFsID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIENvbXB1dGVkIHVuaXQgaXMgbm90IHBpeGVscy4gU3RvcCBoZXJlIGFuZCByZXR1cm4uXG5cdFx0aWYgKCBybnVtbm9ucHgudGVzdCggdmFsICkgKSB7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBzdHlsZSBpbiBjYXNlIGEgYnJvd3NlciB3aGljaCByZXR1cm5zIHVucmVsaWFibGUgdmFsdWVzXG5cdFx0Ly8gZm9yIGdldENvbXB1dGVkU3R5bGUgc2lsZW50bHkgZmFsbHMgYmFjayB0byB0aGUgcmVsaWFibGUgZWxlbS5zdHlsZVxuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSBpc0JvcmRlckJveCAmJlxuXHRcdFx0KCBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgdmFsID09PSBlbGVtLnN0eWxlWyBuYW1lIF0gKTtcblxuXHRcdC8vIE5vcm1hbGl6ZSBcIlwiLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmFcblx0XHR2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwO1xuXHR9XG5cblx0Ly8gVXNlIHRoZSBhY3RpdmUgYm94LXNpemluZyBtb2RlbCB0byBhZGQvc3VidHJhY3QgaXJyZWxldmFudCBzdHlsZXNcblx0cmV0dXJuICggdmFsICtcblx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdGVsZW0sXG5cdFx0XHRuYW1lLFxuXHRcdFx0ZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApLFxuXHRcdFx0dmFsdWVJc0JvcmRlckJveCxcblx0XHRcdHN0eWxlc1xuXHRcdClcblx0KSArIFwicHhcIjtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdFxuXHQvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHlcblx0Y3NzSG9va3M6IHtcblx0XHRvcGFjaXR5OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHRcdC8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5XG5cdFx0XHRcdFx0dmFyIHJldCA9IGN1ckNTUyggZWxlbSwgXCJvcGFjaXR5XCIgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmV0ID09PSBcIlwiID8gXCIxXCIgOiByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgXCJweFwiIHRvIHRoZXNlIHBvc3NpYmx5LXVuaXRsZXNzIHByb3BlcnRpZXNcblx0Y3NzTnVtYmVyOiB7XG5cdFx0XCJhbmltYXRpb25JdGVyYXRpb25Db3VudFwiOiB0cnVlLFxuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHtcblx0XHRcImZsb2F0XCI6IFwiY3NzRmxvYXRcIlxuXHR9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHxcblx0XHRcdCggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTtcblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKCByZXQgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJiByZXRbIDEgXSApIHtcblx0XHRcdFx0dmFsdWUgPSBhZGp1c3RDU1MoIGVsZW0sIG5hbWUsIHJldCApO1xuXG5cdFx0XHRcdC8vIEZpeGVzIGJ1ZyAjOTIzN1xuXHRcdFx0XHR0eXBlID0gXCJudW1iZXJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbnVsbCBhbmQgTmFOIHZhbHVlcyBhcmVuJ3Qgc2V0ICgjNzExNilcblx0XHRcdGlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBudW1iZXIgd2FzIHBhc3NlZCBpbiwgYWRkIHRoZSB1bml0IChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHZhbHVlICs9IHJldCAmJiByZXRbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGJhY2tncm91bmQtKiBwcm9wcyBhZmZlY3Qgb3JpZ2luYWwgY2xvbmUncyB2YWx1ZXNcblx0XHRcdGlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSBcIlwiICYmIG5hbWUuaW5kZXhPZiggXCJiYWNrZ3JvdW5kXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IFwiaW5oZXJpdFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkLCB1c2UgdGhhdCB2YWx1ZSwgb3RoZXJ3aXNlIGp1c3Qgc2V0IHRoZSBzcGVjaWZpZWQgdmFsdWVcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fFxuXHRcdFx0XHQoIHZhbHVlID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UganVzdCBnZXQgdGhlIHZhbHVlIGZyb20gdGhlIHN0eWxlIG9iamVjdFxuXHRcdFx0cmV0dXJuIHN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXHR9LFxuXG5cdGNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7XG5cdFx0dmFyIHZhbCwgbnVtLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0bmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fFxuXHRcdFx0KCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggb3JpZ05hbWUgKSB8fCBvcmlnTmFtZSApO1xuXG5cdFx0Ly8gVHJ5IHByZWZpeGVkIG5hbWUgZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgbmFtZVxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcblx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcblx0XHRpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcblx0XHRcdHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpY1xuXHRcdGlmICggZXh0cmEgPT09IFwiXCIgfHwgZXh0cmEgKSB7XG5cdFx0XHRudW0gPSBwYXJzZUZsb2F0KCB2YWwgKTtcblx0XHRcdHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBpc0Zpbml0ZSggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcImhlaWdodFwiLCBcIndpZHRoXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0Ly8gQ2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG5cdFx0XHRcdC8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0XG5cdFx0XHRcdHJldHVybiByZGlzcGxheXN3YXAudGVzdCggalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApICYmXG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCtcblx0XHRcdFx0XHQvLyBUYWJsZSBjb2x1bW5zIGluIFNhZmFyaSBoYXZlIG5vbi16ZXJvIG9mZnNldFdpZHRoICYgemVyb1xuXHRcdFx0XHRcdC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIHVubGVzcyBkaXNwbGF5IGlzIGNoYW5nZWQuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0XHRcdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYSBkaXNjb25uZWN0ZWQgbm9kZVxuXHRcdFx0XHRcdC8vIGluIElFIHRocm93cyBhbiBlcnJvci5cblx0XHRcdFx0XHQoICFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoIHx8ICFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICkgP1xuXHRcdFx0XHRcdFx0c3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApO1xuXHRcdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHRcdGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHtcblx0XHRcdHZhciBtYXRjaGVzLFxuXHRcdFx0XHRzdHlsZXMgPSBleHRyYSAmJiBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRcdFx0c3VidHJhY3QgPSBleHRyYSAmJiBhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KTtcblxuXHRcdFx0Ly8gQ29udmVydCB0byBwaXhlbHMgaWYgdmFsdWUgYWRqdXN0bWVudCBpcyBuZWVkZWRcblx0XHRcdGlmICggc3VidHJhY3QgJiYgKCBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiZcblx0XHRcdFx0KCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgIT09IFwicHhcIiApIHtcblxuXHRcdFx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0dmFsdWUgPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICk7XG5cdFx0fVxuXHR9O1xufSApO1xuXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsXG5cdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0cmV0dXJuICggcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiApICkgfHxcblx0XHRcdFx0ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC1cblx0XHRcdFx0XHRzd2FwKCBlbGVtLCB7IG1hcmdpbkxlZnQ6IDAgfSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuXHRcdFx0XHRcdH0gKVxuXHRcdFx0XHQpICsgXCJweFwiO1xuXHRcdH1cblx0fVxuKTtcblxuLy8gVGhlc2UgaG9va3MgYXJlIHVzZWQgYnkgYW5pbWF0ZSB0byBleHBhbmQgcHJvcGVydGllc1xualF1ZXJ5LmVhY2goIHtcblx0bWFyZ2luOiBcIlwiLFxuXHRwYWRkaW5nOiBcIlwiLFxuXHRib3JkZXI6IFwiV2lkdGhcIlxufSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0ge1xuXHRcdGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRleHBhbmRlZCA9IHt9LFxuXG5cdFx0XHRcdC8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuXHRcdFx0XHRwYXJ0cyA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlLnNwbGl0KCBcIiBcIiApIDogWyB2YWx1ZSBdO1xuXG5cdFx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHRcdGV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID1cblx0XHRcdFx0XHRwYXJ0c1sgaSBdIHx8IHBhcnRzWyBpIC0gMiBdIHx8IHBhcnRzWyAwIF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBleHBhbmRlZDtcblx0XHR9XG5cdH07XG5cblx0aWYgKCAhcm1hcmdpbi50ZXN0KCBwcmVmaXggKSApIHtcblx0XHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9XG59ICk7XG5cblxuZnVuY3Rpb24gVHdlZW4oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICkge1xuXHRyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApO1xufVxualF1ZXJ5LlR3ZWVuID0gVHdlZW47XG5cblR3ZWVuLnByb3RvdHlwZSA9IHtcblx0Y29uc3RydWN0b3I6IFR3ZWVuLFxuXHRpbml0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcsIHVuaXQgKSB7XG5cdFx0dGhpcy5lbGVtID0gZWxlbTtcblx0XHR0aGlzLnByb3AgPSBwcm9wO1xuXHRcdHRoaXMuZWFzaW5nID0gZWFzaW5nIHx8IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpO1xuXHRcdHRoaXMuZW5kID0gZW5kO1xuXHRcdHRoaXMudW5pdCA9IHVuaXQgfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdH0sXG5cdGN1cjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdHJldHVybiBob29rcyAmJiBob29rcy5nZXQgP1xuXHRcdFx0aG9va3MuZ2V0KCB0aGlzICkgOlxuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApO1xuXHR9LFxuXHRydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdHZhciBlYXNlZCxcblx0XHRcdGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLmR1cmF0aW9uICkge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IGpRdWVyeS5lYXNpbmdbIHRoaXMuZWFzaW5nIF0oXG5cdFx0XHRcdHBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvblxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IHBlcmNlbnQ7XG5cdFx0fVxuXHRcdHRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBob29rcy5zZXQgKSB7XG5cdFx0XHRob29rcy5zZXQoIHRoaXMgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCggdGhpcyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufTtcblxuVHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gVHdlZW4ucHJvdG90eXBlO1xuXG5Ud2Vlbi5wcm9wSG9va3MgPSB7XG5cdF9kZWZhdWx0OiB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHR2YXIgcmVzdWx0O1xuXG5cdFx0XHQvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LFxuXHRcdFx0Ly8gb3Igd2hlbiB0aGVyZSBpcyBubyBtYXRjaGluZyBzdHlsZSBwcm9wZXJ0eSB0aGF0IGV4aXN0cy5cblx0XHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAhPT0gMSB8fFxuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJiB0d2Vlbi5lbGVtLnN0eWxlWyB0d2Vlbi5wcm9wIF0gPT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5XG5cdFx0XHQvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzLlxuXHRcdFx0Ly8gU2ltcGxlIHZhbHVlcyBzdWNoIGFzIFwiMTBweFwiIGFyZSBwYXJzZWQgdG8gRmxvYXQ7XG5cdFx0XHQvLyBjb21wbGV4IHZhbHVlcyBzdWNoIGFzIFwicm90YXRlKDFyYWQpXCIgYXJlIHJldHVybmVkIGFzLWlzLlxuXHRcdFx0cmVzdWx0ID0galF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgXCJcIiApO1xuXG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cblx0XHRcdC8vIFVzZSBzdGVwIGhvb2sgZm9yIGJhY2sgY29tcGF0LlxuXHRcdFx0Ly8gVXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlLlxuXHRcdFx0Ly8gVXNlIC5zdHlsZSBpZiBhdmFpbGFibGUgYW5kIHVzZSBwbGFpbiBwcm9wZXJ0aWVzIHdoZXJlIGF2YWlsYWJsZS5cblx0XHRcdGlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHtcblx0XHRcdFx0alF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSggdHdlZW4gKTtcblx0XHRcdH0gZWxzZSBpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0KCB0d2Vlbi5lbGVtLnN0eWxlWyBqUXVlcnkuY3NzUHJvcHNbIHR3ZWVuLnByb3AgXSBdICE9IG51bGwgfHxcblx0XHRcdFx0XHRqUXVlcnkuY3NzSG9va3NbIHR3ZWVuLnByb3AgXSApICkge1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIHR3ZWVuLm5vdyArIHR3ZWVuLnVuaXQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9LFxuXHRfZGVmYXVsdDogXCJzd2luZ1wiXG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBjb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgdGltZXJJZCxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJydW4gPSAvcXVldWVIb29rcyQvO1xuXG5mdW5jdGlvbiByYWYoKSB7XG5cdGlmICggdGltZXJJZCApIHtcblx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCByYWYgKTtcblx0XHRqUXVlcnkuZngudGljaygpO1xuXHR9XG59XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0ZnhOb3cgPSB1bmRlZmluZWQ7XG5cdH0gKTtcblx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkge1xuXHRcdHdoaWNoID0gY3NzRXhwYW5kWyBpIF07XG5cdFx0YXR0cnNbIFwibWFyZ2luXCIgKyB3aGljaCBdID0gYXR0cnNbIFwicGFkZGluZ1wiICsgd2hpY2ggXSA9IHR5cGU7XG5cdH1cblxuXHRpZiAoIGluY2x1ZGVXaWR0aCApIHtcblx0XHRhdHRycy5vcGFjaXR5ID0gYXR0cnMud2lkdGggPSB0eXBlO1xuXHR9XG5cblx0cmV0dXJuIGF0dHJzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUd2VlbiggdmFsdWUsIHByb3AsIGFuaW1hdGlvbiApIHtcblx0dmFyIHR3ZWVuLFxuXHRcdGNvbGxlY3Rpb24gPSAoIEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCBBbmltYXRpb24udHdlZW5lcnNbIFwiKlwiIF0gKSxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0aWYgKCAoIHR3ZWVuID0gY29sbGVjdGlvblsgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIHByb3AsIHZhbHVlICkgKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdHZhciBwcm9wLCB2YWx1ZSwgdG9nZ2xlLCBob29rcywgb2xkZmlyZSwgcHJvcFR3ZWVuLCByZXN0b3JlRGlzcGxheSwgZGlzcGxheSxcblx0XHRpc0JveCA9IFwid2lkdGhcIiBpbiBwcm9wcyB8fCBcImhlaWdodFwiIGluIHByb3BzLFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbldpdGhpblRyZWUoIGVsZW0gKSxcblx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIFF1ZXVlLXNraXBwaW5nIGFuaW1hdGlvbnMgaGlqYWNrIHRoZSBmeCBob29rc1xuXHRpZiAoICFvcHRzLnF1ZXVlICkge1xuXHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCBcImZ4XCIgKTtcblx0XHRpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7XG5cdFx0XHRob29rcy51bnF1ZXVlZCA9IDA7XG5cdFx0XHRvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhaG9va3MudW5xdWV1ZWQgKSB7XG5cdFx0XHRcdFx0b2xkZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRob29rcy51bnF1ZXVlZCsrO1xuXG5cdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBFbnN1cmUgdGhlIGNvbXBsZXRlIGhhbmRsZXIgaXMgY2FsbGVkIGJlZm9yZSB0aGlzIGNvbXBsZXRlc1xuXHRcdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBEZXRlY3Qgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0Zm9yICggcHJvcCBpbiBwcm9wcyApIHtcblx0XHR2YWx1ZSA9IHByb3BzWyBwcm9wIF07XG5cdFx0aWYgKCByZnh0eXBlcy50ZXN0KCB2YWx1ZSApICkge1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBwcm9wIF07XG5cdFx0XHR0b2dnbGUgPSB0b2dnbGUgfHwgdmFsdWUgPT09IFwidG9nZ2xlXCI7XG5cdFx0XHRpZiAoIHZhbHVlID09PSAoIGhpZGRlbiA/IFwiaGlkZVwiIDogXCJzaG93XCIgKSApIHtcblxuXHRcdFx0XHQvLyBQcmV0ZW5kIHRvIGJlIGhpZGRlbiBpZiB0aGlzIGlzIGEgXCJzaG93XCIgYW5kXG5cdFx0XHRcdC8vIHRoZXJlIGlzIHN0aWxsIGRhdGEgZnJvbSBhIHN0b3BwZWQgc2hvdy9oaWRlXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXG5cdFx0XHRcdC8vIElnbm9yZSBhbGwgb3RoZXIgbm8tb3Agc2hvdy9oaWRlIGRhdGFcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0b3JpZ1sgcHJvcCBdID0gZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSB8fCBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBCYWlsIG91dCBpZiB0aGlzIGlzIGEgbm8tb3AgbGlrZSAuaGlkZSgpLmhpZGUoKVxuXHRwcm9wVHdlZW4gPSAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3BzICk7XG5cdGlmICggIXByb3BUd2VlbiAmJiBqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFJlc3RyaWN0IFwib3ZlcmZsb3dcIiBhbmQgXCJkaXNwbGF5XCIgc3R5bGVzIGR1cmluZyBib3ggYW5pbWF0aW9uc1xuXHRpZiAoIGlzQm94ICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDEzXG5cdFx0Ly8gUmVjb3JkIGFsbCAzIG92ZXJmbG93IGF0dHJpYnV0ZXMgYmVjYXVzZSBJRSBkb2VzIG5vdCBpbmZlciB0aGUgc2hvcnRoYW5kXG5cdFx0Ly8gZnJvbSBpZGVudGljYWxseS12YWx1ZWQgb3ZlcmZsb3dYIGFuZCBvdmVyZmxvd1lcblx0XHRvcHRzLm92ZXJmbG93ID0gWyBzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYLCBzdHlsZS5vdmVyZmxvd1kgXTtcblxuXHRcdC8vIElkZW50aWZ5IGEgZGlzcGxheSB0eXBlLCBwcmVmZXJyaW5nIG9sZCBzaG93L2hpZGUgZGF0YSBvdmVyIHRoZSBDU1MgY2FzY2FkZVxuXHRcdHJlc3RvcmVEaXNwbGF5ID0gZGF0YVNob3cgJiYgZGF0YVNob3cuZGlzcGxheTtcblx0XHRpZiAoIHJlc3RvcmVEaXNwbGF5ID09IG51bGwgKSB7XG5cdFx0XHRyZXN0b3JlRGlzcGxheSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHR9XG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgKSB7XG5cdFx0XHRcdGRpc3BsYXkgPSByZXN0b3JlRGlzcGxheTtcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gR2V0IG5vbmVtcHR5IHZhbHVlKHMpIGJ5IHRlbXBvcmFyaWx5IGZvcmNpbmcgdmlzaWJpbGl0eVxuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTtcblx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXkgfHwgcmVzdG9yZURpc3BsYXk7XG5cdFx0XHRcdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBbmltYXRlIGlubGluZSBlbGVtZW50cyBhcyBpbmxpbmUtYmxvY2tcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwiaW5saW5lXCIgfHwgZGlzcGxheSA9PT0gXCJpbmxpbmUtYmxvY2tcIiAmJiByZXN0b3JlRGlzcGxheSAhPSBudWxsICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cblx0XHRcdFx0Ly8gUmVzdG9yZSB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZSBhdCB0aGUgZW5kIG9mIHB1cmUgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0XHRcdFx0aWYgKCAhcHJvcFR3ZWVuICkge1xuXHRcdFx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRzdHlsZS5kaXNwbGF5ID0gcmVzdG9yZURpc3BsYXk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdGRpc3BsYXkgPSBzdHlsZS5kaXNwbGF5O1xuXHRcdFx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBkaXNwbGF5ID09PSBcIm5vbmVcIiA/IFwiXCIgOiBkaXNwbGF5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdHN0eWxlLm92ZXJmbG93ID0gb3B0cy5vdmVyZmxvd1sgMCBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdO1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIEltcGxlbWVudCBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRwcm9wVHdlZW4gPSBmYWxzZTtcblx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXG5cdFx0Ly8gR2VuZXJhbCBzaG93L2hpZGUgc2V0dXAgZm9yIHRoaXMgZWxlbWVudCBhbmltYXRpb25cblx0XHRpZiAoICFwcm9wVHdlZW4gKSB7XG5cdFx0XHRpZiAoIGRhdGFTaG93ICkge1xuXHRcdFx0XHRpZiAoIFwiaGlkZGVuXCIgaW4gZGF0YVNob3cgKSB7XG5cdFx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgXCJmeHNob3dcIiwgeyBkaXNwbGF5OiByZXN0b3JlRGlzcGxheSB9ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0b3JlIGhpZGRlbi92aXNpYmxlIGZvciB0b2dnbGUgc28gYC5zdG9wKCkudG9nZ2xlKClgIFwicmV2ZXJzZXNcIlxuXHRcdFx0aWYgKCB0b2dnbGUgKSB7XG5cdFx0XHRcdGRhdGFTaG93LmhpZGRlbiA9ICFoaWRkZW47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNob3cgZWxlbWVudHMgYmVmb3JlIGFuaW1hdGluZyB0aGVtXG5cdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLWxvb3AtZnVuYyAqL1xuXG5cdFx0XHRhbmltLmRvbmUoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWxvb3AtZnVuYyAqL1xuXG5cdFx0XHRcdC8vIFRoZSBmaW5hbCBzdGVwIG9mIGEgXCJoaWRlXCIgYW5pbWF0aW9uIGlzIGFjdHVhbGx5IGhpZGluZyB0aGUgZWxlbWVudFxuXHRcdFx0XHRpZiAoICFoaWRkZW4gKSB7XG5cdFx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gUGVyLXByb3BlcnR5IHNldHVwXG5cdFx0cHJvcFR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7XG5cdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRkYXRhU2hvd1sgcHJvcCBdID0gcHJvcFR3ZWVuLnN0YXJ0O1xuXHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdHByb3BUd2Vlbi5lbmQgPSBwcm9wVHdlZW4uc3RhcnQ7XG5cdFx0XHRcdHByb3BUd2Vlbi5zdGFydCA9IDA7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuXHR2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzO1xuXG5cdC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuXHRmb3IgKCBpbmRleCBpbiBwcm9wcyApIHtcblx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggaW5kZXggKTtcblx0XHRlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG5cdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggIT09IG5hbWUgKSB7XG5cdFx0XHRwcm9wc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0fVxuXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWx1ZSA9IGhvb2tzLmV4cGFuZCggdmFsdWUgKTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXG5cdFx0XHQvLyBOb3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29uJ3Qgb3ZlcndyaXRlIGV4aXN0aW5nIGtleXMuXG5cdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkge1xuXHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIEFuaW1hdGlvbiggZWxlbSwgcHJvcGVydGllcywgb3B0aW9ucyApIHtcblx0dmFyIHJlc3VsdCxcblx0XHRzdG9wcGVkLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsXG5cdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBEb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3Jcblx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0fSApLFxuXHRcdHRpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0cmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLFxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zIG9ubHlcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdICk7XG5cblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSgge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdHByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLFxuXHRcdFx0b3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwge1xuXHRcdFx0XHRzcGVjaWFsRWFzaW5nOiB7fSxcblx0XHRcdFx0ZWFzaW5nOiBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0XG5cdFx0XHR9LCBvcHRpb25zICksXG5cdFx0XHRvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG5cdFx0XHRvcmlnaW5hbE9wdGlvbnM6IG9wdGlvbnMsXG5cdFx0XHRzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcblx0XHRcdHR3ZWVuczogW10sXG5cdFx0XHRjcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHtcblx0XHRcdFx0dmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLFxuXHRcdFx0XHRcdFx0YW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApO1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zLnB1c2goIHR3ZWVuICk7XG5cdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdH0sXG5cdFx0XHRzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHtcblx0XHRcdFx0dmFyIGluZGV4ID0gMCxcblxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggMSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzb2x2ZSB3aGVuIHdlIHBsYXllZCB0aGUgbGFzdCBmcmFtZTsgb3RoZXJ3aXNlLCByZWplY3Rcblx0XHRcdFx0aWYgKCBnb3RvRW5kICkge1xuXHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9ICksXG5cdFx0cHJvcHMgPSBhbmltYXRpb24ucHJvcHM7XG5cblx0cHJvcEZpbHRlciggcHJvcHMsIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmcgKTtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7XG5cdFx0aWYgKCByZXN1bHQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXN1bHQuc3RvcCApICkge1xuXHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIGFuaW1hdGlvbi5lbGVtLCBhbmltYXRpb24ub3B0cy5xdWV1ZSApLnN0b3AgPVxuXHRcdFx0XHRcdGpRdWVyeS5wcm94eSggcmVzdWx0LnN0b3AsIHJlc3VsdCApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cdH1cblxuXHRqUXVlcnkubWFwKCBwcm9wcywgY3JlYXRlVHdlZW4sIGFuaW1hdGlvbiApO1xuXG5cdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGFuaW1hdGlvbi5vcHRzLnN0YXJ0ICkgKSB7XG5cdFx0YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbCggZWxlbSwgYW5pbWF0aW9uICk7XG5cdH1cblxuXHRqUXVlcnkuZngudGltZXIoXG5cdFx0alF1ZXJ5LmV4dGVuZCggdGljaywge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdGFuaW06IGFuaW1hdGlvbixcblx0XHRcdHF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZVxuXHRcdH0gKVxuXHQpO1xuXG5cdC8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdHJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXJzOiB7XG5cdFx0XCIqXCI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xuXHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKTtcblx0XHRcdGFkanVzdENTUyggdHdlZW4uZWxlbSwgcHJvcCwgcmNzc051bS5leGVjKCB2YWx1ZSApLCB0d2VlbiApO1xuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH0gXVxuXHR9LFxuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5tYXRjaCggcm5vdHdoaXRlICk7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0cHJvcCA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0QW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gPSBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9LFxuXG5cdHByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLFxuXG5cdHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuXHRcdGlmICggcHJlcGVuZCApIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcblx0dmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuXHRcdGNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8XG5cdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCxcblx0XHRkdXJhdGlvbjogc3BlZWQsXG5cdFx0ZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFqUXVlcnkuaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nXG5cdH07XG5cblx0Ly8gR28gdG8gdGhlIGVuZCBzdGF0ZSBpZiBmeCBhcmUgb2ZmIG9yIGlmIGRvY3VtZW50IGlzIGhpZGRlblxuXHRpZiAoIGpRdWVyeS5meC5vZmYgfHwgZG9jdW1lbnQuaGlkZGVuICkge1xuXHRcdG9wdC5kdXJhdGlvbiA9IDA7XG5cblx0fSBlbHNlIHtcblx0XHRvcHQuZHVyYXRpb24gPSB0eXBlb2Ygb3B0LmR1cmF0aW9uID09PSBcIm51bWJlclwiID9cblx0XHRcdG9wdC5kdXJhdGlvbiA6IG9wdC5kdXJhdGlvbiBpbiBqUXVlcnkuZnguc3BlZWRzID9cblx0XHRcdFx0alF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXHR9XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZhZGVUbzogZnVuY3Rpb24oIHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjayApIHtcblxuXHRcdC8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW5XaXRoaW5UcmVlICkuY3NzKCBcIm9wYWNpdHlcIiwgMCApLnNob3coKVxuXG5cdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdC5lbmQoKS5hbmltYXRlKCB7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBPcGVyYXRlIG9uIGEgY29weSBvZiBwcm9wIHNvIHBlci1wcm9wZXJ0eSBlYXNpbmcgd29uJ3QgYmUgbG9zdFxuXHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cblx0XHRcdFx0Ly8gRW1wdHkgYW5pbWF0aW9ucywgb3IgZmluaXNoaW5nIHJlc29sdmVzIGltbWVkaWF0ZWx5XG5cdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0YW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjtcblxuXHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdHRoaXMuZWFjaCggZG9BbmltYXRpb24gKSA6XG5cdFx0XHR0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7XG5cdH0sXG5cdHN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkge1xuXHRcdHZhciBzdG9wUXVldWUgPSBmdW5jdGlvbiggaG9va3MgKSB7XG5cdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdHN0b3AoIGdvdG9FbmQgKTtcblx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0Y2xlYXJRdWV1ZSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGNsZWFyUXVldWUgJiYgdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0aW5kZXggPSB0eXBlICE9IG51bGwgJiYgdHlwZSArIFwicXVldWVIb29rc1wiLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICk7XG5cblx0XHRcdGlmICggaW5kZXggKSB7XG5cdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGluZGV4IGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJlxuXHRcdFx0XHRcdCggdHlwZSA9PSBudWxsIHx8IHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApICkge1xuXG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdGRlcXVldWUgPSBmYWxzZTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHQvLyBUaW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoXG5cdFx0XHQvLyB3aWxsIGRlcXVldWUgYnV0IG9ubHkgaWYgdGhleSB3ZXJlIGdvdG9FbmQuXG5cdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXHRmaW5pc2g6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICksXG5cdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRob29rcyA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlSG9va3NcIiBdLFxuXHRcdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuXHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cblx0XHRcdC8vIEVuYWJsZSBmaW5pc2hpbmcgZmxhZyBvbiBwcml2YXRlIGRhdGFcblx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblxuXHRcdFx0Ly8gRW1wdHkgdGhlIHF1ZXVlIGZpcnN0XG5cdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cblx0XHRcdGlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHtcblx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYW5pbWF0aW9ucyBpbiB0aGUgb2xkIHF1ZXVlIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0aWYgKCBxdWV1ZVsgaW5kZXggXSAmJiBxdWV1ZVsgaW5kZXggXS5maW5pc2ggKSB7XG5cdFx0XHRcdFx0cXVldWVbIGluZGV4IF0uZmluaXNoLmNhbGwoIHRoaXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0ZGVsZXRlIGRhdGEuZmluaXNoO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBjc3NGbiA9IGpRdWVyeS5mblsgbmFtZSBdO1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cblx0XHRcdGNzc0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSA6XG5cdFx0XHR0aGlzLmFuaW1hdGUoIGdlbkZ4KCBuYW1lLCB0cnVlICksIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKCB7XG5cdHNsaWRlRG93bjogZ2VuRngoIFwic2hvd1wiICksXG5cdHNsaWRlVXA6IGdlbkZ4KCBcImhpZGVcIiApLFxuXHRzbGlkZVRvZ2dsZTogZ2VuRngoIFwidG9nZ2xlXCIgKSxcblx0ZmFkZUluOiB7IG9wYWNpdHk6IFwic2hvd1wiIH0sXG5cdGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSxcblx0ZmFkZVRvZ2dsZTogeyBvcGFjaXR5OiBcInRvZ2dsZVwiIH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS50aW1lcnMgPSBbXTtcbmpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0aW1lcixcblx0XHRpID0gMCxcblx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzO1xuXG5cdGZ4Tm93ID0galF1ZXJ5Lm5vdygpO1xuXG5cdGZvciAoIDsgaSA8IHRpbWVycy5sZW5ndGg7IGkrKyApIHtcblx0XHR0aW1lciA9IHRpbWVyc1sgaSBdO1xuXG5cdFx0Ly8gQ2hlY2tzIHRoZSB0aW1lciBoYXMgbm90IGFscmVhZHkgYmVlbiByZW1vdmVkXG5cdFx0aWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7XG5cdFx0XHR0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoICF0aW1lcnMubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5meC5zdG9wKCk7XG5cdH1cblx0ZnhOb3cgPSB1bmRlZmluZWQ7XG59O1xuXG5qUXVlcnkuZngudGltZXIgPSBmdW5jdGlvbiggdGltZXIgKSB7XG5cdGpRdWVyeS50aW1lcnMucHVzaCggdGltZXIgKTtcblx0aWYgKCB0aW1lcigpICkge1xuXHRcdGpRdWVyeS5meC5zdGFydCgpO1xuXHR9IGVsc2Uge1xuXHRcdGpRdWVyeS50aW1lcnMucG9wKCk7XG5cdH1cbn07XG5cbmpRdWVyeS5meC5pbnRlcnZhbCA9IDEzO1xualF1ZXJ5LmZ4LnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG5cdGlmICggIXRpbWVySWQgKSB7XG5cdFx0dGltZXJJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgP1xuXHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSggcmFmICkgOlxuXHRcdFx0d2luZG93LnNldEludGVydmFsKCBqUXVlcnkuZngudGljaywgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdH1cbn07XG5cbmpRdWVyeS5meC5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdGlmICggd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lICkge1xuXHRcdHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSggdGltZXJJZCApO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGVhckludGVydmFsKCB0aW1lcklkICk7XG5cdH1cblxuXHR0aW1lcklkID0gbnVsbDtcbn07XG5cbmpRdWVyeS5meC5zcGVlZHMgPSB7XG5cdHNsb3c6IDYwMCxcblx0ZmFzdDogMjAwLFxuXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMDAzMjQwMTQ3NDcvaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5L1xualF1ZXJ5LmZuLmRlbGF5ID0gZnVuY3Rpb24oIHRpbWUsIHR5cGUgKSB7XG5cdHRpbWUgPSBqUXVlcnkuZnggPyBqUXVlcnkuZnguc3BlZWRzWyB0aW1lIF0gfHwgdGltZSA6IHRpbWU7XG5cdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSwgZnVuY3Rpb24oIG5leHQsIGhvb2tzICkge1xuXHRcdHZhciB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTtcblx0XHRob29rcy5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSApO1xufTtcblxuXG4oIGZ1bmN0aW9uKCkge1xuXHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKSxcblx0XHRzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNlbGVjdFwiICksXG5cdFx0b3B0ID0gc2VsZWN0LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm9wdGlvblwiICkgKTtcblxuXHRpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjMgb25seVxuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIE11c3QgYWNjZXNzIHNlbGVjdGVkSW5kZXggdG8gbWFrZSBkZWZhdWx0IG9wdGlvbnMgc2VsZWN0XG5cdHN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIEFuIGlucHV0IGxvc2VzIGl0cyB2YWx1ZSBhZnRlciBiZWNvbWluZyBhIHJhZGlvXG5cdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cdGlucHV0LnZhbHVlID0gXCJ0XCI7XG5cdGlucHV0LnR5cGUgPSBcInJhZGlvXCI7XG5cdHN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSBcInRcIjtcbn0gKSgpO1xuXG5cbnZhciBib29sSG9vayxcblx0YXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGU7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCB0aGlzLCBuYW1lICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBhdHRyaWJ1dGVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWRcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTtcblx0XHR9XG5cblx0XHQvLyBBdHRyaWJ1dGUgaG9va3MgYXJlIGRldGVybWluZWQgYnkgdGhlIGxvd2VyY2FzZSB2ZXJzaW9uXG5cdFx0Ly8gR3JhYiBuZWNlc3NhcnkgaG9vayBpZiBvbmUgaXMgZGVmaW5lZFxuXHRcdGlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXHRcdFx0aG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiB1bmRlZmluZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCB2YWx1ZSArIFwiXCIgKTtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cblx0XHRyZXQgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdHJldHVybiByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldDtcblx0fSxcblxuXHRhdHRySG9va3M6IHtcblx0XHR0eXBlOiB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSBcInJhZGlvXCIgJiZcblx0XHRcdFx0XHRqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgdmFsdWUgKTtcblx0XHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF0dHJOYW1lcyA9IHZhbHVlICYmIHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKTtcblxuXHRcdGlmICggYXR0ck5hbWVzICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHR3aGlsZSAoICggbmFtZSA9IGF0dHJOYW1lc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuYm9vbEhvb2sgPSB7XG5cdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkge1xuXHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcblxualF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cblx0YXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciByZXQsIGhhbmRsZSxcblx0XHRcdGxvd2VyY2FzZU5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRpZiAoICFpc1hNTCApIHtcblxuXHRcdFx0Ly8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlclxuXHRcdFx0aGFuZGxlID0gYXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdO1xuXHRcdFx0YXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gcmV0O1xuXHRcdFx0cmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgP1xuXHRcdFx0XHRsb3dlcmNhc2VOYW1lIDpcblx0XHRcdFx0bnVsbDtcblx0XHRcdGF0dHJIYW5kbGVbIGxvd2VyY2FzZU5hbWUgXSA9IGhhbmRsZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJldDtcblx0fTtcbn0gKTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBwcm9wZXJ0aWVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3Ncblx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldHVybiBlbGVtWyBuYW1lIF07XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdFx0XHQvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGVcblx0XHRcdFx0Ly8gY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0XG5cdFx0XHRcdC8vIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE0MTExNjIzMzM0Ny9odHRwOi8vZmx1aWRwcm9qZWN0Lm9yZy9ibG9nLzIwMDgvMDEvMDkvZ2V0dGluZy1zZXR0aW5nLWFuZC1yZW1vdmluZy10YWJpbmRleC12YWx1ZXMtd2l0aC1qYXZhc2NyaXB0L1xuXHRcdFx0XHQvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKVxuXHRcdFx0XHR2YXIgdGFiaW5kZXggPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInRhYmluZGV4XCIgKTtcblxuXHRcdFx0XHRyZXR1cm4gdGFiaW5kZXggP1xuXHRcdFx0XHRcdHBhcnNlSW50KCB0YWJpbmRleCwgMTAgKSA6XG5cdFx0XHRcdFx0cmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHxcblx0XHRcdFx0XHRcdHJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmIGVsZW0uaHJlZiA/XG5cdFx0XHRcdFx0XHRcdDAgOlxuXHRcdFx0XHRcdFx0XHQtMTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0cHJvcEZpeDoge1xuXHRcdFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuXHRcdFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIlxuXHR9XG59ICk7XG5cbi8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuLy8gQWNjZXNzaW5nIHRoZSBzZWxlY3RlZEluZGV4IHByb3BlcnR5XG4vLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkXG4vLyBvbiB0aGUgb3B0aW9uXG4vLyBUaGUgZ2V0dGVyIGVuc3VyZXMgYSBkZWZhdWx0IG9wdGlvbiBpcyBzZWxlY3RlZFxuLy8gd2hlbiBpbiBhbiBvcHRncm91cFxuaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHtcblx0alF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICYmIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICkge1xuXHRcdFx0XHRwYXJlbnQuc2VsZWN0ZWRJbmRleDtcblxuXHRcdFx0XHRpZiAoIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKCBbXG5cdFwidGFiSW5kZXhcIixcblx0XCJyZWFkT25seVwiLFxuXHRcIm1heExlbmd0aFwiLFxuXHRcImNlbGxTcGFjaW5nXCIsXG5cdFwiY2VsbFBhZGRpbmdcIixcblx0XCJyb3dTcGFuXCIsXG5cdFwiY29sU3BhblwiLFxuXHRcInVzZU1hcFwiLFxuXHRcImZyYW1lQm9yZGVyXCIsXG5cdFwiY29udGVudEVkaXRhYmxlXCJcbl0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xufSApO1xuXG5cblxuXG52YXIgcmNsYXNzID0gL1tcXHRcXHJcXG5cXGZdL2c7XG5cbmZ1bmN0aW9uIGdldENsYXNzKCBlbGVtICkge1xuXHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8IFwiXCI7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlICkge1xuXHRcdFx0Y2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHQoIFwiIFwiICsgY3VyVmFsdWUgKyBcIiBcIiApLnJlcGxhY2UoIHJjbGFzcywgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIGZpbmFsVmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB0aGlzLmF0dHIoIFwiY2xhc3NcIiwgXCJcIiApO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlICkge1xuXHRcdFx0Y2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cblx0XHRcdFx0Ly8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcylcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdCggXCIgXCIgKyBjdXJWYWx1ZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFJlbW92ZSAqYWxsKiBpbnN0YW5jZXNcblx0XHRcdFx0XHRcdHdoaWxlICggY3VyLmluZGV4T2YoIFwiIFwiICsgY2xhenogKyBcIiBcIiApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciA9IGN1ci5yZXBsYWNlKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIsIFwiIFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRmaW5hbFZhbHVlID0galF1ZXJ5LnRyaW0oIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0dG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7XG5cdFx0dmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cblx0XHRpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gXCJib29sZWFuXCIgJiYgdHlwZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkudG9nZ2xlQ2xhc3MoXG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggdGhpcywgaSwgZ2V0Q2xhc3MoIHRoaXMgKSwgc3RhdGVWYWwgKSxcblx0XHRcdFx0XHRzdGF0ZVZhbFxuXHRcdFx0XHQpO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNsYXNzTmFtZSwgaSwgc2VsZiwgY2xhc3NOYW1lcztcblxuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXG5cdFx0XHRcdC8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRzZWxmID0galF1ZXJ5KCB0aGlzICk7XG5cdFx0XHRcdGNsYXNzTmFtZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdFx0d2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdFx0Y2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTtcblx0XHRcdFx0aWYgKCBjbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHQvLyBTdG9yZSBjbGFzc05hbWUgaWYgc2V0XG5cdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxuXHRcdFx0XHQvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuXHRcdFx0XHQvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG5cdFx0XHRcdGlmICggdGhpcy5zZXRBdHRyaWJ1dGUgKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIixcblx0XHRcdFx0XHRcdGNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0XHRcdFx0XCJcIiA6XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiICkgfHwgXCJcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0aGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgY2xhc3NOYW1lLCBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRjbGFzc05hbWUgPSBcIiBcIiArIHNlbGVjdG9yICsgXCIgXCI7XG5cdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggXCIgXCIgKyBnZXRDbGFzcyggZWxlbSApICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiIClcblx0XHRcdFx0XHQuaW5kZXhPZiggY2xhc3NOYW1lICkgPiAtMVxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSApO1xuXG5cblxuXG52YXIgcnJldHVybiA9IC9cXHIvZyxcblx0cnNwYWNlcyA9IC9bXFx4MjBcXHRcXHJcXG5cXGZdKy9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHZhbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBob29rcywgcmV0LCBpc0Z1bmN0aW9uLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fFxuXHRcdFx0XHRcdGpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdFx0aWYgKCBob29rcyAmJlxuXHRcdFx0XHRcdFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0XHQoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgXCJ2YWx1ZVwiICkgKSAhPT0gdW5kZWZpbmVkXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXQgPSBlbGVtLnZhbHVlO1xuXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgcmV0ID09PSBcInN0cmluZ1wiID9cblxuXHRcdFx0XHRcdC8vIEhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXNcblx0XHRcdFx0XHRyZXQucmVwbGFjZSggcnJldHVybiwgXCJcIiApIDpcblxuXHRcdFx0XHRcdC8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuXHRcdFx0XHRcdHJldCA9PSBudWxsID8gXCJcIiA6IHJldDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdC8vIElmIHNldCByZXR1cm5zIHVuZGVmaW5lZCwgZmFsbCBiYWNrIHRvIG5vcm1hbCBzZXR0aW5nXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0dmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidmFsdWVcIiApO1xuXHRcdFx0XHRyZXR1cm4gdmFsICE9IG51bGwgP1xuXHRcdFx0XHRcdHZhbCA6XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTEwIC0gMTEgb25seVxuXHRcdFx0XHRcdC8vIG9wdGlvbi50ZXh0IHRocm93cyBleGNlcHRpb25zICgjMTQ2ODYsICMxNDg1OClcblx0XHRcdFx0XHQvLyBTdHJpcCBhbmQgY29sbGFwc2Ugd2hpdGVzcGFjZVxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0alF1ZXJ5LnRyaW0oIGpRdWVyeS50ZXh0KCBlbGVtICkgKS5yZXBsYWNlKCByc3BhY2VzLCBcIiBcIiApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c2VsZWN0OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgdmFsdWUsIG9wdGlvbixcblx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdGluZGV4ID0gZWxlbS5zZWxlY3RlZEluZGV4LFxuXHRcdFx0XHRcdG9uZSA9IGVsZW0udHlwZSA9PT0gXCJzZWxlY3Qtb25lXCIsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdGkgPSBpbmRleCA8IDAgP1xuXHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdFx0XHRcdFx0Ly8gSUU4LTkgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpXG5cdFx0XHRcdFx0aWYgKCAoIG9wdGlvbi5zZWxlY3RlZCB8fCBpID09PSBpbmRleCApICYmXG5cblx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0XHRcdFx0XHQhb3B0aW9uLmRpc2FibGVkICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8XG5cdFx0XHRcdFx0XHRcdFx0IWpRdWVyeS5ub2RlTmFtZSggb3B0aW9uLnBhcmVudE5vZGUsIFwib3B0Z3JvdXBcIiApICkgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb25cblx0XHRcdFx0XHRcdHZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTtcblxuXHRcdFx0XHRcdFx0Ly8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHNcblx0XHRcdFx0XHRcdGlmICggb25lICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIE11bHRpLVNlbGVjdHMgcmV0dXJuIGFuIGFycmF5XG5cdFx0XHRcdFx0XHR2YWx1ZXMucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBvcHRpb25TZXQsIG9wdGlvbixcblx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdHZhbHVlcyA9IGpRdWVyeS5tYWtlQXJyYXkoIHZhbHVlICksXG5cdFx0XHRcdFx0aSA9IG9wdGlvbnMubGVuZ3RoO1xuXG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cblx0XHRcdFx0XHRpZiAoIG9wdGlvbi5zZWxlY3RlZCA9XG5cdFx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggalF1ZXJ5LnZhbEhvb2tzLm9wdGlvbi5nZXQoIG9wdGlvbiApLCB2YWx1ZXMgKSA+IC0xXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdGlmICggIW9wdGlvblNldCApIHtcblx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG4vLyBSYWRpb3MgYW5kIGNoZWNrYm94ZXMgZ2V0dGVyL3NldHRlclxualF1ZXJ5LmVhY2goIFsgXCJyYWRpb1wiLCBcImNoZWNrYm94XCIgXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0ge1xuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdGlmICggIXN1cHBvcnQuY2hlY2tPbiApIHtcblx0XHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvblxuXG5cbnZhciByZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLztcblxualF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmV2ZW50LCB7XG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7XG5cblx0XHR2YXIgaSwgY3VyLCB0bXAsIGJ1YmJsZVR5cGUsIG9udHlwZSwgaGFuZGxlLCBzcGVjaWFsLFxuXHRcdFx0ZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sXG5cdFx0XHR0eXBlID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcInR5cGVcIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LFxuXHRcdFx0bmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgXCJuYW1lc3BhY2VcIiApID8gZXZlbnQubmFtZXNwYWNlLnNwbGl0KCBcIi5cIiApIDogW107XG5cblx0XHRjdXIgPSB0bXAgPSBlbGVtID0gZWxlbSB8fCBkb2N1bWVudDtcblxuXHRcdC8vIERvbid0IGRvIGV2ZW50cyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gZm9jdXMvYmx1ciBtb3JwaHMgdG8gZm9jdXNpbi9vdXQ7IGVuc3VyZSB3ZSdyZSBub3QgZmlyaW5nIHRoZW0gcmlnaHQgbm93XG5cdFx0aWYgKCByZm9jdXNNb3JwaC50ZXN0KCB0eXBlICsgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZS5pbmRleE9mKCBcIi5cIiApID4gLTEgKSB7XG5cblx0XHRcdC8vIE5hbWVzcGFjZWQgdHJpZ2dlcjsgY3JlYXRlIGEgcmVnZXhwIHRvIG1hdGNoIGV2ZW50IHR5cGUgaW4gaGFuZGxlKClcblx0XHRcdG5hbWVzcGFjZXMgPSB0eXBlLnNwbGl0KCBcIi5cIiApO1xuXHRcdFx0dHlwZSA9IG5hbWVzcGFjZXMuc2hpZnQoKTtcblx0XHRcdG5hbWVzcGFjZXMuc29ydCgpO1xuXHRcdH1cblx0XHRvbnR5cGUgPSB0eXBlLmluZGV4T2YoIFwiOlwiICkgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKTtcblx0XHRldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oIFwiXFxcXC4oPzouKlxcXFwufClcIiApICsgXCIoXFxcXC58JClcIiApIDpcblx0XHRcdG51bGw7XG5cblx0XHQvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWRcblx0XHRldmVudC5yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZWxlbTtcblx0XHR9XG5cblx0XHQvLyBDbG9uZSBhbnkgaW5jb21pbmcgZGF0YSBhbmQgcHJlcGVuZCB0aGUgZXZlbnQsIGNyZWF0aW5nIHRoZSBoYW5kbGVyIGFyZyBsaXN0XG5cdFx0ZGF0YSA9IGRhdGEgPT0gbnVsbCA/XG5cdFx0XHRbIGV2ZW50IF0gOlxuXHRcdFx0alF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7XG5cblx0XHQvLyBBbGxvdyBzcGVjaWFsIGV2ZW50cyB0byBkcmF3IG91dHNpZGUgdGhlIGxpbmVzXG5cdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpXG5cdFx0Ly8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNClcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRidWJibGVUeXBlID0gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgfHwgdHlwZTtcblx0XHRcdGlmICggIXJmb2N1c01vcnBoLnRlc3QoIGJ1YmJsZVR5cGUgKyB0eXBlICkgKSB7XG5cdFx0XHRcdGN1ciA9IGN1ci5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggY3VyICk7XG5cdFx0XHRcdHRtcCA9IGN1cjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT25seSBhZGQgd2luZG93IGlmIHdlIGdvdCB0byBkb2N1bWVudCAoZS5nLiwgbm90IHBsYWluIG9iaiBvciBkZXRhY2hlZCBET00pXG5cdFx0XHRpZiAoIHRtcCA9PT0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIHRtcC5kZWZhdWx0VmlldyB8fCB0bXAucGFyZW50V2luZG93IHx8IHdpbmRvdyApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZpcmUgaGFuZGxlcnMgb24gdGhlIGV2ZW50IHBhdGhcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoICggY3VyID0gZXZlbnRQYXRoWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXG5cdFx0XHRldmVudC50eXBlID0gaSA+IDEgP1xuXHRcdFx0XHRidWJibGVUeXBlIDpcblx0XHRcdFx0c3BlY2lhbC5iaW5kVHlwZSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBqUXVlcnkgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gKCBkYXRhUHJpdi5nZXQoIGN1ciwgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSAmJlxuXHRcdFx0XHRkYXRhUHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5hdGl2ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBhY2NlcHREYXRhKCBjdXIgKSApIHtcblx0XHRcdFx0ZXZlbnQucmVzdWx0ID0gaGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZXZlbnQudHlwZSA9IHR5cGU7XG5cblx0XHQvLyBJZiBub2JvZHkgcHJldmVudGVkIHRoZSBkZWZhdWx0IGFjdGlvbiwgZG8gaXQgbm93XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcblxuXHRcdFx0aWYgKCAoICFzcGVjaWFsLl9kZWZhdWx0IHx8XG5cdFx0XHRcdHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSApICYmXG5cdFx0XHRcdGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuXHRcdFx0XHQvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgdGhlIGV2ZW50LlxuXHRcdFx0XHQvLyBEb24ndCBkbyBkZWZhdWx0IGFjdGlvbnMgb24gd2luZG93LCB0aGF0J3Mgd2hlcmUgZ2xvYmFsIHZhcmlhYmxlcyBiZSAoIzYxNzApXG5cdFx0XHRcdGlmICggb250eXBlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kXG5cdFx0XHRcdFx0dG1wID0gZWxlbVsgb250eXBlIF07XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuXHRcdFx0XHRcdGVsZW1bIHR5cGUgXSgpO1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gdG1wO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0Ly8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lXG5cdC8vIFVzZWQgb25seSBmb3IgYGZvY3VzKGluIHwgb3V0KWAgZXZlbnRzXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQgKSB7XG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlXG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBlLCBudWxsLCBlbGVtICk7XG5cdH1cblxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApO1xuXHRcdH0gKTtcblx0fSxcblx0dHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBlbGVtID0gdGhpc1sgMCBdO1xuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgZWxlbSwgdHJ1ZSApO1xuXHRcdH1cblx0fVxufSApO1xuXG5cbmpRdWVyeS5lYWNoKCAoIFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgXCIgK1xuXHRcIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIFwiICtcblx0XCJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51XCIgKS5zcGxpdCggXCIgXCIgKSxcblx0ZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cblx0Ly8gSGFuZGxlIGV2ZW50IGJpbmRpbmdcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID9cblx0XHRcdHRoaXMub24oIG5hbWUsIG51bGwsIGRhdGEsIGZuICkgOlxuXHRcdFx0dGhpcy50cmlnZ2VyKCBuYW1lICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0aG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkge1xuXHRcdHJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApO1xuXHR9XG59ICk7XG5cblxuXG5cbnN1cHBvcnQuZm9jdXNpbiA9IFwib25mb2N1c2luXCIgaW4gd2luZG93O1xuXG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00NFxuLy8gRmlyZWZveCBkb2Vzbid0IGhhdmUgZm9jdXMoaW4gfCBvdXQpIGV2ZW50c1xuLy8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02ODc3ODdcbi8vXG4vLyBTdXBwb3J0OiBDaHJvbWUgPD00OCAtIDQ5LCBTYWZhcmkgPD05LjAgLSA5LjFcbi8vIGZvY3VzKGluIHwgb3V0KSBldmVudHMgZmlyZSBhZnRlciBmb2N1cyAmIGJsdXIgZXZlbnRzLFxuLy8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyXG4vLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0OTg1N1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luICkge1xuXHRqUXVlcnkuZWFjaCggeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG5cdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHR2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGpRdWVyeS5ldmVudC5zaW11bGF0ZSggZml4LCBldmVudC50YXJnZXQsIGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICkgKTtcblx0XHR9O1xuXG5cdFx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGZpeCBdID0ge1xuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICk7XG5cblx0XHRcdFx0aWYgKCAhYXR0YWNoZXMgKSB7XG5cdFx0XHRcdFx0ZG9jLmFkZEV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKSAtIDE7XG5cblx0XHRcdFx0aWYgKCAhYXR0YWNoZXMgKSB7XG5cdFx0XHRcdFx0ZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGRvYywgZml4ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSApO1xufVxudmFyIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuXG52YXIgbm9uY2UgPSBqUXVlcnkubm93KCk7XG5cbnZhciBycXVlcnkgPSAoIC9cXD8vICk7XG5cblxuXG4vLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nXG5qUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0dmFyIHhtbDtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdC8vIElFIHRocm93cyBvbiBwYXJzZUZyb21TdHJpbmcgd2l0aCBpbnZhbGlkIGlucHV0LlxuXHR0cnkge1xuXHRcdHhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLlxuXHRcdGpRdWVyeS5lYWNoKCBvYmosIGZ1bmN0aW9uKCBpLCB2ICkge1xuXHRcdFx0aWYgKCB0cmFkaXRpb25hbCB8fCByYnJhY2tldC50ZXN0KCBwcmVmaXggKSApIHtcblxuXHRcdFx0XHQvLyBUcmVhdCBlYWNoIGFycmF5IGl0ZW0gYXMgYSBzY2FsYXIuXG5cdFx0XHRcdGFkZCggcHJlZml4LCB2ICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKFxuXHRcdFx0XHRcdHByZWZpeCArIFwiW1wiICsgKCB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9IG51bGwgPyBpIDogXCJcIiApICsgXCJdXCIsXG5cdFx0XHRcdFx0dixcblx0XHRcdFx0XHR0cmFkaXRpb25hbCxcblx0XHRcdFx0XHRhZGRcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9ICk7XG5cblx0fSBlbHNlIGlmICggIXRyYWRpdGlvbmFsICYmIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS5cblx0XHRhZGQoIHByZWZpeCwgb2JqICk7XG5cdH1cbn1cblxuLy8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2Zcbi8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xualF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkge1xuXHR2YXIgcHJlZml4LFxuXHRcdHMgPSBbXSxcblx0XHRhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZU9yRnVuY3Rpb24gKSB7XG5cblx0XHRcdC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgdXNlIGl0cyByZXR1cm4gdmFsdWVcblx0XHRcdHZhciB2YWx1ZSA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZU9yRnVuY3Rpb24gKSA/XG5cdFx0XHRcdHZhbHVlT3JGdW5jdGlvbigpIDpcblx0XHRcdFx0dmFsdWVPckZ1bmN0aW9uO1xuXG5cdFx0XHRzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0fTtcblxuXHQvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG5cdFx0alF1ZXJ5LmVhY2goIGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0YWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTtcblx0XHR9ICk7XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIElmIHRyYWRpdGlvbmFsLCBlbmNvZGUgdGhlIFwib2xkXCIgd2F5ICh0aGUgd2F5IDEuMy4yIG9yIG9sZGVyXG5cdFx0Ly8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuXG5cdFx0Zm9yICggcHJlZml4IGluIGEgKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgcmVzdWx0aW5nIHNlcmlhbGl6YXRpb25cblx0cmV0dXJuIHMuam9pbiggXCImXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0c2VyaWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTtcblx0fSxcblx0c2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIENhbiBhZGQgcHJvcEhvb2sgZm9yIFwiZWxlbWVudHNcIiB0byBmaWx0ZXIgb3IgYWRkIGZvcm0gZWxlbWVudHNcblx0XHRcdHZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCBcImVsZW1lbnRzXCIgKTtcblx0XHRcdHJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzO1xuXHRcdH0gKVxuXHRcdC5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9IClcblx0XHQubWFwKCBmdW5jdGlvbiggaSwgZWxlbSApIHtcblx0XHRcdHZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTtcblxuXHRcdFx0cmV0dXJuIHZhbCA9PSBudWxsID9cblx0XHRcdFx0bnVsbCA6XG5cdFx0XHRcdGpRdWVyeS5pc0FycmF5KCB2YWwgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9ICkuZ2V0KCk7XG5cdH1cbn0gKTtcblxuXG52YXJcblx0cjIwID0gLyUyMC9nLFxuXHRyaGFzaCA9IC8jLiokLyxcblx0cnRzID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cblx0Ly8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uXG5cdHJsb2NhbFByb3RvY29sID0gL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sXG5cdHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuXHRycHJvdG9jb2wgPSAvXlxcL1xcLy8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBBbmNob3IgdGFnIGZvciBwYXJzaW5nIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0b3JpZ2luQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblx0b3JpZ2luQW5jaG9yLmhyZWYgPSBsb2NhdGlvbi5ocmVmO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkge1xuXG5cdFx0XHQvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG5cdFx0XHR3aGlsZSAoICggZGF0YVR5cGUgPSBkYXRhVHlwZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0Ly8gUHJlcGVuZCBpZiByZXF1ZXN0ZWRcblx0XHRcdFx0aWYgKCBkYXRhVHlwZVsgMCBdID09PSBcIitcIiApIHtcblx0XHRcdFx0XHRkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgXCIqXCI7XG5cdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkucHVzaCggZnVuYyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG4vLyBCYXNlIGluc3BlY3Rpb24gZnVuY3Rpb24gZm9yIHByZWZpbHRlcnMgYW5kIHRyYW5zcG9ydHNcbmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7XG5cblx0dmFyIGluc3BlY3RlZCA9IHt9LFxuXHRcdHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXG5cdGZ1bmN0aW9uIGluc3BlY3QoIGRhdGFUeXBlICkge1xuXHRcdHZhciBzZWxlY3RlZDtcblx0XHRpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlO1xuXHRcdGpRdWVyeS5lYWNoKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10sIGZ1bmN0aW9uKCBfLCBwcmVmaWx0ZXJPckZhY3RvcnkgKSB7XG5cdFx0XHR2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApO1xuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVPclRyYW5zcG9ydCA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQhc2Vla2luZ1RyYW5zcG9ydCAmJiAhaW5zcGVjdGVkWyBkYXRhVHlwZU9yVHJhbnNwb3J0IF0gKSB7XG5cblx0XHRcdFx0b3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRpbnNwZWN0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7XG5cdFx0XHRcdHJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdFx0cmV0dXJuIHNlbGVjdGVkO1xuXHR9XG5cblx0cmV0dXJuIGluc3BlY3QoIG9wdGlvbnMuZGF0YVR5cGVzWyAwIF0gKSB8fCAhaW5zcGVjdGVkWyBcIipcIiBdICYmIGluc3BlY3QoIFwiKlwiICk7XG59XG5cbi8vIEEgc3BlY2lhbCBleHRlbmQgZm9yIGFqYXggb3B0aW9uc1xuLy8gdGhhdCB0YWtlcyBcImZsYXRcIiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZClcbi8vIEZpeGVzICM5ODg3XG5mdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHtcblx0dmFyIGtleSwgZGVlcCxcblx0XHRmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307XG5cblx0Zm9yICgga2V5IGluIHNyYyApIHtcblx0XHRpZiAoIHNyY1sga2V5IF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdCggZmxhdE9wdGlvbnNbIGtleSBdID8gdGFyZ2V0IDogKCBkZWVwIHx8ICggZGVlcCA9IHt9ICkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07XG5cdFx0fVxuXHR9XG5cdGlmICggZGVlcCApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcblx0fVxuXG5cdHJldHVybiB0YXJnZXQ7XG59XG5cbi8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcbiAqIC0gZmluZHMgdGhlIHJpZ2h0IGRhdGFUeXBlIChtZWRpYXRlcyBiZXR3ZWVuIGNvbnRlbnQtdHlwZSBhbmQgZXhwZWN0ZWQgZGF0YVR5cGUpXG4gKiAtIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApIHtcblxuXHR2YXIgY3QsIHR5cGUsIGZpbmFsRGF0YVR5cGUsIGZpcnN0RGF0YVR5cGUsXG5cdFx0Y29udGVudHMgPSBzLmNvbnRlbnRzLFxuXHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzO1xuXG5cdC8vIFJlbW92ZSBhdXRvIGRhdGFUeXBlIGFuZCBnZXQgY29udGVudC10eXBlIGluIHRoZSBwcm9jZXNzXG5cdHdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09IFwiKlwiICkge1xuXHRcdGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcdGlmICggY3QgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJDb250ZW50LVR5cGVcIiApO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuXHRcdGZvciAoIHR5cGUgaW4gcmVzcG9uc2VzICkge1xuXHRcdFx0aWYgKCAhZGF0YVR5cGVzWyAwIF0gfHwgcy5jb252ZXJ0ZXJzWyB0eXBlICsgXCIgXCIgKyBkYXRhVHlwZXNbIDAgXSBdICkge1xuXHRcdFx0XHRmaW5hbERhdGFUeXBlID0gdHlwZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICFmaXJzdERhdGFUeXBlICkge1xuXHRcdFx0XHRmaXJzdERhdGFUeXBlID0gdHlwZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblxuXHRcdC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpO1xuXG5cdC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuXHRpZiAoIGRhdGFUeXBlc1sgMSBdICkge1xuXHRcdGZvciAoIGNvbnYgaW4gcy5jb252ZXJ0ZXJzICkge1xuXHRcdFx0Y29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcblx0XHR9XG5cdH1cblxuXHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0Ly8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcblx0d2hpbGUgKCBjdXJyZW50ICkge1xuXG5cdFx0aWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG5cdFx0XHRqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSB0aGUgZGF0YUZpbHRlciBpZiBwcm92aWRlZFxuXHRcdGlmICggIXByZXYgJiYgaXNTdWNjZXNzICYmIHMuZGF0YUZpbHRlciApIHtcblx0XHRcdHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuXHRcdH1cblxuXHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuXHRcdGlmICggY3VycmVudCApIHtcblxuXHRcdFx0Ly8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0b1xuXHRcdFx0aWYgKCBjdXJyZW50ID09PSBcIipcIiApIHtcblxuXHRcdFx0XHRjdXJyZW50ID0gcHJldjtcblxuXHRcdFx0Ly8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudFxuXHRcdFx0fSBlbHNlIGlmICggcHJldiAhPT0gXCIqXCIgJiYgcHJldiAhPT0gY3VycmVudCApIHtcblxuXHRcdFx0XHQvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlclxuXHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbIFwiKiBcIiArIGN1cnJlbnQgXTtcblxuXHRcdFx0XHQvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpclxuXHRcdFx0XHRpZiAoICFjb252ICkge1xuXHRcdFx0XHRcdGZvciAoIGNvbnYyIGluIGNvbnZlcnRlcnMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudFxuXHRcdFx0XHRcdFx0dG1wID0gY29udjIuc3BsaXQoIFwiIFwiICk7XG5cdFx0XHRcdFx0XHRpZiAoIHRtcFsgMSBdID09PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dFxuXHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgdG1wWyAwIF0gXSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnZlcnRlcnNbIFwiKiBcIiArIHRtcFsgMCBdIF07XG5cdFx0XHRcdFx0XHRcdGlmICggY29udiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgcy50aHJvd3MgKSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdHN0YXRlOiBcInBhcnNlcmVycm9yXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzXG5cdGFjdGl2ZTogMCxcblxuXHQvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0XG5cdGxhc3RNb2RpZmllZDoge30sXG5cdGV0YWc6IHt9LFxuXG5cdGFqYXhTZXR0aW5nczoge1xuXHRcdHVybDogbG9jYXRpb24uaHJlZixcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGxvY2F0aW9uLnByb3RvY29sICksXG5cdFx0Z2xvYmFsOiB0cnVlLFxuXHRcdHByb2Nlc3NEYXRhOiB0cnVlLFxuXHRcdGFzeW5jOiB0cnVlLFxuXHRcdGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLFxuXG5cdFx0Lypcblx0XHR0aW1lb3V0OiAwLFxuXHRcdGRhdGE6IG51bGwsXG5cdFx0ZGF0YVR5cGU6IG51bGwsXG5cdFx0dXNlcm5hbWU6IG51bGwsXG5cdFx0cGFzc3dvcmQ6IG51bGwsXG5cdFx0Y2FjaGU6IG51bGwsXG5cdFx0dGhyb3dzOiBmYWxzZSxcblx0XHR0cmFkaXRpb25hbDogZmFsc2UsXG5cdFx0aGVhZGVyczoge30sXG5cdFx0Ki9cblxuXHRcdGFjY2VwdHM6IHtcblx0XHRcdFwiKlwiOiBhbGxUeXBlcyxcblx0XHRcdHRleHQ6IFwidGV4dC9wbGFpblwiLFxuXHRcdFx0aHRtbDogXCJ0ZXh0L2h0bWxcIixcblx0XHRcdHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG5cdFx0XHRqc29uOiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiXG5cdFx0fSxcblxuXHRcdGNvbnRlbnRzOiB7XG5cdFx0XHR4bWw6IC9cXGJ4bWxcXGIvLFxuXHRcdFx0aHRtbDogL1xcYmh0bWwvLFxuXHRcdFx0anNvbjogL1xcYmpzb25cXGIvXG5cdFx0fSxcblxuXHRcdHJlc3BvbnNlRmllbGRzOiB7XG5cdFx0XHR4bWw6IFwicmVzcG9uc2VYTUxcIixcblx0XHRcdHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG5cdFx0XHRqc29uOiBcInJlc3BvbnNlSlNPTlwiXG5cdFx0fSxcblxuXHRcdC8vIERhdGEgY29udmVydGVyc1xuXHRcdC8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCBcIipcIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2Vcblx0XHRjb252ZXJ0ZXJzOiB7XG5cblx0XHRcdC8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dFxuXHRcdFx0XCIqIHRleHRcIjogU3RyaW5nLFxuXG5cdFx0XHQvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbilcblx0XHRcdFwidGV4dCBodG1sXCI6IHRydWUsXG5cblx0XHRcdC8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb25cblx0XHRcdFwidGV4dCBqc29uXCI6IEpTT04ucGFyc2UsXG5cblx0XHRcdC8vIFBhcnNlIHRleHQgYXMgeG1sXG5cdFx0XHRcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuXHRcdH0sXG5cblx0XHQvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuXHRcdC8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWZcblx0XHQvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZVxuXHRcdC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuXHRcdGZsYXRPcHRpb25zOiB7XG5cdFx0XHR1cmw6IHRydWUsXG5cdFx0XHRjb250ZXh0OiB0cnVlXG5cdFx0fVxuXHR9LFxuXG5cdC8vIENyZWF0ZXMgYSBmdWxsIGZsZWRnZWQgc2V0dGluZ3Mgb2JqZWN0IGludG8gdGFyZ2V0XG5cdC8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy5cblx0Ly8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cblx0YWpheFNldHVwOiBmdW5jdGlvbiggdGFyZ2V0LCBzZXR0aW5ncyApIHtcblx0XHRyZXR1cm4gc2V0dGluZ3MgP1xuXG5cdFx0XHQvLyBCdWlsZGluZyBhIHNldHRpbmdzIG9iamVjdFxuXHRcdFx0YWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOlxuXG5cdFx0XHQvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzXG5cdFx0XHRhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTtcblx0fSxcblxuXHRhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSxcblx0YWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cblx0Ly8gTWFpbiBtZXRob2Rcblx0YWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblxuXHRcdC8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlXG5cdFx0aWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0b3B0aW9ucyA9IHVybDtcblx0XHRcdHVybCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdFx0dmFyIHRyYW5zcG9ydCxcblxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cblx0XHRcdC8vIFJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyxcblx0XHRcdHJlc3BvbnNlSGVhZGVycyxcblxuXHRcdFx0Ly8gdGltZW91dCBoYW5kbGVcblx0XHRcdHRpbWVvdXRUaW1lcixcblxuXHRcdFx0Ly8gVXJsIGNsZWFudXAgdmFyXG5cdFx0XHR1cmxBbmNob3IsXG5cblx0XHRcdC8vIFJlcXVlc3Qgc3RhdGUgKGJlY29tZXMgZmFsc2UgdXBvbiBzZW5kIGFuZCB0cnVlIHVwb24gY29tcGxldGlvbilcblx0XHRcdGNvbXBsZXRlZCxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkXG5cdFx0XHRmaXJlR2xvYmFscyxcblxuXHRcdFx0Ly8gTG9vcCB2YXJpYWJsZVxuXHRcdFx0aSxcblxuXHRcdFx0Ly8gdW5jYWNoZWQgcGFydCBvZiB0aGUgdXJsXG5cdFx0XHR1bmNhY2hlZCxcblxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cblx0XHRcdC8vIENhbGxiYWNrcyBjb250ZXh0XG5cdFx0XHRjYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcyxcblxuXHRcdFx0Ly8gQ29udGV4dCBmb3IgZ2xvYmFsIGV2ZW50cyBpcyBjYWxsYmFja0NvbnRleHQgaWYgaXQgaXMgYSBET00gbm9kZSBvciBqUXVlcnkgY29sbGVjdGlvblxuXHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0ID0gcy5jb250ZXh0ICYmXG5cdFx0XHRcdCggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LFxuXG5cdFx0XHQvLyBEZWZlcnJlZHNcblx0XHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkID0galF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRzdGF0dXNDb2RlID0gcy5zdGF0dXNDb2RlIHx8IHt9LFxuXG5cdFx0XHQvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKVxuXHRcdFx0cmVxdWVzdEhlYWRlcnMgPSB7fSxcblx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXMgPSB7fSxcblxuXHRcdFx0Ly8gRGVmYXVsdCBhYm9ydCBtZXNzYWdlXG5cdFx0XHRzdHJBYm9ydCA9IFwiY2FuY2VsZWRcIixcblxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhcmVzcG9uc2VIZWFkZXJzICkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAoIG1hdGNoID0gcmhlYWRlcnMuZXhlYyggcmVzcG9uc2VIZWFkZXJzU3RyaW5nICkgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSBdID0gbWF0Y2hbIDIgXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0bWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBtYXRjaCA9PSBudWxsID8gbnVsbCA6IG1hdGNoO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFJhdyBzdHJpbmdcblx0XHRcdFx0Z2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29tcGxldGVkID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdG5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSA9XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXNbIG5hbWUudG9Mb3dlckNhc2UoKSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRzLm1pbWVUeXBlID0gdHlwZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdFx0c3RhdHVzQ29kZTogZnVuY3Rpb24oIG1hcCApIHtcblx0XHRcdFx0XHR2YXIgY29kZTtcblx0XHRcdFx0XHRpZiAoIG1hcCApIHtcblx0XHRcdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrc1xuXHRcdFx0XHRcdFx0XHRqcVhIUi5hbHdheXMoIG1hcFsganFYSFIuc3RhdHVzIF0gKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFja3MgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXNcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdHVzQ29kZVsgY29kZSBdID0gWyBzdGF0dXNDb2RlWyBjb2RlIF0sIG1hcFsgY29kZSBdIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSByZXF1ZXN0XG5cdFx0XHRcdGFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHR2YXIgZmluYWxUZXh0ID0gc3RhdHVzVGV4dCB8fCBzdHJBYm9ydDtcblx0XHRcdFx0XHRpZiAoIHRyYW5zcG9ydCApIHtcblx0XHRcdFx0XHRcdHRyYW5zcG9ydC5hYm9ydCggZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRvbmUoIDAsIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0Ly8gQXR0YWNoIGRlZmVycmVkc1xuXHRcdGRlZmVycmVkLnByb21pc2UoIGpxWEhSICk7XG5cblx0XHQvLyBBZGQgcHJvdG9jb2wgaWYgbm90IHByb3ZpZGVkIChwcmVmaWx0ZXJzIG1pZ2h0IGV4cGVjdCBpdClcblx0XHQvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKVxuXHRcdC8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZVxuXHRcdHMudXJsID0gKCAoIHVybCB8fCBzLnVybCB8fCBsb2NhdGlvbi5ocmVmICkgKyBcIlwiIClcblx0XHRcdC5yZXBsYWNlKCBycHJvdG9jb2wsIGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICk7XG5cblx0XHQvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDRcblx0XHRzLnR5cGUgPSBvcHRpb25zLm1ldGhvZCB8fCBvcHRpb25zLnR5cGUgfHwgcy5tZXRob2QgfHwgcy50eXBlO1xuXG5cdFx0Ly8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdFxuXHRcdHMuZGF0YVR5cGVzID0gKCBzLmRhdGFUeXBlIHx8IFwiKlwiICkudG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyBcIlwiIF07XG5cblx0XHQvLyBBIGNyb3NzLWRvbWFpbiByZXF1ZXN0IGlzIGluIG9yZGVyIHdoZW4gdGhlIG9yaWdpbiBkb2Vzbid0IG1hdGNoIHRoZSBjdXJyZW50IG9yaWdpbi5cblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHVybEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OCAtIDExLCBFZGdlIDEyIC0gMTNcblx0XHRcdC8vIElFIHRocm93cyBleGNlcHRpb24gb24gYWNjZXNzaW5nIHRoZSBocmVmIHByb3BlcnR5IGlmIHVybCBpcyBtYWxmb3JtZWQsXG5cdFx0XHQvLyBlLmcuIGh0dHA6Ly9leGFtcGxlLmNvbTo4MHgvXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHMudXJsO1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OCAtIDExIG9ubHlcblx0XHRcdFx0Ly8gQW5jaG9yJ3MgaG9zdCBwcm9wZXJ0eSBpc24ndCBjb3JyZWN0bHkgc2V0IHdoZW4gcy51cmwgaXMgcmVsYXRpdmVcblx0XHRcdFx0dXJsQW5jaG9yLmhyZWYgPSB1cmxBbmNob3IuaHJlZjtcblx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IG9yaWdpbkFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIG9yaWdpbkFuY2hvci5ob3N0ICE9PVxuXHRcdFx0XHRcdHVybEFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIHVybEFuY2hvci5ob3N0O1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYW4gZXJyb3IgcGFyc2luZyB0aGUgVVJMLCBhc3N1bWUgaXQgaXMgY3Jvc3NEb21haW4sXG5cdFx0XHRcdC8vIGl0IGNhbiBiZSByZWplY3RlZCBieSB0aGUgdHJhbnNwb3J0IGlmIGl0IGlzIGludmFsaWRcblx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBkYXRhIGlmIG5vdCBhbHJlYWR5IGEgc3RyaW5nXG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJiB0eXBlb2Ygcy5kYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cy5kYXRhID0galF1ZXJ5LnBhcmFtKCBzLmRhdGEsIHMudHJhZGl0aW9uYWwgKTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSBwcmVmaWx0ZXJzXG5cdFx0aW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhIHByZWZpbHRlciwgc3RvcCB0aGVyZVxuXHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdH1cblxuXHRcdC8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvXG5cdFx0Ly8gRG9uJ3QgZmlyZSBldmVudHMgaWYgalF1ZXJ5LmV2ZW50IGlzIHVuZGVmaW5lZCBpbiBhbiBBTUQtdXNhZ2Ugc2NlbmFyaW8gKCMxNTExOClcblx0XHRmaXJlR2xvYmFscyA9IGpRdWVyeS5ldmVudCAmJiBzLmdsb2JhbDtcblxuXHRcdC8vIFdhdGNoIGZvciBhIG5ldyBzZXQgb2YgcmVxdWVzdHNcblx0XHRpZiAoIGZpcmVHbG9iYWxzICYmIGpRdWVyeS5hY3RpdmUrKyA9PT0gMCApIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBcImFqYXhTdGFydFwiICk7XG5cdFx0fVxuXG5cdFx0Ly8gVXBwZXJjYXNlIHRoZSB0eXBlXG5cdFx0cy50eXBlID0gcy50eXBlLnRvVXBwZXJDYXNlKCk7XG5cblx0XHQvLyBEZXRlcm1pbmUgaWYgcmVxdWVzdCBoYXMgY29udGVudFxuXHRcdHMuaGFzQ29udGVudCA9ICFybm9Db250ZW50LnRlc3QoIHMudHlwZSApO1xuXG5cdFx0Ly8gU2F2ZSB0aGUgVVJMIGluIGNhc2Ugd2UncmUgdG95aW5nIHdpdGggdGhlIElmLU1vZGlmaWVkLVNpbmNlXG5cdFx0Ly8gYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyIGxhdGVyIG9uXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggdG8gc2ltcGxpZnkgdXJsIG1hbmlwdWxhdGlvblxuXHRcdGNhY2hlVVJMID0gcy51cmwucmVwbGFjZSggcmhhc2gsIFwiXCIgKTtcblxuXHRcdC8vIE1vcmUgb3B0aW9ucyBoYW5kbGluZyBmb3IgcmVxdWVzdHMgd2l0aCBubyBjb250ZW50XG5cdFx0aWYgKCAhcy5oYXNDb250ZW50ICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgaGFzaCBzbyB3ZSBjYW4gcHV0IGl0IGJhY2tcblx0XHRcdHVuY2FjaGVkID0gcy51cmwuc2xpY2UoIGNhY2hlVVJMLmxlbmd0aCApO1xuXG5cdFx0XHQvLyBJZiBkYXRhIGlzIGF2YWlsYWJsZSwgYXBwZW5kIGRhdGEgdG8gdXJsXG5cdFx0XHRpZiAoIHMuZGF0YSApIHtcblx0XHRcdFx0Y2FjaGVVUkwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YTtcblxuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVuY2FjaGVkIHVybCBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdGNhY2hlVVJMID0gY2FjaGVVUkwucmVwbGFjZSggcnRzLCBcIlwiICk7XG5cdFx0XHRcdHVuY2FjaGVkID0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIFwiXz1cIiArICggbm9uY2UrKyApICsgdW5jYWNoZWQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFB1dCBoYXNoIGFuZCBhbnRpLWNhY2hlIG9uIHRoZSBVUkwgdGhhdCB3aWxsIGJlIHJlcXVlc3RlZCAoZ2gtMTczMilcblx0XHRcdHMudXJsID0gY2FjaGVVUkwgKyB1bmNhY2hlZDtcblxuXHRcdC8vIENoYW5nZSAnJTIwJyB0byAnKycgaWYgdGhpcyBpcyBlbmNvZGVkIGZvcm0gYm9keSBjb250ZW50IChnaC0yNjU4KVxuXHRcdH0gZWxzZSBpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmXG5cdFx0XHQoIHMuY29udGVudFR5cGUgfHwgXCJcIiApLmluZGV4T2YoIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgKSA9PT0gMCApIHtcblx0XHRcdHMuZGF0YSA9IHMuZGF0YS5yZXBsYWNlKCByMjAsIFwiK1wiICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdGlmICggalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Nb2RpZmllZC1TaW5jZVwiLCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU5vbmUtTWF0Y2hcIiwgalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIGNvcnJlY3QgaGVhZGVyLCBpZiBkYXRhIGlzIGJlaW5nIHNlbnRcblx0XHRpZiAoIHMuZGF0YSAmJiBzLmhhc0NvbnRlbnQgJiYgcy5jb250ZW50VHlwZSAhPT0gZmFsc2UgfHwgb3B0aW9ucy5jb250ZW50VHlwZSApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIsIHMuY29udGVudFR5cGUgKTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIEFjY2VwdHMgaGVhZGVyIGZvciB0aGUgc2VydmVyLCBkZXBlbmRpbmcgb24gdGhlIGRhdGFUeXBlXG5cdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlcihcblx0XHRcdFwiQWNjZXB0XCIsXG5cdFx0XHRzLmRhdGFUeXBlc1sgMCBdICYmIHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdID9cblx0XHRcdFx0cy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gK1xuXHRcdFx0XHRcdCggcy5kYXRhVHlwZXNbIDAgXSAhPT0gXCIqXCIgPyBcIiwgXCIgKyBhbGxUeXBlcyArIFwiOyBxPTAuMDFcIiA6IFwiXCIgKSA6XG5cdFx0XHRcdHMuYWNjZXB0c1sgXCIqXCIgXVxuXHRcdCk7XG5cblx0XHQvLyBDaGVjayBmb3IgaGVhZGVycyBvcHRpb25cblx0XHRmb3IgKCBpIGluIHMuaGVhZGVycyApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIGksIHMuaGVhZGVyc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsb3cgY3VzdG9tIGhlYWRlcnMvbWltZXR5cGVzIGFuZCBlYXJseSBhYm9ydFxuXHRcdGlmICggcy5iZWZvcmVTZW5kICYmXG5cdFx0XHQoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IGNvbXBsZXRlZCApICkge1xuXG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Y29tcGxldGVEZWZlcnJlZC5hZGQoIHMuY29tcGxldGUgKTtcblx0XHRqcVhIUi5kb25lKCBzLnN1Y2Nlc3MgKTtcblx0XHRqcVhIUi5mYWlsKCBzLmVycm9yICk7XG5cblx0XHQvLyBHZXQgdHJhbnNwb3J0XG5cdFx0dHJhbnNwb3J0ID0gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiBubyB0cmFuc3BvcnQsIHdlIGF1dG8tYWJvcnRcblx0XHRpZiAoICF0cmFuc3BvcnQgKSB7XG5cdFx0XHRkb25lKCAtMSwgXCJObyBUcmFuc3BvcnRcIiApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gMTtcblxuXHRcdFx0Ly8gU2VuZCBnbG9iYWwgZXZlbnRcblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhTZW5kXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhamF4U2VuZCwgc3RvcCB0aGVyZVxuXHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdHJldHVybiBqcVhIUjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVGltZW91dFxuXHRcdFx0aWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7XG5cdFx0XHRcdHRpbWVvdXRUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRqcVhIUi5hYm9ydCggXCJ0aW1lb3V0XCIgKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0XHR0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdC8vIFJldGhyb3cgcG9zdC1jb21wbGV0aW9uIGV4Y2VwdGlvbnNcblx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFByb3BhZ2F0ZSBvdGhlcnMgYXMgcmVzdWx0c1xuXHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGxiYWNrIGZvciB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZVxuXHRcdGZ1bmN0aW9uIGRvbmUoIHN0YXR1cywgbmF0aXZlU3RhdHVzVGV4dCwgcmVzcG9uc2VzLCBoZWFkZXJzICkge1xuXHRcdFx0dmFyIGlzU3VjY2Vzcywgc3VjY2VzcywgZXJyb3IsIHJlc3BvbnNlLCBtb2RpZmllZCxcblx0XHRcdFx0c3RhdHVzVGV4dCA9IG5hdGl2ZVN0YXR1c1RleHQ7XG5cblx0XHRcdC8vIElnbm9yZSByZXBlYXQgaW52b2NhdGlvbnNcblx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbXBsZXRlZCA9IHRydWU7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dFRpbWVyICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlcmVmZXJlbmNlIHRyYW5zcG9ydCBmb3IgZWFybHkgZ2FyYmFnZSBjb2xsZWN0aW9uXG5cdFx0XHQvLyAobm8gbWF0dGVyIGhvdyBsb25nIHRoZSBqcVhIUiBvYmplY3Qgd2lsbCBiZSB1c2VkKVxuXHRcdFx0dHJhbnNwb3J0ID0gdW5kZWZpbmVkO1xuXG5cdFx0XHQvLyBDYWNoZSByZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcgPSBoZWFkZXJzIHx8IFwiXCI7XG5cblx0XHRcdC8vIFNldCByZWFkeVN0YXRlXG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gc3RhdHVzID4gMCA/IDQgOiAwO1xuXG5cdFx0XHQvLyBEZXRlcm1pbmUgaWYgc3VjY2Vzc2Z1bFxuXHRcdFx0aXNTdWNjZXNzID0gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cblx0XHRcdC8vIEdldCByZXNwb25zZSBkYXRhXG5cdFx0XHRpZiAoIHJlc3BvbnNlcyApIHtcblx0XHRcdFx0cmVzcG9uc2UgPSBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgbm8gbWF0dGVyIHdoYXQgKHRoYXQgd2F5IHJlc3BvbnNlWFhYIGZpZWxkcyBhcmUgYWx3YXlzIHNldClcblx0XHRcdHJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7XG5cblx0XHRcdC8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblxuXHRcdFx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcIkxhc3QtTW9kaWZpZWRcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiZXRhZ1wiICk7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgbm8gY29udGVudFxuXHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gXCJIRUFEXCIgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm9jb250ZW50XCI7XG5cblx0XHRcdFx0Ly8gaWYgbm90IG1vZGlmaWVkXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMzA0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vdG1vZGlmaWVkXCI7XG5cblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBkYXRhLCBsZXQncyBjb252ZXJ0IGl0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlO1xuXHRcdFx0XHRcdHN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdGVycm9yID0gcmVzcG9uc2UuZXJyb3I7XG5cdFx0XHRcdFx0aXNTdWNjZXNzID0gIWVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0IGFuZCBub3JtYWxpemUgZm9yIG5vbi1hYm9ydHNcblx0XHRcdFx0ZXJyb3IgPSBzdGF0dXNUZXh0O1xuXHRcdFx0XHRpZiAoIHN0YXR1cyB8fCAhc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJlcnJvclwiO1xuXHRcdFx0XHRcdGlmICggc3RhdHVzIDwgMCApIHtcblx0XHRcdFx0XHRcdHN0YXR1cyA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0XG5cdFx0XHRqcVhIUi5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0XHRqcVhIUi5zdGF0dXNUZXh0ID0gKCBuYXRpdmVTdGF0dXNUZXh0IHx8IHN0YXR1c1RleHQgKSArIFwiXCI7XG5cblx0XHRcdC8vIFN1Y2Nlc3MvRXJyb3Jcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCwgZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0anFYSFIuc3RhdHVzQ29kZSggc3RhdHVzQ29kZSApO1xuXHRcdFx0c3RhdHVzQ29kZSA9IHVuZGVmaW5lZDtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsXG5cdFx0XHRcdFx0WyBqcVhIUiwgcywgaXNTdWNjZXNzID8gc3VjY2VzcyA6IGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29tcGxldGVcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhDb21wbGV0ZVwiLCBbIGpxWEhSLCBzIF0gKTtcblxuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggXCJhamF4U3RvcFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ganFYSFI7XG5cdH0sXG5cblx0Z2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssIFwianNvblwiICk7XG5cdH0sXG5cblx0Z2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCB1bmRlZmluZWQsIGNhbGxiYWNrLCBcInNjcmlwdFwiICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXG5cdFx0Ly8gU2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWRcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcblx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpXG5cdFx0cmV0dXJuIGpRdWVyeS5hamF4KCBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7XG5cdH07XG59ICk7XG5cblxualF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHtcblx0cmV0dXJuIGpRdWVyeS5hamF4KCB7XG5cdFx0dXJsOiB1cmwsXG5cblx0XHQvLyBNYWtlIHRoaXMgZXhwbGljaXQsIHNpbmNlIHVzZXIgY2FuIG92ZXJyaWRlIHRoaXMgdGhyb3VnaCBhamF4U2V0dXAgKCMxMTI2NClcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdGNhY2hlOiB0cnVlLFxuXHRcdGFzeW5jOiBmYWxzZSxcblx0XHRnbG9iYWw6IGZhbHNlLFxuXHRcdFwidGhyb3dzXCI6IHRydWVcblx0fSApO1xufTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRcdGh0bWwgPSBodG1sLmNhbGwoIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUaGUgZWxlbWVudHMgdG8gd3JhcCB0aGUgdGFyZ2V0IGFyb3VuZFxuXHRcdFx0d3JhcCA9IGpRdWVyeSggaHRtbCwgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgKS5lcSggMCApLmNsb25lKCB0cnVlICk7XG5cblx0XHRcdGlmICggdGhpc1sgMCBdLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHdyYXAuaW5zZXJ0QmVmb3JlKCB0aGlzWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0d3JhcC5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cblx0XHRcdFx0d2hpbGUgKCBlbGVtLmZpcnN0RWxlbWVudENoaWxkICkge1xuXHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9ICkuYXBwZW5kKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0d3JhcElubmVyOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdHdyYXA6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaXNGdW5jdGlvbiA/IGh0bWwuY2FsbCggdGhpcywgaSApIDogaHRtbCApO1xuXHRcdH0gKTtcblx0fSxcblxuXHR1bndyYXA6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR0aGlzLnBhcmVudCggc2VsZWN0b3IgKS5ub3QoIFwiYm9keVwiICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7XG5cdFx0fSApO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59ICk7XG5cblxualF1ZXJ5LmV4cHIucHNldWRvcy5oaWRkZW4gPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuICFqUXVlcnkuZXhwci5wc2V1ZG9zLnZpc2libGUoIGVsZW0gKTtcbn07XG5qUXVlcnkuZXhwci5wc2V1ZG9zLnZpc2libGUgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuICEhKCBlbGVtLm9mZnNldFdpZHRoIHx8IGVsZW0ub2Zmc2V0SGVpZ2h0IHx8IGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKTtcbn07XG5cblxuXG5cbmpRdWVyeS5hamF4U2V0dGluZ3MueGhyID0gZnVuY3Rpb24oKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTtcblx0fSBjYXRjaCAoIGUgKSB7fVxufTtcblxudmFyIHhoclN1Y2Nlc3NTdGF0dXMgPSB7XG5cblx0XHQvLyBGaWxlIHByb3RvY29sIGFsd2F5cyB5aWVsZHMgc3RhdHVzIGNvZGUgMCwgYXNzdW1lIDIwMFxuXHRcdDA6IDIwMCxcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0MTIyMzogMjA0XG5cdH0sXG5cdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cbnN1cHBvcnQuY29ycyA9ICEheGhyU3VwcG9ydGVkICYmICggXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB4aHJTdXBwb3J0ZWQgKTtcbnN1cHBvcnQuYWpheCA9IHhoclN1cHBvcnRlZCA9ICEheGhyU3VwcG9ydGVkO1xuXG5qUXVlcnkuYWpheFRyYW5zcG9ydCggZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdHZhciBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaztcblxuXHQvLyBDcm9zcyBkb21haW4gb25seSBhbGxvd2VkIGlmIHN1cHBvcnRlZCB0aHJvdWdoIFhNTEh0dHBSZXF1ZXN0XG5cdGlmICggc3VwcG9ydC5jb3JzIHx8IHhoclN1cHBvcnRlZCAmJiAhb3B0aW9ucy5jcm9zc0RvbWFpbiApIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIGhlYWRlcnMsIGNvbXBsZXRlICkge1xuXHRcdFx0XHR2YXIgaSxcblx0XHRcdFx0XHR4aHIgPSBvcHRpb25zLnhocigpO1xuXG5cdFx0XHRcdHhoci5vcGVuKFxuXHRcdFx0XHRcdG9wdGlvbnMudHlwZSxcblx0XHRcdFx0XHRvcHRpb25zLnVybCxcblx0XHRcdFx0XHRvcHRpb25zLmFzeW5jLFxuXHRcdFx0XHRcdG9wdGlvbnMudXNlcm5hbWUsXG5cdFx0XHRcdFx0b3B0aW9ucy5wYXNzd29yZFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIEFwcGx5IGN1c3RvbSBmaWVsZHMgaWYgcHJvdmlkZWRcblx0XHRcdFx0aWYgKCBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRmb3IgKCBpIGluIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdFx0eGhyWyBpIF0gPSBvcHRpb25zLnhockZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlIG1pbWUgdHlwZSBpZiBuZWVkZWRcblx0XHRcdFx0aWYgKCBvcHRpb25zLm1pbWVUeXBlICYmIHhoci5vdmVycmlkZU1pbWVUeXBlICkge1xuXHRcdFx0XHRcdHhoci5vdmVycmlkZU1pbWVUeXBlKCBvcHRpb25zLm1pbWVUeXBlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBYLVJlcXVlc3RlZC1XaXRoIGhlYWRlclxuXHRcdFx0XHQvLyBGb3IgY3Jvc3MtZG9tYWluIHJlcXVlc3RzLCBzZWVpbmcgYXMgY29uZGl0aW9ucyBmb3IgYSBwcmVmbGlnaHQgYXJlXG5cdFx0XHRcdC8vIGFraW4gdG8gYSBqaWdzYXcgcHV6emxlLCB3ZSBzaW1wbHkgbmV2ZXIgc2V0IGl0IHRvIGJlIHN1cmUuXG5cdFx0XHRcdC8vIChpdCBjYW4gYWx3YXlzIGJlIHNldCBvbiBhIHBlci1yZXF1ZXN0IGJhc2lzIG9yIGV2ZW4gdXNpbmcgYWpheFNldHVwKVxuXHRcdFx0XHQvLyBGb3Igc2FtZS1kb21haW4gcmVxdWVzdHMsIHdvbid0IGNoYW5nZSBoZWFkZXIgaWYgYWxyZWFkeSBwcm92aWRlZC5cblx0XHRcdFx0aWYgKCAhb3B0aW9ucy5jcm9zc0RvbWFpbiAmJiAhaGVhZGVyc1sgXCJYLVJlcXVlc3RlZC1XaXRoXCIgXSApIHtcblx0XHRcdFx0XHRoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrID0geGhyLm9ubG9hZCA9XG5cdFx0XHRcdFx0XHRcdFx0eGhyLm9uZXJyb3IgPSB4aHIub25hYm9ydCA9IHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIE9uIGEgbWFudWFsIG5hdGl2ZSBhYm9ydCwgSUU5IHRocm93c1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVycm9ycyBvbiBhbnkgcHJvcGVydHkgYWNjZXNzIHRoYXQgaXMgbm90IHJlYWR5U3RhdGVcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGVvZiB4aHIuc3RhdHVzICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIDAsIFwiZXJyb3JcIiApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0LFxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSUU5IGhhcyBubyBYSFIyIGJ1dCB0aHJvd3Mgb24gYmluYXJ5ICh0cmFjLTExNDI2KVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yIFhIUjIgbm9uLXRleHQsIGxldCB0aGUgY2FsbGVyIGhhbmRsZSBpdCAoZ2gtMjQ5OClcblx0XHRcdFx0XHRcdFx0XHRcdCggeGhyLnJlc3BvbnNlVHlwZSB8fCBcInRleHRcIiApICE9PSBcInRleHRcIiAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ICE9PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0eyBiaW5hcnk6IHhoci5yZXNwb25zZSB9IDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0eyB0ZXh0OiB4aHIucmVzcG9uc2VUZXh0IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gdG8gZXZlbnRzXG5cdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHRlcnJvckNhbGxiYWNrID0geGhyLm9uZXJyb3IgPSBjYWxsYmFjayggXCJlcnJvclwiICk7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgOSBvbmx5XG5cdFx0XHRcdC8vIFVzZSBvbnJlYWR5c3RhdGVjaGFuZ2UgdG8gcmVwbGFjZSBvbmFib3J0XG5cdFx0XHRcdC8vIHRvIGhhbmRsZSB1bmNhdWdodCBhYm9ydHNcblx0XHRcdFx0aWYgKCB4aHIub25hYm9ydCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHhoci5vbmFib3J0ID0gZXJyb3JDYWxsYmFjaztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdC8vIENoZWNrIHJlYWR5U3RhdGUgYmVmb3JlIHRpbWVvdXQgYXMgaXQgY2hhbmdlc1xuXHRcdFx0XHRcdFx0aWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gNCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBbGxvdyBvbmVycm9yIHRvIGJlIGNhbGxlZCBmaXJzdCxcblx0XHRcdFx0XHRcdFx0Ly8gYnV0IHRoYXQgd2lsbCBub3QgaGFuZGxlIGEgbmF0aXZlIGFib3J0XG5cdFx0XHRcdFx0XHRcdC8vIEFsc28sIHNhdmUgZXJyb3JDYWxsYmFjayB0byBhIHZhcmlhYmxlXG5cdFx0XHRcdFx0XHRcdC8vIGFzIHhoci5vbmVycm9yIGNhbm5vdCBiZSBhY2Nlc3NlZFxuXHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGVycm9yQ2FsbGJhY2soKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ3JlYXRlIHRoZSBhYm9ydCBjYWxsYmFja1xuXHRcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrKCBcImFib3J0XCIgKTtcblxuXHRcdFx0XHR0cnkge1xuXG5cdFx0XHRcdFx0Ly8gRG8gc2VuZCB0aGUgcmVxdWVzdCAodGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uKVxuXHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0XHQvLyAjMTQ2ODM6IE9ubHkgcmV0aHJvdyBpZiB0aGlzIGhhc24ndCBiZWVuIG5vdGlmaWVkIGFzIGFuIGVycm9yIHlldFxuXHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIFByZXZlbnQgYXV0by1leGVjdXRpb24gb2Ygc2NyaXB0cyB3aGVuIG5vIGV4cGxpY2l0IGRhdGFUeXBlIHdhcyBwcm92aWRlZCAoU2VlIGdoLTI0MzIpXG5qUXVlcnkuYWpheFByZWZpbHRlciggZnVuY3Rpb24oIHMgKSB7XG5cdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHRzLmNvbnRlbnRzLnNjcmlwdCA9IGZhbHNlO1xuXHR9XG59ICk7XG5cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG5qUXVlcnkuYWpheFNldHVwKCB7XG5cdGFjY2VwdHM6IHtcblx0XHRzY3JpcHQ6IFwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBcIiArXG5cdFx0XHRcImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdH0sXG5cdGNvbnRlbnRzOiB7XG5cdFx0c2NyaXB0OiAvXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi9cblx0fSxcblx0Y29udmVydGVyczoge1xuXHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIEhhbmRsZSBjYWNoZSdzIHNwZWNpYWwgY2FzZSBhbmQgY3Jvc3NEb21haW5cbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0aWYgKCBzLmNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0cy5jYWNoZSA9IGZhbHNlO1xuXHR9XG5cdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHRzLnR5cGUgPSBcIkdFVFwiO1xuXHR9XG59ICk7XG5cbi8vIEJpbmQgc2NyaXB0IHRhZyBoYWNrIHRyYW5zcG9ydFxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXG5cdC8vIFRoaXMgdHJhbnNwb3J0IG9ubHkgZGVhbHMgd2l0aCBjcm9zcyBkb21haW4gcmVxdWVzdHNcblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHZhciBzY3JpcHQsIGNhbGxiYWNrO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggXywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHNjcmlwdCA9IGpRdWVyeSggXCI8c2NyaXB0PlwiICkucHJvcCgge1xuXHRcdFx0XHRcdGNoYXJzZXQ6IHMuc2NyaXB0Q2hhcnNldCxcblx0XHRcdFx0XHRzcmM6IHMudXJsXG5cdFx0XHRcdH0gKS5vbihcblx0XHRcdFx0XHRcImxvYWQgZXJyb3JcIixcblx0XHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayA9IG51bGw7XG5cdFx0XHRcdFx0XHRpZiAoIGV2dCApIHtcblx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIGV2dC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDAsIGV2dC50eXBlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeVxuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHRbIDAgXSApO1xuXHRcdFx0fSxcblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0anNvbnA6IFwiY2FsbGJhY2tcIixcblx0anNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNhbGxiYWNrID0gb2xkQ2FsbGJhY2tzLnBvcCgpIHx8ICggalF1ZXJ5LmV4cGFuZG8gKyBcIl9cIiArICggbm9uY2UrKyApICk7XG5cdFx0dGhpc1sgY2FsbGJhY2sgXSA9IHRydWU7XG5cdFx0cmV0dXJuIGNhbGxiYWNrO1xuXHR9XG59ICk7XG5cbi8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0c1xualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwianNvbiBqc29ucFwiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7XG5cblx0dmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLFxuXHRcdGpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/XG5cdFx0XHRcInVybFwiIDpcblx0XHRcdHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKVxuXHRcdFx0XHRcdC5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgJiZcblx0XHRcdFx0cmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbIFwic2NyaXB0IGpzb25cIiBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHtcblx0XHRcdFx0alF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyBcIiB3YXMgbm90IGNhbGxlZFwiICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTtcblx0XHR9O1xuXG5cdFx0Ly8gRm9yY2UganNvbiBkYXRhVHlwZVxuXHRcdHMuZGF0YVR5cGVzWyAwIF0gPSBcImpzb25cIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tcblx0XHRvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07XG5cdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7XG5cdFx0fTtcblxuXHRcdC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuXHRcdGpxWEhSLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIElmIHByZXZpb3VzIHZhbHVlIGRpZG4ndCBleGlzdCAtIHJlbW92ZSBpdFxuXHRcdFx0aWYgKCBvdmVyd3JpdHRlbiA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRqUXVlcnkoIHdpbmRvdyApLnJlbW92ZVByb3AoIGNhbGxiYWNrTmFtZSApO1xuXG5cdFx0XHQvLyBPdGhlcndpc2UgcmVzdG9yZSBwcmVleGlzdGluZyB2YWx1ZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IG92ZXJ3cml0dGVuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTYXZlIGJhY2sgYXMgZnJlZVxuXHRcdFx0aWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIFNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSApO1xuXG5cdFx0Ly8gRGVsZWdhdGUgdG8gc2NyaXB0XG5cdFx0cmV0dXJuIFwic2NyaXB0XCI7XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gU3VwcG9ydDogU2FmYXJpIDggb25seVxuLy8gSW4gU2FmYXJpIDggZG9jdW1lbnRzIGNyZWF0ZWQgdmlhIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudFxuLy8gY29sbGFwc2Ugc2libGluZyBmb3JtczogdGhlIHNlY29uZCBvbmUgYmVjb21lcyBhIGNoaWxkIG9mIHRoZSBmaXJzdCBvbmUuXG4vLyBCZWNhdXNlIG9mIHRoYXQsIHRoaXMgc2VjdXJpdHkgbWVhc3VyZSBoYXMgdG8gYmUgZGlzYWJsZWQgaW4gU2FmYXJpIDguXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM3MzM3XG5zdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCA9ICggZnVuY3Rpb24oKSB7XG5cdHZhciBib2R5ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCBcIlwiICkuYm9keTtcblx0Ym9keS5pbm5lckhUTUwgPSBcIjxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+XCI7XG5cdHJldHVybiBib2R5LmNoaWxkTm9kZXMubGVuZ3RoID09PSAyO1xufSApKCk7XG5cblxuLy8gQXJndW1lbnQgXCJkYXRhXCIgc2hvdWxkIGJlIHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsXG4vLyBkZWZhdWx0cyB0byBkb2N1bWVudFxuLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZ1xualF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcblx0aWYgKCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0a2VlcFNjcmlwdHMgPSBjb250ZXh0O1xuXHRcdGNvbnRleHQgPSBmYWxzZTtcblx0fVxuXG5cdHZhciBiYXNlLCBwYXJzZWQsIHNjcmlwdHM7XG5cblx0aWYgKCAhY29udGV4dCApIHtcblxuXHRcdC8vIFN0b3Agc2NyaXB0cyBvciBpbmxpbmUgZXZlbnQgaGFuZGxlcnMgZnJvbSBiZWluZyBleGVjdXRlZCBpbW1lZGlhdGVseVxuXHRcdC8vIGJ5IHVzaW5nIGRvY3VtZW50LmltcGxlbWVudGF0aW9uXG5cdFx0aWYgKCBzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCApIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIFwiXCIgKTtcblxuXHRcdFx0Ly8gU2V0IHRoZSBiYXNlIGhyZWYgZm9yIHRoZSBjcmVhdGVkIGRvY3VtZW50XG5cdFx0XHQvLyBzbyBhbnkgcGFyc2VkIGVsZW1lbnRzIHdpdGggVVJMc1xuXHRcdFx0Ly8gYXJlIGJhc2VkIG9uIHRoZSBkb2N1bWVudCdzIFVSTCAoZ2gtMjk2NSlcblx0XHRcdGJhc2UgPSBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIFwiYmFzZVwiICk7XG5cdFx0XHRiYXNlLmhyZWYgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmO1xuXHRcdFx0Y29udGV4dC5oZWFkLmFwcGVuZENoaWxkKCBiYXNlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnRleHQgPSBkb2N1bWVudDtcblx0XHR9XG5cdH1cblxuXHRwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKTtcblx0c2NyaXB0cyA9ICFrZWVwU2NyaXB0cyAmJiBbXTtcblxuXHQvLyBTaW5nbGUgdGFnXG5cdGlmICggcGFyc2VkICkge1xuXHRcdHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWyAxIF0gKSBdO1xuXHR9XG5cblx0cGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLyoqXG4gKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG4gKi9cbmpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZiggXCIgXCIgKTtcblxuXHRpZiAoIG9mZiA+IC0xICkge1xuXHRcdHNlbGVjdG9yID0galF1ZXJ5LnRyaW0oIHVybC5zbGljZSggb2ZmICkgKTtcblx0XHR1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuXHR9XG5cblx0Ly8gSWYgaXQncyBhIGZ1bmN0aW9uXG5cdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHBhcmFtcyApICkge1xuXG5cdFx0Ly8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcblx0XHRjYWxsYmFjayA9IHBhcmFtcztcblx0XHRwYXJhbXMgPSB1bmRlZmluZWQ7XG5cblx0Ly8gT3RoZXJ3aXNlLCBidWlsZCBhIHBhcmFtIHN0cmluZ1xuXHR9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHR0eXBlID0gXCJQT1NUXCI7XG5cdH1cblxuXHQvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuXHRpZiAoIHNlbGYubGVuZ3RoID4gMCApIHtcblx0XHRqUXVlcnkuYWpheCgge1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIElmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWQuXG5cdFx0XHQvLyBNYWtlIHZhbHVlIG9mIHRoaXMgZmllbGQgZXhwbGljaXQgc2luY2Vcblx0XHRcdC8vIHVzZXIgY2FuIG92ZXJyaWRlIGl0IHRocm91Z2ggYWpheFNldHVwIG1ldGhvZFxuXHRcdFx0dHlwZTogdHlwZSB8fCBcIkdFVFwiLFxuXHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxuXHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0fSApLmRvbmUoIGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KCBcIjxkaXY+XCIgKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHRcblx0XHRcdFx0cmVzcG9uc2VUZXh0ICk7XG5cblx0XHQvLyBJZiB0aGUgcmVxdWVzdCBzdWNjZWVkcywgdGhpcyBmdW5jdGlvbiBnZXRzIFwiZGF0YVwiLCBcInN0YXR1c1wiLCBcImpxWEhSXCJcblx0XHQvLyBidXQgdGhleSBhcmUgaWdub3JlZCBiZWNhdXNlIHJlc3BvbnNlIHdhcyBzZXQgYWJvdmUuXG5cdFx0Ly8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImpxWEhSXCIsIFwic3RhdHVzXCIsIFwiZXJyb3JcIlxuXHRcdH0gKS5hbHdheXMoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcblx0XHRcdH0gKTtcblx0XHR9ICk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblxuXG5cbi8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzXG5qUXVlcnkuZWFjaCggW1xuXHRcImFqYXhTdGFydFwiLFxuXHRcImFqYXhTdG9wXCIsXG5cdFwiYWpheENvbXBsZXRlXCIsXG5cdFwiYWpheEVycm9yXCIsXG5cdFwiYWpheFN1Y2Nlc3NcIixcblx0XCJhamF4U2VuZFwiXG5dLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59ICk7XG5cblxuXG5cbmpRdWVyeS5leHByLnBzZXVkb3MuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5ncmVwKCBqUXVlcnkudGltZXJzLCBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG5cdH0gKS5sZW5ndGg7XG59O1xuXG5cblxuXG4vKipcbiAqIEdldHMgYSB3aW5kb3cgZnJvbSBhbiBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGdldFdpbmRvdyggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0Vmlldztcbn1cblxualF1ZXJ5Lm9mZnNldCA9IHtcblx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHR2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLFxuXHRcdFx0cG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdHByb3BzID0ge307XG5cblx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0fVxuXG5cdFx0Y3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTtcblx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0Y3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwibGVmdFwiICk7XG5cdFx0Y2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApICYmXG5cdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKCBcImF1dG9cIiApID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXG5cdFx0XHQvLyBVc2UgalF1ZXJ5LmV4dGVuZCBoZXJlIHRvIGFsbG93IG1vZGlmaWNhdGlvbiBvZiBjb29yZGluYXRlcyBhcmd1bWVudCAoZ2gtMTg0OClcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGpRdWVyeS5leHRlbmQoIHt9LCBjdXJPZmZzZXQgKSApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0aW9ucy50b3AgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7XG5cdFx0fVxuXHRcdGlmICggb3B0aW9ucy5sZWZ0ICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDtcblx0XHR9XG5cblx0XHRpZiAoIFwidXNpbmdcIiBpbiBvcHRpb25zICkge1xuXHRcdFx0b3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1ckVsZW0uY3NzKCBwcm9wcyApO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRvZmZzZXQ6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdFx0Ly8gUHJlc2VydmUgY2hhaW5pbmcgZm9yIHNldHRlclxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiBvcHRpb25zID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHR0aGlzIDpcblx0XHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0dmFyIGRvY0VsZW0sIHdpbiwgcmVjdCwgZG9jLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdFx0Ly8gUnVubmluZyBnZXRCb3VuZGluZ0NsaWVudFJlY3Qgb24gYVxuXHRcdC8vIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvclxuXHRcdGlmICggIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XHR9XG5cblx0XHRyZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSBlbGVtZW50IGlzIG5vdCBoaWRkZW4gKGRpc3BsYXk6IG5vbmUpXG5cdFx0aWYgKCByZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0ICkge1xuXHRcdFx0ZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuXHRcdFx0d2luID0gZ2V0V2luZG93KCBkb2MgKTtcblx0XHRcdGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG5cdFx0XHRcdGxlZnQ6IHJlY3QubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gemVyb3MgZm9yIGRpc2Nvbm5lY3RlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChnaC0yMzEwKVxuXHRcdHJldHVybiByZWN0O1xuXHR9LFxuXG5cdHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICF0aGlzWyAwIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIG9mZnNldFBhcmVudCwgb2Zmc2V0LFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cblx0XHQvLyBGaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gd2luZG93IChwYXJlbnRPZmZzZXQgPSB7dG9wOjAsIGxlZnQ6IDB9LFxuXHRcdC8vIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblxuXHRcdFx0Ly8gQXNzdW1lIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyB0aGVyZSB3aGVuIGNvbXB1dGVkIHBvc2l0aW9uIGlzIGZpeGVkXG5cdFx0XHRvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnRcblx0XHRcdG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50KCk7XG5cblx0XHRcdC8vIEdldCBjb3JyZWN0IG9mZnNldHNcblx0XHRcdG9mZnNldCA9IHRoaXMub2Zmc2V0KCk7XG5cdFx0XHRpZiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudFsgMCBdLCBcImh0bWxcIiApICkge1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVyc1xuXHRcdFx0cGFyZW50T2Zmc2V0ID0ge1xuXHRcdFx0XHR0b3A6IHBhcmVudE9mZnNldC50b3AgKyBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJib3JkZXJUb3BXaWR0aFwiLCB0cnVlICksXG5cdFx0XHRcdGxlZnQ6IHBhcmVudE9mZnNldC5sZWZ0ICsgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyTGVmdFdpZHRoXCIsIHRydWUgKVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogb2Zmc2V0LnRvcCAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpblRvcFwiLCB0cnVlICksXG5cdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIsIHRydWUgKVxuXHRcdH07XG5cdH0sXG5cblx0Ly8gVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gZG9jdW1lbnRFbGVtZW50IGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG5cdC8vIDEpIEZvciB0aGUgZWxlbWVudCBpbnNpZGUgdGhlIGlmcmFtZSB3aXRob3V0IG9mZnNldFBhcmVudCwgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm5cblx0Ly8gICAgZG9jdW1lbnRFbGVtZW50IG9mIHRoZSBwYXJlbnQgd2luZG93XG5cdC8vIDIpIEZvciB0aGUgaGlkZGVuIG9yIGRldGFjaGVkIGVsZW1lbnRcblx0Ly8gMykgRm9yIGJvZHkgb3IgaHRtbCBlbGVtZW50LCBpLmUuIGluIGNhc2Ugb2YgdGhlIGh0bWwgbm9kZSAtIGl0IHdpbGwgcmV0dXJuIGl0c2VsZlxuXHQvL1xuXHQvLyBidXQgdGhvc2UgZXhjZXB0aW9ucyB3ZXJlIG5ldmVyIHByZXNlbnRlZCBhcyBhIHJlYWwgbGlmZSB1c2UtY2FzZXNcblx0Ly8gYW5kIG1pZ2h0IGJlIGNvbnNpZGVyZWQgYXMgbW9yZSBwcmVmZXJhYmxlIHJlc3VsdHMuXG5cdC8vXG5cdC8vIFRoaXMgbG9naWMsIGhvd2V2ZXIsIGlzIG5vdCBndWFyYW50ZWVkIGFuZCBjYW4gY2hhbmdlIGF0IGFueSBwb2ludCBpbiB0aGUgZnV0dXJlXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudDtcblxuXHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2N1bWVudEVsZW1lbnQ7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbi8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgc2Nyb2xsTGVmdDogXCJwYWdlWE9mZnNldFwiLCBzY3JvbGxUb3A6IFwicGFnZVlPZmZzZXRcIiB9LCBmdW5jdGlvbiggbWV0aG9kLCBwcm9wICkge1xuXHR2YXIgdG9wID0gXCJwYWdlWU9mZnNldFwiID09PSBwcm9wO1xuXG5cdGpRdWVyeS5mblsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdmFsICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBtZXRob2QsIHZhbCApIHtcblx0XHRcdHZhciB3aW4gPSBnZXRXaW5kb3coIGVsZW0gKTtcblxuXHRcdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHdpbiA/IHdpblsgcHJvcCBdIDogZWxlbVsgbWV0aG9kIF07XG5cdFx0XHR9XG5cblx0XHRcdGlmICggd2luICkge1xuXHRcdFx0XHR3aW4uc2Nyb2xsVG8oXG5cdFx0XHRcdFx0IXRvcCA/IHZhbCA6IHdpbi5wYWdlWE9mZnNldCxcblx0XHRcdFx0XHR0b3AgPyB2YWwgOiB3aW4ucGFnZVlPZmZzZXRcblx0XHRcdFx0KTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbVsgbWV0aG9kIF0gPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fTtcbn0gKTtcblxuLy8gU3VwcG9ydDogU2FmYXJpIDw9NyAtIDkuMSwgQ2hyb21lIDw9MzcgLSA0OVxuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01ODkzNDdcbi8vIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBwZXJjZW50IHdoZW4gc3BlY2lmaWVkIGZvciB0b3AvbGVmdC9ib3R0b20vcmlnaHQ7XG4vLyByYXRoZXIgdGhhbiBtYWtlIHRoZSBjc3MgbW9kdWxlIGRlcGVuZCBvbiB0aGUgb2Zmc2V0IG1vZHVsZSwganVzdCBjaGVjayBmb3IgaXQgaGVyZVxualF1ZXJ5LmVhY2goIFsgXCJ0b3BcIiwgXCJsZWZ0XCIgXSwgZnVuY3Rpb24oIGksIHByb3AgKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdFx0Y29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTtcblxuXHRcdFx0XHQvLyBJZiBjdXJDU1MgcmV0dXJucyBwZXJjZW50YWdlLCBmYWxsYmFjayB0byBvZmZzZXRcblx0XHRcdFx0cmV0dXJuIHJudW1ub25weC50ZXN0KCBjb21wdXRlZCApID9cblx0XHRcdFx0XHRqUXVlcnkoIGVsZW0gKS5wb3NpdGlvbigpWyBwcm9wIF0gKyBcInB4XCIgOlxuXHRcdFx0XHRcdGNvbXB1dGVkO1xuXHRcdFx0fVxuXHRcdH1cblx0KTtcbn0gKTtcblxuXG4vLyBDcmVhdGUgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGgsIGhlaWdodCwgd2lkdGgsIG91dGVySGVpZ2h0IGFuZCBvdXRlcldpZHRoIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IEhlaWdodDogXCJoZWlnaHRcIiwgV2lkdGg6IFwid2lkdGhcIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHtcblx0alF1ZXJ5LmVhY2goIHsgcGFkZGluZzogXCJpbm5lclwiICsgbmFtZSwgY29udGVudDogdHlwZSwgXCJcIjogXCJvdXRlclwiICsgbmFtZSB9LFxuXHRcdGZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkge1xuXG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRcdFx0Ly8gJCggd2luZG93ICkub3V0ZXJXaWR0aC9IZWlnaHQgcmV0dXJuIHcvaCBpbmNsdWRpbmcgc2Nyb2xsYmFycyAoZ2gtMTcyOSlcblx0XHRcdFx0XHRyZXR1cm4gZnVuY05hbWUuaW5kZXhPZiggXCJvdXRlclwiICkgPT09IDAgP1xuXHRcdFx0XHRcdFx0ZWxlbVsgXCJpbm5lclwiICsgbmFtZSBdIDpcblx0XHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cblx0XHRcdFx0XHQvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0XG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6XG5cblx0XHRcdFx0XHQvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcblx0XHRcdH0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlICk7XG5cdFx0fTtcblx0fSApO1xufSApO1xuXG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHRiaW5kOiBmdW5jdGlvbiggdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9mZiggdHlwZXMsIG51bGwsIGZuICk7XG5cdH0sXG5cblx0ZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGZuICkge1xuXG5cdFx0Ly8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKVxuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID9cblx0XHRcdHRoaXMub2ZmKCBzZWxlY3RvciwgXCIqKlwiICkgOlxuXHRcdFx0dGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LnBhcnNlSlNPTiA9IEpTT04ucGFyc2U7XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSApO1xufVxuXG5cblxuXG5cbnZhclxuXG5cdC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuXHQvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfJCA9IHdpbmRvdy4kO1xuXG5qUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkge1xuXHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LiQgPSBfJDtcblx0fVxuXG5cdGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5O1xufTtcblxuLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpbiBBTURcbi8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcbi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NilcbmlmICggIW5vR2xvYmFsICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxucmV0dXJuIGpRdWVyeTtcbn0gKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi4vfi9qcXVlcnkvZGlzdC9qcXVlcnkuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQgQmFja2JvbmUgZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgRW50cnkgZnJvbSAnLi4vbW9kZWxzL0VudHJ5JztcblxuY2xhc3MgRW50cmllcyBleHRlbmRzIEJhY2tib25lLkNvbGxlY3Rpb24ge1xuXG5cdGNvbnN0cnVjdG9yKGVudHJpZXMpIHtcblx0XHRzdXBlcihlbnRyaWVzKTtcblx0fVxuXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0dGhpcy5tb2RlbCA9IEVudHJ5O1xuXHR9XG5cblx0Z2V0VW52aWV3ZWRFbnRyeUlEKCkge1xuXHRcdGNvbnN0IHVudmlld2VkRW50cmllcyA9IHRoaXMud2hlcmUoeyB2aWV3ZWQ6IGZhbHNlIH0pO1xuXG5cdFx0aWYgKHVudmlld2VkRW50cmllcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRyZXR1cm4gXy5zYW1wbGUodW52aWV3ZWRFbnRyaWVzKS5nZXQoJ2lkJyk7XG5cdFx0fVxuXG5cdFx0dGhpcy5lYWNoKChtb2RlbCkgPT4geyBtb2RlbC5zZXQoJ3ZpZXdlZCcsIGZhbHNlKTsgfSk7XG5cdFx0cmV0dXJuIHRoaXMuc2FtcGxlKCkuZ2V0KCdpZCcpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVudHJpZXM7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2NvbGxlY3Rpb25zL0VudHJpZXMuanNcbiAqKi8iLCJpbXBvcnQgQmFja2JvbmUgZnJvbSAnYmFja2JvbmUnO1xuXG5jbGFzcyBFbnRyeSBleHRlbmRzIEJhY2tib25lLk1vZGVsIHtcblxuXHRjb25zdHJ1Y3RvcihhdHRycykge1xuXHRcdHN1cGVyKGF0dHJzKTtcblx0fVxuXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0dGhpcy5zZXQoeyB1cmxGcmllbmRseVRpdGxlOiB0aGlzLmNvbnZlcnRUb1NsdWcodGhpcy5nZXQoJ3RpdGxlJykpIH0pO1xuXHRcdHRoaXMucGFyc2VUaXRsZSgpO1xuXHR9XG5cblx0ZGVmYXVsdHMoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHZpZXdlZDogZmFsc2Vcblx0XHR9O1xuXHR9XG5cblx0cGFyc2VUaXRsZSgpIHtcblx0XHRpZiAodGhpcy50aXRsZUNvbnRhaW5zUGFyZW50aGVzaXModGhpcy5nZXQoJ3RpdGxlJykpKSB7XG5cdFx0XHR0aGlzLnNldCgndGl0bGUnLCB0aGlzLndyYXBUaXRsZVBhcmVudGhlc2lzSW5TcGFucyh0aGlzLmdldCgndGl0bGUnKSkpO1xuXHRcdH1cblx0fVxuXG5cdGNvbnZlcnRUb1NsdWcodGV4dCkge1xuXHRcdHJldHVybiB0ZXh0XG5cdFx0XHQudG9Mb3dlckNhc2UoKVxuXHRcdFx0LnJlcGxhY2UoL1teXFx3IF0rL2csICcnKVxuXHRcdFx0LnJlcGxhY2UoLyArL2csICctJyk7XG5cdH1cblxuXHR0aXRsZUNvbnRhaW5zUGFyZW50aGVzaXModGl0bGUpIHtcblx0XHRpZiAodGl0bGUuaW5kZXhPZignKCcpID4gLTEgfHwgdGl0bGUuaW5kZXhPZignKScpID4gLTEpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHdyYXBUaXRsZVBhcmVudGhlc2lzSW5TcGFucyh0aXRsZSkge1xuXHRcdHJldHVybiB0aXRsZS5yZXBsYWNlKCcoJywgJzxzcGFuPignKS5yZXBsYWNlKCcpJywgJyk8L3NwYW4+Jyk7XG5cdH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBFbnRyeTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vbW9kZWxzL0VudHJ5LmpzXG4gKiovIiwiaW1wb3J0IEJhY2tib25lIGZyb20gJ2JhY2tib25lJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBMb2FkZXJWaWV3IGZyb20gJy4uL3ZpZXdzL0xvYWRlclZpZXcnO1xuaW1wb3J0IEVudHJpZXMgZnJvbSAnLi4vY29sbGVjdGlvbnMvRW50cmllcyc7XG5pbXBvcnQgRW50cmllc1ZpZXcgZnJvbSAnLi4vdmlld3MvRW50cmllc1ZpZXcnO1xuaW1wb3J0IEVudHJ5VmlldyBmcm9tICcuLi92aWV3cy9FbnRyeVZpZXcnO1xuaW1wb3J0IHsgYWxsIGFzIGVudHJpZXMgfSBmcm9tICdncmVlay1pbi10ZWNoJztcblxuY2xhc3MgQXBwUm91dGVyIGV4dGVuZHMgQmFja2JvbmUuUm91dGVyIHtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMucm91dGVzID0ge1xuXHRcdFx0J2VudHJ5LzppZCgvOnRpdGxlKSc6ICdzaG93RW50cnknLFxuXHRcdFx0JyphY3Rpb25zJzogJ3Nob3dSYW5kb21FbnRyeSdcblx0XHR9O1xuXHRcdHRoaXMuX2JpbmRSb3V0ZXMoKTtcblx0fVxuXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0dGhpcy5pbml0aWFsRnJhZ21lbnQgPSBudWxsO1xuXHRcdHRoaXMuJGVudHJ5RWwgPSAkKCcjZW50cnknKTtcblx0XHR0aGlzLmxvYWRlciA9IG5ldyBMb2FkZXJWaWV3KCk7XG5cdFx0dGhpcy5lbnRyaWVzID0gbmV3IEVudHJpZXMoSlNPTi5wYXJzZShlbnRyaWVzKSk7XG5cdFx0Y29uc3QgZW50cmllc1ZpZXcgPSBuZXcgRW50cmllc1ZpZXcoeyBjb2xsZWN0aW9uOiB0aGlzLmVudHJpZXMgfSk7XG5cdFx0dGhpcy5saXN0ZW5UbyhlbnRyaWVzVmlldywgJ3JvdXRlVG9VbnZpZXdlZEVudHJ5JywgdGhpcy5zaG93RW50cnkpO1xuXHRcdHRoaXMubGlzdGVuVG8oZW50cmllc1ZpZXcsICduYXZpZ2F0ZUJhY2t3YXJkcycsIHRoaXMubmF2aWdhdGVCYWNrd2FyZHMpO1xuXHR9XG5cblx0c2hvd1JhbmRvbUVudHJ5KCkge1xuXHRcdGNvbnN0IHJhbmRvbUVudHJ5SUQgPSB0aGlzLmVudHJpZXMuZ2V0VW52aWV3ZWRFbnRyeUlEKCk7XG5cdFx0dGhpcy5zaG93RW50cnkocmFuZG9tRW50cnlJRCk7XG5cdH1cblxuXHRzaG93RW50cnkoaWQpIHtcblx0XHRpZiAodGhpcy5sb2FkZXIuJGVsLmlzKCc6dmlzaWJsZScpKSB7XG5cdFx0XHR0aGlzLmxvYWRlci50cmlnZ2VyKCdoaWRlJyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZW50cnkgPSB0aGlzLmVudHJpZXMuZmluZFdoZXJlKHsgaWQ6IHBhcnNlSW50KGlkKSB9KTtcblxuXHRcdGlmIChfLmlzVW5kZWZpbmVkKGVudHJ5KSkge1xuXHRcdFx0dGhpcy5zaG93UmFuZG9tRW50cnkoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLm5hdmlnYXRlKGBlbnRyeS8ke2lkfS8ke2VudHJ5LmdldCgndXJsRnJpZW5kbHlUaXRsZScpfWAsIHsgdHJpZ2dlcjogdHJ1ZSB9KTtcblxuXHRcdGlmICghdGhpcy5pbml0aWFsRnJhZ21lbnQpIHtcblx0XHRcdHRoaXMuaW5pdGlhbEZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgpO1xuXHRcdH1cblxuXHRcdHRoaXMuZW50cnlWaWV3ID0gbmV3IEVudHJ5Vmlldyh7IG1vZGVsOiBlbnRyeSwgY29udGFpbmVyOiB0aGlzLiRlbnRyeUVsIH0pLnJlbmRlcigpO1xuXHR9XG5cblx0bmF2aWdhdGVCYWNrd2FyZHMoKSB7XG5cdFx0aWYgKHRoaXMuaW5pdGlhbEZyYWdtZW50ID09PSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0d2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwUm91dGVyO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9yb3V0ZXIvQXBwUm91dGVyLmpzXG4gKiovIiwiaW1wb3J0IEJhY2tib25lIGZyb20gJ2JhY2tib25lJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBIYW1tZXIgZnJvbSAnaGFtbWVyanMnO1xuXG5jbGFzcyBFbnRyaWVzVmlldyBleHRlbmRzIEJhY2tib25lLlZpZXcge1xuXG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblx0XHRzdXBlcih7XG5cdFx0XHRlbDogJ2JvZHknLFxuXHRcdFx0Y29sbGVjdGlvbjogb3B0aW9ucy5jb2xsZWN0aW9uLFxuXG5cdFx0XHRldmVudHM6IHtcblx0XHRcdFx0Y2xpY2s6ICdyZW5kZXJSYW5kb21FbnRyeScsXG5cdFx0XHRcdGtleWRvd246ICdoYW5kbGVLZXlib2FyZEV2ZW50J1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0aW5pdGlhbGl6ZSgpIHtcblx0XHRjb25zdCBtYyA9IG5ldyBIYW1tZXIodGhpcy4kZWwuZ2V0KDApKTtcblx0XHRtYy5vbignc3dpcGVyaWdodCBzd2lwZWxlZnQnLCB0aGlzLmhhbmRsZU1vYmlsZUV2ZW50KTtcblx0fVxuXG5cdHJlbmRlclJhbmRvbUVudHJ5KGUpIHtcblx0XHQvLyBUT0RPOiBmaW5kIGEgYmV0dGVyIHdheSB0byBzdXBwcmVzcyBldmVudCBkZWxlZ2F0aW9uXG5cdFx0aWYgKGUgJiYgJChlLnRhcmdldCkuaXMoJ2EnKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCB1bnZpZXdlZEVudHJ5SUQgPSB0aGlzLmNvbGxlY3Rpb24uZ2V0VW52aWV3ZWRFbnRyeUlEKCk7XG5cdFx0dGhpcy50cmlnZ2VyKCdyb3V0ZVRvVW52aWV3ZWRFbnRyeScsIHVudmlld2VkRW50cnlJRCk7XG5cdH1cblxuXHRoYW5kbGVLZXlib2FyZEV2ZW50KGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRjb25zdCBiYWNrS2V5cyA9IFszNywgNzJdO1xuXHRcdGNvbnN0IGZvcndhcmRLZXlzID0gWzM5LCA3Nl07XG5cdFx0Y29uc3Qgc3BhY2UgPSBbMzJdO1xuXG5cdFx0aWYgKCFfLmNvbnRhaW5zKF8udW5pb24oYmFja0tleXMsIGZvcndhcmRLZXlzLCBzcGFjZSksIGUua2V5Q29kZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBpc0ZvcndhcmQgPSBfLmNvbnRhaW5zKGZvcndhcmRLZXlzLCBlLmtleUNvZGUpIHx8IChzcGFjZSA9PT0gZS5rZXlDb2RlICYmICFlLnNoaWZ0S2V5KTtcblx0XHR0aGlzLm1vdmVUb0VudHJ5KGlzRm9yd2FyZCk7XG5cdH1cblxuXHRoYW5kbGVNb2JpbGVFdmVudChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0Y29uc3QgaXNGb3J3YXJkID0gZS50eXBlID09PSAnc3dpcGVsZWZ0Jztcblx0XHR0aGlzLm1vdmVUb0VudHJ5KGlzRm9yd2FyZCk7XG5cdH1cblxuXHRtb3ZlVG9FbnRyeShpc0ZvcndhcmQpIHtcblx0XHRpc0ZvcndhcmQgPyB0aGlzLnJlbmRlclJhbmRvbUVudHJ5KCkgOiB0aGlzLnRyaWdnZXIoJ25hdmlnYXRlQmFja3dhcmRzJyk7XG5cdH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBFbnRyaWVzVmlldztcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vdmlld3MvRW50cmllc1ZpZXcuanNcbiAqKi8iLCJpbXBvcnQgQmFja2JvbmUgZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IEVudHJ5VGVtcGxhdGUgZnJvbSAnLi4vdGVtcGxhdGVzL2VudHJ5Lmh0bWwnO1xuXG5jbGFzcyBFbnRyeVZpZXcgZXh0ZW5kcyBCYWNrYm9uZS5WaWV3IHtcblxuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0c3VwZXIoe1xuXHRcdFx0ZWw6ICcjZW50cnknLFxuXHRcdFx0bW9kZWw6IG9wdGlvbnMubW9kZWwsXG5cdFx0XHRjb250YWluZXI6IG9wdGlvbnMuY29udGFpbmVyLFxuXG5cdFx0XHRldmVudHM6IHtcblx0XHRcdFx0J2NsaWNrIC5zb2NpYWwtbGlua3MgYSc6ICdzb2NpYWxTaGFyZSdcblx0XHRcdH1cblx0XHR9KTtcblx0XHR0aGlzLnRlbXBsYXRlID0gXy50ZW1wbGF0ZShFbnRyeVRlbXBsYXRlKTtcblx0fVxuXG5cdGluaXRpYWxpemUob3B0aW9ucykge1xuXHRcdHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwgJ2NoYW5nZScsIHRoaXMucmVuZGVyKTtcblx0XHR0aGlzLkNTU2FuaW1hdGlvbkNsYXNzZXMgPSAnZmxpcEluWCBhbmltYXRlZCc7XG5cdFx0dGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcblx0XHR0aGlzLmFuaW1hdGVWaWV3KCk7XG5cdH1cblxuXHRyZW5kZXIoKSB7XG5cdFx0dGhpcy5tb2RlbC5zZXQoJ3ZpZXdlZCcsIHRydWUpO1xuXHRcdHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLnRvSlNPTigpKSk7XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdGFuaW1hdGVWaWV3KCkge1xuXHRcdHRoaXMuY29udGFpbmVyLmFkZENsYXNzKHRoaXMuQ1NTYW5pbWF0aW9uQ2xhc3Nlcyk7XG5cdH1cblxuXHRzb2NpYWxTaGFyZShlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0Y29uc3Qgd2lkdGggPSA1NzU7XG5cdFx0Y29uc3QgaGVpZ2h0ID0gNDAwO1xuXHRcdGNvbnN0IGxlZnQgPSAoJCh3aW5kb3cpLndpZHRoKCkgLSB3aWR0aCkgLyAyO1xuXHRcdGNvbnN0IHRvcCA9ICgkKHdpbmRvdykuaGVpZ2h0KCkgLSBoZWlnaHQpIC8gMjtcblx0XHRjb25zdCB1cmwgPSAkKGUudGFyZ2V0KS5hdHRyKCdocmVmJyk7XG5cdFx0Y29uc3Qgb3B0cyA9IGBzdGF0dXM9MSx3aWR0aD0ke3dpZHRofSxoZWlnaHQ9JHtoZWlnaHR9LHRvcD0ke3RvcH0sbGVmdD0ke2xlZnR9YDtcblxuXHRcdHdpbmRvdy5vcGVuKHVybCwgJ1NoYXJlJywgb3B0cyk7XG5cdH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBFbnRyeVZpZXc7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3ZpZXdzL0VudHJ5Vmlldy5qc1xuICoqLyIsImltcG9ydCBCYWNrYm9uZSBmcm9tICdiYWNrYm9uZSc7XG5cbmNsYXNzIExvYWRlclZpZXcgZXh0ZW5kcyBCYWNrYm9uZS5WaWV3IHtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcih7XG5cdFx0XHRlbDogJy5sb2FkZXInXG5cdFx0fSk7XG5cdH1cblxuXHRpbml0aWFsaXplKCkge1xuXHRcdHRoaXMubGlzdGVuVG8odGhpcywgJ2hpZGUnLCAoKSA9PiB7IHRoaXMuJGVsLmhpZGUoKTsgfSk7XG5cdH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2FkZXJWaWV3O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi92aWV3cy9Mb2FkZXJWaWV3LmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5nZXRFbnRyeSA9IGV4cG9ydHMucmFuZG9tID0gZXhwb3J0cy5hbGwgPSB1bmRlZmluZWQ7XG5cbnZhciBfdW5pcXVlUmFuZG9tQXJyYXkgPSByZXF1aXJlKCd1bmlxdWUtcmFuZG9tLWFycmF5Jyk7XG5cbnZhciBfdW5pcXVlUmFuZG9tQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5pcXVlUmFuZG9tQXJyYXkpO1xuXG52YXIgX2VudHJpZXMgPSByZXF1aXJlKCcuLi9kYXRhL2VudHJpZXMnKTtcblxudmFyIF9lbnRyaWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VudHJpZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgYWxsID0gZXhwb3J0cy5hbGwgPSBfZW50cmllczIuZGVmYXVsdDtcbnZhciByYW5kb20gPSBleHBvcnRzLnJhbmRvbSA9ICgwLCBfdW5pcXVlUmFuZG9tQXJyYXkyLmRlZmF1bHQpKF9lbnRyaWVzMi5kZWZhdWx0KTtcbnZhciBnZXRFbnRyeSA9IGV4cG9ydHMuZ2V0RW50cnkgPSBmdW5jdGlvbiBnZXRFbnRyeSgpIHtcbiAgdmFyIGlkID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFyZ3VtZW50c1swXTtcblxuICB2YXIgZW50cnkgPSBfZW50cmllczIuZGVmYXVsdFtpZCAtIDFdO1xuICBpZiAoIWVudHJ5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIElEJyk7XG4gIH1cblxuICByZXR1cm4gZW50cnk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi4vfi9ncmVlay1pbi10ZWNoL2xpYi9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiEgSGFtbWVyLkpTIC0gdjIuMC43IC0gMjAxNi0wNC0yMlxuICogaHR0cDovL2hhbW1lcmpzLmdpdGh1Yi5pby9cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgSm9yaWsgVGFuZ2VsZGVyO1xuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlICovXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgZXhwb3J0TmFtZSwgdW5kZWZpbmVkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxudmFyIFZFTkRPUl9QUkVGSVhFUyA9IFsnJywgJ3dlYmtpdCcsICdNb3onLCAnTVMnLCAnbXMnLCAnbyddO1xudmFyIFRFU1RfRUxFTUVOVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG52YXIgVFlQRV9GVU5DVElPTiA9ICdmdW5jdGlvbic7XG5cbnZhciByb3VuZCA9IE1hdGgucm91bmQ7XG52YXIgYWJzID0gTWF0aC5hYnM7XG52YXIgbm93ID0gRGF0ZS5ub3c7XG5cbi8qKlxuICogc2V0IGEgdGltZW91dCB3aXRoIGEgZ2l2ZW4gc2NvcGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge051bWJlcn0gdGltZW91dFxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmZ1bmN0aW9uIHNldFRpbWVvdXRDb250ZXh0KGZuLCB0aW1lb3V0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoYmluZEZuKGZuLCBjb250ZXh0KSwgdGltZW91dCk7XG59XG5cbi8qKlxuICogaWYgdGhlIGFyZ3VtZW50IGlzIGFuIGFycmF5LCB3ZSB3YW50IHRvIGV4ZWN1dGUgdGhlIGZuIG9uIGVhY2ggZW50cnlcbiAqIGlmIGl0IGFpbnQgYW4gYXJyYXkgd2UgZG9uJ3Qgd2FudCB0byBkbyBhIHRoaW5nLlxuICogdGhpcyBpcyB1c2VkIGJ5IGFsbCB0aGUgbWV0aG9kcyB0aGF0IGFjY2VwdCBhIHNpbmdsZSBhbmQgYXJyYXkgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp8QXJyYXl9IGFyZ1xuICogQHBhcmFtIHtTdHJpbmd9IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHRdXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaW52b2tlQXJyYXlBcmcoYXJnLCBmbiwgY29udGV4dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcbiAgICAgICAgZWFjaChhcmcsIGNvbnRleHRbZm5dLCBjb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiB3YWxrIG9iamVjdHMgYW5kIGFycmF5c1xuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIHZhciBpO1xuXG4gICAgaWYgKCFvYmopIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvYmouZm9yRWFjaCkge1xuICAgICAgICBvYmouZm9yRWFjaChpdGVyYXRvciwgY29udGV4dCk7XG4gICAgfSBlbHNlIGlmIChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgb2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICAgICAgICBvYmouaGFzT3duUHJvcGVydHkoaSkgJiYgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogd3JhcCBhIG1ldGhvZCB3aXRoIGEgZGVwcmVjYXRpb24gd2FybmluZyBhbmQgc3RhY2sgdHJhY2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIHRoZSBzdXBwbGllZCBtZXRob2QuXG4gKi9cbmZ1bmN0aW9uIGRlcHJlY2F0ZShtZXRob2QsIG5hbWUsIG1lc3NhZ2UpIHtcbiAgICB2YXIgZGVwcmVjYXRpb25NZXNzYWdlID0gJ0RFUFJFQ0FURUQgTUVUSE9EOiAnICsgbmFtZSArICdcXG4nICsgbWVzc2FnZSArICcgQVQgXFxuJztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKCdnZXQtc3RhY2stdHJhY2UnKTtcbiAgICAgICAgdmFyIHN0YWNrID0gZSAmJiBlLnN0YWNrID8gZS5zdGFjay5yZXBsYWNlKC9eW15cXChdKz9bXFxuJF0vZ20sICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL15cXHMrYXRcXHMrL2dtLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eT2JqZWN0Ljxhbm9ueW1vdXM+XFxzKlxcKC9nbSwgJ3thbm9ueW1vdXN9KClAJykgOiAnVW5rbm93biBTdGFjayBUcmFjZSc7XG5cbiAgICAgICAgdmFyIGxvZyA9IHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS53YXJuIHx8IHdpbmRvdy5jb25zb2xlLmxvZyk7XG4gICAgICAgIGlmIChsb2cpIHtcbiAgICAgICAgICAgIGxvZy5jYWxsKHdpbmRvdy5jb25zb2xlLCBkZXByZWNhdGlvbk1lc3NhZ2UsIHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBleHRlbmQgb2JqZWN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIGluIGRlc3Qgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGUgb25lcyBpbiBzcmMuXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gb2JqZWN0c190b19hc3NpZ25cbiAqIEByZXR1cm5zIHtPYmplY3R9IHRhcmdldFxuICovXG52YXIgYXNzaWduO1xuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgYXNzaWduID0gZnVuY3Rpb24gYXNzaWduKHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkobmV4dEtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG59IGVsc2Uge1xuICAgIGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG59XG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW21lcmdlPWZhbHNlXVxuICogQHJldHVybnMge09iamVjdH0gZGVzdFxuICovXG52YXIgZXh0ZW5kID0gZGVwcmVjYXRlKGZ1bmN0aW9uIGV4dGVuZChkZXN0LCBzcmMsIG1lcmdlKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhzcmMpO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGtleXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICghbWVyZ2UgfHwgKG1lcmdlICYmIGRlc3Rba2V5c1tpXV0gPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIGRlc3Rba2V5c1tpXV0gPSBzcmNba2V5c1tpXV07XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn0sICdleHRlbmQnLCAnVXNlIGBhc3NpZ25gLicpO1xuXG4vKipcbiAqIG1lcmdlIHRoZSB2YWx1ZXMgZnJvbSBzcmMgaW4gdGhlIGRlc3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgdGhhdCBleGlzdCBpbiBkZXN0IHdpbGwgbm90IGJlIG92ZXJ3cml0dGVuIGJ5IHNyY1xuICogQHBhcmFtIHtPYmplY3R9IGRlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcbiAqIEByZXR1cm5zIHtPYmplY3R9IGRlc3RcbiAqL1xudmFyIG1lcmdlID0gZGVwcmVjYXRlKGZ1bmN0aW9uIG1lcmdlKGRlc3QsIHNyYykge1xuICAgIHJldHVybiBleHRlbmQoZGVzdCwgc3JjLCB0cnVlKTtcbn0sICdtZXJnZScsICdVc2UgYGFzc2lnbmAuJyk7XG5cbi8qKlxuICogc2ltcGxlIGNsYXNzIGluaGVyaXRhbmNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaGlsZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gYmFzZVxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXVxuICovXG5mdW5jdGlvbiBpbmhlcml0KGNoaWxkLCBiYXNlLCBwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIGJhc2VQID0gYmFzZS5wcm90b3R5cGUsXG4gICAgICAgIGNoaWxkUDtcblxuICAgIGNoaWxkUCA9IGNoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZVApO1xuICAgIGNoaWxkUC5jb25zdHJ1Y3RvciA9IGNoaWxkO1xuICAgIGNoaWxkUC5fc3VwZXIgPSBiYXNlUDtcblxuICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGFzc2lnbihjaGlsZFAsIHByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBzaW1wbGUgZnVuY3Rpb24gYmluZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIGJpbmRGbihmbiwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBib3VuZEZuKCkge1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIGxldCBhIGJvb2xlYW4gdmFsdWUgYWxzbyBiZSBhIGZ1bmN0aW9uIHRoYXQgbXVzdCByZXR1cm4gYSBib29sZWFuXG4gKiB0aGlzIGZpcnN0IGl0ZW0gaW4gYXJncyB3aWxsIGJlIHVzZWQgYXMgdGhlIGNvbnRleHRcbiAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gdmFsXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJnc11cbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBib29sT3JGbih2YWwsIGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PSBUWVBFX0ZVTkNUSU9OKSB7XG4gICAgICAgIHJldHVybiB2YWwuYXBwbHkoYXJncyA/IGFyZ3NbMF0gfHwgdW5kZWZpbmVkIDogdW5kZWZpbmVkLCBhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiB1c2UgdGhlIHZhbDIgd2hlbiB2YWwxIGlzIHVuZGVmaW5lZFxuICogQHBhcmFtIHsqfSB2YWwxXG4gKiBAcGFyYW0geyp9IHZhbDJcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBpZlVuZGVmaW5lZCh2YWwxLCB2YWwyKSB7XG4gICAgcmV0dXJuICh2YWwxID09PSB1bmRlZmluZWQpID8gdmFsMiA6IHZhbDE7XG59XG5cbi8qKlxuICogYWRkRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICovXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyh0YXJnZXQsIHR5cGVzLCBoYW5kbGVyKSB7XG4gICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIHJlbW92ZUV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBmaW5kIGlmIGEgbm9kZSBpcyBpbiB0aGUgZ2l2ZW4gcGFyZW50XG4gKiBAbWV0aG9kIGhhc1BhcmVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50XG4gKiBAcmV0dXJuIHtCb29sZWFufSBmb3VuZFxuICovXG5mdW5jdGlvbiBoYXNQYXJlbnQobm9kZSwgcGFyZW50KSB7XG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogc21hbGwgaW5kZXhPZiB3cmFwcGVyXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmluZFxuICogQHJldHVybnMge0Jvb2xlYW59IGZvdW5kXG4gKi9cbmZ1bmN0aW9uIGluU3RyKHN0ciwgZmluZCkge1xuICAgIHJldHVybiBzdHIuaW5kZXhPZihmaW5kKSA+IC0xO1xufVxuXG4vKipcbiAqIHNwbGl0IHN0cmluZyBvbiB3aGl0ZXNwYWNlXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJucyB7QXJyYXl9IHdvcmRzXG4gKi9cbmZ1bmN0aW9uIHNwbGl0U3RyKHN0cikge1xuICAgIHJldHVybiBzdHIudHJpbSgpLnNwbGl0KC9cXHMrL2cpO1xufVxuXG4vKipcbiAqIGZpbmQgaWYgYSBhcnJheSBjb250YWlucyB0aGUgb2JqZWN0IHVzaW5nIGluZGV4T2Ygb3IgYSBzaW1wbGUgcG9seUZpbGxcbiAqIEBwYXJhbSB7QXJyYXl9IHNyY1xuICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbZmluZEJ5S2V5XVxuICogQHJldHVybiB7Qm9vbGVhbnxOdW1iZXJ9IGZhbHNlIHdoZW4gbm90IGZvdW5kLCBvciB0aGUgaW5kZXhcbiAqL1xuZnVuY3Rpb24gaW5BcnJheShzcmMsIGZpbmQsIGZpbmRCeUtleSkge1xuICAgIGlmIChzcmMuaW5kZXhPZiAmJiAhZmluZEJ5S2V5KSB7XG4gICAgICAgIHJldHVybiBzcmMuaW5kZXhPZihmaW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKChmaW5kQnlLZXkgJiYgc3JjW2ldW2ZpbmRCeUtleV0gPT0gZmluZCkgfHwgKCFmaW5kQnlLZXkgJiYgc3JjW2ldID09PSBmaW5kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG59XG5cbi8qKlxuICogY29udmVydCBhcnJheS1saWtlIG9iamVjdHMgdG8gcmVhbCBhcnJheXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gdG9BcnJheShvYmopIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwob2JqLCAwKTtcbn1cblxuLyoqXG4gKiB1bmlxdWUgYXJyYXkgd2l0aCBvYmplY3RzIGJhc2VkIG9uIGEga2V5IChsaWtlICdpZCcpIG9yIGp1c3QgYnkgdGhlIGFycmF5J3MgdmFsdWVcbiAqIEBwYXJhbSB7QXJyYXl9IHNyYyBbe2lkOjF9LHtpZDoyfSx7aWQ6MX1dXG4gKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NvcnQ9RmFsc2VdXG4gKiBAcmV0dXJucyB7QXJyYXl9IFt7aWQ6MX0se2lkOjJ9XVxuICovXG5mdW5jdGlvbiB1bmlxdWVBcnJheShzcmMsIGtleSwgc29ydCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIHZhciBpID0gMDtcblxuICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsID0ga2V5ID8gc3JjW2ldW2tleV0gOiBzcmNbaV07XG4gICAgICAgIGlmIChpbkFycmF5KHZhbHVlcywgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChzcmNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpXSA9IHZhbDtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIGlmIChzb3J0KSB7XG4gICAgICAgIGlmICgha2V5KSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KGZ1bmN0aW9uIHNvcnRVbmlxdWVBcnJheShhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFba2V5XSA+IGJba2V5XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbi8qKlxuICogZ2V0IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gKiBAcmV0dXJucyB7U3RyaW5nfFVuZGVmaW5lZH0gcHJlZml4ZWRcbiAqL1xuZnVuY3Rpb24gcHJlZml4ZWQob2JqLCBwcm9wZXJ0eSkge1xuICAgIHZhciBwcmVmaXgsIHByb3A7XG4gICAgdmFyIGNhbWVsUHJvcCA9IHByb3BlcnR5WzBdLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zbGljZSgxKTtcblxuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IFZFTkRPUl9QUkVGSVhFUy5sZW5ndGgpIHtcbiAgICAgICAgcHJlZml4ID0gVkVORE9SX1BSRUZJWEVTW2ldO1xuICAgICAgICBwcm9wID0gKHByZWZpeCkgPyBwcmVmaXggKyBjYW1lbFByb3AgOiBwcm9wZXJ0eTtcblxuICAgICAgICBpZiAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBnZXQgYSB1bmlxdWUgaWRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHVuaXF1ZUlkXG4gKi9cbnZhciBfdW5pcXVlSWQgPSAxO1xuZnVuY3Rpb24gdW5pcXVlSWQoKSB7XG4gICAgcmV0dXJuIF91bmlxdWVJZCsrO1xufVxuXG4vKipcbiAqIGdldCB0aGUgd2luZG93IG9iamVjdCBvZiBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJucyB7RG9jdW1lbnRWaWV3fFdpbmRvd31cbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93Rm9yRWxlbWVudChlbGVtZW50KSB7XG4gICAgdmFyIGRvYyA9IGVsZW1lbnQub3duZXJEb2N1bWVudCB8fCBlbGVtZW50O1xuICAgIHJldHVybiAoZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3cgfHwgd2luZG93KTtcbn1cblxudmFyIE1PQklMRV9SRUdFWCA9IC9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaTtcblxudmFyIFNVUFBPUlRfVE9VQ0ggPSAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KTtcbnZhciBTVVBQT1JUX1BPSU5URVJfRVZFTlRTID0gcHJlZml4ZWQod2luZG93LCAnUG9pbnRlckV2ZW50JykgIT09IHVuZGVmaW5lZDtcbnZhciBTVVBQT1JUX09OTFlfVE9VQ0ggPSBTVVBQT1JUX1RPVUNIICYmIE1PQklMRV9SRUdFWC50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG52YXIgSU5QVVRfVFlQRV9UT1VDSCA9ICd0b3VjaCc7XG52YXIgSU5QVVRfVFlQRV9QRU4gPSAncGVuJztcbnZhciBJTlBVVF9UWVBFX01PVVNFID0gJ21vdXNlJztcbnZhciBJTlBVVF9UWVBFX0tJTkVDVCA9ICdraW5lY3QnO1xuXG52YXIgQ09NUFVURV9JTlRFUlZBTCA9IDI1O1xuXG52YXIgSU5QVVRfU1RBUlQgPSAxO1xudmFyIElOUFVUX01PVkUgPSAyO1xudmFyIElOUFVUX0VORCA9IDQ7XG52YXIgSU5QVVRfQ0FOQ0VMID0gODtcblxudmFyIERJUkVDVElPTl9OT05FID0gMTtcbnZhciBESVJFQ1RJT05fTEVGVCA9IDI7XG52YXIgRElSRUNUSU9OX1JJR0hUID0gNDtcbnZhciBESVJFQ1RJT05fVVAgPSA4O1xudmFyIERJUkVDVElPTl9ET1dOID0gMTY7XG5cbnZhciBESVJFQ1RJT05fSE9SSVpPTlRBTCA9IERJUkVDVElPTl9MRUZUIHwgRElSRUNUSU9OX1JJR0hUO1xudmFyIERJUkVDVElPTl9WRVJUSUNBTCA9IERJUkVDVElPTl9VUCB8IERJUkVDVElPTl9ET1dOO1xudmFyIERJUkVDVElPTl9BTEwgPSBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTDtcblxudmFyIFBST1BTX1hZID0gWyd4JywgJ3knXTtcbnZhciBQUk9QU19DTElFTlRfWFkgPSBbJ2NsaWVudFgnLCAnY2xpZW50WSddO1xuXG4vKipcbiAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7SW5wdXR9XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSW5wdXQobWFuYWdlciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5lbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIHRoaXMudGFyZ2V0ID0gbWFuYWdlci5vcHRpb25zLmlucHV0VGFyZ2V0O1xuXG4gICAgLy8gc21hbGxlciB3cmFwcGVyIGFyb3VuZCB0aGUgaGFuZGxlciwgZm9yIHRoZSBzY29wZSBhbmQgdGhlIGVuYWJsZWQgc3RhdGUgb2YgdGhlIG1hbmFnZXIsXG4gICAgLy8gc28gd2hlbiBkaXNhYmxlZCB0aGUgaW5wdXQgZXZlbnRzIGFyZSBjb21wbGV0ZWx5IGJ5cGFzc2VkLlxuICAgIHRoaXMuZG9tSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChib29sT3JGbihtYW5hZ2VyLm9wdGlvbnMuZW5hYmxlLCBbbWFuYWdlcl0pKSB7XG4gICAgICAgICAgICBzZWxmLmhhbmRsZXIoZXYpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW5pdCgpO1xuXG59XG5cbklucHV0LnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzaG91bGQgaGFuZGxlIHRoZSBpbnB1dEV2ZW50IGRhdGEgYW5kIHRyaWdnZXIgdGhlIGNhbGxiYWNrXG4gICAgICogQHZpcnR1YWxcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbigpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIGJpbmQgdGhlIGV2ZW50c1xuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmV2RWwgJiYgYWRkRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgJiYgYWRkRXZlbnRMaXN0ZW5lcnModGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZXaW4gJiYgYWRkRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1bmJpbmQgdGhlIGV2ZW50c1xuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmV2RWwgJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGhpcy5lbGVtZW50LCB0aGlzLmV2RWwsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZUYXJnZXQgJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGhpcy50YXJnZXQsIHRoaXMuZXZUYXJnZXQsIHRoaXMuZG9tSGFuZGxlcik7XG4gICAgICAgIHRoaXMuZXZXaW4gJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgIH1cbn07XG5cbi8qKlxuICogY3JlYXRlIG5ldyBpbnB1dCB0eXBlIG1hbmFnZXJcbiAqIGNhbGxlZCBieSB0aGUgTWFuYWdlciBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcbiAqIEByZXR1cm5zIHtJbnB1dH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRJbnN0YW5jZShtYW5hZ2VyKSB7XG4gICAgdmFyIFR5cGU7XG4gICAgdmFyIGlucHV0Q2xhc3MgPSBtYW5hZ2VyLm9wdGlvbnMuaW5wdXRDbGFzcztcblxuICAgIGlmIChpbnB1dENsYXNzKSB7XG4gICAgICAgIFR5cGUgPSBpbnB1dENsYXNzO1xuICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9QT0lOVEVSX0VWRU5UUykge1xuICAgICAgICBUeXBlID0gUG9pbnRlckV2ZW50SW5wdXQ7XG4gICAgfSBlbHNlIGlmIChTVVBQT1JUX09OTFlfVE9VQ0gpIHtcbiAgICAgICAgVHlwZSA9IFRvdWNoSW5wdXQ7XG4gICAgfSBlbHNlIGlmICghU1VQUE9SVF9UT1VDSCkge1xuICAgICAgICBUeXBlID0gTW91c2VJbnB1dDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBUeXBlID0gVG91Y2hNb3VzZUlucHV0O1xuICAgIH1cbiAgICByZXR1cm4gbmV3IChUeXBlKShtYW5hZ2VyLCBpbnB1dEhhbmRsZXIpO1xufVxuXG4vKipcbiAqIGhhbmRsZSBpbnB1dCBldmVudHNcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGlucHV0SGFuZGxlcihtYW5hZ2VyLCBldmVudFR5cGUsIGlucHV0KSB7XG4gICAgdmFyIHBvaW50ZXJzTGVuID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoO1xuICAgIHZhciBjaGFuZ2VkUG9pbnRlcnNMZW4gPSBpbnB1dC5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoO1xuICAgIHZhciBpc0ZpcnN0ID0gKGV2ZW50VHlwZSAmIElOUFVUX1NUQVJUICYmIChwb2ludGVyc0xlbiAtIGNoYW5nZWRQb2ludGVyc0xlbiA9PT0gMCkpO1xuICAgIHZhciBpc0ZpbmFsID0gKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmIChwb2ludGVyc0xlbiAtIGNoYW5nZWRQb2ludGVyc0xlbiA9PT0gMCkpO1xuXG4gICAgaW5wdXQuaXNGaXJzdCA9ICEhaXNGaXJzdDtcbiAgICBpbnB1dC5pc0ZpbmFsID0gISFpc0ZpbmFsO1xuXG4gICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgbWFuYWdlci5zZXNzaW9uID0ge307XG4gICAgfVxuXG4gICAgLy8gc291cmNlIGV2ZW50IGlzIHRoZSBub3JtYWxpemVkIHZhbHVlIG9mIHRoZSBkb21FdmVudHNcbiAgICAvLyBsaWtlICd0b3VjaHN0YXJ0LCBtb3VzZXVwLCBwb2ludGVyZG93bidcbiAgICBpbnB1dC5ldmVudFR5cGUgPSBldmVudFR5cGU7XG5cbiAgICAvLyBjb21wdXRlIHNjYWxlLCByb3RhdGlvbiBldGNcbiAgICBjb21wdXRlSW5wdXREYXRhKG1hbmFnZXIsIGlucHV0KTtcblxuICAgIC8vIGVtaXQgc2VjcmV0IGV2ZW50XG4gICAgbWFuYWdlci5lbWl0KCdoYW1tZXIuaW5wdXQnLCBpbnB1dCk7XG5cbiAgICBtYW5hZ2VyLnJlY29nbml6ZShpbnB1dCk7XG4gICAgbWFuYWdlci5zZXNzaW9uLnByZXZJbnB1dCA9IGlucHV0O1xufVxuXG4vKipcbiAqIGV4dGVuZCB0aGUgZGF0YSB3aXRoIHNvbWUgdXNhYmxlIHByb3BlcnRpZXMgbGlrZSBzY2FsZSwgcm90YXRlLCB2ZWxvY2l0eSBldGNcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYW5hZ2VyXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCkge1xuICAgIHZhciBzZXNzaW9uID0gbWFuYWdlci5zZXNzaW9uO1xuICAgIHZhciBwb2ludGVycyA9IGlucHV0LnBvaW50ZXJzO1xuICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblxuICAgIC8vIHN0b3JlIHRoZSBmaXJzdCBpbnB1dCB0byBjYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGFuZCBkaXJlY3Rpb25cbiAgICBpZiAoIXNlc3Npb24uZmlyc3RJbnB1dCkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0SW5wdXQgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG4gICAgfVxuXG4gICAgLy8gdG8gY29tcHV0ZSBzY2FsZSBhbmQgcm90YXRpb24gd2UgbmVlZCB0byBzdG9yZSB0aGUgbXVsdGlwbGUgdG91Y2hlc1xuICAgIGlmIChwb2ludGVyc0xlbmd0aCA+IDEgJiYgIXNlc3Npb24uZmlyc3RNdWx0aXBsZSkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG4gICAgfSBlbHNlIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZmlyc3RJbnB1dCA9IHNlc3Npb24uZmlyc3RJbnB1dDtcbiAgICB2YXIgZmlyc3RNdWx0aXBsZSA9IHNlc3Npb24uZmlyc3RNdWx0aXBsZTtcbiAgICB2YXIgb2Zmc2V0Q2VudGVyID0gZmlyc3RNdWx0aXBsZSA/IGZpcnN0TXVsdGlwbGUuY2VudGVyIDogZmlyc3RJbnB1dC5jZW50ZXI7XG5cbiAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyID0gZ2V0Q2VudGVyKHBvaW50ZXJzKTtcbiAgICBpbnB1dC50aW1lU3RhbXAgPSBub3coKTtcbiAgICBpbnB1dC5kZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBmaXJzdElucHV0LnRpbWVTdGFtcDtcblxuICAgIGlucHV0LmFuZ2xlID0gZ2V0QW5nbGUob2Zmc2V0Q2VudGVyLCBjZW50ZXIpO1xuICAgIGlucHV0LmRpc3RhbmNlID0gZ2V0RGlzdGFuY2Uob2Zmc2V0Q2VudGVyLCBjZW50ZXIpO1xuXG4gICAgY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpO1xuICAgIGlucHV0Lm9mZnNldERpcmVjdGlvbiA9IGdldERpcmVjdGlvbihpbnB1dC5kZWx0YVgsIGlucHV0LmRlbHRhWSk7XG5cbiAgICB2YXIgb3ZlcmFsbFZlbG9jaXR5ID0gZ2V0VmVsb2NpdHkoaW5wdXQuZGVsdGFUaW1lLCBpbnB1dC5kZWx0YVgsIGlucHV0LmRlbHRhWSk7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5WCA9IG92ZXJhbGxWZWxvY2l0eS54O1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVkgPSBvdmVyYWxsVmVsb2NpdHkueTtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHkgPSAoYWJzKG92ZXJhbGxWZWxvY2l0eS54KSA+IGFicyhvdmVyYWxsVmVsb2NpdHkueSkpID8gb3ZlcmFsbFZlbG9jaXR5LnggOiBvdmVyYWxsVmVsb2NpdHkueTtcblxuICAgIGlucHV0LnNjYWxlID0gZmlyc3RNdWx0aXBsZSA/IGdldFNjYWxlKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDE7XG4gICAgaW5wdXQucm90YXRpb24gPSBmaXJzdE11bHRpcGxlID8gZ2V0Um90YXRpb24oZmlyc3RNdWx0aXBsZS5wb2ludGVycywgcG9pbnRlcnMpIDogMDtcblxuICAgIGlucHV0Lm1heFBvaW50ZXJzID0gIXNlc3Npb24ucHJldklucHV0ID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogKChpbnB1dC5wb2ludGVycy5sZW5ndGggPlxuICAgICAgICBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycykgPyBpbnB1dC5wb2ludGVycy5sZW5ndGggOiBzZXNzaW9uLnByZXZJbnB1dC5tYXhQb2ludGVycyk7XG5cbiAgICBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpO1xuXG4gICAgLy8gZmluZCB0aGUgY29ycmVjdCB0YXJnZXRcbiAgICB2YXIgdGFyZ2V0ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIGlmIChoYXNQYXJlbnQoaW5wdXQuc3JjRXZlbnQudGFyZ2V0LCB0YXJnZXQpKSB7XG4gICAgICAgIHRhcmdldCA9IGlucHV0LnNyY0V2ZW50LnRhcmdldDtcbiAgICB9XG4gICAgaW5wdXQudGFyZ2V0ID0gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCkge1xuICAgIHZhciBjZW50ZXIgPSBpbnB1dC5jZW50ZXI7XG4gICAgdmFyIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgfHwge307XG4gICAgdmFyIHByZXZEZWx0YSA9IHNlc3Npb24ucHJldkRlbHRhIHx8IHt9O1xuICAgIHZhciBwcmV2SW5wdXQgPSBzZXNzaW9uLnByZXZJbnB1dCB8fCB7fTtcblxuICAgIGlmIChpbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX1NUQVJUIHx8IHByZXZJbnB1dC5ldmVudFR5cGUgPT09IElOUFVUX0VORCkge1xuICAgICAgICBwcmV2RGVsdGEgPSBzZXNzaW9uLnByZXZEZWx0YSA9IHtcbiAgICAgICAgICAgIHg6IHByZXZJbnB1dC5kZWx0YVggfHwgMCxcbiAgICAgICAgICAgIHk6IHByZXZJbnB1dC5kZWx0YVkgfHwgMFxuICAgICAgICB9O1xuXG4gICAgICAgIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBjZW50ZXIueCxcbiAgICAgICAgICAgIHk6IGNlbnRlci55XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaW5wdXQuZGVsdGFYID0gcHJldkRlbHRhLnggKyAoY2VudGVyLnggLSBvZmZzZXQueCk7XG4gICAgaW5wdXQuZGVsdGFZID0gcHJldkRlbHRhLnkgKyAoY2VudGVyLnkgLSBvZmZzZXQueSk7XG59XG5cbi8qKlxuICogdmVsb2NpdHkgaXMgY2FsY3VsYXRlZCBldmVyeSB4IG1zXG4gKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvblxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVJbnRlcnZhbElucHV0RGF0YShzZXNzaW9uLCBpbnB1dCkge1xuICAgIHZhciBsYXN0ID0gc2Vzc2lvbi5sYXN0SW50ZXJ2YWwgfHwgaW5wdXQsXG4gICAgICAgIGRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGxhc3QudGltZVN0YW1wLFxuICAgICAgICB2ZWxvY2l0eSwgdmVsb2NpdHlYLCB2ZWxvY2l0eVksIGRpcmVjdGlvbjtcblxuICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfQ0FOQ0VMICYmIChkZWx0YVRpbWUgPiBDT01QVVRFX0lOVEVSVkFMIHx8IGxhc3QudmVsb2NpdHkgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGlucHV0LmRlbHRhWCAtIGxhc3QuZGVsdGFYO1xuICAgICAgICB2YXIgZGVsdGFZID0gaW5wdXQuZGVsdGFZIC0gbGFzdC5kZWx0YVk7XG5cbiAgICAgICAgdmFyIHYgPSBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIGRlbHRhWCwgZGVsdGFZKTtcbiAgICAgICAgdmVsb2NpdHlYID0gdi54O1xuICAgICAgICB2ZWxvY2l0eVkgPSB2Lnk7XG4gICAgICAgIHZlbG9jaXR5ID0gKGFicyh2LngpID4gYWJzKHYueSkpID8gdi54IDogdi55O1xuICAgICAgICBkaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oZGVsdGFYLCBkZWx0YVkpO1xuXG4gICAgICAgIHNlc3Npb24ubGFzdEludGVydmFsID0gaW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXNlIGxhdGVzdCB2ZWxvY2l0eSBpbmZvIGlmIGl0IGRvZXNuJ3Qgb3ZlcnRha2UgYSBtaW5pbXVtIHBlcmlvZFxuICAgICAgICB2ZWxvY2l0eSA9IGxhc3QudmVsb2NpdHk7XG4gICAgICAgIHZlbG9jaXR5WCA9IGxhc3QudmVsb2NpdHlYO1xuICAgICAgICB2ZWxvY2l0eVkgPSBsYXN0LnZlbG9jaXR5WTtcbiAgICAgICAgZGlyZWN0aW9uID0gbGFzdC5kaXJlY3Rpb247XG4gICAgfVxuXG4gICAgaW5wdXQudmVsb2NpdHkgPSB2ZWxvY2l0eTtcbiAgICBpbnB1dC52ZWxvY2l0eVggPSB2ZWxvY2l0eVg7XG4gICAgaW5wdXQudmVsb2NpdHlZID0gdmVsb2NpdHlZO1xuICAgIGlucHV0LmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbn1cblxuLyoqXG4gKiBjcmVhdGUgYSBzaW1wbGUgY2xvbmUgZnJvbSB0aGUgaW5wdXQgdXNlZCBmb3Igc3RvcmFnZSBvZiBmaXJzdElucHV0IGFuZCBmaXJzdE11bHRpcGxlXG4gKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAqIEByZXR1cm5zIHtPYmplY3R9IGNsb25lZElucHV0RGF0YVxuICovXG5mdW5jdGlvbiBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCkge1xuICAgIC8vIG1ha2UgYSBzaW1wbGUgY29weSBvZiB0aGUgcG9pbnRlcnMgYmVjYXVzZSB3ZSB3aWxsIGdldCBhIHJlZmVyZW5jZSBpZiB3ZSBkb24ndFxuICAgIC8vIHdlIG9ubHkgbmVlZCBjbGllbnRYWSBmb3IgdGhlIGNhbGN1bGF0aW9uc1xuICAgIHZhciBwb2ludGVycyA9IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGlucHV0LnBvaW50ZXJzLmxlbmd0aCkge1xuICAgICAgICBwb2ludGVyc1tpXSA9IHtcbiAgICAgICAgICAgIGNsaWVudFg6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFgpLFxuICAgICAgICAgICAgY2xpZW50WTogcm91bmQoaW5wdXQucG9pbnRlcnNbaV0uY2xpZW50WSlcbiAgICAgICAgfTtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVTdGFtcDogbm93KCksXG4gICAgICAgIHBvaW50ZXJzOiBwb2ludGVycyxcbiAgICAgICAgY2VudGVyOiBnZXRDZW50ZXIocG9pbnRlcnMpLFxuICAgICAgICBkZWx0YVg6IGlucHV0LmRlbHRhWCxcbiAgICAgICAgZGVsdGFZOiBpbnB1dC5kZWx0YVlcbiAgICB9O1xufVxuXG4vKipcbiAqIGdldCB0aGUgY2VudGVyIG9mIGFsbCB0aGUgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtPYmplY3R9IGNlbnRlciBjb250YWlucyBgeGAgYW5kIGB5YCBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIGdldENlbnRlcihwb2ludGVycykge1xuICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblxuICAgIC8vIG5vIG5lZWQgdG8gbG9vcCB3aGVuIG9ubHkgb25lIHRvdWNoXG4gICAgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRYKSxcbiAgICAgICAgICAgIHk6IHJvdW5kKHBvaW50ZXJzWzBdLmNsaWVudFkpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIHggPSAwLCB5ID0gMCwgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBwb2ludGVyc0xlbmd0aCkge1xuICAgICAgICB4ICs9IHBvaW50ZXJzW2ldLmNsaWVudFg7XG4gICAgICAgIHkgKz0gcG9pbnRlcnNbaV0uY2xpZW50WTtcbiAgICAgICAgaSsrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHJvdW5kKHggLyBwb2ludGVyc0xlbmd0aCksXG4gICAgICAgIHk6IHJvdW5kKHkgLyBwb2ludGVyc0xlbmd0aClcbiAgICB9O1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgdmVsb2NpdHkgYmV0d2VlbiB0d28gcG9pbnRzLiB1bml0IGlzIGluIHB4IHBlciBtcy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBkZWx0YVRpbWVcbiAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gKiBAcGFyYW0ge051bWJlcn0geVxuICogQHJldHVybiB7T2JqZWN0fSB2ZWxvY2l0eSBgeGAgYW5kIGB5YFxuICovXG5mdW5jdGlvbiBnZXRWZWxvY2l0eShkZWx0YVRpbWUsIHgsIHkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB4OiB4IC8gZGVsdGFUaW1lIHx8IDAsXG4gICAgICAgIHk6IHkgLyBkZWx0YVRpbWUgfHwgMFxuICAgIH07XG59XG5cbi8qKlxuICogZ2V0IHRoZSBkaXJlY3Rpb24gYmV0d2VlbiB0d28gcG9pbnRzXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEByZXR1cm4ge051bWJlcn0gZGlyZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldERpcmVjdGlvbih4LCB5KSB7XG4gICAgaWYgKHggPT09IHkpIHtcbiAgICAgICAgcmV0dXJuIERJUkVDVElPTl9OT05FO1xuICAgIH1cblxuICAgIGlmIChhYnMoeCkgPj0gYWJzKHkpKSB7XG4gICAgICAgIHJldHVybiB4IDwgMCA/IERJUkVDVElPTl9MRUZUIDogRElSRUNUSU9OX1JJR0hUO1xuICAgIH1cbiAgICByZXR1cm4geSA8IDAgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFic29sdXRlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xuICogQHBhcmFtIHtPYmplY3R9IHAxIHt4LCB5fVxuICogQHBhcmFtIHtPYmplY3R9IHAyIHt4LCB5fVxuICogQHBhcmFtIHtBcnJheX0gW3Byb3BzXSBjb250YWluaW5nIHggYW5kIHkga2V5c1xuICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuICovXG5mdW5jdGlvbiBnZXREaXN0YW5jZShwMSwgcDIsIHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcykge1xuICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuICAgIH1cbiAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcbiAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcblxuICAgIHJldHVybiBNYXRoLnNxcnQoKHggKiB4KSArICh5ICogeSkpO1xufVxuXG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgYW5nbGUgYmV0d2VlbiB0d28gY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMVxuICogQHBhcmFtIHtPYmplY3R9IHAyXG4gKiBAcGFyYW0ge0FycmF5fSBbcHJvcHNdIGNvbnRhaW5pbmcgeCBhbmQgeSBrZXlzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGFuZ2xlXG4gKi9cbmZ1bmN0aW9uIGdldEFuZ2xlKHAxLCBwMiwgcHJvcHMpIHtcbiAgICBpZiAoIXByb3BzKSB7XG4gICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG4gICAgfVxuICAgIHZhciB4ID0gcDJbcHJvcHNbMF1dIC0gcDFbcHJvcHNbMF1dLFxuICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuICAgIHJldHVybiBNYXRoLmF0YW4yKHksIHgpICogMTgwIC8gTWF0aC5QSTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHJvdGF0aW9uIGRlZ3JlZXMgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcbiAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBlbmQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEByZXR1cm4ge051bWJlcn0gcm90YXRpb25cbiAqL1xuZnVuY3Rpb24gZ2V0Um90YXRpb24oc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBnZXRBbmdsZShlbmRbMV0sIGVuZFswXSwgUFJPUFNfQ0xJRU5UX1hZKSArIGdldEFuZ2xlKHN0YXJ0WzFdLCBzdGFydFswXSwgUFJPUFNfQ0xJRU5UX1hZKTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHNjYWxlIGZhY3RvciBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuICogbm8gc2NhbGUgaXMgMSwgYW5kIGdvZXMgZG93biB0byAwIHdoZW4gcGluY2hlZCB0b2dldGhlciwgYW5kIGJpZ2dlciB3aGVuIHBpbmNoZWQgb3V0XG4gKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHNjYWxlXG4gKi9cbmZ1bmN0aW9uIGdldFNjYWxlKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZ2V0RGlzdGFuY2UoZW5kWzBdLCBlbmRbMV0sIFBST1BTX0NMSUVOVF9YWSkgLyBnZXREaXN0YW5jZShzdGFydFswXSwgc3RhcnRbMV0sIFBST1BTX0NMSUVOVF9YWSk7XG59XG5cbnZhciBNT1VTRV9JTlBVVF9NQVAgPSB7XG4gICAgbW91c2Vkb3duOiBJTlBVVF9TVEFSVCxcbiAgICBtb3VzZW1vdmU6IElOUFVUX01PVkUsXG4gICAgbW91c2V1cDogSU5QVVRfRU5EXG59O1xuXG52YXIgTU9VU0VfRUxFTUVOVF9FVkVOVFMgPSAnbW91c2Vkb3duJztcbnZhciBNT1VTRV9XSU5ET1dfRVZFTlRTID0gJ21vdXNlbW92ZSBtb3VzZXVwJztcblxuLyoqXG4gKiBNb3VzZSBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gTW91c2VJbnB1dCgpIHtcbiAgICB0aGlzLmV2RWwgPSBNT1VTRV9FTEVNRU5UX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gTU9VU0VfV0lORE9XX0VWRU5UUztcblxuICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlOyAvLyBtb3VzZWRvd24gc3RhdGVcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoTW91c2VJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgZXZlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gTUVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBNT1VTRV9JTlBVVF9NQVBbZXYudHlwZV07XG5cbiAgICAgICAgLy8gb24gc3RhcnQgd2Ugd2FudCB0byBoYXZlIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBkb3duXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiBldi5idXR0b24gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucHJlc3NlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfTU9WRSAmJiBldi53aGljaCAhPT0gMSkge1xuICAgICAgICAgICAgZXZlbnRUeXBlID0gSU5QVVRfRU5EO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW91c2UgbXVzdCBiZSBkb3duXG4gICAgICAgIGlmICghdGhpcy5wcmVzc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBldmVudFR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfTU9VU0UsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbnZhciBQT0lOVEVSX0lOUFVUX01BUCA9IHtcbiAgICBwb2ludGVyZG93bjogSU5QVVRfU1RBUlQsXG4gICAgcG9pbnRlcm1vdmU6IElOUFVUX01PVkUsXG4gICAgcG9pbnRlcnVwOiBJTlBVVF9FTkQsXG4gICAgcG9pbnRlcmNhbmNlbDogSU5QVVRfQ0FOQ0VMLFxuICAgIHBvaW50ZXJvdXQ6IElOUFVUX0NBTkNFTFxufTtcblxuLy8gaW4gSUUxMCB0aGUgcG9pbnRlciB0eXBlcyBpcyBkZWZpbmVkIGFzIGFuIGVudW1cbnZhciBJRTEwX1BPSU5URVJfVFlQRV9FTlVNID0ge1xuICAgIDI6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgMzogSU5QVVRfVFlQRV9QRU4sXG4gICAgNDogSU5QVVRfVFlQRV9NT1VTRSxcbiAgICA1OiBJTlBVVF9UWVBFX0tJTkVDVCAvLyBzZWUgaHR0cHM6Ly90d2l0dGVyLmNvbS9qYWNvYnJvc3NpL3N0YXR1cy80ODA1OTY0Mzg0ODk4OTA4MTZcbn07XG5cbnZhciBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ3BvaW50ZXJkb3duJztcbnZhciBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAncG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwnO1xuXG4vLyBJRTEwIGhhcyBwcmVmaXhlZCBzdXBwb3J0LCBhbmQgY2FzZS1zZW5zaXRpdmVcbmlmICh3aW5kb3cuTVNQb2ludGVyRXZlbnQgJiYgIXdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ01TUG9pbnRlckRvd24nO1xuICAgIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbCc7XG59XG5cbi8qKlxuICogUG9pbnRlciBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gUG9pbnRlckV2ZW50SW5wdXQoKSB7XG4gICAgdGhpcy5ldkVsID0gUE9JTlRFUl9FTEVNRU5UX0VWRU5UUztcbiAgICB0aGlzLmV2V2luID0gUE9JTlRFUl9XSU5ET1dfRVZFTlRTO1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuc3RvcmUgPSAodGhpcy5tYW5hZ2VyLnNlc3Npb24ucG9pbnRlckV2ZW50cyA9IFtdKTtcbn1cblxuaW5oZXJpdChQb2ludGVyRXZlbnRJbnB1dCwgSW5wdXQsIHtcbiAgICAvKipcbiAgICAgKiBoYW5kbGUgbW91c2UgZXZlbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gUEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciBzdG9yZSA9IHRoaXMuc3RvcmU7XG4gICAgICAgIHZhciByZW1vdmVQb2ludGVyID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGV2ZW50VHlwZU5vcm1hbGl6ZWQgPSBldi50eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnbXMnLCAnJyk7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBQT0lOVEVSX0lOUFVUX01BUFtldmVudFR5cGVOb3JtYWxpemVkXTtcbiAgICAgICAgdmFyIHBvaW50ZXJUeXBlID0gSUUxMF9QT0lOVEVSX1RZUEVfRU5VTVtldi5wb2ludGVyVHlwZV0gfHwgZXYucG9pbnRlclR5cGU7XG5cbiAgICAgICAgdmFyIGlzVG91Y2ggPSAocG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCk7XG5cbiAgICAgICAgLy8gZ2V0IGluZGV4IG9mIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcbiAgICAgICAgdmFyIHN0b3JlSW5kZXggPSBpbkFycmF5KHN0b3JlLCBldi5wb2ludGVySWQsICdwb2ludGVySWQnKTtcblxuICAgICAgICAvLyBzdGFydCBhbmQgbW91c2UgbXVzdCBiZSBkb3duXG4gICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAoZXYuYnV0dG9uID09PSAwIHx8IGlzVG91Y2gpKSB7XG4gICAgICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICBzdG9yZS5wdXNoKGV2KTtcbiAgICAgICAgICAgICAgICBzdG9yZUluZGV4ID0gc3RvcmUubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICAgICAgcmVtb3ZlUG9pbnRlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpdCBub3QgZm91bmQsIHNvIHRoZSBwb2ludGVyIGhhc24ndCBiZWVuIGRvd24gKHNvIGl0J3MgcHJvYmFibHkgYSBob3ZlcilcbiAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgdGhlIGV2ZW50IGluIHRoZSBzdG9yZVxuICAgICAgICBzdG9yZVtzdG9yZUluZGV4XSA9IGV2O1xuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCBldmVudFR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiBzdG9yZSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBwb2ludGVyVHlwZSxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVtb3ZlUG9pbnRlcikge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gdGhlIHN0b3JlXG4gICAgICAgICAgICBzdG9yZS5zcGxpY2Uoc3RvcmVJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxudmFyIFNJTkdMRV9UT1VDSF9JTlBVVF9NQVAgPSB7XG4gICAgdG91Y2hzdGFydDogSU5QVVRfU1RBUlQsXG4gICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG4gICAgdG91Y2hjYW5jZWw6IElOUFVUX0NBTkNFTFxufTtcblxudmFyIFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQnO1xudmFyIFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblxuLyoqXG4gKiBUb3VjaCBldmVudHMgaW5wdXRcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuZnVuY3Rpb24gU2luZ2xlVG91Y2hJbnB1dCgpIHtcbiAgICB0aGlzLmV2VGFyZ2V0ID0gU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTO1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChTaW5nbGVUb3VjaElucHV0LCBJbnB1dCwge1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFRFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgdHlwZSA9IFNJTkdMRV9UT1VDSF9JTlBVVF9NQVBbZXYudHlwZV07XG5cbiAgICAgICAgLy8gc2hvdWxkIHdlIGhhbmRsZSB0aGUgdG91Y2ggZXZlbnRzP1xuICAgICAgICBpZiAodHlwZSA9PT0gSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvdWNoZXMgPSBub3JtYWxpemVTaW5nbGVUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuXG4gICAgICAgIC8vIHdoZW4gZG9uZSwgcmVzZXQgdGhlIHN0YXJ0ZWQgc3RhdGVcbiAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiB0b3VjaGVzWzBdLmxlbmd0aCAtIHRvdWNoZXNbMV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEB0aGlzIHtUb3VjaElucHV0fVxuICogQHBhcmFtIHtPYmplY3R9IGV2XG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTaW5nbGVUb3VjaGVzKGV2LCB0eXBlKSB7XG4gICAgdmFyIGFsbCA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG4gICAgdmFyIGNoYW5nZWQgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKTtcblxuICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgYWxsID0gdW5pcXVlQXJyYXkoYWxsLmNvbmNhdChjaGFuZ2VkKSwgJ2lkZW50aWZpZXInLCB0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW2FsbCwgY2hhbmdlZF07XG59XG5cbnZhciBUT1VDSF9JTlBVVF9NQVAgPSB7XG4gICAgdG91Y2hzdGFydDogSU5QVVRfU1RBUlQsXG4gICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHRvdWNoZW5kOiBJTlBVVF9FTkQsXG4gICAgdG91Y2hjYW5jZWw6IElOUFVUX0NBTkNFTFxufTtcblxudmFyIFRPVUNIX1RBUkdFVF9FVkVOVFMgPSAndG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnO1xuXG4vKipcbiAqIE11bHRpLXVzZXIgdG91Y2ggZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFRvdWNoSW5wdXQoKSB7XG4gICAgdGhpcy5ldlRhcmdldCA9IFRPVUNIX1RBUkdFVF9FVkVOVFM7XG4gICAgdGhpcy50YXJnZXRJZHMgPSB7fTtcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoVG91Y2hJbnB1dCwgSW5wdXQsIHtcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBNVEVoYW5kbGVyKGV2KSB7XG4gICAgICAgIHZhciB0eXBlID0gVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuICAgICAgICB2YXIgdG91Y2hlcyA9IGdldFRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG4gICAgICAgIGlmICghdG91Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcbiAgICAgICAgICAgIHBvaW50ZXJzOiB0b3VjaGVzWzBdLFxuICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiB0b3VjaGVzWzFdLFxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQHRoaXMge1RvdWNoSW5wdXR9XG4gKiBAcGFyYW0ge09iamVjdH0gZXZcbiAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR8QXJyYXl9IFthbGwsIGNoYW5nZWRdXG4gKi9cbmZ1bmN0aW9uIGdldFRvdWNoZXMoZXYsIHR5cGUpIHtcbiAgICB2YXIgYWxsVG91Y2hlcyA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG4gICAgdmFyIHRhcmdldElkcyA9IHRoaXMudGFyZ2V0SWRzO1xuXG4gICAgLy8gd2hlbiB0aGVyZSBpcyBvbmx5IG9uZSB0b3VjaCwgdGhlIHByb2Nlc3MgY2FuIGJlIHNpbXBsaWZpZWRcbiAgICBpZiAodHlwZSAmIChJTlBVVF9TVEFSVCB8IElOUFVUX01PVkUpICYmIGFsbFRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRhcmdldElkc1thbGxUb3VjaGVzWzBdLmlkZW50aWZpZXJdID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIFthbGxUb3VjaGVzLCBhbGxUb3VjaGVzXTtcbiAgICB9XG5cbiAgICB2YXIgaSxcbiAgICAgICAgdGFyZ2V0VG91Y2hlcyxcbiAgICAgICAgY2hhbmdlZFRvdWNoZXMgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKSxcbiAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMgPSBbXSxcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cbiAgICAvLyBnZXQgdGFyZ2V0IHRvdWNoZXMgZnJvbSB0b3VjaGVzXG4gICAgdGFyZ2V0VG91Y2hlcyA9IGFsbFRvdWNoZXMuZmlsdGVyKGZ1bmN0aW9uKHRvdWNoKSB7XG4gICAgICAgIHJldHVybiBoYXNQYXJlbnQodG91Y2gudGFyZ2V0LCB0YXJnZXQpO1xuICAgIH0pO1xuXG4gICAgLy8gY29sbGVjdCB0b3VjaGVzXG4gICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0YXJnZXRJZHNbdGFyZ2V0VG91Y2hlc1tpXS5pZGVudGlmaWVyXSA9IHRydWU7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgY2hhbmdlZCB0b3VjaGVzIHRvIG9ubHkgY29udGFpbiB0b3VjaGVzIHRoYXQgZXhpc3QgaW4gdGhlIGNvbGxlY3RlZCB0YXJnZXQgaWRzXG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXSkge1xuICAgICAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXMucHVzaChjaGFuZ2VkVG91Y2hlc1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhbnVwIHJlbW92ZWQgdG91Y2hlc1xuICAgICAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgICAgICBkZWxldGUgdGFyZ2V0SWRzW2NoYW5nZWRUb3VjaGVzW2ldLmlkZW50aWZpZXJdO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoIWNoYW5nZWRUYXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIFtcbiAgICAgICAgLy8gbWVyZ2UgdGFyZ2V0VG91Y2hlcyB3aXRoIGNoYW5nZWRUYXJnZXRUb3VjaGVzIHNvIGl0IGNvbnRhaW5zIEFMTCB0b3VjaGVzLCBpbmNsdWRpbmcgJ2VuZCcgYW5kICdjYW5jZWwnXG4gICAgICAgIHVuaXF1ZUFycmF5KHRhcmdldFRvdWNoZXMuY29uY2F0KGNoYW5nZWRUYXJnZXRUb3VjaGVzKSwgJ2lkZW50aWZpZXInLCB0cnVlKSxcbiAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXNcbiAgICBdO1xufVxuXG4vKipcbiAqIENvbWJpbmVkIHRvdWNoIGFuZCBtb3VzZSBpbnB1dFxuICpcbiAqIFRvdWNoIGhhcyBhIGhpZ2hlciBwcmlvcml0eSB0aGVuIG1vdXNlLCBhbmQgd2hpbGUgdG91Y2hpbmcgbm8gbW91c2UgZXZlbnRzIGFyZSBhbGxvd2VkLlxuICogVGhpcyBiZWNhdXNlIHRvdWNoIGRldmljZXMgYWxzbyBlbWl0IG1vdXNlIGV2ZW50cyB3aGlsZSBkb2luZyBhIHRvdWNoLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgSW5wdXRcbiAqL1xuXG52YXIgREVEVVBfVElNRU9VVCA9IDI1MDA7XG52YXIgREVEVVBfRElTVEFOQ0UgPSAyNTtcblxuZnVuY3Rpb24gVG91Y2hNb3VzZUlucHV0KCkge1xuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB2YXIgaGFuZGxlciA9IGJpbmRGbih0aGlzLmhhbmRsZXIsIHRoaXMpO1xuICAgIHRoaXMudG91Y2ggPSBuZXcgVG91Y2hJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuICAgIHRoaXMubW91c2UgPSBuZXcgTW91c2VJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuXG4gICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBudWxsO1xuICAgIHRoaXMubGFzdFRvdWNoZXMgPSBbXTtcbn1cblxuaW5oZXJpdChUb3VjaE1vdXNlSW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGFuZCB0b3VjaCBldmVudHNcbiAgICAgKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dEV2ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFRNRWhhbmRsZXIobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKSB7XG4gICAgICAgIHZhciBpc1RvdWNoID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX1RPVUNIKSxcbiAgICAgICAgICAgIGlzTW91c2UgPSAoaW5wdXREYXRhLnBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfTU9VU0UpO1xuXG4gICAgICAgIGlmIChpc01vdXNlICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMgJiYgaW5wdXREYXRhLnNvdXJjZUNhcGFiaWxpdGllcy5maXJlc1RvdWNoRXZlbnRzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3aGVuIHdlJ3JlIGluIGEgdG91Y2ggZXZlbnQsIHJlY29yZCB0b3VjaGVzIHRvICBkZS1kdXBlIHN5bnRoZXRpYyBtb3VzZSBldmVudFxuICAgICAgICBpZiAoaXNUb3VjaCkge1xuICAgICAgICAgICAgcmVjb3JkVG91Y2hlcy5jYWxsKHRoaXMsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNNb3VzZSAmJiBpc1N5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgaW5wdXREYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYWxsYmFjayhtYW5hZ2VyLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMudG91Y2guZGVzdHJveSgpO1xuICAgICAgICB0aGlzLm1vdXNlLmRlc3Ryb3koKTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gcmVjb3JkVG91Y2hlcyhldmVudFR5cGUsIGV2ZW50RGF0YSkge1xuICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuICAgICAgICB0aGlzLnByaW1hcnlUb3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF0uaWRlbnRpZmllcjtcbiAgICAgICAgc2V0TGFzdFRvdWNoLmNhbGwodGhpcywgZXZlbnREYXRhKTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRMYXN0VG91Y2goZXZlbnREYXRhKSB7XG4gICAgdmFyIHRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXTtcblxuICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09PSB0aGlzLnByaW1hcnlUb3VjaCkge1xuICAgICAgICB2YXIgbGFzdFRvdWNoID0ge3g6IHRvdWNoLmNsaWVudFgsIHk6IHRvdWNoLmNsaWVudFl9O1xuICAgICAgICB0aGlzLmxhc3RUb3VjaGVzLnB1c2gobGFzdFRvdWNoKTtcbiAgICAgICAgdmFyIGx0cyA9IHRoaXMubGFzdFRvdWNoZXM7XG4gICAgICAgIHZhciByZW1vdmVMYXN0VG91Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpID0gbHRzLmluZGV4T2YobGFzdFRvdWNoKTtcbiAgICAgICAgICAgIGlmIChpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBsdHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzZXRUaW1lb3V0KHJlbW92ZUxhc3RUb3VjaCwgREVEVVBfVElNRU9VVCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KGV2ZW50RGF0YSkge1xuICAgIHZhciB4ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFgsIHkgPSBldmVudERhdGEuc3JjRXZlbnQuY2xpZW50WTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGFzdFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLmxhc3RUb3VjaGVzW2ldO1xuICAgICAgICB2YXIgZHggPSBNYXRoLmFicyh4IC0gdC54KSwgZHkgPSBNYXRoLmFicyh5IC0gdC55KTtcbiAgICAgICAgaWYgKGR4IDw9IERFRFVQX0RJU1RBTkNFICYmIGR5IDw9IERFRFVQX0RJU1RBTkNFKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBQUkVGSVhFRF9UT1VDSF9BQ1RJT04gPSBwcmVmaXhlZChURVNUX0VMRU1FTlQuc3R5bGUsICd0b3VjaEFjdGlvbicpO1xudmFyIE5BVElWRV9UT1VDSF9BQ1RJT04gPSBQUkVGSVhFRF9UT1VDSF9BQ1RJT04gIT09IHVuZGVmaW5lZDtcblxuLy8gbWFnaWNhbCB0b3VjaEFjdGlvbiB2YWx1ZVxudmFyIFRPVUNIX0FDVElPTl9DT01QVVRFID0gJ2NvbXB1dGUnO1xudmFyIFRPVUNIX0FDVElPTl9BVVRPID0gJ2F1dG8nO1xudmFyIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT04gPSAnbWFuaXB1bGF0aW9uJzsgLy8gbm90IGltcGxlbWVudGVkXG52YXIgVE9VQ0hfQUNUSU9OX05PTkUgPSAnbm9uZSc7XG52YXIgVE9VQ0hfQUNUSU9OX1BBTl9YID0gJ3Bhbi14JztcbnZhciBUT1VDSF9BQ1RJT05fUEFOX1kgPSAncGFuLXknO1xudmFyIFRPVUNIX0FDVElPTl9NQVAgPSBnZXRUb3VjaEFjdGlvblByb3BzKCk7XG5cbi8qKlxuICogVG91Y2ggQWN0aW9uXG4gKiBzZXRzIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBvciB1c2VzIHRoZSBqcyBhbHRlcm5hdGl2ZVxuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBUb3VjaEFjdGlvbihtYW5hZ2VyLCB2YWx1ZSkge1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5zZXQodmFsdWUpO1xufVxuXG5Ub3VjaEFjdGlvbi5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZSBvbiB0aGUgZWxlbWVudCBvciBlbmFibGUgdGhlIHBvbHlmaWxsXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyBmaW5kIG91dCB0aGUgdG91Y2gtYWN0aW9uIGJ5IHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAodmFsdWUgPT0gVE9VQ0hfQUNUSU9OX0NPTVBVVEUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5jb21wdXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoTkFUSVZFX1RPVUNIX0FDVElPTiAmJiB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZSAmJiBUT1VDSF9BQ1RJT05fTUFQW3ZhbHVlXSkge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGVbUFJFRklYRURfVE9VQ0hfQUNUSU9OXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IHZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBqdXN0IHJlLXNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWVcbiAgICAgKi9cbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldCh0aGlzLm1hbmFnZXIub3B0aW9ucy50b3VjaEFjdGlvbik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNvbXB1dGUgdGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgYmFzZWQgb24gdGhlIHJlY29nbml6ZXIncyBzZXR0aW5nc1xuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgY29tcHV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhY3Rpb25zID0gW107XG4gICAgICAgIGVhY2godGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLCBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG4gICAgICAgICAgICBpZiAoYm9vbE9yRm4ocmVjb2duaXplci5vcHRpb25zLmVuYWJsZSwgW3JlY29nbml6ZXJdKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBhY3Rpb25zLmNvbmNhdChyZWNvZ25pemVyLmdldFRvdWNoQWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMuam9pbignICcpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdGhpcyBtZXRob2QgaXMgY2FsbGVkIG9uIGVhY2ggaW5wdXQgY3ljbGUgYW5kIHByb3ZpZGVzIHRoZSBwcmV2ZW50aW5nIG9mIHRoZSBicm93c2VyIGJlaGF2aW9yXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgcHJldmVudERlZmF1bHRzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc3JjRXZlbnQgPSBpbnB1dC5zcmNFdmVudDtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0Lm9mZnNldERpcmVjdGlvbjtcblxuICAgICAgICAvLyBpZiB0aGUgdG91Y2ggYWN0aW9uIGRpZCBwcmV2ZW50ZWQgb25jZSB0aGlzIHNlc3Npb25cbiAgICAgICAgaWYgKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCkge1xuICAgICAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5hY3Rpb25zO1xuICAgICAgICB2YXIgaGFzTm9uZSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fTk9ORV07XG4gICAgICAgIHZhciBoYXNQYW5ZID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9ZKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fUEFOX1ldO1xuICAgICAgICB2YXIgaGFzUGFuWCA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWCkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX1BBTl9YXTtcblxuICAgICAgICBpZiAoaGFzTm9uZSkge1xuICAgICAgICAgICAgLy9kbyBub3QgcHJldmVudCBkZWZhdWx0cyBpZiB0aGlzIGlzIGEgdGFwIGdlc3R1cmVcblxuICAgICAgICAgICAgdmFyIGlzVGFwUG9pbnRlciA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgIHZhciBpc1RhcE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCAyO1xuICAgICAgICAgICAgdmFyIGlzVGFwVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgMjUwO1xuXG4gICAgICAgICAgICBpZiAoaXNUYXBQb2ludGVyICYmIGlzVGFwTW92ZW1lbnQgJiYgaXNUYXBUb3VjaFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzUGFuWCAmJiBoYXNQYW5ZKSB7XG4gICAgICAgICAgICAvLyBgcGFuLXggcGFuLXlgIG1lYW5zIGJyb3dzZXIgaGFuZGxlcyBhbGwgc2Nyb2xsaW5nL3Bhbm5pbmcsIGRvIG5vdCBwcmV2ZW50XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzTm9uZSB8fFxuICAgICAgICAgICAgKGhhc1BhblkgJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHx8XG4gICAgICAgICAgICAoaGFzUGFuWCAmJiBkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2ZW50U3JjKHNyY0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjYWxsIHByZXZlbnREZWZhdWx0IHRvIHByZXZlbnQgdGhlIGJyb3dzZXIncyBkZWZhdWx0IGJlaGF2aW9yIChzY3JvbGxpbmcgaW4gbW9zdCBjYXNlcylcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3JjRXZlbnRcbiAgICAgKi9cbiAgICBwcmV2ZW50U3JjOiBmdW5jdGlvbihzcmNFdmVudCkge1xuICAgICAgICB0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbn07XG5cbi8qKlxuICogd2hlbiB0aGUgdG91Y2hBY3Rpb25zIGFyZSBjb2xsZWN0ZWQgdGhleSBhcmUgbm90IGEgdmFsaWQgdmFsdWUsIHNvIHdlIG5lZWQgdG8gY2xlYW4gdGhpbmdzIHVwLiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uc1xuICogQHJldHVybnMgeyp9XG4gKi9cbmZ1bmN0aW9uIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMpIHtcbiAgICAvLyBub25lXG4gICAgaWYgKGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpO1xuICAgIHZhciBoYXNQYW5ZID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcblxuICAgIC8vIGlmIGJvdGggcGFuLXggYW5kIHBhbi15IGFyZSBzZXQgKGRpZmZlcmVudCByZWNvZ25pemVyc1xuICAgIC8vIGZvciBkaWZmZXJlbnQgZGlyZWN0aW9ucywgZS5nLiBob3Jpem9udGFsIHBhbiBidXQgdmVydGljYWwgc3dpcGU/KVxuICAgIC8vIHdlIG5lZWQgbm9uZSAoYXMgb3RoZXJ3aXNlIHdpdGggcGFuLXggcGFuLXkgY29tYmluZWQgbm9uZSBvZiB0aGVzZVxuICAgIC8vIHJlY29nbml6ZXJzIHdpbGwgd29yaywgc2luY2UgdGhlIGJyb3dzZXIgd291bGQgaGFuZGxlIGFsbCBwYW5uaW5nXG4gICAgaWYgKGhhc1BhblggJiYgaGFzUGFuWSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG4gICAgfVxuXG4gICAgLy8gcGFuLXggT1IgcGFuLXlcbiAgICBpZiAoaGFzUGFuWCB8fCBoYXNQYW5ZKSB7XG4gICAgICAgIHJldHVybiBoYXNQYW5YID8gVE9VQ0hfQUNUSU9OX1BBTl9YIDogVE9VQ0hfQUNUSU9OX1BBTl9ZO1xuICAgIH1cblxuICAgIC8vIG1hbmlwdWxhdGlvblxuICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OKSkge1xuICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTjtcbiAgICB9XG5cbiAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX0FVVE87XG59XG5cbmZ1bmN0aW9uIGdldFRvdWNoQWN0aW9uUHJvcHMoKSB7XG4gICAgaWYgKCFOQVRJVkVfVE9VQ0hfQUNUSU9OKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRvdWNoTWFwID0ge307XG4gICAgdmFyIGNzc1N1cHBvcnRzID0gd2luZG93LkNTUyAmJiB3aW5kb3cuQ1NTLnN1cHBvcnRzO1xuICAgIFsnYXV0bycsICdtYW5pcHVsYXRpb24nLCAncGFuLXknLCAncGFuLXgnLCAncGFuLXggcGFuLXknLCAnbm9uZSddLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XG5cbiAgICAgICAgLy8gSWYgY3NzLnN1cHBvcnRzIGlzIG5vdCBzdXBwb3J0ZWQgYnV0IHRoZXJlIGlzIG5hdGl2ZSB0b3VjaC1hY3Rpb24gYXNzdW1lIGl0IHN1cHBvcnRzXG4gICAgICAgIC8vIGFsbCB2YWx1ZXMuIFRoaXMgaXMgdGhlIGNhc2UgZm9yIElFIDEwIGFuZCAxMS5cbiAgICAgICAgdG91Y2hNYXBbdmFsXSA9IGNzc1N1cHBvcnRzID8gd2luZG93LkNTUy5zdXBwb3J0cygndG91Y2gtYWN0aW9uJywgdmFsKSA6IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvdWNoTWFwO1xufVxuXG4vKipcbiAqIFJlY29nbml6ZXIgZmxvdyBleHBsYWluZWQ7ICpcbiAqIEFsbCByZWNvZ25pemVycyBoYXZlIHRoZSBpbml0aWFsIHN0YXRlIG9mIFBPU1NJQkxFIHdoZW4gYSBpbnB1dCBzZXNzaW9uIHN0YXJ0cy5cbiAqIFRoZSBkZWZpbml0aW9uIG9mIGEgaW5wdXQgc2Vzc2lvbiBpcyBmcm9tIHRoZSBmaXJzdCBpbnB1dCB1bnRpbCB0aGUgbGFzdCBpbnB1dCwgd2l0aCBhbGwgaXQncyBtb3ZlbWVudCBpbiBpdC4gKlxuICogRXhhbXBsZSBzZXNzaW9uIGZvciBtb3VzZS1pbnB1dDogbW91c2Vkb3duIC0+IG1vdXNlbW92ZSAtPiBtb3VzZXVwXG4gKlxuICogT24gZWFjaCByZWNvZ25pemluZyBjeWNsZSAoc2VlIE1hbmFnZXIucmVjb2duaXplKSB0aGUgLnJlY29nbml6ZSgpIG1ldGhvZCBpcyBleGVjdXRlZFxuICogd2hpY2ggZGV0ZXJtaW5lcyB3aXRoIHN0YXRlIGl0IHNob3VsZCBiZS5cbiAqXG4gKiBJZiB0aGUgcmVjb2duaXplciBoYXMgdGhlIHN0YXRlIEZBSUxFRCwgQ0FOQ0VMTEVEIG9yIFJFQ09HTklaRUQgKGVxdWFscyBFTkRFRCksIGl0IGlzIHJlc2V0IHRvXG4gKiBQT1NTSUJMRSB0byBnaXZlIGl0IGFub3RoZXIgY2hhbmdlIG9uIHRoZSBuZXh0IGN5Y2xlLlxuICpcbiAqICAgICAgICAgICAgICAgUG9zc2libGVcbiAqICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICArLS0tLS0rLS0tLS0tLS0tLS0tLS0tK1xuICogICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICArLS0tLS0rLS0tLS0rICAgICAgICAgICAgICAgfFxuICogICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgfFxuICogICBGYWlsZWQgICAgICBDYW5jZWxsZWQgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tKy0tLS0tLStcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICBSZWNvZ25pemVkICAgICAgIEJlZ2FuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmRlZC9SZWNvZ25pemVkXG4gKi9cbnZhciBTVEFURV9QT1NTSUJMRSA9IDE7XG52YXIgU1RBVEVfQkVHQU4gPSAyO1xudmFyIFNUQVRFX0NIQU5HRUQgPSA0O1xudmFyIFNUQVRFX0VOREVEID0gODtcbnZhciBTVEFURV9SRUNPR05JWkVEID0gU1RBVEVfRU5ERUQ7XG52YXIgU1RBVEVfQ0FOQ0VMTEVEID0gMTY7XG52YXIgU1RBVEVfRkFJTEVEID0gMzI7XG5cbi8qKlxuICogUmVjb2duaXplclxuICogRXZlcnkgcmVjb2duaXplciBuZWVkcyB0byBleHRlbmQgZnJvbSB0aGlzIGNsYXNzLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBSZWNvZ25pemVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24oe30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdGhpcy5pZCA9IHVuaXF1ZUlkKCk7XG5cbiAgICB0aGlzLm1hbmFnZXIgPSBudWxsO1xuXG4gICAgLy8gZGVmYXVsdCBpcyBlbmFibGUgdHJ1ZVxuICAgIHRoaXMub3B0aW9ucy5lbmFibGUgPSBpZlVuZGVmaW5lZCh0aGlzLm9wdGlvbnMuZW5hYmxlLCB0cnVlKTtcblxuICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcblxuICAgIHRoaXMuc2ltdWx0YW5lb3VzID0ge307XG4gICAgdGhpcy5yZXF1aXJlRmFpbCA9IFtdO1xufVxuXG5SZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgZGVmYXVsdHM6IHt9LFxuXG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEByZXR1cm4ge1JlY29nbml6ZXJ9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIGFsc28gdXBkYXRlIHRoZSB0b3VjaEFjdGlvbiwgaW4gY2FzZSBzb21ldGhpbmcgY2hhbmdlZCBhYm91dCB0aGUgZGlyZWN0aW9ucy9lbmFibGVkIHN0YXRlXG4gICAgICAgIHRoaXMubWFuYWdlciAmJiB0aGlzLm1hbmFnZXIudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZWNvZ25pemUgc2ltdWx0YW5lb3VzIHdpdGggYW4gb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgcmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZWNvZ25pemVXaXRoJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNpbXVsdGFuZW91cyA9IHRoaXMuc2ltdWx0YW5lb3VzO1xuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGlmICghc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0pIHtcbiAgICAgICAgICAgIHNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdID0gb3RoZXJSZWNvZ25pemVyO1xuICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlY29nbml6ZVdpdGgodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGRyb3AgdGhlIHNpbXVsdGFuZW91cyBsaW5rLiBpdCBkb2VzbnQgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBkcm9wUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdkcm9wUmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIG90aGVyUmVjb2duaXplciA9IGdldFJlY29nbml6ZXJCeU5hbWVJZk1hbmFnZXIob3RoZXJSZWNvZ25pemVyLCB0aGlzKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZWNvZ25pemVyIGNhbiBvbmx5IHJ1biB3aGVuIGFuIG90aGVyIGlzIGZhaWxpbmdcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgcmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVxdWlyZUZhaWx1cmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVxdWlyZUZhaWwgPSB0aGlzLnJlcXVpcmVGYWlsO1xuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGlmIChpbkFycmF5KHJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpID09PSAtMSkge1xuICAgICAgICAgICAgcmVxdWlyZUZhaWwucHVzaChvdGhlclJlY29nbml6ZXIpO1xuICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkcm9wIHRoZSByZXF1aXJlRmFpbHVyZSBsaW5rLiBpdCBkb2VzIG5vdCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIGRyb3BSZXF1aXJlRmFpbHVyZTogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdkcm9wUmVxdWlyZUZhaWx1cmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkodGhpcy5yZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogaGFzIHJlcXVpcmUgZmFpbHVyZXMgYm9vbGVhblxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGhhc1JlcXVpcmVGYWlsdXJlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCA+IDA7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGlmIHRoZSByZWNvZ25pemVyIGNhbiByZWNvZ25pemUgc2ltdWx0YW5lb3VzIHdpdGggYW4gb3RoZXIgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFlvdSBzaG91bGQgdXNlIGB0cnlFbWl0YCBpbnN0ZWFkIG9mIGBlbWl0YCBkaXJlY3RseSB0byBjaGVja1xuICAgICAqIHRoYXQgYWxsIHRoZSBuZWVkZWQgcmVjb2duaXplcnMgaGFzIGZhaWxlZCBiZWZvcmUgZW1pdHRpbmcuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICAgICAgICAgIHNlbGYubWFuYWdlci5lbWl0KGV2ZW50LCBpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAncGFuc3RhcnQnIGFuZCAncGFubW92ZSdcbiAgICAgICAgaWYgKHN0YXRlIDwgU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50KTsgLy8gc2ltcGxlICdldmVudE5hbWUnIGV2ZW50c1xuXG4gICAgICAgIGlmIChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpIHsgLy8gYWRkaXRpb25hbCBldmVudChwYW5sZWZ0LCBwYW5yaWdodCwgcGluY2hpbiwgcGluY2hvdXQuLi4pXG4gICAgICAgICAgICBlbWl0KGlucHV0LmFkZGl0aW9uYWxFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYW5lbmQgYW5kIHBhbmNhbmNlbFxuICAgICAgICBpZiAoc3RhdGUgPj0gU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGF0IGFsbCB0aGUgcmVxdWlyZSBmYWlsdXJlIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQsXG4gICAgICogaWYgdHJ1ZSwgaXQgZW1pdHMgYSBnZXN0dXJlIGV2ZW50LFxuICAgICAqIG90aGVyd2lzZSwgc2V0dXAgdGhlIHN0YXRlIHRvIEZBSUxFRC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKi9cbiAgICB0cnlFbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5jYW5FbWl0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGl0J3MgZmFpbGluZyBhbnl3YXlcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FuIHdlIGVtaXQ/XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuRW1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEodGhpcy5yZXF1aXJlRmFpbFtpXS5zdGF0ZSAmIChTVEFURV9GQUlMRUQgfCBTVEFURV9QT1NTSUJMRSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1cGRhdGUgdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcbiAgICAgICAgLy8gbWFrZSBhIG5ldyBjb3B5IG9mIHRoZSBpbnB1dERhdGFcbiAgICAgICAgLy8gc28gd2UgY2FuIGNoYW5nZSB0aGUgaW5wdXREYXRhIHdpdGhvdXQgbWVzc2luZyB1cCB0aGUgb3RoZXIgcmVjb2duaXplcnNcbiAgICAgICAgdmFyIGlucHV0RGF0YUNsb25lID0gYXNzaWduKHt9LCBpbnB1dERhdGEpO1xuXG4gICAgICAgIC8vIGlzIGlzIGVuYWJsZWQgYW5kIGFsbG93IHJlY29nbml6aW5nP1xuICAgICAgICBpZiAoIWJvb2xPckZuKHRoaXMub3B0aW9ucy5lbmFibGUsIFt0aGlzLCBpbnB1dERhdGFDbG9uZV0pKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVzZXQgd2hlbiB3ZSd2ZSByZWFjaGVkIHRoZSBlbmRcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgJiAoU1RBVEVfUkVDT0dOSVpFRCB8IFNUQVRFX0NBTkNFTExFRCB8IFNUQVRFX0ZBSUxFRCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnByb2Nlc3MoaW5wdXREYXRhQ2xvbmUpO1xuXG4gICAgICAgIC8vIHRoZSByZWNvZ25pemVyIGhhcyByZWNvZ25pemVkIGEgZ2VzdHVyZVxuICAgICAgICAvLyBzbyB0cmlnZ2VyIGFuIGV2ZW50XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEIHwgU1RBVEVfQ0FOQ0VMTEVEKSkge1xuICAgICAgICAgICAgdGhpcy50cnlFbWl0KGlucHV0RGF0YUNsb25lKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIHN0YXRlIG9mIHRoZSByZWNvZ25pemVyXG4gICAgICogdGhlIGFjdHVhbCByZWNvZ25pemluZyBoYXBwZW5zIGluIHRoaXMgbWV0aG9kXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICogQHJldHVybnMge0NvbnN0fSBTVEFURVxuICAgICAqL1xuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0RGF0YSkgeyB9LCAvLyBqc2hpbnQgaWdub3JlOmxpbmVcblxuICAgIC8qKlxuICAgICAqIHJldHVybiB0aGUgcHJlZmVycmVkIHRvdWNoLWFjdGlvblxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHJldHVybnMge0FycmF5fVxuICAgICAqL1xuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHsgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbGxlZCB3aGVuIHRoZSBnZXN0dXJlIGlzbid0IGFsbG93ZWQgdG8gcmVjb2duaXplXG4gICAgICogbGlrZSB3aGVuIGFub3RoZXIgaXMgYmVpbmcgcmVjb2duaXplZCBvciBpdCBpcyBkaXNhYmxlZFxuICAgICAqIEB2aXJ0dWFsXG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkgeyB9XG59O1xuXG4vKipcbiAqIGdldCBhIHVzYWJsZSBzdHJpbmcsIHVzZWQgYXMgZXZlbnQgcG9zdGZpeFxuICogQHBhcmFtIHtDb25zdH0gc3RhdGVcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0YXRlXG4gKi9cbmZ1bmN0aW9uIHN0YXRlU3RyKHN0YXRlKSB7XG4gICAgaWYgKHN0YXRlICYgU1RBVEVfQ0FOQ0VMTEVEKSB7XG4gICAgICAgIHJldHVybiAnY2FuY2VsJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfRU5ERUQpIHtcbiAgICAgICAgcmV0dXJuICdlbmQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9DSEFOR0VEKSB7XG4gICAgICAgIHJldHVybiAnbW92ZSc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0JFR0FOKSB7XG4gICAgICAgIHJldHVybiAnc3RhcnQnO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogZGlyZWN0aW9uIGNvbnMgdG8gc3RyaW5nXG4gKiBAcGFyYW0ge0NvbnN0fSBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGlvblN0cihkaXJlY3Rpb24pIHtcbiAgICBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9ET1dOKSB7XG4gICAgICAgIHJldHVybiAnZG93bic7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1VQKSB7XG4gICAgICAgIHJldHVybiAndXAnO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9MRUZUKSB7XG4gICAgICAgIHJldHVybiAnbGVmdCc7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1JJR0hUKSB7XG4gICAgICAgIHJldHVybiAncmlnaHQnO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogZ2V0IGEgcmVjb2duaXplciBieSBuYW1lIGlmIGl0IGlzIGJvdW5kIHRvIGEgbWFuYWdlclxuICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gb3RoZXJSZWNvZ25pemVyXG4gKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcbiAqIEByZXR1cm5zIHtSZWNvZ25pemVyfVxuICovXG5mdW5jdGlvbiBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgcmVjb2duaXplcikge1xuICAgIHZhciBtYW5hZ2VyID0gcmVjb2duaXplci5tYW5hZ2VyO1xuICAgIGlmIChtYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyLmdldChvdGhlclJlY29nbml6ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gb3RoZXJSZWNvZ25pemVyO1xufVxuXG4vKipcbiAqIFRoaXMgcmVjb2duaXplciBpcyBqdXN0IHVzZWQgYXMgYSBiYXNlIGZvciB0aGUgc2ltcGxlIGF0dHJpYnV0ZSByZWNvZ25pemVycy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBBdHRyUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoQXR0clJlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIHBvaW50ZXJzOiAxXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gY2hlY2sgaWYgaXQgdGhlIHJlY29nbml6ZXIgcmVjZWl2ZXMgdmFsaWQgaW5wdXQsIGxpa2UgaW5wdXQuZGlzdGFuY2UgPiAxMC5cbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gcmVjb2duaXplZFxuICAgICAqL1xuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9uUG9pbnRlcnMgPSB0aGlzLm9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHJldHVybiBvcHRpb25Qb2ludGVycyA9PT0gMCB8fCBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvblBvaW50ZXJzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIHRoZSBpbnB1dCBhbmQgcmV0dXJuIHRoZSBzdGF0ZSBmb3IgdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAbWVtYmVyb2YgQXR0clJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcbiAgICAgKiBAcmV0dXJucyB7Kn0gU3RhdGVcbiAgICAgKi9cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gaW5wdXQuZXZlbnRUeXBlO1xuXG4gICAgICAgIHZhciBpc1JlY29nbml6ZWQgPSBzdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQpO1xuICAgICAgICB2YXIgaXNWYWxpZCA9IHRoaXMuYXR0clRlc3QoaW5wdXQpO1xuXG4gICAgICAgIC8vIG9uIGNhbmNlbCBpbnB1dCBhbmQgd2UndmUgcmVjb2duaXplZCBiZWZvcmUsIHJldHVybiBTVEFURV9DQU5DRUxMRURcbiAgICAgICAgaWYgKGlzUmVjb2duaXplZCAmJiAoZXZlbnRUeXBlICYgSU5QVVRfQ0FOQ0VMIHx8ICFpc1ZhbGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0FOQ0VMTEVEO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUmVjb2duaXplZCB8fCBpc1ZhbGlkKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfRU5ERUQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCEoc3RhdGUgJiBTVEFURV9CRUdBTikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DSEFOR0VEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUGFuXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBhbmQgbW92ZWQgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQYW5SZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnBYID0gbnVsbDtcbiAgICB0aGlzLnBZID0gbnVsbDtcbn1cblxuaW5oZXJpdChQYW5SZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGFuUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncGFuJyxcbiAgICAgICAgdGhyZXNob2xkOiAxMCxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0FMTFxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChUT1VDSF9BQ1RJT05fUEFOX1kpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChUT1VDSF9BQ1RJT05fUEFOX1gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY3Rpb25zO1xuICAgIH0sXG5cbiAgICBkaXJlY3Rpb25UZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdmFyIGhhc01vdmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gaW5wdXQuZGlzdGFuY2U7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5kaXJlY3Rpb247XG4gICAgICAgIHZhciB4ID0gaW5wdXQuZGVsdGFYO1xuICAgICAgICB2YXIgeSA9IGlucHV0LmRlbHRhWTtcblxuICAgICAgICAvLyBsb2NrIHRvIGF4aXM/XG4gICAgICAgIGlmICghKGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uKSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlyZWN0aW9uICYgRElSRUNUSU9OX0hPUklaT05UQUwpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeCA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh4IDwgMCkgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHggIT0gdGhpcy5wWDtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICh5ID09PSAwKSA/IERJUkVDVElPTl9OT05FIDogKHkgPCAwKSA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xuICAgICAgICAgICAgICAgIGhhc01vdmVkID0geSAhPSB0aGlzLnBZO1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIHJldHVybiBoYXNNb3ZlZCAmJiBkaXN0YW5jZSA+IG9wdGlvbnMudGhyZXNob2xkICYmIGRpcmVjdGlvbiAmIG9wdGlvbnMuZGlyZWN0aW9uO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIEF0dHJSZWNvZ25pemVyLnByb3RvdHlwZS5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTiB8fCAoISh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pICYmIHRoaXMuZGlyZWN0aW9uVGVzdChpbnB1dCkpKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblxuICAgICAgICB0aGlzLnBYID0gaW5wdXQuZGVsdGFYO1xuICAgICAgICB0aGlzLnBZID0gaW5wdXQuZGVsdGFZO1xuXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJlY3Rpb25TdHIoaW5wdXQuZGlyZWN0aW9uKTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpbnB1dC5hZGRpdGlvbmFsRXZlbnQgPSB0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQaW5jaFxuICogUmVjb2duaXplZCB3aGVuIHR3byBvciBtb3JlIHBvaW50ZXJzIGFyZSBtb3ZpbmcgdG93YXJkICh6b29tLWluKSBvciBhd2F5IGZyb20gZWFjaCBvdGhlciAoem9vbS1vdXQpLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQaW5jaFJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChQaW5jaFJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3BpbmNoJyxcbiAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICBwb2ludGVyczogMlxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAoTWF0aC5hYnMoaW5wdXQuc2NhbGUgLSAxKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0LnNjYWxlICE9PSAxKSB7XG4gICAgICAgICAgICB2YXIgaW5PdXQgPSBpbnB1dC5zY2FsZSA8IDEgPyAnaW4nIDogJ291dCc7XG4gICAgICAgICAgICBpbnB1dC5hZGRpdGlvbmFsRXZlbnQgPSB0aGlzLm9wdGlvbnMuZXZlbnQgKyBpbk91dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFByZXNzXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG93biBmb3IgeCBtcyB3aXRob3V0IGFueSBtb3ZlbWVudC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBQcmVzc1JlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcbn1cblxuaW5oZXJpdChQcmVzc1JlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFByZXNzUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncHJlc3MnLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgdGltZTogMjUxLCAvLyBtaW5pbWFsIHRpbWUgb2YgdGhlIHBvaW50ZXIgdG8gYmUgcHJlc3NlZFxuICAgICAgICB0aHJlc2hvbGQ6IDkgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9BVVRPXTtcbiAgICB9LFxuXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgIHZhciB2YWxpZFRpbWUgPSBpbnB1dC5kZWx0YVRpbWUgPiBvcHRpb25zLnRpbWU7XG5cbiAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcblxuICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG4gICAgICAgIGlmICghdmFsaWRNb3ZlbWVudCB8fCAhdmFsaWRQb2ludGVycyB8fCAoaW5wdXQuZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgIXZhbGlkVGltZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeUVtaXQoKTtcbiAgICAgICAgICAgIH0sIG9wdGlvbnMudGltZSwgdGhpcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lcik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTVEFURV9SRUNPR05JWkVEKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXQgJiYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArICd1cCcsIGlucHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuLyoqXG4gKiBSb3RhdGVcbiAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVyIGFyZSBtb3ZpbmcgaW4gYSBjaXJjdWxhciBtb3Rpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFJvdGF0ZVJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChSb3RhdGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUm90YXRlUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIGV2ZW50OiAncm90YXRlJyxcbiAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICBwb2ludGVyczogMlxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgIH0sXG5cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICAoTWF0aC5hYnMoaW5wdXQucm90YXRpb24pID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCB8fCB0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFN3aXBlXG4gKiBSZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgbW92aW5nIGZhc3QgKHZlbG9jaXR5KSwgd2l0aCBlbm91Z2ggZGlzdGFuY2UgaW4gdGhlIGFsbG93ZWQgZGlyZWN0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBTd2lwZVJlY29nbml6ZXIoKSB7XG4gICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuaW5oZXJpdChTd2lwZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBTd2lwZVJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3N3aXBlJyxcbiAgICAgICAgdGhyZXNob2xkOiAxMCxcbiAgICAgICAgdmVsb2NpdHk6IDAuMyxcbiAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCxcbiAgICAgICAgcG9pbnRlcnM6IDFcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gUGFuUmVjb2duaXplci5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgdmVsb2NpdHk7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIChESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCkpIHtcbiAgICAgICAgICAgIHZlbG9jaXR5ID0gaW5wdXQub3ZlcmFsbFZlbG9jaXR5O1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVg7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgIGRpcmVjdGlvbiAmIGlucHV0Lm9mZnNldERpcmVjdGlvbiAmJlxuICAgICAgICAgICAgaW5wdXQuZGlzdGFuY2UgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkICYmXG4gICAgICAgICAgICBpbnB1dC5tYXhQb2ludGVycyA9PSB0aGlzLm9wdGlvbnMucG9pbnRlcnMgJiZcbiAgICAgICAgICAgIGFicyh2ZWxvY2l0eSkgPiB0aGlzLm9wdGlvbnMudmVsb2NpdHkgJiYgaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0Lm9mZnNldERpcmVjdGlvbik7XG4gICAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbiwgaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQSB0YXAgaXMgZWNvZ25pemVkIHdoZW4gdGhlIHBvaW50ZXIgaXMgZG9pbmcgYSBzbWFsbCB0YXAvY2xpY2suIE11bHRpcGxlIHRhcHMgYXJlIHJlY29nbml6ZWQgaWYgdGhleSBvY2N1clxuICogYmV0d2VlbiB0aGUgZ2l2ZW4gaW50ZXJ2YWwgYW5kIHBvc2l0aW9uLiBUaGUgZGVsYXkgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHJlY29nbml6ZSBtdWx0aS10YXBzIHdpdGhvdXQgZmlyaW5nXG4gKiBhIHNpbmdsZSB0YXAuXG4gKlxuICogVGhlIGV2ZW50RGF0YSBmcm9tIHRoZSBlbWl0dGVkIGV2ZW50IGNvbnRhaW5zIHRoZSBwcm9wZXJ0eSBgdGFwQ291bnRgLCB3aGljaCBjb250YWlucyB0aGUgYW1vdW50IG9mXG4gKiBtdWx0aS10YXBzIGJlaW5nIHJlY29nbml6ZWQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gVGFwUmVjb2duaXplcigpIHtcbiAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAvLyBwcmV2aW91cyB0aW1lIGFuZCBjZW50ZXIsXG4gICAgLy8gdXNlZCBmb3IgdGFwIGNvdW50aW5nXG4gICAgdGhpcy5wVGltZSA9IGZhbHNlO1xuICAgIHRoaXMucENlbnRlciA9IGZhbHNlO1xuXG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcbiAgICB0aGlzLmNvdW50ID0gMDtcbn1cblxuaW5oZXJpdChUYXBSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3RhcCcsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICB0YXBzOiAxLFxuICAgICAgICBpbnRlcnZhbDogMzAwLCAvLyBtYXggdGltZSBiZXR3ZWVuIHRoZSBtdWx0aS10YXAgdGFwc1xuICAgICAgICB0aW1lOiAyNTAsIC8vIG1heCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIGRvd24gKGxpa2UgZmluZ2VyIG9uIHRoZSBzY3JlZW4pXG4gICAgICAgIHRocmVzaG9sZDogOSwgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcbiAgICAgICAgcG9zVGhyZXNob2xkOiAxMCAvLyBhIG11bHRpLXRhcCBjYW4gYmUgYSBiaXQgb2ZmIHRoZSBpbml0aWFsIHBvc2l0aW9uXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OXTtcbiAgICB9LFxuXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgdmFyIHZhbGlkUG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IG9wdGlvbnMucG9pbnRlcnM7XG4gICAgICAgIHZhciB2YWxpZE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZDtcbiAgICAgICAgdmFyIHZhbGlkVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgb3B0aW9ucy50aW1lO1xuXG4gICAgICAgIHRoaXMucmVzZXQoKTtcblxuICAgICAgICBpZiAoKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSAmJiAodGhpcy5jb3VudCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG4gICAgICAgIGlmICh2YWxpZE1vdmVtZW50ICYmIHZhbGlkVG91Y2hUaW1lICYmIHZhbGlkUG9pbnRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfRU5EKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbGlkSW50ZXJ2YWwgPSB0aGlzLnBUaW1lID8gKGlucHV0LnRpbWVTdGFtcCAtIHRoaXMucFRpbWUgPCBvcHRpb25zLmludGVydmFsKSA6IHRydWU7XG4gICAgICAgICAgICB2YXIgdmFsaWRNdWx0aVRhcCA9ICF0aGlzLnBDZW50ZXIgfHwgZ2V0RGlzdGFuY2UodGhpcy5wQ2VudGVyLCBpbnB1dC5jZW50ZXIpIDwgb3B0aW9ucy5wb3NUaHJlc2hvbGQ7XG5cbiAgICAgICAgICAgIHRoaXMucFRpbWUgPSBpbnB1dC50aW1lU3RhbXA7XG4gICAgICAgICAgICB0aGlzLnBDZW50ZXIgPSBpbnB1dC5jZW50ZXI7XG5cbiAgICAgICAgICAgIGlmICghdmFsaWRNdWx0aVRhcCB8fCAhdmFsaWRJbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ICs9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgICAgIC8vIGlmIHRhcCBjb3VudCBtYXRjaGVzIHdlIGhhdmUgcmVjb2duaXplZCBpdCxcbiAgICAgICAgICAgIC8vIGVsc2UgaXQgaGFzIGJlZ2FuIHJlY29nbml6aW5nLi4uXG4gICAgICAgICAgICB2YXIgdGFwQ291bnQgPSB0aGlzLmNvdW50ICUgb3B0aW9ucy50YXBzO1xuICAgICAgICAgICAgaWYgKHRhcENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gZmFpbGluZyByZXF1aXJlbWVudHMsIGltbWVkaWF0ZWx5IHRyaWdnZXIgdGhlIHRhcCBldmVudFxuICAgICAgICAgICAgICAgIC8vIG9yIHdhaXQgYXMgbG9uZyBhcyB0aGUgbXVsdGl0YXAgaW50ZXJ2YWwgdG8gdHJpZ2dlclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNSZXF1aXJlRmFpbHVyZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyeUVtaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgZmFpbFRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXRDb250ZXh0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICAgICAgfSwgdGhpcy5vcHRpb25zLmludGVydmFsLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuICAgICAgICAgICAgdGhpcy5faW5wdXQudGFwQ291bnQgPSB0aGlzLmNvdW50O1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuLyoqXG4gKiBTaW1wbGUgd2F5IHRvIGNyZWF0ZSBhIG1hbmFnZXIgd2l0aCBhIGRlZmF1bHQgc2V0IG9mIHJlY29nbml6ZXJzLlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEhhbW1lcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgb3B0aW9ucy5yZWNvZ25pemVycyA9IGlmVW5kZWZpbmVkKG9wdGlvbnMucmVjb2duaXplcnMsIEhhbW1lci5kZWZhdWx0cy5wcmVzZXQpO1xuICAgIHJldHVybiBuZXcgTWFuYWdlcihlbGVtZW50LCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuSGFtbWVyLlZFUlNJT04gPSAnMi4wLjcnO1xuXG4vKipcbiAqIGRlZmF1bHQgc2V0dGluZ3NcbiAqIEBuYW1lc3BhY2VcbiAqL1xuSGFtbWVyLmRlZmF1bHRzID0ge1xuICAgIC8qKlxuICAgICAqIHNldCBpZiBET00gZXZlbnRzIGFyZSBiZWluZyB0cmlnZ2VyZWQuXG4gICAgICogQnV0IHRoaXMgaXMgc2xvd2VyIGFuZCB1bnVzZWQgYnkgc2ltcGxlIGltcGxlbWVudGF0aW9ucywgc28gZGlzYWJsZWQgYnkgZGVmYXVsdC5cbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgIGRvbUV2ZW50czogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eS9mYWxsYmFjay5cbiAgICAgKiBXaGVuIHNldCB0byBgY29tcHV0ZWAgaXQgd2lsbCBtYWdpY2FsbHkgc2V0IHRoZSBjb3JyZWN0IHZhbHVlIGJhc2VkIG9uIHRoZSBhZGRlZCByZWNvZ25pemVycy5cbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqIEBkZWZhdWx0IGNvbXB1dGVcbiAgICAgKi9cbiAgICB0b3VjaEFjdGlvbjogVE9VQ0hfQUNUSU9OX0NPTVBVVEUsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgZW5hYmxlOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogRVhQRVJJTUVOVEFMIEZFQVRVUkUgLS0gY2FuIGJlIHJlbW92ZWQvY2hhbmdlZFxuICAgICAqIENoYW5nZSB0aGUgcGFyZW50IGlucHV0IHRhcmdldCBlbGVtZW50LlxuICAgICAqIElmIE51bGwsIHRoZW4gaXQgaXMgYmVpbmcgc2V0IHRoZSB0byBtYWluIGVsZW1lbnQuXG4gICAgICogQHR5cGUge051bGx8RXZlbnRUYXJnZXR9XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIGlucHV0VGFyZ2V0OiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogZm9yY2UgYW4gaW5wdXQgY2xhc3NcbiAgICAgKiBAdHlwZSB7TnVsbHxGdW5jdGlvbn1cbiAgICAgKiBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgaW5wdXRDbGFzczogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgcmVjb2duaXplciBzZXR1cCB3aGVuIGNhbGxpbmcgYEhhbW1lcigpYFxuICAgICAqIFdoZW4gY3JlYXRpbmcgYSBuZXcgTWFuYWdlciB0aGVzZSB3aWxsIGJlIHNraXBwZWQuXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqL1xuICAgIHByZXNldDogW1xuICAgICAgICAvLyBSZWNvZ25pemVyQ2xhc3MsIG9wdGlvbnMsIFtyZWNvZ25pemVXaXRoLCAuLi5dLCBbcmVxdWlyZUZhaWx1cmUsIC4uLl1cbiAgICAgICAgW1JvdGF0ZVJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfV0sXG4gICAgICAgIFtQaW5jaFJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfSwgWydyb3RhdGUnXV0sXG4gICAgICAgIFtTd2lwZVJlY29nbml6ZXIsIHtkaXJlY3Rpb246IERJUkVDVElPTl9IT1JJWk9OVEFMfV0sXG4gICAgICAgIFtQYW5SZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH0sIFsnc3dpcGUnXV0sXG4gICAgICAgIFtUYXBSZWNvZ25pemVyXSxcbiAgICAgICAgW1RhcFJlY29nbml6ZXIsIHtldmVudDogJ2RvdWJsZXRhcCcsIHRhcHM6IDJ9LCBbJ3RhcCddXSxcbiAgICAgICAgW1ByZXNzUmVjb2duaXplcl1cbiAgICBdLFxuXG4gICAgLyoqXG4gICAgICogU29tZSBDU1MgcHJvcGVydGllcyBjYW4gYmUgdXNlZCB0byBpbXByb3ZlIHRoZSB3b3JraW5nIG9mIEhhbW1lci5cbiAgICAgKiBBZGQgdGhlbSB0byB0aGlzIG1ldGhvZCBhbmQgdGhleSB3aWxsIGJlIHNldCB3aGVuIGNyZWF0aW5nIGEgbmV3IE1hbmFnZXIuXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqL1xuICAgIGNzc1Byb3BzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyB0ZXh0IHNlbGVjdGlvbiB0byBpbXByb3ZlIHRoZSBkcmFnZ2luZyBnZXN0dXJlLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlIHRoZSBXaW5kb3dzIFBob25lIGdyaXBwZXJzIHdoZW4gcHJlc3NpbmcgYW4gZWxlbWVudC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB0b3VjaFNlbGVjdDogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNhYmxlcyB0aGUgZGVmYXVsdCBjYWxsb3V0IHNob3duIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0LlxuICAgICAgICAgKiBPbiBpT1MsIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0IHN1Y2ggYXMgYSBsaW5rLCBTYWZhcmkgZGlzcGxheXNcbiAgICAgICAgICogYSBjYWxsb3V0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGxpbmsuIFRoaXMgcHJvcGVydHkgYWxsb3dzIHlvdSB0byBkaXNhYmxlIHRoYXQgY2FsbG91dC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB0b3VjaENhbGxvdXQ6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHdoZXRoZXIgem9vbWluZyBpcyBlbmFibGVkLiBVc2VkIGJ5IElFMTA+XG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgY29udGVudFpvb21pbmc6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRoYXQgYW4gZW50aXJlIGVsZW1lbnQgc2hvdWxkIGJlIGRyYWdnYWJsZSBpbnN0ZWFkIG9mIGl0cyBjb250ZW50cy4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHVzZXJEcmFnOiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE92ZXJyaWRlcyB0aGUgaGlnaGxpZ2h0IGNvbG9yIHNob3duIHdoZW4gdGhlIHVzZXIgdGFwcyBhIGxpbmsgb3IgYSBKYXZhU2NyaXB0XG4gICAgICAgICAqIGNsaWNrYWJsZSBlbGVtZW50IGluIGlPUy4gVGhpcyBwcm9wZXJ0eSBvYmV5cyB0aGUgYWxwaGEgdmFsdWUsIGlmIHNwZWNpZmllZC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ3JnYmEoMCwwLDAsMCknXG4gICAgICAgICAqL1xuICAgICAgICB0YXBIaWdobGlnaHRDb2xvcjogJ3JnYmEoMCwwLDAsMCknXG4gICAgfVxufTtcblxudmFyIFNUT1AgPSAxO1xudmFyIEZPUkNFRF9TVE9QID0gMjtcblxuLyoqXG4gKiBNYW5hZ2VyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gTWFuYWdlcihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCBIYW1tZXIuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0ID0gdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0IHx8IGVsZW1lbnQ7XG5cbiAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgdGhpcy5zZXNzaW9uID0ge307XG4gICAgdGhpcy5yZWNvZ25pemVycyA9IFtdO1xuICAgIHRoaXMub2xkQ3NzUHJvcHMgPSB7fTtcblxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5pbnB1dCA9IGNyZWF0ZUlucHV0SW5zdGFuY2UodGhpcyk7XG4gICAgdGhpcy50b3VjaEFjdGlvbiA9IG5ldyBUb3VjaEFjdGlvbih0aGlzLCB0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pO1xuXG4gICAgdG9nZ2xlQ3NzUHJvcHModGhpcywgdHJ1ZSk7XG5cbiAgICBlYWNoKHRoaXMub3B0aW9ucy5yZWNvZ25pemVycywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgcmVjb2duaXplciA9IHRoaXMuYWRkKG5ldyAoaXRlbVswXSkoaXRlbVsxXSkpO1xuICAgICAgICBpdGVtWzJdICYmIHJlY29nbml6ZXIucmVjb2duaXplV2l0aChpdGVtWzJdKTtcbiAgICAgICAgaXRlbVszXSAmJiByZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKGl0ZW1bM10pO1xuICAgIH0sIHRoaXMpO1xufVxuXG5NYW5hZ2VyLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHJldHVybnMge01hbmFnZXJ9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIE9wdGlvbnMgdGhhdCBuZWVkIGEgbGl0dGxlIG1vcmUgc2V0dXBcbiAgICAgICAgaWYgKG9wdGlvbnMudG91Y2hBY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaW5wdXRUYXJnZXQpIHtcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVpbml0aWFsaXplXG4gICAgICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQudGFyZ2V0ID0gb3B0aW9ucy5pbnB1dFRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuaW5pdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBzdG9wIHJlY29nbml6aW5nIGZvciB0aGlzIHNlc3Npb24uXG4gICAgICogVGhpcyBzZXNzaW9uIHdpbGwgYmUgZGlzY2FyZGVkLCB3aGVuIGEgbmV3IFtpbnB1dF1zdGFydCBldmVudCBpcyBmaXJlZC5cbiAgICAgKiBXaGVuIGZvcmNlZCwgdGhlIHJlY29nbml6ZXIgY3ljbGUgaXMgc3RvcHBlZCBpbW1lZGlhdGVseS5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmb3JjZV1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihmb3JjZSkge1xuICAgICAgICB0aGlzLnNlc3Npb24uc3RvcHBlZCA9IGZvcmNlID8gRk9SQ0VEX1NUT1AgOiBTVE9QO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBydW4gdGhlIHJlY29nbml6ZXJzIVxuICAgICAqIGNhbGxlZCBieSB0aGUgaW5wdXRIYW5kbGVyIGZ1bmN0aW9uIG9uIGV2ZXJ5IG1vdmVtZW50IG9mIHRoZSBwb2ludGVycyAodG91Y2hlcylcbiAgICAgKiBpdCB3YWxrcyB0aHJvdWdoIGFsbCB0aGUgcmVjb2duaXplcnMgYW5kIHRyaWVzIHRvIGRldGVjdCB0aGUgZ2VzdHVyZSB0aGF0IGlzIGJlaW5nIG1hZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXREYXRhXG4gICAgICovXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIGlmIChzZXNzaW9uLnN0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJ1biB0aGUgdG91Y2gtYWN0aW9uIHBvbHlmaWxsXG4gICAgICAgIHRoaXMudG91Y2hBY3Rpb24ucHJldmVudERlZmF1bHRzKGlucHV0RGF0YSk7XG5cbiAgICAgICAgdmFyIHJlY29nbml6ZXI7XG4gICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG5cbiAgICAgICAgLy8gdGhpcyBob2xkcyB0aGUgcmVjb2duaXplciB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgIC8vIHNvIHRoZSByZWNvZ25pemVyJ3Mgc3RhdGUgbmVlZHMgdG8gYmUgQkVHQU4sIENIQU5HRUQsIEVOREVEIG9yIFJFQ09HTklaRURcbiAgICAgICAgLy8gaWYgbm8gcmVjb2duaXplciBpcyBkZXRlY3RpbmcgYSB0aGluZywgaXQgaXMgc2V0IHRvIGBudWxsYFxuICAgICAgICB2YXIgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplcjtcblxuICAgICAgICAvLyByZXNldCB3aGVuIHRoZSBsYXN0IHJlY29nbml6ZXIgaXMgcmVjb2duaXplZFxuICAgICAgICAvLyBvciB3aGVuIHdlJ3JlIGluIGEgbmV3IHNlc3Npb25cbiAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyIHx8IChjdXJSZWNvZ25pemVyICYmIGN1clJlY29nbml6ZXIuc3RhdGUgJiBTVEFURV9SRUNPR05JWkVEKSkge1xuICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgcmVjb2duaXplcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWNvZ25pemVyID0gcmVjb2duaXplcnNbaV07XG5cbiAgICAgICAgICAgIC8vIGZpbmQgb3V0IGlmIHdlIGFyZSBhbGxvd2VkIHRyeSB0byByZWNvZ25pemUgdGhlIGlucHV0IGZvciB0aGlzIG9uZS5cbiAgICAgICAgICAgIC8vIDEuICAgYWxsb3cgaWYgdGhlIHNlc3Npb24gaXMgTk9UIGZvcmNlZCBzdG9wcGVkIChzZWUgdGhlIC5zdG9wKCkgbWV0aG9kKVxuICAgICAgICAgICAgLy8gMi4gICBhbGxvdyBpZiB3ZSBzdGlsbCBoYXZlbid0IHJlY29nbml6ZWQgYSBnZXN0dXJlIGluIHRoaXMgc2Vzc2lvbiwgb3IgdGhlIHRoaXMgcmVjb2duaXplciBpcyB0aGUgb25lXG4gICAgICAgICAgICAvLyAgICAgIHRoYXQgaXMgYmVpbmcgcmVjb2duaXplZC5cbiAgICAgICAgICAgIC8vIDMuICAgYWxsb3cgaWYgdGhlIHJlY29nbml6ZXIgaXMgYWxsb3dlZCB0byBydW4gc2ltdWx0YW5lb3VzIHdpdGggdGhlIGN1cnJlbnQgcmVjb2duaXplZCByZWNvZ25pemVyLlxuICAgICAgICAgICAgLy8gICAgICB0aGlzIGNhbiBiZSBzZXR1cCB3aXRoIHRoZSBgcmVjb2duaXplV2l0aCgpYCBtZXRob2Qgb24gdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkICE9PSBGT1JDRURfU1RPUCAmJiAoIC8vIDFcbiAgICAgICAgICAgICAgICAgICAgIWN1clJlY29nbml6ZXIgfHwgcmVjb2duaXplciA9PSBjdXJSZWNvZ25pemVyIHx8IC8vIDJcbiAgICAgICAgICAgICAgICAgICAgcmVjb2duaXplci5jYW5SZWNvZ25pemVXaXRoKGN1clJlY29nbml6ZXIpKSkgeyAvLyAzXG4gICAgICAgICAgICAgICAgcmVjb2duaXplci5yZWNvZ25pemUoaW5wdXREYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjb2duaXplci5yZXNldCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB0aGUgcmVjb2duaXplciBoYXMgYmVlbiByZWNvZ25pemluZyB0aGUgaW5wdXQgYXMgYSB2YWxpZCBnZXN0dXJlLCB3ZSB3YW50IHRvIHN0b3JlIHRoaXMgb25lIGFzIHRoZVxuICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgcmVjb2duaXplci4gYnV0IG9ubHkgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGFuIGFjdGl2ZSByZWNvZ25pemVyXG4gICAgICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgJiYgcmVjb2duaXplci5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCkpIHtcbiAgICAgICAgICAgICAgICBjdXJSZWNvZ25pemVyID0gc2Vzc2lvbi5jdXJSZWNvZ25pemVyID0gcmVjb2duaXplcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBnZXQgYSByZWNvZ25pemVyIGJ5IGl0cyBldmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcnxOdWxsfVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAocmVjb2duaXplciBpbnN0YW5jZW9mIFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvZ25pemVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHJlY29nbml6ZXJzW2ldLm9wdGlvbnMuZXZlbnQgPT0gcmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogYWRkIGEgcmVjb2duaXplciB0byB0aGUgbWFuYWdlclxuICAgICAqIGV4aXN0aW5nIHJlY29nbml6ZXJzIHdpdGggdGhlIHNhbWUgZXZlbnQgbmFtZSB3aWxsIGJlIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcnxNYW5hZ2VyfVxuICAgICAqL1xuICAgIGFkZDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ2FkZCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbW92ZSBleGlzdGluZ1xuICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChyZWNvZ25pemVyLm9wdGlvbnMuZXZlbnQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGV4aXN0aW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVjb2duaXplcnMucHVzaChyZWNvZ25pemVyKTtcbiAgICAgICAgcmVjb2duaXplci5tYW5hZ2VyID0gdGhpcztcblxuICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGEgcmVjb2duaXplciBieSBuYW1lIG9yIGluc3RhbmNlXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gcmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuICAgICAqL1xuICAgIHJlbW92ZTogZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ3JlbW92ZScsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlY29nbml6ZXIgPSB0aGlzLmdldChyZWNvZ25pemVyKTtcblxuICAgICAgICAvLyBsZXQncyBtYWtlIHN1cmUgdGhpcyByZWNvZ25pemVyIGV4aXN0c1xuICAgICAgICBpZiAocmVjb2duaXplcikge1xuICAgICAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkocmVjb2duaXplcnMsIHJlY29nbml6ZXIpO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVjb2duaXplcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGJpbmQgZXZlbnRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnRzLCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSA9IGhhbmRsZXJzW2V2ZW50XSB8fCBbXTtcbiAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHVuYmluZCBldmVudCwgbGVhdmUgZW1pdCBibGFuayB0byByZW1vdmUgYWxsIGhhbmRsZXJzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtoYW5kbGVyXVxuICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBoYW5kbGVyc1tldmVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSAmJiBoYW5kbGVyc1tldmVudF0uc3BsaWNlKGluQXJyYXkoaGFuZGxlcnNbZXZlbnRdLCBoYW5kbGVyKSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZW1pdCBldmVudCB0byB0aGUgbGlzdGVuZXJzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBlbWl0OiBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuICAgICAgICAvLyB3ZSBhbHNvIHdhbnQgdG8gdHJpZ2dlciBkb20gZXZlbnRzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZG9tRXZlbnRzKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gaGFuZGxlcnMsIHNvIHNraXAgaXQgYWxsXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbZXZlbnRdICYmIHRoaXMuaGFuZGxlcnNbZXZlbnRdLnNsaWNlKCk7XG4gICAgICAgIGlmICghaGFuZGxlcnMgfHwgIWhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS50eXBlID0gZXZlbnQ7XG4gICAgICAgIGRhdGEucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRhdGEuc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgaGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tpXShkYXRhKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkZXN0cm95IHRoZSBtYW5hZ2VyIGFuZCB1bmJpbmRzIGFsbCBldmVudHNcbiAgICAgKiBpdCBkb2Vzbid0IHVuYmluZCBkb20gZXZlbnRzLCB0aGF0IGlzIHRoZSB1c2VyIG93biByZXNwb25zaWJpbGl0eVxuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgJiYgdG9nZ2xlQ3NzUHJvcHModGhpcywgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0ge307XG4gICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgIH1cbn07XG5cbi8qKlxuICogYWRkL3JlbW92ZSB0aGUgY3NzIHByb3BlcnRpZXMgYXMgZGVmaW5lZCBpbiBtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHNcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtCb29sZWFufSBhZGRcbiAqL1xuZnVuY3Rpb24gdG9nZ2xlQ3NzUHJvcHMobWFuYWdlciwgYWRkKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBtYW5hZ2VyLmVsZW1lbnQ7XG4gICAgaWYgKCFlbGVtZW50LnN0eWxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHByb3A7XG4gICAgZWFjaChtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHMsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHByb3AgPSBwcmVmaXhlZChlbGVtZW50LnN0eWxlLCBuYW1lKTtcbiAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSA9IGVsZW1lbnQuc3R5bGVbcHJvcF07XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BdID0gbWFuYWdlci5vbGRDc3NQcm9wc1twcm9wXSB8fCAnJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghYWRkKSB7XG4gICAgICAgIG1hbmFnZXIub2xkQ3NzUHJvcHMgPSB7fTtcbiAgICB9XG59XG5cbi8qKlxuICogdHJpZ2dlciBkb20gZXZlbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAqL1xuZnVuY3Rpb24gdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgdmFyIGdlc3R1cmVFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIGdlc3R1cmVFdmVudC5pbml0RXZlbnQoZXZlbnQsIHRydWUsIHRydWUpO1xuICAgIGdlc3R1cmVFdmVudC5nZXN0dXJlID0gZGF0YTtcbiAgICBkYXRhLnRhcmdldC5kaXNwYXRjaEV2ZW50KGdlc3R1cmVFdmVudCk7XG59XG5cbmFzc2lnbihIYW1tZXIsIHtcbiAgICBJTlBVVF9TVEFSVDogSU5QVVRfU1RBUlQsXG4gICAgSU5QVVRfTU9WRTogSU5QVVRfTU9WRSxcbiAgICBJTlBVVF9FTkQ6IElOUFVUX0VORCxcbiAgICBJTlBVVF9DQU5DRUw6IElOUFVUX0NBTkNFTCxcblxuICAgIFNUQVRFX1BPU1NJQkxFOiBTVEFURV9QT1NTSUJMRSxcbiAgICBTVEFURV9CRUdBTjogU1RBVEVfQkVHQU4sXG4gICAgU1RBVEVfQ0hBTkdFRDogU1RBVEVfQ0hBTkdFRCxcbiAgICBTVEFURV9FTkRFRDogU1RBVEVfRU5ERUQsXG4gICAgU1RBVEVfUkVDT0dOSVpFRDogU1RBVEVfUkVDT0dOSVpFRCxcbiAgICBTVEFURV9DQU5DRUxMRUQ6IFNUQVRFX0NBTkNFTExFRCxcbiAgICBTVEFURV9GQUlMRUQ6IFNUQVRFX0ZBSUxFRCxcblxuICAgIERJUkVDVElPTl9OT05FOiBESVJFQ1RJT05fTk9ORSxcbiAgICBESVJFQ1RJT05fTEVGVDogRElSRUNUSU9OX0xFRlQsXG4gICAgRElSRUNUSU9OX1JJR0hUOiBESVJFQ1RJT05fUklHSFQsXG4gICAgRElSRUNUSU9OX1VQOiBESVJFQ1RJT05fVVAsXG4gICAgRElSRUNUSU9OX0RPV046IERJUkVDVElPTl9ET1dOLFxuICAgIERJUkVDVElPTl9IT1JJWk9OVEFMOiBESVJFQ1RJT05fSE9SSVpPTlRBTCxcbiAgICBESVJFQ1RJT05fVkVSVElDQUw6IERJUkVDVElPTl9WRVJUSUNBTCxcbiAgICBESVJFQ1RJT05fQUxMOiBESVJFQ1RJT05fQUxMLFxuXG4gICAgTWFuYWdlcjogTWFuYWdlcixcbiAgICBJbnB1dDogSW5wdXQsXG4gICAgVG91Y2hBY3Rpb246IFRvdWNoQWN0aW9uLFxuXG4gICAgVG91Y2hJbnB1dDogVG91Y2hJbnB1dCxcbiAgICBNb3VzZUlucHV0OiBNb3VzZUlucHV0LFxuICAgIFBvaW50ZXJFdmVudElucHV0OiBQb2ludGVyRXZlbnRJbnB1dCxcbiAgICBUb3VjaE1vdXNlSW5wdXQ6IFRvdWNoTW91c2VJbnB1dCxcbiAgICBTaW5nbGVUb3VjaElucHV0OiBTaW5nbGVUb3VjaElucHV0LFxuXG4gICAgUmVjb2duaXplcjogUmVjb2duaXplcixcbiAgICBBdHRyUmVjb2duaXplcjogQXR0clJlY29nbml6ZXIsXG4gICAgVGFwOiBUYXBSZWNvZ25pemVyLFxuICAgIFBhbjogUGFuUmVjb2duaXplcixcbiAgICBTd2lwZTogU3dpcGVSZWNvZ25pemVyLFxuICAgIFBpbmNoOiBQaW5jaFJlY29nbml6ZXIsXG4gICAgUm90YXRlOiBSb3RhdGVSZWNvZ25pemVyLFxuICAgIFByZXNzOiBQcmVzc1JlY29nbml6ZXIsXG5cbiAgICBvbjogYWRkRXZlbnRMaXN0ZW5lcnMsXG4gICAgb2ZmOiByZW1vdmVFdmVudExpc3RlbmVycyxcbiAgICBlYWNoOiBlYWNoLFxuICAgIG1lcmdlOiBtZXJnZSxcbiAgICBleHRlbmQ6IGV4dGVuZCxcbiAgICBhc3NpZ246IGFzc2lnbixcbiAgICBpbmhlcml0OiBpbmhlcml0LFxuICAgIGJpbmRGbjogYmluZEZuLFxuICAgIHByZWZpeGVkOiBwcmVmaXhlZFxufSk7XG5cbi8vIHRoaXMgcHJldmVudHMgZXJyb3JzIHdoZW4gSGFtbWVyIGlzIGxvYWRlZCBpbiB0aGUgcHJlc2VuY2Ugb2YgYW4gQU1EXG4vLyAgc3R5bGUgbG9hZGVyIGJ1dCBieSBzY3JpcHQgdGFnLCBub3QgYnkgdGhlIGxvYWRlci5cbnZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fSkpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbmZyZWVHbG9iYWwuSGFtbWVyID0gSGFtbWVyO1xuXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gSGFtbWVyO1xuICAgIH0pO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBIYW1tZXI7XG59IGVsc2Uge1xuICAgIHdpbmRvd1tleHBvcnROYW1lXSA9IEhhbW1lcjtcbn1cblxufSkod2luZG93LCBkb2N1bWVudCwgJ0hhbW1lcicpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuLi9+L2hhbW1lcmpzL2hhbW1lci5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiW3tcXG4gIFxcXCJpZFxcXCI6IDEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQ3JvbiAoam9iIHNjaGVkdWxlcilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkl0IGNvbWVzIGZyb20gdGhlIEdyZWVrIHdvcmQgZm9yIHRpbWUsIGNocm9ub3MgKM+Hz4HPjM69zr/PgikuIENocm9ub3MgaXMgdGhlIHBlcnNvbmlmaWNhdGlvbiBvZiB0aW1lIGluIGVhcmx5IEdyZWVrIG15dGhvbG9neSBhbmQgbGl0ZXJhdHVyZS4gSGUgbGF0ZXIgYXBwZWFycyBpbiB0aGUgUmVuYWlzc2FuY2UgYXMgRmF0aGVyIFRpbWUuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiT1NcXFwiLFxcbiAgICBcXFwidW5peFxcXCIsXFxuICAgIFxcXCJsaW51eFxcXCIsXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb25cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEYWVtb25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB0ZXJtIGNvaW5lZCBieSBwcm9ncmFtbWVycyBvZiBNSVQncyBQcm9qZWN0IE1BQywgd2FzIGluc3BpcmVkIGJ5IHRoZSBwaHlzaWNpc3QgSmFtZXMgQ2xlcmsgTWF4d2VsbCdzIGRlbW9uLiBJdCBvcmlnaW5hdGVkIGFzIGFuIGltYWdpbmFyeSBiZWluZyBmcm9tIGEgdGhvdWdodCBleHBlcmltZW50IHRoYXQgY29uc3RhbnRseSB3b3JrcyBpbiB0aGUgYmFja2dyb3VuZCBzb3J0aW5nIG1vbGVjdWxlcy4gSW4gR3JlZWsgbXl0aG9sb2d5LCBhIGRhZW1vbiBpcyBhIHN1cGVybmF0dXJhbCBiZWluZyB3b3JraW5nIGluIHRoZSBiYWNrZ3JvdW5kLCB3aXRoIG5vIHBhcnRpY3VsYXIgYmlhcyB0b3dhcmRzIGdvb2Qgb3IgZXZpbC4gVGhlIGRhZW1vbiBjb25jZXB0IHdhcyBzdWJzZXF1ZW50bHkgYWRvcHRlZCBieSBVbml4IHN5c3RlbXMsIGhvd2V2ZXIsIEJTRCBhbmQgc29tZSBvZiBpdHMgZGVyaXZhdGl2ZXMgaGF2ZSB1c2VkIGEgQ2hyaXN0aWFuIGludGVycHJldGF0aW9uIG9mIHRoZSBteXRob2xvZ2ljYWwgZGVhbW9uIGFzIHRoZWlyIG1hc2NvdCByYXRoZXIgdGhhbiBhIEdyZWVrIGRhZW1vbi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJPU1xcXCIsXFxuICAgIFxcXCJ1bml4XFxcIixcXG4gICAgXFxcImxpbnV4XFxcIixcXG4gICAgXFxcIm9wZW4gc291cmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGFlbW9uXyhjb21wdXRpbmcpI0V0eW1vbG9neVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBvbHltb3JwaGlzbVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiSW4gcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzIGFuZCB0eXBlIHRoZW9yeSwgcG9seW1vcnBoaXNtIGlzIHRoZSBwcm92aXNpb24gb2YgYSBzaW5nbGUgaW50ZXJmYWNlIHRvIGVudGl0aWVzIG9mIGRpZmZlcmVudCB0eXBlcy4gUG9seW1vcnBoaXNtIGNvbWVzIGZyb20gdGhlIGdyZWVrIHdvcmRzLCBwb2x5cyAoz4DOv867z43PgiksIG1lYW5pbmcgXFxcXFxcXCJtdWNoXFxcXFxcXCIgb3IgXFxcXFxcXCJtYW55XFxcXFxcXCIgYW5kIG1vcnBoxJMgKM68zr/Pgc+Gzq4pLCBtZWFuaW5nIFxcXFxcXFwiZm9ybVxcXFxcXFwiIG9yIFxcXFxcXFwic2hhcGVcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiKEFwYWNoZSkgQ2Fzc2FuZHJhXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBcGFjaGUgQ2Fzc2FuZHJhIHdhcyBuYW1lZCBhZnRlciBDYXNzYW5kcmEgKEdyZWVrOiDOms6xz4PPg86szr3OtM+BzrEsIGFsc28gzprOsc+DzqzOvc60z4HOsSksIGRhdWdodGVyIG9mIEtpbmcgUHJpYW0gYW5kIFF1ZWVuIEhlY3ViYSBvZiBUcm95LiBBIGNvbW1vbiB2ZXJzaW9uIG9mIGhlciBzdG9yeSBpcyB0aGF0IEFwb2xsbyBnYXZlIGhlciB0aGUgcG93ZXIgb2YgcHJvcGhlY3kgaW4gb3JkZXIgdG8gc2VkdWNlIGhlciwgYnV0IHdoZW4gc2hlIHNwdXJuZWQgaGlzIGFkdmFuY2VzLCBoZSBzcGF0IGludG8gaGVyIG1vdXRoIHRvIGVuc3VyZSB0aGF0IENhZGFuZHJh4oCZcyBwcm9waGVzaWVzIGZlbGwgb24gZGVhZiBlYXJzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm9wZW4gc291cmNlXFxcIixcXG4gICAgXFxcImRhdGFiYXNlc1xcXCIsXFxuICAgIFxcXCJiaWcgZGF0YVxcXCIsXFxuICAgIFxcXCJub1NRTFxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQc2V1ZG9cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBwcmVmaXggcHNldWRvIGNvbWVzIGZyb20gcHNldWRlcyAoz4jOtc+FzrTOrs+CLCksIG1lYW5pbmcgXFxcXFxcXCJseWluZ1xcXFxcXFwiIG9yIFxcXFxcXFwiZmFsc2VcXFxcXFxcIi4gVGhlIHRlcm0gcmVmZXJzIHRvIHNvbWV0aGluZyB3aGljaCBhcHBlYXJzLCBvbiB0aGUgc3VyZmFjZSwgdG8gYmUgb25lIHRoaW5nLCBidXQgaXMgYWN0dWFsbHkgYW5vdGhlci4gUHNldWRvIG1heSBjb25ub3RlIGNvaW5jaWRlbmNlLCBpbWl0YXRpb24sIGludGVudGlvbmFsIGRlY2VwdGlvbiwgb3IgYSBjb21iaW5hdGlvbiB0aGVyZW9mLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCIsXFxuICAgIFxcXCJDU1NcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiVHJvamFuIGhvcnNlXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgdGVybSBjb21lcyBmcm9tIHRoZSBBbmNpZW50IEdyZWVrIHN0b3J5IG9mIHRoZSB3b29kZW4gaG9yc2UgdGhhdCB3YXMgdXNlZCBieSB0aGUgR3JlZWsgdHJvb3BzIHRvIGludmFkZSBUcm95IGJ5IHN0ZWFsdGggZnJvbSB3aXRoaW4gdGhlIGNpdHnigJlzIHdhbGxzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvY2lhbCBlbmdpbmVlcmluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlRlY2hub2xvZ3lcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRlY2hub2xvZ3kgZGVyaXZlcyBmcm9tIHRoZSBHcmVlayB3b3JkcyB0ZWNobmUgKM+Ezq3Ph869zrcpLCBtZWFuaW5nIGFydCwgc2tpbGwgb3Igc2xlaWdodCBvZiBoYW5kIGFuZCBsb2dpYSAozrvOv86zzq/OsSksIHdoaWNoIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gb2YgdGVjaG5pcXVlcywgc2tpbGxzIGFuZCBwcm9jZXNzZXMgdXNlZCBpbiB0aGUgcHJvZHVjdGlvbiBvZiBnb29kcywgc2VydmljZXMgb3IgaW4gdGhlIGFjY29tcGxpc2htZW50IG9mIG9iamVjdGl2ZXMuIEl0IGlzIGVhc3kgdG8gc2VlIGhvdyB0aGVzZSBjb25jZXB0cyBhcHBseSB0byBvdXIgY29udGVtcG9yYXJ5IHVuZGVyc3RhbmRpbmcgb2YgdGVjaG5vbG9neS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzY2llbmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA4LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIktlcmJlcm9zIChwcm90b2NvbClcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBwcm90b2NvbCB3YXMgbmFtZWQgYWZ0ZXIgS2VyYmVyb3MgKG9yIENlcmJlcnVzKSBpbiBHcmVlayBteXRob2xvZ3ksIHRoZSBmZXJvY2lvdXMgdGhyZWUtaGVhZGVkIGd1YXJkIGRvZyBvZiBIYWRlcy4gSXRzIGRlc2lnbmVycyBjb25jZWl2ZWQgaXQgcHJpbWFyaWx5IGFzIGEgY2xpZW504oCTc2VydmVyIG1vZGVsIGFuZCBpdCBwcm92aWRlcyBtdXR1YWwgYXV0aGVudGljYXRpb24gLSBib3RoIHRoZSB1c2VyIGFuZCB0aGUgc2VydmVyIHZlcmlmeSBlYWNoIG90aGVyJ3MgaWRlbnRpdHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya2luZ1xcXCIsXFxuICAgIFxcXCJhdXRoZW50aWNhdGlvbiBwcm90b2NvbFxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogOSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTa2V1b21vcnBoIOKAkyBTa2V1b21vcnBoaXNtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgdGVybSBza2V1b21vcnBoIGlzIGNvbXBvdW5kZWQgZnJvbSB0aGUgR3JlZWs6IHNrw6l1b3MgKM+DzrrOteG/ps6/z4IpLCBtZWFuaW5nIFxcXFxcXFwiY29udGFpbmVyXFxcXFxcXCIgb3IgXFxcXFxcXCJ0b29sXFxcXFxcXCIsIGFuZCBtb3JwaOG4lyAozrzOv8+Bz4bOriksIFxcXFxcXFwic2hhcGVcXFxcXFxcIi4gQSBza2V1b21vcnBoIGlzIGEgZGVyaXZhdGl2ZSBvYmplY3QgdGhhdCByZXRhaW5zIG9ybmFtZW50YWwgZGVzaWduIGN1ZXMgZnJvbSBzdHJ1Y3R1cmVzIHRoYXQgd2VyZSBuZWNlc3NhcnkgaW4gdGhlIG9yaWdpbmFsLCBsaWtlIGEgc29mdHdhcmUgY2FsZW5kYXIgdGhhdCBpbWl0YXRlcyB0aGUgYXBwZWFyYW5jZSBvZiBiaW5kaW5nIG9uIGEgcGFwZXIgZGVzayBjYWxlbmRhci4gU2tldW9tb3JwaCBjYW4gYmUgdXNlZCB0byBkZXNjcmliZSBjb21wdXRlciBhbmQgbW9iaWxlIGludGVyZmFjZXMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiZGVzaWduXFxcIixcXG4gICAgXFxcImludGVyZmFjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRWNsaXBzZVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHRlcm0gZWNsaXBzZSBpcyBkZXJpdmVkIGZyb20gdGhlIGFuY2llbnQgR3JlZWsgw6lrbGVpcHNpcyAo4byUzrrOu861zrnPiM65z4IpLCB3aGljaCBtZWFucyBcXFxcXFxcInRoZSBhYmFuZG9ubWVudCwgZG93bmZhbGwsIG9yIGRhcmtlbmluZyBvZiBhIGhlYXZlbmx5IGJvZHlcXFxcXFxcIi4gRWNsaXBzZSBzb2Z0d2FyZSwgaW5pdGlhbGx5IGRldmVsb3BlZCBieSBJQk0sIGlzIHByaW1hcmlseSB1c2VkIHRvIHByb2R1Y2UgSmF2YSBhcHBsaWNhdGlvbnMuIE1hbnkgdmVyc2lvbnMgb2YgRWNsaXBzZSBoYXZlIGJlZW4gbmFtZWQgYWZ0ZXIgYSBjZWxlc3RpYWwgYm9kaWVzLCBzdWNoIGFzIEp1bm8sIEx1bmEgYW5kIE1hcnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiSURFXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJKYXZhXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxMSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBbmRyb2lkXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCB3YXMgY29pbmVkIGZyb20gdGhlIHByZWZpeCBhbmRyby0gZm9yIFxcXFxcXFwibWFuXFxcXFxcXCIgb3IgXFxcXFxcXCJtYWxlXFxcXFxcXCIgKOG8gM69zrTPgSkgYW5kIHRoZSBzdWZmaXggLW9pZCBcXFxcXFxcImhhdmluZyB0aGUgZm9ybSBvciBsaWtlbmVzcyBvZlxcXFxcXFwiLiBJdCBoYXMgcmVjZW50bHkgY29tZSB0byByZWZlciB0byBhbiBvcGVyYXRpbmcgc3lzdGVtIGVuZG9yc2VkIGJ5IEdvb2dsZSwgd2hpY2ggaGFzIGJlY29tZSBhIGxlYWRlciBpbiB0aGUgbW9iaWxlIGRldmljZSBtYXJrZXQuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiT1NcXFwiLFxcbiAgICBcXFwibW9iaWxlXFxcIixcXG4gICAgXFxcIkdvb2dsZVxcXCIsXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSWNvblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQW4gaWNvbiwgZnJvbSB0aGUgR3JlZWsgZWlrxY1uICjOteG8sM66z47OvSkgZGVmaW5lZCBhcyBcXFxcXFxcImltYWdlXFxcXFxcXCIsIGlzIGdlbmVyYWxseSBhIGZsYXQgcGFuZWwgcGFpbnRpbmcgZGVwaWN0aW5nIHJlbGlnaW91cyBmaWd1cmVzIG9yIHNjZW5lcy4gVGhlIHRlcm0gaGFzIGJlZW4gYWRhcHRlZCB0byByZWZlciB0byBhIGdyYXBoaWNhbCB1c2VyIGludGVyZmFjZSAoR1VJKSwgd2hpY2ggaXMgdGhlIHZpc3VhbCBzeW1ib2wgaWRlbnRpZnlpbmcgYSBjb21tYW5kLCBmaWxlLCBkaXJlY3Rvcnkgb3IgZGV2aWNlLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIkdVSVxcXCIsXFxuICAgIFxcXCJpbnRlcmZhY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDEzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBhcmFtZXRlclxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiUGFyYW1ldGVyIGNvbWVzIGZyb20gdGhlIGFuY2llbnQgR3JlZWsgd29yZHMgXFxcXFxcXCJwYXJhXFxcXFxcXCIgKM+AzrHPgc6sKSwgbWVhbmluZyBcXFxcXFxcImJlc2lkZSwgc3Vic2lkaWFyeVxcXFxcXFwiIGFuZCBcXFxcXFxcIm1ldHJvblxcXFxcXFwiICjOvM6tz4TPgc6/zr0pLCBtZWFuaW5nIFxcXFxcXFwibWVhc3VyZVxcXFxcXFwiLiBJdCBjb21tb25seSByZWZlcnMgdG8gYSBcXFxcXFxcImNoYXJhY3RlcmlzdGljLCBmZWF0dXJlLCBvciBtZWFzdXJhYmxlIGZhY3RvciB0aGF0IGNhbiBoZWxwIGluIGRlZmluaW5nIGEgcGFydGljdWxhciBzeXN0ZW1cXFxcXFxcIi4gQSBwYXJhbWV0ZXIgaXMgYW4gaW1wb3J0YW50IGVsZW1lbnQgdG8gY29uc2lkZXIgaW4gZXZhbHVhdGlvbiBvciBjb21wcmVoZW5zaW9uIG9mIGFuIGV2ZW50LCBwcm9qZWN0LCBvciBzaXR1YXRpb24uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxNCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBc3ltbWV0cmljXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBc3ltbWV0cmljIG9yaWdpbmF0ZWQgZnJvbSB0aGUgYW5jaWVudCBHcmVlayB3b3JkIGFzdW1tZXRyw61hICjhvIDPg8+FzrzOvM61z4TPgc6vzrEpLCBtZWFuaW5nIFxcXFxcXFwiZGlzcHJvcG9ydGlvbiwgZGVmb3JtaXR5XFxcXFxcXCIuIEl0IGNhbiBiZSBmb3VuZCBpbiBtYW55IGNvbXB1dGluZy1yZWxhdGVkIHRvcGljcyBzdWNoIGFzIGFzeW1tZXRyaWMgY3J5cHRvZ3JhcGh5LCBhc3ltbWV0cmljIGRpZ2l0YWwgc3Vic2NyaWJlciBsaW5lIChBRFNMKSBpbiBpbnRlcm5ldCBjb25uZWN0aXZpdHkgYW5kIGFzeW1tZXRyaWMgbXVsdGlwcm9jZXNzaW5nIGluIGNvbXB1dGVyIGFyY2hpdGVjdHVyZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjcnlwdG9ncmFwaHlcXFwiLFxcbiAgICBcXFwiaW50ZXJuZXQgY29ubmVjdGl2aXR5XFxcIixcXG4gICAgXFxcImNvbXB1dGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU3luY2hyb25vdXMg4oCTIEFzeW5jaHJvbm91c1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiU3luY2hyb25vdXMsIG1lYW5pbmcgXFxcXFxcXCJoYXBwZW5pbmcgYXQgdGhlIHNhbWUgdGltZVxcXFxcXFwiLCBpcyBmcm9tIHRoZSBHcmVlayB3b3JkIHN5bmtocm9ub3MgKM+Dz4XOs8+Hz4HPjM69z4nPgikuIEl0IGlzIGEgY29tcG91bmQgd29yZCBmb3JtZWQgYnkgc3luLSBcXFxcXFxcInRvZ2V0aGVyXFxcXFxcXCIgYW5kIC1raHJvbm9zIFxcXFxcXFwidGltZVxcXFxcXFwiLiBBc3luY2hyb25vdXMgaGFzIHRoZSBvcHBvc2l0ZSBtZWFuaW5nLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiLFxcbiAgICBcXFwidGVsZWNvbW11bmljYXRpb25zXFxcIixcXG4gICAgXFxcInN5c3RlbXNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDE2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkFub255bW91c1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQW5vbnltaXR5IGlzIGRlcml2ZWQgZnJvbSB0aGUgR3JlZWsgd29yZCBhbm9ueW1pYSAo4byAzr3Pic69z4XOvM6vzrEpLCBmb3IgXFxcXFxcXCJ3aXRob3V0IGEgbmFtZVxcXFxcXFwiIG9yIFxcXFxcXFwibmFtZWxlc3NuZXNzXFxcXFxcXCIuIEluIGNvbGxvcXVpYWwgdXNlLCBcXFxcXFxcImFub255bW91c1xcXFxcXFwiIGlzIHVzZWQgdG8gZGVzY3JpYmUgc2l0dWF0aW9ucyB3aGVyZSB0aGUgYWN0aW5nIHBlcnNvbidzIG5hbWUgaXMgdW5rbm93bi4gU29tZSB3cml0ZXJzIGhhdmUgYXJndWVkIHRoYXQgbmFtZWxlc3NuZXNzLCB0aG91Z2ggdGVjaG5pY2FsbHkgY29ycmVjdCwgZG9lcyBub3QgY2FwdHVyZSB3aGF0IGlzIG1vcmUgY2VudHJhbGx5IGF0IHN0YWtlIGluIGNvbnRleHRzIG9mIGFub255bWl0eS4gVGhlIGltcG9ydGFudCBpZGVhIGhlcmUgaXMgdGhhdCBhIHBlcnNvbiBiZSB1bmlkZW50aWZpYWJsZSwgdW5yZWFjaGFibGUsIG9yIHVudHJhY2VhYmxlLiBBbm9ueW1pdHkgaXMgc2VlbiBhcyBhIHRlY2huaXF1ZSwgb3IgYSB3YXkgb2YgcmVhbGl6aW5nLCBjZXJ0YWluIG90aGVyIHZhbHVlcywgc3VjaCBhcyBwcml2YWN5LCBvciBsaWJlcnR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhY2tpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxNyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNb3NhaWMgKHdlYiBicm93c2VyKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiTW9zYWljIGlzIHRoZSBhcnQgb2YgY3JlYXRpbmcgaW1hZ2VzIHdpdGggYW4gYXNzZW1ibGFnZSBvZiBzbWFsbCBwaWVjZXMgb2YgY29sb3JlZCBnbGFzcywgc3RvbmUsIG9yIG90aGVyIG1hdGVyaWFscy4gSXQgY29tZXMgZnJvbSB0aGUgR3JlZWsgd29yZCBtb3VzZWlvbiwgJ3BsYWNlIGhvbHkgdG8gdGhlIE11c2VzLCcgYW5kIG1heSBoYXZlIGJlZW4gb3JpZ2luYWxseSBkZWRpY2F0ZWQgdG8gdGhlIE11c2VzLiBUaGlzIGFwcGxpZWQgYXJ0IGZvcm0gc2hhcmVzIGEgbmFtZSB3aXRoIGEgZGlzY29udGludWVkIGVhcmx5IHdlYiBicm93c2VyIGNyZWRpdGVkIHdpdGggcG9wdWxhcml6aW5nIHRoZSBXb3JsZCBXaWRlIFdlYi4gTW9zYWljIG9yIE5DU0EgTW9zYWljIHdhcyBuYW1lZCBmb3IgaXRzIHN1cHBvcnQgb2YgbXVsdGlwbGUgaW50ZXJuZXQgcHJvdG9jb2xzIGFuZCB3YXMgYWxzbyB0aGUgZmlyc3QgYnJvd3NlciB0byBkaXNwbGF5IGltYWdlcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJicm93c2VyXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxOCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJLdWJlcm5ldGVzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgR3JlZWsgd29yZCBrdWJlcm5ldGVzLCBtZWFucyBcXFxcXFxcImhlbG1zbWFuIG9mIGEgc2hpcCxcXFxcXFxcIiBvciwgbW9yZSBtZXRhcGhvcmljYWxseSwgXFxcXFxcXCJydWxlclxcXFxcXFwiLCB3aGlsZSB0aGUgTGF0aW4gdHJhbnNsYXRpb24gb2YgXFxcXFxcXCJrdWJlcm5ldGVzXFxcXFxcXCIgaXMgXFxcXFxcXCJndWJlcm5hcmVcXFxcXFxcIiwgbWVhbmluZyBcXFxcXFxcInRvIHJ1bGVcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCIsXFxuICAgIFxcXCJjbHVzdGVyXFxcIixcXG4gICAgXFxcInBsYXRmb3JtXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxOSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQeXRob25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlB5dGhvbiAozqDPjc64z4nOvSksIHRoZSBkcmFnb24gb2YgRGVscGhpLCB3YXMgYWx3YXlzIHJlcHJlc2VudGVkIGluIEdyZWVrIHNjdWxwdHVyZSBhbmQgdmFzZS1wYWludGluZ3MgYXMgYSBzZXJwZW50LiBIZSBwcmVzaWRlZCBhdCB0aGUgRGVscGhpYyBvcmFjbGUsIHdoaWNoIHdhcyB0aG91Z2h0IHRvIGV4aXN0IGF0IHRoZSBjZW50ZXIgb2YgdGhlIEVhcnRoLW1vdGhlciBjdWx0IG9mIEdhaWEsIFxcXFxcXFwiRWFydGhcXFxcXFxcIi4gR3JlZWtzIGNvbnNpZGVyZWQgdGhlIHNpdGUgdG8gYmUgdGhlIGNlbnRlciBvZiB0aGUgZWFydGgsIGFuZCB0aGUgY2VudGVyIG9mIERlbHBoaSB3YXMgcmVwcmVzZW50ZWQgYnkgYSBzdG9uZTsgdGhlIG9tcGhhbG9zLCBvciBuYXZlbCwgd2hpY2ggUHl0aG9uIGd1YXJkZWQuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmcgbGFuZ3VhZ2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDIwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1ldGVvclxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHJvb3Qgd29yZCBtZXRlb3IgY29tZXMgZnJvbSB0aGUgR3JlZWsgbWV0ZcWNcm9zICjOvM61z4TOrc+Jz4HOv8+CKSwgbWVhbmluZyBcXFxcXFxcImhpZ2ggaW4gdGhlIGFpclxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImphdmFzY3JpcHRcXFwiLFxcbiAgICBcXFwiZnJhbWV3b3JrXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyMSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJIeXBlciAodGV4dCwgbGluaywgZXRjLilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBFbmdsaXNoIHByZWZpeCBoeXBlci0gY29tZXMgZnJvbSB0aGUgR3JlZWsgcHJlZml4IFxcXFxcXFwi4b2Rz4DOtc+BLVxcXFxcXFwiIGFuZCBtZWFucyBcXFxcXFxcIm92ZXJcXFxcXFxcIiBvciBcXFxcXFxcImJleW9uZFxcXFxcXFwiIGFuZCBzaWduaWZpZXMgdGhlIG92ZXJjb21pbmcgb2YgdGhlIHByZXZpb3VzIGNvbnN0cmFpbnRzLiBJdCBoYXMgc2ltaWxhciBsaW5ndWlzdGljIHJvb3RzIGFzIHRoZSBwcmVmaXggXFxcXFxcXCJzdXBlci1cXFxcXFxcIiB3aGljaCBjb21lcyBmcm9tIExhdGluLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImludGVybmV0XFxcIixcXG4gICAgXFxcIndlYlxcXCIsXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyMixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJHcmFwaGljc1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgZ3JhcGhpY3MgY29tZXMgZnJvbSB0aGUgR3JlZWsgZ3JhcGhpa29zICjOs8+BzrHPhs65zrrPjM+CKSwgZm9yIFxcXFxcXFwic29tZXRoaW5nIHdyaXR0ZW5cXFxcXFxcIiwgbGlrZSBhbiBhdXRvZ3JhcGgsIGZvciBleGFtcGxlLiBUaGUgY29udGVtcG9yYXJ5IG1lYW5pbmcgb2YgdGhlIHdvcmQgZ3JhcGhpY3MgaXMgXFxcXFxcXCJ2aXN1YWwgaW1hZ2VzIG9yIGRlc2lnbnMgb24gc29tZSBzdXJmYWNlLCBzdWNoIGFzIGEgd2FsbCwgY2FudmFzLCBzY3JlZW4sIHBhcGVyLCBvciBzdG9uZSB0byBpbmZvcm0sIGlsbHVzdHJhdGUsIG9yIGVudGVydGFpblxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIkdVSVxcXCIsXFxuICAgIFxcXCJpbnRlcmZhY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDIzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBlcmlwaGVyYWxcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkEgcGVyaXBoZXJhbCBpcyBhIGRldmljZSB0aGF0IGlzIHVzZWQgdG8gcHV0IGluZm9ybWF0aW9uIGludG8gb3IgZ2V0IGluZm9ybWF0aW9uIG91dCBvZiB0aGUgY29tcHV0ZXIuIFBlcmlwaGVyYWwgY29tZXMgZnJvbSB0aGUgYW5jaWVudCBHcmVlayB3b3JkcyBwZXJpcGjDqXJlaWEgKM+AzrXPgc65z4bOrc+BzrXOuc6xKSwgbWVhbmluZyBcXFxcXFxcInRoZSBsaW5lIGFyb3VuZCB0aGUgY2lyY2xlLCBjaXJjdW1mZXJlbmNlLCBwYXJ0IG9mIGEgY2lyY2xlLCBhbiBhcmMsIHRoZSBvdXRlciBzdXJmYWNlXFxcXFxcXCIgYW5kIHBow6lyxY0gKM+Gzq3Pgc+JKSBcXFxcXFxcIuKAjmJlYXIsIGNhcnJ5XFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkRlbHBoaVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiSW4gbXl0aHMsIHRoZSBzaXRlIG9mIERlbHBoaSAozpTOtc67z4bOv86vKSB3YXMgYmVsaWV2ZWQgdG8gYmUgdGhlIGNlbnRlciBvZiB0aGUgXFxcXFxcXCJFYXJ0aFxcXFxcXFwiIChcXFxcXFxcIkdhaWFcXFxcXFxcIiksICBncmFuZG1vdGhlciBvZiBaZXVzLiBQZW9wbGUgY29uc3VsdGVkIHRoZSBEZWxwaGljIG9yYWNsZSBQeXRoaWEgKGFsd2F5cyBhIHdvbWFuKSwgb24gZXZlcnl0aGluZyBmcm9tIGltcG9ydGFudCBtYXR0ZXJzIG9mIHB1YmxpYyBwb2xpY3kgdG8gcGVyc29uYWwgYWZmYWlycy4gVGhlIFB5dGhpYSBhbmQgcHJpZXN0cyBvZiBBcG9sbG8ncyB0ZW1wbGUga2VwdCB2ZXJ5IGRldGFpbGVkIHJlY29yZHMgb2YgdGhlaXIgdmlzaXRvcnMsIGtpbmQgb2YgbGlrZSBhbiBhbmNpZW50IGRhdGFiYXNlLiBEZWxwaGkgd2FzIG9yaWdpbmFsbHkgb25lIG9mIG1hbnkgY29kZW5hbWVzIG9mIGEgcHJlLXJlbGVhc2UgZGV2ZWxvcG1lbnQgdG9vbCBwcm9qZWN0IGF0IEJvcmxhbmQuIEJvcmxhbmQgZGV2ZWxvcGVyIERhbm55IFRob3JwZSBzdWdnZXN0ZWQgRGVscGhpIGFzIGEgY29kZW5hbWUgaW4gcmVmZXJlbmNlIHRvIHRoZSBPcmFjbGUgb2YgRGVscGhpLiBPbmUgb2YgdGhlIGRlc2lnbiBnb2FscyBvZiB0aGUgcHJvZHVjdCB3YXMgdG8gcHJvdmlkZSBkYXRhYmFzZSBjb25uZWN0aXZpdHkgdG8gcHJvZ3JhbW1lcnMgYXMgYSBrZXkgZmVhdHVyZSBhbmQgYSBwb3B1bGFyIGRhdGFiYXNlIHBhY2thZ2UgYXQgdGhlIHRpbWUgd2FzIE9yYWNsZSBkYXRhYmFzZTsgaGVuY2UsIFxcXFxcXFwiSWYgeW91IHdhbnQgdG8gdGFsayB0byBbdGhlXSBPcmFjbGUsIGdvIHRvIERlbHBoaVxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nIGxhbmd1YWdlXFxcIixcXG4gICAgXFxcImRhdGFiYXNlXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcIklERVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSG9tb2ljb25pY1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRGVyaXZlZCBmcm9tIFxcXFxcXFwiaG9tb1xcXFxcXFwiICjPjM68zr8pIG1lYW5pbmcgdGhlIHNhbWUgYW5kIFxcXFxcXFwiaWNvblxcXFxcXFwiICjOtc65zrrPjs69KSBtZWFuaW5nIHJlcHJlc2VudGF0aW9uLiBBIHByb2dhbW1pbmcgbGFuZ3VhZ2UgaXMgc2FpZCB0byBiZSBob21vaWNvbmljIHdoZW4gaXQgc2hhcmVzIHRoZSBzYW1lIHJlcHJlc2VudGF0aW9uIGZvciBjb2RlIGFuZCBkYXRhLiBBIHdlbGwta25vd24gZXhhbXBsZSBpcyBMSVNQLCB3aGVyZSB0aGUgcHJpbWFyeSBwcmltaXRpdmUgZGF0YSBzdHJ1Y3R1cmUgaXMgdGhlIGxpc3QgYW5kIHByb2dyYW1zIGFyZSB3cml0dGVuIGFzIGxpc3RzLiBBcyBzdWNoLCBjb2RlIGNhbiBiZSBtYW5pcHVsYXRlZCBhcyBpZiBpdCB3YXMgZGF0YSBhbmQgdmljZS12ZXJzYVxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyNixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJDcnlwdG9ncmFwaHlcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkRlcml2ZWQgZnJvbSBrcnlwdMOzcyAozrrPgc+Fz4DPhM+Mz4IpIGZvciBcXFxcXFxcImhpZGRlbiwgc2VjcmV0XFxcXFxcXCIgYW5kIGdyYXBoZWluICjOs8+BzqzPhs61zrnOvSkgZm9yIFxcXFxcXFwid3JpdGluZ1xcXFxcXFwiLiBDcnlwdG9ncmFwaHkgaXMgdGhlIHByYWN0aWNlIGFuZCBzdHVkeSBvZiB0ZWNobmlxdWVzIGZvciBzZWN1cmUgY29tbXVuaWNhdGlvbiBpbiB0aGUgcHJlc2VuY2Ugb2YgdGhpcmQgcGFydGllcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzZWN1cml0eVxcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3J5cHRvZ3JhcGh5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlN0ZWdhbm9ncmFwaHlcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkNvbWJpbmVzIHRoZSB3b3JkcyBzdGVnYW5vcyAoz4PPhM61zrPOsc69z4zPgiksIG1lYW5pbmcgXFxcXFxcXCJjb3ZlcmVkLCBjb25jZWFsZWQsIG9yIHByb3RlY3RlZFxcXFxcXFwiLCBhbmQgZ3JhcGhlaW4gKM6zz4HOrM+GzrXOuc69KSBtZWFuaW5nIFxcXFxcXFwid3JpdGluZ1xcXFxcXFwiLiBTdGVnYW5vZ3JhcGh5IGlzIHRoZSBwcmFjdGljZSBvZiBjb25jZWFsaW5nIGEgZmlsZSwgbWVzc2FnZSwgaW1hZ2Ugb3IgdmlkZW8gd2l0aGluIGFub3RoZXIgZmlsZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzZWN1cml0eVxcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3RlZ2Fub2dyYXBoeVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyOCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJFbnRyb3B5XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJDb21lcyBmcm9tIHRoZSB3b3JkIHRyb3BlZSAoz4TPgc6/z4DOrikgd2hpY2ggbWVhbnMgXFxcXFxcXCJ0dXJuaW5nIHRvd2FyZFxcXFxcXFwiIG9yIFxcXFxcXFwidHJhbnNmb3JtYXRpb25cXFxcXFxcIi4gRW50cm9weSBpcyB0aGUgcmFuZG9tbmVzcyBjb2xsZWN0ZWQgYnkgYW4gYXBwbGljYXRpb24gZm9yIHVzZSBpbiBjcnlwdG9ncmFwaHkgb3Igb3RoZXIgdGhhdCByZXF1aXJlcyByYW5kb20gZGF0YS4gVGhpcyByYW5kb21uZXNzIGlzIG9mdGVuIGNvbGxlY3RlZCBmcm9tIGhhcmR3YXJlIHNvdXJjZXMgc3VjaCBhcyBtb3VzZSBtb3ZlbWVudHMgb3IgcmFuZG9tbmVzcyBnZW5lcmF0b3JzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNyeXB0b2dyYXBoeVxcXCIsXFxuICAgIFxcXCJzZWN1cml0eVxcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2VudHJvcHlcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjksXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTW9ub2xpdGhpY1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRGVyaXZlcyBmcm9tIG1vbsOzbGl0aG9zICjOvM6/zr3PjM67zrnOuM6/z4IpIHdoaWNoIGFjdHVhbGx5IG1lYW5zIFxcXFxcXFwibWFkZSBvZiBvbmUgc3RvbmVcXFxcXFxcIi4gQSBzb2Z0d2FyZSBpcyBjYWxsZWQgXFxcXFxcXCJtb25vbGl0aGljXFxcXFxcXCIgaWYgaXQgaGFzIGEgbW9ub2xpdGhpYyBhcmNoaXRlY3R1cmUsIGluIHdoaWNoIGZ1bmN0aW9uYWxseSBkaXN0aW5ndWlzaGFibGUgYXNwZWN0cyBhcmUgbm90IHNlcGFyYXRlIGNvbXBvbmVudHMgYnV0IGFyZSBhbGwgaW50ZWdyYXRlZC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJhcmNoaXRlY3R1cmVcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Nb25vbGl0aFxcXCIsXFxuICAgIFxcXCJodHRwOi8vZGljdGlvbmFyeS5yZWZlcmVuY2UuY29tL2Jyb3dzZS9tb25vbGl0aFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzMCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBdXRoZW50aWNhdGlvblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSB0aGUgd29yZCBhdXRoZW50aWtvcyAozrHPhc64zrXOvc+EzrnOus+Mz4IpIG1lYW5pbmcgXFxcXFxcXCJyZWFsLCBnZW51aW5lXFxcXFxcXCIsIGlzIHRoZSBhY3Qgb2YgY29uZmlybWluZyB0aGUgdHJ1dGggb2YgYW4gYXR0cmlidXRlIG9mIGEgc2luZ2xlIHBpZWNlIG9mIGRhdGEsIGZvciBleGFtcGxlIGFuIGlkZW50aXR5LCBjbGFpbWVkIHRydWUgYnkgYW4gZW50aXR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcInNlY3VyaXR5XFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXV0aGVudGljYXRpb25cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTW91c2VcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkNvbWVzIGZyb20gdGhlIHdvcmQgbWVlcyAozrzPhc+CKSB3aGljaCBpcyB0aGUgYW5jaWVudCBHcmVlayBuYW1lIG9mIHRoZSByb2RlbnQgbW91c2UuIEluIHRoZSB3b3JsZCBvZiBjb21wdXRpbmcgaXQncyB0aGUgbmFtZSBvZiBhIGhhcmR3YXJlIGRldmljZSwgdGhlIHdlbGwta25vd24gc291cmNlIG9mIGlucHV0IG9mIGEgY29tcHV0ZXIgc3lzdGVtLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInBlcmlwaGVyYWxcXFwiLFxcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwOi8vZGljdGlvbmFyeS5yZWZlcmVuY2UuY29tL2Jyb3dzZS9tb3VzZVxcXCIsXFxuICAgIFxcXCJodHRwOi8vd3d3LmV0eW1vbmxpbmUuY29tL2luZGV4LnBocD90ZXJtPW1vdXNlXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDMyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBhcmFsbGVsaXNtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIHRoZSB3b3JkIHBhcsOhbGxlbG9zICjPgM6xz4HOrM67zrvOt867zr/Pgikgd2hpY2ggY29tYmluZXMgdHdvIHdvcmRzIFxcXFxcXFwiz4DOsc+BzqxcXFxcXFxcIiArIFxcXFxcXFwizqzOu867zrfOu86/z4JcXFxcXFxcIiBtZWFuaW5nIFxcXFxcXFwiYWxvbmcgZWFjaCBvdGhlclxcXFxcXFwiLiBQYXJhbGxlbGlzbSBpcyBhIHR5cGUgb2YgY29tcHV0YXRpb24gaW4gd2hpY2ggY2FsY3VsYXRpb25zIGFyZSBjYXJyaWVkIG91dCBzaW11bHRhbmVvdXNseS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9wYXJhbGxlbCNFdHltb2xvZ3lcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSXNvbW9ycGhpc21cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkluIG1hdGhlbWF0aWNzLCBhbiBpc29tb3JwaGlzbSAoZnJvbSB0aGUgQW5jaWVudCBHcmVlazog4by0z4POv8+CIGlzb3MgXFxcXFxcXCJlcXVhbFxcXFxcXFwiLCBhbmQgzrzOv8+Bz4bOriBtb3JwaGUgXFxcXFxcXCJmb3JtXFxcXFxcXCIgb3IgXFxcXFxcXCJzaGFwZVxcXFxcXFwiKSBpcyBhIGhvbW9tb3JwaGlzbSAob3IgbW9yZSBnZW5lcmFsbHkgYSBtb3JwaGlzbSkgdGhhdCBhZG1pdHMgYW4gaW52ZXJzZS4gVHdvIG1hdGhlbWF0aWNhbCBvYmplY3RzIGFyZSBpc29tb3JwaGljIGlmIGFuIGlzb21vcnBoaXNtIGV4aXN0cyBiZXR3ZWVuIHRoZW0uIEluIHRoZSBkZXZlbG9wbWVudCB3b3JsZCB0aGVyZSBhcmUgYSBsb3Qgb2YgaXNvbW9ycGhpYyBmcmFtZXdvcmtzIGxhdGVseVxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzNCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJFcGhlbWVyYWxcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkVwaGVtZXJhbGl0eSAoZnJvbSBHcmVlayDOtc+Gzq7OvM61z4HOv8+CIOKAkyBlcGhlbWVyb3MsIGxpdGVyYWxseSBcXFxcXFxcImxhc3Rpbmcgb25seSBvbmUgZGF5XFxcXFxcXCIpIGlzIHRoZSBjb25jZXB0IG9mIHRoaW5ncyBiZWluZyB0cmFuc2l0b3J5LCBleGlzdGluZyBvbmx5IGJyaWVmbHkuIEFuIGVwaGVtZXJhbCBwb3J0IGlzIGEgc2hvcnQtbGl2ZWQgdHJhbnNwb3J0IHByb3RvY29sIHBvcnQgZm9yIEludGVybmV0IFByb3RvY29sIChJUCkgY29tbXVuaWNhdGlvbnMgYWxsb2NhdGVkIGF1dG9tYXRpY2FsbHkgZnJvbSBhIHByZWRlZmluZWQgcmFuZ2UgYnkgdGhlIElQIHNvZnR3YXJlXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya2luZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQ3ViZSAoT0xBUClcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkluIGNvbXB1dGVyIHNjaWVuY2UgYW5kIEJJIGFuIE9MQVAgQ3ViZSBpcyBhIGNvbGxlY3Rpb24gb2YgRGltZW5zaW9ucywgTWVhc3VyZXMgYW5kIEhpZXJhcmNoaWVzIHRoYXQgYXJlIHByZXByb2Nlc3NlZCBhbmQgc3RvcmVkIGluIGEgd2F5IHRoYXQgYWxsb3dzIGRhdGEgdG8gYXBwZWFyIGluc3RhbnRhbmVvdXNseSB3aGVuIGEgdXNlciBtYWtlcyBoaXMvaGVyIGFuYWx5c2lzLiBUaGUgdGVybSBjdWJlIGlzIGRlcml2ZWQgZnJvbSBcXFxcXFxcImt1Ym9zXFxcXFxcXCIgKM66z43Oss6/z4IpLiBJbiBhbmNpZW50IGdyZWVrLCBrdWJvcyB3YXMgYSBkaWUuIExhdGVyIG9uIHRoZSBtZWFuaW5nIGV4cGFuZGVkIHRvIG1hbnkgY3ViZS1zaGFwZWQgb2JqZWN0cy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJiaWcgZGF0YVxcXCIsXFxuICAgIFxcXCJkYXRhYmFzZXNcXFwiLFxcbiAgICBcXFwiZGF0YS13YXJlaG91c2VcXFwiLFxcbiAgICBcXFwiYnVzaW5lc3MgaW50ZWxsaWdlbmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzNixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTY2hlbWFcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIHNjaGVtYSBjb21lcyBmcm9tIHRoZSBHcmVlayB3b3JkIM+Dz4fOrs68zrEgKHNraMSTbWEpLCB3aGljaCBtZWFucyBzaGFwZSwgb3IgbW9yZSBnZW5lcmFsbHksIHBsYW4uIEEgZGF0YWJhc2Ugc2NoZW1hIGRlc2NyaWJlcyB0aGUgc3RydWN0dXJlIG9mIGl0cyBkYXRhYmFzZSBzeXN0ZW0uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiZGF0YWJhc2VzXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzNyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCIoQWRvYmUpIEFjcm9iYXRcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkFkb2JlIEFjcm9iYXQgaXMgYSBmYW1pbHkgb2YgYXBwbGljYXRpb24gc29mdHdhcmUgYW5kIFdlYiBzZXJ2aWNlcyBkZXZlbG9wZWQgYnkgQWRvYmUgU3lzdGVtcyB0byB2aWV3LCBjcmVhdGUsIG1hbmlwdWxhdGUsIHByaW50IGFuZCBtYW5hZ2UgZmlsZXMgaW4gUG9ydGFibGUgRG9jdW1lbnQgRm9ybWF0IChQREYpLiBCYXNlZCBvbiBhbmNpZW50IEdyZWVrIHdvcmQg4byAzrrPgc6/zrLOrM+EzrfPguKAjiAoYWtyb2LDoXTEk3MsIFxcXFxcXFwid2Fsa2luZyBvbiB0aXB0b2UsIGNsaW1iaW5nIGFsb2Z0XFxcXFxcXCIpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvZnR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzOCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBbHBoYSAvIEJldGFcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkEgc29mdHdhcmUgcmVsZWFzZSBsaWZlIGN5Y2xlIGNvbnRhaW5zIHRoZSBcXFxcXFxcImFscGhhXFxcXFxcXCIgYW5kIFxcXFxcXFwiYmV0YVxcXFxcXFwiIHN0YWdlcyBvZiBkZXZlbG9wbWVudC4gVGhlIGFscGhhIHBoYXNlIG9mIHRoZSByZWxlYXNlIGxpZmUgY3ljbGUgaXMgdGhlIGZpcnN0IHBoYXNlIHRvIGJlZ2luIHNvZnR3YXJlIHRlc3RpbmcgKGFscGhhIGlzIHRoZSBmaXJzdCBsZXR0ZXIgb2YgdGhlIEdyZWVrIGFscGhhYmV0LCB1c2VkIGFsc28gYXMgdGhlIG51bWJlciAxKS4gQmV0YSwgbmFtZWQgYWZ0ZXIgdGhlIHNlY29uZCBsZXR0ZXIgb2YgdGhlIEdyZWVrIGFscGhhYmV0LCBpcyB0aGUgc29mdHdhcmUgZGV2ZWxvcG1lbnQgcGhhc2UgZm9sbG93aW5nIGFscGhhLiBCZXRhIHBoYXNlIGdlbmVyYWxseSBiZWdpbnMgd2hlbiB0aGUgc29mdHdhcmUgaXMgZmVhdHVyZSBjb21wbGV0ZSBidXQgbGlrZWx5IHRvIGNvbnRhaW4gYSBudW1iZXIgb2Yga25vd24gb3IgdW5rbm93biBidWdzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcImRldmVsb3BtZW50XFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzOSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEaXNrIChvciBkaXNjKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM60zq/Pg866zr/PgiAoZMOtc2tvcywgXFxcXFxcXCJhIGNpcmN1bGFyIHBsYXRlIHN1aXRlZCBmb3IgaHVybGluZ1xcXFxcXFwiKSwgZnJvbSDOtM65zrrOteG/ls69IOKAjihkaWtlw65uLCBcXFxcXFxcInRvIGh1cmwsIHRvIGxhdW5jaFxcXFxcXFwiKS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYXJkd2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUHJvZ3JhbVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQSBjb21wdXRlciBwcm9ncmFtIGlzIGEgY29sbGVjdGlvbiBvZiBpbnN0cnVjdGlvbnMgdGhhdCBwZXJmb3JtcyBhIHNwZWNpZmljIHRhc2sgd2hlbiBleGVjdXRlZCBieSBhIGNvbXB1dGVyLiBUaGUgd29yZCBwcm9ncmFtIGNvbWVzIGZyb20gQW5jaWVudCBHcmVlayDPgM+Bz4zOs8+BzrHOvM68zrEg4oCOKHByw7NncmFtbWEsIFxcXFxcXFwiYSB3cml0dGVuIHB1YmxpYyBub3RpY2UsIGFuIGVkaWN0XFxcXFxcXCIpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhcmR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0MSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCIoR29vZ2xlKSBDaHJvbWUgLyBDaHJvbWl1bVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiR29vZ2xlIENocm9tZSAvIENocm9taXVtIGFyZSB3ZWIgYnJvd3NlcnMgZGV2ZWxvcGVkIGJ5IEdvb2dsZS4gVGhlaXIgbmFtZXMgYXJlIGRlcml2ZWQgZnJvbSB0aGUgR3JlZWsgd29yZCDPh8+B4b+2zrzOsSwgY2hyxY1tYSwgbWVhbmluZyBjb2xvci5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJicm93c2VyXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0MixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBdXRvbWF0b25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIFxcXFxcXFwiYXV0b21hdG9uXFxcXFxcXCIgaXMgdGhlIGxhdGluaXphdGlvbiBvZiB0aGUgR3JlZWsgzrHhvZDPhM+MzrzOsc+Ezr/OvSwgYXV0b21hdG9uLCBcXFxcXFxcImFjdGluZyBvZiBvbmUncyBvd24gd2lsbFxcXFxcXFwiLiBBbiBhdXRvbWF0b24gKHBsdXJhbDogYXV0b21hdGEgb3IgYXV0b21hdG9ucykgaXMgYSBzZWxmLW9wZXJhdGluZyBtYWNoaW5lLCBvciBhIG1hY2hpbmUgb3IgY29udHJvbCBtZWNoYW5pc20gZGVzaWduZWQgdG8gZm9sbG93IGF1dG9tYXRpY2FsbHkgYSBwcmVkZXRlcm1pbmVkIHNlcXVlbmNlIG9mIG9wZXJhdGlvbnMsIG9yIHJlc3BvbmQgdG8gcHJlZGV0ZXJtaW5lZCBpbnN0cnVjdGlvbnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkN5YmVyXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgcHJlZml4IGN5YmVyLSBpcyBkZXJpdmVkIGZyb20gXFxcXFxcXCJjeWJlcm5ldGljLFxcXFxcXFwiIHdoaWNoIGNvbWVzIGZyb20gdGhlIEdyZWVrIHdvcmQgzrrPhc6yzrXPgc69zrfPhM65zrrPjM+CIG1lYW5pbmcgc2tpbGxlZCBpbiBzdGVlcmluZyBvciBnb3Zlcm5pbmcuIEl0IGlzIHVzZWQgaW4gdGhlIHRlcm1zIGN5YmVyc3BhY2UsIGN5YmVycHVuaywgY3liZXJnb3RoLCBjeWJlcmxhdywgY3liZXJjcmltZSwgY3liZXJ3YXJmYXJlLCBjeWJlcnRlcnJvcmlzbSwgY3liZXJzZXgsIGFuZCBjeWJlcmJ1bGx5aW5nLCBhbW9uZyBvdGhlcnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaW50ZXJuZXRcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlN5bWZvbnkgKHdlYiBhcHBsaWNhdGlvbiBmcmFtZXdvcmspXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJPcmlnaW5hdGVzIGZyb20gdGhlIGhvbW9waG9uZSB3b3JkIFxcXFxcXFwiU3ltcGhvbnlcXFxcXFxcIiB3aGljaCBpcyBkZXJpdmVkIGZyb20gdGhlIHdvcmQgz4PPhc68z4bPic69zq/OsSAoc3ltcGhvbmlhKSwgbWVhbmluZyBcXFxcXFxcImFncmVlbWVudCAvIGNvbmNvcmQgb2Ygc291bmRcXFxcXFxcIiBhbmQgZGVzY3JpYmVzIGFuIGV4dGVuZGVkIG11c2ljYWwgY29tcG9zaXRpb24gaW4gd2VzdGVybiBjbGFzc2ljYWwgbXVzaWMuIFN5bWZvbnkgaXMgYSBcXFxcXFxcImZ1bGwtc3RhY2tcXFxcXFxcIiBQSFAgZnJhbWV3b3JrIHdoaWNoIHByb21vdGVzIGJlc3QgcHJhY3RpY2VzIGFuZCBjb25zaXN0cyBvZiBhIHNldCBvZiBkZWNvdXBsZWQgYW5kIHJldXNhYmxlIGxpYnJhcmllcy4gSXQgaW1wbGVtZW50cyB0aGUgTVZDIGFyY2hpdGVjdHVyYWwgZGVzaWduIHBhdHRlcm4gYW5kIG1hbnkgb3RoZXIgZGVzaWduIHBhdHRlcm5zIGxpa2UgXFxcXFxcXCJEZXBlbmRlbmN5IEluamVjdGlvblxcXFxcXFwiLCBcXFxcXFxcIkRhdGEgQWNjZXNzIE9iamVjdFxcXFxcXFwiIGFuZCBcXFxcXFxcIk9ic2VydmVyXFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiZnJhbWV3b3Jrc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bXBob255I09yaWdpbnNcXFwiLFxcbiAgICBcXFwiaHR0cDovL3N5bWZvbnkuY29tL3doYXQtaXMtc3ltZm9ueVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0NSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBdG9taWNpdHkgKGRhdGFiYXNlIHN5c3RlbXMpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBdG9taWNpdHkgY29tZXMgZnJvbSB0aGUgd29yZCDOrM+Ezr/OvM6/z4IgKGF0b21vcykgd2hpY2ggbWVhbnMgXFxcXFxcXCJpbmRpdmlzaWJsZVxcXFxcXFwiLiBJdCdzIG9uZSBvZiB0aGUgQUNJRCBwcm9wZXJ0aWVzIHRoYXQgZ3VhcmFudGVlIHRyYW5zYWN0aW9uIHJlbGlhYmlsaXR5LiBBdG9taWNpdHkgcmVxdWlyZXMgdGhhdCBlYWNoIHRyYW5zYWN0aW9uIG11c3QgYmUgXFxcXFxcXCJhbGwgb3Igbm90aGluZ1xcXFxcXFwiLCBzbyB0aGF0IGlmIG9uZSBwYXJ0IG9mIHRoZSB0cmFuc2FjdGlvbiBmYWlscywgdGhlIGVudGlyZSB0cmFuc2FjdGlvbiBmYWlscyB0b28gYW5kIHRoZSBkYXRhYmFzZSBzdGF0ZSBpcyBsZWZ0IHVuY2hhbmdlZC4gQWxzbyB0aGUgc2VyaWVzIG9mIG9wZXJhdGlvbnMgY2Fubm90IGJlIGRpdmlkZWQgYXBhcnQgYW5kIGV4ZWN1dGVkIHBhcnRpYWxseSBmcm9tIGVhY2ggb3RoZXIsIHdoaWNoIG1ha2VzIHRoZSBzZXJpZXMgb2Ygb3BlcmF0aW9ucyBcXFxcXFxcImluZGl2aXNpYmxlXFxcXFxcXCIsIGhlbmNlIHRoZSBuYW1lLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImRhdGFiYXNlc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0F0b21pY2l0eV8oZGF0YWJhc2Vfc3lzdGVtcylcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRGVsdGEgKGRpZmZlcmVuY2luZylcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIs6Uzq3Ou8+EzrEgKGRlbHRhKSBpcyBhIGxldHRlciBvZiB0aGUgR3JlZWsgYWxwaGFiZXQgKM6UIG9yIM60KS4gRGVsdGEgZGlmZmVyZW5jaW5nIGlzIGEgd2F5IG9mIHN0b3Jpbmcgb3IgdHJhbnNtaXR0aW5nIGZpbGUgZGlmZmVyZW5jZXMgcmF0aGVyIHRoYW4gY29tcGxldGUgZmlsZXMuIERlbHRhcywgZm9yIGV4YW1wbGUsIGFyZSB0aGUgY2hhbmdlcyBhZnRlciBhIGZ1bGwgYmFja3VwLiBUaGUgZGlmZmVyZW5jZXMgYXJlIHN0b3JlZCBpbiBmaWxlcyBjYWxsZWQgZGVsdGFzLiBBcyBhIGJhY2t1cCBhcHByb2FjaCBzYXZlcyBiYW5kd2lkdGgsIHJlZHVjZXMgcmVkdW5kYW5jeSBhbmQgc3RvcmFnZS4gWW91IGNhbiBhbHNvIGZpbmQgZGVsdGFzIG9uIHRoZSBkZXBsb3ltZW50IHByb2Nlc3Mgb2YgYW4gYXBwbGljYXRpb24gdGhhdCByZXF1aXJlcyBkYXRhYmFzZSBjaGFuZ2VzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImJhY2t1cFxcXCIsXFxuICAgIFxcXCJkYXRhYmFzZXNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWx0YV9lbmNvZGluZ1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0NyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTeW50YXhcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIHN5bnRheCBjb21lcyBmcm9tIEFuY2llbnQgR3JlZWs6IM+Dz43Ovc+EzrHOvs65z4IgXFxcXFxcXCJjb29yZGluYXRpb25cXFxcXFxcIiwgd2hpY2ggY29uc2lzdHMgb2Ygz4PPjc69IHN5biwgXFxcXFxcXCJ0b2dldGhlclxcXFxcXFwiLCBhbmQgz4TOrM6+zrnPgiB0w6F4aXMsIFxcXFxcXFwiYW4gb3JkZXJpbmdcXFxcXFxcIi4gSW4gY29tcHV0ZXIgc2NpZW5jZSwgdGhlIHN5bnRheCBvZiBhIGNvbXB1dGVyIGxhbmd1YWdlIGlzIHRoZSBzZXQgb2YgcnVsZXMgdGhhdCBkZWZpbmVzIHRoZSBjb21iaW5hdGlvbnMgb2Ygc3ltYm9scyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIGEgY29ycmVjdGx5IHN0cnVjdHVyZWQgZG9jdW1lbnQgb3IgZnJhZ21lbnQgaW4gdGhhdCBsYW5ndWFnZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bnRheF8ocHJvZ3JhbW1pbmdfbGFuZ3VhZ2VzKVxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TeW50YXhcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU2VtYW50aWNzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJTZW1hbnRpY3MgKGZyb20gQW5jaWVudCBHcmVlazogz4POt868zrHOvc+EzrnOus+Mz4Igc8STbWFudGlrw7NzLCBcXFxcXFxcInNpZ25pZmljYW50XFxcXFxcXCIpIGlzIHRoZSBzdHVkeSBvZiBtZWFuaW5nLiBJbiBjb21wdXRlciBzY2llbmNlLCB0aGUgdGVybSBzZW1hbnRpY3MgcmVmZXJzIHRvIHRoZSBtZWFuaW5nIG9mIGxhbmd1YWdlcywgYXMgb3Bwb3NlZCB0byB0aGVpciBmb3JtIChzeW50YXgpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2VtYW50aWNzXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ5LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIktpbG9cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkRlcml2ZWQgZnJvbSBhbmNpZW50IGdyZWVrIM+Hzq/Ou865zr/OuSAoY2hpbGlvaSApIFxcXFxcXFwib25lIHRob3VzYW5kXFxcXFxcXCIuIEluIGNvbXB1dGluZyBpdCByZWZlcnMgdG8gbXVsdGlwbHlpbmcgdGhlIHVuaXQgdG8gd2hpY2ggaXQgaXMgYXR0YWNoZWQgYnkgMl4xMCAoMTAyNCkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2tpbG8tXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0tpbG8tXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDUwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBhcmFnb25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDPgM6xz4HOsc66zr/Ovc6sz4kgKHBhcmFrb27DocWNLCBcXFxcXFxcIkkgc2hhcnBlbiwgd2hldFxcXFxcXFwiKS4gVGhlIEludGVsIFBhcmFnb24gaXMgYSBkaXNjb250aW51ZWQgc2VyaWVzIG9mIG1hc3NpdmVseSBwYXJhbGxlbCBzdXBlcmNvbXB1dGVycyB0aGF0IHdhcyBwcm9kdWNlZCBieSBJbnRlbCBpbiB0aGUgMTk5MHMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiLFxcbiAgICBcXFwic3VwZXJjb21wdXRlclxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9wYXJhZ29uXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0ludGVsX1BhcmFnb25cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiVGl0YW5cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOpM65z4TOrM69IChUaXTDoW4pLCBhIHJhY2Ugb2YgZ2lhbnQgZ29kcyBpbiBHcmVlayBteXRob2xvZ3kgdGhhdCBwcmVjZWRlZCBhbmQgd2FzIG92ZXJ0aHJvd24gYnkgdGhlIE9seW1waWFuIGdvZHMuIFRpdGFuIGlzIGEgc3VwZXJjb21wdXRlciBidWlsdCBieSBDcmF5IGF0IE9hayBSaWRnZSBOYXRpb25hbCBMYWJvcmF0b3J5IGZvciB1c2UgaW4gYSB2YXJpZXR5IG9mIHNjaWVuY2UgcHJvamVjdHMuIEl0IHVzZXMgZ3JhcGhpY3MgcHJvY2Vzc2luZyB1bml0cyAoR1BVcykgaW4gYWRkaXRpb24gdG8gY29udmVudGlvbmFsIGNlbnRyYWwgcHJvY2Vzc2luZyB1bml0cyAoQ1BVcykuIFRpdGFuIGlzIGFsc28gdGhlIG5hbWUgb2YgdGhlIHByb3RvdHlwZSBvZiB0aGUgQXRsYXMgMiBjb21wdXRlciBkZXZlbG9wZWQgYnkgRmVycmFudGkgYW5kIHRoZSBVbml2ZXJzaXR5IG9mIENhbWJyaWRnZSBNYXRoZW1hdGljYWwgTGFib3JhdG9yeSBpbiBDYW1icmlkZ2UsIEVuZ2xhbmQuIEZhY2Vib29rIGFsc28gZ2F2ZSB0aGUgbmFtZSBUaXRhbiB0byBpdCdzIG1vZGVybiBtZXNzYWdpbmcgc3lzdGVtIHVudmVpbGVkIGluIDIwMTAuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiLFxcbiAgICBcXFwic3VwZXJjb21wdXRlcnNcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvVGl0YW5cXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGl0YW5fKHN1cGVyY29tcHV0ZXIpXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RpdGFuXyhjb21wdXRlcilcXFwiLFxcbiAgICBcXFwiaHR0cDovL3d3dy5kaWdpdGFsdHJlbmRzLmNvbS9jb21wdXRpbmcvZmFjZWJvb2tzLXByb2plY3QtdGl0YW4taXMtdGhlLW1vZGVybi1tZXNzYWdpbmctc3lzdGVtLWJ1dC1pcy1ub3QtYW4tZS1tYWlsLWtpbGxlci9cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiT2N0ZXRcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gYW5jaWVudCBHcmVlayDhvYDOus+Ez44gKG9rdOG5kykuIEFuIG9jdGV0IGlzIGEgdW5pdCBvZiBkaWdpdGFsIGluZm9ybWF0aW9uIGluIGNvbXB1dGluZyBhbmQgdGVsZWNvbW11bmljYXRpb25zIHRoYXQgY29uc2lzdHMgb2YgZWlnaHQgYml0cy4gVGhlIHRlcm0gaXMgb2Z0ZW4gdXNlZCB3aGVuIHRoZSB0ZXJtIGJ5dGUgbWlnaHQgYmUgYW1iaWd1b3VzLCBhcyBoaXN0b3JpY2FsbHkgdGhlcmUgd2FzIG5vIHN0YW5kYXJkIGRlZmluaXRpb24gZm9yIHRoZSBzaXplIG9mIHRoZSBieXRlLiBPY3RldHMgYXJlIHVzZWQgaW4gdGhlIHJlcHJlc2VudGF0aW9uIG9mIEludGVybmV0IFByb3RvY29sIGNvbXB1dGVyIG5ldHdvcmsgYWRkcmVzc2VzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL29jdG9cXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvT2N0ZXRfKGNvbXB1dGluZylcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTmV1cmFsXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzr3OteG/ps+Bzr/OvSAobmXDu3Jvbiwg4oCcYSBzaW5ldywgbmVydmXigJ0pICsgLWFsLiBJbiBjb21wdXRpbmcgaXQgbWVhbnMgc29tZXRoaW5nIHRoYXQgaXMgbW9kZWxsZWQgb24gdGhlIGFycmFuZ2VtZW50IG9mIG5ldXJvbnMgaW4gdGhlIGJyYWluLiBOZXVyYWwgbmV0d29yayBzb2Z0d2FyZSBpcyB1c2VkIHRvIHNpbXVsYXRlLCByZXNlYXJjaCwgZGV2ZWxvcCBhbmQgYXBwbHkgYXJ0aWZpY2lhbCBuZXVyYWwgbmV0d29ya3MsIGJpb2xvZ2ljYWwgbmV1cmFsIG5ldHdvcmtzIGFuZCwgaW4gc29tZSBjYXNlcywgYSB3aWRlciBhcnJheSBvZiBhZGFwdGl2ZSBzeXN0ZW1zLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImFydGlmaWNhbCBpbnRlbGxpZ2VuY2VcXFwiLFxcbiAgICBcXFwibmV0d29ya2luZ1xcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJtYWNoaW5lIGxlYXJuaW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL25ldXJhbFxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BcnRpZmljaWFsX25ldXJhbF9uZXR3b3JrXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlByb3RvY29sXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEJ5emFudGluZSBHcmVlayDPgM+Bz4nPhM+MzrrOv867zrvOv869ICjigJxmaXJzdCBzaGVldCBnbHVlZCBvbnRvIGEgbWFudXNjcmlwdOKAnSksIGZyb20gz4DPgeG/ts+Ezr/PgiAocHLDtHRvcywgXFxcXFxcXCJmaXJzdFxcXFxcXFwiKSArIM66z4zOu867zrEgKGvDs2xsYSwgXFxcXFxcXCJnbHVlXFxcXFxcXCIpLiBJbiB0ZWxlY29tbXVuaWNhdGlvbnMsIGEgY29tbXVuaWNhdGlvbnMgcHJvdG9jb2wgaXMgYSBzeXN0ZW0gb2YgcnVsZXMgdGhhdCBhbGxvdyB0d28gb3IgbW9yZSBlbnRpdGllcyBvZiBhIGNvbW11bmljYXRpb25zIHN5c3RlbSB0byB0cmFuc21pdCBpbmZvcm1hdGlvbiB2aWEgYW55IGtpbmQgb2YgdmFyaWF0aW9uIG9mIGEgcGh5c2ljYWwgcXVhbnRpdHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya2luZ1xcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9wcm90b2NvbFxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db21tdW5pY2F0aW9uc19wcm90b2NvbFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1NSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNZXRob2RcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOvM6tzrjOv860zr/PgiAobcOpdGhvZG9zLCBcXFxcXFxcInB1cnN1aXQgb2Yga25vd2xlZGdlLCBpbnZlc3RpZ2F0aW9uLCBtb2RlIG9mIHByb3NlY3V0aW5nIHN1Y2ggaW5xdWlyeSwgc3lzdGVtXFxcXFxcXCIpLiBJbiBvYmplY3Qgb3JpZW50ZWQgcHJvZ3JhbW1pbmcgaXQgZGVzY3JpYmVzIGEgc3Vicm91dGluZSBvciBmdW5jdGlvbiBiZWxvbmdpbmcgdG8gYSBjbGFzcyBvciBvYmplY3QuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvbWV0aG9kXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlRvcG9sb2d5XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgz4TPjM+Azr/PgiAodMOzcG9zLCBcXFxcXFxcInBsYWNlLCBsb2NhbGl0eVxcXFxcXFwiKSArIC0obylsb2d5IChcXFxcXFxcInN0dWR5IG9mXFxcXFxcXCIsIFxcXFxcXFwiYSBicmFuY2ggb2Yga25vd2xlZGdlXFxcXFxcXCIpLiBJbiBjb21wdXRpbmcgdG9wb2xvZ3kgbWVhbnMgdGhlIGFycmFuZ2VtZW50IG9mIG5vZGVzIGluIGEgY29tbXVuaWNhdGlvbnMgbmV0d29yay5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIixcXG4gICAgXFxcImhhcmR3YXJlXFxcIixcXG4gICAgXFxcImNvbW11bmljYXRpb25zXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL3RvcG9sb2d5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkRpYWdub3N0aWNzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEdyZWVrIGRpYWduxY1zdGlrb3Mg4oCYYWJsZSB0byBkaXN0aW5ndWlzaOKAmSwgZnJvbSBkaWFnaWduxY1za2VpbiDigJhkaXN0aW5ndWlzaOKAmS4gQW55IHRvb2wgb3IgdGVjaG5pcXVlLCB1c3VhbGx5IGEgc3BlY2lhbCBwaWVjZSBvZiBzb2Z0d2FyZSwgdXNlZCB0byBmaW5kIHRoZSByb290IG9mIGEgaGFyZHdhcmUgb3Igc29mdHdhcmUgcHJvYmxlbSBhbmQgYXNzaXN0IHdpdGggaXQncyBmaXhpbmcuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZGlhZ25vc2lzXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9kaWFnbm9zdGljI0VuZ2xpc2hcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSGV4YWRlY2ltYWxcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIGhleGFkZWNpbWFsIGlzIGNvbXBvc2VkIG9mIGhleGEtLCBkZXJpdmVkIGZyb20gdGhlIEdyZWVrIM6tzr4gKGhleCkgZm9yIHNpeCwgYW5kIC1kZWNpbWFsLCBkZXJpdmVkIGZyb20gdGhlIExhdGluIGZvciB0ZW50aC4gSW4gbWF0aGVtYXRpY3MgYW5kIGNvbXB1dGluZywgaGV4YWRlY2ltYWwgKGFsc28gYmFzZSAxNiwgb3IgaGV4KSBpcyBhIHBvc2l0aW9uYWwgbnVtZXJhbCBzeXN0ZW0gd2l0aCBhIHJhZGl4LCBvciBiYXNlLCBvZiAxNi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvaGV4YS0jRW5nbGlzaFxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IZXhhZGVjaW1hbFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1OSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJHaWdhXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzrPOr86zzrHPgiDigI4oZ8OtZ2FzLCDigJxnaWFudOKAnSkuIEluIGNvbXB1dGluZyBpdCBpcyBhIHByZWZpeCB0aGF0IG1lYW5zIG11bHRpcGx5aW5nIHRoZSB1bml0IHRvIHdoaWNoIGl0IGlzIGF0dGFjaGVkIGJ5IDJeMzAgb3IgMSwwNzMsNzQxLDgyNC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZ2lnYS1cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTWV0YSAocHJvZ3JhbW1pbmcsIGRhdGEsIGV0Yy4pXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJNZXRhIChmcm9tIHRoZSBHcmVlayBwcmVwb3NpdGlvbiBhbmQgcHJlZml4IG1ldGEtICjOvM61z4TOrC0pIG1lYW5pbmcgXFxcXFxcXCJhZnRlclxcXFxcXFwiLCBvciBcXFxcXFxcImJleW9uZFxcXFxcXFwiKSBpcyBhIHByZWZpeCB1c2VkIGluIEVuZ2xpc2ggdG8gaW5kaWNhdGUgYSBjb25jZXB0IHdoaWNoIGlzIGFuIGFic3RyYWN0aW9uIGZyb20gYW5vdGhlciBjb25jZXB0LCB1c2VkIHRvIGNvbXBsZXRlIG9yIGFkZCB0byB0aGUgbGF0dGVyLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01ldGFcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTGFtYmRhIChmdW5jdGlvbilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkxhbWJkYSBjYWxjdWx1cyAoYWxzbyB3cml0dGVuIGFzIM67LWNhbGN1bHVzKSBpcyBhIGZvcm1hbCBzeXN0ZW0gaW4gbWF0aGVtYXRpY2FsIGxvZ2ljIGZvciBleHByZXNzaW5nIGNvbXB1dGF0aW9uIGJhc2VkIG9uIGZ1bmN0aW9uIGFic3RyYWN0aW9uIGFuZCBhcHBsaWNhdGlvbiB1c2luZyB2YXJpYWJsZSBiaW5kaW5nIGFuZCBzdWJzdGl0dXRpb24uIEl0IHdhcyBmaXJzdCBpbnRyb2R1Y2VkIGJ5IG1hdGhlbWF0aWNpYW4gQWxvbnpvIENodXJjaCBpbiB0aGUgMTkzMHMgYXMgcGFydCBvZiBhbiBpbnZlc3RpZ2F0aW9uIGludG8gdGhlIGZvdW5kYXRpb25zIG9mIG1hdGhlbWF0aWNzLiBMYW1iZGEgY2FsY3VsdXMgaXMgYSB1bml2ZXJzYWwgbW9kZWwgb2YgY29tcHV0YXRpb24gZXF1aXZhbGVudCB0byBhIFR1cmluZyBtYWNoaW5lIChDaHVyY2gtVHVyaW5nIHRoZXNpcywgMTkzNykuIEl0cyBuYW1lc2FrZSwgR3JlZWsgbGV0dGVyIGxhbWJkYSAozrspLCBpcyB1c2VkIGluIGxhbWJkYSB0ZXJtcyAoYWxzbyBjYWxsZWQgbGFtYmRhIGV4cHJlc3Npb25zKSB0byBkZW5vdGUgYmluZGluZyBhIHZhcmlhYmxlIGluIGEgZnVuY3Rpb24uIExhbWJkYSBjYWxjdWx1cyBtYXkgYmUgdHlwZWQgYW5kIHVudHlwZWQuIEluIHR5cGVkIGxhbWJkYSBjYWxjdWx1cyBmdW5jdGlvbnMgY2FuIGJlIGFwcGxpZWQgb25seSBpZiB0aGV5IGFyZSBjYXBhYmxlIG9mIGFjY2VwdGluZyB0aGUgZ2l2ZW4gaW5wdXQncyBcXFxcXFxcInR5cGVcXFxcXFxcIiBvZiBkYXRhLiBMYW1iZGEgY2FsY3VsdXMgaGFzIGFwcGxpY2F0aW9ucyBpbiBtYW55IGRpZmZlcmVudCBhcmVhcyBpbiBtYXRoZW1hdGljcywgcGhpbG9zb3BoeSwgbGluZ3Vpc3RpY3MgYW5kIGNvbXB1dGVyIHNjaWVuY2UuIExhbWJkYSBjYWxjdWx1cyBoYXMgcGxheWVkIGFuIGltcG9ydGFudCByb2xlIGluIHRoZSBkZXZlbG9wbWVudCBvZiB0aGUgdGhlb3J5IG9mIHByb2dyYW1taW5nIGxhbmd1YWdlcy4gRnVuY3Rpb25hbCBwcm9ncmFtbWluZyBsYW5ndWFnZXMgaW1wbGVtZW50IHRoZSBsYW1iZGEgY2FsY3VsdXMuIExhbWJkYSBjYWxjdWx1cyBhbHNvIGlzIGEgY3VycmVudCByZXNlYXJjaCB0b3BpYyBpbiBDYXRlZ29yeSB0aGVvcnkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGFtYmRhX2NhbGN1bHVzXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDYyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1lZ2FcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOvM6tzrPOsc+CIOKAjihtw6lnYXMsIOKAnGdyZWF0LCBsYXJnZSwgbWlnaHR54oCdKS4gSW4gY29tcHV0aW5nLCBtZWdhIG1heSBzb21ldGltZXMgZGVub3RlIDEsMDQ4LDU3NiAoMl4yMCkgb2YgaW5mb3JtYXRpb24gdW5pdHMgKGV4YW1wbGU6IGEgbWVnYWJ5dGUsIGEgbWVnYXdvcmQpLCBidXQgZGVub3RlcyAxMDAwMDAwICgxMF42KSB1bml0cyBvZiBvdGhlciBxdWFudGl0aWVzLCBmb3IgZXhhbXBsZSwgdHJhbnNmZXIgcmF0ZXM6IDFtZWdhYml0L3MgPSAxMDAwMDAwYml0L3MuIFRoZSBwcmVmaXggbWViaSBoYXMgYmVlbiBzdWdnZXN0ZWQgYXMgYSBwcmVmaXggZm9yIDJeMjAgdG8gYXZvaWQgYW1iaWd1aXR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9tZWdhLVxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NZWdhLVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2MyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBbmFsb2dcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDhvIDOvc6szrvOv86zzr/PgiDigI4oYW7DoWxvZ29zLCDigJxwcm9wb3J0aW9uYXRl4oCdKS5BIGRldmljZSBvciBzeXN0ZW0gaW4gd2hpY2ggdGhlIHZhbHVlIG9mIGEgZGF0YSBpdGVtIChzdWNoIGFzIHRpbWUpIGlzIHJlcHJlc2VudGVkIGJ5IGEgY29udGludW91cyhseSkgdmFyaWFibGUgcGh5c2ljYWwgcXVhbnRpdHkgdGhhdCBjYW4gYmUgbWVhc3VyZWQgKHN1Y2ggYXMgdGhlIHNoYWRvdyBvZiBhIHN1bmRpYWwpXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwidGVjaG5vbG9neVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9hbmFsb2dcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRHluYW1pY1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiZnJvbSBBbmNpZW50IEdyZWVrIM60z4XOvc6xzrzOuc66z4zPgiDigI4oZHVuYW1pa8Ozcywg4oCccG93ZXJmdWzigJ0pLkluIGNvbXB1dGluZyBpdCBtZWFucyBzb21ldGhpbmcgdGhhdCBpcyBoYXBwZW5pbmcgYXQgcnVudGltZSBpbnN0ZWFkIG9mIGJlaW5nIHByZWRldGVybWluZWQgYXQgY29tcGlsZSB0aW1lLkZvciBpbnN0YW5jZTogZHluYW1pYyBhbGxvY2F0aW9uLCBkeW5hbWljIElQIGFkZHJlc3NlcywgdGhlIGR5bmFtaWMgcmVzaXppbmcgb2YgYW4gYXJyYXlcXFxcblxcXFxuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2R5bmFtaWNcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTWFjcm9cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOvM6xzrrPgc+Mz4Ig4oCOKG1ha3LDs3MsIOKAnGxvbmfigJ0pLiBBIGNvbXBhcmF0aXZlbHkgaHVtYW4tZnJpZW5kbHkgYWJicmV2aWF0aW9uIG9mIGNvbXBsaWNhdGVkIGlucHV0IHRvIGEgY29tcHV0ZXIgcHJvZ3JhbS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvbWFjcm9cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRXRoZXJuZXRcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIEV0aGVybmV0IGlzIGEgY29tcG91bmQgd29yZCBmb3JtZWQgYnkgam9pbmluZyAnRXRoZXInIGFuZCAnTmV0Jy4gIFRoZSB3b3JkICdFdGhlcicgaXMgYmFzZWQgb24gQW5jaWVudCBHcmVlayB3b3JkIM6x4bywzrjOrs+BIOKAjihhaXRo4biXciwg4oCcdXBwZXIgYWly4oCdKS5JbiBjb21wdXRpbmcgaXQgcmVmZXJzIHRvIGEgc2V0IG9mIG5ldHdvcmsgY2FibGluZyBhbmQgbmV0d29yayBhY2Nlc3MgKENTTUEvQ0QpIHByb3RvY29sIHN0YW5kYXJkcyBmb3IgYnVzIHRvcG9sb2d5IGNvbXB1dGVyIG5ldHdvcmtzIGludmVudGVkIGJ5IFhlcm94IGJ1dCBub3cgY29udHJvbGxlZCBieSB0aGUgODAyLjMgc3ViY29tbWl0dGVlIG9mIHRoZSBJRUVFLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm5ldHdvcmtzXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL0V0aGVybmV0XFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9ldGhlclxcXCJcXG4gIF1cXG59XVxcblwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuLi9+L2dyZWVrLWluLXRlY2gvZGF0YS9lbnRyaWVzLmpzb25cbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxoZWFkZXI+XFxuXFx0PGRpdiBjbGFzcz1cXFwiY29udGFpbmVyXFxcIj5cXG5cXHRcXHQ8aDE+PCU9IHRpdGxlICU+PC9oMT5cXG5cXHRcXHQ8dWwgY2xhc3M9XFxcInNvY2lhbC1saW5rc1xcXCI+XFxuXFx0XFx0XFx0PGxpPlxcblxcdFxcdFxcdFxcdDxhIGNsYXNzPVxcXCJpb24tc29jaWFsLXR3aXR0ZXJcXFwiXFxuXFx0XFx0XFx0XFx0XFx0aHJlZj1cXFwiaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/XFxuXFx0XFx0XFx0XFx0XFx0dGV4dD1EaWQlMjB5b3UlMjBrbm93JTIwdGhhdCUyMCUyMjwlPSB0aXRsZSAlPiUyMiUyMGlzJTIwYSUyMGdyZWVrJTIwd29yZCUzRiUyMCZhbXA7XFxuXFx0XFx0XFx0XFx0XFx0dXJsPWh0dHAlM0ElMkYlMkZncmVla2ludGVjaC5jb20lMkY8JT0gaWQgJT4lMkY8JT0gdXJsRnJpZW5kbHlUaXRsZSAlPiZhbXA7XFxuXFx0XFx0XFx0XFx0XFx0aGFzaHRhZ3M9Z3JlZWtpbnRlY2hcXFwiXFxuXFx0XFx0XFx0XFx0XFx0ZGF0YS1jb3VudD1cXFwibm9uZVxcXCI+XFxuXFx0XFx0XFx0XFx0PC9hPlxcblxcdFxcdFxcdDwvbGk+XFxuXFx0XFx0XFx0PGxpPlxcblxcdFxcdFxcdFxcdDxhIGNsYXNzPVxcXCJpb24tc29jaWFsLWZhY2Vib29rXFxcIlxcblxcdFxcdFxcdFxcdFxcdGhyZWY9XFxcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocFxcblxcdFxcdFxcdFxcdFxcdD91PWh0dHA6Ly9ncmVla2ludGVjaC5jb20vI2VudHJ5LzwlPSBpZCAlPi88JT0gdXJsRnJpZW5kbHlUaXRsZSAlPlxcXCI+XFxuXFx0XFx0XFx0XFx0PC9hPlxcblxcdFxcdFxcdDwvbGk+XFxuXFx0XFx0PC91bD5cXG5cXHQ8L2Rpdj5cXG48L2hlYWRlcj5cXG48cD48JT0gZGVzY3JpcHRpb24gJT48L3A+XFxuPGZvb3Rlcj5cXG5cXHQ8cCBjbGFzcz1cXFwidGFncy1jb3B5XFxcIj5UYWdzOiA8L3A+XFxuXFx0PHVsIGNsYXNzPVxcXCJ0YWdzXFxcIj5cXG5cXHRcXHQ8JSBfLmVhY2goY2F0ZWdvcmllcywgZnVuY3Rpb24oY2F0ZWdvcnkpIHsgJT5cXG5cXHRcXHRcXHQ8bGk+PCU9IGNhdGVnb3J5ICU+PC9saT5cXG5cXHRcXHQ8JSB9KSAlPlxcblxcdDwvdWw+XFxuXFxuXFx0PCUgaWYgKCFfLmlzRW1wdHkocmVmZXJlbmNlcykpIHsgJT5cXG5cXHRcXHQ8cCBjbGFzcz1cXFwicmVmZXJlbmNlcy1jb3B5XFxcIj5SZWZlcmVuY2VzOiA8L3A+XFxuXFx0XFx0PHVsIGNsYXNzPVxcXCJyZWZlcmVuY2VzXFxcIj5cXG5cXHRcXHRcXHQ8JSBfLmVhY2gocmVmZXJlbmNlcywgZnVuY3Rpb24ocmVmZXJlbmNlKSB7ICU+XFxuXFx0XFx0XFx0XFx0PGxpPjxhIGhyZWY9XFxcIjwlPSByZWZlcmVuY2UgJT5cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj48JT0gcmVmZXJlbmNlICU+PC9hPjwvbGk+XFxuXFx0XFx0XFx0PCUgfSkgJT5cXG5cXHRcXHQ8L3VsPlxcblxcdDwlIH0gJT5cXG48L2Zvb3Rlcj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi90ZW1wbGF0ZXMvZW50cnkuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgdW5pcXVlUmFuZG9tID0gcmVxdWlyZSgndW5pcXVlLXJhbmRvbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIpIHtcblx0dmFyIHJhbmQgPSB1bmlxdWVSYW5kb20oMCwgYXJyLmxlbmd0aCAtIDEpO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGFycltyYW5kKCldO1xuXHR9O1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi4vfi91bmlxdWUtcmFuZG9tLWFycmF5L2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG5cdHZhciBwcmV2O1xuXHRyZXR1cm4gZnVuY3Rpb24gcmFuZCgpIHtcblx0XHR2YXIgbnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKTtcblx0XHRyZXR1cm4gcHJldiA9IG51bSA9PT0gcHJldiAmJiBtaW4gIT09IG1heCA/IHJhbmQoKSA6IG51bTtcblx0fTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL34vdW5pcXVlLXJhbmRvbS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),o=i(r),s=n(6),a=i(s);n(10),new a["default"],o["default"].history.start()},function(e,t,n){var i,r;(function(o){!function(s){var a="object"==typeof self&&self.self===self&&self||"object"==typeof o&&o.global===o&&o;i=[n(2),n(3),t],r=function(e,t,n){a.Backbone=s(a,n,e,t)}.apply(t,i),!(void 0!==r&&(e.exports=r))}(function(e,t,n,i){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,r){return n[t](this[i],c(e,this),r)};case 4:return function(e,r,o){return n[t](this[i],c(e,this),r,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},a=function(e,t,i){n.each(t,function(t,r){n[r]&&(e.prototype[r]=s(t,r,i))})},c=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},h=/\s+/,f=function(e,t,i,r,o){var s,a=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=n.keys(i);a<s.length;a++)t=f(e,t,s[a],i[s[a]],o)}else if(i&&h.test(i))for(s=i.split(h);a<s.length;a++)t=e(t,s[a],r,o);else t=e(t,i,r,o);return t};l.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,i,r){if(e._events=f(d,e._events||{},t,n,{context:i,ctx:e,listening:r}),r){var o=e._listeners||(e._listeners={});o[r.id]=r}return e};l.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[r]={obj:e,objId:r,id:a,listeningTo:o,count:0}}return p(e,t,i,this,s),this};var d=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,s=i.ctx,a=i.listening;a&&a.count++,r.push({callback:n,context:o,ctx:o||s,listening:a})}return e};l.off=function(e,t,n){return this._events?(this._events=f(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:n.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(t,i,this)}return this};var m=function(e,t,i,r){if(e){var o,s=0,a=r.context,c=r.listeners;if(t||i||a){for(var u=t?[t]:n.keys(e);s<u.length;s++){t=u[s];var l=e[t];if(!l)break;for(var h=[],f=0;f<l.length;f++){var p=l[f];i&&i!==p.callback&&i!==p.callback._callback||a&&a!==p.context?h.push(p):(o=p.listening,o&&0===--o.count&&(delete c[o.id],delete o.listeningTo[o.objId]))}h.length?e[t]=h:delete e[t]}return e}for(var d=n.keys(c);s<d.length;s++)o=c[d[s]],delete c[o.id],delete o.listeningTo[o.objId]}};l.once=function(e,t,i){var r=f(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(r,t,i)},l.listenToOnce=function(e,t,i){var r=f(g,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,r)};var g=function(e,t,i,r){if(i){var o=e[t]=n.once(function(){r(t,o),i.apply(this,arguments)});o._callback=i}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return f(v,this._events,e,void 0,n),this};var v=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&y(r,i),o&&y(o,[t].concat(i))}return e},y=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,s=i.silent,a=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,l=this.changed,h=this._previousAttributes;for(var f in r)t=r[f],n.isEqual(u[f],t)||a.push(f),n.isEqual(h[f],t)?delete l[f]:l[f]=t,o?delete u[f]:u[f]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=i);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,u[a[p]],i)}if(c)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var r in e){var o=e[r];n.isEqual(t[r],o)||(i[r]=o)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;return!!t.set(r,e)&&(i&&i.call(e.context,t,n,e),void t.trigger("sync",t,n,e))},$(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var o=i.wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var s=this,a=i.success,c=this.attributes;i.success=function(e){s.attributes=c;var t=i.parse?s.parse(e,i):e;return o&&(t=n.extend({},r,t)),!(t&&!s.set(t,i))&&(a&&a.call(i.context,s,e,i),void s.trigger("sync",s,e,i))},$(this,i),r&&o&&(this.attributes=n.extend({},c,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var l=this.sync(u,this,i);return this.attributes=c,l},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&o(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):($(this,e),s=this.sync("delete",this,e)),r||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||R();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(b,w,"attributes");var x=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},k={add:!0,remove:!0,merge:!0},T={add:!0,remove:!1},E=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),o=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;i<o;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+o+n]=r[i]};n.extend(x.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,T))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){t=n.extend({},k,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,s,a=[],c=[],u=[],l=[],h={},f=t.add,p=t.merge,d=t.remove,m=!1,g=this.comparator&&null==r&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){o=e[s];var y=this.get(o);if(y){if(p&&o!==y){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=y.parse(b,t)),y.set(b,t),u.push(y),g&&!m&&(m=y.hasChanged(v))}h[y.cid]||(h[y.cid]=!0,a.push(y)),e[s]=y}else f&&(o=e[s]=this._prepareModel(o,t),o&&(c.push(o),this._addReference(o,t),h[o.cid]=!0,a.push(o)))}if(d){for(s=0;s<this.length;s++)o=this.models[s],h[o.cid]||l.push(o);l.length&&this._removeModels(l,t)}var w=!1,x=!g&&f&&d;if(a.length&&x?(w=this.length!==a.length||n.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,E(this.models,a,0),this.length=this.models.length):c.length&&(g&&(m=!0),E(this.models,c,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(s=0;s<c.length;s++)null!=r&&(t.index=r+s),o=c[s],o.trigger("add",o,this,t);(m||w)&&this.trigger("sort",this,t),(c.length||l.length||u.length)&&(t.changes={added:c,removed:l,merged:u},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},$(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(e=this._prepareModel(e,t),!e)return!1;i||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,n){i&&r.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var _={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(x,_,"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,S)),this._ensureElement(),this.initialize.apply(this,arguments)},A=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(A);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,r){var o=j[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||R()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var c=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,c&&c.call(r.context,e,t,n)};var u=r.xhr=t.ajax(n.extend(s,r));return i.trigger("request",i,u,r),u};var j={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var I=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},O=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,N=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(I.prototype,l,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,function(n){var s=o._extractParameters(e,n);o.execute(r,s,i)!==!1&&(o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),t.history.trigger("route",o,i,s))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(O,"(?:$1)?").replace(D,function(e,t){return t?e:"([^/?]+)"}).replace(N,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,q=/^\/+|\/+$/g,L=/#.*$/;M.started=!1,n.extend(M.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(F,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");if(M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(q,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!M.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(L,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new M;var H=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};b.extend=x.extend=I.extend=C.extend=M.extend=H;var R=function(){throw new Error('A "url" property or function must be specified')},$=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t})}).call(t,function(){return this}())},function(e,t,n){var i,r;(function(){function n(e){function t(t,n,i,r,o,s){for(;o>=0&&o<s;o+=e){var a=r?r[o]:o;i=n(i,t[a],a,t)}return i}return function(n,i,r,o){i=T(i,o,4);var s=!I(n)&&k.keys(n),a=(s||n).length,c=e>0?0:a-1;return arguments.length<3&&(r=n[s?s[c]:c],c+=e),t(n,i,r,s,c,a)}}function o(e){return function(t,n,i){n=E(n,i);for(var r=j(t),o=e>0?0:r-1;o>=0&&o<r;o+=e)if(n(t[o],o,t))return o;return-1}}function s(e,t,n){return function(i,r,o){var s=0,a=j(i);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(i,r),i[o]===r?o:-1;if(r!==r)return o=t(d.call(i,s,a),k.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(i[o]===r)return o;return-1}}function a(e,t){var n=M.length,i=e.constructor,r=k.isFunction(i)&&i.prototype||h,o="constructor";for(k.has(e,o)&&!k.contains(t,o)&&t.push(o);n--;)o=M[n],o in e&&e[o]!==r[o]&&!k.contains(t,o)&&t.push(o)}var c=this,u=c._,l=Array.prototype,h=Object.prototype,f=Function.prototype,p=l.push,d=l.slice,m=h.toString,g=h.hasOwnProperty,v=Array.isArray,y=Object.keys,b=f.bind,w=Object.create,x=function(){},k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=k),t._=k,k.VERSION="1.8.3";var T=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},E=function(e,t,n){return null==e?k.identity:k.isFunction(e)?T(e,t,n):k.isObject(e)?k.matcher(e):k.property(e)};k.iteratee=function(e,t){return E(e,t,1/0)};var _=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==n[u]||(n[u]=o[u])}return n}},C=function(e){if(!k.isObject(e))return{};if(w)return w(e);x.prototype=e;var t=new x;return x.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},S=Math.pow(2,53)-1,j=A("length"),I=function(e){var t=j(e);return"number"==typeof t&&t>=0&&t<=S};k.each=k.forEach=function(e,t,n){t=T(t,n);var i,r;if(I(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=k.keys(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e},k.map=k.collect=function(e,t,n){t=E(t,n);for(var i=!I(e)&&k.keys(e),r=(i||e).length,o=Array(r),s=0;s<r;s++){var a=i?i[s]:s;o[s]=t(e[a],a,e)}return o},k.reduce=k.foldl=k.inject=n(1),k.reduceRight=k.foldr=n(-1),k.find=k.detect=function(e,t,n){var i;if(i=I(e)?k.findIndex(e,t,n):k.findKey(e,t,n),void 0!==i&&i!==-1)return e[i]},k.filter=k.select=function(e,t,n){var i=[];return t=E(t,n),k.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},k.reject=function(e,t,n){return k.filter(e,k.negate(E(t)),n)},k.every=k.all=function(e,t,n){t=E(t,n);for(var i=!I(e)&&k.keys(e),r=(i||e).length,o=0;o<r;o++){var s=i?i[o]:o;if(!t(e[s],s,e))return!1}return!0},k.some=k.any=function(e,t,n){t=E(t,n);for(var i=!I(e)&&k.keys(e),r=(i||e).length,o=0;o<r;o++){var s=i?i[o]:o;if(t(e[s],s,e))return!0}return!1},k.contains=k.includes=k.include=function(e,t,n,i){return I(e)||(e=k.values(e)),("number"!=typeof n||i)&&(n=0),k.indexOf(e,t,n)>=0},k.invoke=function(e,t){var n=d.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matcher(t))},k.findWhere=function(e,t){return k.find(e,k.matcher(t))},k.max=function(e,t,n){var i,r,o=-(1/0),s=-(1/0);if(null==t&&null!=e){e=I(e)?e:k.values(e);for(var a=0,c=e.length;a<c;a++)i=e[a],i>o&&(o=i)}else t=E(t,n),k.each(e,function(e,n,i){r=t(e,n,i),(r>s||r===-(1/0)&&o===-(1/0))&&(o=e,s=r)});return o},k.min=function(e,t,n){var i,r,o=1/0,s=1/0;if(null==t&&null!=e){e=I(e)?e:k.values(e);for(var a=0,c=e.length;a<c;a++)i=e[a],i<o&&(o=i)}else t=E(t,n),k.each(e,function(e,n,i){r=t(e,n,i),(r<s||r===1/0&&o===1/0)&&(o=e,s=r)});return o},k.shuffle=function(e){for(var t,n=I(e)?e:k.values(e),i=n.length,r=Array(i),o=0;o<i;o++)t=k.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},k.sample=function(e,t,n){return null==t||n?(I(e)||(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))},k.sortBy=function(e,t,n){return t=E(t,n),k.pluck(k.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var O=function(e){return function(t,n,i){var r={};return n=E(n,i),k.each(t,function(i,o){var s=n(i,o,t);e(r,i,s)}),r}};k.groupBy=O(function(e,t,n){k.has(e,n)?e[n].push(t):e[n]=[t]}),k.indexBy=O(function(e,t,n){e[n]=t}),k.countBy=O(function(e,t,n){k.has(e,n)?e[n]++:e[n]=1}),k.toArray=function(e){return e?k.isArray(e)?d.call(e):I(e)?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:I(e)?e.length:k.keys(e).length},k.partition=function(e,t,n){t=E(t,n);var i=[],r=[];return k.each(e,function(e,n,o){(t(e,n,o)?i:r).push(e)}),[i,r]},k.first=k.head=k.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:k.initial(e,e.length-t)},k.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},k.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:k.rest(e,Math.max(0,e.length-t))},k.rest=k.tail=k.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var D=function(e,t,n,i){for(var r=[],o=0,s=i||0,a=j(e);s<a;s++){var c=e[s];if(I(c)&&(k.isArray(c)||k.isArguments(c))){t||(c=D(c,t,n));var u=0,l=c.length;for(r.length+=l;u<l;)r[o++]=c[u++]}else n||(r[o++]=c)}return r};k.flatten=function(e,t){return D(e,t,!1)},k.without=function(e){return k.difference(e,d.call(arguments,1))},k.uniq=k.unique=function(e,t,n,i){k.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=E(n,i));for(var r=[],o=[],s=0,a=j(e);s<a;s++){var c=e[s],u=n?n(c,s,e):c;t?(s&&o===u||r.push(c),o=u):n?k.contains(o,u)||(o.push(u),r.push(c)):k.contains(r,c)||r.push(c)}return r},k.union=function(){return k.uniq(D(arguments,!0,!0))},k.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=j(e);i<r;i++){var o=e[i];if(!k.contains(t,o)){for(var s=1;s<n&&k.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},k.difference=function(e){var t=D(arguments,!0,!0,1);return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){return k.unzip(arguments)},k.unzip=function(e){for(var t=e&&k.max(e,j).length||0,n=Array(t),i=0;i<t;i++)n[i]=k.pluck(e,i);return n},k.object=function(e,t){for(var n={},i=0,r=j(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.findIndex=o(1),k.findLastIndex=o(-1),k.sortedIndex=function(e,t,n,i){n=E(n,i,1);for(var r=n(t),o=0,s=j(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<r?o=a+1:s=a}return o},k.indexOf=s(1,k.findIndex,k.sortedIndex),k.lastIndexOf=s(-1,k.findLastIndex),k.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r};var N=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=C(e.prototype),s=e.apply(o,r);return k.isObject(s)?s:o};k.bind=function(e,t){if(b&&e.bind===b)return b.apply(e,d.call(arguments,1));if(!k.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),i=function(){return N(e,i,t,this,n.concat(d.call(arguments)))};return i},k.partial=function(e){var t=d.call(arguments,1),n=function(){for(var i=0,r=t.length,o=Array(r),s=0;s<r;s++)o[s]=t[s]===k?arguments[i++]:t[s];for(;i<arguments.length;)o.push(arguments[i++]);return N(e,n,this,this,o)};return n},k.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)n=arguments[t],e[n]=k.bind(e[n],e);return e},k.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return k.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},k.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=k.partial(k.delay,k,1),k.throttle=function(e,t,n){var i,r,o,s=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:k.now(),s=null,o=e.apply(i,r),s||(i=r=null)};return function(){var u=k.now();a||n.leading!==!1||(a=u);var l=t-(u-a);return i=this,r=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),a=u,o=e.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(c,l)),o}},k.debounce=function(e,t,n){var i,r,o,s,a,c=function(){var u=k.now()-s;u<t&&u>=0?i=setTimeout(c,t-u):(i=null,n||(a=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,s=k.now();var u=n&&!i;return i||(i=setTimeout(c,t)),u&&(a=e.apply(o,r),o=r=null),a}},k.wrap=function(e,t){return k.partial(t,e)},k.negate=function(e){return function(){return!e.apply(this,arguments)}},k.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},k.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},k.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},k.once=k.partial(k.before,2);
var P=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];k.keys=function(e){if(!k.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return P&&a(e,t),t},k.allKeys=function(e){if(!k.isObject(e))return[];var t=[];for(var n in e)t.push(n);return P&&a(e,t),t},k.values=function(e){for(var t=k.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},k.mapObject=function(e,t,n){t=E(t,n);for(var i,r=k.keys(e),o=r.length,s={},a=0;a<o;a++)i=r[a],s[i]=t(e[i],i,e);return s},k.pairs=function(e){for(var t=k.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},k.invert=function(e){for(var t={},n=k.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=_(k.allKeys),k.extendOwn=k.assign=_(k.keys),k.findKey=function(e,t,n){t=E(t,n);for(var i,r=k.keys(e),o=0,s=r.length;o<s;o++)if(i=r[o],t(e[i],i,e))return i},k.pick=function(e,t,n){var i,r,o={},s=e;if(null==s)return o;k.isFunction(t)?(r=k.allKeys(s),i=T(t,n)):(r=D(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var a=0,c=r.length;a<c;a++){var u=r[a],l=s[u];i(l,u,s)&&(o[u]=l)}return o},k.omit=function(e,t,n){if(k.isFunction(t))t=k.negate(t);else{var i=k.map(D(arguments,!1,!1,1),String);t=function(e,t){return!k.contains(i,t)}}return k.pick(e,t,n)},k.defaults=_(k.allKeys,!0),k.create=function(e,t){var n=C(e);return t&&k.extendOwn(n,t),n},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e},k.isMatch=function(e,t){var n=k.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var s=n[o];if(t[s]!==r[s]||!(s in r))return!1}return!0};var F=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=m.call(e);if(r!==m.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),o){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!F(e[c],t[c],n,i))return!1}else{var u,l=k.keys(e);if(c=l.length,k.keys(t).length!==c)return!1;for(;c--;)if(u=l[c],!k.has(t,u)||!F(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0};k.isEqual=function(e,t){return F(e,t)},k.isEmpty=function(e){return null==e||(I(e)&&(k.isArray(e)||k.isString(e)||k.isArguments(e))?0===e.length:0===k.keys(e).length)},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=v||function(e){return"[object Array]"===m.call(e)},k.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},k.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){k["is"+e]=function(t){return m.call(t)==="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return k.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(e){return"function"==typeof e||!1}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!==+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===m.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return null!=e&&g.call(e,t)},k.noConflict=function(){return c._=u,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.noop=function(){},k.property=A,k.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},k.matcher=k.matches=function(e){return e=k.extendOwn({},e),function(t){return k.isMatch(t,e)}},k.times=function(e,t,n){var i=Array(Math.max(0,e));t=T(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=k.invert(q),H=function(e){var t=function(t){return e[t]},n="(?:"+k.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};k.escape=H(q),k.unescape=H(L),k.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),k.isFunction(i)?i.call(e):i};var R=0;k.uniqueId=function(e){var t=++R+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,B=function(e){return"\\"+G[e]};k.template=function(e,t,n){!t&&n&&(t=n),t=k.defaults({},t,k.templateSettings);var i=RegExp([(t.escape||$).source,(t.interpolate||$).source,(t.evaluate||$).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,i,s,a){return o+=e.slice(r,a).replace(W,B),r=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(a){throw a.source=o,a}var c=function(e){return s.call(this,e,k)},u=t.variable||"obj";return c.source="function("+u+"){\n"+o+"}",c},k.chain=function(e){var t=k(e);return t._chain=!0,t};var z=function(e,t){return e._chain?k(t).chain():t};k.mixin=function(e){k.each(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),z(this,n.apply(k,e))}})},k.mixin(k),k.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=l[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],z(this,n)}}),k.each(["concat","join","slice"],function(e){var t=l[e];k.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),k.prototype.value=function(){return this._wrapped},k.prototype.valueOf=k.prototype.toJSON=k.prototype.value,k.prototype.toString=function(){return""+this._wrapped},i=[],r=function(){return k}.apply(t,i),!(void 0!==r&&(e.exports=r))}).call(this)},function(e,t,n){var i,r;/*!
	 * jQuery JavaScript Library v2.2.4
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-05-20T17:23Z
	 */
!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){function s(e){var t=!!e&&"length"in e&&e.length,n=ue.type(e);return"function"!==n&&!ue.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function a(e,t,n){if(ue.isFunction(t))return ue.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ue.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(be.test(t))return ue.filter(t,e,n);t=ue.filter(t,e)}return ue.grep(e,function(e){return ie.call(t,e)>-1!==n})}function c(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e){var t={};return ue.each(e.match(_e)||[],function(e,n){t[n]=!0}),t}function l(){Z.removeEventListener("DOMContentLoaded",l),n.removeEventListener("load",l),ue.ready()}function h(){this.expando=ue.expando+h.uid++}function f(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(De,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Oe.test(n)?ue.parseJSON(n):n)}catch(r){}Ie.set(e,t,n)}else n=void 0;return n}function p(e,t,n,i){var r,o=1,s=20,a=i?function(){return i.cur()}:function(){return ue.css(e,t,"")},c=a(),u=n&&n[3]||(ue.cssNumber[t]?"":"px"),l=(ue.cssNumber[t]||"px"!==u&&+c)&&Pe.exec(ue.css(e,t));if(l&&l[3]!==u){u=u||l[3],n=n||[],l=+c||1;do o=o||".5",l/=o,ue.style(e,t,l+u);while(o!==(o=a()/c)&&1!==o&&--s)}return n&&(l=+l||+c||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=l,i.end=r)),r}function d(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ue.nodeName(e,t)?ue.merge([e],n):n}function m(e,t){for(var n=0,i=e.length;n<i;n++)je.set(e[n],"globalEval",!t||je.get(t[n],"globalEval"))}function g(e,t,n,i,r){for(var o,s,a,c,u,l,h=t.createDocumentFragment(),f=[],p=0,g=e.length;p<g;p++)if(o=e[p],o||0===o)if("object"===ue.type(o))ue.merge(f,o.nodeType?[o]:o);else if($e.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Le.exec(o)||["",""])[1].toLowerCase(),c=Re[a]||Re._default,s.innerHTML=c[1]+ue.htmlPrefilter(o)+c[2],l=c[0];l--;)s=s.lastChild;ue.merge(f,s.childNodes),s=h.firstChild,s.textContent=""}else f.push(t.createTextNode(o));for(h.textContent="",p=0;o=f[p++];)if(i&&ue.inArray(o,i)>-1)r&&r.push(o);else if(u=ue.contains(o.ownerDocument,o),s=d(h.appendChild(o),"script"),u&&m(s),n)for(l=0;o=s[l++];)He.test(o.type||"")&&n.push(o);return h}function v(){return!0}function y(){return!1}function b(){try{return Z.activeElement}catch(e){}}function w(e,t,n,i,r,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(a in t)w(e,a,n,i,t[a],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=y;else if(!r)return e;return 1===o&&(s=r,r=function(e){return ue().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=ue.guid++)),e.each(function(){ue.event.add(this,t,r,i,n)})}function x(e,t){return ue.nodeName(e,"table")&&ue.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function k(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function T(e){var t=Ye.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){var n,i,r,o,s,a,c,u;if(1===t.nodeType){if(je.hasData(e)&&(o=je.access(e),s=je.set(t,o),u=o.events)){delete s.handle,s.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)ue.event.add(t,r,u[r][n])}Ie.hasData(e)&&(a=Ie.access(e),c=ue.extend({},a),Ie.set(t,c))}}function _(e,t){var n=t.nodeName.toLowerCase();"input"===n&&qe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function C(e,t,n,i){t=te.apply([],t);var r,o,s,a,c,u,l=0,h=e.length,f=h-1,p=t[0],m=ue.isFunction(p);if(m||h>1&&"string"==typeof p&&!ae.checkClone&&Xe.test(p))return e.each(function(r){var o=e.eq(r);m&&(t[0]=p.call(this,r,o.html())),C(o,t,n,i)});if(h&&(r=g(t,e[0].ownerDocument,!1,e,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=ue.map(d(r,"script"),k),a=s.length;l<h;l++)c=r,l!==f&&(c=ue.clone(c,!0,!0),a&&ue.merge(s,d(c,"script"))),n.call(e[l],c,l);if(a)for(u=s[s.length-1].ownerDocument,ue.map(s,T),l=0;l<a;l++)c=s[l],He.test(c.type||"")&&!je.access(c,"globalEval")&&ue.contains(u,c)&&(c.src?ue._evalUrl&&ue._evalUrl(c.src):ue.globalEval(c.textContent.replace(Ve,"")))}return e}function A(e,t,n){for(var i,r=t?ue.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||ue.cleanData(d(i)),i.parentNode&&(n&&ue.contains(i.ownerDocument,i)&&m(d(i,"script")),i.parentNode.removeChild(i));return e}function S(e,t){var n=ue(t.createElement(e)).appendTo(t.body),i=ue.css(n[0],"display");return n.detach(),i}function j(e){var t=Z,n=Ke[e];return n||(n=S(e,t),"none"!==n&&n||(Je=(Je||ue("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Je[0].contentDocument,t.write(),t.close(),n=S(e,t),Je.detach()),Ke[e]=n),n}function I(e,t,n){var i,r,o,s,a=e.style;return n=n||et(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||ue.contains(e.ownerDocument,e)||(s=ue.style(e,t)),n&&!ae.pixelMarginRight()&&Ze.test(s)&&Qe.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o),void 0!==s?s+"":s}function O(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function D(e){if(e in at)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=st.length;n--;)if(e=st[n]+t,e in at)return e}function N(e,t,n){var i=Pe.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function P(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=ue.css(e,n+Me[o],!0,r)),i?("content"===n&&(s-=ue.css(e,"padding"+Me[o],!0,r)),"margin"!==n&&(s-=ue.css(e,"border"+Me[o]+"Width",!0,r))):(s+=ue.css(e,"padding"+Me[o],!0,r),"padding"!==n&&(s+=ue.css(e,"border"+Me[o]+"Width",!0,r)));return s}function M(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=et(e),s="border-box"===ue.css(e,"boxSizing",!1,o);if(r<=0||null==r){if(r=I(e,t,o),(r<0||null==r)&&(r=e.style[t]),Ze.test(r))return r;i=s&&(ae.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+P(e,t,n||(s?"border":"content"),i,o)+"px"}function F(e,t){for(var n,i,r,o=[],s=0,a=e.length;s<a;s++)i=e[s],i.style&&(o[s]=je.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Fe(i)&&(o[s]=je.access(i,"olddisplay",j(i.nodeName)))):(r=Fe(i),"none"===n&&r||je.set(i,"olddisplay",r?n:ue.css(i,"display"))));for(s=0;s<a;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function q(e,t,n,i,r){return new q.prototype.init(e,t,n,i,r)}function L(){return n.setTimeout(function(){ct=void 0}),ct=ue.now()}function H(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=Me[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function R(e,t,n){for(var i,r=(W.tweeners[t]||[]).concat(W.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,t,e))return i}function $(e,t,n){var i,r,o,s,a,c,u,l,h=this,f={},p=e.style,d=e.nodeType&&Fe(e),m=je.get(e,"fxshow");n.queue||(a=ue._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,c=a.empty.fire,a.empty.fire=function(){a.unqueued||c()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,ue.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=ue.css(e,"display"),l="none"===u?je.get(e,"olddisplay")||j(e.nodeName):u,"inline"===l&&"none"===ue.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],lt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;d=!0}f[i]=m&&m[i]||ue.style(e,i)}else u=void 0;if(ue.isEmptyObject(f))"inline"===("none"===u?j(e.nodeName):u)&&(p.display=u);else{m?"hidden"in m&&(d=m.hidden):m=je.access(e,"fxshow",{}),o&&(m.hidden=!d),d?ue(e).show():h.done(function(){ue(e).hide()}),h.done(function(){var t;je.remove(e,"fxshow");for(t in f)ue.style(e,t,f[t])});for(i in f)s=R(d?m[i]:0,i,h),i in m||(m[i]=s.start,d&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function G(e,t){var n,i,r,o,s;for(n in e)if(i=ue.camelCase(n),r=t[i],o=e[n],ue.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=ue.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function W(e,t,n){var i,r,o=0,s=W.prefilters.length,a=ue.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=ct||L(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,s=0,c=u.tweens.length;s<c;s++)u.tweens[s].run(o);return a.notifyWith(e,[u,o,n]),o<1&&c?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:ue.extend({},t),opts:ue.extend(!0,{specialEasing:{},easing:ue.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||L(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ue.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),l=u.props;for(G(l,u.opts.specialEasing);o<s;o++)if(i=W.prefilters[o].call(u,e,l,u.opts))return ue.isFunction(i.stop)&&(ue._queueHooks(u.elem,u.opts.queue).stop=ue.proxy(i.stop,i)),i;return ue.map(l,R,u),ue.isFunction(u.opts.start)&&u.opts.start.call(e,u),ue.fx.timer(ue.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function B(e){return e.getAttribute&&e.getAttribute("class")||""}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(_e)||[];if(ue.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function U(e,t,n,i){function r(a){var c;return o[a]=!0,ue.each(e[a]||[],function(e,a){var u=a(t,n,i);return"string"!=typeof u||s||o[u]?s?!(c=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),c}var o={},s=e===It;return r(t.dataTypes[0])||!o["*"]&&r("*")}function X(e,t){var n,i,r=ue.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&ue.extend(!0,e,i),e}function Y(e,t,n){for(var i,r,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),n[o]}function V(e,t,n,i){var r,o,s,a,c,u={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(s=u[c+" "+o]||u["* "+o],!s)for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[c+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[r]:u[r]!==!0&&(o=a[0],l.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function J(e,t,n,i){var r;if(ue.isArray(t))ue.each(t,function(t,r){n||Pt.test(e)?i(e,r):J(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==ue.type(t))i(e,t);else for(r in t)J(e+"["+r+"]",t[r],n,i)}function K(e){return ue.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Q=[],Z=n.document,ee=Q.slice,te=Q.concat,ne=Q.push,ie=Q.indexOf,re={},oe=re.toString,se=re.hasOwnProperty,ae={},ce="2.2.4",ue=function(e,t){return new ue.fn.init(e,t)},le=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,he=/^-ms-/,fe=/-([\da-z])/gi,pe=function(e,t){return t.toUpperCase()};ue.fn=ue.prototype={jquery:ce,constructor:ue,selector:"",length:0,toArray:function(){return ee.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:ee.call(this)},pushStack:function(e){var t=ue.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ue.each(this,e)},map:function(e){return this.pushStack(ue.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ee.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ne,sort:Q.sort,splice:Q.splice},ue.extend=ue.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||ue.isFunction(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(u&&i&&(ue.isPlainObject(i)||(r=ue.isArray(i)))?(r?(r=!1,o=n&&ue.isArray(n)?n:[]):o=n&&ue.isPlainObject(n)?n:{},s[t]=ue.extend(u,o,i)):void 0!==i&&(s[t]=i));return s},ue.extend({expando:"jQuery"+(ce+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ue.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ue.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==ue.type(e)||e.nodeType||ue.isWindow(e))return!1;if(e.constructor&&!se.call(e,"constructor")&&!se.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||se.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?re[oe.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=ue.trim(e),e&&(1===e.indexOf("use strict")?(t=Z.createElement("script"),t.text=e,Z.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(he,"ms-").replace(fe,pe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(s(e))for(n=e.length;i<n&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(le,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?ue.merge(n,"string"==typeof e?[e]:e):ne.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ie.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;o<s;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,n){var i,r,o=0,a=[];if(s(e))for(i=e.length;o<i;o++)r=t(e[o],o,n),null!=r&&a.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&a.push(r);return te.apply([],a)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),ue.isFunction(e))return i=ee.call(arguments,2),r=function(){return e.apply(t||this,i.concat(ee.call(arguments)))},r.guid=e.guid=e.guid||ue.guid++,r},now:Date.now,support:ae}),"function"==typeof Symbol&&(ue.fn[Symbol.iterator]=Q[Symbol.iterator]),ue.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){re["[object "+t+"]"]=t.toLowerCase()});var de=/*!
	 * Sizzle CSS Selector Engine v2.2.1
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2015-10-17
	 */
function(e){function t(e,t,n,i){var r,o,s,a,c,u,h,p,d=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!i&&((t?t.ownerDocument||t:R)!==D&&O(t),t=t||D,P)){if(11!==m&&(u=ve.exec(e)))if(r=u[1]){if(9===m){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(d&&(s=d.getElementById(r))&&L(t,s)&&s.id===r)return n.push(s),n}else{if(u[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=u[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(x.qsa&&!z[e+" "]&&(!M||!M.test(e))){if(1!==m)d=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(be,"\\$&"):t.setAttribute("id",a=H),h=_(e),o=h.length,c=fe.test(a)?"#"+a:"[id='"+a+"']";o--;)h[o]=c+" "+f(h[o]);p=h.join(","),d=ye.test(e)&&l(t.parentNode)||t}if(p)try{return Q.apply(n,d.querySelectorAll(p)),n}catch(g){}finally{a===H&&t.removeAttribute("id")}}}return A(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>k.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[H]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)k.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function l(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function f(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=G++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,c,u,l=[$,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(u=t[H]||(t[H]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),(a=c[i])&&a[0]===$&&a[1]===o)return l[2]=a[2];if(c[i]=l,l[2]=e(t,n,s))return!0}}}function d(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,s=[],a=0,c=e.length,u=null!=t;a<c;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),u&&t.push(a)));return s}function v(e,t,n,r,o,s){return r&&!r[H]&&(r=v(r)),o&&!o[H]&&(o=v(o,s)),i(function(i,s,a,c){var u,l,h,f=[],p=[],d=s.length,v=i||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?v:g(v,f,e,a,c),b=n?o||(i?e:d||r)?[]:s:y;if(n&&n(y,b,a,c),r)for(u=g(b,p),r(u,[],a,c),l=u.length;l--;)(h=u[l])&&(b[p[l]]=!(y[p[l]]=h));if(i){if(o||e){if(o){for(u=[],l=b.length;l--;)(h=b[l])&&u.push(y[l]=h);o(null,b=[],u,c)}for(l=b.length;l--;)(h=b[l])&&(u=o?ee(i,h):f[l])>-1&&(i[u]=!(s[u]=h))}}else b=g(b===s?b.splice(d,b.length):b),o?o(null,s,b,c):Q.apply(s,b)})}function y(e){for(var t,n,i,r=e.length,o=k.relative[e[0].type],s=o||k.relative[" "],a=o?1:0,c=p(function(e){return e===t},s,!0),u=p(function(e){return ee(t,e)>-1},s,!0),l=[function(e,n,i){var r=!o&&(i||n!==S)||((t=n).nodeType?c(e,n,i):u(e,n,i));return t=null,r}];a<r;a++)if(n=k.relative[e[a].type])l=[p(d(l),n)];else{if(n=k.filter[e[a].type].apply(null,e[a].matches),n[H]){for(i=++a;i<r&&!k.relative[e[i].type];i++);return v(a>1&&d(l),a>1&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<i&&y(e.slice(a,i)),i<r&&y(e=e.slice(i)),i<r&&f(e))}l.push(n)}return d(l)}function b(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,c,u){var l,h,f,p=0,d="0",m=i&&[],v=[],y=S,b=i||o&&k.find.TAG("*",u),w=$+=null==y?1:Math.random()||.1,x=b.length;for(u&&(S=s===D||s||u);d!==x&&null!=(l=b[d]);d++){if(o&&l){for(h=0,s||l.ownerDocument===D||(O(l),a=!P);f=e[h++];)if(f(l,s||D,a)){c.push(l);break}u&&($=w)}r&&((l=!f&&l)&&p--,i&&m.push(l))}if(p+=d,r&&d!==p){for(h=0;f=n[h++];)f(m,v,s,a);if(i){if(p>0)for(;d--;)m[d]||v[d]||(v[d]=J.call(c));v=g(v)}Q.apply(c,v),u&&!i&&v.length>0&&p+n.length>1&&t.uniqueSort(c)}return u&&($=w,S=y),m};return r?i(s):s}var w,x,k,T,E,_,C,A,S,j,I,O,D,N,P,M,F,q,L,H="sizzle"+1*new Date,R=e.document,$=0,G=0,W=n(),B=n(),z=n(),U=function(e,t){return e===t&&(I=!0),0},X=1<<31,Y={}.hasOwnProperty,V=[],J=V.pop,K=V.push,Q=V.push,Z=V.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(oe),fe=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),xe=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ke=function(){O()};try{Q.apply(V=Z.call(R.childNodes),R.childNodes),V[R.childNodes.length].nodeType}catch(Te){Q={apply:V.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:R;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,N=D.documentElement,P=!E(D),(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ge.test(D.getElementsByClassName),x.getById=r(function(e){return N.appendChild(e).id=H,!D.getElementsByName||!D.getElementsByName(H).length}),x.getById?(k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}},k.filter.ID=function(e){var t=e.replace(we,xe);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(we,xe);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},k.find.CLASS=x.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&P)return t.getElementsByClassName(e)},F=[],M=[],(x.qsa=ge.test(D.querySelectorAll))&&(r(function(e){N.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||M.push(".#.+[+~]")}),r(function(e){var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(x.matchesSelector=ge.test(q=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(e){x.disconnectedMatch=q.call(e,"div"),q.call(e,"[s!='']:x"),F.push("!=",oe)}),M=M.length&&new RegExp(M.join("|")),F=F.length&&new RegExp(F.join("|")),t=ge.test(N.compareDocumentPosition),L=t||ge.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===D||e.ownerDocument===R&&L(R,e)?-1:t===D||t.ownerDocument===R&&L(R,t)?1:j?ee(j,e)-ee(j,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],c=[t];if(!r||!o)return e===D?-1:t===D?1:r?-1:o?1:j?ee(j,e)-ee(j,t):0;if(r===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;a[i]===c[i];)i++;return i?s(a[i],c[i]):a[i]===R?-1:c[i]===R?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&O(e),n=n.replace(le,"='$1']"),x.matchesSelector&&P&&!z[n+" "]&&(!F||!F.test(n))&&(!M||!M.test(n)))try{var i=q.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&O(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&O(e);var n=k.attrHandle[t.toLowerCase()],i=n&&Y.call(k.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==i?i:x.attributes||!P?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(I=!x.detectDuplicates,j=!x.sortStable&&e.slice(0),e.sort(U),I){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return j=null,e},T=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=T(t);return n},k=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(we,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=_(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(se," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var u,l,h,f,p,d,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!c&&!a,b=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[s?g.firstChild:g.lastChild],s&&y){for(f=g,h=f[H]||(f[H]={}),l=h[f.uniqueID]||(h[f.uniqueID]={}),u=l[e]||[],p=u[0]===$&&u[1],b=p&&u[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||d.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[$,p,b];break}}else if(y&&(f=t,h=f[H]||(f[H]={}),l=h[f.uniqueID]||(h[f.uniqueID]={}),u=l[e]||[],p=u[0]===$&&u[1],b=p),b===!1)for(;(f=++p&&f&&f[m]||(b=p=0)||d.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&(h=f[H]||(f[H]={}),l=h[f.uniqueID]||(h[f.uniqueID]={}),l[e]=[$,b]),f!==t)););return b-=r,b===i||b%i===0&&b/i>=0}}},PSEUDO:function(e,n){var r,o=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[H]?o(n):o.length>1?(r=[e,e,"",n],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=ee(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=C(e.replace(ae,"$1"));return r[H]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,xe),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:i(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,xe).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},k.pseudos.nth=k.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})k.pseudos[w]=c(w);return h.prototype=k.filters=k.pseudos,k.setFilters=new h,_=t.tokenize=function(e,n){var i,r,o,s,a,c,u,l=B[e+" "];if(l)return n?0:l.slice(0);for(a=e,c=[],u=k.preFilter;a;){i&&!(r=ce.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(o=[])),i=!1,(r=ue.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ae," ")}),a=a.slice(i.length));for(s in k.filter)!(r=pe[s].exec(a))||u[s]&&!(r=u[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):B(e,c).slice(0)},C=t.compile=function(e,t){var n,i=[],r=[],o=z[e+" "];if(!o){for(t||(t=_(e)),n=t.length;n--;)o=y(t[n]),o[H]?i.push(o):r.push(o);o=z(e,b(r,i)),o.selector=e}return o},A=t.select=function(e,t,n,i){var r,o,s,a,c,u="function"==typeof e&&e,h=!i&&_(e=u.selector||e);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===t.nodeType&&P&&k.relative[o[1].type]){if(t=(k.find.ID(s.matches[0].replace(we,xe),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!k.relative[a=s.type]);)if((c=k.find[a])&&(i=c(s.matches[0].replace(we,xe),ye.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&f(o),!e)return Q.apply(n,i),n;break}}return(u||C(e,h))(i,t,!P,n,!t||ye.test(e)&&l(t.parentNode)||t),n},x.sortStable=H.split("").sort(U).join("")===H,x.detectDuplicates=!!I,O(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(n);ue.find=de,ue.expr=de.selectors,ue.expr[":"]=ue.expr.pseudos,ue.uniqueSort=ue.unique=de.uniqueSort,ue.text=de.getText,ue.isXMLDoc=de.isXML,ue.contains=de.contains;var me=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ue(e).is(n))break;i.push(e)}return i},ge=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ve=ue.expr.match.needsContext,ye=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,be=/^.[^:#\[\.,]*$/;ue.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ue.find.matchesSelector(i,e)?[i]:[]:ue.find.matches(e,ue.grep(t,function(e){return 1===e.nodeType}))},ue.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(ue(e).filter(function(){for(t=0;t<n;t++)if(ue.contains(r[t],this))return!0}));for(t=0;t<n;t++)ue.find(e,r[t],i);return i=this.pushStack(n>1?ue.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(a(this,e||[],!1))},not:function(e){return this.pushStack(a(this,e||[],!0))},is:function(e){return!!a(this,"string"==typeof e&&ve.test(e)?ue(e):e||[],!1).length}});var we,xe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ke=ue.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||we,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:xe.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ue?t[0]:t,ue.merge(this,ue.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),ye.test(i[1])&&ue.isPlainObject(t))for(i in t)ue.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=Z.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Z,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ue.isFunction(e)?void 0!==n.ready?n.ready(e):e(ue):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ue.makeArray(e,this))};ke.prototype=ue.fn,we=ue(Z);var Te=/^(?:parents|prev(?:Until|All))/,Ee={children:!0,contents:!0,next:!0,prev:!0};ue.fn.extend({has:function(e){var t=ue(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ue.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=ve.test(e)||"string"!=typeof e?ue(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ue.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ue.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ie.call(ue(e),this[0]):ie.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ue.uniqueSort(ue.merge(this.get(),ue(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ue.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return me(e,"parentNode")},parentsUntil:function(e,t,n){return me(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return me(e,"nextSibling")},prevAll:function(e){return me(e,"previousSibling")},nextUntil:function(e,t,n){return me(e,"nextSibling",n)},prevUntil:function(e,t,n){return me(e,"previousSibling",n)},siblings:function(e){return ge((e.parentNode||{}).firstChild,e)},children:function(e){return ge(e.firstChild)},contents:function(e){return e.contentDocument||ue.merge([],e.childNodes)}},function(e,t){ue.fn[e]=function(n,i){var r=ue.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ue.filter(i,r)),this.length>1&&(Ee[e]||ue.uniqueSort(r),Te.test(e)&&r.reverse()),this.pushStack(r)}});var _e=/\S+/g;ue.Callbacks=function(e){e="string"==typeof e?u(e):ue.extend({},e);var t,n,i,r,o=[],s=[],a=-1,c=function(){for(r=e.once,i=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)o[a].apply(n[0],n[1])===!1&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function i(t){ue.each(t,function(t,n){ue.isFunction(n)?e.unique&&l.has(n)||o.push(n):n&&n.length&&"string"!==ue.type(n)&&i(n)})}(arguments),n&&!t&&c()),this},remove:function(){return ue.each(arguments,function(e,t){for(var n;(n=ue.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(e){return e?ue.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=s=[],n||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},ue.extend({Deferred:function(e){var t=[["resolve","done",ue.Callbacks("once memory"),"resolved"],["reject","fail",ue.Callbacks("once memory"),"rejected"],["notify","progress",ue.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ue.Deferred(function(n){ue.each(t,function(t,o){var s=ue.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ue.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ue.extend(e,i):i}},r={};return i.pipe=i.then,ue.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=ee.call(arguments),s=o.length,a=1!==s||e&&ue.isFunction(e.promise)?s:0,c=1===a?e:ue.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?ee.call(arguments):r,i===t?c.notifyWith(n,i):--a||c.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);r<s;r++)o[r]&&ue.isFunction(o[r].promise)?o[r].promise().progress(u(r,n,t)).done(u(r,i,o)).fail(c.reject):--a;return a||c.resolveWith(i,o),c.promise()}});var Ce;ue.fn.ready=function(e){return ue.ready.promise().done(e),this},ue.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ue.readyWait++:ue.ready(!0)},ready:function(e){(e===!0?--ue.readyWait:ue.isReady)||(ue.isReady=!0,e!==!0&&--ue.readyWait>0||(Ce.resolveWith(Z,[ue]),ue.fn.triggerHandler&&(ue(Z).triggerHandler("ready"),ue(Z).off("ready"))))}}),ue.ready.promise=function(e){return Ce||(Ce=ue.Deferred(),"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?n.setTimeout(ue.ready):(Z.addEventListener("DOMContentLoaded",l),n.addEventListener("load",l))),Ce.promise(e)},ue.ready.promise();var Ae=function(e,t,n,i,r,o,s){var a=0,c=e.length,u=null==n;if("object"===ue.type(n)){r=!0;for(a in n)Ae(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,ue.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(ue(e),n)})),t))for(;a<c;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:u?t.call(e):c?t(e[0],n):o},Se=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};h.uid=1,h.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Se(e))return{};var t=e[this.expando];return t||(t={},Se(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,ue.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{ue.isArray(t)?i=t.concat(t.map(ue.camelCase)):(r=ue.camelCase(t),t in o?i=[t,r]:(i=r,i=i in o?[i]:i.match(_e)||[])),n=i.length;for(;n--;)delete o[i[n]]}(void 0===t||ue.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ue.isEmptyObject(t)}};var je=new h,Ie=new h,Oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/[A-Z]/g;ue.extend({hasData:function(e){return Ie.hasData(e)||je.hasData(e)},data:function(e,t,n){return Ie.access(e,t,n)},removeData:function(e,t){Ie.remove(e,t)},_data:function(e,t,n){return je.access(e,t,n)},_removeData:function(e,t){je.remove(e,t)}}),ue.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=Ie.get(o),1===o.nodeType&&!je.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=ue.camelCase(i.slice(5)),f(o,i,r[i])));je.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Ie.set(this,e)}):Ae(this,function(t){var n,i;if(o&&void 0===t){if(n=Ie.get(o,e)||Ie.get(o,e.replace(De,"-$&").toLowerCase()),void 0!==n)return n;if(i=ue.camelCase(e),n=Ie.get(o,i),void 0!==n)return n;if(n=f(o,i,void 0),void 0!==n)return n}else i=ue.camelCase(e),this.each(function(){var n=Ie.get(this,i);Ie.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&Ie.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ie.remove(this,e)})}}),ue.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=je.get(e,t),n&&(!i||ue.isArray(n)?i=je.access(e,t,ue.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ue.queue(e,t),i=n.length,r=n.shift(),o=ue._queueHooks(e,t),s=function(){ue.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return je.get(e,n)||je.access(e,n,{empty:ue.Callbacks("once memory").add(function(){je.remove(e,[t+"queue",n])})})}}),ue.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ue.queue(this[0],e):void 0===t?this:this.each(function(){var n=ue.queue(this,e,t);ue._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ue.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ue.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=ue.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=je.get(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var Ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pe=new RegExp("^(?:([+-])=|)("+Ne+")([a-z%]*)$","i"),Me=["Top","Right","Bottom","Left"],Fe=function(e,t){return e=t||e,"none"===ue.css(e,"display")||!ue.contains(e.ownerDocument,e)},qe=/^(?:checkbox|radio)$/i,Le=/<([\w:-]+)/,He=/^$|\/(?:java|ecma)script/i,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td;var $e=/<|&#?\w+;/;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),n=Z.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ae.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ae.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ge=/^key/,We=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Be=/^([^.]*)(?:\.(.+)|)/;ue.event={global:{},add:function(e,t,n,i,r){var o,s,a,c,u,l,h,f,p,d,m,g=je.get(e);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=ue.guid++),(c=g.events)||(c=g.events={}),(s=g.handle)||(s=g.handle=function(t){return"undefined"!=typeof ue&&ue.event.triggered!==t.type?ue.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(_e)||[""],u=t.length;u--;)a=Be.exec(t[u])||[],p=m=a[1],d=(a[2]||"").split(".").sort(),p&&(h=ue.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=ue.event.special[p]||{},l=ue.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ue.expr.match.needsContext.test(r),namespace:d.join(".")},o),(f=c[p])||(f=c[p]=[],f.delegateCount=0,h.setup&&h.setup.call(e,i,d,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,l):f.push(l),ue.event.global[p]=!0)},remove:function(e,t,n,i,r){var o,s,a,c,u,l,h,f,p,d,m,g=je.hasData(e)&&je.get(e);if(g&&(c=g.events)){for(t=(t||"").match(_e)||[""],u=t.length;u--;)if(a=Be.exec(t[u])||[],p=m=a[1],d=(a[2]||"").split(".").sort(),p){for(h=ue.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,f=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!r&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(f.splice(o,1),
l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));s&&!f.length&&(h.teardown&&h.teardown.call(e,d,g.handle)!==!1||ue.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ue.event.remove(e,p+t[u],n,i,!0);ue.isEmptyObject(c)&&je.remove(e,"handle events")}},dispatch:function(e){e=ue.event.fix(e);var t,n,i,r,o,s=[],a=ee.call(arguments),c=(je.get(this,"events")||{})[e.type]||[],u=ue.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=ue.event.handlers.call(this,e,c),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((ue.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,c=e.target;if(a&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(i=[],n=0;n<a;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?ue(r,this).index(c)>-1:ue.find(r,this,null,[c]).length),i[r]&&i.push(o);i.length&&s.push({elem:c,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Z,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[ue.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=We.test(r)?this.mouseHooks:Ge.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new ue.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=Z),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ue.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ue.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ue.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ue.Event=function(e,t){return this instanceof ue.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?v:y):this.type=e,t&&ue.extend(this,t),this.timeStamp=e&&e.timeStamp||ue.now(),void(this[ue.expando]=!0)):new ue.Event(e,t)},ue.Event.prototype={constructor:ue.Event,isDefaultPrevented:y,isPropagationStopped:y,isImmediatePropagationStopped:y,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=v,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=v,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=v,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ue.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ue.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||ue.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ue.fn.extend({on:function(e,t,n,i){return w(this,e,t,n,i)},one:function(e,t,n,i){return w(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ue(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=y),this.each(function(){ue.event.remove(this,e,n,t)})}});var ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ue=/<script|<style|<link/i,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ye=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ue.extend({htmlPrefilter:function(e){return e.replace(ze,"<$1></$2>")},clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),c=ue.contains(e.ownerDocument,e);if(!(ae.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ue.isXMLDoc(e)))for(s=d(a),o=d(e),i=0,r=o.length;i<r;i++)_(o[i],s[i]);if(t)if(n)for(o=o||d(e),s=s||d(a),i=0,r=o.length;i<r;i++)E(o[i],s[i]);else E(e,a);return s=d(a,"script"),s.length>0&&m(s,!c&&d(e,"script")),a},cleanData:function(e){for(var t,n,i,r=ue.event.special,o=0;void 0!==(n=e[o]);o++)if(Se(n)){if(t=n[je.expando]){if(t.events)for(i in t.events)r[i]?ue.event.remove(n,i):ue.removeEvent(n,i,t.handle);n[je.expando]=void 0}n[Ie.expando]&&(n[Ie.expando]=void 0)}}}),ue.fn.extend({domManip:C,detach:function(e){return A(this,e,!0)},remove:function(e){return A(this,e)},text:function(e){return Ae(this,function(e){return void 0===e?ue.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.appendChild(e)}})},prepend:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ue.cleanData(d(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ue.clone(this,e,t)})},html:function(e){return Ae(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ue.test(e)&&!Re[(Le.exec(e)||["",""])[1].toLowerCase()]){e=ue.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(ue.cleanData(d(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return C(this,arguments,function(t){var n=this.parentNode;ue.inArray(this,e)<0&&(ue.cleanData(d(this)),n&&n.replaceChild(t,this))},e)}}),ue.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ue.fn[e]=function(e){for(var n,i=[],r=ue(e),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),ue(r[s])[t](n),ne.apply(i,n.get());return this.pushStack(i)}});var Je,Ke={HTML:"block",BODY:"block"},Qe=/^margin/,Ze=new RegExp("^("+Ne+")(?!px)[a-z%]+$","i"),et=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},tt=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r},nt=Z.documentElement;!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",nt.appendChild(s);var e=n.getComputedStyle(a);t="1%"!==e.top,o="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,nt.removeChild(s)}var t,i,r,o,s=Z.createElement("div"),a=Z.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ae.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),ue.extend(ae,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==i&&e(),i},pixelMarginRight:function(){return null==i&&e(),r},reliableMarginLeft:function(){return null==i&&e(),o},reliableMarginRight:function(){var e,t=a.appendChild(Z.createElement("div"));return t.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",a.style.width="1px",nt.appendChild(s),e=!parseFloat(n.getComputedStyle(t).marginRight),nt.removeChild(s),a.removeChild(t),e}}))}();var it=/^(none|table(?!-c[ea]).+)/,rt={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"},st=["Webkit","O","Moz","ms"],at=Z.createElement("div").style;ue.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=I(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=ue.camelCase(t),c=e.style;return t=ue.cssProps[a]||(ue.cssProps[a]=D(a)||a),s=ue.cssHooks[t]||ue.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:c[t]:(o=typeof n,"string"===o&&(r=Pe.exec(n))&&r[1]&&(n=p(e,t,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(ue.cssNumber[a]?"":"px")),ae.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(c[t]=n)),void 0)}},css:function(e,t,n,i){var r,o,s,a=ue.camelCase(t);return t=ue.cssProps[a]||(ue.cssProps[a]=D(a)||a),s=ue.cssHooks[t]||ue.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=I(e,t,i)),"normal"===r&&t in ot&&(r=ot[t]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),ue.each(["height","width"],function(e,t){ue.cssHooks[t]={get:function(e,n,i){if(n)return it.test(ue.css(e,"display"))&&0===e.offsetWidth?tt(e,rt,function(){return M(e,t,i)}):M(e,t,i)},set:function(e,n,i){var r,o=i&&et(e),s=i&&P(e,t,i,"border-box"===ue.css(e,"boxSizing",!1,o),o);return s&&(r=Pe.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=ue.css(e,t)),N(e,n,s)}}}),ue.cssHooks.marginLeft=O(ae.reliableMarginLeft,function(e,t){if(t)return(parseFloat(I(e,"marginLeft"))||e.getBoundingClientRect().left-tt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ue.cssHooks.marginRight=O(ae.reliableMarginRight,function(e,t){if(t)return tt(e,{display:"inline-block"},I,[e,"marginRight"])}),ue.each({margin:"",padding:"",border:"Width"},function(e,t){ue.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+Me[i]+t]=o[i]||o[i-2]||o[0];return r}},Qe.test(e)||(ue.cssHooks[e+t].set=N)}),ue.fn.extend({css:function(e,t){return Ae(this,function(e,t,n){var i,r,o={},s=0;if(ue.isArray(t)){for(i=et(e),r=t.length;s<r;s++)o[t[s]]=ue.css(e,t[s],!1,i);return o}return void 0!==n?ue.style(e,t,n):ue.css(e,t)},e,t,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Fe(this)?ue(this).show():ue(this).hide()})}}),ue.Tween=q,q.prototype={constructor:q,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||ue.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ue.cssNumber[n]?"":"px")},cur:function(){var e=q.propHooks[this.prop];return e&&e.get?e.get(this):q.propHooks._default.get(this)},run:function(e){var t,n=q.propHooks[this.prop];return this.options.duration?this.pos=t=ue.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):q.propHooks._default.set(this),this}},q.prototype.init.prototype=q.prototype,q.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ue.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ue.fx.step[e.prop]?ue.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ue.cssProps[e.prop]]&&!ue.cssHooks[e.prop]?e.elem[e.prop]=e.now:ue.style(e.elem,e.prop,e.now+e.unit)}}},q.propHooks.scrollTop=q.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ue.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ue.fx=q.prototype.init,ue.fx.step={};var ct,ut,lt=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;ue.Animation=ue.extend(W,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return p(n.elem,e,Pe.exec(t),n),n}]},tweener:function(e,t){ue.isFunction(e)?(t=e,e=["*"]):e=e.match(_e);for(var n,i=0,r=e.length;i<r;i++)n=e[i],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(t)},prefilters:[$],prefilter:function(e,t){t?W.prefilters.unshift(e):W.prefilters.push(e)}}),ue.speed=function(e,t,n){var i=e&&"object"==typeof e?ue.extend({},e):{complete:n||!n&&t||ue.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ue.isFunction(t)&&t};return i.duration=ue.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ue.fx.speeds?ue.fx.speeds[i.duration]:ue.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ue.isFunction(i.old)&&i.old.call(this),i.queue&&ue.dequeue(this,i.queue)},i},ue.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Fe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ue.isEmptyObject(e),o=ue.speed(t,n,i),s=function(){var t=W(this,ue.extend({},e),o);(r||je.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=ue.timers,s=je.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ht.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||ue.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=je.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=ue.timers,s=i?i.length:0;for(n.finish=!0,ue.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ue.each(["toggle","show","hide"],function(e,t){var n=ue.fn[t];ue.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,i,r)}}),ue.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ue.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ue.timers=[],ue.fx.tick=function(){var e,t=0,n=ue.timers;for(ct=ue.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ue.fx.stop(),ct=void 0},ue.fx.timer=function(e){ue.timers.push(e),e()?ue.fx.start():ue.timers.pop()},ue.fx.interval=13,ue.fx.start=function(){ut||(ut=n.setInterval(ue.fx.tick,ue.fx.interval))},ue.fx.stop=function(){n.clearInterval(ut),ut=null},ue.fx.speeds={slow:600,fast:200,_default:400},ue.fn.delay=function(e,t){return e=ue.fx?ue.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),n=t.appendChild(Z.createElement("option"));e.type="checkbox",ae.checkOn=""!==e.value,ae.optSelected=n.selected,t.disabled=!0,ae.optDisabled=!n.disabled,e=Z.createElement("input"),e.value="t",e.type="radio",ae.radioValue="t"===e.value}();var ft,pt=ue.expr.attrHandle;ue.fn.extend({attr:function(e,t){return Ae(this,ue.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ue.removeAttr(this,e)})}}),ue.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ue.prop(e,t,n):(1===o&&ue.isXMLDoc(e)||(t=t.toLowerCase(),r=ue.attrHooks[t]||(ue.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void ue.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ue.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ae.radioValue&&"radio"===t&&ue.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(_e);if(o&&1===e.nodeType)for(;n=o[r++];)i=ue.propFix[n]||n,ue.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),ft={set:function(e,t,n){return t===!1?ue.removeAttr(e,n):e.setAttribute(n,n),n}},ue.each(ue.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||ue.find.attr;pt[t]=function(e,t,i){var r,o;return i||(o=pt[t],pt[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,pt[t]=o),r}});var dt=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;ue.fn.extend({prop:function(e,t){return Ae(this,ue.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ue.propFix[e]||e]})}}),ue.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ue.isXMLDoc(e)||(t=ue.propFix[t]||t,r=ue.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ue.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ae.optSelected||(ue.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ue.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ue.propFix[this.toLowerCase()]=this});var gt=/[\t\r\n\f]/g;ue.fn.extend({addClass:function(e){var t,n,i,r,o,s,a,c=0;if(ue.isFunction(e))return this.each(function(t){ue(this).addClass(e.call(this,t,B(this)))});if("string"==typeof e&&e)for(t=e.match(_e)||[];n=this[c++];)if(r=B(n),i=1===n.nodeType&&(" "+r+" ").replace(gt," ")){for(s=0;o=t[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=ue.trim(i),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,o,s,a,c=0;if(ue.isFunction(e))return this.each(function(t){ue(this).removeClass(e.call(this,t,B(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(_e)||[];n=this[c++];)if(r=B(n),i=1===n.nodeType&&(" "+r+" ").replace(gt," ")){for(s=0;o=t[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");a=ue.trim(i),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ue.isFunction(e)?this.each(function(n){ue(this).toggleClass(e.call(this,n,B(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=ue(this),o=e.match(_e)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=B(this),t&&je.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":je.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+B(n)+" ").replace(gt," ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g,yt=/[\x20\t\r\n\f]+/g;ue.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=ue.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,ue(this).val()):e,null==r?r="":"number"==typeof r?r+="":ue.isArray(r)&&(r=ue.map(r,function(e){return null==e?"":e+""})),t=ue.valHooks[this.type]||ue.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=ue.valHooks[r.type]||ue.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(vt,""):null==n?"":n)}}}),ue.extend({valHooks:{option:{get:function(e){var t=ue.find.attr(e,"value");return null!=t?t:ue.trim(ue.text(e)).replace(yt," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,s=o?null:[],a=o?r+1:i.length,c=r<0?a:o?r:0;c<a;c++)if(n=i[c],(n.selected||c===r)&&(ae.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ue.nodeName(n.parentNode,"optgroup"))){if(t=ue(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=ue.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=ue.inArray(ue.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ue.each(["radio","checkbox"],function(){ue.valHooks[this]={set:function(e,t){if(ue.isArray(t))return e.checked=ue.inArray(ue(e).val(),t)>-1}},ae.checkOn||(ue.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var bt=/^(?:focusinfocus|focusoutblur)$/;ue.extend(ue.event,{trigger:function(e,t,i,r){var o,s,a,c,u,l,h,f=[i||Z],p=se.call(e,"type")?e.type:e,d=se.call(e,"namespace")?e.namespace.split("."):[];if(s=a=i=i||Z,3!==i.nodeType&&8!==i.nodeType&&!bt.test(p+ue.event.triggered)&&(p.indexOf(".")>-1&&(d=p.split("."),p=d.shift(),d.sort()),u=p.indexOf(":")<0&&"on"+p,e=e[ue.expando]?e:new ue.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:ue.makeArray(t,[e]),h=ue.event.special[p]||{},r||!h.trigger||h.trigger.apply(i,t)!==!1)){if(!r&&!h.noBubble&&!ue.isWindow(i)){for(c=h.delegateType||p,bt.test(c+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(i.ownerDocument||Z)&&f.push(a.defaultView||a.parentWindow||n)}for(o=0;(s=f[o++])&&!e.isPropagationStopped();)e.type=o>1?c:h.bindType||p,l=(je.get(s,"events")||{})[e.type]&&je.get(s,"handle"),l&&l.apply(s,t),l=u&&s[u],l&&l.apply&&Se(s)&&(e.result=l.apply(s,t),e.result===!1&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),t)!==!1||!Se(i)||u&&ue.isFunction(i[p])&&!ue.isWindow(i)&&(a=i[u],a&&(i[u]=null),ue.event.triggered=p,i[p](),ue.event.triggered=void 0,a&&(i[u]=a)),e.result}},simulate:function(e,t,n){var i=ue.extend(new ue.Event,n,{type:e,isSimulated:!0});ue.event.trigger(i,null,t)}}),ue.fn.extend({trigger:function(e,t){return this.each(function(){ue.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ue.event.trigger(e,t,n,!0)}}),ue.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ue.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ue.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ae.focusin="onfocusin"in n,ae.focusin||ue.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ue.event.simulate(t,e.target,ue.event.fix(e))};ue.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=je.access(i,t);r||i.addEventListener(e,n,!0),je.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=je.access(i,t)-1;r?je.access(i,t,r):(i.removeEventListener(e,n,!0),je.remove(i,t))}}});var wt=n.location,xt=ue.now(),kt=/\?/;ue.parseJSON=function(e){return JSON.parse(e+"")},ue.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(i){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ue.error("Invalid XML: "+e),t};var Tt=/#.*$/,Et=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ct=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,At=/^(?:GET|HEAD)$/,St=/^\/\//,jt={},It={},Ot="*/".concat("*"),Dt=Z.createElement("a");Dt.href=wt.href,ue.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:Ct.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ot,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ue.parseJSON,"text xml":ue.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?X(X(e,ue.ajaxSettings),t):X(ue.ajaxSettings,e)},ajaxPrefilter:z(jt),ajaxTransport:z(It),ajax:function(e,t){function i(e,t,i,a){var u,h,y,b,x,T=t;2!==w&&(w=2,c&&n.clearTimeout(c),r=void 0,s=a||"",k.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(b=Y(f,k,i)),b=V(f,b,k,u),u?(f.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(ue.lastModified[o]=x),x=k.getResponseHeader("etag"),x&&(ue.etag[o]=x)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=b.state,h=b.data,y=b.error,u=!y)):(y=T,!e&&T||(T="error",e<0&&(e=0))),k.status=e,k.statusText=(t||T)+"",u?m.resolveWith(p,[h,T,k]):m.rejectWith(p,[k,T,y]),k.statusCode(v),v=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[k,f,u?h:y]),g.fireWith(p,[k,T]),l&&(d.trigger("ajaxComplete",[k,f]),--ue.active||ue.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,s,a,c,u,l,h,f=ue.ajaxSetup({},t),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?ue(p):ue.event,m=ue.Deferred(),g=ue.Callbacks("once memory"),v=f.statusCode||{},y={},b={},w=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!a)for(a={};t=_t.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||x;return r&&r.abort(t),i(0,t),this}};if(m.promise(k).complete=g.add,k.success=k.done,k.error=k.fail,f.url=((e||f.url||wt.href)+"").replace(Tt,"").replace(St,wt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=ue.trim(f.dataType||"*").toLowerCase().match(_e)||[""],null==f.crossDomain){u=Z.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Dt.protocol+"//"+Dt.host!=u.protocol+"//"+u.host}catch(T){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ue.param(f.data,f.traditional)),U(jt,f,t,k),2===w)return k;l=ue.event&&f.global,l&&0===ue.active++&&ue.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!At.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(kt.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=Et.test(o)?o.replace(Et,"$1_="+xt++):o+(kt.test(o)?"&":"?")+"_="+xt++)),f.ifModified&&(ue.lastModified[o]&&k.setRequestHeader("If-Modified-Since",ue.lastModified[o]),ue.etag[o]&&k.setRequestHeader("If-None-Match",ue.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ot+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)k.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(p,k,f)===!1||2===w))return k.abort();x="abort";for(h in{success:1,error:1,complete:1})k[h](f[h]);if(r=U(It,f,t,k)){if(k.readyState=1,l&&d.trigger("ajaxSend",[k,f]),2===w)return k;f.async&&f.timeout>0&&(c=n.setTimeout(function(){k.abort("timeout")},f.timeout));try{w=1,r.send(y,i)}catch(T){if(!(w<2))throw T;i(-1,T)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return ue.get(e,t,n,"json")},getScript:function(e,t){return ue.get(e,void 0,t,"script")}}),ue.each(["get","post"],function(e,t){ue[t]=function(e,n,i,r){return ue.isFunction(n)&&(r=r||i,i=n,n=void 0),ue.ajax(ue.extend({url:e,type:t,dataType:r,data:n,success:i},ue.isPlainObject(e)&&e))}}),ue._evalUrl=function(e){return ue.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ue.fn.extend({wrapAll:function(e){var t;return ue.isFunction(e)?this.each(function(t){ue(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ue(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ue.isFunction(e)?this.each(function(t){ue(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ue(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ue.isFunction(e);return this.each(function(n){ue(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ue.nodeName(this,"body")||ue(this).replaceWith(this.childNodes)}).end()}}),ue.expr.filters.hidden=function(e){return!ue.expr.filters.visible(e)},ue.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Nt=/%20/g,Pt=/\[\]$/,Mt=/\r?\n/g,Ft=/^(?:submit|button|image|reset|file)$/i,qt=/^(?:input|select|textarea|keygen)/i;ue.param=function(e,t){var n,i=[],r=function(e,t){t=ue.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ue.ajaxSettings&&ue.ajaxSettings.traditional),ue.isArray(e)||e.jquery&&!ue.isPlainObject(e))ue.each(e,function(){r(this.name,this.value)});else for(n in e)J(n,e[n],t,r);return i.join("&").replace(Nt,"+")},ue.fn.extend({serialize:function(){return ue.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ue.prop(this,"elements");return e?ue.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ue(this).is(":disabled")&&qt.test(this.nodeName)&&!Ft.test(e)&&(this.checked||!qe.test(e))}).map(function(e,t){var n=ue(this).val();return null==n?null:ue.isArray(n)?ue.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),ue.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Lt={0:200,1223:204},Ht=ue.ajaxSettings.xhr();ae.cors=!!Ht&&"withCredentials"in Ht,ae.ajax=Ht=!!Ht,ue.ajaxTransport(function(e){var t,i;if(ae.cors||Ht&&!e.crossDomain)return{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");
for(s in r)a.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Lt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),i=a.onerror=t("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){t&&i()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(c){if(t)throw c}},abort:function(){t&&t()}}}),ue.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ue.globalEval(e),e}}}),ue.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ue.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=ue("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Rt=[],$t=/(=)\?(?=&|$)|\?\?/;ue.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rt.pop()||ue.expando+"_"+xt++;return this[e]=!0,e}}),ue.ajaxPrefilter("json jsonp",function(e,t,i){var r,o,s,a=e.jsonp!==!1&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ue.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace($t,"$1"+r):e.jsonp!==!1&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||ue.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=n[r],n[r]=function(){s=arguments},i.always(function(){void 0===o?ue(n).removeProp(r):n[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Rt.push(r)),s&&ue.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),ue.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Z;var i=ye.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=g([e],t,r),r&&r.length&&ue(r).remove(),ue.merge([],i.childNodes))};var Gt=ue.fn.load;ue.fn.load=function(e,t,n){if("string"!=typeof e&&Gt)return Gt.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>-1&&(i=ue.trim(e.slice(a)),e=e.slice(0,a)),ue.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&ue.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?ue("<div>").append(ue.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ue.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ue.fn[t]=function(e){return this.on(t,e)}}),ue.expr.filters.animated=function(e){return ue.grep(ue.timers,function(t){return e===t.elem}).length},ue.offset={setOffset:function(e,t,n){var i,r,o,s,a,c,u,l=ue.css(e,"position"),h=ue(e),f={};"static"===l&&(e.style.position="relative"),a=h.offset(),o=ue.css(e,"top"),c=ue.css(e,"left"),u=("absolute"===l||"fixed"===l)&&(o+c).indexOf("auto")>-1,u?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(c)||0),ue.isFunction(t)&&(t=t.call(e,n,ue.extend({},a))),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+r),"using"in t?t.using.call(e,f):h.css(f)}},ue.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ue.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,ue.contains(t,i)?(r=i.getBoundingClientRect(),n=K(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ue.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ue.nodeName(e[0],"html")||(i=e.offset()),i.top+=ue.css(e[0],"borderTopWidth",!0),i.left+=ue.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ue.css(n,"marginTop",!0),left:t.left-i.left-ue.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ue.css(e,"position");)e=e.offsetParent;return e||nt})}}),ue.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ue.fn[e]=function(i){return Ae(this,function(e,i,r){var o=K(e);return void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),ue.each(["top","left"],function(e,t){ue.cssHooks[t]=O(ae.pixelPosition,function(e,n){if(n)return n=I(e,t),Ze.test(n)?ue(e).position()[t]+"px":n})}),ue.each({Height:"height",Width:"width"},function(e,t){ue.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ue.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return Ae(this,function(t,n,i){var r;return ue.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?ue.css(t,n,s):ue.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),ue.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ue.fn.andSelf=ue.fn.addBack,i=[],r=function(){return ue}.apply(t,i),!(void 0!==r&&(e.exports=r));var Wt=n.jQuery,Bt=n.$;return ue.noConflict=function(e){return n.$===ue&&(n.$=Bt),e&&n.jQuery===ue&&(n.jQuery=Wt),ue},o||(n.jQuery=n.$=ue),ue})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(2),h=i(l),f=n(5),p=i(f),d=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),a(t,[{key:"initialize",value:function(){this.model=p["default"]}},{key:"getUnviewedEntryID",value:function(){var e=this.where({viewed:!1});return e.length>0?h["default"].sample(e).get("id"):(this.each(function(e){e.set("viewed",!1)}),this.sample().get("id"))}}]),t}(u["default"].Collection);t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),a(t,[{key:"initialize",value:function(){this.set({urlFriendlyTitle:this.convertToSlug(this.get("title"))}),this.parseTitle()}},{key:"defaults",value:function(){return{viewed:!1}}},{key:"parseTitle",value:function(){this.titleContainsParenthesis(this.get("title"))&&this.set("title",this.wrapTitleParenthesisInSpans(this.get("title")))}},{key:"convertToSlug",value:function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}},{key:"titleContainsParenthesis",value:function(e){return e.indexOf("(")>-1||e.indexOf(")")>-1}},{key:"wrapTitleParenthesisInSpans",value:function(e){return e.replace("(","<span>(").replace(")",")</span>")}}]),t}(u["default"].Model);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(3),h=i(l),f=n(2),p=i(f),d=n(9),m=i(d),g=n(4),v=i(g),y=n(7),b=i(y),w=n(8),x=i(w),k=n(11),T=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.routes={"entry/:id(/:title)":"showEntry","*actions":"showRandomEntry"},e._bindRoutes(),e}return s(t,e),a(t,[{key:"initialize",value:function(){this.initialFragment=null,this.$entryEl=(0,h["default"])("#entry"),this.loader=new m["default"],this.entries=new v["default"](JSON.parse(k.all));var e=new b["default"]({collection:this.entries});this.listenTo(e,"routeToUnviewedEntry",this.showEntry),this.listenTo(e,"navigateBackwards",this.navigateBackwards)}},{key:"showRandomEntry",value:function(){var e=this.entries.getUnviewedEntryID();this.showEntry(e)}},{key:"showEntry",value:function(e){this.loader.$el.is(":visible")&&this.loader.trigger("hide");var t=this.entries.findWhere({id:parseInt(e)});return p["default"].isUndefined(t)?void this.showRandomEntry():(this.navigate("entry/"+e+"/"+t.get("urlFriendlyTitle"),{trigger:!0}),this.initialFragment||(this.initialFragment=u["default"].history.getFragment()),void(this.entryView=new x["default"]({model:t,container:this.$entryEl}).render()))}},{key:"navigateBackwards",value:function(){this.initialFragment!==u["default"].history.getFragment()&&window.history.back()}}]),t}(u["default"].Router);t["default"]=T},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(3),h=i(l),f=n(2),p=i(f),d=n(12),m=i(d),g=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{el:"body",collection:e.collection,events:{click:"renderRandomEntry",keydown:"handleKeyboardEvent"}}))}return s(t,e),a(t,[{key:"initialize",value:function(){var e=new m["default"](this.$el.get(0));e.on("swiperight swipeleft",this.handleMobileEvent)}},{key:"renderRandomEntry",value:function(e){if(!e||!(0,h["default"])(e.target).is("a")){var t=this.collection.getUnviewedEntryID();this.trigger("routeToUnviewedEntry",t)}}},{key:"handleKeyboardEvent",value:function(e){e.preventDefault();var t=[37,72],n=[39,76],i=[32];if(p["default"].contains(p["default"].union(t,n,i),e.keyCode)){var r=p["default"].contains(n,e.keyCode)||i===e.keyCode&&!e.shiftKey;this.moveToEntry(r)}}},{key:"handleMobileEvent",value:function(e){e.preventDefault();var t="swipeleft"===e.type;this.moveToEntry(t)}},{key:"moveToEntry",value:function(e){e?this.renderRandomEntry():this.trigger("navigateBackwards")}}]),t}(u["default"].View);t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=n(3),h=i(l),f=n(2),p=i(f),d=n(14),m=i(d),g=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{el:"#entry",model:e.model,container:e.container,events:{"click .social-links a":"socialShare"}}));return n.template=p["default"].template(m["default"]),n}return s(t,e),a(t,[{key:"initialize",value:function(e){this.listenTo(this.model,"change",this.render),this.CSSanimationClasses="flipInX animated",this.container=e.container,this.animateView()}},{key:"render",value:function(){return this.model.set("viewed",!0),this.$el.html(this.template(this.model.toJSON())),this}},{key:"animateView",value:function(){this.container.addClass(this.CSSanimationClasses)}},{key:"socialShare",value:function(e){e.preventDefault();var t=575,n=400,i=((0,h["default"])(window).width()-t)/2,r=((0,h["default"])(window).height()-n)/2,o=(0,h["default"])(e.target).attr("href"),s="status=1,width="+t+",height="+n+",top="+r+",left="+i;window.open(o,"Share",s)}}]),t}(u["default"].View);t["default"]=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),u=i(c),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{el:".loader"}))}return s(t,e),a(t,[{key:"initialize",value:function(){var e=this;this.listenTo(this,"hide",function(){e.$el.hide()})}}]),t}(u["default"].View);t["default"]=l},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEntry=t.random=t.all=void 0;var r=n(15),o=i(r),s=n(13),a=i(s);t.all=a["default"],t.random=(0,o["default"])(a["default"]),t.getEntry=function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=a["default"][e-1];if(!t)throw new Error("Invalid ID");return t}},function(e,t,n){var i;/*! Hammer.JS - v2.0.7 - 2016-04-22
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */
!function(r,o,s,a){"use strict";function c(e,t,n){return setTimeout(p(e,n),t)}function u(e,t,n){return!!Array.isArray(e)&&(l(e,n[t],n),!0)}function l(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==a)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function h(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),e.apply(this,arguments)}}function f(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&me(i,n)}function p(e,t){return function(){return e.apply(t,arguments)}}function d(e,t){return typeof e==ye?e.apply(t?t[0]||a:a,t):e}function m(e,t){return e===a?t:e}function g(e,t,n){l(w(t),function(t){e.addEventListener(t,n,!1)})}function v(e,t,n){l(w(t),function(t){e.removeEventListener(t,n,!1)})}function y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function b(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function x(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function k(e){return Array.prototype.slice.call(e,0)}function T(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];x(r,s)<0&&i.push(e[o]),r[o]=s,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function E(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<ge.length;){if(n=ge[o],i=n?n+r:t,i in e)return i;o++}return a}function _(){return Ee++}function C(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}function A(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&n.handler(t)},this.init()}function S(e){var t,n=e.options.inputClass;return new(t=n?n:Ae?G:Se?z:Ce?X:$)(e,j)}function j(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&Pe&&i-r===0,s=t&(Fe|qe)&&i-r===0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,I(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function I(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=N(t)),r>1&&!n.firstMultiple?n.firstMultiple=N(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,c=t.center=P(i);t.timeStamp=xe(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=L(a,c),t.distance=q(a,c),O(n,t),t.offsetDirection=F(t.deltaX,t.deltaY);var u=M(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=we(u.x)>we(u.y)?u.x:u.y,t.scale=s?R(s.pointers,i):1,t.rotation=s?H(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,D(n,t);var l=e.element;y(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function O(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==Pe&&o.eventType!==Fe||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function D(e,t){var n,i,r,o,s=e.lastInterval||t,c=t.timeStamp-s.timeStamp;if(t.eventType!=qe&&(c>Ne||s.velocity===a)){var u=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,h=M(c,u,l);i=h.x,r=h.y,n=we(h.x)>we(h.y)?h.x:h.y,o=F(u,l),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}function N(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:be(e.pointers[n].clientX),clientY:be(e.pointers[n].clientY)},n++;return{timeStamp:xe(),pointers:t,center:P(t),deltaX:e.deltaX,deltaY:e.deltaY}}function P(e){var t=e.length;if(1===t)return{x:be(e[0].clientX),y:be(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:be(n/t),y:be(i/t)}}function M(e,t,n){return{x:t/e||0,y:n/e||0}}function F(e,t){return e===t?Le:we(e)>=we(t)?e<0?He:Re:t<0?$e:Ge}function q(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function L(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function H(e,t){return L(t[1],t[0],Xe)+L(e[1],e[0],Xe)}function R(e,t){return q(t[0],t[1],Xe)/q(e[0],e[1],Xe)}function $(){this.evEl=Ve,this.evWin=Je,this.pressed=!1,A.apply(this,arguments)}function G(){this.evEl=Ze,this.evWin=et,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=nt,this.evWin=it,this.started=!1,A.apply(this,arguments)}function B(e,t){var n=k(e.touches),i=k(e.changedTouches);return t&(Fe|qe)&&(n=T(n.concat(i),"identifier",!0)),[n,i]}function z(){this.evTarget=ot,this.targetIds={},A.apply(this,arguments)}function U(e,t){var n=k(e.touches),i=this.targetIds;if(t&(Pe|Me)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=k(e.changedTouches),a=[],c=this.target;if(o=n.filter(function(e){return y(e.target,c)}),t===Pe)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),t&(Fe|qe)&&delete i[s[r].identifier],r++;return a.length?[T(o.concat(a),"identifier",!0),a]:void 0}function X(){A.apply(this,arguments);var e=p(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new $(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Y(e,t){e&Pe?(this.primaryTouch=t.changedPointers[0].identifier,V.call(this,t)):e&(Fe|qe)&&V.call(this,t)}function V(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,st)}}function J(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),s=Math.abs(n-r.y);if(o<=at&&s<=at)return!0}return!1}function K(e,t){this.manager=e,this.set(t)}function Q(e){if(b(e,pt))return pt;var t=b(e,dt),n=b(e,mt);return t&&n?pt:t||n?t?dt:mt:b(e,ft)?ft:ht}function Z(){if(!ut)return!1;var e={},t=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||r.CSS.supports("touch-action",n)}),e}function ee(e){this.options=me({},this.defaults,e||{}),this.id=_(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=vt,this.simultaneous={},this.requireFail=[]}function te(e){return e&kt?"cancel":e&wt?"end":e&bt?"move":e&yt?"start":""}function ne(e){return e==Ge?"down":e==$e?"up":e==He?"left":e==Re?"right":""}function ie(e,t){var n=t.manager;return n?n.get(e):e}function re(){ee.apply(this,arguments)}function oe(){re.apply(this,arguments),this.pX=null,this.pY=null}function se(){re.apply(this,arguments)}function ae(){ee.apply(this,arguments),this._timer=null,this._input=null}function ce(){re.apply(this,arguments)}function ue(){re.apply(this,arguments)}function le(){ee.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function he(e,t){return t=t||{},t.recognizers=m(t.recognizers,he.defaults.preset),new fe(e,t)}function fe(e,t){this.options=me({},he.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=S(this),this.touchAction=new K(this,this.options.touchAction),pe(this,!0),l(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pe(e,t){var n=e.element;if(n.style){var i;l(e.options.cssProps,function(r,o){i=E(n.style,o),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function de(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var me,ge=["","webkit","Moz","MS","ms","o"],ve=o.createElement("div"),ye="function",be=Math.round,we=Math.abs,xe=Date.now;me="function"!=typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var ke=h(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===a)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),Te=h(function(e,t){return ke(e,t,!0)},"merge","Use `assign`."),Ee=1,_e=/mobile|tablet|ip(ad|hone|od)|android/i,Ce="ontouchstart"in r,Ae=E(r,"PointerEvent")!==a,Se=Ce&&_e.test(navigator.userAgent),je="touch",Ie="pen",Oe="mouse",De="kinect",Ne=25,Pe=1,Me=2,Fe=4,qe=8,Le=1,He=2,Re=4,$e=8,Ge=16,We=He|Re,Be=$e|Ge,ze=We|Be,Ue=["x","y"],Xe=["clientX","clientY"];A.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(C(this.element),this.evWin,this.domHandler)}};var Ye={mousedown:Pe,mousemove:Me,mouseup:Fe},Ve="mousedown",Je="mousemove mouseup";f($,A,{handler:function(e){var t=Ye[e.type];t&Pe&&0===e.button&&(this.pressed=!0),t&Me&&1!==e.which&&(t=Fe),this.pressed&&(t&Fe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Oe,srcEvent:e}))}});var Ke={pointerdown:Pe,pointermove:Me,pointerup:Fe,pointercancel:qe,pointerout:qe},Qe={2:je,3:Ie,4:Oe,5:De},Ze="pointerdown",et="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Ze="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),f(G,A,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Ke[i],o=Qe[e.pointerType]||e.pointerType,s=o==je,a=x(t,e.pointerId,"pointerId");r&Pe&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):r&(Fe|qe)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var tt={touchstart:Pe,touchmove:Me,touchend:Fe,touchcancel:qe},nt="touchstart",it="touchstart touchmove touchend touchcancel";f(W,A,{handler:function(e){var t=tt[e.type];if(t===Pe&&(this.started=!0),this.started){var n=B.call(this,e,t);t&(Fe|qe)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:je,srcEvent:e})}}});var rt={touchstart:Pe,touchmove:Me,touchend:Fe,touchcancel:qe},ot="touchstart touchmove touchend touchcancel";f(z,A,{handler:function(e){var t=rt[e.type],n=U.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:je,srcEvent:e})}});var st=2500,at=25;f(X,A,{handler:function(e,t,n){var i=n.pointerType==je,r=n.pointerType==Oe;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Y.call(this,t,n);else if(r&&J.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ct=E(ve.style,"touchAction"),ut=ct!==a,lt="compute",ht="auto",ft="manipulation",pt="none",dt="pan-x",mt="pan-y",gt=Z();K.prototype={set:function(e){e==lt&&(e=this.compute()),ut&&this.manager.element.style&&gt[e]&&(this.manager.element.style[ct]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return l(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Q(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=b(i,pt)&&!gt[pt],o=b(i,mt)&&!gt[mt],s=b(i,dt)&&!gt[dt];if(r){var a=1===e.pointers.length,c=e.distance<2,u=e.deltaTime<250;if(a&&c&&u)return}return s&&o?void 0:r||o&&n&We||s&&n&Be?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var vt=1,yt=2,bt=4,wt=8,xt=wt,kt=16,Tt=32;ee.prototype={defaults:{},set:function(e){return me(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(u(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ie(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return u(e,"dropRecognizeWith",this)?this:(e=ie(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(u(e,"requireFailure",this))return this;var t=this.requireFail;return e=ie(e,this),x(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(u(e,"dropRequireFailure",this))return this;e=ie(e,this);var t=x(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;i<wt&&t(n.options.event+te(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=wt&&t(n.options.event+te(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=Tt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Tt|vt)))return!1;e++}return!0},recognize:function(e){var t=me({},e);return d(this.options.enable,[this,t])?(this.state&(xt|kt|Tt)&&(this.state=vt),this.state=this.process(t),void(this.state&(yt|bt|wt|kt)&&this.tryEmit(t))):(this.reset(),void(this.state=Tt))},process:function(e){},getTouchAction:function(){},reset:function(){}},f(re,ee,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(yt|bt),r=this.attrTest(e);return i&&(n&qe||!r)?t|kt:i||r?n&Fe?t|wt:t&yt?t|bt:yt:Tt}}),f(oe,re,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var e=this.options.direction,t=[];return e&We&&t.push(mt),e&Be&&t.push(dt),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(t.direction&We?(r=0===o?Le:o<0?He:Re,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===s?Le:s<0?$e:Ge,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return re.prototype.attrTest.call(this,e)&&(this.state&yt||!(this.state&yt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ne(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(se,re,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[pt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&yt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(ae,ee,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ht]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Fe|qe)&&!r)this.reset();else if(e.eventType&Pe)this.reset(),this._timer=c(function(){this.state=xt,this.tryEmit()},t.time,this);else if(e.eventType&Fe)return xt;return Tt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===xt&&(e&&e.eventType&Fe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=xe(),this.manager.emit(this.options.event,this._input)))}}),f(ce,re,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[pt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&yt)}}),f(ue,re,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:We|Be,pointers:1},getTouchAction:function(){return oe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(We|Be)?t=e.overallVelocity:n&We?t=e.overallVelocityX:n&Be&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&we(t)>this.options.velocity&&e.eventType&Fe},emit:function(e){var t=ne(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(le,ee,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ft]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&Pe&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=Fe)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||q(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e;var a=this.count%t.taps;if(0===a)return this.hasRequireFailures()?(this._timer=c(function(){this.state=xt,this.tryEmit()},t.interval,this),yt):xt}return Tt},failTimeout:function(){return this._timer=c(function(){this.state=Tt},this.options.interval,this),Tt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),he.VERSION="2.0.7",he.defaults={domEvents:!1,touchAction:lt,enable:!0,inputTarget:null,inputClass:null,preset:[[ce,{enable:!1}],[se,{enable:!1},["rotate"]],[ue,{direction:We}],[oe,{direction:We},["swipe"]],[le],[le,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Et=1,_t=2;fe.prototype={set:function(e){return me(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?_t:Et},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&xt)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],t.stopped===_t||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(yt|bt|wt)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof ee)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(u(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(u(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=x(t,e);n!==-1&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var n=this.handlers;return l(w(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==a){var n=this.handlers;return l(w(e),function(e){t?n[e]&&n[e].splice(x(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&de(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},me(he,{INPUT_START:Pe,INPUT_MOVE:Me,INPUT_END:Fe,INPUT_CANCEL:qe,STATE_POSSIBLE:vt,STATE_BEGAN:yt,STATE_CHANGED:bt,STATE_ENDED:wt,STATE_RECOGNIZED:xt,STATE_CANCELLED:kt,STATE_FAILED:Tt,DIRECTION_NONE:Le,DIRECTION_LEFT:He,DIRECTION_RIGHT:Re,DIRECTION_UP:$e,DIRECTION_DOWN:Ge,DIRECTION_HORIZONTAL:We,DIRECTION_VERTICAL:Be,DIRECTION_ALL:ze,Manager:fe,Input:A,TouchAction:K,TouchInput:z,MouseInput:$,PointerEventInput:G,TouchMouseInput:X,SingleTouchInput:W,Recognizer:ee,AttrRecognizer:re,Tap:le,Pan:oe,Swipe:ue,Pinch:se,Rotate:ce,Press:ae,on:g,off:v,each:l,merge:Te,extend:ke,assign:me,inherit:f,bindFn:p,prefixed:E});var Ct="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};Ct.Hammer=he,i=function(){return he}.call(t,n,t,e),!(i!==a&&(e.exports=i))}(window,document,"Hammer")},function(e,t){e.exports='[{\n  "id": 1,\n  "title": "Cron (job scheduler)",\n  "description": "It comes from the Greek word for time, chronos (). Chronos is the personification of time in early Greek mythology and literature. He later appears in the Renaissance as Father Time.",\n  "categories": [\n    "OS",\n    "unix",\n    "linux",\n    "open source"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Cron"\n  ]\n}, {\n  "id": 2,\n  "title": "Daemon",\n  "description": "The term coined by programmers of MIT\'s Project MAC, was inspired by the physicist James Clerk Maxwell\'s demon. It originated as an imaginary being from a thought experiment that constantly works in the background sorting molecules. In Greek mythology, a daemon is a supernatural being working in the background, with no particular bias towards good or evil. The daemon concept was subsequently adopted by Unix systems, however, BSD and some of its derivatives have used a Christian interpretation of the mythological deamon as their mascot rather than a Greek daemon.",\n  "categories": [\n    "OS",\n    "unix",\n    "linux",\n    "open source"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Daemon_(computing)#Etymology"\n  ]\n}, {\n  "id": 3,\n  "title": "Polymorphism",\n  "description": "In programming languages and type theory, polymorphism is the provision of a single interface to entities of different types. Polymorphism comes from the greek words, polys (), meaning \\"much\\" or \\"many\\" and morph (), meaning \\"form\\" or \\"shape\\".",\n  "categories": [\n    "programming",\n    "coding"\n  ],\n  "references": []\n}, {\n  "id": 4,\n  "title": "(Apache) Cassandra",\n  "description": "Apache Cassandra was named after Cassandra (Greek: , also ), daughter of King Priam and Queen Hecuba of Troy. A common version of her story is that Apollo gave her the power of prophecy in order to seduce her, but when she spurned his advances, he spat into her mouth to ensure that Cadandras prophesies fell on deaf ears.",\n  "categories": [\n    "open source",\n    "databases",\n    "big data",\n    "noSQL"\n  ],\n  "references": []\n}, {\n  "id": 5,\n  "title": "Pseudo",\n  "description": "The prefix pseudo comes from pseudes (,), meaning \\"lying\\" or \\"false\\". The term refers to something which appears, on the surface, to be one thing, but is actually another. Pseudo may connote coincidence, imitation, intentional deception, or a combination thereof.",\n  "categories": [\n    "programming",\n    "coding",\n    "CSS"\n  ],\n  "references": []\n}, {\n  "id": 6,\n  "title": "Trojan horse",\n  "description": "The term comes from the Ancient Greek story of the wooden horse that was used by the Greek troops to invade Troy by stealth from within the citys walls.",\n  "categories": [\n    "social engineering",\n    "program"\n  ],\n  "references": []\n}, {\n  "id": 7,\n  "title": "Technology",\n  "description": "Technology derives from the Greek words techne (), meaning art, skill or sleight of hand and logia (), which refers to a collection of techniques, skills and processes used in the production of goods, services or in the accomplishment of objectives. It is easy to see how these concepts apply to our contemporary understanding of technology.",\n  "categories": [\n    "science"\n  ],\n  "references": []\n}, {\n  "id": 8,\n  "title": "Kerberos (protocol)",\n  "description": "The protocol was named after Kerberos (or Cerberus) in Greek mythology, the ferocious three-headed guard dog of Hades. Its designers conceived it primarily as a clientserver model and it provides mutual authentication - both the user and the server verify each other\'s identity.",\n  "categories": [\n    "networking",\n    "authentication protocol"\n  ],\n  "references": []\n}, {\n  "id": 9,\n  "title": "Skeuomorph  Skeuomorphism",\n  "description": "The term skeuomorph is compounded from the Greek: skuos (), meaning \\"container\\" or \\"tool\\", and morph (), \\"shape\\". A skeuomorph is a derivative object that retains ornamental design cues from structures that were necessary in the original, like a software calendar that imitates the appearance of binding on a paper desk calendar. Skeuomorph can be used to describe computer and mobile interfaces.",\n  "categories": [\n    "design",\n    "interface"\n  ],\n  "references": []\n}, {\n  "id": 10,\n  "title": "Eclipse",\n  "description": "The term eclipse is derived from the ancient Greek kleipsis (), which means \\"the abandonment, downfall, or darkening of a heavenly body\\". Eclipse software, initially developed by IBM, is primarily used to produce Java applications. Many versions of Eclipse have been named after a celestial bodies, such as Juno, Luna and Mars.",\n  "categories": [\n    "IDE",\n    "programming",\n    "coding",\n    "software",\n    "Java"\n  ],\n  "references": []\n}, {\n  "id": 11,\n  "title": "Android",\n  "description": "The word was coined from the prefix andro- for \\"man\\" or \\"male\\" () and the suffix -oid \\"having the form or likeness of\\". It has recently come to refer to an operating system endorsed by Google, which has become a leader in the mobile device market.",\n  "categories": [\n    "OS",\n    "mobile",\n    "Google",\n    "open source"\n  ],\n  "references": []\n}, {\n  "id": 12,\n  "title": "Icon",\n  "description": "An icon, from the Greek eikn () defined as \\"image\\", is generally a flat panel painting depicting religious figures or scenes. The term has been adapted to refer to a graphical user interface (GUI), which is the visual symbol identifying a command, file, directory or device.",\n  "categories": [\n    "GUI",\n    "interface"\n  ],\n  "references": []\n}, {\n  "id": 13,\n  "title": "Parameter",\n  "description": "Parameter comes from the ancient Greek words \\"para\\" (), meaning \\"beside, subsidiary\\" and \\"metron\\" (), meaning \\"measure\\". It commonly refers to a \\"characteristic, feature, or measurable factor that can help in defining a particular system\\". A parameter is an important element to consider in evaluation or comprehension of an event, project, or situation.",\n  "categories": [\n    "programming",\n    "coding"\n  ],\n  "references": []\n}, {\n  "id": 14,\n  "title": "Asymmetric",\n  "description": "Asymmetric originated from the ancient Greek word asummetra (), meaning \\"disproportion, deformity\\". It can be found in many computing-related topics such as asymmetric cryptography, asymmetric digital subscriber line (ADSL) in internet connectivity and asymmetric multiprocessing in computer architecture.",\n  "categories": [\n    "cryptography",\n    "internet connectivity",\n    "computing"\n  ],\n  "references": []\n}, {\n  "id": 15,\n  "title": "Synchronous  Asynchronous",\n  "description": "Synchronous, meaning \\"happening at the same time\\", is from the Greek word synkhronos (). It is a compound word formed by syn- \\"together\\" and -khronos \\"time\\". Asynchronous has the opposite meaning.",\n  "categories": [\n    "computing",\n    "programming",\n    "coding",\n    "telecommunications",\n    "systems"\n  ],\n  "references": []\n}, {\n  "id": 16,\n  "title": "Anonymous",\n  "description": "Anonymity is derived from the Greek word anonymia (), for \\"without a name\\" or \\"namelessness\\". In colloquial use, \\"anonymous\\" is used to describe situations where the acting person\'s name is unknown. Some writers have argued that namelessness, though technically correct, does not capture what is more centrally at stake in contexts of anonymity. The important idea here is that a person be unidentifiable, unreachable, or untraceable. Anonymity is seen as a technique, or a way of realizing, certain other values, such as privacy, or liberty.",\n  "categories": [\n    "hacking",\n    "programming",\n    "coding"\n  ],\n  "references": []\n}, {\n  "id": 17,\n  "title": "Mosaic (web browser)",\n  "description": "Mosaic is the art of creating images with an assemblage of small pieces of colored glass, stone, or other materials. It comes from the Greek word mouseion, \'place holy to the Muses,\' and may have been originally dedicated to the Muses. This applied art form shares a name with a discontinued early web browser credited with popularizing the World Wide Web. Mosaic or NCSA Mosaic was named for its support of multiple internet protocols and was also the first browser to display images.",\n  "categories": [\n    "software",\n    "browser"\n  ],\n  "references": []\n}, {\n  "id": 18,\n  "title": "Kubernetes",\n  "description": "The Greek word kubernetes, means \\"helmsman of a ship,\\" or, more metaphorically, \\"ruler\\", while the Latin translation of \\"kubernetes\\" is \\"gubernare\\", meaning \\"to rule\\".",\n  "categories": [\n    "open source",\n    "cluster",\n    "platform"\n  ],\n  "references": []\n}, {\n  "id": 19,\n  "title": "Python",\n  "description": "Python (), the dragon of Delphi, was always represented in Greek sculpture and vase-paintings as a serpent. He presided at the Delphic oracle, which was thought to exist at the center of the Earth-mother cult of Gaia, \\"Earth\\". Greeks considered the site to be the center of the earth, and the center of Delphi was represented by a stone; the omphalos, or navel, which Python guarded.",\n  "categories": [\n    "programming language"\n  ],\n  "references": []\n}, {\n  "id": 20,\n  "title": "Meteor",\n  "description": "The root word meteor comes from the Greek meteros (), meaning \\"high in the air\\".",\n  "categories": [\n    "javascript",\n    "framework"\n  ],\n  "references": []\n}, {\n  "id": 21,\n  "title": "Hyper (text, link, etc.)",\n  "description": "The English prefix hyper- comes from the Greek prefix \\"-\\" and means \\"over\\" or \\"beyond\\" and signifies the overcoming of the previous constraints. It has similar linguistic roots as the prefix \\"super-\\" which comes from Latin.",\n  "categories": [\n    "internet",\n    "web",\n    "networking"\n  ],\n  "references": []\n}, {\n  "id": 22,\n  "title": "Graphics",\n  "description": "The word graphics comes from the Greek graphikos (), for \\"something written\\", like an autograph, for example. The contemporary meaning of the word graphics is \\"visual images or designs on some surface, such as a wall, canvas, screen, paper, or stone to inform, illustrate, or entertain\\".",\n  "categories": [\n    "GUI",\n    "interface"\n  ],\n  "references": []\n}, {\n  "id": 23,\n  "title": "Peripheral",\n  "description": "A peripheral is a device that is used to put information into or get information out of the computer. Peripheral comes from the ancient Greek words periphreia (), meaning \\"the line around the circle, circumference, part of a circle, an arc, the outer surface\\" and phr () \\"bear, carry\\".",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 24,\n  "title": "Delphi",\n  "description": "In myths, the site of Delphi () was believed to be the center of the \\"Earth\\" (\\"Gaia\\"),  grandmother of Zeus. People consulted the Delphic oracle Pythia (always a woman), on everything from important matters of public policy to personal affairs. The Pythia and priests of Apollo\'s temple kept very detailed records of their visitors, kind of like an ancient database. Delphi was originally one of many codenames of a pre-release development tool project at Borland. Borland developer Danny Thorpe suggested Delphi as a codename in reference to the Oracle of Delphi. One of the design goals of the product was to provide database connectivity to programmers as a key feature and a popular database package at the time was Oracle database; hence, \\"If you want to talk to [the] Oracle, go to Delphi\\".",\n  "categories": [\n    "programming language",\n    "database",\n    "software",\n    "IDE"\n  ],\n  "references": []\n}, {\n  "id": 25,\n  "title": "Homoiconic",\n  "description": "Derived from \\"homo\\" () meaning the same and \\"icon\\" () meaning representation. A progamming language is said to be homoiconic when it shares the same representation for code and data. A well-known example is LISP, where the primary primitive data structure is the list and programs are written as lists. As such, code can be manipulated as if it was data and vice-versa",\n  "categories": [\n    "programming"\n  ],\n  "references": []\n}, {\n  "id": 26,\n  "title": "Cryptography",\n  "description": "Derived from krypts () for \\"hidden, secret\\" and graphein () for \\"writing\\". Cryptography is the practice and study of techniques for secure communication in the presence of third parties.",\n  "categories": [\n    "security",\n    "communication",\n    "software"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Cryptography"\n  ]\n}, {\n  "id": 27,\n  "title": "Steganography",\n  "description": "Combines the words steganos (), meaning \\"covered, concealed, or protected\\", and graphein () meaning \\"writing\\". Steganography is the practice of concealing a file, message, image or video within another file.",\n  "categories": [\n    "security",\n    "communication"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Steganography"\n  ]\n}, {\n  "id": 28,\n  "title": "Entropy",\n  "description": "Comes from the word tropee () which means \\"turning toward\\" or \\"transformation\\". Entropy is the randomness collected by an application for use in cryptography or other that requires random data. This randomness is often collected from hardware sources such as mouse movements or randomness generators.",\n  "categories": [\n    "cryptography",\n    "security",\n    "communication"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/entropy"\n  ]\n}, {\n  "id": 29,\n  "title": "Monolithic",\n  "description": "Derives from monlithos () which actually means \\"made of one stone\\". A software is called \\"monolithic\\" if it has a monolithic architecture, in which functionally distinguishable aspects are not separate components but are all integrated.",\n  "categories": [\n    "programming",\n    "architecture",\n    "software"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Monolith",\n    "http://dictionary.reference.com/browse/monolith"\n  ]\n}, {\n  "id": 30,\n  "title": "Authentication",\n  "description": "From the word authentikos () meaning \\"real, genuine\\", is the act of confirming the truth of an attribute of a single piece of data, for example an identity, claimed true by an entity.",\n  "categories": [\n    "programming",\n    "software",\n    "security"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Authentication"\n  ]\n}, {\n  "id": 31,\n  "title": "Mouse",\n  "description": "Comes from the word mees () which is the ancient Greek name of the rodent mouse. In the world of computing it\'s the name of a hardware device, the well-known source of input of a computer system.",\n  "categories": [\n    "peripheral",\n    "hardware"\n  ],\n  "references": [\n    "http://dictionary.reference.com/browse/mouse",\n    "http://www.etymonline.com/index.php?term=mouse"\n  ]\n}, {\n  "id": 32,\n  "title": "Parallelism",\n  "description": "From the word parllelos () which combines two words \\"\\" + \\"\\" meaning \\"along each other\\". Parallelism is a type of computation in which calculations are carried out simultaneously.",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/parallel#Etymology"\n  ]\n}, {\n  "id": 33,\n  "title": "Isomorphism",\n  "description": "In mathematics, an isomorphism (from the Ancient Greek:  isos \\"equal\\", and  morphe \\"form\\" or \\"shape\\") is a homomorphism (or more generally a morphism) that admits an inverse. Two mathematical objects are isomorphic if an isomorphism exists between them. In the development world there are a lot of isomorphic frameworks lately",\n  "categories": [\n    "programming"\n  ],\n  "references": []\n}, {\n  "id": 34,\n  "title": "Ephemeral",\n  "description": "Ephemerality (from Greek   ephemeros, literally \\"lasting only one day\\") is the concept of things being transitory, existing only briefly. An ephemeral port is a short-lived transport protocol port for Internet Protocol (IP) communications allocated automatically from a predefined range by the IP software",\n  "categories": [\n    "networking"\n  ],\n  "references": []\n}, {\n  "id": 35,\n  "title": "Cube (OLAP)",\n  "description": "In computer science and BI an OLAP Cube is a collection of Dimensions, Measures and Hierarchies that are preprocessed and stored in a way that allows data to appear instantaneously when a user makes his/her analysis. The term cube is derived from \\"kubos\\" (). In ancient greek, kubos was a die. Later on the meaning expanded to many cube-shaped objects.",\n  "categories": [\n    "big data",\n    "databases",\n    "data-warehouse",\n    "business intelligence"\n  ],\n  "references": []\n}, {\n  "id": 36,\n  "title": "Schema",\n  "description": "The word schema comes from the Greek word  (skhma), which means shape, or more generally, plan. A database schema describes the structure of its database system.",\n  "categories": [\n    "databases"\n  ],\n  "references": []\n}, {\n  "id": 37,\n  "title": "(Adobe) Acrobat",\n  "description": "Adobe Acrobat is a family of application software and Web services developed by Adobe Systems to view, create, manipulate, print and manage files in Portable Document Format (PDF). Based on ancient Greek word  (akrobts, \\"walking on tiptoe, climbing aloft\\").",\n  "categories": [\n    "software"\n  ],\n  "references": []\n}, {\n  "id": 38,\n  "title": "Alpha / Beta",\n  "description": "A software release life cycle contains the \\"alpha\\" and \\"beta\\" stages of development. The alpha phase of the release life cycle is the first phase to begin software testing (alpha is the first letter of the Greek alphabet, used also as the number 1). Beta, named after the second letter of the Greek alphabet, is the software development phase following alpha. Beta phase generally begins when the software is feature complete but likely to contain a number of known or unknown bugs.",\n  "categories": [\n    "software",\n    "development"\n  ],\n  "references": []\n}, {\n  "id": 39,\n  "title": "Disk (or disc)",\n  "description": "From Ancient Greek  (dskos, \\"a circular plate suited for hurling\\"), from  (diken, \\"to hurl, to launch\\").",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 40,\n  "title": "Program",\n  "description": "A computer program is a collection of instructions that performs a specific task when executed by a computer. The word program comes from Ancient Greek  (prgramma, \\"a written public notice, an edict\\").",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 41,\n  "title": "(Google) Chrome / Chromium",\n  "description": "Google Chrome / Chromium are web browsers developed by Google. Their names are derived from the Greek word , chrma, meaning color.",\n  "categories": [\n    "software",\n    "browser"\n  ],\n  "references": []\n}, {\n  "id": 42,\n  "title": "Automaton",\n  "description": "The word \\"automaton\\" is the latinization of the Greek , automaton, \\"acting of one\'s own will\\". An automaton (plural: automata or automatons) is a self-operating machine, or a machine or control mechanism designed to follow automatically a predetermined sequence of operations, or respond to predetermined instructions.",\n  "categories": [\n    "hardware"\n  ],\n  "references": []\n}, {\n  "id": 43,\n  "title": "Cyber",\n  "description": "The prefix cyber- is derived from \\"cybernetic,\\" which comes from the Greek word  meaning skilled in steering or governing. It is used in the terms cyberspace, cyberpunk, cybergoth, cyberlaw, cybercrime, cyberwarfare, cyberterrorism, cybersex, and cyberbullying, among others.",\n  "categories": [\n    "internet"\n  ],\n  "references": []\n}, {\n  "id": 44,\n  "title": "Symfony (web application framework)",\n  "description": "Originates from the homophone word \\"Symphony\\" which is derived from the word  (symphonia), meaning \\"agreement / concord of sound\\" and describes an extended musical composition in western classical music. Symfony is a \\"full-stack\\" PHP framework which promotes best practices and consists of a set of decoupled and reusable libraries. It implements the MVC architectural design pattern and many other design patterns like \\"Dependency Injection\\", \\"Data Access Object\\" and \\"Observer\\".",\n  "categories": [\n    "programming",\n    "frameworks"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Symphony#Origins",\n    "http://symfony.com/what-is-symfony"\n  ]\n}, {\n  "id": 45,\n  "title": "Atomicity (database systems)",\n  "description": "Atomicity comes from the word  (atomos) which means \\"indivisible\\". It\'s one of the ACID properties that guarantee transaction reliability. Atomicity requires that each transaction must be \\"all or nothing\\", so that if one part of the transaction fails, the entire transaction fails too and the database state is left unchanged. Also the series of operations cannot be divided apart and executed partially from each other, which makes the series of operations \\"indivisible\\", hence the name.",\n  "categories": [\n    "databases"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Atomicity_(database_systems)"\n  ]\n}, {\n  "id": 46,\n  "title": "Delta (differencing)",\n  "description": " (delta) is a letter of the Greek alphabet ( or ). Delta differencing is a way of storing or transmitting file differences rather than complete files. Deltas, for example, are the changes after a full backup. The differences are stored in files called deltas. As a backup approach saves bandwidth, reduces redundancy and storage. You can also find deltas on the deployment process of an application that requires database changes.",\n  "categories": [\n    "backup",\n    "databases"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Delta_encoding"\n  ]\n}, {\n  "id": 47,\n  "title": "Syntax",\n  "description": "The word syntax comes from Ancient Greek:  \\"coordination\\", which consists of  syn, \\"together\\", and  txis, \\"an ordering\\". In computer science, the syntax of a computer language is the set of rules that defines the combinations of symbols that are considered to be a correctly structured document or fragment in that language.",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Syntax_(programming_languages)",\n    "https://en.wikipedia.org/wiki/Syntax"\n  ]\n}, {\n  "id": 48,\n  "title": "Semantics",\n  "description": "Semantics (from Ancient Greek:  smantiks, \\"significant\\") is the study of meaning. In computer science, the term semantics refers to the meaning of languages, as opposed to their form (syntax).",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Semantics"\n  ]\n}, {\n  "id": 49,\n  "title": "Kilo",\n  "description": "Derived from ancient greek  (chilioi ) \\"one thousand\\". In computing it refers to multiplying the unit to which it is attached by 2^10 (1024).",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/kilo-",\n    "https://en.wikipedia.org/wiki/Kilo-"\n  ]\n}, {\n  "id": 50,\n  "title": "Paragon",\n  "description": "From Ancient Greek  (parakon, \\"I sharpen, whet\\"). The Intel Paragon is a discontinued series of massively parallel supercomputers that was produced by Intel in the 1990s.",\n  "categories": [\n    "hardware",\n    "supercomputer"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/paragon",\n    "https://en.wikipedia.org/wiki/Intel_Paragon"\n  ]\n}, {\n  "id": 51,\n  "title": "Titan",\n  "description": "From Ancient Greek  (Titn), a race of giant gods in Greek mythology that preceded and was overthrown by the Olympian gods. Titan is a supercomputer built by Cray at Oak Ridge National Laboratory for use in a variety of science projects. It uses graphics processing units (GPUs) in addition to conventional central processing units (CPUs). Titan is also the name of the prototype of the Atlas 2 computer developed by Ferranti and the University of Cambridge Mathematical Laboratory in Cambridge, England. Facebook also gave the name Titan to it\'s modern messaging system unveiled in 2010.",\n  "categories": [\n    "hardware",\n    "supercomputers",\n    "software"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/Titan",\n    "https://en.wikipedia.org/wiki/Titan_(supercomputer)",\n    "https://en.wikipedia.org/wiki/Titan_(computer)",\n    "http://www.digitaltrends.com/computing/facebooks-project-titan-is-the-modern-messaging-system-but-is-not-an-e-mail-killer/"\n  ]\n}, {\n  "id": 52,\n  "title": "Octet",\n  "description": "From ancient Greek  (okt). An octet is a unit of digital information in computing and telecommunications that consists of eight bits. The term is often used when the term byte might be ambiguous, as historically there was no standard definition for the size of the byte. Octets are used in the representation of Internet Protocol computer network addresses.",\n  "categories": [\n    "computing",\n    "networking"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/octo",\n    "https://en.wikipedia.org/wiki/Octet_(computing)"\n  ]\n}, {\n  "id": 53,\n  "title": "Neural",\n  "description": "From Ancient Greek  (neron, a sinew, nerve) + -al. In computing it means something that is modelled on the arrangement of neurons in the brain. Neural network software is used to simulate, research, develop and apply artificial neural networks, biological neural networks and, in some cases, a wider array of adaptive systems.",\n  "categories": [\n    "artifical intelligence",\n    "networking",\n    "software",\n    "machine learning"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/neural",\n    "https://en.wikipedia.org/wiki/Artificial_neural_network"\n  ]\n}, {\n  "id": 54,\n  "title": "Protocol",\n  "description": "From Byzantine Greek  (first sheet glued onto a manuscript), from  (prtos, \\"first\\") +  (klla, \\"glue\\"). In telecommunications, a communications protocol is a system of rules that allow two or more entities of a communications system to transmit information via any kind of variation of a physical quantity.",\n  "categories": [\n    "networking",\n    "communications"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/protocol",\n    "https://en.wikipedia.org/wiki/Communications_protocol"\n  ]\n}, {\n  "id": 55,\n  "title": "Method",\n  "description": "From Ancient Greek  (mthodos, \\"pursuit of knowledge, investigation, mode of prosecuting such inquiry, system\\"). In object oriented programming it describes a subroutine or function belonging to a class or object.",\n  "categories": [\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/method"\n  ]\n}, {\n  "id": 56,\n  "title": "Topology",\n  "description": "From Ancient Greek  (tpos, \\"place, locality\\") + -(o)logy (\\"study of\\", \\"a branch of knowledge\\"). In computing topology means the arrangement of nodes in a communications network.",\n  "categories": [\n    "networking",\n    "hardware",\n    "communications"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/topology"\n  ]\n}, {\n  "id": 57,\n  "title": "Diagnostics",\n  "description": "From Greek diagnstikos able to distinguish, from diagignskein distinguish. Any tool or technique, usually a special piece of software, used to find the root of a hardware or software problem and assist with it\'s fixing.",\n  "categories": [\n    "software"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/diagnosis",\n    "https://en.wiktionary.org/wiki/diagnostic#English"\n  ]\n}, {\n  "id": 58,\n  "title": "Hexadecimal",\n  "description": "The word hexadecimal is composed of hexa-, derived from the Greek  (hex) for six, and -decimal, derived from the Latin for tenth. In mathematics and computing, hexadecimal (also base 16, or hex) is a positional numeral system with a radix, or base, of 16.",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/hexa-#English",\n    "https://en.wikipedia.org/wiki/Hexadecimal"\n  ]\n}, {\n  "id": 59,\n  "title": "Giga",\n  "description": "From Ancient Greek  (ggas, giant). In computing it is a prefix that means multiplying the unit to which it is attached by 2^30 or 1,073,741,824.",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/giga-"\n  ]\n}, {\n  "id": 60,\n  "title": "Meta (programming, data, etc.)",\n  "description": "Meta (from the Greek preposition and prefix meta- (-) meaning \\"after\\", or \\"beyond\\") is a prefix used in English to indicate a concept which is an abstraction from another concept, used to complete or add to the latter.",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Meta"\n  ]\n}, {\n  "id": 61,\n  "title": "Lambda (function)",\n  "description": "Lambda calculus (also written as -calculus) is a formal system in mathematical logic for expressing computation based on function abstraction and application using variable binding and substitution. It was first introduced by mathematician Alonzo Church in the 1930s as part of an investigation into the foundations of mathematics. Lambda calculus is a universal model of computation equivalent to a Turing machine (Church-Turing thesis, 1937). Its namesake, Greek letter lambda (), is used in lambda terms (also called lambda expressions) to denote binding a variable in a function. Lambda calculus may be typed and untyped. In typed lambda calculus functions can be applied only if they are capable of accepting the given input\'s \\"type\\" of data. Lambda calculus has applications in many different areas in mathematics, philosophy, linguistics and computer science. Lambda calculus has played an important role in the development of the theory of programming languages. Functional programming languages implement the lambda calculus. Lambda calculus also is a current research topic in Category theory.",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wikipedia.org/wiki/Lambda_calculus"\n  ]\n}, {\n  "id": 62,\n  "title": "Mega",\n  "description": "From Ancient Greek  (mgas, great, large, mighty). In computing, mega may sometimes denote 1,048,576 (2^20) of information units (example: a megabyte, a megaword), but denotes 1000000 (10^6) units of other quantities, for example, transfer rates: 1megabit/s = 1000000bit/s. The prefix mebi has been suggested as a prefix for 2^20 to avoid ambiguity.",\n  "categories": [\n    "computing"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/mega-",\n    "https://en.wikipedia.org/wiki/Mega-"\n  ]\n}, {\n  "id": 63,\n  "title": "Analog",\n  "description": "From Ancient Greek  (anlogos, proportionate).A device or system in which the value of a data item (such as time) is represented by a continuous(ly) variable physical quantity that can be measured (such as the shadow of a sundial)",\n  "categories": [\n    "technology"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/analog"\n  ]\n}, {\n  "id": 64,\n  "title": "Dynamic",\n  "description": "from Ancient Greek  (dunamiks, powerful).In computing it means something that is happening at runtime instead of being predetermined at compile time.For instance: dynamic allocation, dynamic IP addresses, the dynamic resizing of an array\\n\\n",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/dynamic"\n  ]\n}, {\n  "id": 65,\n  "title": "Macro",\n  "description": "From Ancient Greek  (makrs, long). A comparatively human-friendly abbreviation of complicated input to a computer program.",\n  "categories": [\n    "computing",\n    "programming"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/macro"\n  ]\n}, {\n  "id": 66,\n  "title": "Ethernet",\n  "description": "The word Ethernet is a compound word formed by joining \'Ether\' and \'Net\'.  The word \'Ether\' is based on Ancient Greek word  (aithr, upper air).In computing it refers to a set of network cabling and network access (CSMA/CD) protocol standards for bus topology computer networks invented by Xerox but now controlled by the 802.3 subcommittee of the IEEE.",\n  "categories": [\n    "networks"\n  ],\n  "references": [\n    "https://en.wiktionary.org/wiki/Ethernet",\n    "https://en.wiktionary.org/wiki/ether"\n  ]\n}]\n';
},function(e,t){e.exports='<header>\n\t<div class="container">\n\t\t<h1><%= title %></h1>\n\t\t<ul class="social-links">\n\t\t\t<li>\n\t\t\t\t<a class="ion-social-twitter"\n\t\t\t\t\thref="https://twitter.com/intent/tweet?\n\t\t\t\t\ttext=Did%20you%20know%20that%20%22<%= title %>%22%20is%20a%20greek%20word%3F%20&amp;\n\t\t\t\t\turl=http%3A%2F%2Fgreekintech.com%2F<%= id %>%2F<%= urlFriendlyTitle %>&amp;\n\t\t\t\t\thashtags=greekintech"\n\t\t\t\t\tdata-count="none">\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<a class="ion-social-facebook"\n\t\t\t\t\thref="https://www.facebook.com/sharer/sharer.php\n\t\t\t\t\t?u=http://greekintech.com/#entry/<%= id %>/<%= urlFriendlyTitle %>">\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</header>\n<p><%= description %></p>\n<footer>\n\t<p class="tags-copy">Tags: </p>\n\t<ul class="tags">\n\t\t<% _.each(categories, function(category) { %>\n\t\t\t<li><%= category %></li>\n\t\t<% }) %>\n\t</ul>\n\n\t<% if (!_.isEmpty(references)) { %>\n\t\t<p class="references-copy">References: </p>\n\t\t<ul class="references">\n\t\t\t<% _.each(references, function(reference) { %>\n\t\t\t\t<li><a href="<%= reference %>" target="_blank"><%= reference %></a></li>\n\t\t\t<% }) %>\n\t\t</ul>\n\t<% } %>\n</footer>'},function(e,t,n){"use strict";var i=n(16);e.exports=function(e){var t=i(0,e.length-1);return function(){return e[t()]}}},function(e,t){"use strict";e.exports=function(e,t){var n;return function i(){var r=Math.floor(Math.random()*(t-e+1)+e);return n=r===n&&e!==t?i():r}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjNTk1YzQ4Y2YxZDY0NjU5NzRmYSIsIndlYnBhY2s6Ly8vLi9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4uL34vYmFja2JvbmUvYmFja2JvbmUuanMiLCJ3ZWJwYWNrOi8vLy4uL34vdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzIiwid2VicGFjazovLy8uLi9+L2pxdWVyeS9kaXN0L2pxdWVyeS5qcyIsIndlYnBhY2s6Ly8vLi9jb2xsZWN0aW9ucy9FbnRyaWVzLmpzIiwid2VicGFjazovLy8uL21vZGVscy9FbnRyeS5qcyIsIndlYnBhY2s6Ly8vLi9yb3V0ZXIvQXBwUm91dGVyLmpzIiwid2VicGFjazovLy8uL3ZpZXdzL0VudHJpZXNWaWV3LmpzIiwid2VicGFjazovLy8uL3ZpZXdzL0VudHJ5Vmlldy5qcyIsIndlYnBhY2s6Ly8vLi92aWV3cy9Mb2FkZXJWaWV3LmpzIiwid2VicGFjazovLy8uLi9+L2dyZWVrLWluLXRlY2gvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uLi9+L2hhbW1lcmpzL2hhbW1lci5qcyIsIndlYnBhY2s6Ly8vLi4vfi9ncmVlay1pbi10ZWNoL2RhdGEvZW50cmllcy5qc29uIiwid2VicGFjazovLy8uL3RlbXBsYXRlcy9lbnRyeS5odG1sIiwid2VicGFjazovLy8uLi9+L3VuaXF1ZS1yYW5kb20tYXJyYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4uL34vdW5pcXVlLXJhbmRvbS9pbmRleC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfYmFja2JvbmUiLCJfYmFja2JvbmUyIiwiX0FwcFJvdXRlciIsIl9BcHBSb3V0ZXIyIiwiaGlzdG9yeSIsInN0YXJ0IiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiZ2xvYmFsIiwiZmFjdG9yeSIsInJvb3QiLCJzZWxmIiwiXyIsIiQiLCJCYWNrYm9uZSIsImFwcGx5IiwidW5kZWZpbmVkIiwicHJldmlvdXNCYWNrYm9uZSIsInNsaWNlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJWRVJTSU9OIiwibm9Db25mbGljdCIsInRoaXMiLCJlbXVsYXRlSFRUUCIsImVtdWxhdGVKU09OIiwiYWRkTWV0aG9kIiwibGVuZ3RoIiwibWV0aG9kIiwiYXR0cmlidXRlIiwidmFsdWUiLCJpdGVyYXRlZSIsImNvbnRleHQiLCJjYiIsImRlZmF1bHRWYWwiLCJhcmdzIiwiYXJndW1lbnRzIiwidW5zaGlmdCIsImFkZFVuZGVyc2NvcmVNZXRob2RzIiwiQ2xhc3MiLCJtZXRob2RzIiwiZWFjaCIsImluc3RhbmNlIiwiaXNGdW5jdGlvbiIsImlzT2JqZWN0IiwiX2lzTW9kZWwiLCJtb2RlbE1hdGNoZXIiLCJpc1N0cmluZyIsIm1vZGVsIiwiZ2V0IiwiYXR0cnMiLCJtYXRjaGVyIiwibWF0Y2hlcyIsImF0dHJpYnV0ZXMiLCJFdmVudHMiLCJldmVudFNwbGl0dGVyIiwiZXZlbnRzQXBpIiwiZXZlbnRzIiwibmFtZSIsImNhbGxiYWNrIiwib3B0cyIsIm5hbWVzIiwiaSIsImtleXMiLCJ0ZXN0Iiwic3BsaXQiLCJvbiIsImludGVybmFsT24iLCJsaXN0ZW5pbmciLCJfZXZlbnRzIiwib25BcGkiLCJjdHgiLCJsaXN0ZW5lcnMiLCJfbGlzdGVuZXJzIiwibGlzdGVuVG8iLCJfbGlzdGVuSWQiLCJ1bmlxdWVJZCIsImxpc3RlbmluZ1RvIiwiX2xpc3RlbmluZ1RvIiwidGhpc0lkIiwib2JqSWQiLCJjb3VudCIsIm9wdGlvbnMiLCJoYW5kbGVycyIsInB1c2giLCJvZmYiLCJvZmZBcGkiLCJzdG9wTGlzdGVuaW5nIiwiaWRzIiwicmVtYWluaW5nIiwiaiIsImhhbmRsZXIiLCJfY2FsbGJhY2siLCJvbmNlIiwib25jZU1hcCIsImJpbmQiLCJsaXN0ZW5Ub09uY2UiLCJtYXAiLCJvZmZlciIsInRyaWdnZXIiLCJNYXRoIiwibWF4IiwidHJpZ2dlckFwaSIsIm9iakV2ZW50cyIsImFsbEV2ZW50cyIsImFsbCIsInRyaWdnZXJFdmVudHMiLCJjb25jYXQiLCJldiIsImwiLCJhMSIsImEyIiwiYTMiLCJ1bmJpbmQiLCJleHRlbmQiLCJNb2RlbCIsImNpZCIsImNpZFByZWZpeCIsImNvbGxlY3Rpb24iLCJwYXJzZSIsImRlZmF1bHRzIiwicmVzdWx0Iiwic2V0IiwiY2hhbmdlZCIsImluaXRpYWxpemUiLCJ2YWxpZGF0aW9uRXJyb3IiLCJpZEF0dHJpYnV0ZSIsInRvSlNPTiIsImNsb25lIiwic3luYyIsImF0dHIiLCJlc2NhcGUiLCJoYXMiLCJrZXkiLCJ2YWwiLCJfdmFsaWRhdGUiLCJ1bnNldCIsInNpbGVudCIsImNoYW5nZXMiLCJjaGFuZ2luZyIsIl9jaGFuZ2luZyIsIl9wcmV2aW91c0F0dHJpYnV0ZXMiLCJjdXJyZW50IiwicHJldiIsImlzRXF1YWwiLCJfcGVuZGluZyIsImNsZWFyIiwiaGFzQ2hhbmdlZCIsImlzRW1wdHkiLCJjaGFuZ2VkQXR0cmlidXRlcyIsImRpZmYiLCJvbGQiLCJzaXplIiwicHJldmlvdXMiLCJwcmV2aW91c0F0dHJpYnV0ZXMiLCJmZXRjaCIsInN1Y2Nlc3MiLCJyZXNwIiwic2VydmVyQXR0cnMiLCJ3cmFwRXJyb3IiLCJzYXZlIiwidmFsaWRhdGUiLCJ3YWl0IiwiaXNOZXciLCJwYXRjaCIsInhociIsImRlc3Ryb3kiLCJkZWZlciIsInVybCIsImJhc2UiLCJ1cmxFcnJvciIsInJlcGxhY2UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsImlzVmFsaWQiLCJlcnJvciIsIm1vZGVsTWV0aG9kcyIsInZhbHVlcyIsInBhaXJzIiwiaW52ZXJ0IiwicGljayIsIm9taXQiLCJjaGFpbiIsIkNvbGxlY3Rpb24iLCJtb2RlbHMiLCJjb21wYXJhdG9yIiwiX3Jlc2V0IiwicmVzZXQiLCJzZXRPcHRpb25zIiwiYWRkIiwicmVtb3ZlIiwibWVyZ2UiLCJhZGRPcHRpb25zIiwic3BsaWNlIiwiYXJyYXkiLCJpbnNlcnQiLCJhdCIsIm1pbiIsInRhaWwiLCJzaW5ndWxhciIsImlzQXJyYXkiLCJyZW1vdmVkIiwiX3JlbW92ZU1vZGVscyIsImFkZGVkIiwibWVyZ2VkIiwidG9BZGQiLCJ0b01lcmdlIiwidG9SZW1vdmUiLCJtb2RlbE1hcCIsInNvcnQiLCJzb3J0YWJsZSIsInNvcnRBdHRyIiwiZXhpc3RpbmciLCJfcHJlcGFyZU1vZGVsIiwiX2FkZFJlZmVyZW5jZSIsIm9yZGVyQ2hhbmdlZCIsInNvbWUiLCJpbmRleCIsIl9yZW1vdmVSZWZlcmVuY2UiLCJwcmV2aW91c01vZGVscyIsInBvcCIsInNoaWZ0IiwiX2J5SWQiLCJtb2RlbElkIiwid2hlcmUiLCJmaXJzdCIsImZpbmRXaGVyZSIsIkVycm9yIiwic29ydEJ5IiwicGx1Y2siLCJjcmVhdGUiLCJjYWxsYmFja09wdHMiLCJpbmRleE9mIiwiX29uTW9kZWxFdmVudCIsImV2ZW50IiwicHJldklkIiwiY29sbGVjdGlvbk1ldGhvZHMiLCJmb3JFYWNoIiwiY29sbGVjdCIsInJlZHVjZSIsImZvbGRsIiwiaW5qZWN0IiwicmVkdWNlUmlnaHQiLCJmb2xkciIsImZpbmQiLCJkZXRlY3QiLCJmaWx0ZXIiLCJzZWxlY3QiLCJyZWplY3QiLCJldmVyeSIsImFueSIsImluY2x1ZGUiLCJpbmNsdWRlcyIsImNvbnRhaW5zIiwiaW52b2tlIiwidG9BcnJheSIsImhlYWQiLCJ0YWtlIiwiaW5pdGlhbCIsInJlc3QiLCJkcm9wIiwibGFzdCIsIndpdGhvdXQiLCJkaWZmZXJlbmNlIiwic2h1ZmZsZSIsImxhc3RJbmRleE9mIiwic2FtcGxlIiwicGFydGl0aW9uIiwiZ3JvdXBCeSIsImNvdW50QnkiLCJpbmRleEJ5IiwiZmluZEluZGV4IiwiZmluZExhc3RJbmRleCIsIlZpZXciLCJ2aWV3T3B0aW9ucyIsIl9lbnN1cmVFbGVtZW50IiwiZGVsZWdhdGVFdmVudFNwbGl0dGVyIiwidGFnTmFtZSIsInNlbGVjdG9yIiwiJGVsIiwicmVuZGVyIiwiX3JlbW92ZUVsZW1lbnQiLCJzZXRFbGVtZW50IiwiZWxlbWVudCIsInVuZGVsZWdhdGVFdmVudHMiLCJfc2V0RWxlbWVudCIsImRlbGVnYXRlRXZlbnRzIiwiZWwiLCJtYXRjaCIsImRlbGVnYXRlIiwiZXZlbnROYW1lIiwibGlzdGVuZXIiLCJ1bmRlbGVnYXRlIiwiX2NyZWF0ZUVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJfc2V0QXR0cmlidXRlcyIsInR5cGUiLCJtZXRob2RNYXAiLCJwYXJhbXMiLCJkYXRhVHlwZSIsImRhdGEiLCJjb250ZW50VHlwZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJfbWV0aG9kIiwiYmVmb3JlU2VuZCIsInNldFJlcXVlc3RIZWFkZXIiLCJwcm9jZXNzRGF0YSIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsImFqYXgiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWFkIiwiUm91dGVyIiwicm91dGVzIiwiX2JpbmRSb3V0ZXMiLCJvcHRpb25hbFBhcmFtIiwibmFtZWRQYXJhbSIsInNwbGF0UGFyYW0iLCJlc2NhcGVSZWdFeHAiLCJyb3V0ZSIsImlzUmVnRXhwIiwiX3JvdXRlVG9SZWdFeHAiLCJyb3V0ZXIiLCJmcmFnbWVudCIsIl9leHRyYWN0UGFyYW1ldGVycyIsImV4ZWN1dGUiLCJuYXZpZ2F0ZSIsIm9wdGlvbmFsIiwiUmVnRXhwIiwiZXhlYyIsInBhcmFtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiSGlzdG9yeSIsImNoZWNrVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJyb3V0ZVN0cmlwcGVyIiwicm9vdFN0cmlwcGVyIiwicGF0aFN0cmlwcGVyIiwic3RhcnRlZCIsImludGVydmFsIiwiYXRSb290IiwicGF0aCIsInBhdGhuYW1lIiwiZ2V0U2VhcmNoIiwibWF0Y2hSb290IiwiZGVjb2RlRnJhZ21lbnQiLCJyb290UGF0aCIsImRlY29kZVVSSSIsImhyZWYiLCJnZXRIYXNoIiwiZ2V0UGF0aCIsImNoYXJBdCIsImdldEZyYWdtZW50IiwiX3VzZVB1c2hTdGF0ZSIsIl93YW50c0hhc2hDaGFuZ2UiLCJoYXNoQ2hhbmdlIiwiX2hhc0hhc2hDaGFuZ2UiLCJkb2N1bWVudE1vZGUiLCJfdXNlSGFzaENoYW5nZSIsIl93YW50c1B1c2hTdGF0ZSIsInB1c2hTdGF0ZSIsIl9oYXNQdXNoU3RhdGUiLCJpZnJhbWUiLCJzcmMiLCJzdHlsZSIsImRpc3BsYXkiLCJ0YWJJbmRleCIsImJvZHkiLCJpV2luZG93IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNvbnRlbnRXaW5kb3ciLCJvcGVuIiwiY2xvc2UiLCJoYXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwiX2NoZWNrVXJsSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImxvYWRVcmwiLCJzdG9wIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwicmVtb3ZlQ2hpbGQiLCJjbGVhckludGVydmFsIiwiZSIsInRpdGxlIiwiYXNzaWduIiwiX3VwZGF0ZUhhc2giLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJjaGlsZCIsInBhcmVudCIsIl9fc3VwZXJfXyIsImNyZWF0ZVJlZHVjZSIsImRpciIsIml0ZXJhdG9yIiwibWVtbyIsImN1cnJlbnRLZXkiLCJvcHRpbWl6ZUNiIiwiaXNBcnJheUxpa2UiLCJjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciIsInByZWRpY2F0ZSIsImdldExlbmd0aCIsImNyZWF0ZUluZGV4RmluZGVyIiwicHJlZGljYXRlRmluZCIsInNvcnRlZEluZGV4IiwiaXRlbSIsImlkeCIsImlzTmFOIiwiY29sbGVjdE5vbkVudW1Qcm9wcyIsIm5vbkVudW1JZHgiLCJub25FbnVtZXJhYmxlUHJvcHMiLCJwcm90byIsIk9ialByb3RvIiwicHJvcCIsInByZXZpb3VzVW5kZXJzY29yZSIsIkFycmF5UHJvdG8iLCJPYmplY3QiLCJGdW5jUHJvdG8iLCJGdW5jdGlvbiIsInRvU3RyaW5nIiwiaGFzT3duUHJvcGVydHkiLCJuYXRpdmVJc0FycmF5IiwibmF0aXZlS2V5cyIsIm5hdGl2ZUJpbmQiLCJuYXRpdmVDcmVhdGUiLCJDdG9yIiwiX3dyYXBwZWQiLCJmdW5jIiwiYXJnQ291bnQiLCJvdGhlciIsImFjY3VtdWxhdG9yIiwiaWRlbnRpdHkiLCJwcm9wZXJ0eSIsIkluZmluaXR5IiwiY3JlYXRlQXNzaWduZXIiLCJrZXlzRnVuYyIsInVuZGVmaW5lZE9ubHkiLCJzb3VyY2UiLCJiYXNlQ3JlYXRlIiwiTUFYX0FSUkFZX0lOREVYIiwicG93IiwicmVzdWx0cyIsImZpbmRLZXkiLCJsaXN0IiwibmVnYXRlIiwiZnJvbUluZGV4IiwiZ3VhcmQiLCJpc0Z1bmMiLCJjb21wdXRlZCIsImxhc3RDb21wdXRlZCIsInJhbmQiLCJzaHVmZmxlZCIsInJhbmRvbSIsIm4iLCJjcml0ZXJpYSIsImxlZnQiLCJyaWdodCIsImEiLCJiIiwiZ3JvdXAiLCJiZWhhdmlvciIsInBhc3MiLCJmYWlsIiwiY29tcGFjdCIsImZsYXR0ZW4iLCJpbnB1dCIsInNoYWxsb3ciLCJzdHJpY3QiLCJzdGFydEluZGV4Iiwib3V0cHV0IiwiaXNBcmd1bWVudHMiLCJsZW4iLCJ1bmlxIiwidW5pcXVlIiwiaXNTb3J0ZWQiLCJpc0Jvb2xlYW4iLCJzZWVuIiwidW5pb24iLCJpbnRlcnNlY3Rpb24iLCJhcmdzTGVuZ3RoIiwiemlwIiwidW56aXAiLCJvYmplY3QiLCJsb3ciLCJoaWdoIiwibWlkIiwiZmxvb3IiLCJyYW5nZSIsInN0ZXAiLCJjZWlsIiwiZXhlY3V0ZUJvdW5kIiwic291cmNlRnVuYyIsImJvdW5kRnVuYyIsImNhbGxpbmdDb250ZXh0IiwiVHlwZUVycm9yIiwiYm91bmQiLCJwYXJ0aWFsIiwiYm91bmRBcmdzIiwicG9zaXRpb24iLCJiaW5kQWxsIiwibWVtb2l6ZSIsImhhc2hlciIsImNhY2hlIiwiYWRkcmVzcyIsImRlbGF5Iiwic2V0VGltZW91dCIsInRocm90dGxlIiwidGltZW91dCIsImxhdGVyIiwibGVhZGluZyIsIm5vdyIsImNsZWFyVGltZW91dCIsInRyYWlsaW5nIiwiZGVib3VuY2UiLCJpbW1lZGlhdGUiLCJ0aW1lc3RhbXAiLCJjYWxsTm93Iiwid3JhcCIsIndyYXBwZXIiLCJjb21wb3NlIiwiYWZ0ZXIiLCJ0aW1lcyIsImJlZm9yZSIsImhhc0VudW1CdWciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImFsbEtleXMiLCJtYXBPYmplY3QiLCJmdW5jdGlvbnMiLCJleHRlbmRPd24iLCJvaXRlcmF0ZWUiLCJTdHJpbmciLCJwcm9wcyIsInRhcCIsImludGVyY2VwdG9yIiwiaXNNYXRjaCIsImVxIiwiYVN0YWNrIiwiYlN0YWNrIiwiYXJlQXJyYXlzIiwiYUN0b3IiLCJiQ3RvciIsImlzRWxlbWVudCIsIm5vZGVUeXBlIiwiSW50OEFycmF5IiwiaXNGaW5pdGUiLCJwYXJzZUZsb2F0IiwiaXNOdW1iZXIiLCJpc051bGwiLCJpc1VuZGVmaW5lZCIsImNvbnN0YW50Iiwibm9vcCIsInByb3BlcnR5T2YiLCJhY2N1bSIsIkRhdGUiLCJnZXRUaW1lIiwiZXNjYXBlTWFwIiwiJiIsIjwiLCI+IiwiXCIiLCInIiwiYCIsInVuZXNjYXBlTWFwIiwiY3JlYXRlRXNjYXBlciIsImVzY2FwZXIiLCJqb2luIiwidGVzdFJlZ2V4cCIsInJlcGxhY2VSZWdleHAiLCJzdHJpbmciLCJ1bmVzY2FwZSIsImZhbGxiYWNrIiwiaWRDb3VudGVyIiwicHJlZml4IiwidGVtcGxhdGVTZXR0aW5ncyIsImV2YWx1YXRlIiwiaW50ZXJwb2xhdGUiLCJub01hdGNoIiwiZXNjYXBlcyIsIlxcIiwiXHIiLCJcbiIsIuKAqCIsIuKAqSIsImVzY2FwZUNoYXIiLCJ0ZW1wbGF0ZSIsInRleHQiLCJzZXR0aW5ncyIsIm9sZFNldHRpbmdzIiwib2Zmc2V0IiwidmFyaWFibGUiLCJhcmd1bWVudCIsIl9jaGFpbiIsIm1peGluIiwidmFsdWVPZiIsInciLCJub0dsb2JhbCIsImpRdWVyeSIsImlzV2luZG93Iiwid2lubm93IiwiZWxlbWVudHMiLCJxdWFsaWZpZXIiLCJub3QiLCJncmVwIiwiZWxlbSIsInJpc1NpbXBsZSIsInNpYmxpbmciLCJjdXIiLCJjcmVhdGVPcHRpb25zIiwicm5vdHdoaXRlIiwiZmxhZyIsImNvbXBsZXRlZCIsInJlYWR5IiwiRGF0YSIsImV4cGFuZG8iLCJ1aWQiLCJkYXRhQXR0ciIsInJtdWx0aURhc2giLCJ0b0xvd2VyQ2FzZSIsImdldEF0dHJpYnV0ZSIsInJicmFjZSIsInBhcnNlSlNPTiIsImRhdGFVc2VyIiwiYWRqdXN0Q1NTIiwidmFsdWVQYXJ0cyIsInR3ZWVuIiwiYWRqdXN0ZWQiLCJzY2FsZSIsIm1heEl0ZXJhdGlvbnMiLCJjdXJyZW50VmFsdWUiLCJjc3MiLCJ1bml0IiwiY3NzTnVtYmVyIiwiaW5pdGlhbEluVW5pdCIsInJjc3NOdW0iLCJlbmQiLCJnZXRBbGwiLCJ0YWciLCJyZXQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJub2RlTmFtZSIsInNldEdsb2JhbEV2YWwiLCJlbGVtcyIsInJlZkVsZW1lbnRzIiwiZGF0YVByaXYiLCJidWlsZEZyYWdtZW50Iiwic2NyaXB0cyIsInNlbGVjdGlvbiIsImlnbm9yZWQiLCJ0bXAiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwibm9kZXMiLCJyaHRtbCIsImFwcGVuZENoaWxkIiwicnRhZ05hbWUiLCJ3cmFwTWFwIiwiX2RlZmF1bHQiLCJpbm5lckhUTUwiLCJodG1sUHJlZmlsdGVyIiwibGFzdENoaWxkIiwiY2hpbGROb2RlcyIsInRleHRDb250ZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJpbkFycmF5Iiwib3duZXJEb2N1bWVudCIsInJzY3JpcHRUeXBlIiwicmV0dXJuVHJ1ZSIsInJldHVybkZhbHNlIiwic2FmZUFjdGl2ZUVsZW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiZXJyIiwidHlwZXMiLCJmbiIsIm9uZSIsIm9yaWdGbiIsImd1aWQiLCJtYW5pcHVsYXRpb25UYXJnZXQiLCJjb250ZW50IiwiZGlzYWJsZVNjcmlwdCIsInJlc3RvcmVTY3JpcHQiLCJyc2NyaXB0VHlwZU1hc2tlZCIsInJlbW92ZUF0dHJpYnV0ZSIsImNsb25lQ29weUV2ZW50IiwiZGVzdCIsInBkYXRhT2xkIiwicGRhdGFDdXIiLCJ1ZGF0YU9sZCIsInVkYXRhQ3VyIiwiaGFzRGF0YSIsImFjY2VzcyIsImhhbmRsZSIsImZpeElucHV0IiwicmNoZWNrYWJsZVR5cGUiLCJjaGVja2VkIiwiZGVmYXVsdFZhbHVlIiwiZG9tTWFuaXAiLCJoYXNTY3JpcHRzIiwibm9kZSIsImRvYyIsImlOb0Nsb25lIiwic3VwcG9ydCIsImNoZWNrQ2xvbmUiLCJyY2hlY2tlZCIsImh0bWwiLCJfZXZhbFVybCIsImdsb2JhbEV2YWwiLCJyY2xlYW5TY3JpcHQiLCJrZWVwRGF0YSIsImNsZWFuRGF0YSIsInBhcmVudE5vZGUiLCJhY3R1YWxEaXNwbGF5IiwiYXBwZW5kVG8iLCJkZXRhY2giLCJkZWZhdWx0RGlzcGxheSIsImVsZW1kaXNwbGF5IiwiZG9jdW1lbnRFbGVtZW50IiwiY29udGVudERvY3VtZW50Iiwid3JpdGUiLCJjdXJDU1MiLCJ3aWR0aCIsIm1pbldpZHRoIiwibWF4V2lkdGgiLCJnZXRTdHlsZXMiLCJnZXRQcm9wZXJ0eVZhbHVlIiwicGl4ZWxNYXJnaW5SaWdodCIsInJudW1ub25weCIsInJtYXJnaW4iLCJhZGRHZXRIb29rSWYiLCJjb25kaXRpb25GbiIsImhvb2tGbiIsInZlbmRvclByb3BOYW1lIiwiZW1wdHlTdHlsZSIsImNhcE5hbWUiLCJ0b1VwcGVyQ2FzZSIsImNzc1ByZWZpeGVzIiwic2V0UG9zaXRpdmVOdW1iZXIiLCJzdWJ0cmFjdCIsImF1Z21lbnRXaWR0aE9ySGVpZ2h0IiwiZXh0cmEiLCJpc0JvcmRlckJveCIsInN0eWxlcyIsImNzc0V4cGFuZCIsImdldFdpZHRoT3JIZWlnaHQiLCJ2YWx1ZUlzQm9yZGVyQm94Iiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJib3hTaXppbmdSZWxpYWJsZSIsInNob3dIaWRlIiwic2hvdyIsImhpZGRlbiIsImlzSGlkZGVuIiwiVHdlZW4iLCJlYXNpbmciLCJpbml0IiwiY3JlYXRlRnhOb3ciLCJmeE5vdyIsImdlbkZ4IiwiaW5jbHVkZVdpZHRoIiwid2hpY2giLCJoZWlnaHQiLCJvcGFjaXR5IiwiY3JlYXRlVHdlZW4iLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJ0d2VlbmVycyIsImRlZmF1bHRQcmVmaWx0ZXIiLCJ0b2dnbGUiLCJob29rcyIsIm9sZGZpcmUiLCJjaGVja0Rpc3BsYXkiLCJhbmltIiwib3JpZyIsImRhdGFTaG93IiwicXVldWUiLCJfcXVldWVIb29rcyIsInVucXVldWVkIiwiZW1wdHkiLCJmaXJlIiwiYWx3YXlzIiwib3ZlcmZsb3ciLCJvdmVyZmxvd1giLCJvdmVyZmxvd1kiLCJyZnh0eXBlcyIsImlzRW1wdHlPYmplY3QiLCJkb25lIiwiaGlkZSIsInByb3BGaWx0ZXIiLCJzcGVjaWFsRWFzaW5nIiwiY2FtZWxDYXNlIiwiY3NzSG9va3MiLCJleHBhbmQiLCJwcm9wZXJ0aWVzIiwic3RvcHBlZCIsInByZWZpbHRlcnMiLCJkZWZlcnJlZCIsIkRlZmVycmVkIiwidGljayIsImN1cnJlbnRUaW1lIiwic3RhcnRUaW1lIiwiZHVyYXRpb24iLCJ0ZW1wIiwicGVyY2VudCIsInR3ZWVucyIsInJ1biIsIm5vdGlmeVdpdGgiLCJyZXNvbHZlV2l0aCIsInByb21pc2UiLCJvcmlnaW5hbFByb3BlcnRpZXMiLCJvcmlnaW5hbE9wdGlvbnMiLCJnb3RvRW5kIiwicmVqZWN0V2l0aCIsInByb3h5IiwiZngiLCJ0aW1lciIsInByb2dyZXNzIiwiY29tcGxldGUiLCJnZXRDbGFzcyIsImFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyIsInN0cnVjdHVyZSIsImRhdGFUeXBlRXhwcmVzc2lvbiIsImRhdGFUeXBlcyIsImluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzIiwianFYSFIiLCJpbnNwZWN0Iiwic2VsZWN0ZWQiLCJpbnNwZWN0ZWQiLCJwcmVmaWx0ZXJPckZhY3RvcnkiLCJkYXRhVHlwZU9yVHJhbnNwb3J0Iiwic2Vla2luZ1RyYW5zcG9ydCIsInRyYW5zcG9ydHMiLCJhamF4RXh0ZW5kIiwidGFyZ2V0IiwiZGVlcCIsImZsYXRPcHRpb25zIiwiYWpheFNldHRpbmdzIiwiYWpheEhhbmRsZVJlc3BvbnNlcyIsInMiLCJyZXNwb25zZXMiLCJjdCIsImZpbmFsRGF0YVR5cGUiLCJmaXJzdERhdGFUeXBlIiwiY29udGVudHMiLCJtaW1lVHlwZSIsImdldFJlc3BvbnNlSGVhZGVyIiwiY29udmVydGVycyIsImFqYXhDb252ZXJ0IiwicmVzcG9uc2UiLCJpc1N1Y2Nlc3MiLCJjb252MiIsImNvbnYiLCJyZXNwb25zZUZpZWxkcyIsImRhdGFGaWx0ZXIiLCJzdGF0ZSIsImJ1aWxkUGFyYW1zIiwidHJhZGl0aW9uYWwiLCJ2IiwicmJyYWNrZXQiLCJnZXRXaW5kb3ciLCJkZWZhdWx0VmlldyIsImFyciIsImNsYXNzMnR5cGUiLCJoYXNPd24iLCJ2ZXJzaW9uIiwicnRyaW0iLCJybXNQcmVmaXgiLCJyZGFzaEFscGhhIiwiZmNhbWVsQ2FzZSIsImxldHRlciIsImpxdWVyeSIsIm51bSIsInB1c2hTdGFjayIsInByZXZPYmplY3QiLCJjb3B5IiwiY29weUlzQXJyYXkiLCJpc1BsYWluT2JqZWN0IiwiaXNSZWFkeSIsIm1zZyIsImlzTnVtZXJpYyIsInJlYWxTdHJpbmdPYmoiLCJjb2RlIiwic2NyaXB0IiwiaW5kaXJlY3QiLCJldmFsIiwidHJpbSIsIm1ha2VBcnJheSIsInNlY29uZCIsImNhbGxiYWNrSW52ZXJzZSIsImNhbGxiYWNrRXhwZWN0IiwiYXJnIiwiU3ltYm9sIiwiU2l6emxlIiwic2VlZCIsIm5pZCIsIm5pZHNlbGVjdCIsImdyb3VwcyIsIm5ld1NlbGVjdG9yIiwibmV3Q29udGV4dCIsInByZWZlcnJlZERvYyIsInNldERvY3VtZW50IiwiZG9jdW1lbnRJc0hUTUwiLCJycXVpY2tFeHByIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicXNhIiwiY29tcGlsZXJDYWNoZSIsInJidWdneVFTQSIsInJlc2NhcGUiLCJzZXRBdHRyaWJ1dGUiLCJ0b2tlbml6ZSIsInJpZGVudGlmaWVyIiwidG9TZWxlY3RvciIsInJzaWJsaW5nIiwidGVzdENvbnRleHQiLCJxc2FFcnJvciIsImNyZWF0ZUNhY2hlIiwiRXhwciIsImNhY2hlTGVuZ3RoIiwibWFya0Z1bmN0aW9uIiwiYXNzZXJ0IiwiZGl2IiwiYWRkSGFuZGxlIiwiYXR0ckhhbmRsZSIsInNpYmxpbmdDaGVjayIsInNvdXJjZUluZGV4IiwiTUFYX05FR0FUSVZFIiwibmV4dFNpYmxpbmciLCJjcmVhdGVJbnB1dFBzZXVkbyIsImNyZWF0ZUJ1dHRvblBzZXVkbyIsImNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8iLCJtYXRjaEluZGV4ZXMiLCJzZXRGaWx0ZXJzIiwidG9rZW5zIiwiYWRkQ29tYmluYXRvciIsImNvbWJpbmF0b3IiLCJjaGVja05vbkVsZW1lbnRzIiwiZG9uZU5hbWUiLCJ4bWwiLCJvbGRDYWNoZSIsInVuaXF1ZUNhY2hlIiwib3V0ZXJDYWNoZSIsIm5ld0NhY2hlIiwiZGlycnVucyIsInVuaXF1ZUlEIiwiZWxlbWVudE1hdGNoZXIiLCJtYXRjaGVycyIsIm11bHRpcGxlQ29udGV4dHMiLCJjb250ZXh0cyIsImNvbmRlbnNlIiwidW5tYXRjaGVkIiwibmV3VW5tYXRjaGVkIiwibWFwcGVkIiwic2V0TWF0Y2hlciIsInByZUZpbHRlciIsInBvc3RGaWx0ZXIiLCJwb3N0RmluZGVyIiwicG9zdFNlbGVjdG9yIiwicHJlTWFwIiwicG9zdE1hcCIsInByZWV4aXN0aW5nIiwibWF0Y2hlckluIiwibWF0Y2hlck91dCIsIm1hdGNoZXJGcm9tVG9rZW5zIiwiY2hlY2tDb250ZXh0IiwibGVhZGluZ1JlbGF0aXZlIiwicmVsYXRpdmUiLCJpbXBsaWNpdFJlbGF0aXZlIiwibWF0Y2hDb250ZXh0IiwibWF0Y2hBbnlDb250ZXh0Iiwib3V0ZXJtb3N0Q29udGV4dCIsIm1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyIsImVsZW1lbnRNYXRjaGVycyIsInNldE1hdGNoZXJzIiwiYnlTZXQiLCJieUVsZW1lbnQiLCJzdXBlck1hdGNoZXIiLCJvdXRlcm1vc3QiLCJtYXRjaGVkQ291bnQiLCJzZXRNYXRjaGVkIiwiY29udGV4dEJhY2t1cCIsImRpcnJ1bnNVbmlxdWUiLCJ1bmlxdWVTb3J0IiwiZ2V0VGV4dCIsImlzWE1MIiwiY29tcGlsZSIsInNvcnRJbnB1dCIsImhhc0R1cGxpY2F0ZSIsImRvY0VsZW0iLCJyYnVnZ3lNYXRjaGVzIiwiY2xhc3NDYWNoZSIsInRva2VuQ2FjaGUiLCJzb3J0T3JkZXIiLCJwdXNoX25hdGl2ZSIsImJvb2xlYW5zIiwid2hpdGVzcGFjZSIsImlkZW50aWZpZXIiLCJwc2V1ZG9zIiwicndoaXRlc3BhY2UiLCJyY29tbWEiLCJyY29tYmluYXRvcnMiLCJyYXR0cmlidXRlUXVvdGVzIiwicnBzZXVkbyIsIm1hdGNoRXhwciIsIklEIiwiQ0xBU1MiLCJUQUciLCJBVFRSIiwiUFNFVURPIiwiQ0hJTEQiLCJib29sIiwibmVlZHNDb250ZXh0IiwicmlucHV0cyIsInJoZWFkZXIiLCJybmF0aXZlIiwicnVuZXNjYXBlIiwiZnVuZXNjYXBlIiwiZXNjYXBlZCIsImVzY2FwZWRXaGl0ZXNwYWNlIiwiZnJvbUNoYXJDb2RlIiwidW5sb2FkSGFuZGxlciIsImVscyIsImhhc0NvbXBhcmUiLCJ0b3AiLCJjcmVhdGVDb21tZW50IiwiZ2V0QnlJZCIsImdldEVsZW1lbnRzQnlOYW1lIiwiYXR0cklkIiwiZ2V0QXR0cmlidXRlTm9kZSIsIm1hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsIm1vek1hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsImRpc2Nvbm5lY3RlZE1hdGNoIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJhZG93biIsImJ1cCIsImNvbXBhcmUiLCJzb3J0RGV0YWNoZWQiLCJhdXAiLCJhcCIsImJwIiwiZXhwciIsInNwZWNpZmllZCIsImR1cGxpY2F0ZXMiLCJkZXRlY3REdXBsaWNhdGVzIiwic29ydFN0YWJsZSIsIm5vZGVWYWx1ZSIsInNlbGVjdG9ycyIsImNyZWF0ZVBzZXVkbyIsIiAiLCIrIiwifiIsImV4Y2VzcyIsInVucXVvdGVkIiwibm9kZU5hbWVTZWxlY3RvciIsInBhdHRlcm4iLCJvcGVyYXRvciIsImNoZWNrIiwid2hhdCIsInNpbXBsZSIsImZvcndhcmQiLCJvZlR5cGUiLCJub2RlSW5kZXgiLCJ1c2VDYWNoZSIsInBzZXVkbyIsIm1hdGNoZWQiLCJpbm5lclRleHQiLCJsYW5nIiwiZWxlbUxhbmciLCJmb2N1cyIsImhhc0ZvY3VzIiwiZW5hYmxlZCIsImRpc2FibGVkIiwic2VsZWN0ZWRJbmRleCIsImhlYWRlciIsImJ1dHRvbiIsImV2ZW4iLCJvZGQiLCJsdCIsImd0IiwicmFkaW8iLCJjaGVja2JveCIsImZpbGUiLCJwYXNzd29yZCIsImltYWdlIiwic3VibWl0IiwiZmlsdGVycyIsInBhcnNlT25seSIsInNvRmFyIiwicHJlRmlsdGVycyIsImNhY2hlZCIsInRva2VuIiwiY29tcGlsZWQiLCJkaXYxIiwiaXNYTUxEb2MiLCJ1bnRpbCIsInRydW5jYXRlIiwiaXMiLCJzaWJsaW5ncyIsInJuZWVkc0NvbnRleHQiLCJyc2luZ2xlVGFnIiwicm9vdGpRdWVyeSIsInBhcnNlSFRNTCIsInJwYXJlbnRzcHJldiIsImd1YXJhbnRlZWRVbmlxdWUiLCJjaGlsZHJlbiIsIm5leHQiLCJ0YXJnZXRzIiwiY2xvc2VzdCIsInBvcyIsInByZXZBbGwiLCJhZGRCYWNrIiwicGFyZW50cyIsInBhcmVudHNVbnRpbCIsIm5leHRBbGwiLCJuZXh0VW50aWwiLCJwcmV2VW50aWwiLCJyZXZlcnNlIiwiQ2FsbGJhY2tzIiwiZmlyaW5nIiwibWVtb3J5IiwiZmlyZWQiLCJsb2NrZWQiLCJmaXJpbmdJbmRleCIsInN0b3BPbkZhbHNlIiwiZGlzYWJsZSIsImxvY2siLCJmaXJlV2l0aCIsInR1cGxlcyIsInRoZW4iLCJmbnMiLCJuZXdEZWZlciIsInR1cGxlIiwicmV0dXJuZWQiLCJub3RpZnkiLCJyZXNvbHZlIiwicGlwZSIsInN0YXRlU3RyaW5nIiwid2hlbiIsInN1Ym9yZGluYXRlIiwicHJvZ3Jlc3NWYWx1ZXMiLCJwcm9ncmVzc0NvbnRleHRzIiwicmVzb2x2ZUNvbnRleHRzIiwicmVzb2x2ZVZhbHVlcyIsInVwZGF0ZUZ1bmMiLCJyZWFkeUxpc3QiLCJyZWFkeVdhaXQiLCJob2xkUmVhZHkiLCJob2xkIiwidHJpZ2dlckhhbmRsZXIiLCJyZWFkeVN0YXRlIiwiZG9TY3JvbGwiLCJjaGFpbmFibGUiLCJlbXB0eUdldCIsInJhdyIsImJ1bGsiLCJhY2NlcHREYXRhIiwib3duZXIiLCJyZWdpc3RlciIsImRlZmluZVByb3BlcnR5Iiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJzdG9yZWQiLCJjYW1lbCIsInJlbW92ZURhdGEiLCJfZGF0YSIsIl9yZW1vdmVEYXRhIiwiY2FtZWxLZXkiLCJkZXF1ZXVlIiwic3RhcnRMZW5ndGgiLCJzZXR0ZXIiLCJjbGVhclF1ZXVlIiwicG51bSIsIm9wdGlvbiIsInRoZWFkIiwiY29sIiwidHIiLCJ0ZCIsIm9wdGdyb3VwIiwidGJvZHkiLCJ0Zm9vdCIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRoIiwiY2xvbmVOb2RlIiwibm9DbG9uZUNoZWNrZWQiLCJya2V5RXZlbnQiLCJybW91c2VFdmVudCIsInJ0eXBlbmFtZXNwYWNlIiwiaGFuZGxlT2JqSW4iLCJldmVudEhhbmRsZSIsInQiLCJoYW5kbGVPYmoiLCJzcGVjaWFsIiwibmFtZXNwYWNlcyIsIm9yaWdUeXBlIiwiZWxlbURhdGEiLCJ0cmlnZ2VyZWQiLCJkaXNwYXRjaCIsImRlbGVnYXRlVHlwZSIsImJpbmRUeXBlIiwibmFtZXNwYWNlIiwiZGVsZWdhdGVDb3VudCIsInNldHVwIiwibWFwcGVkVHlwZXMiLCJvcmlnQ291bnQiLCJ0ZWFyZG93biIsInJlbW92ZUV2ZW50IiwiZml4IiwiaGFuZGxlclF1ZXVlIiwiZGVsZWdhdGVUYXJnZXQiLCJwcmVEaXNwYXRjaCIsImlzUHJvcGFnYXRpb25TdG9wcGVkIiwiY3VycmVudFRhcmdldCIsImlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkIiwicm5hbWVzcGFjZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicG9zdERpc3BhdGNoIiwic2VsIiwiZml4SG9va3MiLCJrZXlIb29rcyIsIm9yaWdpbmFsIiwiY2hhckNvZGUiLCJrZXlDb2RlIiwibW91c2VIb29rcyIsImV2ZW50RG9jIiwicGFnZVgiLCJjbGllbnRYIiwic2Nyb2xsTGVmdCIsImNsaWVudExlZnQiLCJwYWdlWSIsImNsaWVudFkiLCJzY3JvbGxUb3AiLCJjbGllbnRUb3AiLCJvcmlnaW5hbEV2ZW50IiwiZml4SG9vayIsIkV2ZW50IiwibG9hZCIsIm5vQnViYmxlIiwiYmx1ciIsImNsaWNrIiwiYmVmb3JldW5sb2FkIiwicmV0dXJuVmFsdWUiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJkZWZhdWx0UHJldmVudGVkIiwidGltZVN0YW1wIiwiaXNTaW11bGF0ZWQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsInBvaW50ZXJlbnRlciIsInBvaW50ZXJsZWF2ZSIsInJlbGF0ZWQiLCJyZWxhdGVkVGFyZ2V0IiwicnhodG1sVGFnIiwicm5vSW5uZXJodG1sIiwiZGF0YUFuZEV2ZW50cyIsImRlZXBEYXRhQW5kRXZlbnRzIiwic3JjRWxlbWVudHMiLCJkZXN0RWxlbWVudHMiLCJpblBhZ2UiLCJhcHBlbmQiLCJwcmVwZW5kIiwicmVwbGFjZVdpdGgiLCJyZXBsYWNlQ2hpbGQiLCJwcmVwZW5kVG8iLCJpbnNlcnRBZnRlciIsInJlcGxhY2VBbGwiLCJIVE1MIiwiQk9EWSIsInZpZXciLCJvcGVuZXIiLCJnZXRDb21wdXRlZFN0eWxlIiwic3dhcCIsImNvbXB1dGVTdHlsZVRlc3RzIiwiY3NzVGV4dCIsImNvbnRhaW5lciIsImRpdlN0eWxlIiwicGl4ZWxQb3NpdGlvblZhbCIsInJlbGlhYmxlTWFyZ2luTGVmdFZhbCIsIm1hcmdpbkxlZnQiLCJib3hTaXppbmdSZWxpYWJsZVZhbCIsIm1hcmdpblJpZ2h0IiwicGl4ZWxNYXJnaW5SaWdodFZhbCIsImJhY2tncm91bmRDbGlwIiwiY2xlYXJDbG9uZVN0eWxlIiwicGl4ZWxQb3NpdGlvbiIsInJlbGlhYmxlTWFyZ2luTGVmdCIsInJlbGlhYmxlTWFyZ2luUmlnaHQiLCJtYXJnaW5EaXYiLCJyZGlzcGxheXN3YXAiLCJjc3NTaG93IiwidmlzaWJpbGl0eSIsImNzc05vcm1hbFRyYW5zZm9ybSIsImxldHRlclNwYWNpbmciLCJmb250V2VpZ2h0IiwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiLCJjb2x1bW5Db3VudCIsImZpbGxPcGFjaXR5IiwiZmxleEdyb3ciLCJmbGV4U2hyaW5rIiwibGluZUhlaWdodCIsIm9yZGVyIiwib3JwaGFucyIsIndpZG93cyIsInpJbmRleCIsInpvb20iLCJjc3NQcm9wcyIsImZsb2F0Iiwib3JpZ05hbWUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJtYXJnaW4iLCJwYWRkaW5nIiwiYm9yZGVyIiwic3VmZml4IiwiZXhwYW5kZWQiLCJwYXJ0cyIsInByb3BIb29rcyIsImVhc2VkIiwibGluZWFyIiwic3dpbmciLCJjb3MiLCJQSSIsInRpbWVySWQiLCJycnVuIiwiKiIsInR3ZWVuZXIiLCJwcmVmaWx0ZXIiLCJzcGVlZCIsIm9wdCIsInNwZWVkcyIsImZhZGVUbyIsInRvIiwiYW5pbWF0ZSIsIm9wdGFsbCIsImRvQW5pbWF0aW9uIiwiZmluaXNoIiwic3RvcFF1ZXVlIiwidGltZXJzIiwiY3NzRm4iLCJzbGlkZURvd24iLCJzbGlkZVVwIiwic2xpZGVUb2dnbGUiLCJmYWRlSW4iLCJmYWRlT3V0IiwiZmFkZVRvZ2dsZSIsInNsb3ciLCJmYXN0IiwidGltZSIsImNoZWNrT24iLCJvcHRTZWxlY3RlZCIsIm9wdERpc2FibGVkIiwicmFkaW9WYWx1ZSIsImJvb2xIb29rIiwicmVtb3ZlQXR0ciIsIm5UeXBlIiwiYXR0ckhvb2tzIiwicHJvcE5hbWUiLCJhdHRyTmFtZXMiLCJwcm9wRml4IiwiZ2V0dGVyIiwicmZvY3VzYWJsZSIsInJjbGlja2FibGUiLCJyZW1vdmVQcm9wIiwidGFiaW5kZXgiLCJwYXJzZUludCIsImZvciIsImNsYXNzIiwicmNsYXNzIiwiYWRkQ2xhc3MiLCJjbGFzc2VzIiwiY3VyVmFsdWUiLCJjbGF6eiIsImZpbmFsVmFsdWUiLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUNsYXNzIiwic3RhdGVWYWwiLCJjbGFzc05hbWVzIiwiaGFzQ2xhc3MiLCJycmV0dXJuIiwicnNwYWNlcyIsInZhbEhvb2tzIiwib3B0aW9uU2V0IiwicmZvY3VzTW9ycGgiLCJvbmx5SGFuZGxlcnMiLCJidWJibGVUeXBlIiwib250eXBlIiwiZXZlbnRQYXRoIiwiaXNUcmlnZ2VyIiwicGFyZW50V2luZG93Iiwic2ltdWxhdGUiLCJob3ZlciIsImZuT3ZlciIsImZuT3V0IiwiZm9jdXNpbiIsImF0dGFjaGVzIiwibm9uY2UiLCJycXVlcnkiLCJwYXJzZVhNTCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInJoYXNoIiwicnRzIiwicmhlYWRlcnMiLCJybG9jYWxQcm90b2NvbCIsInJub0NvbnRlbnQiLCJycHJvdG9jb2wiLCJhbGxUeXBlcyIsIm9yaWdpbkFuY2hvciIsImFjdGl2ZSIsImxhc3RNb2RpZmllZCIsImV0YWciLCJpc0xvY2FsIiwicHJvdG9jb2wiLCJhc3luYyIsImFjY2VwdHMiLCJqc29uIiwiKiB0ZXh0IiwidGV4dCBodG1sIiwidGV4dCBqc29uIiwidGV4dCB4bWwiLCJhamF4U2V0dXAiLCJhamF4UHJlZmlsdGVyIiwiYWpheFRyYW5zcG9ydCIsInN0YXR1cyIsIm5hdGl2ZVN0YXR1c1RleHQiLCJoZWFkZXJzIiwibW9kaWZpZWQiLCJzdGF0dXNUZXh0IiwidGltZW91dFRpbWVyIiwidHJhbnNwb3J0IiwicmVzcG9uc2VIZWFkZXJzU3RyaW5nIiwiaWZNb2RpZmllZCIsImNhY2hlVVJMIiwiY2FsbGJhY2tDb250ZXh0Iiwic3RhdHVzQ29kZSIsImZpcmVHbG9iYWxzIiwiZ2xvYmFsRXZlbnRDb250ZXh0IiwiY29tcGxldGVEZWZlcnJlZCIsInJlc3BvbnNlSGVhZGVycyIsInVybEFuY2hvciIsInJlcXVlc3RIZWFkZXJzIiwicmVxdWVzdEhlYWRlcnNOYW1lcyIsInN0ckFib3J0IiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwibG5hbWUiLCJvdmVycmlkZU1pbWVUeXBlIiwiYWJvcnQiLCJmaW5hbFRleHQiLCJjcm9zc0RvbWFpbiIsImhvc3QiLCJoYXNDb250ZW50Iiwic2VuZCIsImdldEpTT04iLCJnZXRTY3JpcHQiLCJ0aHJvd3MiLCJ3cmFwQWxsIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJ3cmFwSW5uZXIiLCJ1bndyYXAiLCJ2aXNpYmxlIiwiZ2V0Q2xpZW50UmVjdHMiLCJyMjAiLCJyQ1JMRiIsInJzdWJtaXR0ZXJUeXBlcyIsInJzdWJtaXR0YWJsZSIsInNlcmlhbGl6ZSIsInNlcmlhbGl6ZUFycmF5IiwiWE1MSHR0cFJlcXVlc3QiLCJ4aHJTdWNjZXNzU3RhdHVzIiwiMCIsIjEyMjMiLCJ4aHJTdXBwb3J0ZWQiLCJjb3JzIiwiZXJyb3JDYWxsYmFjayIsInVzZXJuYW1lIiwieGhyRmllbGRzIiwib25sb2FkIiwib25lcnJvciIsIm9uYWJvcnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJiaW5hcnkiLCJ0ZXh0IHNjcmlwdCIsImNoYXJzZXQiLCJzY3JpcHRDaGFyc2V0IiwiZXZ0Iiwib2xkQ2FsbGJhY2tzIiwicmpzb25wIiwianNvbnAiLCJqc29ucENhbGxiYWNrIiwib3JpZ2luYWxTZXR0aW5ncyIsImNhbGxiYWNrTmFtZSIsIm92ZXJ3cml0dGVuIiwicmVzcG9uc2VDb250YWluZXIiLCJqc29uUHJvcCIsImtlZXBTY3JpcHRzIiwicGFyc2VkIiwiX2xvYWQiLCJhbmltYXRlZCIsInNldE9mZnNldCIsImN1clBvc2l0aW9uIiwiY3VyTGVmdCIsImN1ckNTU1RvcCIsImN1clRvcCIsImN1ck9mZnNldCIsImN1ckNTU0xlZnQiLCJjYWxjdWxhdGVQb3NpdGlvbiIsImN1ckVsZW0iLCJ1c2luZyIsIndpbiIsImJveCIsInBhZ2VZT2Zmc2V0IiwicGFnZVhPZmZzZXQiLCJvZmZzZXRQYXJlbnQiLCJwYXJlbnRPZmZzZXQiLCJzY3JvbGxUbyIsIkhlaWdodCIsIldpZHRoIiwiIiwiZGVmYXVsdEV4dHJhIiwiZnVuY05hbWUiLCJhbmRTZWxmIiwiX2pRdWVyeSIsIl8kIiwiX2NsYXNzQ2FsbENoZWNrIiwiQ29uc3RydWN0b3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiZW51bWVyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlc2NyaXB0b3IiLCJfdW5kZXJzY29yZSIsIl91bmRlcnNjb3JlMiIsIl9FbnRyeSIsIl9FbnRyeTIiLCJFbnRyaWVzIiwiX0JhY2tib25lJENvbGxlY3Rpb24iLCJlbnRyaWVzIiwiZ2V0UHJvdG90eXBlT2YiLCJ1bnZpZXdlZEVudHJpZXMiLCJ2aWV3ZWQiLCJFbnRyeSIsIl9CYWNrYm9uZSRNb2RlbCIsInVybEZyaWVuZGx5VGl0bGUiLCJjb252ZXJ0VG9TbHVnIiwicGFyc2VUaXRsZSIsInRpdGxlQ29udGFpbnNQYXJlbnRoZXNpcyIsIndyYXBUaXRsZVBhcmVudGhlc2lzSW5TcGFucyIsIl9qcXVlcnkiLCJfanF1ZXJ5MiIsIl9Mb2FkZXJWaWV3IiwiX0xvYWRlclZpZXcyIiwiX0VudHJpZXMiLCJfRW50cmllczIiLCJfRW50cmllc1ZpZXciLCJfRW50cmllc1ZpZXcyIiwiX0VudHJ5VmlldyIsIl9FbnRyeVZpZXcyIiwiX2dyZWVrSW5UZWNoIiwiQXBwUm91dGVyIiwiX0JhY2tib25lJFJvdXRlciIsIl90aGlzIiwiZW50cnkvOmlkKC86dGl0bGUpIiwiKmFjdGlvbnMiLCJpbml0aWFsRnJhZ21lbnQiLCIkZW50cnlFbCIsImxvYWRlciIsImVudHJpZXNWaWV3Iiwic2hvd0VudHJ5IiwibmF2aWdhdGVCYWNrd2FyZHMiLCJyYW5kb21FbnRyeUlEIiwiZ2V0VW52aWV3ZWRFbnRyeUlEIiwiZW50cnkiLCJzaG93UmFuZG9tRW50cnkiLCJlbnRyeVZpZXciLCJiYWNrIiwiX2hhbW1lcmpzIiwiX2hhbW1lcmpzMiIsIkVudHJpZXNWaWV3IiwiX0JhY2tib25lJFZpZXciLCJrZXlkb3duIiwibWMiLCJoYW5kbGVNb2JpbGVFdmVudCIsInVudmlld2VkRW50cnlJRCIsImJhY2tLZXlzIiwiZm9yd2FyZEtleXMiLCJzcGFjZSIsImlzRm9yd2FyZCIsInNoaWZ0S2V5IiwibW92ZVRvRW50cnkiLCJyZW5kZXJSYW5kb21FbnRyeSIsIl9lbnRyeSIsIl9lbnRyeTIiLCJFbnRyeVZpZXciLCJjbGljayAuc29jaWFsLWxpbmtzIGEiLCJDU1NhbmltYXRpb25DbGFzc2VzIiwiYW5pbWF0ZVZpZXciLCJMb2FkZXJWaWV3IiwiX3RoaXMyIiwiZ2V0RW50cnkiLCJfdW5pcXVlUmFuZG9tQXJyYXkiLCJfdW5pcXVlUmFuZG9tQXJyYXkyIiwiX2VudHJpZXMiLCJfZW50cmllczIiLCJleHBvcnROYW1lIiwic2V0VGltZW91dENvbnRleHQiLCJiaW5kRm4iLCJpbnZva2VBcnJheUFyZyIsImRlcHJlY2F0ZSIsIm1lc3NhZ2UiLCJkZXByZWNhdGlvbk1lc3NhZ2UiLCJzdGFjayIsImxvZyIsImNvbnNvbGUiLCJ3YXJuIiwiaW5oZXJpdCIsImNoaWxkUCIsImJhc2VQIiwiX3N1cGVyIiwiYm9vbE9yRm4iLCJUWVBFX0ZVTkNUSU9OIiwiaWZVbmRlZmluZWQiLCJ2YWwxIiwidmFsMiIsImFkZEV2ZW50TGlzdGVuZXJzIiwic3BsaXRTdHIiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsImhhc1BhcmVudCIsImluU3RyIiwic3RyIiwiZmluZEJ5S2V5IiwidW5pcXVlQXJyYXkiLCJwcmVmaXhlZCIsImNhbWVsUHJvcCIsIlZFTkRPUl9QUkVGSVhFUyIsIl91bmlxdWVJZCIsImdldFdpbmRvd0ZvckVsZW1lbnQiLCJJbnB1dCIsIm1hbmFnZXIiLCJpbnB1dFRhcmdldCIsImRvbUhhbmRsZXIiLCJlbmFibGUiLCJjcmVhdGVJbnB1dEluc3RhbmNlIiwiVHlwZSIsImlucHV0Q2xhc3MiLCJTVVBQT1JUX1BPSU5URVJfRVZFTlRTIiwiUG9pbnRlckV2ZW50SW5wdXQiLCJTVVBQT1JUX09OTFlfVE9VQ0giLCJUb3VjaElucHV0IiwiU1VQUE9SVF9UT1VDSCIsIlRvdWNoTW91c2VJbnB1dCIsIk1vdXNlSW5wdXQiLCJpbnB1dEhhbmRsZXIiLCJldmVudFR5cGUiLCJwb2ludGVyc0xlbiIsInBvaW50ZXJzIiwiY2hhbmdlZFBvaW50ZXJzTGVuIiwiY2hhbmdlZFBvaW50ZXJzIiwiaXNGaXJzdCIsIklOUFVUX1NUQVJUIiwiaXNGaW5hbCIsIklOUFVUX0VORCIsIklOUFVUX0NBTkNFTCIsInNlc3Npb24iLCJjb21wdXRlSW5wdXREYXRhIiwiZW1pdCIsInJlY29nbml6ZSIsInByZXZJbnB1dCIsInBvaW50ZXJzTGVuZ3RoIiwiZmlyc3RJbnB1dCIsInNpbXBsZUNsb25lSW5wdXREYXRhIiwiZmlyc3RNdWx0aXBsZSIsIm9mZnNldENlbnRlciIsImNlbnRlciIsImdldENlbnRlciIsImRlbHRhVGltZSIsImFuZ2xlIiwiZ2V0QW5nbGUiLCJkaXN0YW5jZSIsImdldERpc3RhbmNlIiwiY29tcHV0ZURlbHRhWFkiLCJvZmZzZXREaXJlY3Rpb24iLCJnZXREaXJlY3Rpb24iLCJkZWx0YVgiLCJkZWx0YVkiLCJvdmVyYWxsVmVsb2NpdHkiLCJnZXRWZWxvY2l0eSIsIm92ZXJhbGxWZWxvY2l0eVgiLCJ4Iiwib3ZlcmFsbFZlbG9jaXR5WSIsInkiLCJhYnMiLCJnZXRTY2FsZSIsInJvdGF0aW9uIiwiZ2V0Um90YXRpb24iLCJtYXhQb2ludGVycyIsImNvbXB1dGVJbnRlcnZhbElucHV0RGF0YSIsInNyY0V2ZW50Iiwib2Zmc2V0RGVsdGEiLCJwcmV2RGVsdGEiLCJ2ZWxvY2l0eSIsInZlbG9jaXR5WCIsInZlbG9jaXR5WSIsImRpcmVjdGlvbiIsImxhc3RJbnRlcnZhbCIsIkNPTVBVVEVfSU5URVJWQUwiLCJyb3VuZCIsIkRJUkVDVElPTl9OT05FIiwiRElSRUNUSU9OX0xFRlQiLCJESVJFQ1RJT05fUklHSFQiLCJESVJFQ1RJT05fVVAiLCJESVJFQ1RJT05fRE9XTiIsInAxIiwicDIiLCJQUk9QU19YWSIsInNxcnQiLCJhdGFuMiIsIlBST1BTX0NMSUVOVF9YWSIsImV2RWwiLCJNT1VTRV9FTEVNRU5UX0VWRU5UUyIsImV2V2luIiwiTU9VU0VfV0lORE9XX0VWRU5UUyIsInByZXNzZWQiLCJQT0lOVEVSX0VMRU1FTlRfRVZFTlRTIiwiUE9JTlRFUl9XSU5ET1dfRVZFTlRTIiwic3RvcmUiLCJwb2ludGVyRXZlbnRzIiwiU2luZ2xlVG91Y2hJbnB1dCIsImV2VGFyZ2V0IiwiU0lOR0xFX1RPVUNIX1RBUkdFVF9FVkVOVFMiLCJTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUyIsIm5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMiLCJ0b3VjaGVzIiwiY2hhbmdlZFRvdWNoZXMiLCJUT1VDSF9UQVJHRVRfRVZFTlRTIiwidGFyZ2V0SWRzIiwiZ2V0VG91Y2hlcyIsImFsbFRvdWNoZXMiLCJJTlBVVF9NT1ZFIiwidGFyZ2V0VG91Y2hlcyIsImNoYW5nZWRUYXJnZXRUb3VjaGVzIiwidG91Y2giLCJtb3VzZSIsInByaW1hcnlUb3VjaCIsImxhc3RUb3VjaGVzIiwicmVjb3JkVG91Y2hlcyIsImV2ZW50RGF0YSIsInNldExhc3RUb3VjaCIsImxhc3RUb3VjaCIsImx0cyIsInJlbW92ZUxhc3RUb3VjaCIsIkRFRFVQX1RJTUVPVVQiLCJpc1N5bnRoZXRpY0V2ZW50IiwiZHgiLCJkeSIsIkRFRFVQX0RJU1RBTkNFIiwiVG91Y2hBY3Rpb24iLCJjbGVhblRvdWNoQWN0aW9ucyIsImFjdGlvbnMiLCJUT1VDSF9BQ1RJT05fTk9ORSIsImhhc1BhblgiLCJUT1VDSF9BQ1RJT05fUEFOX1giLCJoYXNQYW5ZIiwiVE9VQ0hfQUNUSU9OX1BBTl9ZIiwiVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTiIsIlRPVUNIX0FDVElPTl9BVVRPIiwiZ2V0VG91Y2hBY3Rpb25Qcm9wcyIsIk5BVElWRV9UT1VDSF9BQ1RJT04iLCJ0b3VjaE1hcCIsImNzc1N1cHBvcnRzIiwiQ1NTIiwic3VwcG9ydHMiLCJSZWNvZ25pemVyIiwiU1RBVEVfUE9TU0lCTEUiLCJzaW11bHRhbmVvdXMiLCJyZXF1aXJlRmFpbCIsInN0YXRlU3RyIiwiU1RBVEVfQ0FOQ0VMTEVEIiwiU1RBVEVfRU5ERUQiLCJTVEFURV9DSEFOR0VEIiwiU1RBVEVfQkVHQU4iLCJkaXJlY3Rpb25TdHIiLCJnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyIiwib3RoZXJSZWNvZ25pemVyIiwicmVjb2duaXplciIsIkF0dHJSZWNvZ25pemVyIiwiUGFuUmVjb2duaXplciIsInBYIiwicFkiLCJQaW5jaFJlY29nbml6ZXIiLCJQcmVzc1JlY29nbml6ZXIiLCJfdGltZXIiLCJfaW5wdXQiLCJSb3RhdGVSZWNvZ25pemVyIiwiU3dpcGVSZWNvZ25pemVyIiwiVGFwUmVjb2duaXplciIsInBUaW1lIiwicENlbnRlciIsIkhhbW1lciIsInJlY29nbml6ZXJzIiwicHJlc2V0IiwiTWFuYWdlciIsIm9sZENzc1Byb3BzIiwidG91Y2hBY3Rpb24iLCJ0b2dnbGVDc3NQcm9wcyIsInJlY29nbml6ZVdpdGgiLCJyZXF1aXJlRmFpbHVyZSIsInRyaWdnZXJEb21FdmVudCIsImdlc3R1cmVFdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZ2VzdHVyZSIsImRpc3BhdGNoRXZlbnQiLCJURVNUX0VMRU1FTlQiLCJuZXh0S2V5IiwiTU9CSUxFX1JFR0VYIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiSU5QVVRfVFlQRV9UT1VDSCIsIklOUFVUX1RZUEVfUEVOIiwiSU5QVVRfVFlQRV9NT1VTRSIsIklOUFVUX1RZUEVfS0lORUNUIiwiRElSRUNUSU9OX0hPUklaT05UQUwiLCJESVJFQ1RJT05fVkVSVElDQUwiLCJESVJFQ1RJT05fQUxMIiwiTU9VU0VfSU5QVVRfTUFQIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2V1cCIsInBvaW50ZXJUeXBlIiwiUE9JTlRFUl9JTlBVVF9NQVAiLCJwb2ludGVyZG93biIsInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIiwicG9pbnRlcmNhbmNlbCIsInBvaW50ZXJvdXQiLCJJRTEwX1BPSU5URVJfVFlQRV9FTlVNIiwiMiIsIjMiLCI0IiwiNSIsIk1TUG9pbnRlckV2ZW50IiwiUG9pbnRlckV2ZW50IiwicmVtb3ZlUG9pbnRlciIsImV2ZW50VHlwZU5vcm1hbGl6ZWQiLCJpc1RvdWNoIiwic3RvcmVJbmRleCIsInBvaW50ZXJJZCIsIlNJTkdMRV9UT1VDSF9JTlBVVF9NQVAiLCJ0b3VjaHN0YXJ0IiwidG91Y2htb3ZlIiwidG91Y2hlbmQiLCJ0b3VjaGNhbmNlbCIsIlRPVUNIX0lOUFVUX01BUCIsImlucHV0RXZlbnQiLCJpbnB1dERhdGEiLCJpc01vdXNlIiwic291cmNlQ2FwYWJpbGl0aWVzIiwiZmlyZXNUb3VjaEV2ZW50cyIsIlBSRUZJWEVEX1RPVUNIX0FDVElPTiIsIlRPVUNIX0FDVElPTl9DT01QVVRFIiwiVE9VQ0hfQUNUSU9OX01BUCIsImNvbXB1dGUiLCJnZXRUb3VjaEFjdGlvbiIsInByZXZlbnREZWZhdWx0cyIsInByZXZlbnRlZCIsImhhc05vbmUiLCJpc1RhcFBvaW50ZXIiLCJpc1RhcE1vdmVtZW50IiwiaXNUYXBUb3VjaFRpbWUiLCJwcmV2ZW50U3JjIiwiU1RBVEVfUkVDT0dOSVpFRCIsIlNUQVRFX0ZBSUxFRCIsImRyb3BSZWNvZ25pemVXaXRoIiwiZHJvcFJlcXVpcmVGYWlsdXJlIiwiaGFzUmVxdWlyZUZhaWx1cmVzIiwiY2FuUmVjb2duaXplV2l0aCIsImFkZGl0aW9uYWxFdmVudCIsInRyeUVtaXQiLCJjYW5FbWl0IiwiaW5wdXREYXRhQ2xvbmUiLCJwcm9jZXNzIiwiYXR0clRlc3QiLCJvcHRpb25Qb2ludGVycyIsImlzUmVjb2duaXplZCIsInRocmVzaG9sZCIsImRpcmVjdGlvblRlc3QiLCJoYXNNb3ZlZCIsImluT3V0IiwidmFsaWRQb2ludGVycyIsInZhbGlkTW92ZW1lbnQiLCJ2YWxpZFRpbWUiLCJ0YXBzIiwicG9zVGhyZXNob2xkIiwidmFsaWRUb3VjaFRpbWUiLCJmYWlsVGltZW91dCIsInZhbGlkSW50ZXJ2YWwiLCJ2YWxpZE11bHRpVGFwIiwidGFwQ291bnQiLCJkb21FdmVudHMiLCJ1c2VyU2VsZWN0IiwidG91Y2hTZWxlY3QiLCJ0b3VjaENhbGxvdXQiLCJjb250ZW50Wm9vbWluZyIsInVzZXJEcmFnIiwidGFwSGlnaGxpZ2h0Q29sb3IiLCJTVE9QIiwiRk9SQ0VEX1NUT1AiLCJmb3JjZSIsImN1clJlY29nbml6ZXIiLCJUYXAiLCJQYW4iLCJTd2lwZSIsIlBpbmNoIiwiUm90YXRlIiwiUHJlc3MiLCJmcmVlR2xvYmFsIiwidW5pcXVlUmFuZG9tIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQXFDQSxPQVRBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFB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QSxtQkFBQTFqRCxLQUFBLG1CQUFBdlUsYUFDQWk0RCxJQUFBdEgsVUFHQS93RCxFQUFBLFdBQ0EsTUFBQSt3RCxLQUNLOXhELEtBQUFKLEVBQUFILEVBQUFHLEVBQUFDLEtBQUFrQixJQUFBUyxJQUFBM0IsRUFBQUQsUUFBQW1CLEtBT0oyVSxPQUFBNUMsU0FBQSxXYjhtYkssU0FBU2pULEVBQVFELEdjaHNnQnZCQyxFQUFBRCxRQUFBO0Vkc3NnQk0sU0FBU0MsRUFBUUQsR2V0c2dCdkJDLEVBQUFELFFBQUEsMHNDZjRzZ0JNLFNBQVNDLEVBQVFELEVBQVNILEdnQjVzZ0JoQyxZQUNBLElBQUE0NUQsR0FBQTU1RCxFQUFBLEdBRUFJLEdBQUFELFFBQUEsU0FBQTgyQixHQUNBLEdBQUF6WixHQUFBbzhDLEVBQUEsRUFBQTNpQyxFQUFBdjBCLE9BQUEsRUFFQSxtQkFDQSxNQUFBdTBCLEdBQUF6WixRaEJxdGdCTSxTQUFTcGQsRUFBUUQsR2lCNXRnQnZCLFlBQ0FDLEdBQUFELFFBQUEsU0FBQWlOLEVBQUFoRyxHQUNBLEdBQUEwQyxFQUNBLGdCQUFBMFQsS0FDQSxHQUFBbWEsR0FBQXh3QixLQUFBeVksTUFBQXpZLEtBQUF1VyxVQUFBdFcsRUFBQWdHLEVBQUEsR0FBQUEsRUFDQSxPQUFBdEQsR0FBQTZ0QixJQUFBN3RCLEdBQUFzRCxJQUFBaEcsRUFBQW9XLElBQUFtYSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJkaXN0L1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9iYWNrYm9uZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2JhY2tib25lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JhY2tib25lKTtcblx0XG5cdHZhciBfQXBwUm91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfQXBwUm91dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcFJvdXRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRcblx0bmV3IF9BcHBSb3V0ZXIyLmRlZmF1bHQoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcblx0X2JhY2tib25lMi5kZWZhdWx0Lmhpc3Rvcnkuc3RhcnQoKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7Ly8gICAgIEJhY2tib25lLmpzIDEuMy4zXG5cdFxuXHQvLyAgICAgKGMpIDIwMTAtMjAxNiBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQvLyAgICAgQmFja2JvbmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cdC8vICAgICBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG5cdC8vICAgICBodHRwOi8vYmFja2JvbmVqcy5vcmdcblx0XG5cdChmdW5jdGlvbihmYWN0b3J5KSB7XG5cdFxuXHQgIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIChgc2VsZmApIGluIHRoZSBicm93c2VyLCBvciBgZ2xvYmFsYCBvbiB0aGUgc2VydmVyLlxuXHQgIC8vIFdlIHVzZSBgc2VsZmAgaW5zdGVhZCBvZiBgd2luZG93YCBmb3IgYFdlYldvcmtlcmAgc3VwcG9ydC5cblx0ICB2YXIgcm9vdCA9ICh0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGYgJiYgc2VsZikgfHxcblx0ICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsICYmIGdsb2JhbCk7XG5cdFxuXHQgIC8vIFNldCB1cCBCYWNrYm9uZSBhcHByb3ByaWF0ZWx5IGZvciB0aGUgZW52aXJvbm1lbnQuIFN0YXJ0IHdpdGggQU1ELlxuXHQgIGlmICh0cnVlKSB7XG5cdCAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgX193ZWJwYWNrX3JlcXVpcmVfXygzKSwgZXhwb3J0c10sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oXywgJCwgZXhwb3J0cykge1xuXHQgICAgICAvLyBFeHBvcnQgZ2xvYmFsIGV2ZW4gaW4gQU1EIGNhc2UgaW4gY2FzZSB0aGlzIHNjcmlwdCBpcyBsb2FkZWQgd2l0aFxuXHQgICAgICAvLyBvdGhlcnMgdGhhdCBtYXkgc3RpbGwgZXhwZWN0IGEgZ2xvYmFsIEJhY2tib25lLlxuXHQgICAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcblx0ICAgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0XG5cdCAgLy8gTmV4dCBmb3IgTm9kZS5qcyBvciBDb21tb25KUy4galF1ZXJ5IG1heSBub3QgYmUgbmVlZGVkIGFzIGEgbW9kdWxlLlxuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICB2YXIgXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUnKSwgJDtcblx0ICAgIHRyeSB7ICQgPSByZXF1aXJlKCdqcXVlcnknKTsgfSBjYXRjaCAoZSkge31cblx0ICAgIGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXywgJCk7XG5cdFxuXHQgIC8vIEZpbmFsbHksIGFzIGEgYnJvd3NlciBnbG9iYWwuXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJvb3QuQmFja2JvbmUgPSBmYWN0b3J5KHJvb3QsIHt9LCByb290Ll8sIChyb290LmpRdWVyeSB8fCByb290LlplcHRvIHx8IHJvb3QuZW5kZXIgfHwgcm9vdC4kKSk7XG5cdCAgfVxuXHRcblx0fSkoZnVuY3Rpb24ocm9vdCwgQmFja2JvbmUsIF8sICQpIHtcblx0XG5cdCAgLy8gSW5pdGlhbCBTZXR1cFxuXHQgIC8vIC0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBCYWNrYm9uZWAgdmFyaWFibGUsIHNvIHRoYXQgaXQgY2FuIGJlXG5cdCAgLy8gcmVzdG9yZWQgbGF0ZXIgb24sIGlmIGBub0NvbmZsaWN0YCBpcyB1c2VkLlxuXHQgIHZhciBwcmV2aW91c0JhY2tib25lID0gcm9vdC5CYWNrYm9uZTtcblx0XG5cdCAgLy8gQ3JlYXRlIGEgbG9jYWwgcmVmZXJlbmNlIHRvIGEgY29tbW9uIGFycmF5IG1ldGhvZCB3ZSdsbCB3YW50IHRvIHVzZSBsYXRlci5cblx0ICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cdFxuXHQgIC8vIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgbGlicmFyeS4gS2VlcCBpbiBzeW5jIHdpdGggYHBhY2thZ2UuanNvbmAuXG5cdCAgQmFja2JvbmUuVkVSU0lPTiA9ICcxLjMuMyc7XG5cdFxuXHQgIC8vIEZvciBCYWNrYm9uZSdzIHB1cnBvc2VzLCBqUXVlcnksIFplcHRvLCBFbmRlciwgb3IgTXkgTGlicmFyeSAoa2lkZGluZykgb3duc1xuXHQgIC8vIHRoZSBgJGAgdmFyaWFibGUuXG5cdCAgQmFja2JvbmUuJCA9ICQ7XG5cdFxuXHQgIC8vIFJ1bnMgQmFja2JvbmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYEJhY2tib25lYCB2YXJpYWJsZVxuXHQgIC8vIHRvIGl0cyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGlzIEJhY2tib25lIG9iamVjdC5cblx0ICBCYWNrYm9uZS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICByb290LkJhY2tib25lID0gcHJldmlvdXNCYWNrYm9uZTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8vIFR1cm4gb24gYGVtdWxhdGVIVFRQYCB0byBzdXBwb3J0IGxlZ2FjeSBIVFRQIHNlcnZlcnMuIFNldHRpbmcgdGhpcyBvcHRpb25cblx0ICAvLyB3aWxsIGZha2UgYFwiUEFUQ0hcImAsIGBcIlBVVFwiYCBhbmQgYFwiREVMRVRFXCJgIHJlcXVlc3RzIHZpYSB0aGUgYF9tZXRob2RgIHBhcmFtZXRlciBhbmRcblx0ICAvLyBzZXQgYSBgWC1IdHRwLU1ldGhvZC1PdmVycmlkZWAgaGVhZGVyLlxuXHQgIEJhY2tib25lLmVtdWxhdGVIVFRQID0gZmFsc2U7XG5cdFxuXHQgIC8vIFR1cm4gb24gYGVtdWxhdGVKU09OYCB0byBzdXBwb3J0IGxlZ2FjeSBzZXJ2ZXJzIHRoYXQgY2FuJ3QgZGVhbCB3aXRoIGRpcmVjdFxuXHQgIC8vIGBhcHBsaWNhdGlvbi9qc29uYCByZXF1ZXN0cyAuLi4gdGhpcyB3aWxsIGVuY29kZSB0aGUgYm9keSBhc1xuXHQgIC8vIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgIGluc3RlYWQgYW5kIHdpbGwgc2VuZCB0aGUgbW9kZWwgaW4gYVxuXHQgIC8vIGZvcm0gcGFyYW0gbmFtZWQgYG1vZGVsYC5cblx0ICBCYWNrYm9uZS5lbXVsYXRlSlNPTiA9IGZhbHNlO1xuXHRcblx0ICAvLyBQcm94eSBCYWNrYm9uZSBjbGFzcyBtZXRob2RzIHRvIFVuZGVyc2NvcmUgZnVuY3Rpb25zLCB3cmFwcGluZyB0aGUgbW9kZWwnc1xuXHQgIC8vIGBhdHRyaWJ1dGVzYCBvYmplY3Qgb3IgY29sbGVjdGlvbidzIGBtb2RlbHNgIGFycmF5IGJlaGluZCB0aGUgc2NlbmVzLlxuXHQgIC8vXG5cdCAgLy8gY29sbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24obW9kZWwpIHsgcmV0dXJuIG1vZGVsLmdldCgnYWdlJykgPiAxMCB9KTtcblx0ICAvLyBjb2xsZWN0aW9uLmVhY2godGhpcy5hZGRWaWV3KTtcblx0ICAvL1xuXHQgIC8vIGBGdW5jdGlvbiNhcHBseWAgY2FuIGJlIHNsb3cgc28gd2UgdXNlIHRoZSBtZXRob2QncyBhcmcgY291bnQsIGlmIHdlIGtub3cgaXQuXG5cdCAgdmFyIGFkZE1ldGhvZCA9IGZ1bmN0aW9uKGxlbmd0aCwgbWV0aG9kLCBhdHRyaWJ1dGUpIHtcblx0ICAgIHN3aXRjaCAobGVuZ3RoKSB7XG5cdCAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdKTtcblx0ICAgICAgfTtcblx0ICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSwgdmFsdWUpO1xuXHQgICAgICB9O1xuXHQgICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCBjYihpdGVyYXRlZSwgdGhpcyksIGNvbnRleHQpO1xuXHQgICAgICB9O1xuXHQgICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihpdGVyYXRlZSwgZGVmYXVsdFZhbCwgY29udGV4dCkge1xuXHQgICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCBjYihpdGVyYXRlZSwgdGhpcyksIGRlZmF1bHRWYWwsIGNvbnRleHQpO1xuXHQgICAgICB9O1xuXHQgICAgICBkZWZhdWx0OiByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdCAgICAgICAgYXJncy51bnNoaWZ0KHRoaXNbYXR0cmlidXRlXSk7XG5cdCAgICAgICAgcmV0dXJuIF9bbWV0aG9kXS5hcHBseShfLCBhcmdzKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHZhciBhZGRVbmRlcnNjb3JlTWV0aG9kcyA9IGZ1bmN0aW9uKENsYXNzLCBtZXRob2RzLCBhdHRyaWJ1dGUpIHtcblx0ICAgIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbihsZW5ndGgsIG1ldGhvZCkge1xuXHQgICAgICBpZiAoX1ttZXRob2RdKSBDbGFzcy5wcm90b3R5cGVbbWV0aG9kXSA9IGFkZE1ldGhvZChsZW5ndGgsIG1ldGhvZCwgYXR0cmlidXRlKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIC8vIFN1cHBvcnQgYGNvbGxlY3Rpb24uc29ydEJ5KCdhdHRyJylgIGFuZCBgY29sbGVjdGlvbi5maW5kV2hlcmUoe2lkOiAxfSlgLlxuXHQgIHZhciBjYiA9IGZ1bmN0aW9uKGl0ZXJhdGVlLCBpbnN0YW5jZSkge1xuXHQgICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHJldHVybiBpdGVyYXRlZTtcblx0ICAgIGlmIChfLmlzT2JqZWN0KGl0ZXJhdGVlKSAmJiAhaW5zdGFuY2UuX2lzTW9kZWwoaXRlcmF0ZWUpKSByZXR1cm4gbW9kZWxNYXRjaGVyKGl0ZXJhdGVlKTtcblx0ICAgIGlmIChfLmlzU3RyaW5nKGl0ZXJhdGVlKSkgcmV0dXJuIGZ1bmN0aW9uKG1vZGVsKSB7IHJldHVybiBtb2RlbC5nZXQoaXRlcmF0ZWUpOyB9O1xuXHQgICAgcmV0dXJuIGl0ZXJhdGVlO1xuXHQgIH07XG5cdCAgdmFyIG1vZGVsTWF0Y2hlciA9IGZ1bmN0aW9uKGF0dHJzKSB7XG5cdCAgICB2YXIgbWF0Y2hlciA9IF8ubWF0Y2hlcyhhdHRycyk7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24obW9kZWwpIHtcblx0ICAgICAgcmV0dXJuIG1hdGNoZXIobW9kZWwuYXR0cmlidXRlcyk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIEJhY2tib25lLkV2ZW50c1xuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBBIG1vZHVsZSB0aGF0IGNhbiBiZSBtaXhlZCBpbiB0byAqYW55IG9iamVjdCogaW4gb3JkZXIgdG8gcHJvdmlkZSBpdCB3aXRoXG5cdCAgLy8gYSBjdXN0b20gZXZlbnQgY2hhbm5lbC4gWW91IG1heSBiaW5kIGEgY2FsbGJhY2sgdG8gYW4gZXZlbnQgd2l0aCBgb25gIG9yXG5cdCAgLy8gcmVtb3ZlIHdpdGggYG9mZmA7IGB0cmlnZ2VyYC1pbmcgYW4gZXZlbnQgZmlyZXMgYWxsIGNhbGxiYWNrcyBpblxuXHQgIC8vIHN1Y2Nlc3Npb24uXG5cdCAgLy9cblx0ICAvLyAgICAgdmFyIG9iamVjdCA9IHt9O1xuXHQgIC8vICAgICBfLmV4dGVuZChvYmplY3QsIEJhY2tib25lLkV2ZW50cyk7XG5cdCAgLy8gICAgIG9iamVjdC5vbignZXhwYW5kJywgZnVuY3Rpb24oKXsgYWxlcnQoJ2V4cGFuZGVkJyk7IH0pO1xuXHQgIC8vICAgICBvYmplY3QudHJpZ2dlcignZXhwYW5kJyk7XG5cdCAgLy9cblx0ICB2YXIgRXZlbnRzID0gQmFja2JvbmUuRXZlbnRzID0ge307XG5cdFxuXHQgIC8vIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHNwbGl0IGV2ZW50IHN0cmluZ3MuXG5cdCAgdmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG5cdFxuXHQgIC8vIEl0ZXJhdGVzIG92ZXIgdGhlIHN0YW5kYXJkIGBldmVudCwgY2FsbGJhY2tgIChhcyB3ZWxsIGFzIHRoZSBmYW5jeSBtdWx0aXBsZVxuXHQgIC8vIHNwYWNlLXNlcGFyYXRlZCBldmVudHMgYFwiY2hhbmdlIGJsdXJcIiwgY2FsbGJhY2tgIGFuZCBqUXVlcnktc3R5bGUgZXZlbnRcblx0ICAvLyBtYXBzIGB7ZXZlbnQ6IGNhbGxiYWNrfWApLlxuXHQgIHZhciBldmVudHNBcGkgPSBmdW5jdGlvbihpdGVyYXRlZSwgZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0cykge1xuXHQgICAgdmFyIGkgPSAwLCBuYW1lcztcblx0ICAgIGlmIChuYW1lICYmIHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAvLyBIYW5kbGUgZXZlbnQgbWFwcy5cblx0ICAgICAgaWYgKGNhbGxiYWNrICE9PSB2b2lkIDAgJiYgJ2NvbnRleHQnIGluIG9wdHMgJiYgb3B0cy5jb250ZXh0ID09PSB2b2lkIDApIG9wdHMuY29udGV4dCA9IGNhbGxiYWNrO1xuXHQgICAgICBmb3IgKG5hbWVzID0gXy5rZXlzKG5hbWUpOyBpIDwgbmFtZXMubGVuZ3RoIDsgaSsrKSB7XG5cdCAgICAgICAgZXZlbnRzID0gZXZlbnRzQXBpKGl0ZXJhdGVlLCBldmVudHMsIG5hbWVzW2ldLCBuYW1lW25hbWVzW2ldXSwgb3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAobmFtZSAmJiBldmVudFNwbGl0dGVyLnRlc3QobmFtZSkpIHtcblx0ICAgICAgLy8gSGFuZGxlIHNwYWNlLXNlcGFyYXRlZCBldmVudCBuYW1lcyBieSBkZWxlZ2F0aW5nIHRoZW0gaW5kaXZpZHVhbGx5LlxuXHQgICAgICBmb3IgKG5hbWVzID0gbmFtZS5zcGxpdChldmVudFNwbGl0dGVyKTsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZXZlbnRzID0gaXRlcmF0ZWUoZXZlbnRzLCBuYW1lc1tpXSwgY2FsbGJhY2ssIG9wdHMpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBGaW5hbGx5LCBzdGFuZGFyZCBldmVudHMuXG5cdCAgICAgIGV2ZW50cyA9IGl0ZXJhdGVlKGV2ZW50cywgbmFtZSwgY2FsbGJhY2ssIG9wdHMpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGV2ZW50cztcblx0ICB9O1xuXHRcblx0ICAvLyBCaW5kIGFuIGV2ZW50IHRvIGEgYGNhbGxiYWNrYCBmdW5jdGlvbi4gUGFzc2luZyBgXCJhbGxcImAgd2lsbCBiaW5kXG5cdCAgLy8gdGhlIGNhbGxiYWNrIHRvIGFsbCBldmVudHMgZmlyZWQuXG5cdCAgRXZlbnRzLm9uID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcblx0ICAgIHJldHVybiBpbnRlcm5hbE9uKHRoaXMsIG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KTtcblx0ICB9O1xuXHRcblx0ICAvLyBHdWFyZCB0aGUgYGxpc3RlbmluZ2AgYXJndW1lbnQgZnJvbSB0aGUgcHVibGljIEFQSS5cblx0ICB2YXIgaW50ZXJuYWxPbiA9IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2ssIGNvbnRleHQsIGxpc3RlbmluZykge1xuXHQgICAgb2JqLl9ldmVudHMgPSBldmVudHNBcGkob25BcGksIG9iai5fZXZlbnRzIHx8IHt9LCBuYW1lLCBjYWxsYmFjaywge1xuXHQgICAgICBjb250ZXh0OiBjb250ZXh0LFxuXHQgICAgICBjdHg6IG9iaixcblx0ICAgICAgbGlzdGVuaW5nOiBsaXN0ZW5pbmdcblx0ICAgIH0pO1xuXHRcblx0ICAgIGlmIChsaXN0ZW5pbmcpIHtcblx0ICAgICAgdmFyIGxpc3RlbmVycyA9IG9iai5fbGlzdGVuZXJzIHx8IChvYmouX2xpc3RlbmVycyA9IHt9KTtcblx0ICAgICAgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF0gPSBsaXN0ZW5pbmc7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG9iajtcblx0ICB9O1xuXHRcblx0ICAvLyBJbnZlcnNpb24tb2YtY29udHJvbCB2ZXJzaW9ucyBvZiBgb25gLiBUZWxsICp0aGlzKiBvYmplY3QgdG8gbGlzdGVuIHRvXG5cdCAgLy8gYW4gZXZlbnQgaW4gYW5vdGhlciBvYmplY3QuLi4ga2VlcGluZyB0cmFjayBvZiB3aGF0IGl0J3MgbGlzdGVuaW5nIHRvXG5cdCAgLy8gZm9yIGVhc2llciB1bmJpbmRpbmcgbGF0ZXIuXG5cdCAgRXZlbnRzLmxpc3RlblRvID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuXHQgICAgaWYgKCFvYmopIHJldHVybiB0aGlzO1xuXHQgICAgdmFyIGlkID0gb2JqLl9saXN0ZW5JZCB8fCAob2JqLl9saXN0ZW5JZCA9IF8udW5pcXVlSWQoJ2wnKSk7XG5cdCAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbyB8fCAodGhpcy5fbGlzdGVuaW5nVG8gPSB7fSk7XG5cdCAgICB2YXIgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRdO1xuXHRcblx0ICAgIC8vIFRoaXMgb2JqZWN0IGlzIG5vdCBsaXN0ZW5pbmcgdG8gYW55IG90aGVyIGV2ZW50cyBvbiBgb2JqYCB5ZXQuXG5cdCAgICAvLyBTZXR1cCB0aGUgbmVjZXNzYXJ5IHJlZmVyZW5jZXMgdG8gdHJhY2sgdGhlIGxpc3RlbmluZyBjYWxsYmFja3MuXG5cdCAgICBpZiAoIWxpc3RlbmluZykge1xuXHQgICAgICB2YXIgdGhpc0lkID0gdGhpcy5fbGlzdGVuSWQgfHwgKHRoaXMuX2xpc3RlbklkID0gXy51bmlxdWVJZCgnbCcpKTtcblx0ICAgICAgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRdID0ge29iajogb2JqLCBvYmpJZDogaWQsIGlkOiB0aGlzSWQsIGxpc3RlbmluZ1RvOiBsaXN0ZW5pbmdUbywgY291bnQ6IDB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEJpbmQgY2FsbGJhY2tzIG9uIG9iaiwgYW5kIGtlZXAgdHJhY2sgb2YgdGhlbSBvbiBsaXN0ZW5pbmcuXG5cdCAgICBpbnRlcm5hbE9uKG9iaiwgbmFtZSwgY2FsbGJhY2ssIHRoaXMsIGxpc3RlbmluZyk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvLyBUaGUgcmVkdWNpbmcgQVBJIHRoYXQgYWRkcyBhIGNhbGxiYWNrIHRvIHRoZSBgZXZlbnRzYCBvYmplY3QuXG5cdCAgdmFyIG9uQXBpID0gZnVuY3Rpb24oZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0aW9ucykge1xuXHQgICAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXSB8fCAoZXZlbnRzW25hbWVdID0gW10pO1xuXHQgICAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCwgY3R4ID0gb3B0aW9ucy5jdHgsIGxpc3RlbmluZyA9IG9wdGlvbnMubGlzdGVuaW5nO1xuXHQgICAgICBpZiAobGlzdGVuaW5nKSBsaXN0ZW5pbmcuY291bnQrKztcblx0XG5cdCAgICAgIGhhbmRsZXJzLnB1c2goe2NhbGxiYWNrOiBjYWxsYmFjaywgY29udGV4dDogY29udGV4dCwgY3R4OiBjb250ZXh0IHx8IGN0eCwgbGlzdGVuaW5nOiBsaXN0ZW5pbmd9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBldmVudHM7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmVtb3ZlIG9uZSBvciBtYW55IGNhbGxiYWNrcy4gSWYgYGNvbnRleHRgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG5cdCAgLy8gY2FsbGJhY2tzIHdpdGggdGhhdCBmdW5jdGlvbi4gSWYgYGNhbGxiYWNrYCBpcyBudWxsLCByZW1vdmVzIGFsbFxuXHQgIC8vIGNhbGxiYWNrcyBmb3IgdGhlIGV2ZW50LiBJZiBgbmFtZWAgaXMgbnVsbCwgcmVtb3ZlcyBhbGwgYm91bmRcblx0ICAvLyBjYWxsYmFja3MgZm9yIGFsbCBldmVudHMuXG5cdCAgRXZlbnRzLm9mZiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG5cdCAgICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7XG5cdCAgICB0aGlzLl9ldmVudHMgPSBldmVudHNBcGkob2ZmQXBpLCB0aGlzLl9ldmVudHMsIG5hbWUsIGNhbGxiYWNrLCB7XG5cdCAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG5cdCAgICAgIGxpc3RlbmVyczogdGhpcy5fbGlzdGVuZXJzXG5cdCAgICB9KTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8vIFRlbGwgdGhpcyBvYmplY3QgdG8gc3RvcCBsaXN0ZW5pbmcgdG8gZWl0aGVyIHNwZWNpZmljIGV2ZW50cyAuLi4gb3Jcblx0ICAvLyB0byBldmVyeSBvYmplY3QgaXQncyBjdXJyZW50bHkgbGlzdGVuaW5nIHRvLlxuXHQgIEV2ZW50cy5zdG9wTGlzdGVuaW5nID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIGxpc3RlbmluZ1RvID0gdGhpcy5fbGlzdGVuaW5nVG87XG5cdCAgICBpZiAoIWxpc3RlbmluZ1RvKSByZXR1cm4gdGhpcztcblx0XG5cdCAgICB2YXIgaWRzID0gb2JqID8gW29iai5fbGlzdGVuSWRdIDogXy5rZXlzKGxpc3RlbmluZ1RvKTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRzW2ldXTtcblx0XG5cdCAgICAgIC8vIElmIGxpc3RlbmluZyBkb2Vzbid0IGV4aXN0LCB0aGlzIG9iamVjdCBpcyBub3QgY3VycmVudGx5XG5cdCAgICAgIC8vIGxpc3RlbmluZyB0byBvYmouIEJyZWFrIG91dCBlYXJseS5cblx0ICAgICAgaWYgKCFsaXN0ZW5pbmcpIGJyZWFrO1xuXHRcblx0ICAgICAgbGlzdGVuaW5nLm9iai5vZmYobmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8vIFRoZSByZWR1Y2luZyBBUEkgdGhhdCByZW1vdmVzIGEgY2FsbGJhY2sgZnJvbSB0aGUgYGV2ZW50c2Agb2JqZWN0LlxuXHQgIHZhciBvZmZBcGkgPSBmdW5jdGlvbihldmVudHMsIG5hbWUsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG5cdCAgICBpZiAoIWV2ZW50cykgcmV0dXJuO1xuXHRcblx0ICAgIHZhciBpID0gMCwgbGlzdGVuaW5nO1xuXHQgICAgdmFyIGNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQsIGxpc3RlbmVycyA9IG9wdGlvbnMubGlzdGVuZXJzO1xuXHRcblx0ICAgIC8vIERlbGV0ZSBhbGwgZXZlbnRzIGxpc3RlbmVycyBhbmQgXCJkcm9wXCIgZXZlbnRzLlxuXHQgICAgaWYgKCFuYW1lICYmICFjYWxsYmFjayAmJiAhY29udGV4dCkge1xuXHQgICAgICB2YXIgaWRzID0gXy5rZXlzKGxpc3RlbmVycyk7XG5cdCAgICAgIGZvciAoOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgbGlzdGVuaW5nID0gbGlzdGVuZXJzW2lkc1tpXV07XG5cdCAgICAgICAgZGVsZXRlIGxpc3RlbmVyc1tsaXN0ZW5pbmcuaWRdO1xuXHQgICAgICAgIGRlbGV0ZSBsaXN0ZW5pbmcubGlzdGVuaW5nVG9bbGlzdGVuaW5nLm9iaklkXTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5hbWVzID0gbmFtZSA/IFtuYW1lXSA6IF8ua2V5cyhldmVudHMpO1xuXHQgICAgZm9yICg7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBuYW1lID0gbmFtZXNbaV07XG5cdCAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcblx0XG5cdCAgICAgIC8vIEJhaWwgb3V0IGlmIHRoZXJlIGFyZSBubyBldmVudHMgc3RvcmVkLlxuXHQgICAgICBpZiAoIWhhbmRsZXJzKSBicmVhaztcblx0XG5cdCAgICAgIC8vIFJlcGxhY2UgZXZlbnRzIGlmIHRoZXJlIGFyZSBhbnkgcmVtYWluaW5nLiAgT3RoZXJ3aXNlLCBjbGVhbiB1cC5cblx0ICAgICAgdmFyIHJlbWFpbmluZyA9IFtdO1xuXHQgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSBoYW5kbGVyc1tqXTtcblx0ICAgICAgICBpZiAoXG5cdCAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayAhPT0gaGFuZGxlci5jYWxsYmFjayAmJlxuXHQgICAgICAgICAgICBjYWxsYmFjayAhPT0gaGFuZGxlci5jYWxsYmFjay5fY2FsbGJhY2sgfHxcblx0ICAgICAgICAgICAgICBjb250ZXh0ICYmIGNvbnRleHQgIT09IGhhbmRsZXIuY29udGV4dFxuXHQgICAgICAgICkge1xuXHQgICAgICAgICAgcmVtYWluaW5nLnB1c2goaGFuZGxlcik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGxpc3RlbmluZyA9IGhhbmRsZXIubGlzdGVuaW5nO1xuXHQgICAgICAgICAgaWYgKGxpc3RlbmluZyAmJiAtLWxpc3RlbmluZy5jb3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICBkZWxldGUgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF07XG5cdCAgICAgICAgICAgIGRlbGV0ZSBsaXN0ZW5pbmcubGlzdGVuaW5nVG9bbGlzdGVuaW5nLm9iaklkXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFVwZGF0ZSB0YWlsIGV2ZW50IGlmIHRoZSBsaXN0IGhhcyBhbnkgZXZlbnRzLiAgT3RoZXJ3aXNlLCBjbGVhbiB1cC5cblx0ICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGgpIHtcblx0ICAgICAgICBldmVudHNbbmFtZV0gPSByZW1haW5pbmc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGVsZXRlIGV2ZW50c1tuYW1lXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGV2ZW50cztcblx0ICB9O1xuXHRcblx0ICAvLyBCaW5kIGFuIGV2ZW50IHRvIG9ubHkgYmUgdHJpZ2dlcmVkIGEgc2luZ2xlIHRpbWUuIEFmdGVyIHRoZSBmaXJzdCB0aW1lXG5cdCAgLy8gdGhlIGNhbGxiYWNrIGlzIGludm9rZWQsIGl0cyBsaXN0ZW5lciB3aWxsIGJlIHJlbW92ZWQuIElmIG11bHRpcGxlIGV2ZW50c1xuXHQgIC8vIGFyZSBwYXNzZWQgaW4gdXNpbmcgdGhlIHNwYWNlLXNlcGFyYXRlZCBzeW50YXgsIHRoZSBoYW5kbGVyIHdpbGwgZmlyZVxuXHQgIC8vIG9uY2UgZm9yIGVhY2ggZXZlbnQsIG5vdCBvbmNlIGZvciBhIGNvbWJpbmF0aW9uIG9mIGFsbCBldmVudHMuXG5cdCAgRXZlbnRzLm9uY2UgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuXHQgICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cblx0ICAgIHZhciBldmVudHMgPSBldmVudHNBcGkob25jZU1hcCwge30sIG5hbWUsIGNhbGxiYWNrLCBfLmJpbmQodGhpcy5vZmYsIHRoaXMpKTtcblx0ICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgJiYgY29udGV4dCA9PSBudWxsKSBjYWxsYmFjayA9IHZvaWQgMDtcblx0ICAgIHJldHVybiB0aGlzLm9uKGV2ZW50cywgY2FsbGJhY2ssIGNvbnRleHQpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEludmVyc2lvbi1vZi1jb250cm9sIHZlcnNpb25zIG9mIGBvbmNlYC5cblx0ICBFdmVudHMubGlzdGVuVG9PbmNlID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuXHQgICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cblx0ICAgIHZhciBldmVudHMgPSBldmVudHNBcGkob25jZU1hcCwge30sIG5hbWUsIGNhbGxiYWNrLCBfLmJpbmQodGhpcy5zdG9wTGlzdGVuaW5nLCB0aGlzLCBvYmopKTtcblx0ICAgIHJldHVybiB0aGlzLmxpc3RlblRvKG9iaiwgZXZlbnRzKTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZWR1Y2VzIHRoZSBldmVudCBjYWxsYmFja3MgaW50byBhIG1hcCBvZiBge2V2ZW50OiBvbmNlV3JhcHBlcn1gLlxuXHQgIC8vIGBvZmZlcmAgdW5iaW5kcyB0aGUgYG9uY2VXcmFwcGVyYCBhZnRlciBpdCBoYXMgYmVlbiBjYWxsZWQuXG5cdCAgdmFyIG9uY2VNYXAgPSBmdW5jdGlvbihtYXAsIG5hbWUsIGNhbGxiYWNrLCBvZmZlcikge1xuXHQgICAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBvbmNlID0gbWFwW25hbWVdID0gXy5vbmNlKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIG9mZmVyKG5hbWUsIG9uY2UpO1xuXHQgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBvbmNlLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG1hcDtcblx0ICB9O1xuXHRcblx0ICAvLyBUcmlnZ2VyIG9uZSBvciBtYW55IGV2ZW50cywgZmlyaW5nIGFsbCBib3VuZCBjYWxsYmFja3MuIENhbGxiYWNrcyBhcmVcblx0ICAvLyBwYXNzZWQgdGhlIHNhbWUgYXJndW1lbnRzIGFzIGB0cmlnZ2VyYCBpcywgYXBhcnQgZnJvbSB0aGUgZXZlbnQgbmFtZVxuXHQgIC8vICh1bmxlc3MgeW91J3JlIGxpc3RlbmluZyBvbiBgXCJhbGxcImAsIHdoaWNoIHdpbGwgY2F1c2UgeW91ciBjYWxsYmFjayB0b1xuXHQgIC8vIHJlY2VpdmUgdGhlIHRydWUgbmFtZSBvZiB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50KS5cblx0ICBFdmVudHMudHJpZ2dlciA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcblx0XG5cdCAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgoMCwgYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG5cdFxuXHQgICAgZXZlbnRzQXBpKHRyaWdnZXJBcGksIHRoaXMuX2V2ZW50cywgbmFtZSwgdm9pZCAwLCBhcmdzKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8vIEhhbmRsZXMgdHJpZ2dlcmluZyB0aGUgYXBwcm9wcmlhdGUgZXZlbnQgY2FsbGJhY2tzLlxuXHQgIHZhciB0cmlnZ2VyQXBpID0gZnVuY3Rpb24ob2JqRXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgYXJncykge1xuXHQgICAgaWYgKG9iakV2ZW50cykge1xuXHQgICAgICB2YXIgZXZlbnRzID0gb2JqRXZlbnRzW25hbWVdO1xuXHQgICAgICB2YXIgYWxsRXZlbnRzID0gb2JqRXZlbnRzLmFsbDtcblx0ICAgICAgaWYgKGV2ZW50cyAmJiBhbGxFdmVudHMpIGFsbEV2ZW50cyA9IGFsbEV2ZW50cy5zbGljZSgpO1xuXHQgICAgICBpZiAoZXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGV2ZW50cywgYXJncyk7XG5cdCAgICAgIGlmIChhbGxFdmVudHMpIHRyaWdnZXJFdmVudHMoYWxsRXZlbnRzLCBbbmFtZV0uY29uY2F0KGFyZ3MpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvYmpFdmVudHM7XG5cdCAgfTtcblx0XG5cdCAgLy8gQSBkaWZmaWN1bHQtdG8tYmVsaWV2ZSwgYnV0IG9wdGltaXplZCBpbnRlcm5hbCBkaXNwYXRjaCBmdW5jdGlvbiBmb3Jcblx0ICAvLyB0cmlnZ2VyaW5nIGV2ZW50cy4gVHJpZXMgdG8ga2VlcCB0aGUgdXN1YWwgY2FzZXMgc3BlZWR5IChtb3N0IGludGVybmFsXG5cdCAgLy8gQmFja2JvbmUgZXZlbnRzIGhhdmUgMyBhcmd1bWVudHMpLlxuXHQgIHZhciB0cmlnZ2VyRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRzLCBhcmdzKSB7XG5cdCAgICB2YXIgZXYsIGkgPSAtMSwgbCA9IGV2ZW50cy5sZW5ndGgsIGExID0gYXJnc1swXSwgYTIgPSBhcmdzWzFdLCBhMyA9IGFyZ3NbMl07XG5cdCAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cdCAgICAgIGNhc2UgMDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgpOyByZXR1cm47XG5cdCAgICAgIGNhc2UgMTogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExKTsgcmV0dXJuO1xuXHQgICAgICBjYXNlIDI6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSwgYTIpOyByZXR1cm47XG5cdCAgICAgIGNhc2UgMzogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMiwgYTMpOyByZXR1cm47XG5cdCAgICAgIGRlZmF1bHQ6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmFwcGx5KGV2LmN0eCwgYXJncyk7IHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvLyBBbGlhc2VzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cblx0ICBFdmVudHMuYmluZCAgID0gRXZlbnRzLm9uO1xuXHQgIEV2ZW50cy51bmJpbmQgPSBFdmVudHMub2ZmO1xuXHRcblx0ICAvLyBBbGxvdyB0aGUgYEJhY2tib25lYCBvYmplY3QgdG8gc2VydmUgYXMgYSBnbG9iYWwgZXZlbnQgYnVzLCBmb3IgZm9sa3Mgd2hvXG5cdCAgLy8gd2FudCBnbG9iYWwgXCJwdWJzdWJcIiBpbiBhIGNvbnZlbmllbnQgcGxhY2UuXG5cdCAgXy5leHRlbmQoQmFja2JvbmUsIEV2ZW50cyk7XG5cdFxuXHQgIC8vIEJhY2tib25lLk1vZGVsXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gQmFja2JvbmUgKipNb2RlbHMqKiBhcmUgdGhlIGJhc2ljIGRhdGEgb2JqZWN0IGluIHRoZSBmcmFtZXdvcmsgLS1cblx0ICAvLyBmcmVxdWVudGx5IHJlcHJlc2VudGluZyBhIHJvdyBpbiBhIHRhYmxlIGluIGEgZGF0YWJhc2Ugb24geW91ciBzZXJ2ZXIuXG5cdCAgLy8gQSBkaXNjcmV0ZSBjaHVuayBvZiBkYXRhIGFuZCBhIGJ1bmNoIG9mIHVzZWZ1bCwgcmVsYXRlZCBtZXRob2RzIGZvclxuXHQgIC8vIHBlcmZvcm1pbmcgY29tcHV0YXRpb25zIGFuZCB0cmFuc2Zvcm1hdGlvbnMgb24gdGhhdCBkYXRhLlxuXHRcblx0ICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMuIEEgY2xpZW50IGlkIChgY2lkYClcblx0ICAvLyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBhbmQgYXNzaWduZWQgZm9yIHlvdS5cblx0ICB2YXIgTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbCA9IGZ1bmN0aW9uKGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHtcblx0ICAgIHZhciBhdHRycyA9IGF0dHJpYnV0ZXMgfHwge307XG5cdCAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXHQgICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKHRoaXMuY2lkUHJlZml4KTtcblx0ICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9O1xuXHQgICAgaWYgKG9wdGlvbnMuY29sbGVjdGlvbikgdGhpcy5jb2xsZWN0aW9uID0gb3B0aW9ucy5jb2xsZWN0aW9uO1xuXHQgICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gdGhpcy5wYXJzZShhdHRycywgb3B0aW9ucykgfHwge307XG5cdCAgICB2YXIgZGVmYXVsdHMgPSBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKTtcblx0ICAgIGF0dHJzID0gXy5kZWZhdWx0cyhfLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGF0dHJzKSwgZGVmYXVsdHMpO1xuXHQgICAgdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuXHQgICAgdGhpcy5jaGFuZ2VkID0ge307XG5cdCAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICB9O1xuXHRcblx0ICAvLyBBdHRhY2ggYWxsIGluaGVyaXRhYmxlIG1ldGhvZHMgdG8gdGhlIE1vZGVsIHByb3RvdHlwZS5cblx0ICBfLmV4dGVuZChNb2RlbC5wcm90b3R5cGUsIEV2ZW50cywge1xuXHRcblx0ICAgIC8vIEEgaGFzaCBvZiBhdHRyaWJ1dGVzIHdob3NlIGN1cnJlbnQgYW5kIHByZXZpb3VzIHZhbHVlIGRpZmZlci5cblx0ICAgIGNoYW5nZWQ6IG51bGwsXG5cdFxuXHQgICAgLy8gVGhlIHZhbHVlIHJldHVybmVkIGR1cmluZyB0aGUgbGFzdCBmYWlsZWQgdmFsaWRhdGlvbi5cblx0ICAgIHZhbGlkYXRpb25FcnJvcjogbnVsbCxcblx0XG5cdCAgICAvLyBUaGUgZGVmYXVsdCBuYW1lIGZvciB0aGUgSlNPTiBgaWRgIGF0dHJpYnV0ZSBpcyBgXCJpZFwiYC4gTW9uZ29EQiBhbmRcblx0ICAgIC8vIENvdWNoREIgdXNlcnMgbWF5IHdhbnQgdG8gc2V0IHRoaXMgdG8gYFwiX2lkXCJgLlxuXHQgICAgaWRBdHRyaWJ1dGU6ICdpZCcsXG5cdFxuXHQgICAgLy8gVGhlIHByZWZpeCBpcyB1c2VkIHRvIGNyZWF0ZSB0aGUgY2xpZW50IGlkIHdoaWNoIGlzIHVzZWQgdG8gaWRlbnRpZnkgbW9kZWxzIGxvY2FsbHkuXG5cdCAgICAvLyBZb3UgbWF5IHdhbnQgdG8gb3ZlcnJpZGUgdGhpcyBpZiB5b3UncmUgZXhwZXJpZW5jaW5nIG5hbWUgY2xhc2hlcyB3aXRoIG1vZGVsIGlkcy5cblx0ICAgIGNpZFByZWZpeDogJ2MnLFxuXHRcblx0ICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuXHQgICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG5cdCAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cdFxuXHQgICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgbW9kZWwncyBgYXR0cmlidXRlc2Agb2JqZWN0LlxuXHQgICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0IC0tIGJ1dCBvdmVycmlkZSB0aGlzIGlmIHlvdSBuZWVkXG5cdCAgICAvLyBjdXN0b20gc3luY2luZyBzZW1hbnRpY3MgZm9yICp0aGlzKiBwYXJ0aWN1bGFyIG1vZGVsLlxuXHQgICAgc3luYzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBCYWNrYm9uZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEdldCB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuXHQgICAgZ2V0OiBmdW5jdGlvbihhdHRyKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbYXR0cl07XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEdldCB0aGUgSFRNTC1lc2NhcGVkIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZS5cblx0ICAgIGVzY2FwZTogZnVuY3Rpb24oYXR0cikge1xuXHQgICAgICByZXR1cm4gXy5lc2NhcGUodGhpcy5nZXQoYXR0cikpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRlIGNvbnRhaW5zIGEgdmFsdWUgdGhhdCBpcyBub3QgbnVsbFxuXHQgICAgLy8gb3IgdW5kZWZpbmVkLlxuXHQgICAgaGFzOiBmdW5jdGlvbihhdHRyKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmdldChhdHRyKSAhPSBudWxsO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBTcGVjaWFsLWNhc2VkIHByb3h5IHRvIHVuZGVyc2NvcmUncyBgXy5tYXRjaGVzYCBtZXRob2QuXG5cdCAgICBtYXRjaGVzOiBmdW5jdGlvbihhdHRycykge1xuXHQgICAgICByZXR1cm4gISFfLml0ZXJhdGVlKGF0dHJzLCB0aGlzKSh0aGlzLmF0dHJpYnV0ZXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMgb24gdGhlIG9iamVjdCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gVGhpcyBpc1xuXHQgICAgLy8gdGhlIGNvcmUgcHJpbWl0aXZlIG9wZXJhdGlvbiBvZiBhIG1vZGVsLCB1cGRhdGluZyB0aGUgZGF0YSBhbmQgbm90aWZ5aW5nXG5cdCAgICAvLyBhbnlvbmUgd2hvIG5lZWRzIHRvIGtub3cgYWJvdXQgdGhlIGNoYW5nZSBpbiBzdGF0ZS4gVGhlIGhlYXJ0IG9mIHRoZSBiZWFzdC5cblx0ICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcblx0ICAgICAgaWYgKGtleSA9PSBudWxsKSByZXR1cm4gdGhpcztcblx0XG5cdCAgICAgIC8vIEhhbmRsZSBib3RoIGBcImtleVwiLCB2YWx1ZWAgYW5kIGB7a2V5OiB2YWx1ZX1gIC1zdHlsZSBhcmd1bWVudHMuXG5cdCAgICAgIHZhciBhdHRycztcblx0ICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgYXR0cnMgPSBrZXk7XG5cdCAgICAgICAgb3B0aW9ucyA9IHZhbDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAoYXR0cnMgPSB7fSlba2V5XSA9IHZhbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblx0XG5cdCAgICAgIC8vIFJ1biB2YWxpZGF0aW9uLlxuXHQgICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuXHRcblx0ICAgICAgLy8gRXh0cmFjdCBhdHRyaWJ1dGVzIGFuZCBvcHRpb25zLlxuXHQgICAgICB2YXIgdW5zZXQgICAgICA9IG9wdGlvbnMudW5zZXQ7XG5cdCAgICAgIHZhciBzaWxlbnQgICAgID0gb3B0aW9ucy5zaWxlbnQ7XG5cdCAgICAgIHZhciBjaGFuZ2VzICAgID0gW107XG5cdCAgICAgIHZhciBjaGFuZ2luZyAgID0gdGhpcy5fY2hhbmdpbmc7XG5cdCAgICAgIHRoaXMuX2NoYW5naW5nID0gdHJ1ZTtcblx0XG5cdCAgICAgIGlmICghY2hhbmdpbmcpIHtcblx0ICAgICAgICB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgPSBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG5cdCAgICAgICAgdGhpcy5jaGFuZ2VkID0ge307XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5hdHRyaWJ1dGVzO1xuXHQgICAgICB2YXIgY2hhbmdlZCA9IHRoaXMuY2hhbmdlZDtcblx0ICAgICAgdmFyIHByZXYgICAgPSB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7XG5cdFxuXHQgICAgICAvLyBGb3IgZWFjaCBgc2V0YCBhdHRyaWJ1dGUsIHVwZGF0ZSBvciBkZWxldGUgdGhlIGN1cnJlbnQgdmFsdWUuXG5cdCAgICAgIGZvciAodmFyIGF0dHIgaW4gYXR0cnMpIHtcblx0ICAgICAgICB2YWwgPSBhdHRyc1thdHRyXTtcblx0ICAgICAgICBpZiAoIV8uaXNFcXVhbChjdXJyZW50W2F0dHJdLCB2YWwpKSBjaGFuZ2VzLnB1c2goYXR0cik7XG5cdCAgICAgICAgaWYgKCFfLmlzRXF1YWwocHJldlthdHRyXSwgdmFsKSkge1xuXHQgICAgICAgICAgY2hhbmdlZFthdHRyXSA9IHZhbDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZGVsZXRlIGNoYW5nZWRbYXR0cl07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHVuc2V0ID8gZGVsZXRlIGN1cnJlbnRbYXR0cl0gOiBjdXJyZW50W2F0dHJdID0gdmFsO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBVcGRhdGUgdGhlIGBpZGAuXG5cdCAgICAgIGlmICh0aGlzLmlkQXR0cmlidXRlIGluIGF0dHJzKSB0aGlzLmlkID0gdGhpcy5nZXQodGhpcy5pZEF0dHJpYnV0ZSk7XG5cdFxuXHQgICAgICAvLyBUcmlnZ2VyIGFsbCByZWxldmFudCBhdHRyaWJ1dGUgY2hhbmdlcy5cblx0ICAgICAgaWYgKCFzaWxlbnQpIHtcblx0ICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGgpIHRoaXMuX3BlbmRpbmcgPSBvcHRpb25zO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhbmdlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2U6JyArIGNoYW5nZXNbaV0sIHRoaXMsIGN1cnJlbnRbY2hhbmdlc1tpXV0sIG9wdGlvbnMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gWW91IG1pZ2h0IGJlIHdvbmRlcmluZyB3aHkgdGhlcmUncyBhIGB3aGlsZWAgbG9vcCBoZXJlLiBDaGFuZ2VzIGNhblxuXHQgICAgICAvLyBiZSByZWN1cnNpdmVseSBuZXN0ZWQgd2l0aGluIGBcImNoYW5nZVwiYCBldmVudHMuXG5cdCAgICAgIGlmIChjaGFuZ2luZykgcmV0dXJuIHRoaXM7XG5cdCAgICAgIGlmICghc2lsZW50KSB7XG5cdCAgICAgICAgd2hpbGUgKHRoaXMuX3BlbmRpbmcpIHtcblx0ICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLl9wZW5kaW5nO1xuXHQgICAgICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCB0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuXHQgICAgICB0aGlzLl9jaGFuZ2luZyA9IGZhbHNlO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gYHVuc2V0YCBpcyBhIG5vb3Bcblx0ICAgIC8vIGlmIHRoZSBhdHRyaWJ1dGUgZG9lc24ndCBleGlzdC5cblx0ICAgIHVuc2V0OiBmdW5jdGlvbihhdHRyLCBvcHRpb25zKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnNldChhdHRyLCB2b2lkIDAsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIENsZWFyIGFsbCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC5cblx0ICAgIGNsZWFyOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIHZhciBhdHRycyA9IHt9O1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hdHRyaWJ1dGVzKSBhdHRyc1trZXldID0gdm9pZCAwO1xuXHQgICAgICByZXR1cm4gdGhpcy5zZXQoYXR0cnMsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIERldGVybWluZSBpZiB0aGUgbW9kZWwgaGFzIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgYFwiY2hhbmdlXCJgIGV2ZW50LlxuXHQgICAgLy8gSWYgeW91IHNwZWNpZnkgYW4gYXR0cmlidXRlIG5hbWUsIGRldGVybWluZSBpZiB0aGF0IGF0dHJpYnV0ZSBoYXMgY2hhbmdlZC5cblx0ICAgIGhhc0NoYW5nZWQ6IGZ1bmN0aW9uKGF0dHIpIHtcblx0ICAgICAgaWYgKGF0dHIgPT0gbnVsbCkgcmV0dXJuICFfLmlzRW1wdHkodGhpcy5jaGFuZ2VkKTtcblx0ICAgICAgcmV0dXJuIF8uaGFzKHRoaXMuY2hhbmdlZCwgYXR0cik7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIGF0dHJpYnV0ZXMgdGhhdCBoYXZlIGNoYW5nZWQsIG9yXG5cdCAgICAvLyBmYWxzZSBpZiB0aGVyZSBhcmUgbm8gY2hhbmdlZCBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIGRldGVybWluaW5nIHdoYXRcblx0ICAgIC8vIHBhcnRzIG9mIGEgdmlldyBuZWVkIHRvIGJlIHVwZGF0ZWQgYW5kL29yIHdoYXQgYXR0cmlidXRlcyBuZWVkIHRvIGJlXG5cdCAgICAvLyBwZXJzaXN0ZWQgdG8gdGhlIHNlcnZlci4gVW5zZXQgYXR0cmlidXRlcyB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuXG5cdCAgICAvLyBZb3UgY2FuIGFsc28gcGFzcyBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0byBkaWZmIGFnYWluc3QgdGhlIG1vZGVsLFxuXHQgICAgLy8gZGV0ZXJtaW5pbmcgaWYgdGhlcmUgKndvdWxkIGJlKiBhIGNoYW5nZS5cblx0ICAgIGNoYW5nZWRBdHRyaWJ1dGVzOiBmdW5jdGlvbihkaWZmKSB7XG5cdCAgICAgIGlmICghZGlmZikgcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpID8gXy5jbG9uZSh0aGlzLmNoYW5nZWQpIDogZmFsc2U7XG5cdCAgICAgIHZhciBvbGQgPSB0aGlzLl9jaGFuZ2luZyA/IHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA6IHRoaXMuYXR0cmlidXRlcztcblx0ICAgICAgdmFyIGNoYW5nZWQgPSB7fTtcblx0ICAgICAgZm9yICh2YXIgYXR0ciBpbiBkaWZmKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IGRpZmZbYXR0cl07XG5cdCAgICAgICAgaWYgKF8uaXNFcXVhbChvbGRbYXR0cl0sIHZhbCkpIGNvbnRpbnVlO1xuXHQgICAgICAgIGNoYW5nZWRbYXR0cl0gPSB2YWw7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIF8uc2l6ZShjaGFuZ2VkKSA/IGNoYW5nZWQgOiBmYWxzZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gR2V0IHRoZSBwcmV2aW91cyB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUsIHJlY29yZGVkIGF0IHRoZSB0aW1lIHRoZSBsYXN0XG5cdCAgICAvLyBgXCJjaGFuZ2VcImAgZXZlbnQgd2FzIGZpcmVkLlxuXHQgICAgcHJldmlvdXM6IGZ1bmN0aW9uKGF0dHIpIHtcblx0ICAgICAgaWYgKGF0dHIgPT0gbnVsbCB8fCAhdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKSByZXR1cm4gbnVsbDtcblx0ICAgICAgcmV0dXJuIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlc1thdHRyXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gR2V0IGFsbCBvZiB0aGUgYXR0cmlidXRlcyBvZiB0aGUgbW9kZWwgYXQgdGhlIHRpbWUgb2YgdGhlIHByZXZpb3VzXG5cdCAgICAvLyBgXCJjaGFuZ2VcImAgZXZlbnQuXG5cdCAgICBwcmV2aW91c0F0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gXy5jbG9uZSh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBGZXRjaCB0aGUgbW9kZWwgZnJvbSB0aGUgc2VydmVyLCBtZXJnaW5nIHRoZSByZXNwb25zZSB3aXRoIHRoZSBtb2RlbCdzXG5cdCAgICAvLyBsb2NhbCBhdHRyaWJ1dGVzLiBBbnkgY2hhbmdlZCBhdHRyaWJ1dGVzIHdpbGwgdHJpZ2dlciBhIFwiY2hhbmdlXCIgZXZlbnQuXG5cdCAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0gXy5leHRlbmQoe3BhcnNlOiB0cnVlfSwgb3B0aW9ucyk7XG5cdCAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG5cdCAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuXHQgICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG5cdCAgICAgICAgdmFyIHNlcnZlckF0dHJzID0gb3B0aW9ucy5wYXJzZSA/IG1vZGVsLnBhcnNlKHJlc3AsIG9wdGlvbnMpIDogcmVzcDtcblx0ICAgICAgICBpZiAoIW1vZGVsLnNldChzZXJ2ZXJBdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcblx0ICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuXHQgICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMsIGFuZCBzeW5jIHRoZSBtb2RlbCB0byB0aGUgc2VydmVyLlxuXHQgICAgLy8gSWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGF0dHJpYnV0ZXMgaGFzaCB0aGF0IGRpZmZlcnMsIHRoZSBtb2RlbCdzXG5cdCAgICAvLyBzdGF0ZSB3aWxsIGJlIGBzZXRgIGFnYWluLlxuXHQgICAgc2F2ZTogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcblx0ICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cblx0ICAgICAgdmFyIGF0dHJzO1xuXHQgICAgICBpZiAoa2V5ID09IG51bGwgfHwgdHlwZW9mIGtleSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBhdHRycyA9IGtleTtcblx0ICAgICAgICBvcHRpb25zID0gdmFsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBvcHRpb25zID0gXy5leHRlbmQoe3ZhbGlkYXRlOiB0cnVlLCBwYXJzZTogdHJ1ZX0sIG9wdGlvbnMpO1xuXHQgICAgICB2YXIgd2FpdCA9IG9wdGlvbnMud2FpdDtcblx0XG5cdCAgICAgIC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIGFuZCBhdHRyaWJ1dGVzIGV4aXN0LCBzYXZlIGFjdHMgYXNcblx0ICAgICAgLy8gYHNldChhdHRyKS5zYXZlKG51bGwsIG9wdHMpYCB3aXRoIHZhbGlkYXRpb24uIE90aGVyd2lzZSwgY2hlY2sgaWZcblx0ICAgICAgLy8gdGhlIG1vZGVsIHdpbGwgYmUgdmFsaWQgd2hlbiB0aGUgYXR0cmlidXRlcywgaWYgYW55LCBhcmUgc2V0LlxuXHQgICAgICBpZiAoYXR0cnMgJiYgIXdhaXQpIHtcblx0ICAgICAgICBpZiAoIXRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9IGVsc2UgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIEFmdGVyIGEgc3VjY2Vzc2Z1bCBzZXJ2ZXItc2lkZSBzYXZlLCB0aGUgY2xpZW50IGlzIChvcHRpb25hbGx5KVxuXHQgICAgICAvLyB1cGRhdGVkIHdpdGggdGhlIHNlcnZlci1zaWRlIHN0YXRlLlxuXHQgICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuXHQgICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2Vzcztcblx0ICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXM7XG5cdCAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcblx0ICAgICAgICAvLyBFbnN1cmUgYXR0cmlidXRlcyBhcmUgcmVzdG9yZWQgZHVyaW5nIHN5bmNocm9ub3VzIHNhdmVzLlxuXHQgICAgICAgIG1vZGVsLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuXHQgICAgICAgIHZhciBzZXJ2ZXJBdHRycyA9IG9wdGlvbnMucGFyc2UgPyBtb2RlbC5wYXJzZShyZXNwLCBvcHRpb25zKSA6IHJlc3A7XG5cdCAgICAgICAgaWYgKHdhaXQpIHNlcnZlckF0dHJzID0gXy5leHRlbmQoe30sIGF0dHJzLCBzZXJ2ZXJBdHRycyk7XG5cdCAgICAgICAgaWYgKHNlcnZlckF0dHJzICYmICFtb2RlbC5zZXQoc2VydmVyQXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcblx0ICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuXHQgICAgICB9O1xuXHQgICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cdFxuXHQgICAgICAvLyBTZXQgdGVtcG9yYXJ5IGF0dHJpYnV0ZXMgaWYgYHt3YWl0OiB0cnVlfWAgdG8gcHJvcGVybHkgZmluZCBuZXcgaWRzLlxuXHQgICAgICBpZiAoYXR0cnMgJiYgd2FpdCkgdGhpcy5hdHRyaWJ1dGVzID0gXy5leHRlbmQoe30sIGF0dHJpYnV0ZXMsIGF0dHJzKTtcblx0XG5cdCAgICAgIHZhciBtZXRob2QgPSB0aGlzLmlzTmV3KCkgPyAnY3JlYXRlJyA6IChvcHRpb25zLnBhdGNoID8gJ3BhdGNoJyA6ICd1cGRhdGUnKTtcblx0ICAgICAgaWYgKG1ldGhvZCA9PT0gJ3BhdGNoJyAmJiAhb3B0aW9ucy5hdHRycykgb3B0aW9ucy5hdHRycyA9IGF0dHJzO1xuXHQgICAgICB2YXIgeGhyID0gdGhpcy5zeW5jKG1ldGhvZCwgdGhpcywgb3B0aW9ucyk7XG5cdFxuXHQgICAgICAvLyBSZXN0b3JlIGF0dHJpYnV0ZXMuXG5cdCAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG5cdFxuXHQgICAgICByZXR1cm4geGhyO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBEZXN0cm95IHRoaXMgbW9kZWwgb24gdGhlIHNlcnZlciBpZiBpdCB3YXMgYWxyZWFkeSBwZXJzaXN0ZWQuXG5cdCAgICAvLyBPcHRpbWlzdGljYWxseSByZW1vdmVzIHRoZSBtb2RlbCBmcm9tIGl0cyBjb2xsZWN0aW9uLCBpZiBpdCBoYXMgb25lLlxuXHQgICAgLy8gSWYgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgd2FpdHMgZm9yIHRoZSBzZXJ2ZXIgdG8gcmVzcG9uZCBiZWZvcmUgcmVtb3ZhbC5cblx0ICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG5cdCAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG5cdCAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuXHQgICAgICB2YXIgd2FpdCA9IG9wdGlvbnMud2FpdDtcblx0XG5cdCAgICAgIHZhciBkZXN0cm95ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgbW9kZWwuc3RvcExpc3RlbmluZygpO1xuXHQgICAgICAgIG1vZGVsLnRyaWdnZXIoJ2Rlc3Ryb3knLCBtb2RlbCwgbW9kZWwuY29sbGVjdGlvbiwgb3B0aW9ucyk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG5cdCAgICAgICAgaWYgKHdhaXQpIGRlc3Ryb3koKTtcblx0ICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuXHQgICAgICAgIGlmICghbW9kZWwuaXNOZXcoKSkgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciB4aHIgPSBmYWxzZTtcblx0ICAgICAgaWYgKHRoaXMuaXNOZXcoKSkge1xuXHQgICAgICAgIF8uZGVmZXIob3B0aW9ucy5zdWNjZXNzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cdCAgICAgICAgeGhyID0gdGhpcy5zeW5jKCdkZWxldGUnLCB0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIXdhaXQpIGRlc3Ryb3koKTtcblx0ICAgICAgcmV0dXJuIHhocjtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRGVmYXVsdCBVUkwgZm9yIHRoZSBtb2RlbCdzIHJlcHJlc2VudGF0aW9uIG9uIHRoZSBzZXJ2ZXIgLS0gaWYgeW91J3JlXG5cdCAgICAvLyB1c2luZyBCYWNrYm9uZSdzIHJlc3RmdWwgbWV0aG9kcywgb3ZlcnJpZGUgdGhpcyB0byBjaGFuZ2UgdGhlIGVuZHBvaW50XG5cdCAgICAvLyB0aGF0IHdpbGwgYmUgY2FsbGVkLlxuXHQgICAgdXJsOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGJhc2UgPVxuXHQgICAgICAgIF8ucmVzdWx0KHRoaXMsICd1cmxSb290JykgfHxcblx0ICAgICAgICBfLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sICd1cmwnKSB8fFxuXHQgICAgICAgIHVybEVycm9yKCk7XG5cdCAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHJldHVybiBiYXNlO1xuXHQgICAgICB2YXIgaWQgPSB0aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKTtcblx0ICAgICAgcmV0dXJuIGJhc2UucmVwbGFjZSgvW15cXC9dJC8sICckJi8nKSArIGVuY29kZVVSSUNvbXBvbmVudChpZCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gdGhlIGhhc2ggb2YgYXR0cmlidXRlcyB0byBiZSBgc2V0YCBvblxuXHQgICAgLy8gdGhlIG1vZGVsLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgdGhlIHJlc3BvbnNlIGFsb25nLlxuXHQgICAgcGFyc2U6IGZ1bmN0aW9uKHJlc3AsIG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIHJlc3A7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIGlkZW50aWNhbCBhdHRyaWJ1dGVzIHRvIHRoaXMgb25lLlxuXHQgICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQSBtb2RlbCBpcyBuZXcgaWYgaXQgaGFzIG5ldmVyIGJlZW4gc2F2ZWQgdG8gdGhlIHNlcnZlciwgYW5kIGxhY2tzIGFuIGlkLlxuXHQgICAgaXNOZXc6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gIXRoaXMuaGFzKHRoaXMuaWRBdHRyaWJ1dGUpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBDaGVjayBpZiB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGluIGEgdmFsaWQgc3RhdGUuXG5cdCAgICBpc1ZhbGlkOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZSh7fSwgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt2YWxpZGF0ZTogdHJ1ZX0pKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUnVuIHZhbGlkYXRpb24gYWdhaW5zdCB0aGUgbmV4dCBjb21wbGV0ZSBzZXQgb2YgbW9kZWwgYXR0cmlidXRlcyxcblx0ICAgIC8vIHJldHVybmluZyBgdHJ1ZWAgaWYgYWxsIGlzIHdlbGwuIE90aGVyd2lzZSwgZmlyZSBhbiBgXCJpbnZhbGlkXCJgIGV2ZW50LlxuXHQgICAgX3ZhbGlkYXRlOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuXHQgICAgICBpZiAoIW9wdGlvbnMudmFsaWRhdGUgfHwgIXRoaXMudmFsaWRhdGUpIHJldHVybiB0cnVlO1xuXHQgICAgICBhdHRycyA9IF8uZXh0ZW5kKHt9LCB0aGlzLmF0dHJpYnV0ZXMsIGF0dHJzKTtcblx0ICAgICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSB8fCBudWxsO1xuXHQgICAgICBpZiAoIWVycm9yKSByZXR1cm4gdHJ1ZTtcblx0ICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgZXJyb3IsIF8uZXh0ZW5kKG9wdGlvbnMsIHt2YWxpZGF0aW9uRXJyb3I6IGVycm9yfSkpO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgIH0pO1xuXHRcblx0ICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgTW9kZWwsIG1hcHBlZCB0byB0aGVcblx0ICAvLyBudW1iZXIgb2YgYXJndW1lbnRzIHRoZXkgdGFrZS5cblx0ICB2YXIgbW9kZWxNZXRob2RzID0ge2tleXM6IDEsIHZhbHVlczogMSwgcGFpcnM6IDEsIGludmVydDogMSwgcGljazogMCxcblx0ICAgICAgb21pdDogMCwgY2hhaW46IDEsIGlzRW1wdHk6IDF9O1xuXHRcblx0ICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBNb2RlbCNhdHRyaWJ1dGVzYC5cblx0ICBhZGRVbmRlcnNjb3JlTWV0aG9kcyhNb2RlbCwgbW9kZWxNZXRob2RzLCAnYXR0cmlidXRlcycpO1xuXHRcblx0ICAvLyBCYWNrYm9uZS5Db2xsZWN0aW9uXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBJZiBtb2RlbHMgdGVuZCB0byByZXByZXNlbnQgYSBzaW5nbGUgcm93IG9mIGRhdGEsIGEgQmFja2JvbmUgQ29sbGVjdGlvbiBpc1xuXHQgIC8vIG1vcmUgYW5hbG9nb3VzIHRvIGEgdGFibGUgZnVsbCBvZiBkYXRhIC4uLiBvciBhIHNtYWxsIHNsaWNlIG9yIHBhZ2Ugb2YgdGhhdFxuXHQgIC8vIHRhYmxlLCBvciBhIGNvbGxlY3Rpb24gb2Ygcm93cyB0aGF0IGJlbG9uZyB0b2dldGhlciBmb3IgYSBwYXJ0aWN1bGFyIHJlYXNvblxuXHQgIC8vIC0tIGFsbCBvZiB0aGUgbWVzc2FnZXMgaW4gdGhpcyBwYXJ0aWN1bGFyIGZvbGRlciwgYWxsIG9mIHRoZSBkb2N1bWVudHNcblx0ICAvLyBiZWxvbmdpbmcgdG8gdGhpcyBwYXJ0aWN1bGFyIGF1dGhvciwgYW5kIHNvIG9uLiBDb2xsZWN0aW9ucyBtYWludGFpblxuXHQgIC8vIGluZGV4ZXMgb2YgdGhlaXIgbW9kZWxzLCBib3RoIGluIG9yZGVyLCBhbmQgZm9yIGxvb2t1cCBieSBgaWRgLlxuXHRcblx0ICAvLyBDcmVhdGUgYSBuZXcgKipDb2xsZWN0aW9uKiosIHBlcmhhcHMgdG8gY29udGFpbiBhIHNwZWNpZmljIHR5cGUgb2YgYG1vZGVsYC5cblx0ICAvLyBJZiBhIGBjb21wYXJhdG9yYCBpcyBzcGVjaWZpZWQsIHRoZSBDb2xsZWN0aW9uIHdpbGwgbWFpbnRhaW5cblx0ICAvLyBpdHMgbW9kZWxzIGluIHNvcnQgb3JkZXIsIGFzIHRoZXkncmUgYWRkZWQgYW5kIHJlbW92ZWQuXG5cdCAgdmFyIENvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uID0gZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXHQgICAgaWYgKG9wdGlvbnMubW9kZWwpIHRoaXMubW9kZWwgPSBvcHRpb25zLm1vZGVsO1xuXHQgICAgaWYgKG9wdGlvbnMuY29tcGFyYXRvciAhPT0gdm9pZCAwKSB0aGlzLmNvbXBhcmF0b3IgPSBvcHRpb25zLmNvbXBhcmF0b3I7XG5cdCAgICB0aGlzLl9yZXNldCgpO1xuXHQgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAobW9kZWxzKSB0aGlzLnJlc2V0KG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcblx0ICB9O1xuXHRcblx0ICAvLyBEZWZhdWx0IG9wdGlvbnMgZm9yIGBDb2xsZWN0aW9uI3NldGAuXG5cdCAgdmFyIHNldE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IHRydWUsIG1lcmdlOiB0cnVlfTtcblx0ICB2YXIgYWRkT3B0aW9ucyA9IHthZGQ6IHRydWUsIHJlbW92ZTogZmFsc2V9O1xuXHRcblx0ICAvLyBTcGxpY2VzIGBpbnNlcnRgIGludG8gYGFycmF5YCBhdCBpbmRleCBgYXRgLlxuXHQgIHZhciBzcGxpY2UgPSBmdW5jdGlvbihhcnJheSwgaW5zZXJ0LCBhdCkge1xuXHQgICAgYXQgPSBNYXRoLm1pbihNYXRoLm1heChhdCwgMCksIGFycmF5Lmxlbmd0aCk7XG5cdCAgICB2YXIgdGFpbCA9IEFycmF5KGFycmF5Lmxlbmd0aCAtIGF0KTtcblx0ICAgIHZhciBsZW5ndGggPSBpbnNlcnQubGVuZ3RoO1xuXHQgICAgdmFyIGk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgdGFpbC5sZW5ndGg7IGkrKykgdGFpbFtpXSA9IGFycmF5W2kgKyBhdF07XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGFycmF5W2kgKyBhdF0gPSBpbnNlcnRbaV07XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgdGFpbC5sZW5ndGg7IGkrKykgYXJyYXlbaSArIGxlbmd0aCArIGF0XSA9IHRhaWxbaV07XG5cdCAgfTtcblx0XG5cdCAgLy8gRGVmaW5lIHRoZSBDb2xsZWN0aW9uJ3MgaW5oZXJpdGFibGUgbWV0aG9kcy5cblx0ICBfLmV4dGVuZChDb2xsZWN0aW9uLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cdFxuXHQgICAgLy8gVGhlIGRlZmF1bHQgbW9kZWwgZm9yIGEgY29sbGVjdGlvbiBpcyBqdXN0IGEgKipCYWNrYm9uZS5Nb2RlbCoqLlxuXHQgICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbiBtb3N0IGNhc2VzLlxuXHQgICAgbW9kZWw6IE1vZGVsLFxuXHRcblx0ICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuXHQgICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG5cdCAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cdFxuXHQgICAgLy8gVGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSBDb2xsZWN0aW9uIGlzIGFuIGFycmF5IG9mIHRoZVxuXHQgICAgLy8gbW9kZWxzJyBhdHRyaWJ1dGVzLlxuXHQgICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbihtb2RlbCkgeyByZXR1cm4gbW9kZWwudG9KU09OKG9wdGlvbnMpOyB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQuXG5cdCAgICBzeW5jOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQWRkIGEgbW9kZWwsIG9yIGxpc3Qgb2YgbW9kZWxzIHRvIHRoZSBzZXQuIGBtb2RlbHNgIG1heSBiZSBCYWNrYm9uZVxuXHQgICAgLy8gTW9kZWxzIG9yIHJhdyBKYXZhU2NyaXB0IG9iamVjdHMgdG8gYmUgY29udmVydGVkIHRvIE1vZGVscywgb3IgYW55XG5cdCAgICAvLyBjb21iaW5hdGlvbiBvZiB0aGUgdHdvLlxuXHQgICAgYWRkOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc2V0KG1vZGVscywgXy5leHRlbmQoe21lcmdlOiBmYWxzZX0sIG9wdGlvbnMsIGFkZE9wdGlvbnMpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUmVtb3ZlIGEgbW9kZWwsIG9yIGEgbGlzdCBvZiBtb2RlbHMgZnJvbSB0aGUgc2V0LlxuXHQgICAgcmVtb3ZlOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBvcHRpb25zKTtcblx0ICAgICAgdmFyIHNpbmd1bGFyID0gIV8uaXNBcnJheShtb2RlbHMpO1xuXHQgICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogbW9kZWxzLnNsaWNlKCk7XG5cdCAgICAgIHZhciByZW1vdmVkID0gdGhpcy5fcmVtb3ZlTW9kZWxzKG1vZGVscywgb3B0aW9ucyk7XG5cdCAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQgJiYgcmVtb3ZlZC5sZW5ndGgpIHtcblx0ICAgICAgICBvcHRpb25zLmNoYW5nZXMgPSB7YWRkZWQ6IFtdLCBtZXJnZWQ6IFtdLCByZW1vdmVkOiByZW1vdmVkfTtcblx0ICAgICAgICB0aGlzLnRyaWdnZXIoJ3VwZGF0ZScsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBzaW5ndWxhciA/IHJlbW92ZWRbMF0gOiByZW1vdmVkO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBVcGRhdGUgYSBjb2xsZWN0aW9uIGJ5IGBzZXRgLWluZyBhIG5ldyBsaXN0IG9mIG1vZGVscywgYWRkaW5nIG5ldyBvbmVzLFxuXHQgICAgLy8gcmVtb3ZpbmcgbW9kZWxzIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LCBhbmQgbWVyZ2luZyBtb2RlbHMgdGhhdFxuXHQgICAgLy8gYWxyZWFkeSBleGlzdCBpbiB0aGUgY29sbGVjdGlvbiwgYXMgbmVjZXNzYXJ5LiBTaW1pbGFyIHRvICoqTW9kZWwjc2V0KiosXG5cdCAgICAvLyB0aGUgY29yZSBvcGVyYXRpb24gZm9yIHVwZGF0aW5nIHRoZSBkYXRhIGNvbnRhaW5lZCBieSB0aGUgY29sbGVjdGlvbi5cblx0ICAgIHNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG5cdCAgICAgIGlmIChtb2RlbHMgPT0gbnVsbCkgcmV0dXJuO1xuXHRcblx0ICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBzZXRPcHRpb25zLCBvcHRpb25zKTtcblx0ICAgICAgaWYgKG9wdGlvbnMucGFyc2UgJiYgIXRoaXMuX2lzTW9kZWwobW9kZWxzKSkge1xuXHQgICAgICAgIG1vZGVscyA9IHRoaXMucGFyc2UobW9kZWxzLCBvcHRpb25zKSB8fCBbXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHNpbmd1bGFyID0gIV8uaXNBcnJheShtb2RlbHMpO1xuXHQgICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogbW9kZWxzLnNsaWNlKCk7XG5cdFxuXHQgICAgICB2YXIgYXQgPSBvcHRpb25zLmF0O1xuXHQgICAgICBpZiAoYXQgIT0gbnVsbCkgYXQgPSArYXQ7XG5cdCAgICAgIGlmIChhdCA+IHRoaXMubGVuZ3RoKSBhdCA9IHRoaXMubGVuZ3RoO1xuXHQgICAgICBpZiAoYXQgPCAwKSBhdCArPSB0aGlzLmxlbmd0aCArIDE7XG5cdFxuXHQgICAgICB2YXIgc2V0ID0gW107XG5cdCAgICAgIHZhciB0b0FkZCA9IFtdO1xuXHQgICAgICB2YXIgdG9NZXJnZSA9IFtdO1xuXHQgICAgICB2YXIgdG9SZW1vdmUgPSBbXTtcblx0ICAgICAgdmFyIG1vZGVsTWFwID0ge307XG5cdFxuXHQgICAgICB2YXIgYWRkID0gb3B0aW9ucy5hZGQ7XG5cdCAgICAgIHZhciBtZXJnZSA9IG9wdGlvbnMubWVyZ2U7XG5cdCAgICAgIHZhciByZW1vdmUgPSBvcHRpb25zLnJlbW92ZTtcblx0XG5cdCAgICAgIHZhciBzb3J0ID0gZmFsc2U7XG5cdCAgICAgIHZhciBzb3J0YWJsZSA9IHRoaXMuY29tcGFyYXRvciAmJiBhdCA9PSBudWxsICYmIG9wdGlvbnMuc29ydCAhPT0gZmFsc2U7XG5cdCAgICAgIHZhciBzb3J0QXR0ciA9IF8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSA/IHRoaXMuY29tcGFyYXRvciA6IG51bGw7XG5cdFxuXHQgICAgICAvLyBUdXJuIGJhcmUgb2JqZWN0cyBpbnRvIG1vZGVsIHJlZmVyZW5jZXMsIGFuZCBwcmV2ZW50IGludmFsaWQgbW9kZWxzXG5cdCAgICAgIC8vIGZyb20gYmVpbmcgYWRkZWQuXG5cdCAgICAgIHZhciBtb2RlbCwgaTtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IG1vZGVscy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIG1vZGVsID0gbW9kZWxzW2ldO1xuXHRcblx0ICAgICAgICAvLyBJZiBhIGR1cGxpY2F0ZSBpcyBmb3VuZCwgcHJldmVudCBpdCBmcm9tIGJlaW5nIGFkZGVkIGFuZFxuXHQgICAgICAgIC8vIG9wdGlvbmFsbHkgbWVyZ2UgaXQgaW50byB0aGUgZXhpc3RpbmcgbW9kZWwuXG5cdCAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXQobW9kZWwpO1xuXHQgICAgICAgIGlmIChleGlzdGluZykge1xuXHQgICAgICAgICAgaWYgKG1lcmdlICYmIG1vZGVsICE9PSBleGlzdGluZykge1xuXHQgICAgICAgICAgICB2YXIgYXR0cnMgPSB0aGlzLl9pc01vZGVsKG1vZGVsKSA/IG1vZGVsLmF0dHJpYnV0ZXMgOiBtb2RlbDtcblx0ICAgICAgICAgICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gZXhpc3RpbmcucGFyc2UoYXR0cnMsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICBleGlzdGluZy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICB0b01lcmdlLnB1c2goZXhpc3RpbmcpO1xuXHQgICAgICAgICAgICBpZiAoc29ydGFibGUgJiYgIXNvcnQpIHNvcnQgPSBleGlzdGluZy5oYXNDaGFuZ2VkKHNvcnRBdHRyKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmICghbW9kZWxNYXBbZXhpc3RpbmcuY2lkXSkge1xuXHQgICAgICAgICAgICBtb2RlbE1hcFtleGlzdGluZy5jaWRdID0gdHJ1ZTtcblx0ICAgICAgICAgICAgc2V0LnB1c2goZXhpc3RpbmcpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgbW9kZWxzW2ldID0gZXhpc3Rpbmc7XG5cdFxuXHQgICAgICAgIC8vIElmIHRoaXMgaXMgYSBuZXcsIHZhbGlkIG1vZGVsLCBwdXNoIGl0IHRvIHRoZSBgdG9BZGRgIGxpc3QuXG5cdCAgICAgICAgfSBlbHNlIGlmIChhZGQpIHtcblx0ICAgICAgICAgIG1vZGVsID0gbW9kZWxzW2ldID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKTtcblx0ICAgICAgICAgIGlmIChtb2RlbCkge1xuXHQgICAgICAgICAgICB0b0FkZC5wdXNoKG1vZGVsKTtcblx0ICAgICAgICAgICAgdGhpcy5fYWRkUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgbW9kZWxNYXBbbW9kZWwuY2lkXSA9IHRydWU7XG5cdCAgICAgICAgICAgIHNldC5wdXNoKG1vZGVsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFJlbW92ZSBzdGFsZSBtb2RlbHMuXG5cdCAgICAgIGlmIChyZW1vdmUpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgbW9kZWwgPSB0aGlzLm1vZGVsc1tpXTtcblx0ICAgICAgICAgIGlmICghbW9kZWxNYXBbbW9kZWwuY2lkXSkgdG9SZW1vdmUucHVzaChtb2RlbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0b1JlbW92ZS5sZW5ndGgpIHRoaXMuX3JlbW92ZU1vZGVscyh0b1JlbW92ZSwgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFNlZSBpZiBzb3J0aW5nIGlzIG5lZWRlZCwgdXBkYXRlIGBsZW5ndGhgIGFuZCBzcGxpY2UgaW4gbmV3IG1vZGVscy5cblx0ICAgICAgdmFyIG9yZGVyQ2hhbmdlZCA9IGZhbHNlO1xuXHQgICAgICB2YXIgcmVwbGFjZSA9ICFzb3J0YWJsZSAmJiBhZGQgJiYgcmVtb3ZlO1xuXHQgICAgICBpZiAoc2V0Lmxlbmd0aCAmJiByZXBsYWNlKSB7XG5cdCAgICAgICAgb3JkZXJDaGFuZ2VkID0gdGhpcy5sZW5ndGggIT09IHNldC5sZW5ndGggfHwgXy5zb21lKHRoaXMubW9kZWxzLCBmdW5jdGlvbihtLCBpbmRleCkge1xuXHQgICAgICAgICAgcmV0dXJuIG0gIT09IHNldFtpbmRleF07XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdGhpcy5tb2RlbHMubGVuZ3RoID0gMDtcblx0ICAgICAgICBzcGxpY2UodGhpcy5tb2RlbHMsIHNldCwgMCk7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGg7XG5cdCAgICAgIH0gZWxzZSBpZiAodG9BZGQubGVuZ3RoKSB7XG5cdCAgICAgICAgaWYgKHNvcnRhYmxlKSBzb3J0ID0gdHJ1ZTtcblx0ICAgICAgICBzcGxpY2UodGhpcy5tb2RlbHMsIHRvQWRkLCBhdCA9PSBudWxsID8gdGhpcy5sZW5ndGggOiBhdCk7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGg7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFNpbGVudGx5IHNvcnQgdGhlIGNvbGxlY3Rpb24gaWYgYXBwcm9wcmlhdGUuXG5cdCAgICAgIGlmIChzb3J0KSB0aGlzLnNvcnQoe3NpbGVudDogdHJ1ZX0pO1xuXHRcblx0ICAgICAgLy8gVW5sZXNzIHNpbGVuY2VkLCBpdCdzIHRpbWUgdG8gZmlyZSBhbGwgYXBwcm9wcmlhdGUgYWRkL3NvcnQvdXBkYXRlIGV2ZW50cy5cblx0ICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b0FkZC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgaWYgKGF0ICE9IG51bGwpIG9wdGlvbnMuaW5kZXggPSBhdCArIGk7XG5cdCAgICAgICAgICBtb2RlbCA9IHRvQWRkW2ldO1xuXHQgICAgICAgICAgbW9kZWwudHJpZ2dlcignYWRkJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoc29ydCB8fCBvcmRlckNoYW5nZWQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICAgIGlmICh0b0FkZC5sZW5ndGggfHwgdG9SZW1vdmUubGVuZ3RoIHx8IHRvTWVyZ2UubGVuZ3RoKSB7XG5cdCAgICAgICAgICBvcHRpb25zLmNoYW5nZXMgPSB7XG5cdCAgICAgICAgICAgIGFkZGVkOiB0b0FkZCxcblx0ICAgICAgICAgICAgcmVtb3ZlZDogdG9SZW1vdmUsXG5cdCAgICAgICAgICAgIG1lcmdlZDogdG9NZXJnZVxuXHQgICAgICAgICAgfTtcblx0ICAgICAgICAgIHRoaXMudHJpZ2dlcigndXBkYXRlJywgdGhpcywgb3B0aW9ucyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBSZXR1cm4gdGhlIGFkZGVkIChvciBtZXJnZWQpIG1vZGVsIChvciBtb2RlbHMpLlxuXHQgICAgICByZXR1cm4gc2luZ3VsYXIgPyBtb2RlbHNbMF0gOiBtb2RlbHM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFdoZW4geW91IGhhdmUgbW9yZSBpdGVtcyB0aGFuIHlvdSB3YW50IHRvIGFkZCBvciByZW1vdmUgaW5kaXZpZHVhbGx5LFxuXHQgICAgLy8geW91IGNhbiByZXNldCB0aGUgZW50aXJlIHNldCB3aXRoIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCB3aXRob3V0IGZpcmluZ1xuXHQgICAgLy8gYW55IGdyYW51bGFyIGBhZGRgIG9yIGByZW1vdmVgIGV2ZW50cy4gRmlyZXMgYHJlc2V0YCB3aGVuIGZpbmlzaGVkLlxuXHQgICAgLy8gVXNlZnVsIGZvciBidWxrIG9wZXJhdGlvbnMgYW5kIG9wdGltaXphdGlvbnMuXG5cdCAgICByZXNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubW9kZWxzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW2ldLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICBvcHRpb25zLnByZXZpb3VzTW9kZWxzID0gdGhpcy5tb2RlbHM7XG5cdCAgICAgIHRoaXMuX3Jlc2V0KCk7XG5cdCAgICAgIG1vZGVscyA9IHRoaXMuYWRkKG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcblx0ICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy50cmlnZ2VyKCdyZXNldCcsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgICByZXR1cm4gbW9kZWxzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuXHQgICAgcHVzaDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuYWRkKG1vZGVsLCBfLmV4dGVuZCh7YXQ6IHRoaXMubGVuZ3RofSwgb3B0aW9ucykpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZW1vdmUgYSBtb2RlbCBmcm9tIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG5cdCAgICBwb3A6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCh0aGlzLmxlbmd0aCAtIDEpO1xuXHQgICAgICByZXR1cm4gdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuXHQgICAgdW5zaGlmdDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuYWRkKG1vZGVsLCBfLmV4dGVuZCh7YXQ6IDB9LCBvcHRpb25zKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cblx0ICAgIHNoaWZ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQoMCk7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFNsaWNlIG91dCBhIHN1Yi1hcnJheSBvZiBtb2RlbHMgZnJvbSB0aGUgY29sbGVjdGlvbi5cblx0ICAgIHNsaWNlOiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHNsaWNlLmFwcGx5KHRoaXMubW9kZWxzLCBhcmd1bWVudHMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBHZXQgYSBtb2RlbCBmcm9tIHRoZSBzZXQgYnkgaWQsIGNpZCwgbW9kZWwgb2JqZWN0IHdpdGggaWQgb3IgY2lkXG5cdCAgICAvLyBwcm9wZXJ0aWVzLCBvciBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0aGF0IGlzIHRyYW5zZm9ybWVkIHRocm91Z2ggbW9kZWxJZC5cblx0ICAgIGdldDogZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2J5SWRbb2JqXSB8fFxuXHQgICAgICAgIHRoaXMuX2J5SWRbdGhpcy5tb2RlbElkKG9iai5hdHRyaWJ1dGVzIHx8IG9iaildIHx8XG5cdCAgICAgICAgb2JqLmNpZCAmJiB0aGlzLl9ieUlkW29iai5jaWRdO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgbW9kZWwgaXMgaW4gdGhlIGNvbGxlY3Rpb24uXG5cdCAgICBoYXM6IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICByZXR1cm4gdGhpcy5nZXQob2JqKSAhPSBudWxsO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBHZXQgdGhlIG1vZGVsIGF0IHRoZSBnaXZlbiBpbmRleC5cblx0ICAgIGF0OiBmdW5jdGlvbihpbmRleCkge1xuXHQgICAgICBpZiAoaW5kZXggPCAwKSBpbmRleCArPSB0aGlzLmxlbmd0aDtcblx0ICAgICAgcmV0dXJuIHRoaXMubW9kZWxzW2luZGV4XTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUmV0dXJuIG1vZGVscyB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzIG9mXG5cdCAgICAvLyBgZmlsdGVyYC5cblx0ICAgIHdoZXJlOiBmdW5jdGlvbihhdHRycywgZmlyc3QpIHtcblx0ICAgICAgcmV0dXJuIHRoaXNbZmlyc3QgPyAnZmluZCcgOiAnZmlsdGVyJ10oYXR0cnMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZXR1cm4gdGhlIGZpcnN0IG1vZGVsIHdpdGggbWF0Y2hpbmcgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBzaW1wbGUgY2FzZXNcblx0ICAgIC8vIG9mIGBmaW5kYC5cblx0ICAgIGZpbmRXaGVyZTogZnVuY3Rpb24oYXR0cnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMud2hlcmUoYXR0cnMsIHRydWUpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBGb3JjZSB0aGUgY29sbGVjdGlvbiB0byByZS1zb3J0IGl0c2VsZi4gWW91IGRvbid0IG5lZWQgdG8gY2FsbCB0aGlzIHVuZGVyXG5cdCAgICAvLyBub3JtYWwgY2lyY3Vtc3RhbmNlcywgYXMgdGhlIHNldCB3aWxsIG1haW50YWluIHNvcnQgb3JkZXIgYXMgZWFjaCBpdGVtXG5cdCAgICAvLyBpcyBhZGRlZC5cblx0ICAgIHNvcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIGNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3I7XG5cdCAgICAgIGlmICghY29tcGFyYXRvcikgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvcicpO1xuXHQgICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXHRcblx0ICAgICAgdmFyIGxlbmd0aCA9IGNvbXBhcmF0b3IubGVuZ3RoO1xuXHQgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGNvbXBhcmF0b3IpKSBjb21wYXJhdG9yID0gXy5iaW5kKGNvbXBhcmF0b3IsIHRoaXMpO1xuXHRcblx0ICAgICAgLy8gUnVuIHNvcnQgYmFzZWQgb24gdHlwZSBvZiBgY29tcGFyYXRvcmAuXG5cdCAgICAgIGlmIChsZW5ndGggPT09IDEgfHwgXy5pc1N0cmluZyhjb21wYXJhdG9yKSkge1xuXHQgICAgICAgIHRoaXMubW9kZWxzID0gdGhpcy5zb3J0QnkoY29tcGFyYXRvcik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5tb2RlbHMuc29ydChjb21wYXJhdG9yKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3NvcnQnLCB0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFBsdWNrIGFuIGF0dHJpYnV0ZSBmcm9tIGVhY2ggbW9kZWwgaW4gdGhlIGNvbGxlY3Rpb24uXG5cdCAgICBwbHVjazogZnVuY3Rpb24oYXR0cikge1xuXHQgICAgICByZXR1cm4gdGhpcy5tYXAoYXR0ciArICcnKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRmV0Y2ggdGhlIGRlZmF1bHQgc2V0IG9mIG1vZGVscyBmb3IgdGhpcyBjb2xsZWN0aW9uLCByZXNldHRpbmcgdGhlXG5cdCAgICAvLyBjb2xsZWN0aW9uIHdoZW4gdGhleSBhcnJpdmUuIElmIGByZXNldDogdHJ1ZWAgaXMgcGFzc2VkLCB0aGUgcmVzcG9uc2Vcblx0ICAgIC8vIGRhdGEgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgYHJlc2V0YCBtZXRob2QgaW5zdGVhZCBvZiBgc2V0YC5cblx0ICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7cGFyc2U6IHRydWV9LCBvcHRpb25zKTtcblx0ICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cdCAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcblx0ICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuXHQgICAgICAgIHZhciBtZXRob2QgPSBvcHRpb25zLnJlc2V0ID8gJ3Jlc2V0JyA6ICdzZXQnO1xuXHQgICAgICAgIGNvbGxlY3Rpb25bbWV0aG9kXShyZXNwLCBvcHRpb25zKTtcblx0ICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG5cdCAgICAgICAgY29sbGVjdGlvbi50cmlnZ2VyKCdzeW5jJywgY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3luYygncmVhZCcsIHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgYSBtb2RlbCBpbiB0aGlzIGNvbGxlY3Rpb24uIEFkZCB0aGUgbW9kZWwgdG8gdGhlXG5cdCAgICAvLyBjb2xsZWN0aW9uIGltbWVkaWF0ZWx5LCB1bmxlc3MgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgaW4gd2hpY2ggY2FzZSB3ZVxuXHQgICAgLy8gd2FpdCBmb3IgdGhlIHNlcnZlciB0byBhZ3JlZS5cblx0ICAgIGNyZWF0ZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG5cdCAgICAgIHZhciB3YWl0ID0gb3B0aW9ucy53YWl0O1xuXHQgICAgICBtb2RlbCA9IHRoaXMuX3ByZXBhcmVNb2RlbChtb2RlbCwgb3B0aW9ucyk7XG5cdCAgICAgIGlmICghbW9kZWwpIHJldHVybiBmYWxzZTtcblx0ICAgICAgaWYgKCF3YWl0KSB0aGlzLmFkZChtb2RlbCwgb3B0aW9ucyk7XG5cdCAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcblx0ICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cdCAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKG0sIHJlc3AsIGNhbGxiYWNrT3B0cykge1xuXHQgICAgICAgIGlmICh3YWl0KSBjb2xsZWN0aW9uLmFkZChtLCBjYWxsYmFja09wdHMpO1xuXHQgICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwoY2FsbGJhY2tPcHRzLmNvbnRleHQsIG0sIHJlc3AsIGNhbGxiYWNrT3B0cyk7XG5cdCAgICAgIH07XG5cdCAgICAgIG1vZGVsLnNhdmUobnVsbCwgb3B0aW9ucyk7XG5cdCAgICAgIHJldHVybiBtb2RlbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gKipwYXJzZSoqIGNvbnZlcnRzIGEgcmVzcG9uc2UgaW50byBhIGxpc3Qgb2YgbW9kZWxzIHRvIGJlIGFkZGVkIHRvIHRoZVxuXHQgICAgLy8gY29sbGVjdGlvbi4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMganVzdCB0byBwYXNzIGl0IHRocm91Z2guXG5cdCAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuXHQgICAgICByZXR1cm4gcmVzcDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQ3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gd2l0aCBhbiBpZGVudGljYWwgbGlzdCBvZiBtb2RlbHMgYXMgdGhpcyBvbmUuXG5cdCAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscywge1xuXHQgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuXHQgICAgICAgIGNvbXBhcmF0b3I6IHRoaXMuY29tcGFyYXRvclxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRGVmaW5lIGhvdyB0byB1bmlxdWVseSBpZGVudGlmeSBtb2RlbHMgaW4gdGhlIGNvbGxlY3Rpb24uXG5cdCAgICBtb2RlbElkOiBmdW5jdGlvbihhdHRycykge1xuXHQgICAgICByZXR1cm4gYXR0cnNbdGhpcy5tb2RlbC5wcm90b3R5cGUuaWRBdHRyaWJ1dGUgfHwgJ2lkJ107XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFByaXZhdGUgbWV0aG9kIHRvIHJlc2V0IGFsbCBpbnRlcm5hbCBzdGF0ZS4gQ2FsbGVkIHdoZW4gdGhlIGNvbGxlY3Rpb25cblx0ICAgIC8vIGlzIGZpcnN0IGluaXRpYWxpemVkIG9yIHJlc2V0LlxuXHQgICAgX3Jlc2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgdGhpcy5sZW5ndGggPSAwO1xuXHQgICAgICB0aGlzLm1vZGVscyA9IFtdO1xuXHQgICAgICB0aGlzLl9ieUlkICA9IHt9O1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBQcmVwYXJlIGEgaGFzaCBvZiBhdHRyaWJ1dGVzIChvciBvdGhlciBtb2RlbCkgdG8gYmUgYWRkZWQgdG8gdGhpc1xuXHQgICAgLy8gY29sbGVjdGlvbi5cblx0ICAgIF9wcmVwYXJlTW9kZWw6IGZ1bmN0aW9uKGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgICAgIGlmICh0aGlzLl9pc01vZGVsKGF0dHJzKSkge1xuXHQgICAgICAgIGlmICghYXR0cnMuY29sbGVjdGlvbikgYXR0cnMuY29sbGVjdGlvbiA9IHRoaXM7XG5cdCAgICAgICAgcmV0dXJuIGF0dHJzO1xuXHQgICAgICB9XG5cdCAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuXHQgICAgICBvcHRpb25zLmNvbGxlY3Rpb24gPSB0aGlzO1xuXHQgICAgICB2YXIgbW9kZWwgPSBuZXcgdGhpcy5tb2RlbChhdHRycywgb3B0aW9ucyk7XG5cdCAgICAgIGlmICghbW9kZWwudmFsaWRhdGlvbkVycm9yKSByZXR1cm4gbW9kZWw7XG5cdCAgICAgIHRoaXMudHJpZ2dlcignaW52YWxpZCcsIHRoaXMsIG1vZGVsLnZhbGlkYXRpb25FcnJvciwgb3B0aW9ucyk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gSW50ZXJuYWwgbWV0aG9kIGNhbGxlZCBieSBib3RoIHJlbW92ZSBhbmQgc2V0LlxuXHQgICAgX3JlbW92ZU1vZGVsczogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG5cdCAgICAgIHZhciByZW1vdmVkID0gW107XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWxzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIG1vZGVsID0gdGhpcy5nZXQobW9kZWxzW2ldKTtcblx0ICAgICAgICBpZiAoIW1vZGVsKSBjb250aW51ZTtcblx0XG5cdCAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKG1vZGVsKTtcblx0ICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgIHRoaXMubGVuZ3RoLS07XG5cdFxuXHQgICAgICAgIC8vIFJlbW92ZSByZWZlcmVuY2VzIGJlZm9yZSB0cmlnZ2VyaW5nICdyZW1vdmUnIGV2ZW50IHRvIHByZXZlbnQgYW5cblx0ICAgICAgICAvLyBpbmZpbml0ZSBsb29wLiAjMzY5M1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmNpZF07XG5cdCAgICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuXHQgICAgICAgIGlmIChpZCAhPSBudWxsKSBkZWxldGUgdGhpcy5fYnlJZFtpZF07XG5cdFxuXHQgICAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcblx0ICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBpbmRleDtcblx0ICAgICAgICAgIG1vZGVsLnRyaWdnZXIoJ3JlbW92ZScsIG1vZGVsLCB0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlbW92ZWQucHVzaChtb2RlbCk7XG5cdCAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVtb3ZlZDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gTWV0aG9kIGZvciBjaGVja2luZyB3aGV0aGVyIGFuIG9iamVjdCBzaG91bGQgYmUgY29uc2lkZXJlZCBhIG1vZGVsIGZvclxuXHQgICAgLy8gdGhlIHB1cnBvc2VzIG9mIGFkZGluZyB0byB0aGUgY29sbGVjdGlvbi5cblx0ICAgIF9pc01vZGVsOiBmdW5jdGlvbihtb2RlbCkge1xuXHQgICAgICByZXR1cm4gbW9kZWwgaW5zdGFuY2VvZiBNb2RlbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGNyZWF0ZSBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG5cdCAgICBfYWRkUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuXHQgICAgICB0aGlzLl9ieUlkW21vZGVsLmNpZF0gPSBtb2RlbDtcblx0ICAgICAgdmFyIGlkID0gdGhpcy5tb2RlbElkKG1vZGVsLmF0dHJpYnV0ZXMpO1xuXHQgICAgICBpZiAoaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFtpZF0gPSBtb2RlbDtcblx0ICAgICAgbW9kZWwub24oJ2FsbCcsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBzZXZlciBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG5cdCAgICBfcmVtb3ZlUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuXHQgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5jaWRdO1xuXHQgICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG5cdCAgICAgIGlmIChpZCAhPSBudWxsKSBkZWxldGUgdGhpcy5fYnlJZFtpZF07XG5cdCAgICAgIGlmICh0aGlzID09PSBtb2RlbC5jb2xsZWN0aW9uKSBkZWxldGUgbW9kZWwuY29sbGVjdGlvbjtcblx0ICAgICAgbW9kZWwub2ZmKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGV2ZXJ5IHRpbWUgYSBtb2RlbCBpbiB0aGUgc2V0IGZpcmVzIGFuIGV2ZW50LlxuXHQgICAgLy8gU2V0cyBuZWVkIHRvIHVwZGF0ZSB0aGVpciBpbmRleGVzIHdoZW4gbW9kZWxzIGNoYW5nZSBpZHMuIEFsbCBvdGhlclxuXHQgICAgLy8gZXZlbnRzIHNpbXBseSBwcm94eSB0aHJvdWdoLiBcImFkZFwiIGFuZCBcInJlbW92ZVwiIGV2ZW50cyB0aGF0IG9yaWdpbmF0ZVxuXHQgICAgLy8gaW4gb3RoZXIgY29sbGVjdGlvbnMgYXJlIGlnbm9yZWQuXG5cdCAgICBfb25Nb2RlbEV2ZW50OiBmdW5jdGlvbihldmVudCwgbW9kZWwsIGNvbGxlY3Rpb24sIG9wdGlvbnMpIHtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgaWYgKChldmVudCA9PT0gJ2FkZCcgfHwgZXZlbnQgPT09ICdyZW1vdmUnKSAmJiBjb2xsZWN0aW9uICE9PSB0aGlzKSByZXR1cm47XG5cdCAgICAgICAgaWYgKGV2ZW50ID09PSAnZGVzdHJveScpIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcblx0ICAgICAgICBpZiAoZXZlbnQgPT09ICdjaGFuZ2UnKSB7XG5cdCAgICAgICAgICB2YXIgcHJldklkID0gdGhpcy5tb2RlbElkKG1vZGVsLnByZXZpb3VzQXR0cmlidXRlcygpKTtcblx0ICAgICAgICAgIHZhciBpZCA9IHRoaXMubW9kZWxJZChtb2RlbC5hdHRyaWJ1dGVzKTtcblx0ICAgICAgICAgIGlmIChwcmV2SWQgIT09IGlkKSB7XG5cdCAgICAgICAgICAgIGlmIChwcmV2SWQgIT0gbnVsbCkgZGVsZXRlIHRoaXMuX2J5SWRbcHJldklkXTtcblx0ICAgICAgICAgICAgaWYgKGlkICE9IG51bGwpIHRoaXMuX2J5SWRbaWRdID0gbW9kZWw7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICB9KTtcblx0XG5cdCAgLy8gVW5kZXJzY29yZSBtZXRob2RzIHRoYXQgd2Ugd2FudCB0byBpbXBsZW1lbnQgb24gdGhlIENvbGxlY3Rpb24uXG5cdCAgLy8gOTAlIG9mIHRoZSBjb3JlIHVzZWZ1bG5lc3Mgb2YgQmFja2JvbmUgQ29sbGVjdGlvbnMgaXMgYWN0dWFsbHkgaW1wbGVtZW50ZWRcblx0ICAvLyByaWdodCBoZXJlOlxuXHQgIHZhciBjb2xsZWN0aW9uTWV0aG9kcyA9IHtmb3JFYWNoOiAzLCBlYWNoOiAzLCBtYXA6IDMsIGNvbGxlY3Q6IDMsIHJlZHVjZTogMCxcblx0ICAgICAgZm9sZGw6IDAsIGluamVjdDogMCwgcmVkdWNlUmlnaHQ6IDAsIGZvbGRyOiAwLCBmaW5kOiAzLCBkZXRlY3Q6IDMsIGZpbHRlcjogMyxcblx0ICAgICAgc2VsZWN0OiAzLCByZWplY3Q6IDMsIGV2ZXJ5OiAzLCBhbGw6IDMsIHNvbWU6IDMsIGFueTogMywgaW5jbHVkZTogMywgaW5jbHVkZXM6IDMsXG5cdCAgICAgIGNvbnRhaW5zOiAzLCBpbnZva2U6IDAsIG1heDogMywgbWluOiAzLCB0b0FycmF5OiAxLCBzaXplOiAxLCBmaXJzdDogMyxcblx0ICAgICAgaGVhZDogMywgdGFrZTogMywgaW5pdGlhbDogMywgcmVzdDogMywgdGFpbDogMywgZHJvcDogMywgbGFzdDogMyxcblx0ICAgICAgd2l0aG91dDogMCwgZGlmZmVyZW5jZTogMCwgaW5kZXhPZjogMywgc2h1ZmZsZTogMSwgbGFzdEluZGV4T2Y6IDMsXG5cdCAgICAgIGlzRW1wdHk6IDEsIGNoYWluOiAxLCBzYW1wbGU6IDMsIHBhcnRpdGlvbjogMywgZ3JvdXBCeTogMywgY291bnRCeTogMyxcblx0ICAgICAgc29ydEJ5OiAzLCBpbmRleEJ5OiAzLCBmaW5kSW5kZXg6IDMsIGZpbmRMYXN0SW5kZXg6IDN9O1xuXHRcblx0ICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBDb2xsZWN0aW9uI21vZGVsc2AuXG5cdCAgYWRkVW5kZXJzY29yZU1ldGhvZHMoQ29sbGVjdGlvbiwgY29sbGVjdGlvbk1ldGhvZHMsICdtb2RlbHMnKTtcblx0XG5cdCAgLy8gQmFja2JvbmUuVmlld1xuXHQgIC8vIC0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gQmFja2JvbmUgVmlld3MgYXJlIGFsbW9zdCBtb3JlIGNvbnZlbnRpb24gdGhhbiB0aGV5IGFyZSBhY3R1YWwgY29kZS4gQSBWaWV3XG5cdCAgLy8gaXMgc2ltcGx5IGEgSmF2YVNjcmlwdCBvYmplY3QgdGhhdCByZXByZXNlbnRzIGEgbG9naWNhbCBjaHVuayBvZiBVSSBpbiB0aGVcblx0ICAvLyBET00uIFRoaXMgbWlnaHQgYmUgYSBzaW5nbGUgaXRlbSwgYW4gZW50aXJlIGxpc3QsIGEgc2lkZWJhciBvciBwYW5lbCwgb3Jcblx0ICAvLyBldmVuIHRoZSBzdXJyb3VuZGluZyBmcmFtZSB3aGljaCB3cmFwcyB5b3VyIHdob2xlIGFwcC4gRGVmaW5pbmcgYSBjaHVuayBvZlxuXHQgIC8vIFVJIGFzIGEgKipWaWV3KiogYWxsb3dzIHlvdSB0byBkZWZpbmUgeW91ciBET00gZXZlbnRzIGRlY2xhcmF0aXZlbHksIHdpdGhvdXRcblx0ICAvLyBoYXZpbmcgdG8gd29ycnkgYWJvdXQgcmVuZGVyIG9yZGVyIC4uLiBhbmQgbWFrZXMgaXQgZWFzeSBmb3IgdGhlIHZpZXcgdG9cblx0ICAvLyByZWFjdCB0byBzcGVjaWZpYyBjaGFuZ2VzIGluIHRoZSBzdGF0ZSBvZiB5b3VyIG1vZGVscy5cblx0XG5cdCAgLy8gQ3JlYXRpbmcgYSBCYWNrYm9uZS5WaWV3IGNyZWF0ZXMgaXRzIGluaXRpYWwgZWxlbWVudCBvdXRzaWRlIG9mIHRoZSBET00sXG5cdCAgLy8gaWYgYW4gZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgcHJvdmlkZWQuLi5cblx0ICB2YXIgVmlldyA9IEJhY2tib25lLlZpZXcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQoJ3ZpZXcnKTtcblx0ICAgIF8uZXh0ZW5kKHRoaXMsIF8ucGljayhvcHRpb25zLCB2aWV3T3B0aW9ucykpO1xuXHQgICAgdGhpcy5fZW5zdXJlRWxlbWVudCgpO1xuXHQgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ2FjaGVkIHJlZ2V4IHRvIHNwbGl0IGtleXMgZm9yIGBkZWxlZ2F0ZWAuXG5cdCAgdmFyIGRlbGVnYXRlRXZlbnRTcGxpdHRlciA9IC9eKFxcUyspXFxzKiguKikkLztcblx0XG5cdCAgLy8gTGlzdCBvZiB2aWV3IG9wdGlvbnMgdG8gYmUgc2V0IGFzIHByb3BlcnRpZXMuXG5cdCAgdmFyIHZpZXdPcHRpb25zID0gWydtb2RlbCcsICdjb2xsZWN0aW9uJywgJ2VsJywgJ2lkJywgJ2F0dHJpYnV0ZXMnLCAnY2xhc3NOYW1lJywgJ3RhZ05hbWUnLCAnZXZlbnRzJ107XG5cdFxuXHQgIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5WaWV3KiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cblx0ICBfLmV4dGVuZChWaWV3LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cdFxuXHQgICAgLy8gVGhlIGRlZmF1bHQgYHRhZ05hbWVgIG9mIGEgVmlldydzIGVsZW1lbnQgaXMgYFwiZGl2XCJgLlxuXHQgICAgdGFnTmFtZTogJ2RpdicsXG5cdFxuXHQgICAgLy8galF1ZXJ5IGRlbGVnYXRlIGZvciBlbGVtZW50IGxvb2t1cCwgc2NvcGVkIHRvIERPTSBlbGVtZW50cyB3aXRoaW4gdGhlXG5cdCAgICAvLyBjdXJyZW50IHZpZXcuIFRoaXMgc2hvdWxkIGJlIHByZWZlcnJlZCB0byBnbG9iYWwgbG9va3VwcyB3aGVyZSBwb3NzaWJsZS5cblx0ICAgICQ6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLiRlbC5maW5kKHNlbGVjdG9yKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cblx0ICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblx0XG5cdCAgICAvLyAqKnJlbmRlcioqIGlzIHRoZSBjb3JlIGZ1bmN0aW9uIHRoYXQgeW91ciB2aWV3IHNob3VsZCBvdmVycmlkZSwgaW4gb3JkZXJcblx0ICAgIC8vIHRvIHBvcHVsYXRlIGl0cyBlbGVtZW50IChgdGhpcy5lbGApLCB3aXRoIHRoZSBhcHByb3ByaWF0ZSBIVE1MLiBUaGVcblx0ICAgIC8vIGNvbnZlbnRpb24gaXMgZm9yICoqcmVuZGVyKiogdG8gYWx3YXlzIHJldHVybiBgdGhpc2AuXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gUmVtb3ZlIHRoaXMgdmlldyBieSB0YWtpbmcgdGhlIGVsZW1lbnQgb3V0IG9mIHRoZSBET00sIGFuZCByZW1vdmluZyBhbnlcblx0ICAgIC8vIGFwcGxpY2FibGUgQmFja2JvbmUuRXZlbnRzIGxpc3RlbmVycy5cblx0ICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQoKTtcblx0ICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nKCk7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBSZW1vdmUgdGhpcyB2aWV3J3MgZWxlbWVudCBmcm9tIHRoZSBkb2N1bWVudCBhbmQgYWxsIGV2ZW50IGxpc3RlbmVyc1xuXHQgICAgLy8gYXR0YWNoZWQgdG8gaXQuIEV4cG9zZWQgZm9yIHN1YmNsYXNzZXMgdXNpbmcgYW4gYWx0ZXJuYXRpdmUgRE9NXG5cdCAgICAvLyBtYW5pcHVsYXRpb24gQVBJLlxuXHQgICAgX3JlbW92ZUVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQ2hhbmdlIHRoZSB2aWV3J3MgZWxlbWVudCAoYHRoaXMuZWxgIHByb3BlcnR5KSBhbmQgcmUtZGVsZWdhdGUgdGhlXG5cdCAgICAvLyB2aWV3J3MgZXZlbnRzIG9uIHRoZSBuZXcgZWxlbWVudC5cblx0ICAgIHNldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0ICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG5cdCAgICAgIHRoaXMuX3NldEVsZW1lbnQoZWxlbWVudCk7XG5cdCAgICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIENyZWF0ZXMgdGhlIGB0aGlzLmVsYCBhbmQgYHRoaXMuJGVsYCByZWZlcmVuY2VzIGZvciB0aGlzIHZpZXcgdXNpbmcgdGhlXG5cdCAgICAvLyBnaXZlbiBgZWxgLiBgZWxgIGNhbiBiZSBhIENTUyBzZWxlY3RvciBvciBhbiBIVE1MIHN0cmluZywgYSBqUXVlcnlcblx0ICAgIC8vIGNvbnRleHQgb3IgYW4gZWxlbWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdGhpcyB0byB1dGlsaXplIGFuXG5cdCAgICAvLyBhbHRlcm5hdGl2ZSBET00gbWFuaXB1bGF0aW9uIEFQSSBhbmQgYXJlIG9ubHkgcmVxdWlyZWQgdG8gc2V0IHRoZVxuXHQgICAgLy8gYHRoaXMuZWxgIHByb3BlcnR5LlxuXHQgICAgX3NldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsKSB7XG5cdCAgICAgIHRoaXMuJGVsID0gZWwgaW5zdGFuY2VvZiBCYWNrYm9uZS4kID8gZWwgOiBCYWNrYm9uZS4kKGVsKTtcblx0ICAgICAgdGhpcy5lbCA9IHRoaXMuJGVsWzBdO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBTZXQgY2FsbGJhY2tzLCB3aGVyZSBgdGhpcy5ldmVudHNgIGlzIGEgaGFzaCBvZlxuXHQgICAgLy9cblx0ICAgIC8vICp7XCJldmVudCBzZWxlY3RvclwiOiBcImNhbGxiYWNrXCJ9KlxuXHQgICAgLy9cblx0ICAgIC8vICAgICB7XG5cdCAgICAvLyAgICAgICAnbW91c2Vkb3duIC50aXRsZSc6ICAnZWRpdCcsXG5cdCAgICAvLyAgICAgICAnY2xpY2sgLmJ1dHRvbic6ICAgICAnc2F2ZScsXG5cdCAgICAvLyAgICAgICAnY2xpY2sgLm9wZW4nOiAgICAgICBmdW5jdGlvbihlKSB7IC4uLiB9XG5cdCAgICAvLyAgICAgfVxuXHQgICAgLy9cblx0ICAgIC8vIHBhaXJzLiBDYWxsYmFja3Mgd2lsbCBiZSBib3VuZCB0byB0aGUgdmlldywgd2l0aCBgdGhpc2Agc2V0IHByb3Blcmx5LlxuXHQgICAgLy8gVXNlcyBldmVudCBkZWxlZ2F0aW9uIGZvciBlZmZpY2llbmN5LlxuXHQgICAgLy8gT21pdHRpbmcgdGhlIHNlbGVjdG9yIGJpbmRzIHRoZSBldmVudCB0byBgdGhpcy5lbGAuXG5cdCAgICBkZWxlZ2F0ZUV2ZW50czogZnVuY3Rpb24oZXZlbnRzKSB7XG5cdCAgICAgIGV2ZW50cyB8fCAoZXZlbnRzID0gXy5yZXN1bHQodGhpcywgJ2V2ZW50cycpKTtcblx0ICAgICAgaWYgKCFldmVudHMpIHJldHVybiB0aGlzO1xuXHQgICAgICB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIGV2ZW50cykge1xuXHQgICAgICAgIHZhciBtZXRob2QgPSBldmVudHNba2V5XTtcblx0ICAgICAgICBpZiAoIV8uaXNGdW5jdGlvbihtZXRob2QpKSBtZXRob2QgPSB0aGlzW21ldGhvZF07XG5cdCAgICAgICAgaWYgKCFtZXRob2QpIGNvbnRpbnVlO1xuXHQgICAgICAgIHZhciBtYXRjaCA9IGtleS5tYXRjaChkZWxlZ2F0ZUV2ZW50U3BsaXR0ZXIpO1xuXHQgICAgICAgIHRoaXMuZGVsZWdhdGUobWF0Y2hbMV0sIG1hdGNoWzJdLCBfLmJpbmQobWV0aG9kLCB0aGlzKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEFkZCBhIHNpbmdsZSBldmVudCBsaXN0ZW5lciB0byB0aGUgdmlldydzIGVsZW1lbnQgKG9yIGEgY2hpbGQgZWxlbWVudFxuXHQgICAgLy8gdXNpbmcgYHNlbGVjdG9yYCkuIFRoaXMgb25seSB3b3JrcyBmb3IgZGVsZWdhdGUtYWJsZSBldmVudHM6IG5vdCBgZm9jdXNgLFxuXHQgICAgLy8gYGJsdXJgLCBhbmQgbm90IGBjaGFuZ2VgLCBgc3VibWl0YCwgYW5kIGByZXNldGAgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG5cdCAgICBkZWxlZ2F0ZTogZnVuY3Rpb24oZXZlbnROYW1lLCBzZWxlY3RvciwgbGlzdGVuZXIpIHtcblx0ICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lICsgJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCwgc2VsZWN0b3IsIGxpc3RlbmVyKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIENsZWFycyBhbGwgY2FsbGJhY2tzIHByZXZpb3VzbHkgYm91bmQgdG8gdGhlIHZpZXcgYnkgYGRlbGVnYXRlRXZlbnRzYC5cblx0ICAgIC8vIFlvdSB1c3VhbGx5IGRvbid0IG5lZWQgdG8gdXNlIHRoaXMsIGJ1dCBtYXkgd2lzaCB0byBpZiB5b3UgaGF2ZSBtdWx0aXBsZVxuXHQgICAgLy8gQmFja2JvbmUgdmlld3MgYXR0YWNoZWQgdG8gdGhlIHNhbWUgRE9NIGVsZW1lbnQuXG5cdCAgICB1bmRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKHRoaXMuJGVsKSB0aGlzLiRlbC5vZmYoJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCk7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBBIGZpbmVyLWdyYWluZWQgYHVuZGVsZWdhdGVFdmVudHNgIGZvciByZW1vdmluZyBhIHNpbmdsZSBkZWxlZ2F0ZWQgZXZlbnQuXG5cdCAgICAvLyBgc2VsZWN0b3JgIGFuZCBgbGlzdGVuZXJgIGFyZSBib3RoIG9wdGlvbmFsLlxuXHQgICAgdW5kZWxlZ2F0ZTogZnVuY3Rpb24oZXZlbnROYW1lLCBzZWxlY3RvciwgbGlzdGVuZXIpIHtcblx0ICAgICAgdGhpcy4kZWwub2ZmKGV2ZW50TmFtZSArICcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQsIHNlbGVjdG9yLCBsaXN0ZW5lcik7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBQcm9kdWNlcyBhIERPTSBlbGVtZW50IHRvIGJlIGFzc2lnbmVkIHRvIHlvdXIgdmlldy4gRXhwb3NlZCBmb3Jcblx0ICAgIC8vIHN1YmNsYXNzZXMgdXNpbmcgYW4gYWx0ZXJuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiBBUEkuXG5cdCAgICBfY3JlYXRlRWxlbWVudDogZnVuY3Rpb24odGFnTmFtZSkge1xuXHQgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRW5zdXJlIHRoYXQgdGhlIFZpZXcgaGFzIGEgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG5cdCAgICAvLyBJZiBgdGhpcy5lbGAgaXMgYSBzdHJpbmcsIHBhc3MgaXQgdGhyb3VnaCBgJCgpYCwgdGFrZSB0aGUgZmlyc3Rcblx0ICAgIC8vIG1hdGNoaW5nIGVsZW1lbnQsIGFuZCByZS1hc3NpZ24gaXQgdG8gYGVsYC4gT3RoZXJ3aXNlLCBjcmVhdGVcblx0ICAgIC8vIGFuIGVsZW1lbnQgZnJvbSB0aGUgYGlkYCwgYGNsYXNzTmFtZWAgYW5kIGB0YWdOYW1lYCBwcm9wZXJ0aWVzLlxuXHQgICAgX2Vuc3VyZUVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAoIXRoaXMuZWwpIHtcblx0ICAgICAgICB2YXIgYXR0cnMgPSBfLmV4dGVuZCh7fSwgXy5yZXN1bHQodGhpcywgJ2F0dHJpYnV0ZXMnKSk7XG5cdCAgICAgICAgaWYgKHRoaXMuaWQpIGF0dHJzLmlkID0gXy5yZXN1bHQodGhpcywgJ2lkJyk7XG5cdCAgICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSBhdHRyc1snY2xhc3MnXSA9IF8ucmVzdWx0KHRoaXMsICdjbGFzc05hbWUnKTtcblx0ICAgICAgICB0aGlzLnNldEVsZW1lbnQodGhpcy5fY3JlYXRlRWxlbWVudChfLnJlc3VsdCh0aGlzLCAndGFnTmFtZScpKSk7XG5cdCAgICAgICAgdGhpcy5fc2V0QXR0cmlidXRlcyhhdHRycyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5zZXRFbGVtZW50KF8ucmVzdWx0KHRoaXMsICdlbCcpKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvLyBTZXQgYXR0cmlidXRlcyBmcm9tIGEgaGFzaCBvbiB0aGlzIHZpZXcncyBlbGVtZW50LiAgRXhwb3NlZCBmb3Jcblx0ICAgIC8vIHN1YmNsYXNzZXMgdXNpbmcgYW4gYWx0ZXJuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiBBUEkuXG5cdCAgICBfc2V0QXR0cmlidXRlczogZnVuY3Rpb24oYXR0cmlidXRlcykge1xuXHQgICAgICB0aGlzLiRlbC5hdHRyKGF0dHJpYnV0ZXMpO1xuXHQgICAgfVxuXHRcblx0ICB9KTtcblx0XG5cdCAgLy8gQmFja2JvbmUuc3luY1xuXHQgIC8vIC0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIG1hbm5lciBpbiB3aGljaCBCYWNrYm9uZSBwZXJzaXN0c1xuXHQgIC8vIG1vZGVscyB0byB0aGUgc2VydmVyLiBZb3Ugd2lsbCBiZSBwYXNzZWQgdGhlIHR5cGUgb2YgcmVxdWVzdCwgYW5kIHRoZVxuXHQgIC8vIG1vZGVsIGluIHF1ZXN0aW9uLiBCeSBkZWZhdWx0LCBtYWtlcyBhIFJFU1RmdWwgQWpheCByZXF1ZXN0XG5cdCAgLy8gdG8gdGhlIG1vZGVsJ3MgYHVybCgpYC4gU29tZSBwb3NzaWJsZSBjdXN0b21pemF0aW9ucyBjb3VsZCBiZTpcblx0ICAvL1xuXHQgIC8vICogVXNlIGBzZXRUaW1lb3V0YCB0byBiYXRjaCByYXBpZC1maXJlIHVwZGF0ZXMgaW50byBhIHNpbmdsZSByZXF1ZXN0LlxuXHQgIC8vICogU2VuZCB1cCB0aGUgbW9kZWxzIGFzIFhNTCBpbnN0ZWFkIG9mIEpTT04uXG5cdCAgLy8gKiBQZXJzaXN0IG1vZGVscyB2aWEgV2ViU29ja2V0cyBpbnN0ZWFkIG9mIEFqYXguXG5cdCAgLy9cblx0ICAvLyBUdXJuIG9uIGBCYWNrYm9uZS5lbXVsYXRlSFRUUGAgaW4gb3JkZXIgdG8gc2VuZCBgUFVUYCBhbmQgYERFTEVURWAgcmVxdWVzdHNcblx0ICAvLyBhcyBgUE9TVGAsIHdpdGggYSBgX21ldGhvZGAgcGFyYW1ldGVyIGNvbnRhaW5pbmcgdGhlIHRydWUgSFRUUCBtZXRob2QsXG5cdCAgLy8gYXMgd2VsbCBhcyBhbGwgcmVxdWVzdHMgd2l0aCB0aGUgYm9keSBhcyBgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkYFxuXHQgIC8vIGluc3RlYWQgb2YgYGFwcGxpY2F0aW9uL2pzb25gIHdpdGggdGhlIG1vZGVsIGluIGEgcGFyYW0gbmFtZWQgYG1vZGVsYC5cblx0ICAvLyBVc2VmdWwgd2hlbiBpbnRlcmZhY2luZyB3aXRoIHNlcnZlci1zaWRlIGxhbmd1YWdlcyBsaWtlICoqUEhQKiogdGhhdCBtYWtlXG5cdCAgLy8gaXQgZGlmZmljdWx0IHRvIHJlYWQgdGhlIGJvZHkgb2YgYFBVVGAgcmVxdWVzdHMuXG5cdCAgQmFja2JvbmUuc3luYyA9IGZ1bmN0aW9uKG1ldGhvZCwgbW9kZWwsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB0eXBlID0gbWV0aG9kTWFwW21ldGhvZF07XG5cdFxuXHQgICAgLy8gRGVmYXVsdCBvcHRpb25zLCB1bmxlc3Mgc3BlY2lmaWVkLlxuXHQgICAgXy5kZWZhdWx0cyhvcHRpb25zIHx8IChvcHRpb25zID0ge30pLCB7XG5cdCAgICAgIGVtdWxhdGVIVFRQOiBCYWNrYm9uZS5lbXVsYXRlSFRUUCxcblx0ICAgICAgZW11bGF0ZUpTT046IEJhY2tib25lLmVtdWxhdGVKU09OXG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyBEZWZhdWx0IEpTT04tcmVxdWVzdCBvcHRpb25zLlxuXHQgICAgdmFyIHBhcmFtcyA9IHt0eXBlOiB0eXBlLCBkYXRhVHlwZTogJ2pzb24nfTtcblx0XG5cdCAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIGEgVVJMLlxuXHQgICAgaWYgKCFvcHRpb25zLnVybCkge1xuXHQgICAgICBwYXJhbXMudXJsID0gXy5yZXN1bHQobW9kZWwsICd1cmwnKSB8fCB1cmxFcnJvcigpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgdGhlIGFwcHJvcHJpYXRlIHJlcXVlc3QgZGF0YS5cblx0ICAgIGlmIChvcHRpb25zLmRhdGEgPT0gbnVsbCAmJiBtb2RlbCAmJiAobWV0aG9kID09PSAnY3JlYXRlJyB8fCBtZXRob2QgPT09ICd1cGRhdGUnIHx8IG1ldGhvZCA9PT0gJ3BhdGNoJykpIHtcblx0ICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXHQgICAgICBwYXJhbXMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYXR0cnMgfHwgbW9kZWwudG9KU09OKG9wdGlvbnMpKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBGb3Igb2xkZXIgc2VydmVycywgZW11bGF0ZSBKU09OIGJ5IGVuY29kaW5nIHRoZSByZXF1ZXN0IGludG8gYW4gSFRNTC1mb3JtLlxuXHQgICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHtcblx0ICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG5cdCAgICAgIHBhcmFtcy5kYXRhID0gcGFyYW1zLmRhdGEgPyB7bW9kZWw6IHBhcmFtcy5kYXRhfSA6IHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEhUVFAgYnkgbWltaWNraW5nIHRoZSBIVFRQIG1ldGhvZCB3aXRoIGBfbWV0aG9kYFxuXHQgICAgLy8gQW5kIGFuIGBYLUhUVFAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG5cdCAgICBpZiAob3B0aW9ucy5lbXVsYXRlSFRUUCAmJiAodHlwZSA9PT0gJ1BVVCcgfHwgdHlwZSA9PT0gJ0RFTEVURScgfHwgdHlwZSA9PT0gJ1BBVENIJykpIHtcblx0ICAgICAgcGFyYW1zLnR5cGUgPSAnUE9TVCc7XG5cdCAgICAgIGlmIChvcHRpb25zLmVtdWxhdGVKU09OKSBwYXJhbXMuZGF0YS5fbWV0aG9kID0gdHlwZTtcblx0ICAgICAgdmFyIGJlZm9yZVNlbmQgPSBvcHRpb25zLmJlZm9yZVNlbmQ7XG5cdCAgICAgIG9wdGlvbnMuYmVmb3JlU2VuZCA9IGZ1bmN0aW9uKHhocikge1xuXHQgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUhUVFAtTWV0aG9kLU92ZXJyaWRlJywgdHlwZSk7XG5cdCAgICAgICAgaWYgKGJlZm9yZVNlbmQpIHJldHVybiBiZWZvcmVTZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRG9uJ3QgcHJvY2VzcyBkYXRhIG9uIGEgbm9uLUdFVCByZXF1ZXN0LlxuXHQgICAgaWYgKHBhcmFtcy50eXBlICE9PSAnR0VUJyAmJiAhb3B0aW9ucy5lbXVsYXRlSlNPTikge1xuXHQgICAgICBwYXJhbXMucHJvY2Vzc0RhdGEgPSBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBQYXNzIGFsb25nIGB0ZXh0U3RhdHVzYCBhbmQgYGVycm9yVGhyb3duYCBmcm9tIGpRdWVyeS5cblx0ICAgIHZhciBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG5cdCAgICBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24oeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuXHQgICAgICBvcHRpb25zLnRleHRTdGF0dXMgPSB0ZXh0U3RhdHVzO1xuXHQgICAgICBvcHRpb25zLmVycm9yVGhyb3duID0gZXJyb3JUaHJvd247XG5cdCAgICAgIGlmIChlcnJvcikgZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBNYWtlIHRoZSByZXF1ZXN0LCBhbGxvd2luZyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnkgQWpheCBvcHRpb25zLlxuXHQgICAgdmFyIHhociA9IG9wdGlvbnMueGhyID0gQmFja2JvbmUuYWpheChfLmV4dGVuZChwYXJhbXMsIG9wdGlvbnMpKTtcblx0ICAgIG1vZGVsLnRyaWdnZXIoJ3JlcXVlc3QnLCBtb2RlbCwgeGhyLCBvcHRpb25zKTtcblx0ICAgIHJldHVybiB4aHI7XG5cdCAgfTtcblx0XG5cdCAgLy8gTWFwIGZyb20gQ1JVRCB0byBIVFRQIGZvciBvdXIgZGVmYXVsdCBgQmFja2JvbmUuc3luY2AgaW1wbGVtZW50YXRpb24uXG5cdCAgdmFyIG1ldGhvZE1hcCA9IHtcblx0ICAgICdjcmVhdGUnOiAnUE9TVCcsXG5cdCAgICAndXBkYXRlJzogJ1BVVCcsXG5cdCAgICAncGF0Y2gnOiAnUEFUQ0gnLFxuXHQgICAgJ2RlbGV0ZSc6ICdERUxFVEUnLFxuXHQgICAgJ3JlYWQnOiAnR0VUJ1xuXHQgIH07XG5cdFxuXHQgIC8vIFNldCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBgQmFja2JvbmUuYWpheGAgdG8gcHJveHkgdGhyb3VnaCB0byBgJGAuXG5cdCAgLy8gT3ZlcnJpZGUgdGhpcyBpZiB5b3UnZCBsaWtlIHRvIHVzZSBhIGRpZmZlcmVudCBsaWJyYXJ5LlxuXHQgIEJhY2tib25lLmFqYXggPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBCYWNrYm9uZS4kLmFqYXguYXBwbHkoQmFja2JvbmUuJCwgYXJndW1lbnRzKTtcblx0ICB9O1xuXHRcblx0ICAvLyBCYWNrYm9uZS5Sb3V0ZXJcblx0ICAvLyAtLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gUm91dGVycyBtYXAgZmF1eC1VUkxzIHRvIGFjdGlvbnMsIGFuZCBmaXJlIGV2ZW50cyB3aGVuIHJvdXRlcyBhcmVcblx0ICAvLyBtYXRjaGVkLiBDcmVhdGluZyBhIG5ldyBvbmUgc2V0cyBpdHMgYHJvdXRlc2AgaGFzaCwgaWYgbm90IHNldCBzdGF0aWNhbGx5LlxuXHQgIHZhciBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXHQgICAgaWYgKG9wdGlvbnMucm91dGVzKSB0aGlzLnJvdXRlcyA9IG9wdGlvbnMucm91dGVzO1xuXHQgICAgdGhpcy5fYmluZFJvdXRlcygpO1xuXHQgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ2FjaGVkIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm9yIG1hdGNoaW5nIG5hbWVkIHBhcmFtIHBhcnRzIGFuZCBzcGxhdHRlZFxuXHQgIC8vIHBhcnRzIG9mIHJvdXRlIHN0cmluZ3MuXG5cdCAgdmFyIG9wdGlvbmFsUGFyYW0gPSAvXFwoKC4qPylcXCkvZztcblx0ICB2YXIgbmFtZWRQYXJhbSAgICA9IC8oXFwoXFw/KT86XFx3Ky9nO1xuXHQgIHZhciBzcGxhdFBhcmFtICAgID0gL1xcKlxcdysvZztcblx0ICB2YXIgZXNjYXBlUmVnRXhwICA9IC9bXFwte31cXFtcXF0rPy4sXFxcXFxcXiR8I1xcc10vZztcblx0XG5cdCAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlJvdXRlcioqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG5cdCAgXy5leHRlbmQoUm91dGVyLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cdFxuXHQgICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG5cdCAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cblx0ICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblx0XG5cdCAgICAvLyBNYW51YWxseSBiaW5kIGEgc2luZ2xlIG5hbWVkIHJvdXRlIHRvIGEgY2FsbGJhY2suIEZvciBleGFtcGxlOlxuXHQgICAgLy9cblx0ICAgIC8vICAgICB0aGlzLnJvdXRlKCdzZWFyY2gvOnF1ZXJ5L3A6bnVtJywgJ3NlYXJjaCcsIGZ1bmN0aW9uKHF1ZXJ5LCBudW0pIHtcblx0ICAgIC8vICAgICAgIC4uLlxuXHQgICAgLy8gICAgIH0pO1xuXHQgICAgLy9cblx0ICAgIHJvdXRlOiBmdW5jdGlvbihyb3V0ZSwgbmFtZSwgY2FsbGJhY2spIHtcblx0ICAgICAgaWYgKCFfLmlzUmVnRXhwKHJvdXRlKSkgcm91dGUgPSB0aGlzLl9yb3V0ZVRvUmVnRXhwKHJvdXRlKTtcblx0ICAgICAgaWYgKF8uaXNGdW5jdGlvbihuYW1lKSkge1xuXHQgICAgICAgIGNhbGxiYWNrID0gbmFtZTtcblx0ICAgICAgICBuYW1lID0gJyc7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFjYWxsYmFjaykgY2FsbGJhY2sgPSB0aGlzW25hbWVdO1xuXHQgICAgICB2YXIgcm91dGVyID0gdGhpcztcblx0ICAgICAgQmFja2JvbmUuaGlzdG9yeS5yb3V0ZShyb3V0ZSwgZnVuY3Rpb24oZnJhZ21lbnQpIHtcblx0ICAgICAgICB2YXIgYXJncyA9IHJvdXRlci5fZXh0cmFjdFBhcmFtZXRlcnMocm91dGUsIGZyYWdtZW50KTtcblx0ICAgICAgICBpZiAocm91dGVyLmV4ZWN1dGUoY2FsbGJhY2ssIGFyZ3MsIG5hbWUpICE9PSBmYWxzZSkge1xuXHQgICAgICAgICAgcm91dGVyLnRyaWdnZXIuYXBwbHkocm91dGVyLCBbJ3JvdXRlOicgKyBuYW1lXS5jb25jYXQoYXJncykpO1xuXHQgICAgICAgICAgcm91dGVyLnRyaWdnZXIoJ3JvdXRlJywgbmFtZSwgYXJncyk7XG5cdCAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnRyaWdnZXIoJ3JvdXRlJywgcm91dGVyLCBuYW1lLCBhcmdzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gRXhlY3V0ZSBhIHJvdXRlIGhhbmRsZXIgd2l0aCB0aGUgcHJvdmlkZWQgcGFyYW1ldGVycy4gIFRoaXMgaXMgYW5cblx0ICAgIC8vIGV4Y2VsbGVudCBwbGFjZSB0byBkbyBwcmUtcm91dGUgc2V0dXAgb3IgcG9zdC1yb3V0ZSBjbGVhbnVwLlxuXHQgICAgZXhlY3V0ZTogZnVuY3Rpb24oY2FsbGJhY2ssIGFyZ3MsIG5hbWUpIHtcblx0ICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gU2ltcGxlIHByb3h5IHRvIGBCYWNrYm9uZS5oaXN0b3J5YCB0byBzYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGlzdG9yeS5cblx0ICAgIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCwgb3B0aW9ucykge1xuXHQgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LCBvcHRpb25zKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEJpbmQgYWxsIGRlZmluZWQgcm91dGVzIHRvIGBCYWNrYm9uZS5oaXN0b3J5YC4gV2UgaGF2ZSB0byByZXZlcnNlIHRoZVxuXHQgICAgLy8gb3JkZXIgb2YgdGhlIHJvdXRlcyBoZXJlIHRvIHN1cHBvcnQgYmVoYXZpb3Igd2hlcmUgdGhlIG1vc3QgZ2VuZXJhbFxuXHQgICAgLy8gcm91dGVzIGNhbiBiZSBkZWZpbmVkIGF0IHRoZSBib3R0b20gb2YgdGhlIHJvdXRlIG1hcC5cblx0ICAgIF9iaW5kUm91dGVzOiBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKCF0aGlzLnJvdXRlcykgcmV0dXJuO1xuXHQgICAgICB0aGlzLnJvdXRlcyA9IF8ucmVzdWx0KHRoaXMsICdyb3V0ZXMnKTtcblx0ICAgICAgdmFyIHJvdXRlLCByb3V0ZXMgPSBfLmtleXModGhpcy5yb3V0ZXMpO1xuXHQgICAgICB3aGlsZSAoKHJvdXRlID0gcm91dGVzLnBvcCgpKSAhPSBudWxsKSB7XG5cdCAgICAgICAgdGhpcy5yb3V0ZShyb3V0ZSwgdGhpcy5yb3V0ZXNbcm91dGVdKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvLyBDb252ZXJ0IGEgcm91dGUgc3RyaW5nIGludG8gYSByZWd1bGFyIGV4cHJlc3Npb24sIHN1aXRhYmxlIGZvciBtYXRjaGluZ1xuXHQgICAgLy8gYWdhaW5zdCB0aGUgY3VycmVudCBsb2NhdGlvbiBoYXNoLlxuXHQgICAgX3JvdXRlVG9SZWdFeHA6IGZ1bmN0aW9uKHJvdXRlKSB7XG5cdCAgICAgIHJvdXRlID0gcm91dGUucmVwbGFjZShlc2NhcGVSZWdFeHAsICdcXFxcJCYnKVxuXHQgICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uob3B0aW9uYWxQYXJhbSwgJyg/OiQxKT8nKVxuXHQgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UobmFtZWRQYXJhbSwgZnVuY3Rpb24obWF0Y2gsIG9wdGlvbmFsKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25hbCA/IG1hdGNoIDogJyhbXi8/XSspJztcblx0ICAgICAgICAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgICAgICAgICAucmVwbGFjZShzcGxhdFBhcmFtLCAnKFteP10qPyknKTtcblx0ICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcm91dGUgKyAnKD86XFxcXD8oW1xcXFxzXFxcXFNdKikpPyQnKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gR2l2ZW4gYSByb3V0ZSwgYW5kIGEgVVJMIGZyYWdtZW50IHRoYXQgaXQgbWF0Y2hlcywgcmV0dXJuIHRoZSBhcnJheSBvZlxuXHQgICAgLy8gZXh0cmFjdGVkIGRlY29kZWQgcGFyYW1ldGVycy4gRW1wdHkgb3IgdW5tYXRjaGVkIHBhcmFtZXRlcnMgd2lsbCBiZVxuXHQgICAgLy8gdHJlYXRlZCBhcyBgbnVsbGAgdG8gbm9ybWFsaXplIGNyb3NzLWJyb3dzZXIgYmVoYXZpb3IuXG5cdCAgICBfZXh0cmFjdFBhcmFtZXRlcnM6IGZ1bmN0aW9uKHJvdXRlLCBmcmFnbWVudCkge1xuXHQgICAgICB2YXIgcGFyYW1zID0gcm91dGUuZXhlYyhmcmFnbWVudCkuc2xpY2UoMSk7XG5cdCAgICAgIHJldHVybiBfLm1hcChwYXJhbXMsIGZ1bmN0aW9uKHBhcmFtLCBpKSB7XG5cdCAgICAgICAgLy8gRG9uJ3QgZGVjb2RlIHRoZSBzZWFyY2ggcGFyYW1zLlxuXHQgICAgICAgIGlmIChpID09PSBwYXJhbXMubGVuZ3RoIC0gMSkgcmV0dXJuIHBhcmFtIHx8IG51bGw7XG5cdCAgICAgICAgcmV0dXJuIHBhcmFtID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtKSA6IG51bGw7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICB9KTtcblx0XG5cdCAgLy8gQmFja2JvbmUuSGlzdG9yeVxuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgLy8gSGFuZGxlcyBjcm9zcy1icm93c2VyIGhpc3RvcnkgbWFuYWdlbWVudCwgYmFzZWQgb24gZWl0aGVyXG5cdCAgLy8gW3B1c2hTdGF0ZV0oaHR0cDovL2RpdmVpbnRvaHRtbDUuaW5mby9oaXN0b3J5Lmh0bWwpIGFuZCByZWFsIFVSTHMsIG9yXG5cdCAgLy8gW29uaGFzaGNoYW5nZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vd2luZG93Lm9uaGFzaGNoYW5nZSlcblx0ICAvLyBhbmQgVVJMIGZyYWdtZW50cy4gSWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgbmVpdGhlciAob2xkIElFLCBuYXRjaCksXG5cdCAgLy8gZmFsbHMgYmFjayB0byBwb2xsaW5nLlxuXHQgIHZhciBIaXN0b3J5ID0gQmFja2JvbmUuSGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuXHQgICAgdGhpcy5jaGVja1VybCA9IF8uYmluZCh0aGlzLmNoZWNrVXJsLCB0aGlzKTtcblx0XG5cdCAgICAvLyBFbnN1cmUgdGhhdCBgSGlzdG9yeWAgY2FuIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgYnJvd3Nlci5cblx0ICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICB0aGlzLmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuXHQgICAgICB0aGlzLmhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyBhIGxlYWRpbmcgaGFzaC9zbGFzaCBhbmQgdHJhaWxpbmcgc3BhY2UuXG5cdCAgdmFyIHJvdXRlU3RyaXBwZXIgPSAvXlsjXFwvXXxcXHMrJC9nO1xuXHRcblx0ICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzLlxuXHQgIHZhciByb290U3RyaXBwZXIgPSAvXlxcLyt8XFwvKyQvZztcblx0XG5cdCAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgdXJscyBvZiBoYXNoLlxuXHQgIHZhciBwYXRoU3RyaXBwZXIgPSAvIy4qJC87XG5cdFxuXHQgIC8vIEhhcyB0aGUgaGlzdG9yeSBoYW5kbGluZyBhbHJlYWR5IGJlZW4gc3RhcnRlZD9cblx0ICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcblx0XG5cdCAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLkhpc3RvcnkqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuXHQgIF8uZXh0ZW5kKEhpc3RvcnkucHJvdG90eXBlLCBFdmVudHMsIHtcblx0XG5cdCAgICAvLyBUaGUgZGVmYXVsdCBpbnRlcnZhbCB0byBwb2xsIGZvciBoYXNoIGNoYW5nZXMsIGlmIG5lY2Vzc2FyeSwgaXNcblx0ICAgIC8vIHR3ZW50eSB0aW1lcyBhIHNlY29uZC5cblx0ICAgIGludGVydmFsOiA1MCxcblx0XG5cdCAgICAvLyBBcmUgd2UgYXQgdGhlIGFwcCByb290P1xuXHQgICAgYXRSb290OiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIHBhdGggPSB0aGlzLmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1teXFwvXSQvLCAnJCYvJyk7XG5cdCAgICAgIHJldHVybiBwYXRoID09PSB0aGlzLnJvb3QgJiYgIXRoaXMuZ2V0U2VhcmNoKCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIERvZXMgdGhlIHBhdGhuYW1lIG1hdGNoIHRoZSByb290P1xuXHQgICAgbWF0Y2hSb290OiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIHBhdGggPSB0aGlzLmRlY29kZUZyYWdtZW50KHRoaXMubG9jYXRpb24ucGF0aG5hbWUpO1xuXHQgICAgICB2YXIgcm9vdFBhdGggPSBwYXRoLnNsaWNlKDAsIHRoaXMucm9vdC5sZW5ndGggLSAxKSArICcvJztcblx0ICAgICAgcmV0dXJuIHJvb3RQYXRoID09PSB0aGlzLnJvb3Q7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFVuaWNvZGUgY2hhcmFjdGVycyBpbiBgbG9jYXRpb24ucGF0aG5hbWVgIGFyZSBwZXJjZW50IGVuY29kZWQgc28gdGhleSdyZVxuXHQgICAgLy8gZGVjb2RlZCBmb3IgY29tcGFyaXNvbi4gYCUyNWAgc2hvdWxkIG5vdCBiZSBkZWNvZGVkIHNpbmNlIGl0IG1heSBiZSBwYXJ0XG5cdCAgICAvLyBvZiBhbiBlbmNvZGVkIHBhcmFtZXRlci5cblx0ICAgIGRlY29kZUZyYWdtZW50OiBmdW5jdGlvbihmcmFnbWVudCkge1xuXHQgICAgICByZXR1cm4gZGVjb2RlVVJJKGZyYWdtZW50LnJlcGxhY2UoLyUyNS9nLCAnJTI1MjUnKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEluIElFNiwgdGhlIGhhc2ggZnJhZ21lbnQgYW5kIHNlYXJjaCBwYXJhbXMgYXJlIGluY29ycmVjdCBpZiB0aGVcblx0ICAgIC8vIGZyYWdtZW50IGNvbnRhaW5zIGA/YC5cblx0ICAgIGdldFNlYXJjaDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBtYXRjaCA9IHRoaXMubG9jYXRpb24uaHJlZi5yZXBsYWNlKC8jLiovLCAnJykubWF0Y2goL1xcPy4rLyk7XG5cdCAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzBdIDogJyc7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEdldHMgdGhlIHRydWUgaGFzaCB2YWx1ZS4gQ2Fubm90IHVzZSBsb2NhdGlvbi5oYXNoIGRpcmVjdGx5IGR1ZSB0byBidWdcblx0ICAgIC8vIGluIEZpcmVmb3ggd2hlcmUgbG9jYXRpb24uaGFzaCB3aWxsIGFsd2F5cyBiZSBkZWNvZGVkLlxuXHQgICAgZ2V0SGFzaDogZnVuY3Rpb24od2luZG93KSB7XG5cdCAgICAgIHZhciBtYXRjaCA9ICh3aW5kb3cgfHwgdGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7XG5cdCAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogJyc7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEdldCB0aGUgcGF0aG5hbWUgYW5kIHNlYXJjaCBwYXJhbXMsIHdpdGhvdXQgdGhlIHJvb3QuXG5cdCAgICBnZXRQYXRoOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIHBhdGggPSB0aGlzLmRlY29kZUZyYWdtZW50KFxuXHQgICAgICAgIHRoaXMubG9jYXRpb24ucGF0aG5hbWUgKyB0aGlzLmdldFNlYXJjaCgpXG5cdCAgICAgICkuc2xpY2UodGhpcy5yb290Lmxlbmd0aCAtIDEpO1xuXHQgICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc2xpY2UoMSkgOiBwYXRoO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBHZXQgdGhlIGNyb3NzLWJyb3dzZXIgbm9ybWFsaXplZCBVUkwgZnJhZ21lbnQgZnJvbSB0aGUgcGF0aCBvciBoYXNoLlxuXHQgICAgZ2V0RnJhZ21lbnQ6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG5cdCAgICAgIGlmIChmcmFnbWVudCA9PSBudWxsKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuX3VzZVB1c2hTdGF0ZSB8fCAhdGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG5cdCAgICAgICAgICBmcmFnbWVudCA9IHRoaXMuZ2V0UGF0aCgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBmcmFnbWVudCA9IHRoaXMuZ2V0SGFzaCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZnJhZ21lbnQucmVwbGFjZShyb3V0ZVN0cmlwcGVyLCAnJyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFN0YXJ0IHRoZSBoYXNoIGNoYW5nZSBoYW5kbGluZywgcmV0dXJuaW5nIGB0cnVlYCBpZiB0aGUgY3VycmVudCBVUkwgbWF0Y2hlc1xuXHQgICAgLy8gYW4gZXhpc3Rpbmcgcm91dGUsIGFuZCBgZmFsc2VgIG90aGVyd2lzZS5cblx0ICAgIHN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAgIGlmIChIaXN0b3J5LnN0YXJ0ZWQpIHRocm93IG5ldyBFcnJvcignQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQnKTtcblx0ICAgICAgSGlzdG9yeS5zdGFydGVkID0gdHJ1ZTtcblx0XG5cdCAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGluaXRpYWwgY29uZmlndXJhdGlvbi4gRG8gd2UgbmVlZCBhbiBpZnJhbWU/XG5cdCAgICAgIC8vIElzIHB1c2hTdGF0ZSBkZXNpcmVkIC4uLiBpcyBpdCBhdmFpbGFibGU/XG5cdCAgICAgIHRoaXMub3B0aW9ucyAgICAgICAgICA9IF8uZXh0ZW5kKHtyb290OiAnLyd9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuXHQgICAgICB0aGlzLnJvb3QgICAgICAgICAgICAgPSB0aGlzLm9wdGlvbnMucm9vdDtcblx0ICAgICAgdGhpcy5fd2FudHNIYXNoQ2hhbmdlID0gdGhpcy5vcHRpb25zLmhhc2hDaGFuZ2UgIT09IGZhbHNlO1xuXHQgICAgICB0aGlzLl9oYXNIYXNoQ2hhbmdlICAgPSAnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3cgJiYgKGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gdm9pZCAwIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDcpO1xuXHQgICAgICB0aGlzLl91c2VIYXNoQ2hhbmdlICAgPSB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5faGFzSGFzaENoYW5nZTtcblx0ICAgICAgdGhpcy5fd2FudHNQdXNoU3RhdGUgID0gISF0aGlzLm9wdGlvbnMucHVzaFN0YXRlO1xuXHQgICAgICB0aGlzLl9oYXNQdXNoU3RhdGUgICAgPSAhISh0aGlzLmhpc3RvcnkgJiYgdGhpcy5oaXN0b3J5LnB1c2hTdGF0ZSk7XG5cdCAgICAgIHRoaXMuX3VzZVB1c2hTdGF0ZSAgICA9IHRoaXMuX3dhbnRzUHVzaFN0YXRlICYmIHRoaXMuX2hhc1B1c2hTdGF0ZTtcblx0ICAgICAgdGhpcy5mcmFnbWVudCAgICAgICAgID0gdGhpcy5nZXRGcmFnbWVudCgpO1xuXHRcblx0ICAgICAgLy8gTm9ybWFsaXplIHJvb3QgdG8gYWx3YXlzIGluY2x1ZGUgYSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaC5cblx0ICAgICAgdGhpcy5yb290ID0gKCcvJyArIHRoaXMucm9vdCArICcvJykucmVwbGFjZShyb290U3RyaXBwZXIsICcvJyk7XG5cdFxuXHQgICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGFzaENoYW5nZSB0byBwdXNoU3RhdGUgb3IgdmljZSB2ZXJzYSBpZiBib3RoIGFyZVxuXHQgICAgICAvLyByZXF1ZXN0ZWQuXG5cdCAgICAgIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5fd2FudHNQdXNoU3RhdGUpIHtcblx0XG5cdCAgICAgICAgLy8gSWYgd2UndmUgc3RhcnRlZCBvZmYgd2l0aCBhIHJvdXRlIGZyb20gYSBgcHVzaFN0YXRlYC1lbmFibGVkXG5cdCAgICAgICAgLy8gYnJvd3NlciwgYnV0IHdlJ3JlIGN1cnJlbnRseSBpbiBhIGJyb3dzZXIgdGhhdCBkb2Vzbid0IHN1cHBvcnQgaXQuLi5cblx0ICAgICAgICBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkge1xuXHQgICAgICAgICAgdmFyIHJvb3RQYXRoID0gdGhpcy5yb290LnNsaWNlKDAsIC0xKSB8fCAnLyc7XG5cdCAgICAgICAgICB0aGlzLmxvY2F0aW9uLnJlcGxhY2Uocm9vdFBhdGggKyAnIycgKyB0aGlzLmdldFBhdGgoKSk7XG5cdCAgICAgICAgICAvLyBSZXR1cm4gaW1tZWRpYXRlbHkgYXMgYnJvd3NlciB3aWxsIGRvIHJlZGlyZWN0IHRvIG5ldyB1cmxcblx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHRcblx0ICAgICAgICAvLyBPciBpZiB3ZSd2ZSBzdGFydGVkIG91dCB3aXRoIGEgaGFzaC1iYXNlZCByb3V0ZSwgYnV0IHdlJ3JlIGN1cnJlbnRseVxuXHQgICAgICAgIC8vIGluIGEgYnJvd3NlciB3aGVyZSBpdCBjb3VsZCBiZSBgcHVzaFN0YXRlYC1iYXNlZCBpbnN0ZWFkLi4uXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUgJiYgdGhpcy5hdFJvb3QoKSkge1xuXHQgICAgICAgICAgdGhpcy5uYXZpZ2F0ZSh0aGlzLmdldEhhc2goKSwge3JlcGxhY2U6IHRydWV9KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBQcm94eSBhbiBpZnJhbWUgdG8gaGFuZGxlIGxvY2F0aW9uIGV2ZW50cyBpZiB0aGUgYnJvd3NlciBkb2Vzbid0XG5cdCAgICAgIC8vIHN1cHBvcnQgdGhlIGBoYXNoY2hhbmdlYCBldmVudCwgSFRNTDUgaGlzdG9yeSwgb3IgdGhlIHVzZXIgd2FudHNcblx0ICAgICAgLy8gYGhhc2hDaGFuZ2VgIGJ1dCBub3QgYHB1c2hTdGF0ZWAuXG5cdCAgICAgIGlmICghdGhpcy5faGFzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgIXRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuXHQgICAgICAgIHRoaXMuaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG5cdCAgICAgICAgdGhpcy5pZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6MCc7XG5cdCAgICAgICAgdGhpcy5pZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ICAgICAgICB0aGlzLmlmcmFtZS50YWJJbmRleCA9IC0xO1xuXHQgICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcblx0ICAgICAgICAvLyBVc2luZyBgYXBwZW5kQ2hpbGRgIHdpbGwgdGhyb3cgb24gSUUgPCA5IGlmIHRoZSBkb2N1bWVudCBpcyBub3QgcmVhZHkuXG5cdCAgICAgICAgdmFyIGlXaW5kb3cgPSBib2R5Lmluc2VydEJlZm9yZSh0aGlzLmlmcmFtZSwgYm9keS5maXJzdENoaWxkKS5jb250ZW50V2luZG93O1xuXHQgICAgICAgIGlXaW5kb3cuZG9jdW1lbnQub3BlbigpO1xuXHQgICAgICAgIGlXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcblx0ICAgICAgICBpV2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIycgKyB0aGlzLmZyYWdtZW50O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBBZGQgYSBjcm9zcy1wbGF0Zm9ybSBgYWRkRXZlbnRMaXN0ZW5lcmAgc2hpbSBmb3Igb2xkZXIgYnJvd3NlcnMuXG5cdCAgICAgIHZhciBhZGRFdmVudExpc3RlbmVyID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgfHwgZnVuY3Rpb24oZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuXHQgICAgICAgIHJldHVybiBhdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBsaXN0ZW5lcik7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB3ZSdyZSB1c2luZyBwdXNoU3RhdGUgb3IgaGFzaGVzLCBhbmQgd2hldGhlclxuXHQgICAgICAvLyAnb25oYXNoY2hhbmdlJyBpcyBzdXBwb3J0ZWQsIGRldGVybWluZSBob3cgd2UgY2hlY2sgdGhlIFVSTCBzdGF0ZS5cblx0ICAgICAgaWYgKHRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuXHQgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoaXMuX3VzZUhhc2hDaGFuZ2UgJiYgIXRoaXMuaWZyYW1lKSB7XG5cdCAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tVcmwsIGZhbHNlKTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UpIHtcblx0ICAgICAgICB0aGlzLl9jaGVja1VybEludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5jaGVja1VybCwgdGhpcy5pbnRlcnZhbCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghdGhpcy5vcHRpb25zLnNpbGVudCkgcmV0dXJuIHRoaXMubG9hZFVybCgpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBEaXNhYmxlIEJhY2tib25lLmhpc3RvcnksIHBlcmhhcHMgdGVtcG9yYXJpbHkuIE5vdCB1c2VmdWwgaW4gYSByZWFsIGFwcCxcblx0ICAgIC8vIGJ1dCBwb3NzaWJseSB1c2VmdWwgZm9yIHVuaXQgdGVzdGluZyBSb3V0ZXJzLlxuXHQgICAgc3RvcDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIEFkZCBhIGNyb3NzLXBsYXRmb3JtIGByZW1vdmVFdmVudExpc3RlbmVyYCBzaGltIGZvciBvbGRlciBicm93c2Vycy5cblx0ICAgICAgdmFyIHJlbW92ZUV2ZW50TGlzdGVuZXIgPSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciB8fCBmdW5jdGlvbihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGRldGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGxpc3RlbmVyKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIFJlbW92ZSB3aW5kb3cgbGlzdGVuZXJzLlxuXHQgICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG5cdCAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsLCBmYWxzZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5fdXNlSGFzaENoYW5nZSAmJiAhdGhpcy5pZnJhbWUpIHtcblx0ICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBDbGVhbiB1cCB0aGUgaWZyYW1lIGlmIG5lY2Vzc2FyeS5cblx0ICAgICAgaWYgKHRoaXMuaWZyYW1lKSB7XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmlmcmFtZSk7XG5cdCAgICAgICAgdGhpcy5pZnJhbWUgPSBudWxsO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBTb21lIGVudmlyb25tZW50cyB3aWxsIHRocm93IHdoZW4gY2xlYXJpbmcgYW4gdW5kZWZpbmVkIGludGVydmFsLlxuXHQgICAgICBpZiAodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCkgY2xlYXJJbnRlcnZhbCh0aGlzLl9jaGVja1VybEludGVydmFsKTtcblx0ICAgICAgSGlzdG9yeS5zdGFydGVkID0gZmFsc2U7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEFkZCBhIHJvdXRlIHRvIGJlIHRlc3RlZCB3aGVuIHRoZSBmcmFnbWVudCBjaGFuZ2VzLiBSb3V0ZXMgYWRkZWQgbGF0ZXJcblx0ICAgIC8vIG1heSBvdmVycmlkZSBwcmV2aW91cyByb3V0ZXMuXG5cdCAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIGNhbGxiYWNrKSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlcnMudW5zaGlmdCh7cm91dGU6IHJvdXRlLCBjYWxsYmFjazogY2FsbGJhY2t9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQ2hlY2tzIHRoZSBjdXJyZW50IFVSTCB0byBzZWUgaWYgaXQgaGFzIGNoYW5nZWQsIGFuZCBpZiBpdCBoYXMsXG5cdCAgICAvLyBjYWxscyBgbG9hZFVybGAsIG5vcm1hbGl6aW5nIGFjcm9zcyB0aGUgaGlkZGVuIGlmcmFtZS5cblx0ICAgIGNoZWNrVXJsOiBmdW5jdGlvbihlKSB7XG5cdCAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRGcmFnbWVudCgpO1xuXHRcblx0ICAgICAgLy8gSWYgdGhlIHVzZXIgcHJlc3NlZCB0aGUgYmFjayBidXR0b24sIHRoZSBpZnJhbWUncyBoYXNoIHdpbGwgaGF2ZVxuXHQgICAgICAvLyBjaGFuZ2VkIGFuZCB3ZSBzaG91bGQgdXNlIHRoYXQgZm9yIGNvbXBhcmlzb24uXG5cdCAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50ICYmIHRoaXMuaWZyYW1lKSB7XG5cdCAgICAgICAgY3VycmVudCA9IHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMuZnJhZ21lbnQpIHJldHVybiBmYWxzZTtcblx0ICAgICAgaWYgKHRoaXMuaWZyYW1lKSB0aGlzLm5hdmlnYXRlKGN1cnJlbnQpO1xuXHQgICAgICB0aGlzLmxvYWRVcmwoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gQXR0ZW1wdCB0byBsb2FkIHRoZSBjdXJyZW50IFVSTCBmcmFnbWVudC4gSWYgYSByb3V0ZSBzdWNjZWVkcyB3aXRoIGFcblx0ICAgIC8vIG1hdGNoLCByZXR1cm5zIGB0cnVlYC4gSWYgbm8gZGVmaW5lZCByb3V0ZXMgbWF0Y2hlcyB0aGUgZnJhZ21lbnQsXG5cdCAgICAvLyByZXR1cm5zIGBmYWxzZWAuXG5cdCAgICBsb2FkVXJsOiBmdW5jdGlvbihmcmFnbWVudCkge1xuXHQgICAgICAvLyBJZiB0aGUgcm9vdCBkb2Vzbid0IG1hdGNoLCBubyByb3V0ZXMgY2FuIG1hdGNoIGVpdGhlci5cblx0ICAgICAgaWYgKCF0aGlzLm1hdGNoUm9vdCgpKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgIGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoZnJhZ21lbnQpO1xuXHQgICAgICByZXR1cm4gXy5zb21lKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uKGhhbmRsZXIpIHtcblx0ICAgICAgICBpZiAoaGFuZGxlci5yb3V0ZS50ZXN0KGZyYWdtZW50KSkge1xuXHQgICAgICAgICAgaGFuZGxlci5jYWxsYmFjayhmcmFnbWVudCk7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBTYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGFzaCBoaXN0b3J5LCBvciByZXBsYWNlIHRoZSBVUkwgc3RhdGUgaWYgdGhlXG5cdCAgICAvLyAncmVwbGFjZScgb3B0aW9uIGlzIHBhc3NlZC4gWW91IGFyZSByZXNwb25zaWJsZSBmb3IgcHJvcGVybHkgVVJMLWVuY29kaW5nXG5cdCAgICAvLyB0aGUgZnJhZ21lbnQgaW4gYWR2YW5jZS5cblx0ICAgIC8vXG5cdCAgICAvLyBUaGUgb3B0aW9ucyBvYmplY3QgY2FuIGNvbnRhaW4gYHRyaWdnZXI6IHRydWVgIGlmIHlvdSB3aXNoIHRvIGhhdmUgdGhlXG5cdCAgICAvLyByb3V0ZSBjYWxsYmFjayBiZSBmaXJlZCAobm90IHVzdWFsbHkgZGVzaXJhYmxlKSwgb3IgYHJlcGxhY2U6IHRydWVgLCBpZlxuXHQgICAgLy8geW91IHdpc2ggdG8gbW9kaWZ5IHRoZSBjdXJyZW50IFVSTCB3aXRob3V0IGFkZGluZyBhbiBlbnRyeSB0byB0aGUgaGlzdG9yeS5cblx0ICAgIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCwgb3B0aW9ucykge1xuXHQgICAgICBpZiAoIUhpc3Rvcnkuc3RhcnRlZCkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucyA9PT0gdHJ1ZSkgb3B0aW9ucyA9IHt0cmlnZ2VyOiAhIW9wdGlvbnN9O1xuXHRcblx0ICAgICAgLy8gTm9ybWFsaXplIHRoZSBmcmFnbWVudC5cblx0ICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50IHx8ICcnKTtcblx0XG5cdCAgICAgIC8vIERvbid0IGluY2x1ZGUgYSB0cmFpbGluZyBzbGFzaCBvbiB0aGUgcm9vdC5cblx0ICAgICAgdmFyIHJvb3RQYXRoID0gdGhpcy5yb290O1xuXHQgICAgICBpZiAoZnJhZ21lbnQgPT09ICcnIHx8IGZyYWdtZW50LmNoYXJBdCgwKSA9PT0gJz8nKSB7XG5cdCAgICAgICAgcm9vdFBhdGggPSByb290UGF0aC5zbGljZSgwLCAtMSkgfHwgJy8nO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB1cmwgPSByb290UGF0aCArIGZyYWdtZW50O1xuXHRcblx0ICAgICAgLy8gU3RyaXAgdGhlIGhhc2ggYW5kIGRlY29kZSBmb3IgbWF0Y2hpbmcuXG5cdCAgICAgIGZyYWdtZW50ID0gdGhpcy5kZWNvZGVGcmFnbWVudChmcmFnbWVudC5yZXBsYWNlKHBhdGhTdHJpcHBlciwgJycpKTtcblx0XG5cdCAgICAgIGlmICh0aGlzLmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuXHQgICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnQ7XG5cdFxuXHQgICAgICAvLyBJZiBwdXNoU3RhdGUgaXMgYXZhaWxhYmxlLCB3ZSB1c2UgaXQgdG8gc2V0IHRoZSBmcmFnbWVudCBhcyBhIHJlYWwgVVJMLlxuXHQgICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG5cdCAgICAgICAgdGhpcy5oaXN0b3J5W29wdGlvbnMucmVwbGFjZSA/ICdyZXBsYWNlU3RhdGUnIDogJ3B1c2hTdGF0ZSddKHt9LCBkb2N1bWVudC50aXRsZSwgdXJsKTtcblx0XG5cdCAgICAgIC8vIElmIGhhc2ggY2hhbmdlcyBoYXZlbid0IGJlZW4gZXhwbGljaXRseSBkaXNhYmxlZCwgdXBkYXRlIHRoZSBoYXNoXG5cdCAgICAgIC8vIGZyYWdtZW50IHRvIHN0b3JlIGhpc3RvcnkuXG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG5cdCAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmxvY2F0aW9uLCBmcmFnbWVudCwgb3B0aW9ucy5yZXBsYWNlKTtcblx0ICAgICAgICBpZiAodGhpcy5pZnJhbWUgJiYgZnJhZ21lbnQgIT09IHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZS5jb250ZW50V2luZG93KSkge1xuXHQgICAgICAgICAgdmFyIGlXaW5kb3cgPSB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93O1xuXHRcblx0ICAgICAgICAgIC8vIE9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGlmcmFtZSB0cmlja3MgSUU3IGFuZCBlYXJsaWVyIHRvIHB1c2ggYVxuXHQgICAgICAgICAgLy8gaGlzdG9yeSBlbnRyeSBvbiBoYXNoLXRhZyBjaGFuZ2UuICBXaGVuIHJlcGxhY2UgaXMgdHJ1ZSwgd2UgZG9uJ3Rcblx0ICAgICAgICAgIC8vIHdhbnQgdGhpcy5cblx0ICAgICAgICAgIGlmICghb3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgICAgICAgIGlXaW5kb3cuZG9jdW1lbnQub3BlbigpO1xuXHQgICAgICAgICAgICBpV2luZG93LmRvY3VtZW50LmNsb3NlKCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgdGhpcy5fdXBkYXRlSGFzaChpV2luZG93LmxvY2F0aW9uLCBmcmFnbWVudCwgb3B0aW9ucy5yZXBsYWNlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAvLyBJZiB5b3UndmUgdG9sZCB1cyB0aGF0IHlvdSBleHBsaWNpdGx5IGRvbid0IHdhbnQgZmFsbGJhY2sgaGFzaGNoYW5nZS1cblx0ICAgICAgLy8gYmFzZWQgaGlzdG9yeSwgdGhlbiBgbmF2aWdhdGVgIGJlY29tZXMgYSBwYWdlIHJlZnJlc2guXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24uYXNzaWduKHVybCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcikgcmV0dXJuIHRoaXMubG9hZFVybChmcmFnbWVudCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIFVwZGF0ZSB0aGUgaGFzaCBsb2NhdGlvbiwgZWl0aGVyIHJlcGxhY2luZyB0aGUgY3VycmVudCBlbnRyeSwgb3IgYWRkaW5nXG5cdCAgICAvLyBhIG5ldyBvbmUgdG8gdGhlIGJyb3dzZXIgaGlzdG9yeS5cblx0ICAgIF91cGRhdGVIYXNoOiBmdW5jdGlvbihsb2NhdGlvbiwgZnJhZ21lbnQsIHJlcGxhY2UpIHtcblx0ICAgICAgaWYgKHJlcGxhY2UpIHtcblx0ICAgICAgICB2YXIgaHJlZiA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvKGphdmFzY3JpcHQ6fCMpLiokLywgJycpO1xuXHQgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoaHJlZiArICcjJyArIGZyYWdtZW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBTb21lIGJyb3dzZXJzIHJlcXVpcmUgdGhhdCBgaGFzaGAgY29udGFpbnMgYSBsZWFkaW5nICMuXG5cdCAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcjJyArIGZyYWdtZW50O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgIH0pO1xuXHRcblx0ICAvLyBDcmVhdGUgdGhlIGRlZmF1bHQgQmFja2JvbmUuaGlzdG9yeS5cblx0ICBCYWNrYm9uZS5oaXN0b3J5ID0gbmV3IEhpc3Rvcnk7XG5cdFxuXHQgIC8vIEhlbHBlcnNcblx0ICAvLyAtLS0tLS0tXG5cdFxuXHQgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4gZm9yIHN1YmNsYXNzZXMuXG5cdCAgLy8gU2ltaWxhciB0byBgZ29vZy5pbmhlcml0c2AsIGJ1dCB1c2VzIGEgaGFzaCBvZiBwcm90b3R5cGUgcHJvcGVydGllcyBhbmRcblx0ICAvLyBjbGFzcyBwcm9wZXJ0aWVzIHRvIGJlIGV4dGVuZGVkLlxuXHQgIHZhciBleHRlbmQgPSBmdW5jdGlvbihwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgdmFyIHBhcmVudCA9IHRoaXM7XG5cdCAgICB2YXIgY2hpbGQ7XG5cdFxuXHQgICAgLy8gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvciB0aGUgbmV3IHN1YmNsYXNzIGlzIGVpdGhlciBkZWZpbmVkIGJ5IHlvdVxuXHQgICAgLy8gKHRoZSBcImNvbnN0cnVjdG9yXCIgcHJvcGVydHkgaW4geW91ciBgZXh0ZW5kYCBkZWZpbml0aW9uKSwgb3IgZGVmYXVsdGVkXG5cdCAgICAvLyBieSB1cyB0byBzaW1wbHkgY2FsbCB0aGUgcGFyZW50IGNvbnN0cnVjdG9yLlxuXHQgICAgaWYgKHByb3RvUHJvcHMgJiYgXy5oYXMocHJvdG9Qcm9wcywgJ2NvbnN0cnVjdG9yJykpIHtcblx0ICAgICAgY2hpbGQgPSBwcm90b1Byb3BzLmNvbnN0cnVjdG9yO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2hpbGQgPSBmdW5jdGlvbigpeyByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWRkIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaWYgc3VwcGxpZWQuXG5cdCAgICBfLmV4dGVuZChjaGlsZCwgcGFyZW50LCBzdGF0aWNQcm9wcyk7XG5cdFxuXHQgICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgY2hhaW4gdG8gaW5oZXJpdCBmcm9tIGBwYXJlbnRgLCB3aXRob3V0IGNhbGxpbmdcblx0ICAgIC8vIGBwYXJlbnRgJ3MgY29uc3RydWN0b3IgZnVuY3Rpb24gYW5kIGFkZCB0aGUgcHJvdG90eXBlIHByb3BlcnRpZXMuXG5cdCAgICBjaGlsZC5wcm90b3R5cGUgPSBfLmNyZWF0ZShwYXJlbnQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcblx0ICAgIGNoaWxkLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNoaWxkO1xuXHRcblx0ICAgIC8vIFNldCBhIGNvbnZlbmllbmNlIHByb3BlcnR5IGluIGNhc2UgdGhlIHBhcmVudCdzIHByb3RvdHlwZSBpcyBuZWVkZWRcblx0ICAgIC8vIGxhdGVyLlxuXHQgICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcblx0XG5cdCAgICByZXR1cm4gY2hpbGQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gU2V0IHVwIGluaGVyaXRhbmNlIGZvciB0aGUgbW9kZWwsIGNvbGxlY3Rpb24sIHJvdXRlciwgdmlldyBhbmQgaGlzdG9yeS5cblx0ICBNb2RlbC5leHRlbmQgPSBDb2xsZWN0aW9uLmV4dGVuZCA9IFJvdXRlci5leHRlbmQgPSBWaWV3LmV4dGVuZCA9IEhpc3RvcnkuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcblx0ICAvLyBUaHJvdyBhbiBlcnJvciB3aGVuIGEgVVJMIGlzIG5lZWRlZCwgYW5kIG5vbmUgaXMgc3VwcGxpZWQuXG5cdCAgdmFyIHVybEVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgXCJ1cmxcIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpO1xuXHQgIH07XG5cdFxuXHQgIC8vIFdyYXAgYW4gb3B0aW9uYWwgZXJyb3IgY2FsbGJhY2sgd2l0aCBhIGZhbGxiYWNrIGVycm9yIGV2ZW50LlxuXHQgIHZhciB3cmFwRXJyb3IgPSBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuXHQgICAgdmFyIGVycm9yID0gb3B0aW9ucy5lcnJvcjtcblx0ICAgIG9wdGlvbnMuZXJyb3IgPSBmdW5jdGlvbihyZXNwKSB7XG5cdCAgICAgIGlmIChlcnJvcikgZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcblx0ICAgICAgbW9kZWwudHJpZ2dlcignZXJyb3InLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiBCYWNrYm9uZTtcblx0fSk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187Ly8gICAgIFVuZGVyc2NvcmUuanMgMS44LjNcblx0Ly8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG5cdC8vICAgICAoYykgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdC8vICAgICBVbmRlcnNjb3JlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXHRcblx0KGZ1bmN0aW9uKCkge1xuXHRcblx0ICAvLyBCYXNlbGluZSBzZXR1cFxuXHQgIC8vIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZXhwb3J0c2Agb24gdGhlIHNlcnZlci5cblx0ICB2YXIgcm9vdCA9IHRoaXM7XG5cdFxuXHQgIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuXG5cdCAgdmFyIHByZXZpb3VzVW5kZXJzY29yZSA9IHJvb3QuXztcblx0XG5cdCAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjpcblx0ICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlLCBGdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7XG5cdFxuXHQgIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuXHQgIHZhclxuXHQgICAgcHVzaCAgICAgICAgICAgICA9IEFycmF5UHJvdG8ucHVzaCxcblx0ICAgIHNsaWNlICAgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlLFxuXHQgICAgdG9TdHJpbmcgICAgICAgICA9IE9ialByb3RvLnRvU3RyaW5nLFxuXHQgICAgaGFzT3duUHJvcGVydHkgICA9IE9ialByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0ICAvLyBBbGwgKipFQ01BU2NyaXB0IDUqKiBuYXRpdmUgZnVuY3Rpb24gaW1wbGVtZW50YXRpb25zIHRoYXQgd2UgaG9wZSB0byB1c2Vcblx0ICAvLyBhcmUgZGVjbGFyZWQgaGVyZS5cblx0ICB2YXJcblx0ICAgIG5hdGl2ZUlzQXJyYXkgICAgICA9IEFycmF5LmlzQXJyYXksXG5cdCAgICBuYXRpdmVLZXlzICAgICAgICAgPSBPYmplY3Qua2V5cyxcblx0ICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kLFxuXHQgICAgbmF0aXZlQ3JlYXRlICAgICAgID0gT2JqZWN0LmNyZWF0ZTtcblx0XG5cdCAgLy8gTmFrZWQgZnVuY3Rpb24gcmVmZXJlbmNlIGZvciBzdXJyb2dhdGUtcHJvdG90eXBlLXN3YXBwaW5nLlxuXHQgIHZhciBDdG9yID0gZnVuY3Rpb24oKXt9O1xuXHRcblx0ICAvLyBDcmVhdGUgYSBzYWZlIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yIHVzZSBiZWxvdy5cblx0ICB2YXIgXyA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgaWYgKG9iaiBpbnN0YW5jZW9mIF8pIHJldHVybiBvYmo7XG5cdCAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgXykpIHJldHVybiBuZXcgXyhvYmopO1xuXHQgICAgdGhpcy5fd3JhcHBlZCA9IG9iajtcblx0ICB9O1xuXHRcblx0ICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aFxuXHQgIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGUgb2xkIGByZXF1aXJlKClgIEFQSS4gSWYgd2UncmUgaW5cblx0ICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuXG5cdCAgaWYgKHRydWUpIHtcblx0ICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHQgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfO1xuXHQgICAgfVxuXHQgICAgZXhwb3J0cy5fID0gXztcblx0ICB9IGVsc2Uge1xuXHQgICAgcm9vdC5fID0gXztcblx0ICB9XG5cdFxuXHQgIC8vIEN1cnJlbnQgdmVyc2lvbi5cblx0ICBfLlZFUlNJT04gPSAnMS44LjMnO1xuXHRcblx0ICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG5cdCAgLy8gb2YgdGhlIHBhc3NlZC1pbiBjYWxsYmFjaywgdG8gYmUgcmVwZWF0ZWRseSBhcHBsaWVkIGluIG90aGVyIFVuZGVyc2NvcmVcblx0ICAvLyBmdW5jdGlvbnMuXG5cdCAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuXHQgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgcmV0dXJuIGZ1bmM7XG5cdCAgICBzd2l0Y2ggKGFyZ0NvdW50ID09IG51bGwgPyAzIDogYXJnQ291bnQpIHtcblx0ICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlKTtcblx0ICAgICAgfTtcblx0ICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgb3RoZXIpO1xuXHQgICAgICB9O1xuXHQgICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcblx0ICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG5cdCAgICAgIH07XG5cdCAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcblx0ICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBBIG1vc3RseS1pbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBjYWxsYmFja3MgdGhhdCBjYW4gYmUgYXBwbGllZFxuXHQgIC8vIHRvIGVhY2ggZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZGVzaXJlZCByZXN1bHQg4oCUIGVpdGhlclxuXHQgIC8vIGlkZW50aXR5LCBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cblx0ICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHtcblx0ICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gXy5pZGVudGl0eTtcblx0ICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gb3B0aW1pemVDYih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpO1xuXHQgICAgaWYgKF8uaXNPYmplY3QodmFsdWUpKSByZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTtcblx0ICAgIHJldHVybiBfLnByb3BlcnR5KHZhbHVlKTtcblx0ICB9O1xuXHQgIF8uaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuXHQgICAgcmV0dXJuIGNiKHZhbHVlLCBjb250ZXh0LCBJbmZpbml0eSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGFzc2lnbmVyIGZ1bmN0aW9ucy5cblx0ICB2YXIgY3JlYXRlQXNzaWduZXIgPSBmdW5jdGlvbihrZXlzRnVuYywgdW5kZWZpbmVkT25seSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuXHQgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgICAgaWYgKGxlbmd0aCA8IDIgfHwgb2JqID09IG51bGwpIHJldHVybiBvYmo7XG5cdCAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XSxcblx0ICAgICAgICAgICAga2V5cyA9IGtleXNGdW5jKHNvdXJjZSksXG5cdCAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICAgICAgICBpZiAoIXVuZGVmaW5lZE9ubHkgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG9iajtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gYW5vdGhlci5cblx0ICB2YXIgYmFzZUNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuXHQgICAgaWYgKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpIHJldHVybiB7fTtcblx0ICAgIGlmIChuYXRpdmVDcmVhdGUpIHJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtcblx0ICAgIEN0b3IucHJvdG90eXBlID0gcHJvdG90eXBlO1xuXHQgICAgdmFyIHJlc3VsdCA9IG5ldyBDdG9yO1xuXHQgICAgQ3Rvci5wcm90b3R5cGUgPSBudWxsO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICB2YXIgcHJvcGVydHkgPSBmdW5jdGlvbihrZXkpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW2tleV07XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIEhlbHBlciBmb3IgY29sbGVjdGlvbiBtZXRob2RzIHRvIGRldGVybWluZSB3aGV0aGVyIGEgY29sbGVjdGlvblxuXHQgIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3Rcblx0ICAvLyBSZWxhdGVkOiBodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aFxuXHQgIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0XG5cdCAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cdCAgdmFyIGdldExlbmd0aCA9IHByb3BlcnR5KCdsZW5ndGgnKTtcblx0ICB2YXIgaXNBcnJheUxpa2UgPSBmdW5jdGlvbihjb2xsZWN0aW9uKSB7XG5cdCAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pO1xuXHQgICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgbGVuZ3RoID49IDAgJiYgbGVuZ3RoIDw9IE1BWF9BUlJBWV9JTkRFWDtcblx0ICB9O1xuXHRcblx0ICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9uc1xuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLlxuXHQgIC8vIEhhbmRsZXMgcmF3IG9iamVjdHMgaW4gYWRkaXRpb24gdG8gYXJyYXktbGlrZXMuIFRyZWF0cyBhbGxcblx0ICAvLyBzcGFyc2UgYXJyYXktbGlrZXMgYXMgaWYgdGhleSB3ZXJlIGRlbnNlLlxuXHQgIF8uZWFjaCA9IF8uZm9yRWFjaCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcblx0ICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICB2YXIgaSwgbGVuZ3RoO1xuXHQgICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcblx0ICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaXRlcmF0ZWUob2JqW2ldLCBpLCBvYmopO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuXHQgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaXRlcmF0ZWUob2JqW2tleXNbaV1dLCBrZXlzW2ldLCBvYmopO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybiB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50LlxuXHQgIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuXHQgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuXHQgICAgICAgIHJlc3VsdHMgPSBBcnJheShsZW5ndGgpO1xuXHQgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuXHQgICAgICByZXN1bHRzW2luZGV4XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHRzO1xuXHQgIH07XG5cdFxuXHQgIC8vIENyZWF0ZSBhIHJlZHVjaW5nIGZ1bmN0aW9uIGl0ZXJhdGluZyBsZWZ0IG9yIHJpZ2h0LlxuXHQgIGZ1bmN0aW9uIGNyZWF0ZVJlZHVjZShkaXIpIHtcblx0ICAgIC8vIE9wdGltaXplZCBpdGVyYXRvciBmdW5jdGlvbiBhcyB1c2luZyBhcmd1bWVudHMubGVuZ3RoXG5cdCAgICAvLyBpbiB0aGUgbWFpbiBmdW5jdGlvbiB3aWxsIGRlb3B0aW1pemUgdGhlLCBzZWUgIzE5OTEuXG5cdCAgICBmdW5jdGlvbiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKSB7XG5cdCAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcblx0ICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuXHQgICAgICAgIG1lbW8gPSBpdGVyYXRlZShtZW1vLCBvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1lbW87XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGNvbnRleHQpIHtcblx0ICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCA0KTtcblx0ICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcblx0ICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuXHQgICAgICAgICAgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG5cdCAgICAgIC8vIERldGVybWluZSB0aGUgaW5pdGlhbCB2YWx1ZSBpZiBub25lIGlzIHByb3ZpZGVkLlxuXHQgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcblx0ICAgICAgICBtZW1vID0gb2JqW2tleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4XTtcblx0ICAgICAgICBpbmRleCArPSBkaXI7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGl0ZXJhdG9yKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGtleXMsIGluZGV4LCBsZW5ndGgpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8vICoqUmVkdWNlKiogYnVpbGRzIHVwIGEgc2luZ2xlIHJlc3VsdCBmcm9tIGEgbGlzdCBvZiB2YWx1ZXMsIGFrYSBgaW5qZWN0YCxcblx0ICAvLyBvciBgZm9sZGxgLlxuXHQgIF8ucmVkdWNlID0gXy5mb2xkbCA9IF8uaW5qZWN0ID0gY3JlYXRlUmVkdWNlKDEpO1xuXHRcblx0ICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cblx0ICBfLnJlZHVjZVJpZ2h0ID0gXy5mb2xkciA9IGNyZWF0ZVJlZHVjZSgtMSk7XG5cdFxuXHQgIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cblx0ICBfLmZpbmQgPSBfLmRldGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICB2YXIga2V5O1xuXHQgICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcblx0ICAgICAga2V5ID0gXy5maW5kSW5kZXgob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAga2V5ID0gXy5maW5kS2V5KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcblx0ICAgIH1cblx0ICAgIGlmIChrZXkgIT09IHZvaWQgMCAmJiBrZXkgIT09IC0xKSByZXR1cm4gb2JqW2tleV07XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgdGhhdCBwYXNzIGEgdHJ1dGggdGVzdC5cblx0ICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuXHQgIF8uZmlsdGVyID0gXy5zZWxlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuXHQgICAgdmFyIHJlc3VsdHMgPSBbXTtcblx0ICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG5cdCAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcblx0ICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGxpc3QpKSByZXN1bHRzLnB1c2godmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gcmVzdWx0cztcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggYSB0cnV0aCB0ZXN0IGZhaWxzLlxuXHQgIF8ucmVqZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcblx0ICB9O1xuXHRcblx0ICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cblx0ICAvLyBBbGlhc2VkIGFzIGBhbGxgLlxuXHQgIF8uZXZlcnkgPSBfLmFsbCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcblx0ICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aDtcblx0ICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcblx0ICAgICAgaWYgKCFwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBEZXRlcm1pbmUgaWYgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaW4gdGhlIG9iamVjdCBtYXRjaGVzIGEgdHJ1dGggdGVzdC5cblx0ICAvLyBBbGlhc2VkIGFzIGBhbnlgLlxuXHQgIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG5cdCAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuXHQgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuXHQgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuXHQgICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfTtcblx0XG5cdCAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBhcnJheSBvciBvYmplY3QgY29udGFpbnMgYSBnaXZlbiBpdGVtICh1c2luZyBgPT09YCkuXG5cdCAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG5cdCAgXy5jb250YWlucyA9IF8uaW5jbHVkZXMgPSBfLmluY2x1ZGUgPSBmdW5jdGlvbihvYmosIGl0ZW0sIGZyb21JbmRleCwgZ3VhcmQpIHtcblx0ICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcblx0ICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuXHQgICAgcmV0dXJuIF8uaW5kZXhPZihvYmosIGl0ZW0sIGZyb21JbmRleCkgPj0gMDtcblx0ICB9O1xuXHRcblx0ICAvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi5cblx0ICBfLmludm9rZSA9IGZ1bmN0aW9uKG9iaiwgbWV0aG9kKSB7XG5cdCAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcblx0ICAgIHZhciBpc0Z1bmMgPSBfLmlzRnVuY3Rpb24obWV0aG9kKTtcblx0ICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgIHZhciBmdW5jID0gaXNGdW5jID8gbWV0aG9kIDogdmFsdWVbbWV0aG9kXTtcblx0ICAgICAgcmV0dXJuIGZ1bmMgPT0gbnVsbCA/IGZ1bmMgOiBmdW5jLmFwcGx5KHZhbHVlLCBhcmdzKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYG1hcGA6IGZldGNoaW5nIGEgcHJvcGVydHkuXG5cdCAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG5cdCAgICByZXR1cm4gXy5tYXAob2JqLCBfLnByb3BlcnR5KGtleSkpO1xuXHQgIH07XG5cdFxuXHQgIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbHRlcmA6IHNlbGVjdGluZyBvbmx5IG9iamVjdHNcblx0ICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuXHQgIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG5cdCAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcblx0ICB9O1xuXHRcblx0ICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaW5kYDogZ2V0dGluZyB0aGUgZmlyc3Qgb2JqZWN0XG5cdCAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy5cblx0ICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcblx0ICAgIHJldHVybiBfLmZpbmQob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm4gdGhlIG1heGltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG5cdCAgXy5tYXggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG5cdCAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuXHQgICAgaWYgKGl0ZXJhdGVlID09IG51bGwgJiYgb2JqICE9IG51bGwpIHtcblx0ICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YWx1ZSA9IG9ialtpXTtcblx0ICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcblx0ICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuXHQgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcblx0ICAgICAgICBpZiAoY29tcHV0ZWQgPiBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IC1JbmZpbml0eSAmJiByZXN1bHQgPT09IC1JbmZpbml0eSkge1xuXHQgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG5cdCAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm4gdGhlIG1pbmltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG5cdCAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LFxuXHQgICAgICAgIHZhbHVlLCBjb21wdXRlZDtcblx0ICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG5cdCAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFsdWUgPSBvYmpbaV07XG5cdCAgICAgICAgaWYgKHZhbHVlIDwgcmVzdWx0KSB7XG5cdCAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuXHQgICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcblx0ICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG5cdCAgICAgICAgaWYgKGNvbXB1dGVkIDwgbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSBJbmZpbml0eSAmJiByZXN1bHQgPT09IEluZmluaXR5KSB7XG5cdCAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcblx0ICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIC8vIFNodWZmbGUgYSBjb2xsZWN0aW9uLCB1c2luZyB0aGUgbW9kZXJuIHZlcnNpb24gb2YgdGhlXG5cdCAgLy8gW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlcuKAk1lhdGVzX3NodWZmbGUpLlxuXHQgIF8uc2h1ZmZsZSA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgdmFyIHNldCA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuXHQgICAgdmFyIGxlbmd0aCA9IHNldC5sZW5ndGg7XG5cdCAgICB2YXIgc2h1ZmZsZWQgPSBBcnJheShsZW5ndGgpO1xuXHQgICAgZm9yICh2YXIgaW5kZXggPSAwLCByYW5kOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICByYW5kID0gXy5yYW5kb20oMCwgaW5kZXgpO1xuXHQgICAgICBpZiAocmFuZCAhPT0gaW5kZXgpIHNodWZmbGVkW2luZGV4XSA9IHNodWZmbGVkW3JhbmRdO1xuXHQgICAgICBzaHVmZmxlZFtyYW5kXSA9IHNldFtpbmRleF07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2h1ZmZsZWQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gU2FtcGxlICoqbioqIHJhbmRvbSB2YWx1ZXMgZnJvbSBhIGNvbGxlY3Rpb24uXG5cdCAgLy8gSWYgKipuKiogaXMgbm90IHNwZWNpZmllZCwgcmV0dXJucyBhIHNpbmdsZSByYW5kb20gZWxlbWVudC5cblx0ICAvLyBUaGUgaW50ZXJuYWwgYGd1YXJkYCBhcmd1bWVudCBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBtYXBgLlxuXHQgIF8uc2FtcGxlID0gZnVuY3Rpb24ob2JqLCBuLCBndWFyZCkge1xuXHQgICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xuXHQgICAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG5cdCAgICAgIHJldHVybiBvYmpbXy5yYW5kb20ob2JqLmxlbmd0aCAtIDEpXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfLnNodWZmbGUob2JqKS5zbGljZSgwLCBNYXRoLm1heCgwLCBuKSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gU29ydCB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uIHByb2R1Y2VkIGJ5IGFuIGl0ZXJhdGVlLlxuXHQgIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIHZhbHVlOiB2YWx1ZSxcblx0ICAgICAgICBpbmRleDogaW5kZXgsXG5cdCAgICAgICAgY3JpdGVyaWE6IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdClcblx0ICAgICAgfTtcblx0ICAgIH0pLnNvcnQoZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcblx0ICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhO1xuXHQgICAgICB2YXIgYiA9IHJpZ2h0LmNyaXRlcmlhO1xuXHQgICAgICBpZiAoYSAhPT0gYikge1xuXHQgICAgICAgIGlmIChhID4gYiB8fCBhID09PSB2b2lkIDApIHJldHVybiAxO1xuXHQgICAgICAgIGlmIChhIDwgYiB8fCBiID09PSB2b2lkIDApIHJldHVybiAtMTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbGVmdC5pbmRleCAtIHJpZ2h0LmluZGV4O1xuXHQgICAgfSksICd2YWx1ZScpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSBcImdyb3VwIGJ5XCIgb3BlcmF0aW9ucy5cblx0ICB2YXIgZ3JvdXAgPSBmdW5jdGlvbihiZWhhdmlvcikge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcblx0ICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcblx0ICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG5cdCAgICAgICAgdmFyIGtleSA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgb2JqKTtcblx0ICAgICAgICBiZWhhdmlvcihyZXN1bHQsIHZhbHVlLCBrZXkpO1xuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gR3JvdXBzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24uIFBhc3MgZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZVxuXHQgIC8vIHRvIGdyb3VwIGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgY3JpdGVyaW9uLlxuXHQgIF8uZ3JvdXBCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuXHQgICAgaWYgKF8uaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSk7IGVsc2UgcmVzdWx0W2tleV0gPSBbdmFsdWVdO1xuXHQgIH0pO1xuXHRcblx0ICAvLyBJbmRleGVzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24sIHNpbWlsYXIgdG8gYGdyb3VwQnlgLCBidXQgZm9yXG5cdCAgLy8gd2hlbiB5b3Uga25vdyB0aGF0IHlvdXIgaW5kZXggdmFsdWVzIHdpbGwgYmUgdW5pcXVlLlxuXHQgIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuXHQgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcblx0ICB9KTtcblx0XG5cdCAgLy8gQ291bnRzIGluc3RhbmNlcyBvZiBhbiBvYmplY3QgdGhhdCBncm91cCBieSBhIGNlcnRhaW4gY3JpdGVyaW9uLiBQYXNzXG5cdCAgLy8gZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZSB0byBjb3VudCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG5cdCAgLy8gY3JpdGVyaW9uLlxuXHQgIF8uY291bnRCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuXHQgICAgaWYgKF8uaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7XG5cdCAgfSk7XG5cdFxuXHQgIC8vIFNhZmVseSBjcmVhdGUgYSByZWFsLCBsaXZlIGFycmF5IGZyb20gYW55dGhpbmcgaXRlcmFibGUuXG5cdCAgXy50b0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICBpZiAoIW9iaikgcmV0dXJuIFtdO1xuXHQgICAgaWYgKF8uaXNBcnJheShvYmopKSByZXR1cm4gc2xpY2UuY2FsbChvYmopO1xuXHQgICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpO1xuXHQgICAgcmV0dXJuIF8udmFsdWVzKG9iaik7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LlxuXHQgIF8uc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDtcblx0ICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDtcblx0ICB9O1xuXHRcblx0ICAvLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byB0d28gYXJyYXlzOiBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIHNhdGlzZnkgdGhlIGdpdmVuXG5cdCAgLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuXHQgIF8ucGFydGl0aW9uID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG5cdCAgICB2YXIgcGFzcyA9IFtdLCBmYWlsID0gW107XG5cdCAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcblx0ICAgICAgKHByZWRpY2F0ZSh2YWx1ZSwga2V5LCBvYmopID8gcGFzcyA6IGZhaWwpLnB1c2godmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gW3Bhc3MsIGZhaWxdO1xuXHQgIH07XG5cdFxuXHQgIC8vIEFycmF5IEZ1bmN0aW9uc1xuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cblx0ICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrXG5cdCAgLy8gYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgXy5tYXBgLlxuXHQgIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcblx0ICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuXHQgICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5WzBdO1xuXHQgICAgcmV0dXJuIF8uaW5pdGlhbChhcnJheSwgYXJyYXkubGVuZ3RoIC0gbik7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEVzcGVjaWFsbHkgdXNlZnVsIG9uXG5cdCAgLy8gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gYWxsIHRoZSB2YWx1ZXMgaW5cblx0ICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLlxuXHQgIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuXHQgICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIDAsIE1hdGgubWF4KDAsIGFycmF5Lmxlbmd0aCAtIChuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbikpKTtcblx0ICB9O1xuXHRcblx0ICAvLyBHZXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgbGFzdCBOXG5cdCAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS5cblx0ICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcblx0ICAgIGlmIChhcnJheSA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuXHQgICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuXHQgICAgcmV0dXJuIF8ucmVzdChhcnJheSwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gbikpO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgdGFpbGAgYW5kIGBkcm9wYC5cblx0ICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKm4qKiB3aWxsIHJldHVyblxuXHQgIC8vIHRoZSByZXN0IE4gdmFsdWVzIGluIHRoZSBhcnJheS5cblx0ICBfLnJlc3QgPSBfLnRhaWwgPSBfLmRyb3AgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcblx0ICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbik7XG5cdCAgfTtcblx0XG5cdCAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LlxuXHQgIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG5cdCAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIF8uaWRlbnRpdHkpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi5cblx0ICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBzdHJpY3QsIHN0YXJ0SW5kZXgpIHtcblx0ICAgIHZhciBvdXRwdXQgPSBbXSwgaWR4ID0gMDtcblx0ICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIGxlbmd0aCA9IGdldExlbmd0aChpbnB1dCk7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgdmFsdWUgPSBpbnB1dFtpXTtcblx0ICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJiAoXy5pc0FycmF5KHZhbHVlKSB8fCBfLmlzQXJndW1lbnRzKHZhbHVlKSkpIHtcblx0ICAgICAgICAvL2ZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0XG5cdCAgICAgICAgaWYgKCFzaGFsbG93KSB2YWx1ZSA9IGZsYXR0ZW4odmFsdWUsIHNoYWxsb3csIHN0cmljdCk7XG5cdCAgICAgICAgdmFyIGogPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7XG5cdCAgICAgICAgb3V0cHV0Lmxlbmd0aCArPSBsZW47XG5cdCAgICAgICAgd2hpbGUgKGogPCBsZW4pIHtcblx0ICAgICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZVtqKytdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICghc3RyaWN0KSB7XG5cdCAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb3V0cHV0O1xuXHQgIH07XG5cdFxuXHQgIC8vIEZsYXR0ZW4gb3V0IGFuIGFycmF5LCBlaXRoZXIgcmVjdXJzaXZlbHkgKGJ5IGRlZmF1bHQpLCBvciBqdXN0IG9uZSBsZXZlbC5cblx0ICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykge1xuXHQgICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS5cblx0ICBfLndpdGhvdXQgPSBmdW5jdGlvbihhcnJheSkge1xuXHQgICAgcmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcblx0ICB9O1xuXHRcblx0ICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeVxuXHQgIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS5cblx0ICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuXHQgIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgaWYgKCFfLmlzQm9vbGVhbihpc1NvcnRlZCkpIHtcblx0ICAgICAgY29udGV4dCA9IGl0ZXJhdGVlO1xuXHQgICAgICBpdGVyYXRlZSA9IGlzU29ydGVkO1xuXHQgICAgICBpc1NvcnRlZCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuXHQgICAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgICAgdmFyIHNlZW4gPSBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaV0sXG5cdCAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGksIGFycmF5KSA6IHZhbHVlO1xuXHQgICAgICBpZiAoaXNTb3J0ZWQpIHtcblx0ICAgICAgICBpZiAoIWkgfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHJlc3VsdC5wdXNoKHZhbHVlKTtcblx0ICAgICAgICBzZWVuID0gY29tcHV0ZWQ7XG5cdCAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHtcblx0ICAgICAgICBpZiAoIV8uY29udGFpbnMoc2VlbiwgY29tcHV0ZWQpKSB7XG5cdCAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuXHQgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICghXy5jb250YWlucyhyZXN1bHQsIHZhbHVlKSkge1xuXHQgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2Zcblx0ICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy5cblx0ICBfLnVuaW9uID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlKSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZVxuXHQgIC8vIHBhc3NlZC1pbiBhcnJheXMuXG5cdCAgXy5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbihhcnJheSkge1xuXHQgICAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgICAgdmFyIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgaXRlbSA9IGFycmF5W2ldO1xuXHQgICAgICBpZiAoXy5jb250YWlucyhyZXN1bHQsIGl0ZW0pKSBjb250aW51ZTtcblx0ICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBhcmdzTGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGogPT09IGFyZ3NMZW5ndGgpIHJlc3VsdC5wdXNoKGl0ZW0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICAvLyBUYWtlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gb25lIGFycmF5IGFuZCBhIG51bWJlciBvZiBvdGhlciBhcnJheXMuXG5cdCAgLy8gT25seSB0aGUgZWxlbWVudHMgcHJlc2VudCBpbiBqdXN0IHRoZSBmaXJzdCBhcnJheSB3aWxsIHJlbWFpbi5cblx0ICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkge1xuXHQgICAgdmFyIHJlc3QgPSBmbGF0dGVuKGFyZ3VtZW50cywgdHJ1ZSwgdHJ1ZSwgMSk7XG5cdCAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKHJlc3QsIHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIC8vIFppcCB0b2dldGhlciBtdWx0aXBsZSBsaXN0cyBpbnRvIGEgc2luZ2xlIGFycmF5IC0tIGVsZW1lbnRzIHRoYXQgc2hhcmVcblx0ICAvLyBhbiBpbmRleCBnbyB0b2dldGhlci5cblx0ICBfLnppcCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIF8udW56aXAoYXJndW1lbnRzKTtcblx0ICB9O1xuXHRcblx0ICAvLyBDb21wbGVtZW50IG9mIF8uemlwLiBVbnppcCBhY2NlcHRzIGFuIGFycmF5IG9mIGFycmF5cyBhbmQgZ3JvdXBzXG5cdCAgLy8gZWFjaCBhcnJheSdzIGVsZW1lbnRzIG9uIHNoYXJlZCBpbmRpY2VzXG5cdCAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG5cdCAgICB2YXIgbGVuZ3RoID0gYXJyYXkgJiYgXy5tYXgoYXJyYXksIGdldExlbmd0aCkubGVuZ3RoIHx8IDA7XG5cdCAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblx0XG5cdCAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgIHJlc3VsdFtpbmRleF0gPSBfLnBsdWNrKGFycmF5LCBpbmRleCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIC8vIENvbnZlcnRzIGxpc3RzIGludG8gb2JqZWN0cy4gUGFzcyBlaXRoZXIgYSBzaW5nbGUgYXJyYXkgb2YgYFtrZXksIHZhbHVlXWBcblx0ICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2Zcblx0ICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG5cdCAgXy5vYmplY3QgPSBmdW5jdGlvbihsaXN0LCB2YWx1ZXMpIHtcblx0ICAgIHZhciByZXN1bHQgPSB7fTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAodmFsdWVzKSB7XG5cdCAgICAgICAgcmVzdWx0W2xpc3RbaV1dID0gdmFsdWVzW2ldO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdFtsaXN0W2ldWzBdXSA9IGxpc3RbaV1bMV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZmluZEluZGV4IGFuZCBmaW5kTGFzdEluZGV4IGZ1bmN0aW9uc1xuXHQgIGZ1bmN0aW9uIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKGRpcikge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcblx0ICAgICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcblx0ICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG5cdCAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcblx0ICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuXHQgICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIC0xO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8vIFJldHVybnMgdGhlIGZpcnN0IGluZGV4IG9uIGFuIGFycmF5LWxpa2UgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdFxuXHQgIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG5cdCAgXy5maW5kTGFzdEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoLTEpO1xuXHRcblx0ICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG5cdCAgLy8gYW4gb2JqZWN0IHNob3VsZCBiZSBpbnNlcnRlZCBzbyBhcyB0byBtYWludGFpbiBvcmRlci4gVXNlcyBiaW5hcnkgc2VhcmNoLlxuXHQgIF8uc29ydGVkSW5kZXggPSBmdW5jdGlvbihhcnJheSwgb2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG5cdCAgICB2YXIgdmFsdWUgPSBpdGVyYXRlZShvYmopO1xuXHQgICAgdmFyIGxvdyA9IDAsIGhpZ2ggPSBnZXRMZW5ndGgoYXJyYXkpO1xuXHQgICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcblx0ICAgICAgdmFyIG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMik7XG5cdCAgICAgIGlmIChpdGVyYXRlZShhcnJheVttaWRdKSA8IHZhbHVlKSBsb3cgPSBtaWQgKyAxOyBlbHNlIGhpZ2ggPSBtaWQ7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbG93O1xuXHQgIH07XG5cdFxuXHQgIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGluZGV4T2YgYW5kIGxhc3RJbmRleE9mIGZ1bmN0aW9uc1xuXHQgIGZ1bmN0aW9uIGNyZWF0ZUluZGV4RmluZGVyKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7XG5cdCAgICAgIHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcblx0ICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHtcblx0ICAgICAgICBpZiAoZGlyID4gMCkge1xuXHQgICAgICAgICAgICBpID0gaWR4ID49IDAgPyBpZHggOiBNYXRoLm1heChpZHggKyBsZW5ndGgsIGkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHNvcnRlZEluZGV4ICYmIGlkeCAmJiBsZW5ndGgpIHtcblx0ICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG5cdCAgICAgICAgcmV0dXJuIGFycmF5W2lkeF0gPT09IGl0ZW0gPyBpZHggOiAtMTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuXHQgICAgICAgIGlkeCA9IHByZWRpY2F0ZUZpbmQoc2xpY2UuY2FsbChhcnJheSwgaSwgbGVuZ3RoKSwgXy5pc05hTik7XG5cdCAgICAgICAgcmV0dXJuIGlkeCA+PSAwID8gaWR4ICsgaSA6IC0xO1xuXHQgICAgICB9XG5cdCAgICAgIGZvciAoaWR4ID0gZGlyID4gMCA/IGkgOiBsZW5ndGggLSAxOyBpZHggPj0gMCAmJiBpZHggPCBsZW5ndGg7IGlkeCArPSBkaXIpIHtcblx0ICAgICAgICBpZiAoYXJyYXlbaWR4XSA9PT0gaXRlbSkgcmV0dXJuIGlkeDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gLTE7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LFxuXHQgIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuXG5cdCAgLy8gSWYgdGhlIGFycmF5IGlzIGxhcmdlIGFuZCBhbHJlYWR5IGluIHNvcnQgb3JkZXIsIHBhc3MgYHRydWVgXG5cdCAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cblx0ICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7XG5cdCAgXy5sYXN0SW5kZXhPZiA9IGNyZWF0ZUluZGV4RmluZGVyKC0xLCBfLmZpbmRMYXN0SW5kZXgpO1xuXHRcblx0ICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG5cdCAgLy8gdGhlIG5hdGl2ZSBQeXRob24gYHJhbmdlKClgIGZ1bmN0aW9uLiBTZWVcblx0ICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuXHQgIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuXHQgICAgaWYgKHN0b3AgPT0gbnVsbCkge1xuXHQgICAgICBzdG9wID0gc3RhcnQgfHwgMDtcblx0ICAgICAgc3RhcnQgPSAwO1xuXHQgICAgfVxuXHQgICAgc3RlcCA9IHN0ZXAgfHwgMTtcblx0XG5cdCAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgoTWF0aC5jZWlsKChzdG9wIC0gc3RhcnQpIC8gc3RlcCksIDApO1xuXHQgICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTtcblx0XG5cdCAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrLCBzdGFydCArPSBzdGVwKSB7XG5cdCAgICAgIHJhbmdlW2lkeF0gPSBzdGFydDtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmFuZ2U7XG5cdCAgfTtcblx0XG5cdCAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9uc1xuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uIGFzIGEgY29uc3RydWN0b3Jcblx0ICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHNcblx0ICB2YXIgZXhlY3V0ZUJvdW5kID0gZnVuY3Rpb24oc291cmNlRnVuYywgYm91bmRGdW5jLCBjb250ZXh0LCBjYWxsaW5nQ29udGV4dCwgYXJncykge1xuXHQgICAgaWYgKCEoY2FsbGluZ0NvbnRleHQgaW5zdGFuY2VvZiBib3VuZEZ1bmMpKSByZXR1cm4gc291cmNlRnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgIHZhciBzZWxmID0gYmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7XG5cdCAgICB2YXIgcmVzdWx0ID0gc291cmNlRnVuYy5hcHBseShzZWxmLCBhcmdzKTtcblx0ICAgIGlmIChfLmlzT2JqZWN0KHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG5cdCAgICByZXR1cm4gc2VsZjtcblx0ICB9O1xuXHRcblx0ICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdCAoYXNzaWduaW5nIGB0aGlzYCwgYW5kIGFyZ3VtZW50cyxcblx0ICAvLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmXG5cdCAgLy8gYXZhaWxhYmxlLlxuXHQgIF8uYmluZCA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQpIHtcblx0ICAgIGlmIChuYXRpdmVCaW5kICYmIGZ1bmMuYmluZCA9PT0gbmF0aXZlQmluZCkgcmV0dXJuIG5hdGl2ZUJpbmQuYXBwbHkoZnVuYywgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcblx0ICAgIGlmICghXy5pc0Z1bmN0aW9uKGZ1bmMpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24nKTtcblx0ICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuXHQgICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBib3VuZDtcblx0ICB9O1xuXHRcblx0ICAvLyBQYXJ0aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiBieSBjcmVhdGluZyBhIHZlcnNpb24gdGhhdCBoYXMgaGFkIHNvbWUgb2YgaXRzXG5cdCAgLy8gYXJndW1lbnRzIHByZS1maWxsZWQsIHdpdGhvdXQgY2hhbmdpbmcgaXRzIGR5bmFtaWMgYHRoaXNgIGNvbnRleHQuIF8gYWN0c1xuXHQgIC8vIGFzIGEgcGxhY2Vob2xkZXIsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmUgcHJlLWZpbGxlZC5cblx0ICBfLnBhcnRpYWwgPSBmdW5jdGlvbihmdW5jKSB7XG5cdCAgICB2YXIgYm91bmRBcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBwb3NpdGlvbiA9IDAsIGxlbmd0aCA9IGJvdW5kQXJncy5sZW5ndGg7XG5cdCAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGFyZ3NbaV0gPSBib3VuZEFyZ3NbaV0gPT09IF8gPyBhcmd1bWVudHNbcG9zaXRpb24rK10gOiBib3VuZEFyZ3NbaV07XG5cdCAgICAgIH1cblx0ICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYXJndW1lbnRzLmxlbmd0aCkgYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7XG5cdCAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIHRoaXMsIHRoaXMsIGFyZ3MpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBib3VuZDtcblx0ICB9O1xuXHRcblx0ICAvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHNcblx0ICAvLyBhcmUgdGhlIG1ldGhvZCBuYW1lcyB0byBiZSBib3VuZC4gVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0IGFsbCBjYWxsYmFja3Ncblx0ICAvLyBkZWZpbmVkIG9uIGFuIG9iamVjdCBiZWxvbmcgdG8gaXQuXG5cdCAgXy5iaW5kQWxsID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICB2YXIgaSwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCwga2V5O1xuXHQgICAgaWYgKGxlbmd0aCA8PSAxKSB0aHJvdyBuZXcgRXJyb3IoJ2JpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMnKTtcblx0ICAgIGZvciAoaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICBrZXkgPSBhcmd1bWVudHNbaV07XG5cdCAgICAgIG9ialtrZXldID0gXy5iaW5kKG9ialtrZXldLCBvYmopO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iajtcblx0ICB9O1xuXHRcblx0ICAvLyBNZW1vaXplIGFuIGV4cGVuc2l2ZSBmdW5jdGlvbiBieSBzdG9yaW5nIGl0cyByZXN1bHRzLlxuXHQgIF8ubWVtb2l6ZSA9IGZ1bmN0aW9uKGZ1bmMsIGhhc2hlcikge1xuXHQgICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcblx0ICAgICAgdmFyIGNhY2hlID0gbWVtb2l6ZS5jYWNoZTtcblx0ICAgICAgdmFyIGFkZHJlc3MgPSAnJyArIChoYXNoZXIgPyBoYXNoZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IGtleSk7XG5cdCAgICAgIGlmICghXy5oYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgcmV0dXJuIGNhY2hlW2FkZHJlc3NdO1xuXHQgICAgfTtcblx0ICAgIG1lbW9pemUuY2FjaGUgPSB7fTtcblx0ICAgIHJldHVybiBtZW1vaXplO1xuXHQgIH07XG5cdFxuXHQgIC8vIERlbGF5cyBhIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgYW5kIHRoZW4gY2FsbHNcblx0ICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG5cdCAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcblx0ICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuXHQgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG5cdCAgICB9LCB3YWl0KTtcblx0ICB9O1xuXHRcblx0ICAvLyBEZWZlcnMgYSBmdW5jdGlvbiwgc2NoZWR1bGluZyBpdCB0byBydW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXNcblx0ICAvLyBjbGVhcmVkLlxuXHQgIF8uZGVmZXIgPSBfLnBhcnRpYWwoXy5kZWxheSwgXywgMSk7XG5cdFxuXHQgIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuXHQgIC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuXHQgIC8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjtcblx0ICAvLyBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuXHQgIC8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuXHQgIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdCAgICB2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xuXHQgICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuXHQgICAgdmFyIHByZXZpb3VzID0gMDtcblx0ICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXHQgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBfLm5vdygpO1xuXHQgICAgICB0aW1lb3V0ID0gbnVsbDtcblx0ICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbm93ID0gXy5ub3coKTtcblx0ICAgICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcblx0ICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuXHQgICAgICBjb250ZXh0ID0gdGhpcztcblx0ICAgICAgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcblx0ICAgICAgICBpZiAodGltZW91dCkge1xuXHQgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHQgICAgICAgICAgdGltZW91dCA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHByZXZpb3VzID0gbm93O1xuXHQgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdCAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdCAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcblx0ICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG5cdCAgLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuXHQgIC8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuXHQgIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG5cdCAgXy5kZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuXHQgICAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXHRcblx0ICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbGFzdCA9IF8ubm93KCkgLSB0aW1lc3RhbXA7XG5cdFxuXHQgICAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG5cdCAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aW1lb3V0ID0gbnVsbDtcblx0ICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuXHQgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNvbnRleHQgPSB0aGlzO1xuXHQgICAgICBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgICB0aW1lc3RhbXAgPSBfLm5vdygpO1xuXHQgICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcblx0ICAgICAgaWYgKCF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG5cdCAgICAgIGlmIChjYWxsTm93KSB7XG5cdCAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuXHQgIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmRcblx0ICAvLyBjb25kaXRpb25hbGx5IGV4ZWN1dGUgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuXHQgIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcblx0ICAgIHJldHVybiBfLnBhcnRpYWwod3JhcHBlciwgZnVuYyk7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJucyBhIG5lZ2F0ZWQgdmVyc2lvbiBvZiB0aGUgcGFzc2VkLWluIHByZWRpY2F0ZS5cblx0ICBfLm5lZ2F0ZSA9IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgYSBsaXN0IG9mIGZ1bmN0aW9ucywgZWFjaFxuXHQgIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG5cdCAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGkgPSBzdGFydDtcblx0ICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIHdoaWxlIChpLS0pIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuXHQgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cblx0ICBfLmFmdGVyID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG5cdCAgXy5iZWZvcmUgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuXHQgICAgdmFyIG1lbW87XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICgtLXRpbWVzID4gMCkge1xuXHQgICAgICAgIG1lbW8gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRpbWVzIDw9IDEpIGZ1bmMgPSBudWxsO1xuXHQgICAgICByZXR1cm4gbWVtbztcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG5cdCAgLy8gb2Z0ZW4geW91IGNhbGwgaXQuIFVzZWZ1bCBmb3IgbGF6eSBpbml0aWFsaXphdGlvbi5cblx0ICBfLm9uY2UgPSBfLnBhcnRpYWwoXy5iZWZvcmUsIDIpO1xuXHRcblx0ICAvLyBPYmplY3QgRnVuY3Rpb25zXG5cdCAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLlxuXHQgIHZhciBoYXNFbnVtQnVnID0gIXt0b1N0cmluZzogbnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7XG5cdCAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFsndmFsdWVPZicsICdpc1Byb3RvdHlwZU9mJywgJ3RvU3RyaW5nJyxcblx0ICAgICAgICAgICAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdoYXNPd25Qcm9wZXJ0eScsICd0b0xvY2FsZVN0cmluZyddO1xuXHRcblx0ICBmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cykge1xuXHQgICAgdmFyIG5vbkVudW1JZHggPSBub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO1xuXHQgICAgdmFyIGNvbnN0cnVjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuXHQgICAgdmFyIHByb3RvID0gKF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlKSB8fCBPYmpQcm90bztcblx0XG5cdCAgICAvLyBDb25zdHJ1Y3RvciBpcyBhIHNwZWNpYWwgY2FzZS5cblx0ICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcblx0ICAgIGlmIChfLmhhcyhvYmosIHByb3ApICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSBrZXlzLnB1c2gocHJvcCk7XG5cdFxuXHQgICAgd2hpbGUgKG5vbkVudW1JZHgtLSkge1xuXHQgICAgICBwcm9wID0gbm9uRW51bWVyYWJsZVByb3BzW25vbkVudW1JZHhdO1xuXHQgICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkge1xuXHQgICAgICAgIGtleXMucHVzaChwcm9wKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLlxuXHQgIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2Bcblx0ICBfLmtleXMgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107XG5cdCAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcblx0ICAgIHZhciBrZXlzID0gW107XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSBpZiAoXy5oYXMob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcblx0ICAgIC8vIEFoZW0sIElFIDwgOS5cblx0ICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG5cdCAgICByZXR1cm4ga2V5cztcblx0ICB9O1xuXHRcblx0ICAvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cblx0ICBfLmFsbEtleXMgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gW107XG5cdCAgICB2YXIga2V5cyA9IFtdO1xuXHQgICAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG5cdCAgICAvLyBBaGVtLCBJRSA8IDkuXG5cdCAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuXHQgICAgcmV0dXJuIGtleXM7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuXHQgIF8udmFsdWVzID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuXHQgICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuXHQgICAgdmFyIHZhbHVlcyA9IEFycmF5KGxlbmd0aCk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhbHVlc1tpXSA9IG9ialtrZXlzW2ldXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZXM7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3Rcblx0ICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdFxuXHQgIF8ubWFwT2JqZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgICB2YXIga2V5cyA9ICBfLmtleXMob2JqKSxcblx0ICAgICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoLFxuXHQgICAgICAgICAgcmVzdWx0cyA9IHt9LFxuXHQgICAgICAgICAgY3VycmVudEtleTtcblx0ICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICAgIGN1cnJlbnRLZXkgPSBrZXlzW2luZGV4XTtcblx0ICAgICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXN1bHRzO1xuXHQgIH07XG5cdFxuXHQgIC8vIENvbnZlcnQgYW4gb2JqZWN0IGludG8gYSBsaXN0IG9mIGBba2V5LCB2YWx1ZV1gIHBhaXJzLlxuXHQgIF8ucGFpcnMgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG5cdCAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG5cdCAgICB2YXIgcGFpcnMgPSBBcnJheShsZW5ndGgpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICBwYWlyc1tpXSA9IFtrZXlzW2ldLCBvYmpba2V5c1tpXV1dO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHBhaXJzO1xuXHQgIH07XG5cdFxuXHQgIC8vIEludmVydCB0aGUga2V5cyBhbmQgdmFsdWVzIG9mIGFuIG9iamVjdC4gVGhlIHZhbHVlcyBtdXN0IGJlIHNlcmlhbGl6YWJsZS5cblx0ICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHJlc3VsdFtvYmpba2V5c1tpXV1dID0ga2V5c1tpXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LlxuXHQgIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgXG5cdCAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHZhciBuYW1lcyA9IFtdO1xuXHQgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5hbWVzLnNvcnQoKTtcblx0ICB9O1xuXHRcblx0ICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS5cblx0ICBfLmV4dGVuZCA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cyk7XG5cdFxuXHQgIC8vIEFzc2lnbnMgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIG93biBwcm9wZXJ0aWVzIGluIHRoZSBwYXNzZWQtaW4gb2JqZWN0KHMpXG5cdCAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24pXG5cdCAgXy5leHRlbmRPd24gPSBfLmFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKF8ua2V5cyk7XG5cdFxuXHQgIC8vIFJldHVybnMgdGhlIGZpcnN0IGtleSBvbiBhbiBvYmplY3QgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdFxuXHQgIF8uZmluZEtleSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG5cdCAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuXHQgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKSwga2V5O1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKHByZWRpY2F0ZShvYmpba2V5XSwga2V5LCBvYmopKSByZXR1cm4ga2V5O1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXG5cdCAgXy5waWNrID0gZnVuY3Rpb24ob2JqZWN0LCBvaXRlcmF0ZWUsIGNvbnRleHQpIHtcblx0ICAgIHZhciByZXN1bHQgPSB7fSwgb2JqID0gb2JqZWN0LCBpdGVyYXRlZSwga2V5cztcblx0ICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcblx0ICAgIGlmIChfLmlzRnVuY3Rpb24ob2l0ZXJhdGVlKSkge1xuXHQgICAgICBrZXlzID0gXy5hbGxLZXlzKG9iaik7XG5cdCAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihvaXRlcmF0ZWUsIGNvbnRleHQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAga2V5cyA9IGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpO1xuXHQgICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikgeyByZXR1cm4ga2V5IGluIG9iajsgfTtcblx0ICAgICAgb2JqID0gT2JqZWN0KG9iaik7XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG5cdCAgICAgIGlmIChpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmopKSByZXN1bHRba2V5XSA9IHZhbHVlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHRcblx0ICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IHdpdGhvdXQgdGhlIGJsYWNrbGlzdGVkIHByb3BlcnRpZXMuXG5cdCAgXy5vbWl0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHtcblx0ICAgICAgaXRlcmF0ZWUgPSBfLm5lZ2F0ZShpdGVyYXRlZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIga2V5cyA9IF8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpLCBTdHJpbmcpO1xuXHQgICAgICBpdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblx0ICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7XG5cdCAgfTtcblx0XG5cdCAgLy8gRmlsbCBpbiBhIGdpdmVuIG9iamVjdCB3aXRoIGRlZmF1bHQgcHJvcGVydGllcy5cblx0ICBfLmRlZmF1bHRzID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLCB0cnVlKTtcblx0XG5cdCAgLy8gQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBwcm90b3R5cGUgb2JqZWN0LlxuXHQgIC8vIElmIGFkZGl0aW9uYWwgcHJvcGVydGllcyBhcmUgcHJvdmlkZWQgdGhlbiB0aGV5IHdpbGwgYmUgYWRkZWQgdG8gdGhlXG5cdCAgLy8gY3JlYXRlZCBvYmplY3QuXG5cdCAgXy5jcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUsIHByb3BzKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuXHQgICAgaWYgKHByb3BzKSBfLmV4dGVuZE93bihyZXN1bHQsIHByb3BzKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0XG5cdCAgLy8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LlxuXHQgIF8uY2xvbmUgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuXHQgICAgcmV0dXJuIF8uaXNBcnJheShvYmopID8gb2JqLnNsaWNlKCkgOiBfLmV4dGVuZCh7fSwgb2JqKTtcblx0ICB9O1xuXHRcblx0ICAvLyBJbnZva2VzIGludGVyY2VwdG9yIHdpdGggdGhlIG9iaiwgYW5kIHRoZW4gcmV0dXJucyBvYmouXG5cdCAgLy8gVGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4sIGluXG5cdCAgLy8gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG5cdCAgXy50YXAgPSBmdW5jdGlvbihvYmosIGludGVyY2VwdG9yKSB7XG5cdCAgICBpbnRlcmNlcHRvcihvYmopO1xuXHQgICAgcmV0dXJuIG9iajtcblx0ICB9O1xuXHRcblx0ICAvLyBSZXR1cm5zIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZiBga2V5OnZhbHVlYCBwYWlycy5cblx0ICBfLmlzTWF0Y2ggPSBmdW5jdGlvbihvYmplY3QsIGF0dHJzKSB7XG5cdCAgICB2YXIga2V5cyA9IF8ua2V5cyhhdHRycyksIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuXHQgICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gIWxlbmd0aDtcblx0ICAgIHZhciBvYmogPSBPYmplY3Qob2JqZWN0KTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmIChhdHRyc1trZXldICE9PSBvYmpba2V5XSB8fCAhKGtleSBpbiBvYmopKSByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9O1xuXHRcblx0XG5cdCAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cblx0ICB2YXIgZXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykge1xuXHQgICAgLy8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLlxuXHQgICAgLy8gU2VlIHRoZSBbSGFybW9ueSBgZWdhbGAgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbCkuXG5cdCAgICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuXHQgICAgLy8gQSBzdHJpY3QgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnkgYmVjYXVzZSBgbnVsbCA9PSB1bmRlZmluZWRgLlxuXHQgICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBhID09PSBiO1xuXHQgICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuXG5cdCAgICBpZiAoYSBpbnN0YW5jZW9mIF8pIGEgPSBhLl93cmFwcGVkO1xuXHQgICAgaWYgKGIgaW5zdGFuY2VvZiBfKSBiID0gYi5fd3JhcHBlZDtcblx0ICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuXG5cdCAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTtcblx0ICAgIGlmIChjbGFzc05hbWUgIT09IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTtcblx0ICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG5cdCAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLlxuXHQgICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuXHQgICAgICAvLyBSZWdFeHBzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgZm9yIGNvbXBhcmlzb24gKE5vdGU6ICcnICsgL2EvaSA9PT0gJy9hL2knKVxuXHQgICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuXHQgICAgICAgIC8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgXCI1XCJgIGlzXG5cdCAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZyhcIjVcIilgLlxuXHQgICAgICAgIHJldHVybiAnJyArIGEgPT09ICcnICsgYjtcblx0ICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcblx0ICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuXHQgICAgICAgIC8vIE9iamVjdChOYU4pIGlzIGVxdWl2YWxlbnQgdG8gTmFOXG5cdCAgICAgICAgaWYgKCthICE9PSArYSkgcmV0dXJuICtiICE9PSArYjtcblx0ICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuXHQgICAgICAgIHJldHVybiArYSA9PT0gMCA/IDEgLyArYSA9PT0gMSAvIGIgOiArYSA9PT0gK2I7XG5cdCAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuXHQgICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcblx0ICAgICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWVyaWMgcHJpbWl0aXZlIHZhbHVlcy4gRGF0ZXMgYXJlIGNvbXBhcmVkIGJ5IHRoZWlyXG5cdCAgICAgICAgLy8gbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zLiBOb3RlIHRoYXQgaW52YWxpZCBkYXRlcyB3aXRoIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9uc1xuXHQgICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cblx0ICAgICAgICByZXR1cm4gK2EgPT09ICtiO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBhcmVBcnJheXMgPSBjbGFzc05hbWUgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdCAgICBpZiAoIWFyZUFycmF5cykge1xuXHQgICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgICAgIC8vIE9iamVjdHMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1aXZhbGVudCwgYnV0IGBPYmplY3RgcyBvciBgQXJyYXlgc1xuXHQgICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuXHQgICAgICB2YXIgYUN0b3IgPSBhLmNvbnN0cnVjdG9yLCBiQ3RvciA9IGIuY29uc3RydWN0b3I7XG5cdCAgICAgIGlmIChhQ3RvciAhPT0gYkN0b3IgJiYgIShfLmlzRnVuY3Rpb24oYUN0b3IpICYmIGFDdG9yIGluc3RhbmNlb2YgYUN0b3IgJiZcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3Rvcilcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJ2NvbnN0cnVjdG9yJyBpbiBhICYmICdjb25zdHJ1Y3RvcicgaW4gYikpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIEFzc3VtZSBlcXVhbGl0eSBmb3IgY3ljbGljIHN0cnVjdHVyZXMuIFRoZSBhbGdvcml0aG0gZm9yIGRldGVjdGluZyBjeWNsaWNcblx0ICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXHRcblx0ICAgIC8vIEluaXRpYWxpemluZyBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0ICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cblx0ICAgIGFTdGFjayA9IGFTdGFjayB8fCBbXTtcblx0ICAgIGJTdGFjayA9IGJTdGFjayB8fCBbXTtcblx0ICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuXHQgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICAgIC8vIExpbmVhciBzZWFyY2guIFBlcmZvcm1hbmNlIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZlxuXHQgICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG5cdCAgICAgIGlmIChhU3RhY2tbbGVuZ3RoXSA9PT0gYSkgcmV0dXJuIGJTdGFja1tsZW5ndGhdID09PSBiO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFkZCB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0ICAgIGFTdGFjay5wdXNoKGEpO1xuXHQgICAgYlN0YWNrLnB1c2goYik7XG5cdFxuXHQgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuXG5cdCAgICBpZiAoYXJlQXJyYXlzKSB7XG5cdCAgICAgIC8vIENvbXBhcmUgYXJyYXkgbGVuZ3RocyB0byBkZXRlcm1pbmUgaWYgYSBkZWVwIGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5LlxuXHQgICAgICBsZW5ndGggPSBhLmxlbmd0aDtcblx0ICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcblx0ICAgICAgLy8gRGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllcy5cblx0ICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuXHQgICAgICB2YXIga2V5cyA9IF8ua2V5cyhhKSwga2V5O1xuXHQgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuXHQgICAgICBpZiAoXy5rZXlzKGIpLmxlbmd0aCAhPT0gbGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuXHQgICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuXHQgICAgICAgIGtleSA9IGtleXNbbGVuZ3RoXTtcblx0ICAgICAgICBpZiAoIShfLmhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuXHQgICAgYVN0YWNrLnBvcCgpO1xuXHQgICAgYlN0YWNrLnBvcCgpO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfTtcblx0XG5cdCAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG5cdCAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuXHQgICAgcmV0dXJuIGVxKGEsIGIpO1xuXHQgIH07XG5cdFxuXHQgIC8vIElzIGEgZ2l2ZW4gYXJyYXksIHN0cmluZywgb3Igb2JqZWN0IGVtcHR5P1xuXHQgIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG5cdCAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB0cnVlO1xuXHQgICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcblx0ICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50P1xuXHQgIF8uaXNFbGVtZW50ID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cblx0ICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuXHQgIF8uaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24ob2JqKSB7XG5cdCAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuXHQgIH07XG5cdFxuXHQgIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0P1xuXHQgIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajtcblx0ICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLlxuXHQgIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJ10sIGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0ICcgKyBuYW1lICsgJ10nO1xuXHQgICAgfTtcblx0ICB9KTtcblx0XG5cdCAgLy8gRGVmaW5lIGEgZmFsbGJhY2sgdmVyc2lvbiBvZiB0aGUgbWV0aG9kIGluIGJyb3dzZXJzIChhaGVtLCBJRSA8IDkpLCB3aGVyZVxuXHQgIC8vIHRoZXJlIGlzbid0IGFueSBpbnNwZWN0YWJsZSBcIkFyZ3VtZW50c1wiIHR5cGUuXG5cdCAgaWYgKCFfLmlzQXJndW1lbnRzKGFyZ3VtZW50cykpIHtcblx0ICAgIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIF8uaGFzKG9iaiwgJ2NhbGxlZScpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8vIE9wdGltaXplIGBpc0Z1bmN0aW9uYCBpZiBhcHByb3ByaWF0ZS4gV29yayBhcm91bmQgc29tZSB0eXBlb2YgYnVncyBpbiBvbGQgdjgsXG5cdCAgLy8gSUUgMTEgKCMxNjIxKSwgYW5kIGluIFNhZmFyaSA4ICgjMTkyOSkuXG5cdCAgaWYgKHR5cGVvZiAvLi8gIT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgSW50OEFycmF5ICE9ICdvYmplY3QnKSB7XG5cdCAgICBfLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/XG5cdCAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgcmV0dXJuIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gPyAoTmFOIGlzIHRoZSBvbmx5IG51bWJlciB3aGljaCBkb2VzIG5vdCBlcXVhbCBpdHNlbGYpLlxuXHQgIF8uaXNOYU4gPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgb2JqICE9PSArb2JqO1xuXHQgIH07XG5cdFxuXHQgIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuP1xuXHQgIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICByZXR1cm4gb2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCb29sZWFuXSc7XG5cdCAgfTtcblx0XG5cdCAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsP1xuXHQgIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICByZXR1cm4gb2JqID09PSBudWxsO1xuXHQgIH07XG5cdFxuXHQgIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkP1xuXHQgIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiBvYmogPT09IHZvaWQgMDtcblx0ICB9O1xuXHRcblx0ICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5XG5cdCAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS5cblx0ICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG5cdCAgICByZXR1cm4gb2JqICE9IG51bGwgJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gVXRpbGl0eSBGdW5jdGlvbnNcblx0ICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAvLyBSdW4gVW5kZXJzY29yZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzXG5cdCAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuXHQgIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcm9vdC5fID0gcHJldmlvdXNVbmRlcnNjb3JlO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cblx0ICBfLmlkZW50aXR5ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBQcmVkaWNhdGUtZ2VuZXJhdGluZyBmdW5jdGlvbnMuIE9mdGVuIHVzZWZ1bCBvdXRzaWRlIG9mIFVuZGVyc2NvcmUuXG5cdCAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXHRcblx0ICBfLnByb3BlcnR5ID0gcHJvcGVydHk7XG5cdFxuXHQgIC8vIEdlbmVyYXRlcyBhIGZ1bmN0aW9uIGZvciBhIGdpdmVuIG9iamVjdCB0aGF0IHJldHVybnMgYSBnaXZlbiBwcm9wZXJ0eS5cblx0ICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHtcblx0ICAgIHJldHVybiBvYmogPT0gbnVsbCA/IGZ1bmN0aW9uKCl7fSA6IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICByZXR1cm4gb2JqW2tleV07XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZlxuXHQgIC8vIGBrZXk6dmFsdWVgIHBhaXJzLlxuXHQgIF8ubWF0Y2hlciA9IF8ubWF0Y2hlcyA9IGZ1bmN0aW9uKGF0dHJzKSB7XG5cdCAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIHJldHVybiBfLmlzTWF0Y2gob2JqLCBhdHRycyk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuXHQgIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkge1xuXHQgICAgdmFyIGFjY3VtID0gQXJyYXkoTWF0aC5tYXgoMCwgbikpO1xuXHQgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpO1xuXHQgICAgcmV0dXJuIGFjY3VtO1xuXHQgIH07XG5cdFxuXHQgIC8vIFJldHVybiBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKGluY2x1c2l2ZSkuXG5cdCAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuXHQgICAgaWYgKG1heCA9PSBudWxsKSB7XG5cdCAgICAgIG1heCA9IG1pbjtcblx0ICAgICAgbWluID0gMDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBtaW4gKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xuXHQgIH07XG5cdFxuXHQgIC8vIEEgKHBvc3NpYmx5IGZhc3Rlcikgd2F5IHRvIGdldCB0aGUgY3VycmVudCB0aW1lc3RhbXAgYXMgYW4gaW50ZWdlci5cblx0ICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgIH07XG5cdFxuXHQgICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuXHQgIHZhciBlc2NhcGVNYXAgPSB7XG5cdCAgICAnJic6ICcmYW1wOycsXG5cdCAgICAnPCc6ICcmbHQ7Jyxcblx0ICAgICc+JzogJyZndDsnLFxuXHQgICAgJ1wiJzogJyZxdW90OycsXG5cdCAgICBcIidcIjogJyYjeDI3OycsXG5cdCAgICAnYCc6ICcmI3g2MDsnXG5cdCAgfTtcblx0ICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXHRcblx0ICAvLyBGdW5jdGlvbnMgZm9yIGVzY2FwaW5nIGFuZCB1bmVzY2FwaW5nIHN0cmluZ3MgdG8vZnJvbSBIVE1MIGludGVycG9sYXRpb24uXG5cdCAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcblx0ICAgIHZhciBlc2NhcGVyID0gZnVuY3Rpb24obWF0Y2gpIHtcblx0ICAgICAgcmV0dXJuIG1hcFttYXRjaF07XG5cdCAgICB9O1xuXHQgICAgLy8gUmVnZXhlcyBmb3IgaWRlbnRpZnlpbmcgYSBrZXkgdGhhdCBuZWVkcyB0byBiZSBlc2NhcGVkXG5cdCAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XG5cdCAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpO1xuXHQgICAgdmFyIHJlcGxhY2VSZWdleHAgPSBSZWdFeHAoc291cmNlLCAnZycpO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuXHQgICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7XG5cdCAgICAgIHJldHVybiB0ZXN0UmVnZXhwLnRlc3Qoc3RyaW5nKSA/IHN0cmluZy5yZXBsYWNlKHJlcGxhY2VSZWdleHAsIGVzY2FwZXIpIDogc3RyaW5nO1xuXHQgICAgfTtcblx0ICB9O1xuXHQgIF8uZXNjYXBlID0gY3JlYXRlRXNjYXBlcihlc2NhcGVNYXApO1xuXHQgIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcblx0XG5cdCAgLy8gSWYgdGhlIHZhbHVlIG9mIHRoZSBuYW1lZCBgcHJvcGVydHlgIGlzIGEgZnVuY3Rpb24gdGhlbiBpbnZva2UgaXQgd2l0aCB0aGVcblx0ICAvLyBgb2JqZWN0YCBhcyBjb250ZXh0OyBvdGhlcndpc2UsIHJldHVybiBpdC5cblx0ICBfLnJlc3VsdCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGZhbGxiYWNrKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHZvaWQgMCA6IG9iamVjdFtwcm9wZXJ0eV07XG5cdCAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuXHQgICAgICB2YWx1ZSA9IGZhbGxiYWNrO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF8uaXNGdW5jdGlvbih2YWx1ZSkgPyB2YWx1ZS5jYWxsKG9iamVjdCkgOiB2YWx1ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLlxuXHQgIC8vIFVzZWZ1bCBmb3IgdGVtcG9yYXJ5IERPTSBpZHMuXG5cdCAgdmFyIGlkQ291bnRlciA9IDA7XG5cdCAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuXHQgICAgdmFyIGlkID0gKytpZENvdW50ZXIgKyAnJztcblx0ICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xuXHQgIH07XG5cdFxuXHQgIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZVxuXHQgIC8vIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cblx0ICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG5cdCAgICBldmFsdWF0ZSAgICA6IC88JShbXFxzXFxTXSs/KSU+L2csXG5cdCAgICBpbnRlcnBvbGF0ZSA6IC88JT0oW1xcc1xcU10rPyklPi9nLFxuXHQgICAgZXNjYXBlICAgICAgOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuXHQgIH07XG5cdFxuXHQgIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cblx0ICAvLyBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uIG9yIGVzY2FwaW5nIHJlZ2V4LCB3ZSBuZWVkIG9uZSB0aGF0IGlzXG5cdCAgLy8gZ3VhcmFudGVlZCBub3QgdG8gbWF0Y2guXG5cdCAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cdFxuXHQgIC8vIENlcnRhaW4gY2hhcmFjdGVycyBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGNhbiBiZSBwdXQgaW50byBhXG5cdCAgLy8gc3RyaW5nIGxpdGVyYWwuXG5cdCAgdmFyIGVzY2FwZXMgPSB7XG5cdCAgICBcIidcIjogICAgICBcIidcIixcblx0ICAgICdcXFxcJzogICAgICdcXFxcJyxcblx0ICAgICdcXHInOiAgICAgJ3InLFxuXHQgICAgJ1xcbic6ICAgICAnbicsXG5cdCAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG5cdCAgICAnXFx1MjAyOSc6ICd1MjAyOSdcblx0ICB9O1xuXHRcblx0ICB2YXIgZXNjYXBlciA9IC9cXFxcfCd8XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvZztcblx0XG5cdCAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuXHQgICAgcmV0dXJuICdcXFxcJyArIGVzY2FwZXNbbWF0Y2hdO1xuXHQgIH07XG5cdFxuXHQgIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uXG5cdCAgLy8gVW5kZXJzY29yZSB0ZW1wbGF0aW5nIGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlcyB3aGl0ZXNwYWNlLFxuXHQgIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuXHQgIC8vIE5COiBgb2xkU2V0dGluZ3NgIG9ubHkgZXhpc3RzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cblx0ICBfLnRlbXBsYXRlID0gZnVuY3Rpb24odGV4dCwgc2V0dGluZ3MsIG9sZFNldHRpbmdzKSB7XG5cdCAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuXHQgICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHt9LCBzZXR0aW5ncywgXy50ZW1wbGF0ZVNldHRpbmdzKTtcblx0XG5cdCAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cblx0ICAgIHZhciBtYXRjaGVyID0gUmVnRXhwKFtcblx0ICAgICAgKHNldHRpbmdzLmVzY2FwZSB8fCBub01hdGNoKS5zb3VyY2UsXG5cdCAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG5cdCAgICAgIChzZXR0aW5ncy5ldmFsdWF0ZSB8fCBub01hdGNoKS5zb3VyY2Vcblx0ICAgIF0uam9pbignfCcpICsgJ3wkJywgJ2cnKTtcblx0XG5cdCAgICAvLyBDb21waWxlIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGVzY2FwaW5nIHN0cmluZyBsaXRlcmFscyBhcHByb3ByaWF0ZWx5LlxuXHQgICAgdmFyIGluZGV4ID0gMDtcblx0ICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuXHQgICAgdGV4dC5yZXBsYWNlKG1hdGNoZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUsIGludGVycG9sYXRlLCBldmFsdWF0ZSwgb2Zmc2V0KSB7XG5cdCAgICAgIHNvdXJjZSArPSB0ZXh0LnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UoZXNjYXBlciwgZXNjYXBlQ2hhcik7XG5cdCAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXHRcblx0ICAgICAgaWYgKGVzY2FwZSkge1xuXHQgICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgZXNjYXBlICsgXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI7XG5cdCAgICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGUpIHtcblx0ICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGludGVycG9sYXRlICsgXCIpKT09bnVsbD8nJzpfX3QpK1xcbidcIjtcblx0ICAgICAgfSBlbHNlIGlmIChldmFsdWF0ZSkge1xuXHQgICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZSArIFwiXFxuX19wKz0nXCI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIEFkb2JlIFZNcyBuZWVkIHRoZSBtYXRjaCByZXR1cm5lZCB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IG9mZmVzdC5cblx0ICAgICAgcmV0dXJuIG1hdGNoO1xuXHQgICAgfSk7XG5cdCAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXHRcblx0ICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuXG5cdCAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcXG4nICsgc291cmNlICsgJ31cXG4nO1xuXHRcblx0ICAgIHNvdXJjZSA9IFwidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLFwiICtcblx0ICAgICAgXCJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiICtcblx0ICAgICAgc291cmNlICsgJ3JldHVybiBfX3A7XFxuJztcblx0XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcmVuZGVyID0gbmV3IEZ1bmN0aW9uKHNldHRpbmdzLnZhcmlhYmxlIHx8ICdvYmonLCAnXycsIHNvdXJjZSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIGUuc291cmNlID0gc291cmNlO1xuXHQgICAgICB0aHJvdyBlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG5cdCAgICB2YXIgYXJndW1lbnQgPSBzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJztcblx0ICAgIHRlbXBsYXRlLnNvdXJjZSA9ICdmdW5jdGlvbignICsgYXJndW1lbnQgKyAnKXtcXG4nICsgc291cmNlICsgJ30nO1xuXHRcblx0ICAgIHJldHVybiB0ZW1wbGF0ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBBZGQgYSBcImNoYWluXCIgZnVuY3Rpb24uIFN0YXJ0IGNoYWluaW5nIGEgd3JhcHBlZCBVbmRlcnNjb3JlIG9iamVjdC5cblx0ICBfLmNoYWluID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG5cdCAgICBpbnN0YW5jZS5fY2hhaW4gPSB0cnVlO1xuXHQgICAgcmV0dXJuIGluc3RhbmNlO1xuXHQgIH07XG5cdFxuXHQgIC8vIE9PUFxuXHQgIC8vIC0tLS0tLS0tLS0tLS0tLVxuXHQgIC8vIElmIFVuZGVyc2NvcmUgaXMgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGl0IHJldHVybnMgYSB3cmFwcGVkIG9iamVjdCB0aGF0XG5cdCAgLy8gY2FuIGJlIHVzZWQgT08tc3R5bGUuIFRoaXMgd3JhcHBlciBob2xkcyBhbHRlcmVkIHZlcnNpb25zIG9mIGFsbCB0aGVcblx0ICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXHRcblx0ICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY29udGludWUgY2hhaW5pbmcgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXG5cdCAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uKGluc3RhbmNlLCBvYmopIHtcblx0ICAgIHJldHVybiBpbnN0YW5jZS5fY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajtcblx0ICB9O1xuXHRcblx0ICAvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG5cdCAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgXy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksIGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgdmFyIGZ1bmMgPSBfW25hbWVdID0gb2JqW25hbWVdO1xuXHQgICAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBhcmdzID0gW3RoaXMuX3dyYXBwZWRdO1xuXHQgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcblx0ICAgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIGZ1bmMuYXBwbHkoXywgYXJncykpO1xuXHQgICAgICB9O1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgLy8gQWRkIGFsbCBvZiB0aGUgVW5kZXJzY29yZSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIgb2JqZWN0LlxuXHQgIF8ubWl4aW4oXyk7XG5cdFxuXHQgIC8vIEFkZCBhbGwgbXV0YXRvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG5cdCAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuXHQgICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7XG5cdCAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7XG5cdCAgICAgIGlmICgobmFtZSA9PT0gJ3NoaWZ0JyB8fCBuYW1lID09PSAnc3BsaWNlJykgJiYgb2JqLmxlbmd0aCA9PT0gMCkgZGVsZXRlIG9ialswXTtcblx0ICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBvYmopO1xuXHQgICAgfTtcblx0ICB9KTtcblx0XG5cdCAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG5cdCAgXy5lYWNoKFsnY29uY2F0JywgJ2pvaW4nLCAnc2xpY2UnXSwgZnVuY3Rpb24obmFtZSkge1xuXHQgICAgdmFyIG1ldGhvZCA9IEFycmF5UHJvdG9bbmFtZV07XG5cdCAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKTtcblx0ICAgIH07XG5cdCAgfSk7XG5cdFxuXHQgIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LlxuXHQgIF8ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDtcblx0ICB9O1xuXHRcblx0ICAvLyBQcm92aWRlIHVud3JhcHBpbmcgcHJveHkgZm9yIHNvbWUgbWV0aG9kcyB1c2VkIGluIGVuZ2luZSBvcGVyYXRpb25zXG5cdCAgLy8gc3VjaCBhcyBhcml0aG1ldGljIGFuZCBKU09OIHN0cmluZ2lmaWNhdGlvbi5cblx0ICBfLnByb3RvdHlwZS52YWx1ZU9mID0gXy5wcm90b3R5cGUudG9KU09OID0gXy5wcm90b3R5cGUudmFsdWU7XG5cdFxuXHQgIF8ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gJycgKyB0aGlzLl93cmFwcGVkO1xuXHQgIH07XG5cdFxuXHQgIC8vIEFNRCByZWdpc3RyYXRpb24gaGFwcGVucyBhdCB0aGUgZW5kIGZvciBjb21wYXRpYmlsaXR5IHdpdGggQU1EIGxvYWRlcnNcblx0ICAvLyB0aGF0IG1heSBub3QgZW5mb3JjZSBuZXh0LXR1cm4gc2VtYW50aWNzIG9uIG1vZHVsZXMuIEV2ZW4gdGhvdWdoIGdlbmVyYWxcblx0ICAvLyBwcmFjdGljZSBmb3IgQU1EIHJlZ2lzdHJhdGlvbiBpcyB0byBiZSBhbm9ueW1vdXMsIHVuZGVyc2NvcmUgcmVnaXN0ZXJzXG5cdCAgLy8gYXMgYSBuYW1lZCBtb2R1bGUgYmVjYXVzZSwgbGlrZSBqUXVlcnksIGl0IGlzIGEgYmFzZSBsaWJyYXJ5IHRoYXQgaXNcblx0ICAvLyBwb3B1bGFyIGVub3VnaCB0byBiZSBidW5kbGVkIGluIGEgdGhpcmQgcGFydHkgbGliLCBidXQgbm90IGJlIHBhcnQgb2Zcblx0ICAvLyBhbiBBTUQgbG9hZCByZXF1ZXN0LiBUaG9zZSBjYXNlcyBjb3VsZCBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGFuXG5cdCAgLy8gYW5vbnltb3VzIGRlZmluZSgpIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgbG9hZGVyIHJlcXVlc3QuXG5cdCAgaWYgKHRydWUpIHtcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gXztcblx0ICAgIH0uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0ICB9XG5cdH0uY2FsbCh0aGlzKSk7XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiFcblx0ICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2Mi4yLjRcblx0ICogaHR0cDovL2pxdWVyeS5jb20vXG5cdCAqXG5cdCAqIEluY2x1ZGVzIFNpenpsZS5qc1xuXHQgKiBodHRwOi8vc2l6emxlanMuY29tL1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2Vcblx0ICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuXHQgKlxuXHQgKiBEYXRlOiAyMDE2LTA1LTIwVDE3OjIzWlxuXHQgKi9cblx0XG5cdChmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXHRcblx0XHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdFx0Ly8gaXMgcHJlc2VudCwgZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeS5cblx0XHRcdC8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgXG5cdFx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHRcdC8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgYHdpbmRvd2AuXG5cdFx0XHQvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpKHdpbmRvdyk7XG5cdFx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQgP1xuXHRcdFx0XHRmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRcdGlmICggIXcuZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBmYWN0b3J5KCB3ICk7XG5cdFx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZhY3RvcnkoIGdsb2JhbCApO1xuXHRcdH1cblx0XG5cdC8vIFBhc3MgdGhpcyBpZiB3aW5kb3cgaXMgbm90IGRlZmluZWQgeWV0XG5cdH0odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkge1xuXHRcblx0Ly8gU3VwcG9ydDogRmlyZWZveCAxOCtcblx0Ly8gQ2FuJ3QgYmUgaW4gc3RyaWN0IG1vZGUsIHNldmVyYWwgbGlicyBpbmNsdWRpbmcgQVNQLk5FVCB0cmFjZVxuXHQvLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWZcblx0Ly8geW91IHRyeSB0byB0cmFjZSB0aHJvdWdoIFwidXNlIHN0cmljdFwiIGNhbGwgY2hhaW5zLiAoIzEzMzM1KVxuXHQvL1widXNlIHN0cmljdFwiO1xuXHR2YXIgYXJyID0gW107XG5cdFxuXHR2YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cdFxuXHR2YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cdFxuXHR2YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblx0XG5cdHZhciBwdXNoID0gYXJyLnB1c2g7XG5cdFxuXHR2YXIgaW5kZXhPZiA9IGFyci5pbmRleE9mO1xuXHRcblx0dmFyIGNsYXNzMnR5cGUgPSB7fTtcblx0XG5cdHZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7XG5cdFxuXHR2YXIgaGFzT3duID0gY2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdHZhciBzdXBwb3J0ID0ge307XG5cdFxuXHRcblx0XG5cdHZhclxuXHRcdHZlcnNpb24gPSBcIjIuMi40XCIsXG5cdFxuXHRcdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdFx0alF1ZXJ5ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcblx0XHRcdC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuXHRcdFx0Ly8gTmVlZCBpbml0IGlmIGpRdWVyeSBpcyBjYWxsZWQgKGp1c3QgYWxsb3cgZXJyb3IgdG8gYmUgdGhyb3duIGlmIG5vdCBpbmNsdWRlZClcblx0XHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdFx0fSxcblx0XG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0XHQvLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1Bcblx0XHRydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcblx0XG5cdFx0Ly8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG5cdFx0cm1zUHJlZml4ID0gL14tbXMtLyxcblx0XHRyZGFzaEFscGhhID0gLy0oW1xcZGEtel0pL2dpLFxuXHRcblx0XHQvLyBVc2VkIGJ5IGpRdWVyeS5jYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpXG5cdFx0ZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcblx0XHRcdHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcblx0XHR9O1xuXHRcblx0alF1ZXJ5LmZuID0galF1ZXJ5LnByb3RvdHlwZSA9IHtcblx0XG5cdFx0Ly8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZFxuXHRcdGpxdWVyeTogdmVyc2lvbixcblx0XG5cdFx0Y29uc3RydWN0b3I6IGpRdWVyeSxcblx0XG5cdFx0Ly8gU3RhcnQgd2l0aCBhbiBlbXB0eSBzZWxlY3RvclxuXHRcdHNlbGVjdG9yOiBcIlwiLFxuXHRcblx0XHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0XHRsZW5ndGg6IDAsXG5cdFxuXHRcdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBHZXQgdGhlIE50aCBlbGVtZW50IGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0IE9SXG5cdFx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0XHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0XHRyZXR1cm4gbnVtICE9IG51bGwgP1xuXHRcblx0XHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdFx0XHQoIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF0gKSA6XG5cdFxuXHRcdFx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0XHRcdHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0XHR9LFxuXHRcblx0XHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdFx0Ly8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpXG5cdFx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFxuXHRcdFx0Ly8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcblx0XHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblx0XG5cdFx0XHQvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKVxuXHRcdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXHRcdFx0cmV0LmNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cdFxuXHRcdFx0Ly8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXRcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XG5cdFx0Ly8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cblx0XHRlYWNoOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmVhY2goIHRoaXMsIGNhbGxiYWNrICk7XG5cdFx0fSxcblx0XG5cdFx0bWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdFx0fSApICk7XG5cdFx0fSxcblx0XG5cdFx0c2xpY2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0XHR9LFxuXHRcblx0XHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lcSggMCApO1xuXHRcdH0sXG5cdFxuXHRcdGxhc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZXEoIC0xICk7XG5cdFx0fSxcblx0XG5cdFx0ZXE6IGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0XHRqID0gK2kgKyAoIGkgPCAwID8gbGVuIDogMCApO1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqID49IDAgJiYgaiA8IGxlbiA/IFsgdGhpc1sgaiBdIF0gOiBbXSApO1xuXHRcdH0sXG5cdFxuXHRcdGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTtcblx0XHR9LFxuXHRcblx0XHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdFx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdFx0cHVzaDogcHVzaCxcblx0XHRzb3J0OiBhcnIuc29ydCxcblx0XHRzcGxpY2U6IGFyci5zcGxpY2Vcblx0fTtcblx0XG5cdGpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxuXHRcdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sXG5cdFx0XHRpID0gMSxcblx0XHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0XHRkZWVwID0gZmFsc2U7XG5cdFxuXHRcdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0XHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0ZGVlcCA9IHRhcmdldDtcblx0XG5cdFx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIGkgXSB8fCB7fTtcblx0XHRcdGkrKztcblx0XHR9XG5cdFxuXHRcdC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KVxuXHRcdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIHRhcmdldCApICkge1xuXHRcdFx0dGFyZ2V0ID0ge307XG5cdFx0fVxuXHRcblx0XHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0XHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHRcdHRhcmdldCA9IHRoaXM7XG5cdFx0XHRpLS07XG5cdFx0fVxuXHRcblx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XG5cdFx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRpZiAoICggb3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdICkgIT0gbnVsbCApIHtcblx0XG5cdFx0XHRcdC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3Rcblx0XHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXHRcdFx0XHRcdGNvcHkgPSBvcHRpb25zWyBuYW1lIF07XG5cdFxuXHRcdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0XHRpZiAoIHRhcmdldCA9PT0gY29weSApIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29weSApIHx8XG5cdFx0XHRcdFx0XHQoIGNvcHlJc0FycmF5ID0galF1ZXJ5LmlzQXJyYXkoIGNvcHkgKSApICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSApIHtcblx0XHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzQXJyYXkoIHNyYyApID8gc3JjIDogW107XG5cdFxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHNyYyApID8gc3JjIDoge307XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGpRdWVyeS5leHRlbmQoIGRlZXAsIGNsb25lLCBjb3B5ICk7XG5cdFxuXHRcdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRcdHJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFxuXHRcdC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuXHRcdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cdFxuXHRcdC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG5cdFx0aXNSZWFkeTogdHJ1ZSxcblx0XG5cdFx0ZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHRcdH0sXG5cdFxuXHRcdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cdFxuXHRcdGlzRnVuY3Rpb246IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnR5cGUoIG9iaiApID09PSBcImZ1bmN0aW9uXCI7XG5cdFx0fSxcblx0XG5cdFx0aXNBcnJheTogQXJyYXkuaXNBcnJheSxcblx0XG5cdFx0aXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09PSBvYmoud2luZG93O1xuXHRcdH0sXG5cdFxuXHRcdGlzTnVtZXJpYzogZnVuY3Rpb24oIG9iaiApIHtcblx0XG5cdFx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAobnVsbHx0cnVlfGZhbHNlfFwiXCIpXG5cdFx0XHQvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG5cdFx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHRcdC8vIGFkZGluZyAxIGNvcnJlY3RzIGxvc3Mgb2YgcHJlY2lzaW9uIGZyb20gcGFyc2VGbG9hdCAoIzE1MTAwKVxuXHRcdFx0dmFyIHJlYWxTdHJpbmdPYmogPSBvYmogJiYgb2JqLnRvU3RyaW5nKCk7XG5cdFx0XHRyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAoIHJlYWxTdHJpbmdPYmogLSBwYXJzZUZsb2F0KCByZWFsU3RyaW5nT2JqICkgKyAxICkgPj0gMDtcblx0XHR9LFxuXHRcblx0XHRpc1BsYWluT2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0dmFyIGtleTtcblx0XG5cdFx0XHQvLyBOb3QgcGxhaW4gb2JqZWN0czpcblx0XHRcdC8vIC0gQW55IG9iamVjdCBvciB2YWx1ZSB3aG9zZSBpbnRlcm5hbCBbW0NsYXNzXV0gcHJvcGVydHkgaXMgbm90IFwiW29iamVjdCBPYmplY3RdXCJcblx0XHRcdC8vIC0gRE9NIG5vZGVzXG5cdFx0XHQvLyAtIHdpbmRvd1xuXHRcdFx0aWYgKCBqUXVlcnkudHlwZSggb2JqICkgIT09IFwib2JqZWN0XCIgfHwgb2JqLm5vZGVUeXBlIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0XG5cdFx0XHRpZiAoIG9iai5jb25zdHJ1Y3RvciAmJlxuXHRcdFx0XHRcdCFoYXNPd24uY2FsbCggb2JqLCBcImNvbnN0cnVjdG9yXCIgKSAmJlxuXHRcdFx0XHRcdCFoYXNPd24uY2FsbCggb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSB8fCB7fSwgXCJpc1Byb3RvdHlwZU9mXCIgKSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE93biBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhdGVkIGZpcnN0bHksIHNvIHRvIHNwZWVkIHVwLFxuXHRcdFx0Ly8gaWYgbGFzdCBvbmUgaXMgb3duLCB0aGVuIGFsbCBwcm9wZXJ0aWVzIGFyZSBvd25cblx0XHRcdGZvciAoIGtleSBpbiBvYmogKSB7fVxuXHRcblx0XHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTtcblx0XHR9LFxuXHRcblx0XHRpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0dmFyIG5hbWU7XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XG5cdFx0dHlwZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wLCBpT1M8NiAoZnVuY3Rpb25pc2ggUmVnRXhwKVxuXHRcdFx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRcdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbCggb2JqICkgXSB8fCBcIm9iamVjdFwiIDpcblx0XHRcdFx0dHlwZW9mIG9iajtcblx0XHR9LFxuXHRcblx0XHQvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dFxuXHRcdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkge1xuXHRcdFx0dmFyIHNjcmlwdCxcblx0XHRcdFx0aW5kaXJlY3QgPSBldmFsO1xuXHRcblx0XHRcdGNvZGUgPSBqUXVlcnkudHJpbSggY29kZSApO1xuXHRcblx0XHRcdGlmICggY29kZSApIHtcblx0XG5cdFx0XHRcdC8vIElmIHRoZSBjb2RlIGluY2x1ZGVzIGEgdmFsaWQsIHByb2xvZ3VlIHBvc2l0aW9uXG5cdFx0XHRcdC8vIHN0cmljdCBtb2RlIHByYWdtYSwgZXhlY3V0ZSBjb2RlIGJ5IGluamVjdGluZyBhXG5cdFx0XHRcdC8vIHNjcmlwdCB0YWcgaW50byB0aGUgZG9jdW1lbnQuXG5cdFx0XHRcdGlmICggY29kZS5pbmRleE9mKCBcInVzZSBzdHJpY3RcIiApID09PSAxICkge1xuXHRcdFx0XHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic2NyaXB0XCIgKTtcblx0XHRcdFx0XHRzY3JpcHQudGV4dCA9IGNvZGU7XG5cdFx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0ICkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgYXZvaWQgdGhlIERPTSBub2RlIGNyZWF0aW9uLCBpbnNlcnRpb25cblx0XHRcdFx0XHQvLyBhbmQgcmVtb3ZhbCBieSB1c2luZyBhbiBpbmRpcmVjdCBnbG9iYWwgZXZhbFxuXHRcblx0XHRcdFx0XHRpbmRpcmVjdCggY29kZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Ly8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlc1xuXHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHQvLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpXG5cdFx0Y2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkge1xuXHRcdFx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG5cdFx0fSxcblx0XG5cdFx0bm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0fSxcblx0XG5cdFx0ZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2sgKSB7XG5cdFx0XHR2YXIgbGVuZ3RoLCBpID0gMDtcblx0XG5cdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBvYmogKSApIHtcblx0XHRcdFx0bGVuZ3RoID0gb2JqLmxlbmd0aDtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9LFxuXHRcblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMVxuXHRcdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0cmV0dXJuIHRleHQgPT0gbnVsbCA/XG5cdFx0XHRcdFwiXCIgOlxuXHRcdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0XHR9LFxuXHRcblx0XHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdFx0bWFrZUFycmF5OiBmdW5jdGlvbiggYXJyLCByZXN1bHRzICkge1xuXHRcdFx0dmFyIHJldCA9IHJlc3VsdHMgfHwgW107XG5cdFxuXHRcdFx0aWYgKCBhcnIgIT0gbnVsbCApIHtcblx0XHRcdFx0aWYgKCBpc0FycmF5TGlrZSggT2JqZWN0KCBhcnIgKSApICkge1xuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggcmV0LFxuXHRcdFx0XHRcdFx0dHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0XHRbIGFyciBdIDogYXJyXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwdXNoLmNhbGwoIHJldCwgYXJyICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0sXG5cdFxuXHRcdGluQXJyYXk6IGZ1bmN0aW9uKCBlbGVtLCBhcnIsIGkgKSB7XG5cdFx0XHRyZXR1cm4gYXJyID09IG51bGwgPyAtMSA6IGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7XG5cdFx0fSxcblx0XG5cdFx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0XHRqID0gMCxcblx0XHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblx0XG5cdFx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0Zmlyc3QubGVuZ3RoID0gaTtcblx0XG5cdFx0XHRyZXR1cm4gZmlyc3Q7XG5cdFx0fSxcblx0XG5cdFx0Z3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkge1xuXHRcdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cdFxuXHRcdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRcdG1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIG1hdGNoZXM7XG5cdFx0fSxcblx0XG5cdFx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdFx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0XHR2YXIgbGVuZ3RoLCB2YWx1ZSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdHJldCA9IFtdO1xuXHRcblx0XHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0XHRpZiAoIGlzQXJyYXlMaWtlKCBlbGVtcyApICkge1xuXHRcdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGg7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXHRcblx0XHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHQvLyBHbyB0aHJvdWdoIGV2ZXJ5IGtleSBvbiB0aGUgb2JqZWN0LFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblx0XG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdFx0cmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApO1xuXHRcdH0sXG5cdFxuXHRcdC8vIEEgZ2xvYmFsIEdVSUQgY291bnRlciBmb3Igb2JqZWN0c1xuXHRcdGd1aWQ6IDEsXG5cdFxuXHRcdC8vIEJpbmQgYSBmdW5jdGlvbiB0byBhIGNvbnRleHQsIG9wdGlvbmFsbHkgcGFydGlhbGx5IGFwcGx5aW5nIGFueVxuXHRcdC8vIGFyZ3VtZW50cy5cblx0XHRwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cdFxuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0dG1wID0gZm5bIGNvbnRleHQgXTtcblx0XHRcdFx0Y29udGV4dCA9IGZuO1xuXHRcdFx0XHRmbiA9IHRtcDtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHRcdFx0Ly8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cblx0XHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCBmbiApICkge1xuXHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNpbXVsYXRlZCBiaW5kXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAyICk7XG5cdFx0XHRwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0XHRcdH07XG5cdFxuXHRcdFx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdFx0XHRwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblx0XG5cdFx0XHRyZXR1cm4gcHJveHk7XG5cdFx0fSxcblx0XG5cdFx0bm93OiBEYXRlLm5vdyxcblx0XG5cdFx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdFx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0XHRzdXBwb3J0OiBzdXBwb3J0XG5cdH0gKTtcblx0XG5cdC8vIEpTSGludCB3b3VsZCBlcnJvciBvbiB0aGlzIGNvZGUgZHVlIHRvIHRoZSBTeW1ib2wgbm90IGJlaW5nIGRlZmluZWQgaW4gRVM1LlxuXHQvLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuanNoaW50cmMgd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWxcblx0Ly8gdW5ndWFyZGVkIGluIGFub3RoZXIgcGxhY2UsIGl0IHNlZW1zIHNhZmVyIHRvIGp1c3QgZGlzYWJsZSBKU0hpbnQgZm9yIHRoZXNlXG5cdC8vIHRocmVlIGxpbmVzLlxuXHQvKiBqc2hpbnQgaWdub3JlOiBzdGFydCAqL1xuXHRpZiAoIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiApIHtcblx0XHRqUXVlcnkuZm5bIFN5bWJvbC5pdGVyYXRvciBdID0gYXJyWyBTeW1ib2wuaXRlcmF0b3IgXTtcblx0fVxuXHQvKiBqc2hpbnQgaWdub3JlOiBlbmQgKi9cblx0XG5cdC8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxuXHRqUXVlcnkuZWFjaCggXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbFwiLnNwbGl0KCBcIiBcIiApLFxuXHRmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0XHRjbGFzczJ0eXBlWyBcIltvYmplY3QgXCIgKyBuYW1lICsgXCJdXCIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0fSApO1xuXHRcblx0ZnVuY3Rpb24gaXNBcnJheUxpa2UoIG9iaiApIHtcblx0XG5cdFx0Ly8gU3VwcG9ydDogaU9TIDguMiAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG5cdFx0Ly8gYGluYCBjaGVjayB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0yMTQ1KVxuXHRcdC8vIGhhc093biBpc24ndCB1c2VkIGhlcmUgZHVlIHRvIGZhbHNlIG5lZ2F0aXZlc1xuXHRcdC8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUVcblx0XHR2YXIgbGVuZ3RoID0gISFvYmogJiYgXCJsZW5ndGhcIiBpbiBvYmogJiYgb2JqLmxlbmd0aCxcblx0XHRcdHR5cGUgPSBqUXVlcnkudHlwZSggb2JqICk7XG5cdFxuXHRcdGlmICggdHlwZSA9PT0gXCJmdW5jdGlvblwiIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gdHlwZSA9PT0gXCJhcnJheVwiIHx8IGxlbmd0aCA9PT0gMCB8fFxuXHRcdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcblx0fVxuXHR2YXIgU2l6emxlID1cblx0LyohXG5cdCAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjIuMVxuXHQgKiBodHRwOi8vc2l6emxlanMuY29tL1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2Vcblx0ICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuXHQgKlxuXHQgKiBEYXRlOiAyMDE1LTEwLTE3XG5cdCAqL1xuXHQoZnVuY3Rpb24oIHdpbmRvdyApIHtcblx0XG5cdHZhciBpLFxuXHRcdHN1cHBvcnQsXG5cdFx0RXhwcixcblx0XHRnZXRUZXh0LFxuXHRcdGlzWE1MLFxuXHRcdHRva2VuaXplLFxuXHRcdGNvbXBpbGUsXG5cdFx0c2VsZWN0LFxuXHRcdG91dGVybW9zdENvbnRleHQsXG5cdFx0c29ydElucHV0LFxuXHRcdGhhc0R1cGxpY2F0ZSxcblx0XG5cdFx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRcdHNldERvY3VtZW50LFxuXHRcdGRvY3VtZW50LFxuXHRcdGRvY0VsZW0sXG5cdFx0ZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmJ1Z2d5UVNBLFxuXHRcdHJidWdneU1hdGNoZXMsXG5cdFx0bWF0Y2hlcyxcblx0XHRjb250YWlucyxcblx0XG5cdFx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRcdGV4cGFuZG8gPSBcInNpenpsZVwiICsgMSAqIG5ldyBEYXRlKCksXG5cdFx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRcdGRpcnJ1bnMgPSAwLFxuXHRcdGRvbmUgPSAwLFxuXHRcdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRcdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRcdGNvbXBpbGVyQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRcdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fSxcblx0XG5cdFx0Ly8gR2VuZXJhbC1wdXJwb3NlIGNvbnN0YW50c1xuXHRcdE1BWF9ORUdBVElWRSA9IDEgPDwgMzEsXG5cdFxuXHRcdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0XHRoYXNPd24gPSAoe30pLmhhc093blByb3BlcnR5LFxuXHRcdGFyciA9IFtdLFxuXHRcdHBvcCA9IGFyci5wb3AsXG5cdFx0cHVzaF9uYXRpdmUgPSBhcnIucHVzaCxcblx0XHRwdXNoID0gYXJyLnB1c2gsXG5cdFx0c2xpY2UgPSBhcnIuc2xpY2UsXG5cdFx0Ly8gVXNlIGEgc3RyaXBwZWQtZG93biBpbmRleE9mIGFzIGl0J3MgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdFx0Ly8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdFx0aW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkge1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbaV0gPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiAtMTtcblx0XHR9LFxuXHRcblx0XHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblx0XG5cdFx0Ly8gUmVndWxhciBleHByZXNzaW9uc1xuXHRcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuXHRcdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cdFxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllclxuXHRcdGlkZW50aWZpZXIgPSBcIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLFxuXHRcblx0XHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0XHRhdHRyaWJ1dGVzID0gXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcdFwiKihbKl4kfCF+XT89KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHQvLyBcIkF0dHJpYnV0ZSB2YWx1ZXMgbXVzdCBiZSBDU1MgaWRlbnRpZmllcnMgW2NhcHR1cmUgNV0gb3Igc3RyaW5ncyBbY2FwdHVyZSAzIG9yIGNhcHR1cmUgNF1cIlxuXHRcdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqXFxcXF1cIixcblx0XG5cdFx0cHNldWRvcyA9IFwiOihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcXFxcKChcIiArXG5cdFx0XHQvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOlxuXHRcdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XHRcIignKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfFwiICtcblx0XHRcdC8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KVxuXHRcdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdFx0Ly8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKVxuXHRcdFx0XCIuKlwiICtcblx0XHRcdFwiKVxcXFwpfClcIixcblx0XG5cdFx0Ly8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlclxuXHRcdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRcdHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgd2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblx0XG5cdFx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdFx0cmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFs+K35dfFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdFxuXHRcdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cdFxuXHRcdHJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksXG5cdFx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXHRcblx0XHRtYXRjaEV4cHIgPSB7XG5cdFx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcdFwiQ0xBU1NcIjogbmV3IFJlZ0V4cCggXCJeXFxcXC4oXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcdFwiVEFHXCI6IG5ldyBSZWdFeHAoIFwiXihcIiArIGlkZW50aWZpZXIgKyBcInxbKl0pXCIgKSxcblx0XHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcdFwiUFNFVURPXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgcHNldWRvcyApLFxuXHRcdFx0XCJDSElMRFwiOiBuZXcgUmVnRXhwKCBcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFx0XCIqKFxcXFxkKyl8KSlcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpXCIsIFwiaVwiICksXG5cdFx0XHRcImJvb2xcIjogbmV3IFJlZ0V4cCggXCJeKD86XCIgKyBib29sZWFucyArIFwiKSRcIiwgXCJpXCIgKSxcblx0XHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdFx0Ly8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YFxuXHRcdFx0XCJuZWVkc0NvbnRleHRcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiICtcblx0XHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdFx0fSxcblx0XG5cdFx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdFx0cmhlYWRlciA9IC9eaFxcZCQvaSxcblx0XG5cdFx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cdFxuXHRcdC8vIEVhc2lseS1wYXJzZWFibGUvcmV0cmlldmFibGUgSUQgb3IgVEFHIG9yIENMQVNTIHNlbGVjdG9yc1xuXHRcdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblx0XG5cdFx0cnNpYmxpbmcgPSAvWyt+XS8sXG5cdFx0cmVzY2FwZSA9IC8nfFxcXFwvZyxcblx0XG5cdFx0Ly8gQ1NTIGVzY2FwZXMgaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI2VzY2FwZWQtY2hhcmFjdGVyc1xuXHRcdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdFx0ZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkge1xuXHRcdFx0dmFyIGhpZ2ggPSBcIjB4XCIgKyBlc2NhcGVkIC0gMHgxMDAwMDtcblx0XHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PDI0XG5cdFx0XHQvLyBXb3JrYXJvdW5kIGVycm9uZW91cyBudW1lcmljIGludGVycHJldGF0aW9uIG9mICtcIjB4XCJcblx0XHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdFx0ZXNjYXBlZCA6XG5cdFx0XHRcdGhpZ2ggPCAwID9cblx0XHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCArIDB4MTAwMDAgKSA6XG5cdFx0XHRcdFx0Ly8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpXG5cdFx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdFx0fSxcblx0XG5cdFx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHRcdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdFx0Ly8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgXCJQZXJtaXNzaW9uIERlbmllZFwiXG5cdFx0Ly8gZXJyb3IgaW4gSUVcblx0XHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRzZXREb2N1bWVudCgpO1xuXHRcdH07XG5cdFxuXHQvLyBPcHRpbWl6ZSBmb3IgcHVzaC5hcHBseSggXywgTm9kZUxpc3QgKVxuXHR0cnkge1xuXHRcdHB1c2guYXBwbHkoXG5cdFx0XHQoYXJyID0gc2xpY2UuY2FsbCggcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMgKSksXG5cdFx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHRcdCk7XG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0XHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdFx0YXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTtcblx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXHRcblx0XHRcdC8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlXG5cdFx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRcdHB1c2hfbmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoZWxzKSApO1xuXHRcdFx0fSA6XG5cdFxuXHRcdFx0Ly8gU3VwcG9ydDogSUU8OVxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZCBkaXJlY3RseVxuXHRcdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0XHR2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG5cdFx0XHRcdFx0aSA9IDA7XG5cdFx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0XHR3aGlsZSAoICh0YXJnZXRbaisrXSA9IGVsc1tpKytdKSApIHt9XG5cdFx0XHRcdHRhcmdldC5sZW5ndGggPSBqIC0gMTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuXHRcdHZhciBtLCBpLCBlbGVtLCBuaWQsIG5pZHNlbGVjdCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsXG5cdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dCAmJiBjb250ZXh0Lm93bmVyRG9jdW1lbnQsXG5cdFxuXHRcdFx0Ly8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHRcdFx0bm9kZVR5cGUgPSBjb250ZXh0ID8gY29udGV4dC5ub2RlVHlwZSA6IDk7XG5cdFxuXHRcdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXHRcblx0XHQvLyBSZXR1cm4gZWFybHkgZnJvbSBjYWxscyB3aXRoIGludmFsaWQgc2VsZWN0b3Igb3IgY29udGV4dFxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdFx0bm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgJiYgbm9kZVR5cGUgIT09IDExICkge1xuXHRcblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH1cblx0XG5cdFx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50c1xuXHRcdGlmICggIXNlZWQgKSB7XG5cdFxuXHRcdFx0aWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0XHRcdH1cblx0XHRcdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXHRcblx0XHRcdGlmICggZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFxuXHRcdFx0XHQvLyBJZiB0aGUgc2VsZWN0b3IgaXMgc3VmZmljaWVudGx5IHNpbXBsZSwgdHJ5IHVzaW5nIGEgXCJnZXQqQnkqXCIgRE9NIG1ldGhvZFxuXHRcdFx0XHQvLyAoZXhjZXB0aW5nIERvY3VtZW50RnJhZ21lbnQgY29udGV4dCwgd2hlcmUgdGhlIG1ldGhvZHMgZG9uJ3QgZXhpc3QpXG5cdFx0XHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIElEIHNlbGVjdG9yXG5cdFx0XHRcdFx0aWYgKCAobSA9IG1hdGNoWzFdKSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBEb2N1bWVudCBjb250ZXh0XG5cdFx0XHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8vIEVsZW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdFx0aWYgKCBuZXdDb250ZXh0ICYmIChlbGVtID0gbmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSAmJlxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiZcblx0XHRcdFx0XHRcdFx0XHRlbGVtLmlkID09PSBtICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBUeXBlIHNlbGVjdG9yXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XG5cdFx0XHRcdFx0Ly8gQ2xhc3Mgc2VsZWN0b3Jcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiZcblx0XHRcdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblx0XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBUYWtlIGFkdmFudGFnZSBvZiBxdWVyeVNlbGVjdG9yQWxsXG5cdFx0XHRcdGlmICggc3VwcG9ydC5xc2EgJiZcblx0XHRcdFx0XHQhY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdICYmXG5cdFx0XHRcdFx0KCFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApKSApIHtcblx0XG5cdFx0XHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0XHRcdFx0bmV3U2VsZWN0b3IgPSBzZWxlY3Rvcjtcblx0XG5cdFx0XHRcdFx0Ly8gcVNBIGxvb2tzIG91dHNpZGUgRWxlbWVudCBjb250ZXh0LCB3aGljaCBpcyBub3Qgd2hhdCB3ZSB3YW50XG5cdFx0XHRcdFx0Ly8gVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoaXMgd29ya2Fyb3VuZCB0ZWNobmlxdWVcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PThcblx0XHRcdFx0XHQvLyBFeGNsdWRlIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvbnRleHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJvYmplY3RcIiApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBDYXB0dXJlIHRoZSBjb250ZXh0IElELCBzZXR0aW5nIGl0IGZpcnN0IGlmIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFx0aWYgKCAobmlkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoIFwiaWRcIiApKSApIHtcblx0XHRcdFx0XHRcdFx0bmlkID0gbmlkLnJlcGxhY2UoIHJlc2NhcGUsIFwiXFxcXCQmXCIgKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRleHQuc2V0QXR0cmlidXRlKCBcImlkXCIsIChuaWQgPSBleHBhbmRvKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8vIFByZWZpeCBldmVyeSBzZWxlY3RvciBpbiB0aGUgbGlzdFxuXHRcdFx0XHRcdFx0Z3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0XHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0XHRcdG5pZHNlbGVjdCA9IHJpZGVudGlmaWVyLnRlc3QoIG5pZCApID8gXCIjXCIgKyBuaWQgOiBcIltpZD0nXCIgKyBuaWQgKyBcIiddXCI7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0Z3JvdXBzW2ldID0gbmlkc2VsZWN0ICsgXCIgXCIgKyB0b1NlbGVjdG9yKCBncm91cHNbaV0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oIFwiLFwiICk7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gRXhwYW5kIGNvbnRleHQgZm9yIHNpYmxpbmcgc2VsZWN0b3JzXG5cdFx0XHRcdFx0XHRuZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHxcblx0XHRcdFx0XHRcdFx0Y29udGV4dDtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmICggbmV3U2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbCggbmV3U2VsZWN0b3IgKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBxc2FFcnJvciApIHtcblx0XHRcdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0XHRcdGlmICggbmlkID09PSBleHBhbmRvICkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRleHQucmVtb3ZlQXR0cmlidXRlKCBcImlkXCIgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0Ly8gQWxsIG90aGVyc1xuXHRcdHJldHVybiBzZWxlY3QoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplXG5cdCAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcblx0ICpcdHByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpXG5cdCAqXHRkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5XG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHtcblx0XHR2YXIga2V5cyA9IFtdO1xuXHRcblx0XHRmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHtcblx0XHRcdC8vIFVzZSAoa2V5ICsgXCIgXCIpIHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoIG5hdGl2ZSBwcm90b3R5cGUgcHJvcGVydGllcyAoc2VlIElzc3VlICMxNTcpXG5cdFx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cdFx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIGtleXMuc2hpZnQoKSBdO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIChjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlKTtcblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmtcblx0ICovXG5cdGZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG5cdFx0Zm5bIGV4cGFuZG8gXSA9IHRydWU7XG5cdFx0cmV0dXJuIGZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gUGFzc2VkIHRoZSBjcmVhdGVkIGRpdiBhbmQgZXhwZWN0cyBhIGJvb2xlYW4gcmVzdWx0XG5cdCAqL1xuXHRmdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHRcdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuICEhZm4oIGRpdiApO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Ly8gUmVtb3ZlIGZyb20gaXRzIHBhcmVudCBieSBkZWZhdWx0XG5cdFx0XHRpZiAoIGRpdi5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZGl2ICk7XG5cdFx0XHR9XG5cdFx0XHQvLyByZWxlYXNlIG1lbW9yeSBpbiBJRVxuXHRcdFx0ZGl2ID0gbnVsbDtcblx0XHR9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBhdHRycyBQaXBlLXNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXNcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGRIYW5kbGUoIGF0dHJzLCBoYW5kbGVyICkge1xuXHRcdHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG5cdFx0XHRpID0gYXJyLmxlbmd0aDtcblx0XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRFeHByLmF0dHJIYW5kbGVbIGFycltpXSBdID0gaGFuZGxlcjtcblx0XHR9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gYVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGJcblx0ICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG5cdCAqL1xuXHRmdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdFx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRcdGRpZmYgPSBjdXIgJiYgYS5ub2RlVHlwZSA9PT0gMSAmJiBiLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuXHRcdFx0XHQoIH5hLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApO1xuXHRcblx0XHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0XHRpZiAoIGRpZmYgKSB7XG5cdFx0XHRyZXR1cm4gZGlmZjtcblx0XHR9XG5cdFxuXHRcdC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG5cdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHR3aGlsZSAoIChjdXIgPSBjdXIubmV4dFNpYmxpbmcpICkge1xuXHRcdFx0XHRpZiAoIGN1ciA9PT0gYiApIHtcblx0XHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBhID8gMSA6IC0xO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0XHR9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gKG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdFx0fTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHNcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkge1xuXHRcdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIGFyZ3VtZW50ICkge1xuXHRcdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHR2YXIgaixcblx0XHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdGkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoO1xuXHRcblx0XHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggc2VlZFsgKGogPSBtYXRjaEluZGV4ZXNbaV0pIF0gKSB7XG5cdFx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBhIG5vZGUgZm9yIHZhbGlkaXR5IGFzIGEgU2l6emxlIGNvbnRleHRcblx0ICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcblx0ICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlXG5cdCAqL1xuXHRmdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0XHRyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb250ZXh0O1xuXHR9XG5cdFxuXHQvLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZVxuXHRzdXBwb3J0ID0gU2l6emxlLnN1cHBvcnQgPSB7fTtcblx0XG5cdC8qKlxuXHQgKiBEZXRlY3RzIFhNTCBub2Rlc1xuXHQgKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlXG5cdCAqL1xuXHRpc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdC8vIGRvY3VtZW50RWxlbWVudCBpcyB2ZXJpZmllZCBmb3IgY2FzZXMgd2hlcmUgaXQgZG9lc24ndCB5ZXQgZXhpc3Rcblx0XHQvLyAoc3VjaCBhcyBsb2FkaW5nIGlmcmFtZXMgaW4gSUUgLSAjNDgzMylcblx0XHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0XHRyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSBcIkhUTUxcIiA6IGZhbHNlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHMgZG9jdW1lbnQtcmVsYXRlZCB2YXJpYWJsZXMgb25jZSBiYXNlZCBvbiB0aGUgY3VycmVudCBkb2N1bWVudFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50XG5cdCAqL1xuXHRzZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHRcdHZhciBoYXNDb21wYXJlLCBwYXJlbnQsXG5cdFx0XHRkb2MgPSBub2RlID8gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUgOiBwcmVmZXJyZWREb2M7XG5cdFxuXHRcdC8vIFJldHVybiBlYXJseSBpZiBkb2MgaXMgaW52YWxpZCBvciBhbHJlYWR5IHNlbGVjdGVkXG5cdFx0aWYgKCBkb2MgPT09IGRvY3VtZW50IHx8IGRvYy5ub2RlVHlwZSAhPT0gOSB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCApIHtcblx0XHRcdHJldHVybiBkb2N1bWVudDtcblx0XHR9XG5cdFxuXHRcdC8vIFVwZGF0ZSBnbG9iYWwgdmFyaWFibGVzXG5cdFx0ZG9jdW1lbnQgPSBkb2M7XG5cdFx0ZG9jRWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0XHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jdW1lbnQgKTtcblx0XG5cdFx0Ly8gU3VwcG9ydDogSUUgOS0xMSwgRWRnZVxuXHRcdC8vIEFjY2Vzc2luZyBpZnJhbWUgZG9jdW1lbnRzIGFmdGVyIHVubG9hZCB0aHJvd3MgXCJwZXJtaXNzaW9uIGRlbmllZFwiIGVycm9ycyAoalF1ZXJ5ICMxMzkzNilcblx0XHRpZiAoIChwYXJlbnQgPSBkb2N1bWVudC5kZWZhdWx0VmlldykgJiYgcGFyZW50LnRvcCAhPT0gcGFyZW50ICkge1xuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTFcblx0XHRcdGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCBcInVubG9hZFwiLCB1bmxvYWRIYW5kbGVyLCBmYWxzZSApO1xuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMCBvbmx5XG5cdFx0XHR9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRcdHBhcmVudC5hdHRhY2hFdmVudCggXCJvbnVubG9hZFwiLCB1bmxvYWRIYW5kbGVyICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvKiBBdHRyaWJ1dGVzXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0Ly8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzXG5cdFx0Ly8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpXG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHRkaXYuY2xhc3NOYW1lID0gXCJpXCI7XG5cdFx0XHRyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIik7XG5cdFx0fSk7XG5cdFxuXHRcdC8qIGdldEVsZW1lbnQocylCeSpcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdFxuXHRcdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0XHRzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHRkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRcdHJldHVybiAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGg7XG5cdFx0fSk7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHRzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblx0XG5cdFx0Ly8gU3VwcG9ydDogSUU8MTBcblx0XHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0XHQvLyBUaGUgYnJva2VuIGdldEVsZW1lbnRCeUlkIG1ldGhvZHMgZG9uJ3QgcGljayB1cCBwcm9ncmFtYXRpY2FsbHktc2V0IG5hbWVzLFxuXHRcdC8vIHNvIHVzZSBhIHJvdW5kYWJvdXQgZ2V0RWxlbWVudHNCeU5hbWUgdGVzdFxuXHRcdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaWQgPSBleHBhbmRvO1xuXHRcdFx0cmV0dXJuICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7XG5cdFx0fSk7XG5cdFxuXHRcdC8vIElEIGZpbmQgYW5kIGZpbHRlclxuXHRcdGlmICggc3VwcG9ydC5nZXRCeUlkICkge1xuXHRcdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdFx0dmFyIG0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXHRcdFx0XHRcdHJldHVybiBtID8gWyBtIF0gOiBbXTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFN1cHBvcnQ6IElFNi83XG5cdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0XG5cdFx0XHRkZWxldGUgRXhwci5maW5kW1wiSURcIl07XG5cdFxuXHRcdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9ICBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0dmFyIG5vZGUgPSB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0XHRyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdH1cblx0XG5cdFx0Ly8gVGFnXG5cdFx0RXhwci5maW5kW1wiVEFHXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/XG5cdFx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblx0XG5cdFx0XHRcdC8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTlxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdXBwb3J0LnFzYSApIHtcblx0XHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSA6XG5cdFxuXHRcdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdFx0Ly8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvb1xuXHRcdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblx0XG5cdFx0XHRcdC8vIEZpbHRlciBvdXQgcG9zc2libGUgY29tbWVudHNcblx0XHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdH07XG5cdFxuXHRcdC8vIENsYXNzXG5cdFx0RXhwci5maW5kW1wiQ0xBU1NcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24oIGNsYXNzTmFtZSwgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XG5cdFx0LyogUVNBL21hdGNoZXNTZWxlY3RvclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XG5cdFx0Ly8gUVNBIGFuZCBtYXRjaGVzU2VsZWN0b3Igc3VwcG9ydFxuXHRcblx0XHQvLyBtYXRjaGVzU2VsZWN0b3IoOmFjdGl2ZSkgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKElFOS9PcGVyYSAxMS41KVxuXHRcdHJidWdneU1hdGNoZXMgPSBbXTtcblx0XG5cdFx0Ly8gcVNhKDpmb2N1cykgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKENocm9tZSAyMSlcblx0XHQvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3Jcblx0XHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdFx0Ly8gU28sIHdlIGFsbG93IDpmb2N1cyB0byBwYXNzIHRocm91Z2ggUVNBIGFsbCB0aGUgdGltZSB0byBhdm9pZCB0aGUgSUUgZXJyb3Jcblx0XHQvLyBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcblx0XHRyYnVnZ3lRU0EgPSBbXTtcblx0XG5cdFx0aWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0XHQvLyBCdWlsZCBRU0EgcmVnZXhcblx0XHRcdC8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmlcblx0XHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0XHQvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG5cdFx0XHRcdC8vIFRoaXMgaXMgdG8gdGVzdCBJRSdzIHRyZWF0bWVudCBvZiBub3QgZXhwbGljaXRseVxuXHRcdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdFx0Ly8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcblx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTlcblx0XHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFx0XCI8c2VsZWN0IGlkPSdcIiArIGV4cGFuZG8gKyBcIi1cXHJcXFxcJyBtc2FsbG93Y2FwdHVyZT0nJz5cIiArXG5cdFx0XHRcdFx0XCI8b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiO1xuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU4LCBPcGVyYSAxMS0xMi4xNlxuXHRcdFx0XHQvLyBOb3RoaW5nIHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIGVtcHR5IHN0cmluZ3MgZm9sbG93IF49IG9yICQ9IG9yICo9XG5cdFx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0XHQvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvaGg0NjUzODguYXNweCNhdHRyaWJ1dGVfc2VjdGlvblxuXHRcdFx0XHRpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kIFwidmFsdWVcIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5XG5cdFx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuNCwgU2FmYXJpPDcuMCssIGlPUzw3LjArLCBQaGFudG9tSlM8MS45LjgrXG5cdFx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCBcIltpZH49XCIgKyBleHBhbmRvICsgXCItXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiOmNoZWNrZWRcIik7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4KywgaU9TIDgrXG5cdFx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzY4NTFcblx0XHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCBcImEjXCIgKyBleHBhbmRvICsgXCIrKlwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiLiMuK1srfl1cIik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcblx0XHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0XHQvLyBTdXBwb3J0OiBXaW5kb3dzIDggTmF0aXZlIEFwcHNcblx0XHRcdFx0Ly8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50XG5cdFx0XHRcdHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJoaWRkZW5cIiApO1xuXHRcdFx0XHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdFx0aWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG5cdFx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3Ncblx0XHRcdFx0ZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIiwuKjpcIik7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFxuXHRcdGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fFxuXHRcdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0XHRkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkge1xuXHRcblx0XHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdFx0Ly8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSlcblx0XHRcdFx0c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZGl2LCBcImRpdlwiICk7XG5cdFxuXHRcdFx0XHQvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uXG5cdFx0XHRcdC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcblx0XHRcdFx0bWF0Y2hlcy5jYWxsKCBkaXYsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdFx0cmJ1Z2d5TWF0Y2hlcy5wdXNoKCBcIiE9XCIsIHBzZXVkb3MgKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XG5cdFx0cmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbihcInxcIikgKTtcblx0XHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXHRcblx0XHQvKiBDb250YWluc1xuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XHRoYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7XG5cdFxuXHRcdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHRcdC8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZVxuXHRcdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdFx0Y29udGFpbnMgPSBoYXNDb21wYXJlIHx8IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb250YWlucyApID9cblx0XHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRcdGJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlO1xuXHRcdFx0XHRyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0XHRhZG93bi5jb250YWlucyggYnVwICkgOlxuXHRcdFx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG5cdFx0XHRcdCkpO1xuXHRcdFx0fSA6XG5cdFx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHRcdHdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkge1xuXHRcdFx0XHRcdFx0aWYgKCBiID09PSBhICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XG5cdFx0LyogU29ydGluZ1xuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0XG5cdFx0Ly8gRG9jdW1lbnQgb3JkZXIgc29ydGluZ1xuXHRcdHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcblx0XHRcdC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG5cdFx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cblx0XHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRcdGlmICggY29tcGFyZSApIHtcblx0XHRcdFx0cmV0dXJuIGNvbXBhcmU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuXHRcdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDpcblx0XG5cdFx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0XHQxO1xuXHRcblx0XHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdFx0aWYgKCBjb21wYXJlICYgMSB8fFxuXHRcdFx0XHQoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cdFxuXHRcdFx0XHQvLyBDaG9vc2UgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyByZWxhdGVkIHRvIG91ciBwcmVmZXJyZWQgZG9jdW1lbnRcblx0XHRcdFx0aWYgKCBhID09PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIGIgPT09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIE1haW50YWluIG9yaWdpbmFsIG9yZGVyXG5cdFx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0XHQwO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTtcblx0XHR9IDpcblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdC8vIEV4aXQgZWFybHkgaWYgdGhlIG5vZGVzIGFyZSBpZGVudGljYWxcblx0XHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIGN1cixcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGF1cCA9IGEucGFyZW50Tm9kZSxcblx0XHRcdFx0YnVwID0gYi5wYXJlbnROb2RlLFxuXHRcdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0XHRicCA9IFsgYiBdO1xuXHRcblx0XHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0XHRpZiAoICFhdXAgfHwgIWJ1cCApIHtcblx0XHRcdFx0cmV0dXJuIGEgPT09IGRvY3VtZW50ID8gLTEgOlxuXHRcdFx0XHRcdGIgPT09IGRvY3VtZW50ID8gMSA6XG5cdFx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRcdGJ1cCA/IDEgOlxuXHRcdFx0XHRcdHNvcnRJbnB1dCA/XG5cdFx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHRcdDA7XG5cdFxuXHRcdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHRcdH0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkge1xuXHRcdFx0XHRyZXR1cm4gc2libGluZ0NoZWNrKCBhLCBiICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHdlIG5lZWQgZnVsbCBsaXN0cyBvZiB0aGVpciBhbmNlc3RvcnMgZm9yIGNvbXBhcmlzb25cblx0XHRcdGN1ciA9IGE7XG5cdFx0XHR3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRcdGFwLnVuc2hpZnQoIGN1ciApO1xuXHRcdFx0fVxuXHRcdFx0Y3VyID0gYjtcblx0XHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHRcdHdoaWxlICggYXBbaV0gPT09IGJwW2ldICkge1xuXHRcdFx0XHRpKys7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGkgP1xuXHRcdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdFx0c2libGluZ0NoZWNrKCBhcFtpXSwgYnBbaV0gKSA6XG5cdFxuXHRcdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdFx0YXBbaV0gPT09IHByZWZlcnJlZERvYyA/IC0xIDpcblx0XHRcdFx0YnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOlxuXHRcdFx0XHQwO1xuXHRcdH07XG5cdFxuXHRcdHJldHVybiBkb2N1bWVudDtcblx0fTtcblx0XG5cdFNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkge1xuXHRcdHJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7XG5cdH07XG5cdFxuXHRTaXp6bGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIGVsZW0sIGV4cHIgKSB7XG5cdFx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdFx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0XHR9XG5cdFxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IGF0dHJpYnV0ZSBzZWxlY3RvcnMgYXJlIHF1b3RlZFxuXHRcdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblx0XG5cdFx0aWYgKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdFx0IWNvbXBpbGVyQ2FjaGVbIGV4cHIgKyBcIiBcIiBdICYmXG5cdFx0XHQoICFyYnVnZ3lNYXRjaGVzIHx8ICFyYnVnZ3lNYXRjaGVzLnRlc3QoIGV4cHIgKSApICYmXG5cdFx0XHQoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7XG5cdFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dmFyIHJldCA9IG1hdGNoZXMuY2FsbCggZWxlbSwgZXhwciApO1xuXHRcblx0XHRcdFx0Ly8gSUUgOSdzIG1hdGNoZXNTZWxlY3RvciByZXR1cm5zIGZhbHNlIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdFx0XHRpZiAoIHJldCB8fCBzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoIHx8XG5cdFx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdFx0Ly8gZnJhZ21lbnQgaW4gSUUgOVxuXHRcdFx0XHRcdFx0ZWxlbS5kb2N1bWVudCAmJiBlbGVtLmRvY3VtZW50Lm5vZGVUeXBlICE9PSAxMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIFNpenpsZSggZXhwciwgZG9jdW1lbnQsIG51bGwsIFsgZWxlbSBdICkubGVuZ3RoID4gMDtcblx0fTtcblx0XG5cdFNpenpsZS5jb250YWlucyA9IGZ1bmN0aW9uKCBjb250ZXh0LCBlbGVtICkge1xuXHRcdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRcdGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdFx0fVxuXHRcdHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xuXHR9O1xuXHRcblx0U2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0XHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdH1cblx0XG5cdFx0dmFyIGZuID0gRXhwci5hdHRySGFuZGxlWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSxcblx0XHRcdC8vIERvbid0IGdldCBmb29sZWQgYnkgT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzIChqUXVlcnkgIzEzODA3KVxuXHRcdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0XHRmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuXHRcdFx0XHR1bmRlZmluZWQ7XG5cdFxuXHRcdHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHR2YWwgOlxuXHRcdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuXHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKG5hbWUpKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRcdG51bGw7XG5cdH07XG5cdFxuXHRTaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuXHRcdHRocm93IG5ldyBFcnJvciggXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIiArIG1zZyApO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcblx0ICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcblx0ICovXG5cdFNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRkdXBsaWNhdGVzID0gW10sXG5cdFx0XHRqID0gMCxcblx0XHRcdGkgPSAwO1xuXHRcblx0XHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdFx0aGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcblx0XHRzb3J0SW5wdXQgPSAhc3VwcG9ydC5zb3J0U3RhYmxlICYmIHJlc3VsdHMuc2xpY2UoIDAgKTtcblx0XHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXHRcblx0XHRpZiAoIGhhc0R1cGxpY2F0ZSApIHtcblx0XHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0XHRpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcblx0XHRcdFx0XHRqID0gZHVwbGljYXRlcy5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0c1xuXHRcdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L3NpenpsZS9wdWxsLzIyNVxuXHRcdHNvcnRJbnB1dCA9IG51bGw7XG5cdFxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG5cdCAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuXHQgKi9cblx0Z2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5vZGUsXG5cdFx0XHRyZXQgPSBcIlwiLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cdFxuXHRcdGlmICggIW5vZGVUeXBlICkge1xuXHRcdFx0Ly8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcblx0XHRcdHdoaWxlICggKG5vZGUgPSBlbGVtW2krK10pICkge1xuXHRcdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0XHRyZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHRcdC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcblx0XHRcdC8vIGlubmVyVGV4dCB1c2FnZSByZW1vdmVkIGZvciBjb25zaXN0ZW5jeSBvZiBuZXcgbGluZXMgKGpRdWVyeSAjMTExNTMpXG5cdFx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0XHRyZXQgKz0gZ2V0VGV4dCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdFx0fVxuXHRcdC8vIERvIG5vdCBpbmNsdWRlIGNvbW1lbnQgb3IgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBub2Rlc1xuXHRcblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0RXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cdFxuXHRcdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRcdGNhY2hlTGVuZ3RoOiA1MCxcblx0XG5cdFx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cdFxuXHRcdG1hdGNoOiBtYXRjaEV4cHIsXG5cdFxuXHRcdGF0dHJIYW5kbGU6IHt9LFxuXHRcblx0XHRmaW5kOiB7fSxcblx0XG5cdFx0cmVsYXRpdmU6IHtcblx0XHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XHRcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG5cdFx0XHRcIitcIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHRcdH0sXG5cdFxuXHRcdHByZUZpbHRlcjoge1xuXHRcdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdFx0bWF0Y2hbMV0gPSBtYXRjaFsxXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcblx0XHRcdFx0Ly8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWRcblx0XHRcdFx0bWF0Y2hbM10gPSAoIG1hdGNoWzNdIHx8IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCIgKS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcblx0XHRcdFx0aWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuXHRcdFx0XHRcdG1hdGNoWzNdID0gXCIgXCIgKyBtYXRjaFszXSArIFwiIFwiO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDQgKTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHRcdDEgdHlwZSAob25seXxudGh8Li4uKVxuXHRcdFx0XHRcdDIgd2hhdCAoY2hpbGR8b2YtdHlwZSlcblx0XHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHRcdDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuXHRcdFx0XHRcdDUgc2lnbiBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdFx0NyBzaWduIG9mIHktY29tcG9uZW50XG5cdFx0XHRcdFx0OCB5IG9mIHktY29tcG9uZW50XG5cdFx0XHRcdCovXG5cdFx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblx0XG5cdFx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0XHQvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudFxuXHRcdFx0XHRcdGlmICggIW1hdGNoWzNdICkge1xuXHRcdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdFx0Ly8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuXHRcdFx0XHRcdG1hdGNoWzRdID0gKyggbWF0Y2hbNF0gPyBtYXRjaFs1XSArIChtYXRjaFs2XSB8fCAxKSA6IDIgKiAoIG1hdGNoWzNdID09PSBcImV2ZW5cIiB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApICk7XG5cdFx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXHRcblx0XHRcdFx0Ly8gb3RoZXIgdHlwZXMgcHJvaGliaXQgYXJndW1lbnRzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRcdHZhciBleGNlc3MsXG5cdFx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cdFxuXHRcdFx0XHRpZiAoIG1hdGNoRXhwcltcIkNISUxEXCJdLnRlc3QoIG1hdGNoWzBdICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRcdGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0bWF0Y2hbMl0gPSBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiO1xuXHRcblx0XHRcdFx0Ly8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcblx0XHRcdFx0fSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmXG5cdFx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0XHQoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmXG5cdFx0XHRcdFx0Ly8gYWR2YW5jZSB0byB0aGUgbmV4dCBjbG9zaW5nIHBhcmVudGhlc2lzXG5cdFx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIGV4Y2VzcyBpcyBhIG5lZ2F0aXZlIGluZGV4XG5cdFx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdFx0bWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDMgKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRmaWx0ZXI6IHtcblx0XG5cdFx0XHRcIlRBR1wiOiBmdW5jdGlvbiggbm9kZU5hbWVTZWxlY3RvciApIHtcblx0XHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSBcIipcIiA/XG5cdFx0XHRcdFx0ZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9IDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG5cdFx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJDTEFTU1wiOiBmdW5jdGlvbiggY2xhc3NOYW1lICkge1xuXHRcdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cdFxuXHRcdFx0XHRyZXR1cm4gcGF0dGVybiB8fFxuXHRcdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0XHRjbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhdHRlcm4udGVzdCggdHlwZW9mIGVsZW0uY2xhc3NOYW1lID09PSBcInN0cmluZ1wiICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBlbGVtLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIgKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHR2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XG5cdFx0XHRcdFx0aWYgKCByZXN1bHQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCIhPVwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoICFvcGVyYXRvciApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmVzdWx0ICs9IFwiXCI7XG5cdFxuXHRcdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCI9XCIgPyByZXN1bHQgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiE9XCIgPyByZXN1bHQgIT09IGNoZWNrIDpcblx0XHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIqPVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIkPVwiID8gY2hlY2sgJiYgcmVzdWx0LnNsaWNlKCAtY2hlY2subGVuZ3RoICkgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifD1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgXCItXCIgOlxuXHRcdFx0XHRcdFx0ZmFsc2U7XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcblx0XHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdFx0dmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gXCJudGhcIixcblx0XHRcdFx0XHRmb3J3YXJkID0gdHlwZS5zbGljZSggLTQgKSAhPT0gXCJsYXN0XCIsXG5cdFx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cdFxuXHRcdFx0XHRyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/XG5cdFxuXHRcdFx0XHRcdC8vIFNob3J0Y3V0IGZvciA6bnRoLSoobilcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0XHR9IDpcblx0XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRcdHZhciBjYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRcdGRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/IFwibmV4dFNpYmxpbmdcIiA6IFwicHJldmlvdXNTaWJsaW5nXCIsXG5cdFx0XHRcdFx0XHRcdHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHRcdHVzZUNhY2hlID0gIXhtbCAmJiAhb2ZUeXBlLFxuXHRcdFx0XHRcdFx0XHRkaWZmID0gZmFsc2U7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRcdGlmICggc2ltcGxlICkge1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggZGlyICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gbm9kZVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVUeXBlID09PSAxICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKVxuXHRcdFx0XHRcdFx0XHRcdFx0c3RhcnQgPSBkaXIgPSB0eXBlID09PSBcIm9ubHlcIiAmJiAhc3RhcnQgJiYgXCJuZXh0U2libGluZ1wiO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0c3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRcdGlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gcGFyZW50O1xuXHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXHRcblx0XHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXggJiYgY2FjaGVbIDIgXTtcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gbm9kZUluZGV4ICYmIHBhcmVudC5jaGlsZE5vZGVzWyBub2RlSW5kZXggXTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pO1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8geG1sIDpudGgtY2hpbGQoLi4uKVxuXHRcdFx0XHRcdFx0XHRcdC8vIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGRpZmYgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVUeXBlID09PSAxICkgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQrK2RpZmYgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pO1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRcdGRpZmYgLT0gbGFzdDtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIHBzZXVkbywgYXJndW1lbnQgKSB7XG5cdFx0XHRcdC8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZVxuXHRcdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHRcdC8vIFByaW9yaXRpemUgYnkgY2FzZSBzZW5zaXRpdml0eSBpbiBjYXNlIGN1c3RvbSBwc2V1ZG9zIGFyZSBhZGRlZCB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzXG5cdFx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3Ncblx0XHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdFx0Zm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIgKyBwc2V1ZG8gKTtcblx0XG5cdFx0XHRcdC8vIFRoZSB1c2VyIG1heSB1c2UgY3JlYXRlUHNldWRvIHRvIGluZGljYXRlIHRoYXRcblx0XHRcdFx0Ly8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb25cblx0XHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0XHRpZiAoIGZuWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZuKCBhcmd1bWVudCApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXNcblx0XHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCBcIlwiLCBhcmd1bWVudCBdO1xuXHRcdFx0XHRcdHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgaWR4LFxuXHRcdFx0XHRcdFx0XHRcdG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRcdGlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gZm47XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0cHNldWRvczoge1xuXHRcdFx0Ly8gUG90ZW50aWFsbHkgY29tcGxleCBwc2V1ZG9zXG5cdFx0XHRcIm5vdFwiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0XHQvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuXHRcdFx0XHQvLyB0byBhdm9pZCB0cmVhdGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZ1xuXHRcdFx0XHQvLyBzcGFjZXMgYXMgY29tYmluYXRvcnNcblx0XHRcdFx0dmFyIGlucHV0ID0gW10sXG5cdFx0XHRcdFx0cmVzdWx0cyA9IFtdLFxuXHRcdFx0XHRcdG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblx0XG5cdFx0XHRcdHJldHVybiBtYXRjaGVyWyBleHBhbmRvIF0gP1xuXHRcdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHRcdHVubWF0Y2hlZCA9IG1hdGNoZXIoIHNlZWQsIG51bGwsIHhtbCwgW10gKSxcblx0XHRcdFx0XHRcdFx0aSA9IHNlZWQubGVuZ3RoO1xuXHRcblx0XHRcdFx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIHVubWF0Y2hlZCBieSBgbWF0Y2hlcmBcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0XHRzZWVkW2ldID0gIShtYXRjaGVzW2ldID0gZWxlbSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRcdGlucHV0WzBdID0gZWxlbTtcblx0XHRcdFx0XHRcdG1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdC8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdFx0XHRpbnB1dFswXSA9IG51bGw7XG5cdFx0XHRcdFx0XHRyZXR1cm4gIXJlc3VsdHMucG9wKCk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdH0pLFxuXHRcblx0XHRcdFwiaGFzXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7XG5cdFx0XHRcdH07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHRcImNvbnRhaW5zXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7XG5cdFx0XHRcdH07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHRcdC8vIGlzIGJhc2VkIHNvbGVseSBvbiB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlXG5cdFx0XHQvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLFxuXHRcdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHRcdC8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LlxuXHRcdFx0Ly8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS5cIlxuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFx0XCJsYW5nXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7XG5cdFx0XHRcdC8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcblx0XHRcdFx0aWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8IFwiXCIpICkge1xuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIiArIGxhbmcgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHR2YXIgZWxlbUxhbmc7XG5cdFx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRcdFx0XHRcdGVsZW0ubGFuZyA6XG5cdFx0XHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdGVsZW1MYW5nID0gZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fTtcblx0XHRcdH0pLFxuXHRcblx0XHRcdC8vIE1pc2NlbGxhbmVvdXNcblx0XHRcdFwidGFyZ2V0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdFx0cmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcInJvb3RcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtID09PSBkb2NFbGVtO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcImZvY3VzXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBCb29sZWFuIHByb3BlcnRpZXNcblx0XHRcdFwiZW5hYmxlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcImRpc2FibGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHQvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcblx0XHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRyZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBDb250ZW50c1xuXHRcdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cblx0XHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0XHQvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG5cdFx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbXCJlbXB0eVwiXSggZWxlbSApO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0XHR9LFxuXHRcblx0XHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcblx0XHRcdH0sXG5cdFxuXHRcdFx0XCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgYXR0cjtcblx0XHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdFx0ZWxlbS50eXBlID09PSBcInRleHRcIiAmJlxuXHRcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdFx0Ly8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sIFwic2VhcmNoXCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCJcblx0XHRcdFx0XHQoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gWyAwIF07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHRcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHRcdH0pLFxuXHRcblx0XHRcdFwiZXFcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0XHR9KSxcblx0XG5cdFx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRcdHZhciBpID0gMDtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRcdHZhciBpID0gMTtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0XCJsdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdFx0fSksXG5cdFxuXHRcdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHRcdH0pXG5cdFx0fVxuXHR9O1xuXHRcblx0RXhwci5wc2V1ZG9zW1wibnRoXCJdID0gRXhwci5wc2V1ZG9zW1wiZXFcIl07XG5cdFxuXHQvLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuXHRmb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcblx0XHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7XG5cdH1cblx0Zm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcblx0XHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApO1xuXHR9XG5cdFxuXHQvLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcblx0ZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5cdHNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuXHRFeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXHRcblx0dG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcblx0XHR2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSxcblx0XHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0XHRjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cdFxuXHRcdGlmICggY2FjaGVkICkge1xuXHRcdFx0cmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcblx0XHR9XG5cdFxuXHRcdHNvRmFyID0gc2VsZWN0b3I7XG5cdFx0Z3JvdXBzID0gW107XG5cdFx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXHRcblx0XHR3aGlsZSAoIHNvRmFyICkge1xuXHRcblx0XHRcdC8vIENvbW1hIGFuZCBmaXJzdCBydW5cblx0XHRcdGlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHRcdC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG5cdFx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7XG5cdFx0XHRcdH1cblx0XHRcdFx0Z3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRtYXRjaGVkID0gZmFsc2U7XG5cdFxuXHRcdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRcdGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEZpbHRlcnNcblx0XHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRcdGlmICggKG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSkgJiYgKCFwcmVGaWx0ZXJzWyB0eXBlIF0gfHxcblx0XHRcdFx0XHQobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcblx0XHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0XHRtYXRjaGVzOiBtYXRjaFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoICFtYXRjaGVkICkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHRcdC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuXHRcdC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuXHRcdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdFx0c29GYXIubGVuZ3RoIDpcblx0XHRcdHNvRmFyID9cblx0XHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdFx0Ly8gQ2FjaGUgdGhlIHRva2Vuc1xuXHRcdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0c2VsZWN0b3IgKz0gdG9rZW5zW2ldLnZhbHVlO1xuXHRcdH1cblx0XHRyZXR1cm4gc2VsZWN0b3I7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdFx0dmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuXHRcdFx0Y2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYgZGlyID09PSBcInBhcmVudE5vZGVcIixcblx0XHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXHRcblx0XHRyZXR1cm4gY29tYmluYXRvci5maXJzdCA/XG5cdFx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IDpcblx0XG5cdFx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdHZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cdFxuXHRcdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmdcblx0XHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHwgKG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSA9IHt9KTtcblx0XG5cdFx0XHRcdFx0XHRcdGlmICggKG9sZENhY2hlID0gdW5pcXVlQ2FjaGVbIGRpciBdKSAmJlxuXHRcdFx0XHRcdFx0XHRcdG9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlO1xuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0XHRpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSB7XG5cdFx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0dmFyIGkgPSBtYXRjaGVycy5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9IDpcblx0XHRcdG1hdGNoZXJzWzBdO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0U2l6emxlKCBzZWxlY3RvciwgY29udGV4dHNbaV0sIHJlc3VsdHMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuID0gdW5tYXRjaGVkLmxlbmd0aCxcblx0XHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXHRcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRuZXdVbm1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdFx0bWFwLnB1c2goIGkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBuZXdVbm1hdGNoZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcblx0XHRpZiAoIHBvc3RGaWx0ZXIgJiYgIXBvc3RGaWx0ZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdFx0fVxuXHRcdGlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkge1xuXHRcdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHRcdH1cblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCByZXN1bHRzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdFx0cHJlTWFwID0gW10sXG5cdFx0XHRcdHBvc3RNYXAgPSBbXSxcblx0XHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblx0XG5cdFx0XHRcdC8vIEdldCBpbml0aWFsIGVsZW1lbnRzIGZyb20gc2VlZCBvciBjb250ZXh0XG5cdFx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblx0XG5cdFx0XHRcdC8vIFByZWZpbHRlciB0byBnZXQgbWF0Y2hlciBpbnB1dCwgcHJlc2VydmluZyBhIG1hcCBmb3Igc2VlZC1yZXN1bHRzIHN5bmNocm9uaXphdGlvblxuXHRcdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0XHRjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdFx0ZWxlbXMsXG5cdFxuXHRcdFx0XHRtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBhIHBvc3RGaW5kZXIsIG9yIGZpbHRlcmVkIHNlZWQsIG9yIG5vbi1zZWVkIHBvc3RGaWx0ZXIgb3IgcHJlZXhpc3RpbmcgcmVzdWx0cyxcblx0XHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cdFxuXHRcdFx0XHRcdFx0Ly8gLi4uaW50ZXJtZWRpYXRlIHByb2Nlc3NpbmcgaXMgbmVjZXNzYXJ5XG5cdFx0XHRcdFx0XHRbXSA6XG5cdFxuXHRcdFx0XHRcdFx0Ly8gLi4ub3RoZXJ3aXNlIHVzZSByZXN1bHRzIGRpcmVjdGx5XG5cdFx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0XHRtYXRjaGVySW47XG5cdFxuXHRcdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRcdGlmICggbWF0Y2hlciApIHtcblx0XHRcdFx0bWF0Y2hlciggbWF0Y2hlckluLCBtYXRjaGVyT3V0LCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBcHBseSBwb3N0RmlsdGVyXG5cdFx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHRcdHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuXHRcdFx0XHRwb3N0RmlsdGVyKCB0ZW1wLCBbXSwgY29udGV4dCwgeG1sICk7XG5cdFxuXHRcdFx0XHQvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG5cdFx0XHRcdGkgPSB0ZW1wLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0aWYgKCAoZWxlbSA9IHRlbXBbaV0pICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlck91dFsgcG9zdE1hcFtpXSBdID0gIShtYXRjaGVySW5bIHBvc3RNYXBbaV0gXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0aWYgKCBwb3N0RmluZGVyIHx8IHByZUZpbHRlciApIHtcblx0XHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcblx0XHRcdFx0XHRcdHRlbXAgPSBbXTtcblx0XHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJlxuXHRcdFx0XHRcdFx0XHQodGVtcCA9IHBvc3RGaW5kZXIgPyBpbmRleE9mKCBzZWVkLCBlbGVtICkgOiBwcmVNYXBbaV0pID4gLTEgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaGVyT3V0ID0gY29uZGVuc2UoXG5cdFx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0XHRtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuXHRcdFx0XHRcdFx0bWF0Y2hlck91dFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgcmVzdWx0cywgbWF0Y2hlck91dCwgeG1sICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG5cdFx0dmFyIGNoZWNrQ29udGV4dCwgbWF0Y2hlciwgaixcblx0XHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0XHRsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMF0udHlwZSBdLFxuXHRcdFx0aW1wbGljaXRSZWxhdGl2ZSA9IGxlYWRpbmdSZWxhdGl2ZSB8fCBFeHByLnJlbGF0aXZlW1wiIFwiXSxcblx0XHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblx0XG5cdFx0XHQvLyBUaGUgZm91bmRhdGlvbmFsIG1hdGNoZXIgZW5zdXJlcyB0aGF0IGVsZW1lbnRzIGFyZSByZWFjaGFibGUgZnJvbSB0b3AtbGV2ZWwgY29udGV4dChzKVxuXHRcdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7XG5cdFx0XHR9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG5cdFx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7XG5cdFx0XHR9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG5cdFx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0dmFyIHJldCA9ICggIWxlYWRpbmdSZWxhdGl2ZSAmJiAoIHhtbCB8fCBjb250ZXh0ICE9PSBvdXRlcm1vc3RDb250ZXh0ICkgKSB8fCAoXG5cdFx0XHRcdFx0KGNoZWNrQ29udGV4dCA9IGNvbnRleHQpLm5vZGVUeXBlID9cblx0XHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdFx0bWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuXHRcdFx0XHQvLyBBdm9pZCBoYW5naW5nIG9udG8gZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH0gXTtcblx0XG5cdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRpZiAoIChtYXRjaGVyID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2ldLnR5cGUgXSkgKSB7XG5cdFx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWF0Y2hlciA9IEV4cHIuZmlsdGVyWyB0b2tlbnNbaV0udHlwZSBdLmFwcGx5KCBudWxsLCB0b2tlbnNbaV0ubWF0Y2hlcyApO1xuXHRcblx0XHRcdFx0Ly8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcblx0XHRcdFx0aWYgKCBtYXRjaGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdFx0aiA9ICsraTtcblx0XHRcdFx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBzZXRNYXRjaGVyKFxuXHRcdFx0XHRcdFx0aSA+IDEgJiYgZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksXG5cdFx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYFxuXHRcdFx0XHRcdFx0XHR0b2tlbnMuc2xpY2UoIDAsIGkgLSAxICkuY29uY2F0KHsgdmFsdWU6IHRva2Vuc1sgaSAtIDIgXS50eXBlID09PSBcIiBcIiA/IFwiKlwiIDogXCJcIiB9KVxuXHRcdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0XHRtYXRjaGVyLFxuXHRcdFx0XHRcdFx0aSA8IGogJiYgbWF0Y2hlckZyb21Ub2tlbnMoIHRva2Vucy5zbGljZSggaSwgaiApICksXG5cdFx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0XHRqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApIHtcblx0XHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdFx0YnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0XHRzdXBlck1hdGNoZXIgPSBmdW5jdGlvbiggc2VlZCwgY29udGV4dCwgeG1sLCByZXN1bHRzLCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRcdG1hdGNoZWRDb3VudCA9IDAsXG5cdFx0XHRcdFx0aSA9IFwiMFwiLFxuXHRcdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHRcdGNvbnRleHRCYWNrdXAgPSBvdXRlcm1vc3RDb250ZXh0LFxuXHRcdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFtcIlRBR1wiXSggXCIqXCIsIG91dGVybW9zdCApLFxuXHRcdFx0XHRcdC8vIFVzZSBpbnRlZ2VyIGRpcnJ1bnMgaWZmIHRoaXMgaXMgdGhlIG91dGVybW9zdCBtYXRjaGVyXG5cdFx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoO1xuXHRcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT09IGRvY3VtZW50IHx8IGNvbnRleHQgfHwgb3V0ZXJtb3N0O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmlcblx0XHRcdFx0Ly8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG5cdFx0XHRcdGZvciAoIDsgaSAhPT0gbGVuICYmIChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdFx0XHRpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkge1xuXHRcdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0XHRpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0XHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdHhtbCA9ICFkb2N1bWVudElzSFRNTDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBlbGVtZW50TWF0Y2hlcnNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCB8fCBkb2N1bWVudCwgeG1sKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRcdGlmICggYnlTZXQgKSB7XG5cdFx0XHRcdFx0XHQvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZWRDb3VudC0tO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8vIExlbmd0aGVuIHRoZSBhcnJheSBmb3IgZXZlcnkgZWxlbWVudCwgbWF0Y2hlZCBvciBub3Rcblx0XHRcdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIGBpYCBpcyBub3cgdGhlIGNvdW50IG9mIGVsZW1lbnRzIHZpc2l0ZWQgYWJvdmUsIGFuZCBhZGRpbmcgaXQgdG8gYG1hdGNoZWRDb3VudGBcblx0XHRcdFx0Ly8gbWFrZXMgdGhlIGxhdHRlciBub25uZWdhdGl2ZS5cblx0XHRcdFx0bWF0Y2hlZENvdW50ICs9IGk7XG5cdFxuXHRcdFx0XHQvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcblx0XHRcdFx0Ly8gTk9URTogVGhpcyBjYW4gYmUgc2tpcHBlZCBpZiB0aGVyZSBhcmUgbm8gdW5tYXRjaGVkIGVsZW1lbnRzIChpLmUuLCBgbWF0Y2hlZENvdW50YFxuXHRcdFx0XHQvLyBlcXVhbHMgYGlgKSwgdW5sZXNzIHdlIGRpZG4ndCB2aXNpdCBfYW55XyBlbGVtZW50cyBpbiB0aGUgYWJvdmUgbG9vcCBiZWNhdXNlIHdlIGhhdmVcblx0XHRcdFx0Ly8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC5cblx0XHRcdFx0Ly8gSW5jcmVtZW50aW5nIGFuIGluaXRpYWxseS1zdHJpbmcgXCIwXCIgYGlgIGFsbG93cyBgaWAgdG8gcmVtYWluIGEgc3RyaW5nIG9ubHkgaW4gdGhhdFxuXHRcdFx0XHQvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIFwiMDBcIiBgbWF0Y2hlZENvdW50YCB0aGF0IGRpZmZlcnMgZnJvbSBgaWAgYnV0IGlzIGFsc29cblx0XHRcdFx0Ly8gbnVtZXJpY2FsbHkgemVyby5cblx0XHRcdFx0aWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlciggdW5tYXRjaGVkLCBzZXRNYXRjaGVkLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHRcdC8vIFJlaW50ZWdyYXRlIGVsZW1lbnQgbWF0Y2hlcyB0byBlbGltaW5hdGUgdGhlIG5lZWQgZm9yIHNvcnRpbmdcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhKHVubWF0Y2hlZFtpXSB8fCBzZXRNYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdC8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzXG5cdFx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZXRNYXRjaGVkICk7XG5cdFxuXHRcdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICYmICFzZWVkICYmIHNldE1hdGNoZWQubGVuZ3RoID4gMCAmJlxuXHRcdFx0XHRcdFx0KCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7XG5cdFxuXHRcdFx0XHRcdFx0U2l6emxlLnVuaXF1ZVNvcnQoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0XHRkaXJydW5zID0gZGlycnVuc1VuaXF1ZTtcblx0XHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIHVubWF0Y2hlZDtcblx0XHRcdH07XG5cdFxuXHRcdHJldHVybiBieVNldCA/XG5cdFx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRcdHN1cGVyTWF0Y2hlcjtcblx0fVxuXHRcblx0Y29tcGlsZSA9IFNpenpsZS5jb21waWxlID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBtYXRjaCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0XHR2YXIgaSxcblx0XHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0XHRlbGVtZW50TWF0Y2hlcnMgPSBbXSxcblx0XHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblx0XG5cdFx0aWYgKCAhY2FjaGVkICkge1xuXHRcdFx0Ly8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG5cdFx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdFx0bWF0Y2ggPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcblx0XHRcdH1cblx0XHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0Y2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7XG5cdFx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdFx0c2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQ2FjaGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uXG5cdFx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTtcblx0XG5cdFx0XHQvLyBTYXZlIHNlbGVjdG9yIGFuZCB0b2tlbml6YXRpb25cblx0XHRcdGNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGVkO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWRcblx0ICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuXHQgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gc2VsZWN0b3IgQSBzZWxlY3RvciBvciBhIHByZS1jb21waWxlZFxuXHQgKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcblx0ICogQHBhcmFtIHtBcnJheX0gW3Jlc3VsdHNdXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0XG5cdCAqL1xuXHRzZWxlY3QgPSBTaXp6bGUuc2VsZWN0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuXHRcdHZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLFxuXHRcdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRcdG1hdGNoID0gIXNlZWQgJiYgdG9rZW5pemUoIChzZWxlY3RvciA9IGNvbXBpbGVkLnNlbGVjdG9yIHx8IHNlbGVjdG9yKSApO1xuXHRcblx0XHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblx0XG5cdFx0Ly8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0b3IgaW4gdGhlIGxpc3QgYW5kIG5vIHNlZWRcblx0XHQvLyAodGhlIGxhdHRlciBvZiB3aGljaCBndWFyYW50ZWVzIHVzIGNvbnRleHQpXG5cdFx0aWYgKCBtYXRjaC5sZW5ndGggPT09IDEgKSB7XG5cdFxuXHRcdFx0Ly8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSURcblx0XHRcdHRva2VucyA9IG1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UoIDAgKTtcblx0XHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0XHRzdXBwb3J0LmdldEJ5SWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdFx0XHRcdEV4cHIucmVsYXRpdmVbIHRva2Vuc1sxXS50eXBlIF0gKSB7XG5cdFxuXHRcdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG5cdFx0XHRcdGlmICggIWNvbnRleHQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFxuXHRcdFx0XHQvLyBQcmVjb21waWxlZCBtYXRjaGVycyB3aWxsIHN0aWxsIHZlcmlmeSBhbmNlc3RyeSwgc28gc3RlcCB1cCBhIGxldmVsXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRcdGkgPSBtYXRjaEV4cHJbXCJuZWVkc0NvbnRleHRcIl0udGVzdCggc2VsZWN0b3IgKSA/IDAgOiB0b2tlbnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdHRva2VuID0gdG9rZW5zW2ldO1xuXHRcblx0XHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuXHRcdFx0XHRcdC8vIFNlYXJjaCwgZXhwYW5kaW5nIGNvbnRleHQgZm9yIGxlYWRpbmcgc2libGluZyBjb21iaW5hdG9yc1xuXHRcdFx0XHRcdGlmICggKHNlZWQgPSBmaW5kKFxuXHRcdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuXHRcdFx0XHRcdFx0cnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHRcdFx0XHRcdCkpICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIElmIHNlZWQgaXMgZW1wdHkgb3Igbm8gdG9rZW5zIHJlbWFpbiwgd2UgY2FuIHJldHVybiBlYXJseVxuXHRcdFx0XHRcdFx0dG9rZW5zLnNwbGljZSggaSwgMSApO1xuXHRcdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdFx0Ly8gUHJvdmlkZSBgbWF0Y2hgIHRvIGF2b2lkIHJldG9rZW5pemF0aW9uIGlmIHdlIG1vZGlmaWVkIHRoZSBzZWxlY3RvciBhYm92ZVxuXHRcdCggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKShcblx0XHRcdHNlZWQsXG5cdFx0XHRjb250ZXh0LFxuXHRcdFx0IWRvY3VtZW50SXNIVE1MLFxuXHRcdFx0cmVzdWx0cyxcblx0XHRcdCFjb250ZXh0IHx8IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHQpO1xuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9O1xuXHRcblx0Ly8gT25lLXRpbWUgYXNzaWdubWVudHNcblx0XG5cdC8vIFNvcnQgc3RhYmlsaXR5XG5cdHN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblx0XG5cdC8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcblx0Ly8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuXHRzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTtcblx0XG5cdC8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuXHRzZXREb2N1bWVudCgpO1xuXHRcblx0Ly8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcblx0Ly8gRGV0YWNoZWQgbm9kZXMgY29uZm91bmRpbmdseSBmb2xsb3cgKmVhY2ggb3RoZXIqXG5cdHN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYxICkge1xuXHRcdC8vIFNob3VsZCByZXR1cm4gMSwgYnV0IHJldHVybnMgNCAoZm9sbG93aW5nKVxuXHRcdHJldHVybiBkaXYxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpICkgJiAxO1xuXHR9KTtcblx0XG5cdC8vIFN1cHBvcnQ6IElFPDhcblx0Ly8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcblx0Ly8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM2NDI5JTI4VlMuODUlMjkuYXNweFxuXHRpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdFx0cmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiIDtcblx0fSkgKSB7XG5cdFx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0XG5cdC8vIFN1cHBvcnQ6IElFPDlcblx0Ly8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuXHRpZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdFx0ZGl2LmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0XHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcblx0fSkgKSB7XG5cdFx0YWRkSGFuZGxlKCBcInZhbHVlXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0XG5cdC8vIFN1cHBvcnQ6IElFPDlcblx0Ly8gVXNlIGdldEF0dHJpYnV0ZU5vZGUgdG8gZmV0Y2ggYm9vbGVhbnMgd2hlbiBnZXRBdHRyaWJ1dGUgbGllc1xuXHRpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG5cdH0pICkge1xuXHRcdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRcdHZhciB2YWw7XG5cdFx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0XHRudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRyZXR1cm4gU2l6emxlO1xuXHRcblx0fSkoIHdpbmRvdyApO1xuXHRcblx0XG5cdFxuXHRqUXVlcnkuZmluZCA9IFNpenpsZTtcblx0alF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xuXHRqUXVlcnkuZXhwclsgXCI6XCIgXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5cdGpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xuXHRqUXVlcnkudGV4dCA9IFNpenpsZS5nZXRUZXh0O1xuXHRqUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5cdGpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblx0XG5cdFxuXHRcblx0dmFyIGRpciA9IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuXHRcdHZhciBtYXRjaGVkID0gW10sXG5cdFx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cdFxuXHRcdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRpZiAoIHRydW5jYXRlICYmIGpRdWVyeSggZWxlbSApLmlzKCB1bnRpbCApICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbWF0Y2hlZDtcblx0fTtcblx0XG5cdFxuXHR2YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IFtdO1xuXHRcblx0XHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggbiApO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIG1hdGNoZWQ7XG5cdH07XG5cdFxuXHRcblx0dmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7XG5cdFxuXHR2YXIgcnNpbmdsZVRhZyA9ICggL148KFtcXHctXSspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvICk7XG5cdFxuXHRcblx0XG5cdHZhciByaXNTaW1wbGUgPSAvXi5bXjojXFxbXFwuLF0qJC87XG5cdFxuXHQvLyBJbXBsZW1lbnQgdGhlIGlkZW50aWNhbCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXIgYW5kIG5vdFxuXHRmdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0XHQvKiBqc2hpbnQgLVcwMTggKi9cblx0XHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdFx0fSApO1xuXHRcblx0XHR9XG5cdFxuXHRcdGlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0XHR9ICk7XG5cdFxuXHRcdH1cblx0XG5cdFx0aWYgKCB0eXBlb2YgcXVhbGlmaWVyID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRxdWFsaWZpZXIgPSBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzICk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGluZGV4T2YuY2FsbCggcXVhbGlmaWVyLCBlbGVtICkgPiAtMSApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cdFxuXHRqUXVlcnkuZmlsdGVyID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1zLCBub3QgKSB7XG5cdFx0dmFyIGVsZW0gPSBlbGVtc1sgMCBdO1xuXHRcblx0XHRpZiAoIG5vdCApIHtcblx0XHRcdGV4cHIgPSBcIjpub3QoXCIgKyBleHByICsgXCIpXCI7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgP1xuXHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdIDpcblx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXMoIGV4cHIsIGpRdWVyeS5ncmVwKCBlbGVtcywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHRcdFx0fSApICk7XG5cdH07XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0ZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0dmFyIGksXG5cdFx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0XHRyZXQgPSBbXSxcblx0XHRcdFx0c2VsZiA9IHRoaXM7XG5cdFxuXHRcdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICkgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRqUXVlcnkuZmluZCggc2VsZWN0b3IsIHNlbGZbIGkgXSwgcmV0ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gTmVlZGVkIGJlY2F1c2UgJCggc2VsZWN0b3IsIGNvbnRleHQgKSBiZWNvbWVzICQoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApXG5cdFx0XHRyZXQgPSB0aGlzLnB1c2hTdGFjayggbGVuID4gMSA/IGpRdWVyeS51bmlxdWUoIHJldCApIDogcmV0ICk7XG5cdFx0XHRyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3Rvcjtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSxcblx0XHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UgKSApO1xuXHRcdH0sXG5cdFx0bm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIHRydWUgKSApO1xuXHRcdH0sXG5cdFx0aXM6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdFx0dGhpcyxcblx0XG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdFx0Ly8gc28gJChcInA6Zmlyc3RcIikuaXMoXCJwOmxhc3RcIikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvIFwicFwiLlxuXHRcdFx0XHR0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID9cblx0XHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRcdHNlbGVjdG9yIHx8IFtdLFxuXHRcdFx0XHRmYWxzZVxuXHRcdFx0KS5sZW5ndGg7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRcblx0Ly8gSW5pdGlhbGl6ZSBhIGpRdWVyeSBvYmplY3Rcblx0XG5cdFxuXHQvLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudClcblx0dmFyIHJvb3RqUXVlcnksXG5cdFxuXHRcdC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG5cdFx0Ly8gUHJpb3JpdGl6ZSAjaWQgb3ZlciA8dGFnPiB0byBhdm9pZCBYU1MgdmlhIGxvY2F0aW9uLmhhc2ggKCM5NTIxKVxuXHRcdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHRcdHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxcblx0XG5cdFx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByb290ICkge1xuXHRcdFx0dmFyIG1hdGNoLCBlbGVtO1xuXHRcblx0XHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE1ldGhvZCBpbml0KCkgYWNjZXB0cyBhbiBhbHRlcm5hdGUgcm9vdGpRdWVyeVxuXHRcdFx0Ly8gc28gbWlncmF0ZSBjYW4gc3VwcG9ydCBqUXVlcnkuc3ViIChnaC0yMTAxKVxuXHRcdFx0cm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTtcblx0XG5cdFx0XHQvLyBIYW5kbGUgSFRNTCBzdHJpbmdzXG5cdFx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0aWYgKCBzZWxlY3RvclsgMCBdID09PSBcIjxcIiAmJlxuXHRcdFx0XHRcdHNlbGVjdG9yWyBzZWxlY3Rvci5sZW5ndGggLSAxIF0gPT09IFwiPlwiICYmXG5cdFx0XHRcdFx0c2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdFx0bWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG5cdFx0XHRcdGlmICggbWF0Y2ggJiYgKCBtYXRjaFsgMSBdIHx8ICFjb250ZXh0ICkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRcdGlmICggbWF0Y2hbIDEgXSApIHtcblx0XHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFsgMCBdIDogY29udGV4dDtcblx0XG5cdFx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHRcdC8vIEludGVudGlvbmFsbHkgbGV0IHRoZSBlcnJvciBiZSB0aHJvd24gaWYgcGFyc2VIVE1MIGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoXG5cdFx0XHRcdFx0XHRcdG1hdGNoWyAxIF0sXG5cdFx0XHRcdFx0XHRcdGNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsXG5cdFx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHRcdCkgKTtcblx0XG5cdFx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0XHRpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7XG5cdFx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzWyBtYXRjaCBdKCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTtcblx0XG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBCbGFja2JlcnJ5IDQuNlxuXHRcdFx0XHRcdFx0Ly8gZ0VCSUQgcmV0dXJucyBub2RlcyBubyBsb25nZXIgaW4gdGhlIGRvY3VtZW50ICgjNjk2Mylcblx0XHRcdFx0XHRcdGlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBJbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuXHRcdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHRcdHRoaXNbIDAgXSA9IGVsZW07XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0dGhpcy5jb250ZXh0ID0gZG9jdW1lbnQ7XG5cdFx0XHRcdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgJCguLi4pKVxuXHRcdFx0XHR9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHtcblx0XHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3QgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcblx0XHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG5cdFx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdC8vIEhBTkRMRTogJChET01FbGVtZW50KVxuXHRcdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHRcdHRoaXMuY29udGV4dCA9IHRoaXNbIDAgXSA9IHNlbGVjdG9yO1xuXHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcblx0XHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHRcdC8vIFNob3J0Y3V0IGZvciBkb2N1bWVudCByZWFkeVxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7XG5cdFx0XHRcdHJldHVybiByb290LnJlYWR5ICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRcdHJvb3QucmVhZHkoIHNlbGVjdG9yICkgOlxuXHRcblx0XHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0c2VsZWN0b3IoIGpRdWVyeSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggc2VsZWN0b3Iuc2VsZWN0b3IgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yLnNlbGVjdG9yO1xuXHRcdFx0XHR0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHRcdH07XG5cdFxuXHQvLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5cdGluaXQucHJvdG90eXBlID0galF1ZXJ5LmZuO1xuXHRcblx0Ly8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxuXHRyb290alF1ZXJ5ID0galF1ZXJ5KCBkb2N1bWVudCApO1xuXHRcblx0XG5cdHZhciBycGFyZW50c3ByZXYgPSAvXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxcblx0XG5cdFx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0XHRndWFyYW50ZWVkVW5pcXVlID0ge1xuXHRcdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRcdG5leHQ6IHRydWUsXG5cdFx0XHRwcmV2OiB0cnVlXG5cdFx0fTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRcdGwgPSB0YXJnZXRzLmxlbmd0aDtcblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggdGhpcywgdGFyZ2V0c1sgaSBdICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9LFxuXHRcblx0XHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIGN1cixcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHRwb3MgPSBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApIHx8IHR5cGVvZiBzZWxlY3RvcnMgIT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcblx0XHRcdFx0XHQwO1xuXHRcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zm9yICggY3VyID0gdGhpc1sgaSBdOyBjdXIgJiYgY3VyICE9PSBjb250ZXh0OyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzXG5cdFx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHBvcyA/XG5cdFx0XHRcdFx0XHRwb3MuaW5kZXgoIGN1ciApID4gLTEgOlxuXHRcblx0XHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdFx0Y3VyLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggY3VyLCBzZWxlY3RvcnMgKSApICkge1xuXHRcblx0XHRcdFx0XHRcdG1hdGNoZWQucHVzaCggY3VyICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQubGVuZ3RoID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdFx0fSxcblx0XG5cdFx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdFx0aW5kZXg6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcblx0XHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0XHRpZiAoICFlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gSW5kZXggaW4gc2VsZWN0b3Jcblx0XHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHJldHVybiBpbmRleE9mLmNhbGwoIGpRdWVyeSggZWxlbSApLCB0aGlzWyAwIF0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBMb2NhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXNpcmVkIGVsZW1lbnRcblx0XHRcdHJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsXG5cdFxuXHRcdFx0XHQvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWRcblx0XHRcdFx0ZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtXG5cdFx0XHQpO1xuXHRcdH0sXG5cdFxuXHRcdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKFxuXHRcdFx0XHRqUXVlcnkudW5pcXVlU29ydChcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApXG5cdFx0XHRcdClcblx0XHRcdCk7XG5cdFx0fSxcblx0XG5cdFx0YWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID9cblx0XHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKVxuXHRcdFx0KTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGZ1bmN0aW9uIHNpYmxpbmcoIGN1ciwgZGlyICkge1xuXHRcdHdoaWxlICggKCBjdXIgPSBjdXJbIGRpciBdICkgJiYgY3VyLm5vZGVUeXBlICE9PSAxICkge31cblx0XHRyZXR1cm4gY3VyO1xuXHR9XG5cdFxuXHRqUXVlcnkuZWFjaCgge1xuXHRcdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0cmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDtcblx0XHR9LFxuXHRcdHBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0XHR9LFxuXHRcdHBhcmVudHNVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdFx0fSxcblx0XHRuZXh0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0XHR9LFxuXHRcdHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0XHR9LFxuXHRcdG5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdFx0fSxcblx0XHRwcmV2QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0XHR9LFxuXHRcdG5leHRVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHRcdH0sXG5cdFx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuXHRcdH0sXG5cdFx0c2libGluZ3M6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTtcblx0XHR9LFxuXHRcdGNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBzaWJsaW5ncyggZWxlbS5maXJzdENoaWxkICk7XG5cdFx0fSxcblx0XHRjb250ZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5jb250ZW50RG9jdW1lbnQgfHwgalF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7XG5cdFx0fVxuXHR9LCBmdW5jdGlvbiggbmFtZSwgZm4gKSB7XG5cdFx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggdW50aWwsIHNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblx0XG5cdFx0XHRpZiAoIG5hbWUuc2xpY2UoIC01ICkgIT09IFwiVW50aWxcIiApIHtcblx0XHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0bWF0Y2hlZCA9IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCBtYXRjaGVkICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCA+IDEgKSB7XG5cdFxuXHRcdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRlc1xuXHRcdFx0XHRpZiAoICFndWFyYW50ZWVkVW5pcXVlWyBuYW1lIF0gKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gUmV2ZXJzZSBvcmRlciBmb3IgcGFyZW50cyogYW5kIHByZXYtZGVyaXZhdGl2ZXNcblx0XHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRcdG1hdGNoZWQucmV2ZXJzZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkICk7XG5cdFx0fTtcblx0fSApO1xuXHR2YXIgcm5vdHdoaXRlID0gKCAvXFxTKy9nICk7XG5cdFxuXHRcblx0XG5cdC8vIENvbnZlcnQgU3RyaW5nLWZvcm1hdHRlZCBvcHRpb25zIGludG8gT2JqZWN0LWZvcm1hdHRlZCBvbmVzXG5cdGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSB7XG5cdFx0dmFyIG9iamVjdCA9IHt9O1xuXHRcdGpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSwgZnVuY3Rpb24oIF8sIGZsYWcgKSB7XG5cdFx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdFx0fSApO1xuXHRcdHJldHVybiBvYmplY3Q7XG5cdH1cblx0XG5cdC8qXG5cdCAqIENyZWF0ZSBhIGNhbGxiYWNrIGxpc3QgdXNpbmcgdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuXHQgKlxuXHQgKlx0b3B0aW9uczogYW4gb3B0aW9uYWwgbGlzdCBvZiBzcGFjZS1zZXBhcmF0ZWQgb3B0aW9ucyB0aGF0IHdpbGwgY2hhbmdlIGhvd1xuXHQgKlx0XHRcdHRoZSBjYWxsYmFjayBsaXN0IGJlaGF2ZXMgb3IgYSBtb3JlIHRyYWRpdGlvbmFsIG9wdGlvbiBvYmplY3Rcblx0ICpcblx0ICogQnkgZGVmYXVsdCBhIGNhbGxiYWNrIGxpc3Qgd2lsbCBhY3QgbGlrZSBhbiBldmVudCBjYWxsYmFjayBsaXN0IGFuZCBjYW4gYmVcblx0ICogXCJmaXJlZFwiIG11bHRpcGxlIHRpbWVzLlxuXHQgKlxuXHQgKiBQb3NzaWJsZSBvcHRpb25zOlxuXHQgKlxuXHQgKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG5cdCAqXG5cdCAqXHRtZW1vcnk6XHRcdFx0d2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZFxuXHQgKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG5cdCAqXHRcdFx0XHRcdHZhbHVlcyAobGlrZSBhIERlZmVycmVkKVxuXHQgKlxuXHQgKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuXHQgKlxuXHQgKlx0c3RvcE9uRmFsc2U6XHRpbnRlcnJ1cHQgY2FsbGluZ3Mgd2hlbiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2Vcblx0ICpcblx0ICovXG5cdGpRdWVyeS5DYWxsYmFja3MgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0XG5cdFx0Ly8gQ29udmVydCBvcHRpb25zIGZyb20gU3RyaW5nLWZvcm1hdHRlZCB0byBPYmplY3QtZm9ybWF0dGVkIGlmIG5lZWRlZFxuXHRcdC8vICh3ZSBjaGVjayBpbiBjYWNoZSBmaXJzdClcblx0XHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0Y3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIDpcblx0XHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cdFxuXHRcdHZhciAvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0XHRmaXJpbmcsXG5cdFxuXHRcdFx0Ly8gTGFzdCBmaXJlIHZhbHVlIGZvciBub24tZm9yZ2V0dGFibGUgbGlzdHNcblx0XHRcdG1lbW9yeSxcblx0XG5cdFx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZFxuXHRcdFx0ZmlyZWQsXG5cdFxuXHRcdFx0Ly8gRmxhZyB0byBwcmV2ZW50IGZpcmluZ1xuXHRcdFx0bG9ja2VkLFxuXHRcblx0XHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0XHRsaXN0ID0gW10sXG5cdFxuXHRcdFx0Ly8gUXVldWUgb2YgZXhlY3V0aW9uIGRhdGEgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRcdHF1ZXVlID0gW10sXG5cdFxuXHRcdFx0Ly8gSW5kZXggb2YgY3VycmVudGx5IGZpcmluZyBjYWxsYmFjayAobW9kaWZpZWQgYnkgYWRkL3JlbW92ZSBhcyBuZWVkZWQpXG5cdFx0XHRmaXJpbmdJbmRleCA9IC0xLFxuXHRcblx0XHRcdC8vIEZpcmUgY2FsbGJhY2tzXG5cdFx0XHRmaXJlID0gZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHQvLyBFbmZvcmNlIHNpbmdsZS1maXJpbmdcblx0XHRcdFx0bG9ja2VkID0gb3B0aW9ucy5vbmNlO1xuXHRcblx0XHRcdFx0Ly8gRXhlY3V0ZSBjYWxsYmFja3MgZm9yIGFsbCBwZW5kaW5nIGV4ZWN1dGlvbnMsXG5cdFx0XHRcdC8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXNcblx0XHRcdFx0ZmlyZWQgPSBmaXJpbmcgPSB0cnVlO1xuXHRcdFx0XHRmb3IgKCA7IHF1ZXVlLmxlbmd0aDsgZmlyaW5nSW5kZXggPSAtMSApIHtcblx0XHRcdFx0XHRtZW1vcnkgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHRcdHdoaWxlICggKytmaXJpbmdJbmRleCA8IGxpc3QubGVuZ3RoICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uXG5cdFx0XHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIG1lbW9yeVsgMCBdLCBtZW1vcnlbIDEgXSApID09PSBmYWxzZSAmJlxuXHRcdFx0XHRcdFx0XHRvcHRpb25zLnN0b3BPbkZhbHNlICkge1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gSnVtcCB0byBlbmQgYW5kIGZvcmdldCB0aGUgZGF0YSBzbyAuYWRkIGRvZXNuJ3QgcmUtZmlyZVxuXHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIEZvcmdldCB0aGUgZGF0YSBpZiB3ZSdyZSBkb25lIHdpdGggaXRcblx0XHRcdFx0aWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7XG5cdFx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGZpcmluZyA9IGZhbHNlO1xuXHRcblx0XHRcdFx0Ly8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2Rcblx0XHRcdFx0aWYgKCBsb2NrZWQgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHNcblx0XHRcdFx0XHRpZiAoIG1lbW9yeSApIHtcblx0XHRcdFx0XHRcdGxpc3QgPSBbXTtcblx0XG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0aGlzIG9iamVjdCBpcyBzcGVudFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRsaXN0ID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gQWN0dWFsIENhbGxiYWNrcyBvYmplY3Rcblx0XHRcdHNlbGYgPSB7XG5cdFxuXHRcdFx0XHQvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG5cdFx0XHRcdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgbWVtb3J5IGZyb20gYSBwYXN0IHJ1biwgd2Ugc2hvdWxkIGZpcmUgYWZ0ZXIgYWRkaW5nXG5cdFx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleCA9IGxpc3QubGVuZ3RoIC0gMTtcblx0XHRcdFx0XHRcdFx0cXVldWUucHVzaCggbWVtb3J5ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0KCBmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiBqUXVlcnkudHlwZSggYXJnICkgIT09IFwic3RyaW5nXCIgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSW5zcGVjdCByZWN1cnNpdmVseVxuXHRcdFx0XHRcdFx0XHRcdFx0YWRkKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdH0gKSggYXJndW1lbnRzICk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdC8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3Rcblx0XHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJndW1lbnRzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0dmFyIGluZGV4O1xuXHRcdFx0XHRcdFx0d2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRcdGxpc3Quc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXgtLTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHRcdC8vIElmIG5vIGFyZ3VtZW50IGlzIGdpdmVuLCByZXR1cm4gd2hldGhlciBvciBub3QgbGlzdCBoYXMgY2FsbGJhY2tzIGF0dGFjaGVkLlxuXHRcdFx0XHRoYXM6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0XHRyZXR1cm4gZm4gP1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmluQXJyYXkoIGZuLCBsaXN0ICkgPiAtMSA6XG5cdFx0XHRcdFx0XHRsaXN0Lmxlbmd0aCA+IDA7XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRcdGVtcHR5OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0Ly8gRGlzYWJsZSAuZmlyZSBhbmQgLmFkZFxuXHRcdFx0XHQvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdFx0Ly8gQ2xlYXIgYWxsIGNhbGxiYWNrcyBhbmQgdmFsdWVzXG5cdFx0XHRcdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGxvY2tlZCA9IHF1ZXVlID0gW107XG5cdFx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRpc2FibGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gIWxpc3Q7XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHQvLyBEaXNhYmxlIC5maXJlXG5cdFx0XHRcdC8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpXG5cdFx0XHRcdC8vIEFib3J0IGFueSBwZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdFx0bG9jazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0XHRpZiAoICFtZW1vcnkgKSB7XG5cdFx0XHRcdFx0XHRsaXN0ID0gbWVtb3J5ID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxvY2tlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhbG9ja2VkO1xuXHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0Ly8gQ2FsbCBhbGwgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgYW5kIGFyZ3VtZW50c1xuXHRcdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdFx0aWYgKCAhbG9ja2VkICkge1xuXHRcdFx0XHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHRcdFx0XHRhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdO1xuXHRcdFx0XHRcdFx0cXVldWUucHVzaCggYXJncyApO1xuXHRcdFx0XHRcdFx0aWYgKCAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdFx0ZmlyZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHQvLyBUbyBrbm93IGlmIHRoZSBjYWxsYmFja3MgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2Vcblx0XHRcdFx0ZmlyZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcblx0XHRyZXR1cm4gc2VsZjtcblx0fTtcblx0XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFxuXHRcdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHRcdHZhciB0dXBsZXMgPSBbXG5cdFxuXHRcdFx0XHRcdC8vIGFjdGlvbiwgYWRkIGxpc3RlbmVyLCBsaXN0ZW5lciBsaXN0LCBmaW5hbCBzdGF0ZVxuXHRcdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFx0WyBcInJlamVjdFwiLCBcImZhaWxcIiwgalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksIFwicmVqZWN0ZWRcIiBdLFxuXHRcdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICkgXVxuXHRcdFx0XHRdLFxuXHRcdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRcdHN0YXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGFsd2F5czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdFx0dmFyIGZucyA9IGFyZ3VtZW50cztcblx0XHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcblx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDEgXSBdKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0LnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuZmFpbCggbmV3RGVmZXIucmVqZWN0ICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcyA9PT0gcHJvbWlzZSA/IG5ld0RlZmVyLnByb21pc2UoKSA6IHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm4gPyBbIHJldHVybmVkIF0gOiBhcmd1bWVudHNcblx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdFx0Zm5zID0gbnVsbDtcblx0XHRcdFx0XHRcdH0gKS5wcm9taXNlKCk7XG5cdFx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdFx0Ly8gR2V0IGEgcHJvbWlzZSBmb3IgdGhpcyBkZWZlcnJlZFxuXHRcdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0XHRwcm9taXNlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG9iaiAhPSBudWxsID8galF1ZXJ5LmV4dGVuZCggb2JqLCBwcm9taXNlICkgOiBwcm9taXNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0ZGVmZXJyZWQgPSB7fTtcblx0XG5cdFx0XHQvLyBLZWVwIHBpcGUgZm9yIGJhY2stY29tcGF0XG5cdFx0XHRwcm9taXNlLnBpcGUgPSBwcm9taXNlLnRoZW47XG5cdFxuXHRcdFx0Ly8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuXHRcdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdFx0c3RhdGVTdHJpbmcgPSB0dXBsZVsgMyBdO1xuXHRcblx0XHRcdFx0Ly8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcblx0XHRcdFx0cHJvbWlzZVsgdHVwbGVbIDEgXSBdID0gbGlzdC5hZGQ7XG5cdFxuXHRcdFx0XHQvLyBIYW5kbGUgc3RhdGVcblx0XHRcdFx0aWYgKCBzdGF0ZVN0cmluZyApIHtcblx0XHRcdFx0XHRsaXN0LmFkZCggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gc3RhdGUgPSBbIHJlc29sdmVkIHwgcmVqZWN0ZWQgXVxuXHRcdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblx0XG5cdFx0XHRcdFx0Ly8gWyByZWplY3RfbGlzdCB8IHJlc29sdmVfbGlzdCBdLmRpc2FibGU7IHByb2dyZXNzX2xpc3QubG9ja1xuXHRcdFx0XHRcdH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG5cdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gcHJvbWlzZSA6IHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0gPSBsaXN0LmZpcmVXaXRoO1xuXHRcdFx0fSApO1xuXHRcblx0XHRcdC8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZVxuXHRcdFx0cHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApO1xuXHRcblx0XHRcdC8vIENhbGwgZ2l2ZW4gZnVuYyBpZiBhbnlcblx0XHRcdGlmICggZnVuYyApIHtcblx0XHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBbGwgZG9uZSFcblx0XHRcdHJldHVybiBkZWZlcnJlZDtcblx0XHR9LFxuXHRcblx0XHQvLyBEZWZlcnJlZCBoZWxwZXJcblx0XHR3aGVuOiBmdW5jdGlvbiggc3Vib3JkaW5hdGUgLyogLCAuLi4sIHN1Ym9yZGluYXRlTiAqLyApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0cmVzb2x2ZVZhbHVlcyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXHRcdFx0XHRsZW5ndGggPSByZXNvbHZlVmFsdWVzLmxlbmd0aCxcblx0XG5cdFx0XHRcdC8vIHRoZSBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXNcblx0XHRcdFx0cmVtYWluaW5nID0gbGVuZ3RoICE9PSAxIHx8XG5cdFx0XHRcdFx0KCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXHRcblx0XHRcdFx0Ly8gdGhlIG1hc3RlciBEZWZlcnJlZC5cblx0XHRcdFx0Ly8gSWYgcmVzb2x2ZVZhbHVlcyBjb25zaXN0IG9mIG9ubHkgYSBzaW5nbGUgRGVmZXJyZWQsIGp1c3QgdXNlIHRoYXQuXG5cdFx0XHRcdGRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XG5cdFx0XHRcdC8vIFVwZGF0ZSBmdW5jdGlvbiBmb3IgYm90aCByZXNvbHZlIGFuZCBwcm9ncmVzcyB2YWx1ZXNcblx0XHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRjb250ZXh0c1sgaSBdID0gdGhpcztcblx0XHRcdFx0XHRcdHZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdFx0aWYgKCB2YWx1ZXMgPT09IHByb2dyZXNzVmFsdWVzICkge1xuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBjb250ZXh0cywgdmFsdWVzICk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY29udGV4dHMsIHZhbHVlcyApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXHRcblx0XHRcdC8vIEFkZCBsaXN0ZW5lcnMgdG8gRGVmZXJyZWQgc3Vib3JkaW5hdGVzOyB0cmVhdCBvdGhlcnMgYXMgcmVzb2x2ZWRcblx0XHRcdGlmICggbGVuZ3RoID4gMSApIHtcblx0XHRcdFx0cHJvZ3Jlc3NWYWx1ZXMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0XHRwcm9ncmVzc0NvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0aWYgKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHRcdC5wcm9ncmVzcyggdXBkYXRlRnVuYyggaSwgcHJvZ3Jlc3NDb250ZXh0cywgcHJvZ3Jlc3NWYWx1ZXMgKSApXG5cdFx0XHRcdFx0XHRcdC5kb25lKCB1cGRhdGVGdW5jKCBpLCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKSApXG5cdFx0XHRcdFx0XHRcdC5mYWlsKCBkZWZlcnJlZC5yZWplY3QgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0LS1yZW1haW5pbmc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gSWYgd2UncmUgbm90IHdhaXRpbmcgb24gYW55dGhpbmcsIHJlc29sdmUgdGhlIG1hc3RlclxuXHRcdFx0aWYgKCAhcmVtYWluaW5nICkge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHQvLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcblx0dmFyIHJlYWR5TGlzdDtcblx0XG5cdGpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHtcblx0XG5cdFx0Ly8gQWRkIHRoZSBjYWxsYmFja1xuXHRcdGpRdWVyeS5yZWFkeS5wcm9taXNlKCkuZG9uZSggZm4gKTtcblx0XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFxuXHRcdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdFx0aXNSZWFkeTogZmFsc2UsXG5cdFxuXHRcdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0XHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRcdHJlYWR5V2FpdDogMSxcblx0XG5cdFx0Ly8gSG9sZCAob3IgcmVsZWFzZSkgdGhlIHJlYWR5IGV2ZW50XG5cdFx0aG9sZFJlYWR5OiBmdW5jdGlvbiggaG9sZCApIHtcblx0XHRcdGlmICggaG9sZCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRcdHJlYWR5OiBmdW5jdGlvbiggd2FpdCApIHtcblx0XG5cdFx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0XHRpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXHRcblx0XHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIElmIHRoZXJlIGFyZSBmdW5jdGlvbnMgYm91bmQsIHRvIGV4ZWN1dGVcblx0XHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblx0XG5cdFx0XHQvLyBUcmlnZ2VyIGFueSBib3VuZCByZWFkeSBldmVudHNcblx0XHRcdGlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkge1xuXHRcdFx0XHRqUXVlcnkoIGRvY3VtZW50ICkudHJpZ2dlckhhbmRsZXIoIFwicmVhZHlcIiApO1xuXHRcdFx0XHRqUXVlcnkoIGRvY3VtZW50ICkub2ZmKCBcInJlYWR5XCIgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gKTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZFxuXHQgKi9cblx0ZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xuXHRcdGpRdWVyeS5yZWFkeSgpO1xuXHR9XG5cdFxuXHRqUXVlcnkucmVhZHkucHJvbWlzZSA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0aWYgKCAhcmVhZHlMaXN0ICkge1xuXHRcblx0XHRcdHJlYWR5TGlzdCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xuXHRcblx0XHRcdC8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkXG5cdFx0XHQvLyBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMCBvbmx5XG5cdFx0XHQvLyBPbGRlciBJRSBzb21ldGltZXMgc2lnbmFscyBcImludGVyYWN0aXZlXCIgdG9vIHNvb25cblx0XHRcdGlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIHx8XG5cdFx0XHRcdCggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIgJiYgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCApICkge1xuXHRcblx0XHRcdFx0Ly8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cdFxuXHRcdFx0XHQvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHRcdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xuXHR9O1xuXHRcblx0Ly8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90XG5cdGpRdWVyeS5yZWFkeS5wcm9taXNlKCk7XG5cdFxuXHRcblx0XG5cdFxuXHQvLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cblx0Ly8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uXG5cdHZhciBhY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXHRcblx0XHQvLyBTZXRzIG1hbnkgdmFsdWVzXG5cdFx0aWYgKCBqUXVlcnkudHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXHRcdFx0Zm9yICggaSBpbiBrZXkgKSB7XG5cdFx0XHRcdGFjY2VzcyggZWxlbXMsIGZuLCBpLCBrZXlbIGkgXSwgdHJ1ZSwgZW1wdHlHZXQsIHJhdyApO1xuXHRcdFx0fVxuXHRcblx0XHQvLyBTZXRzIG9uZSB2YWx1ZVxuXHRcdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXHRcblx0XHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0XHRyYXcgPSB0cnVlO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggYnVsayApIHtcblx0XG5cdFx0XHRcdC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuXHRcdFx0XHRpZiAoIHJhdyApIHtcblx0XHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0XHRmbiA9IG51bGw7XG5cdFxuXHRcdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YnVsayA9IGZuO1xuXHRcdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBmbiApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0Zm4oXG5cdFx0XHRcdFx0XHRlbGVtc1sgaSBdLCBrZXksIHJhdyA/XG5cdFx0XHRcdFx0XHR2YWx1ZSA6XG5cdFx0XHRcdFx0XHR2YWx1ZS5jYWxsKCBlbGVtc1sgaSBdLCBpLCBmbiggZWxlbXNbIGkgXSwga2V5ICkgKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiBjaGFpbmFibGUgP1xuXHRcdFx0ZWxlbXMgOlxuXHRcblx0XHRcdC8vIEdldHNcblx0XHRcdGJ1bGsgP1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcyApIDpcblx0XHRcdFx0bGVuID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7XG5cdH07XG5cdHZhciBhY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXHRcblx0XHQvLyBBY2NlcHRzIG9ubHk6XG5cdFx0Ly8gIC0gTm9kZVxuXHRcdC8vICAgIC0gTm9kZS5FTEVNRU5UX05PREVcblx0XHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHRcdC8vICAtIE9iamVjdFxuXHRcdC8vICAgIC0gQW55XG5cdFx0LyoganNoaW50IC1XMDE4ICovXG5cdFx0cmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApO1xuXHR9O1xuXHRcblx0XG5cdFxuXHRcblx0ZnVuY3Rpb24gRGF0YSgpIHtcblx0XHR0aGlzLmV4cGFuZG8gPSBqUXVlcnkuZXhwYW5kbyArIERhdGEudWlkKys7XG5cdH1cblx0XG5cdERhdGEudWlkID0gMTtcblx0XG5cdERhdGEucHJvdG90eXBlID0ge1xuXHRcblx0XHRyZWdpc3RlcjogZnVuY3Rpb24oIG93bmVyLCBpbml0aWFsICkge1xuXHRcdFx0dmFyIHZhbHVlID0gaW5pdGlhbCB8fCB7fTtcblx0XG5cdFx0XHQvLyBJZiBpdCBpcyBhIG5vZGUgdW5saWtlbHkgdG8gYmUgc3RyaW5naWZ5LWVkIG9yIGxvb3BlZCBvdmVyXG5cdFx0XHQvLyB1c2UgcGxhaW4gYXNzaWdubWVudFxuXHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdID0gdmFsdWU7XG5cdFxuXHRcdFx0Ly8gT3RoZXJ3aXNlIHNlY3VyZSBpdCBpbiBhIG5vbi1lbnVtZXJhYmxlLCBub24td3JpdGFibGUgcHJvcGVydHlcblx0XHRcdC8vIGNvbmZpZ3VyYWJpbGl0eSBtdXN0IGJlIHRydWUgdG8gYWxsb3cgdGhlIHByb3BlcnR5IHRvIGJlXG5cdFx0XHQvLyBkZWxldGVkIHdpdGggdGhlIGRlbGV0ZSBvcGVyYXRvclxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBvd25lciwgdGhpcy5leHBhbmRvLCB7XG5cdFx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdH0sXG5cdFx0Y2FjaGU6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XG5cdFx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHRcdC8vIGJ1dCB3ZSBzaG91bGQgbm90LCBzZWUgIzgzMzUuXG5cdFx0XHQvLyBBbHdheXMgcmV0dXJuIGFuIGVtcHR5IG9iamVjdC5cblx0XHRcdGlmICggIWFjY2VwdERhdGEoIG93bmVyICkgKSB7XG5cdFx0XHRcdHJldHVybiB7fTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGVcblx0XHRcdHZhciB2YWx1ZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0XG5cdFx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRcdGlmICggIXZhbHVlICkge1xuXHRcdFx0XHR2YWx1ZSA9IHt9O1xuXHRcblx0XHRcdFx0Ly8gV2UgY2FuIGFjY2VwdCBkYXRhIGZvciBub24tZWxlbWVudCBub2RlcyBpbiBtb2Rlcm4gYnJvd3NlcnMsXG5cdFx0XHRcdC8vIGJ1dCB3ZSBzaG91bGQgbm90LCBzZWUgIzgzMzUuXG5cdFx0XHRcdC8vIEFsd2F5cyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LlxuXHRcdFx0XHRpZiAoIGFjY2VwdERhdGEoIG93bmVyICkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXJcblx0XHRcdFx0XHQvLyB1c2UgcGxhaW4gYXNzaWdubWVudFxuXHRcdFx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB2YWx1ZTtcblx0XG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHNlY3VyZSBpdCBpbiBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5XG5cdFx0XHRcdFx0Ly8gY29uZmlndXJhYmxlIG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmVcblx0XHRcdFx0XHQvLyBkZWxldGVkIHdoZW4gZGF0YSBpcyByZW1vdmVkXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb3duZXIsIHRoaXMuZXhwYW5kbywge1xuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIG93bmVyLCBkYXRhLCB2YWx1ZSApIHtcblx0XHRcdHZhciBwcm9wLFxuXHRcdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGUoIG93bmVyICk7XG5cdFxuXHRcdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCBrZXksIHZhbHVlIF0gYXJnc1xuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0Y2FjaGVbIGRhdGEgXSA9IHZhbHVlO1xuXHRcblx0XHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0Ly8gQ29weSB0aGUgcHJvcGVydGllcyBvbmUtYnktb25lIHRvIHRoZSBjYWNoZSBvYmplY3Rcblx0XHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRcdGNhY2hlWyBwcm9wIF0gPSBkYXRhWyBwcm9wIF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBjYWNoZTtcblx0XHR9LFxuXHRcdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0XHRyZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHR0aGlzLmNhY2hlKCBvd25lciApIDpcblx0XHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdICYmIG93bmVyWyB0aGlzLmV4cGFuZG8gXVsga2V5IF07XG5cdFx0fSxcblx0XHRhY2Nlc3M6IGZ1bmN0aW9uKCBvd25lciwga2V5LCB2YWx1ZSApIHtcblx0XHRcdHZhciBzdG9yZWQ7XG5cdFxuXHRcdFx0Ly8gSW4gY2FzZXMgd2hlcmUgZWl0aGVyOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHRcdC8vICAgMi4gQSBzdHJpbmcga2V5IHdhcyBzcGVjaWZpZWQsIGJ1dCBubyB2YWx1ZSBwcm92aWRlZFxuXHRcdFx0Ly9cblx0XHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdFx0Ly8gd2hpY2ggdmFsdWUgdG8gcmV0dXJuLCByZXNwZWN0aXZlbHkgZWl0aGVyOlxuXHRcdFx0Ly9cblx0XHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHRcdC8vICAgMi4gVGhlIGRhdGEgc3RvcmVkIGF0IHRoZSBrZXlcblx0XHRcdC8vXG5cdFx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0KCAoIGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApICkge1xuXHRcblx0XHRcdFx0c3RvcmVkID0gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblx0XG5cdFx0XHRcdHJldHVybiBzdG9yZWQgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0c3RvcmVkIDogdGhpcy5nZXQoIG93bmVyLCBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFdoZW4gdGhlIGtleSBpcyBub3QgYSBzdHJpbmcsIG9yIGJvdGggYSBrZXkgYW5kIHZhbHVlXG5cdFx0XHQvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjpcblx0XHRcdC8vXG5cdFx0XHQvLyAgIDEuIEFuIG9iamVjdCBvZiBwcm9wZXJ0aWVzXG5cdFx0XHQvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZVxuXHRcdFx0Ly9cblx0XHRcdHRoaXMuc2V0KCBvd25lciwga2V5LCB2YWx1ZSApO1xuXHRcblx0XHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdFx0Ly8gcmV0dXJuIHRoZSBleHBlY3RlZCBkYXRhIGJhc2VkIG9uIHdoaWNoIHBhdGggd2FzIHRha2VuWypdXG5cdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5O1xuXHRcdH0sXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiggb3duZXIsIGtleSApIHtcblx0XHRcdHZhciBpLCBuYW1lLCBjYW1lbCxcblx0XHRcdFx0Y2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFxuXHRcdFx0aWYgKCBjYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy5yZWdpc3Rlciggb3duZXIgKTtcblx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSgga2V5ICkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIElmIFwibmFtZVwiIGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0XHQvLyBXaGVuIGRhdGEgaXMgaW5pdGlhbGx5IGNyZWF0ZWQsIHZpYSAoXCJrZXlcIiwgXCJ2YWxcIikgc2lnbmF0dXJlLFxuXHRcdFx0XHRcdC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuXHRcdFx0XHRcdC8vIFNpbmNlIHRoZXJlIGlzIG5vIHdheSB0byB0ZWxsIF9ob3dfIGEga2V5IHdhcyBhZGRlZCwgcmVtb3ZlXG5cdFx0XHRcdFx0Ly8gYm90aCBwbGFpbiBrZXkgYW5kIGNhbWVsQ2FzZSBrZXkuICMxMjc4NlxuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuXHRcdFx0XHRcdG5hbWUgPSBrZXkuY29uY2F0KCBrZXkubWFwKCBqUXVlcnkuY2FtZWxDYXNlICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYW1lbCA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXHRcblx0XHRcdFx0XHQvLyBUcnkgdGhlIHN0cmluZyBhcyBhIGtleSBiZWZvcmUgYW55IG1hbmlwdWxhdGlvblxuXHRcdFx0XHRcdGlmICgga2V5IGluIGNhY2hlICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IFsga2V5LCBjYW1lbCBdO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBjcmVhdGUgYW4gYXJyYXkgYnkgbWF0Y2hpbmcgbm9uLXdoaXRlc3BhY2Vcblx0XHRcdFx0XHRcdG5hbWUgPSBjYW1lbDtcblx0XHRcdFx0XHRcdG5hbWUgPSBuYW1lIGluIGNhY2hlID9cblx0XHRcdFx0XHRcdFx0WyBuYW1lIF0gOiAoIG5hbWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRpID0gbmFtZS5sZW5ndGg7XG5cdFxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRkZWxldGUgY2FjaGVbIG5hbWVbIGkgXSBdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIHRoZXJlJ3Mgbm8gbW9yZSBkYXRhXG5cdFx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApICkge1xuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9IDM1LTQ1K1xuXHRcdFx0XHQvLyBXZWJraXQgJiBCbGluayBwZXJmb3JtYW5jZSBzdWZmZXJzIHdoZW4gZGVsZXRpbmcgcHJvcGVydGllc1xuXHRcdFx0XHQvLyBmcm9tIERPTSBub2Rlcywgc28gc2V0IHRvIHVuZGVmaW5lZCBpbnN0ZWFkXG5cdFx0XHRcdC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzg2MDdcblx0XHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGVsZXRlIG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdFx0dmFyIGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdFx0cmV0dXJuIGNhY2hlICE9PSB1bmRlZmluZWQgJiYgIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApO1xuXHRcdH1cblx0fTtcblx0dmFyIGRhdGFQcml2ID0gbmV3IERhdGEoKTtcblx0XG5cdHZhciBkYXRhVXNlciA9IG5ldyBEYXRhKCk7XG5cdFxuXHRcblx0XG5cdC8vXHRJbXBsZW1lbnRhdGlvbiBTdW1tYXJ5XG5cdC8vXG5cdC8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG5cdC8vXHQyLiBJbXByb3ZlIHRoZSBtb2R1bGUncyBtYWludGFpbmFiaWxpdHkgYnkgcmVkdWNpbmcgdGhlIHN0b3JhZ2Vcblx0Ly9cdFx0cGF0aHMgdG8gYSBzaW5nbGUgbWVjaGFuaXNtLlxuXHQvL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cblx0Ly9cdDQuIF9OZXZlcl8gZXhwb3NlIFwicHJpdmF0ZVwiIGRhdGEgdG8gdXNlciBjb2RlIChUT0RPOiBEcm9wIF9kYXRhLCBfcmVtb3ZlRGF0YSlcblx0Ly9cdDUuIEF2b2lkIGV4cG9zaW5nIGltcGxlbWVudGF0aW9uIGRldGFpbHMgb24gdXNlciBvYmplY3RzIChlZy4gZXhwYW5kbyBwcm9wZXJ0aWVzKVxuXHQvL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cdFxuXHR2YXIgcmJyYWNlID0gL14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFxuXHRcdHJtdWx0aURhc2ggPSAvW0EtWl0vZztcblx0XG5cdGZ1bmN0aW9uIGRhdGFBdHRyKCBlbGVtLCBrZXksIGRhdGEgKSB7XG5cdFx0dmFyIG5hbWU7XG5cdFxuXHRcdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnlcblx0XHQvLyBkYXRhIGZyb20gdGhlIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGVcblx0XHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0bmFtZSA9IFwiZGF0YS1cIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kJlwiICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdGRhdGEgPSBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApO1xuXHRcblx0XHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG5cdFx0XHRcdFx0XHRkYXRhID09PSBcImZhbHNlXCIgPyBmYWxzZSA6XG5cdFx0XHRcdFx0XHRkYXRhID09PSBcIm51bGxcIiA/IG51bGwgOlxuXHRcblx0XHRcdFx0XHRcdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXG5cdFx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG5cdFx0XHRcdFx0XHRyYnJhY2UudGVzdCggZGF0YSApID8galF1ZXJ5LnBhcnNlSlNPTiggZGF0YSApIDpcblx0XHRcdFx0XHRcdGRhdGE7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGRhdGEgc28gaXQgaXNuJ3QgY2hhbmdlZCBsYXRlclxuXHRcdFx0XHRkYXRhVXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdGpRdWVyeS5leHRlbmQoIHtcblx0XHRoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBkYXRhVXNlci5oYXNEYXRhKCBlbGVtICkgfHwgZGF0YVByaXYuaGFzRGF0YSggZWxlbSApO1xuXHRcdH0sXG5cdFxuXHRcdGRhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuXHRcdFx0cmV0dXJuIGRhdGFVc2VyLmFjY2VzcyggZWxlbSwgbmFtZSwgZGF0YSApO1xuXHRcdH0sXG5cdFxuXHRcdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdFx0ZGF0YVVzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdFx0fSxcblx0XG5cdFx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0XHQvLyB3aXRoIGRpcmVjdCBjYWxscyB0byBkYXRhUHJpdiBtZXRob2RzLCB0aGVzZSBjYW4gYmUgZGVwcmVjYXRlZC5cblx0XHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0XHRyZXR1cm4gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdFx0fSxcblx0XG5cdFx0X3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0ZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgaSwgbmFtZSwgZGF0YSxcblx0XHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdFx0YXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlcztcblx0XG5cdFx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGlmICggdGhpcy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSApO1xuXHRcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFQcml2LmdldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiApICkge1xuXHRcdFx0XHRcdFx0aSA9IGF0dHJzLmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUxMStcblx0XHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRcdGlmICggYXR0cnNbIGkgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0gYXR0cnNbIGkgXS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lLnNsaWNlKCA1ICkgKTtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiwgdHJ1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gU2V0cyBtdWx0aXBsZSB2YWx1ZXNcblx0XHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBrZXkgKTtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRhdGEsIGNhbWVsS2V5O1xuXHRcblx0XHRcdFx0Ly8gVGhlIGNhbGxpbmcgalF1ZXJ5IG9iamVjdCAoZWxlbWVudCBtYXRjaGVzKSBpcyBub3QgZW1wdHlcblx0XHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdFx0Ly8gYHZhbHVlYCBwYXJhbWV0ZXIgd2FzIG5vdCB1bmRlZmluZWQuIEFuIGVtcHR5IGpRdWVyeSBvYmplY3Rcblx0XHRcdFx0Ly8gd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgZm9yIGVsZW0gPSB0aGlzWyAwIF0gd2hpY2ggd2lsbFxuXHRcdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0XHRpZiAoIGVsZW0gJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblx0XG5cdFx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHRcdC8vIHdpdGggdGhlIGtleSBhcy1pc1xuXHRcdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0sIGtleSApIHx8XG5cdFxuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgZGFzaGVkIGtleSBpZiBpdCBleGlzdHMgKGdoLTI3NzkpXG5cdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGZvciAyLjIueCBvbmx5XG5cdFx0XHRcdFx0XHRkYXRhVXNlci5nZXQoIGVsZW0sIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kJlwiICkudG9Mb3dlckNhc2UoKSApO1xuXHRcblx0XHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Y2FtZWxLZXkgPSBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKTtcblx0XG5cdFx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHRcdC8vIHdpdGggdGhlIGtleSBjYW1lbGl6ZWRcblx0XHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtLCBjYW1lbEtleSApO1xuXHRcdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBBdHRlbXB0IHRvIFwiZGlzY292ZXJcIiB0aGUgZGF0YSBpblxuXHRcdFx0XHRcdC8vIEhUTUw1IGN1c3RvbSBkYXRhLSogYXR0cnNcblx0XHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGNhbWVsS2V5LCB1bmRlZmluZWQgKTtcblx0XHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gV2UgdHJpZWQgcmVhbGx5IGhhcmQsIGJ1dCB0aGUgZGF0YSBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHRcdGNhbWVsS2V5ID0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICk7XG5cdFx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHRcdC8vIEZpcnN0LCBhdHRlbXB0IHRvIHN0b3JlIGEgY29weSBvciByZWZlcmVuY2Ugb2YgYW55XG5cdFx0XHRcdFx0Ly8gZGF0YSB0aGF0IG1pZ2h0J3ZlIGJlZW4gc3RvcmUgd2l0aCBhIGNhbWVsQ2FzZWQga2V5LlxuXHRcdFx0XHRcdHZhciBkYXRhID0gZGF0YVVzZXIuZ2V0KCB0aGlzLCBjYW1lbEtleSApO1xuXHRcblx0XHRcdFx0XHQvLyBGb3IgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZSBpbnRlcm9wLCB3ZSBoYXZlIHRvXG5cdFx0XHRcdFx0Ly8gc3RvcmUgcHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgaW4gYSBjYW1lbENhc2UgZm9ybS5cblx0XHRcdFx0XHQvLyBUaGlzIG1pZ2h0IG5vdCBhcHBseSB0byBhbGwgcHJvcGVydGllcy4uLipcblx0XHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGNhbWVsS2V5LCB2YWx1ZSApO1xuXHRcblx0XHRcdFx0XHQvLyAqLi4uIEluIHRoZSBjYXNlIG9mIHByb3BlcnRpZXMgdGhhdCBtaWdodCBfYWN0dWFsbHlfXG5cdFx0XHRcdFx0Ly8gaGF2ZSBkYXNoZXMsIHdlIG5lZWQgdG8gYWxzbyBzdG9yZSBhIGNvcHkgb2YgdGhhdFxuXHRcdFx0XHRcdC8vIHVuY2hhbmdlZCBwcm9wZXJ0eS5cblx0XHRcdFx0XHRpZiAoIGtleS5pbmRleE9mKCBcIi1cIiApID4gLTEgJiYgZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBrZXksIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEsIG51bGwsIHRydWUgKTtcblx0XHR9LFxuXHRcblx0XHRyZW1vdmVEYXRhOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFVc2VyLnJlbW92ZSggdGhpcywga2V5ICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRcblx0alF1ZXJ5LmV4dGVuZCgge1xuXHRcdHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcblx0XHRcdHZhciBxdWV1ZTtcblx0XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdHR5cGUgPSAoIHR5cGUgfHwgXCJmeFwiICkgKyBcInF1ZXVlXCI7XG5cdFx0XHRcdHF1ZXVlID0gZGF0YVByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cdFxuXHRcdFx0XHQvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwXG5cdFx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoICFxdWV1ZSB8fCBqUXVlcnkuaXNBcnJheSggZGF0YSApICkge1xuXHRcdFx0XHRcdFx0cXVldWUgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEgKSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRkZXF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XG5cdFx0XHR2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIGVsZW0sIHR5cGUgKSxcblx0XHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIHR5cGUgKSxcblx0XHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHRcdH07XG5cdFxuXHRcdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdFx0aWYgKCBmbiA9PT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGZuICkge1xuXHRcblx0XHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICkge1xuXHRcdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW0sIG5leHQsIGhvb2tzICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7XG5cdFx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRcdF9xdWV1ZUhvb2tzOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcblx0XHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0XHRyZXR1cm4gZGF0YVByaXYuZ2V0KCBlbGVtLCBrZXkgKSB8fCBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIGtleSwge1xuXHRcdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICkuYWRkKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdFx0fSApXG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0cXVldWU6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdFx0dmFyIHNldHRlciA9IDI7XG5cdFxuXHRcdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRcdHNldHRlci0tO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA8IHNldHRlciApIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHRoaXMgOlxuXHRcdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXHRcblx0XHRcdFx0XHQvLyBFbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZVxuXHRcdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXHRcblx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiAmJiBxdWV1ZVsgMCBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0fSxcblx0XHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0fSApO1xuXHRcdH0sXG5cdFx0Y2xlYXJRdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdFx0fSxcblx0XG5cdFx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHRcdC8vIGFyZSBlbXB0aWVkIChmeCBpcyB0aGUgdHlwZSBieSBkZWZhdWx0KVxuXHRcdHByb21pc2U6IGZ1bmN0aW9uKCB0eXBlLCBvYmogKSB7XG5cdFx0XHR2YXIgdG1wLFxuXHRcdFx0XHRjb3VudCA9IDEsXG5cdFx0XHRcdGRlZmVyID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdFx0aSA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0XHRyZXNvbHZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0XHRkZWZlci5yZXNvbHZlV2l0aCggZWxlbWVudHMsIFsgZWxlbWVudHMgXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XG5cdFx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHR0bXAgPSBkYXRhUHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0XHRpZiAoIHRtcCAmJiB0bXAuZW1wdHkgKSB7XG5cdFx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJlc29sdmUoKTtcblx0XHRcdHJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTtcblx0XHR9XG5cdH0gKTtcblx0dmFyIHBudW0gPSAoIC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvICkuc291cmNlO1xuXHRcblx0dmFyIHJjc3NOdW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApO1xuXHRcblx0XG5cdHZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblx0XG5cdHZhciBpc0hpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblx0XG5cdFx0XHQvLyBpc0hpZGRlbiBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuXHRcdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0XHRlbGVtID0gZWwgfHwgZWxlbTtcblx0XHRcdHJldHVybiBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApID09PSBcIm5vbmVcIiB8fFxuXHRcdFx0XHQhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblx0XHR9O1xuXHRcblx0XG5cdFxuXHRmdW5jdGlvbiBhZGp1c3RDU1MoIGVsZW0sIHByb3AsIHZhbHVlUGFydHMsIHR3ZWVuICkge1xuXHRcdHZhciBhZGp1c3RlZCxcblx0XHRcdHNjYWxlID0gMSxcblx0XHRcdG1heEl0ZXJhdGlvbnMgPSAyMCxcblx0XHRcdGN1cnJlbnRWYWx1ZSA9IHR3ZWVuID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7IHJldHVybiB0d2Vlbi5jdXIoKTsgfSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgcHJvcCwgXCJcIiApOyB9LFxuXHRcdFx0aW5pdGlhbCA9IGN1cnJlbnRWYWx1ZSgpLFxuXHRcdFx0dW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXHRcblx0XHRcdC8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzXG5cdFx0XHRpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICtpbml0aWFsICkgJiZcblx0XHRcdFx0cmNzc051bS5leGVjKCBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wICkgKTtcblx0XG5cdFx0aWYgKCBpbml0aWFsSW5Vbml0ICYmIGluaXRpYWxJblVuaXRbIDMgXSAhPT0gdW5pdCApIHtcblx0XG5cdFx0XHQvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG5cdFx0XHR1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07XG5cdFxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgdHdlZW4gcHJvcGVydGllcyBsYXRlciBvblxuXHRcdFx0dmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107XG5cdFxuXHRcdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbCB8fCAxO1xuXHRcblx0XHRcdGRvIHtcblx0XG5cdFx0XHRcdC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLlxuXHRcdFx0XHQvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvd1xuXHRcdFx0XHRzY2FsZSA9IHNjYWxlIHx8IFwiLjVcIjtcblx0XG5cdFx0XHRcdC8vIEFkanVzdCBhbmQgYXBwbHlcblx0XHRcdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApO1xuXHRcblx0XHRcdC8vIFVwZGF0ZSBzY2FsZSwgdG9sZXJhdGluZyB6ZXJvIG9yIE5hTiBmcm9tIHR3ZWVuLmN1cigpXG5cdFx0XHQvLyBCcmVhayB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoLlxuXHRcdFx0fSB3aGlsZSAoXG5cdFx0XHRcdHNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zXG5cdFx0XHQpO1xuXHRcdH1cblx0XG5cdFx0aWYgKCB2YWx1ZVBhcnRzICkge1xuXHRcdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsSW5Vbml0IHx8ICtpbml0aWFsIHx8IDA7XG5cdFxuXHRcdFx0Ly8gQXBwbHkgcmVsYXRpdmUgb2Zmc2V0ICgrPS8tPSkgaWYgc3BlY2lmaWVkXG5cdFx0XHRhZGp1c3RlZCA9IHZhbHVlUGFydHNbIDEgXSA/XG5cdFx0XHRcdGluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6XG5cdFx0XHRcdCt2YWx1ZVBhcnRzWyAyIF07XG5cdFx0XHRpZiAoIHR3ZWVuICkge1xuXHRcdFx0XHR0d2Vlbi51bml0ID0gdW5pdDtcblx0XHRcdFx0dHdlZW4uc3RhcnQgPSBpbml0aWFsSW5Vbml0O1xuXHRcdFx0XHR0d2Vlbi5lbmQgPSBhZGp1c3RlZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGFkanVzdGVkO1xuXHR9XG5cdHZhciByY2hlY2thYmxlVHlwZSA9ICggL14oPzpjaGVja2JveHxyYWRpbykkL2kgKTtcblx0XG5cdHZhciBydGFnTmFtZSA9ICggLzwoW1xcdzotXSspLyApO1xuXHRcblx0dmFyIHJzY3JpcHRUeXBlID0gKCAvXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pICk7XG5cdFxuXHRcblx0XG5cdC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG5cdHZhciB3cmFwTWFwID0ge1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblx0XG5cdFx0Ly8gWEhUTUwgcGFyc2VycyBkbyBub3QgbWFnaWNhbGx5IGluc2VydCBlbGVtZW50cyBpbiB0aGVcblx0XHQvLyBzYW1lIHdheSB0aGF0IHRhZyBzb3VwIHBhcnNlcnMgZG8uIFNvIHdlIGNhbm5vdCBzaG9ydGVuXG5cdFx0Ly8gdGhpcyBieSBvbWl0dGluZyA8dGJvZHk+IG9yIG90aGVyIHJlcXVpcmVkIGVsZW1lbnRzLlxuXHRcdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0XHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHRcdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0XHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cdFxuXHRcdF9kZWZhdWx0OiBbIDAsIFwiXCIsIFwiXCIgXVxuXHR9O1xuXHRcblx0Ly8gU3VwcG9ydDogSUU5XG5cdHdyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjtcblx0XG5cdHdyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG5cdHdyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXHRcblx0XG5cdGZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkge1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdFx0Ly8gVXNlIHR5cGVvZiB0byBhdm9pZCB6ZXJvLWFyZ3VtZW50IG1ldGhvZCBpbnZvY2F0aW9uIG9uIGhvc3Qgb2JqZWN0cyAoIzE1MTUxKVxuXHRcdHZhciByZXQgPSB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFx0dHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdFx0Y29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRcdFtdO1xuXHRcblx0XHRyZXR1cm4gdGFnID09PSB1bmRlZmluZWQgfHwgdGFnICYmIGpRdWVyeS5ub2RlTmFtZSggY29udGV4dCwgdGFnICkgP1xuXHRcdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdFx0cmV0O1xuXHR9XG5cdFxuXHRcblx0Ly8gTWFyayBzY3JpcHRzIGFzIGhhdmluZyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkXG5cdGZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXHRcblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRkYXRhUHJpdi5zZXQoXG5cdFx0XHRcdGVsZW1zWyBpIF0sXG5cdFx0XHRcdFwiZ2xvYmFsRXZhbFwiLFxuXHRcdFx0XHQhcmVmRWxlbWVudHMgfHwgZGF0YVByaXYuZ2V0KCByZWZFbGVtZW50c1sgaSBdLCBcImdsb2JhbEV2YWxcIiApXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXHRcblx0XG5cdHZhciByaHRtbCA9IC88fCYjP1xcdys7Lztcblx0XG5cdGZ1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24sIGlnbm9yZWQgKSB7XG5cdFx0dmFyIGVsZW0sIHRtcCwgdGFnLCB3cmFwLCBjb250YWlucywgaixcblx0XHRcdGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0XHRub2RlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXHRcblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblx0XG5cdFx0XHRpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHtcblx0XG5cdFx0XHRcdC8vIEFkZCBub2RlcyBkaXJlY3RseVxuXHRcdFx0XHRpZiAoIGpRdWVyeS50eXBlKCBlbGVtICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xLCBQaGFudG9tSlM8MlxuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblx0XG5cdFx0XHRcdC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRtcCA9IHRtcCB8fCBmcmFnbWVudC5hcHBlbmRDaGlsZCggY29udGV4dC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblx0XG5cdFx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBqUXVlcnkuaHRtbFByZWZpbHRlciggZWxlbSApICsgd3JhcFsgMiBdO1xuXHRcblx0XHRcdFx0XHQvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcblx0XHRcdFx0XHRqID0gd3JhcFsgMCBdO1xuXHRcdFx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRcdFx0dG1wID0gdG1wLmxhc3RDaGlsZDtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xLCBQaGFudG9tSlM8MlxuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXHRcblx0XHRcdFx0XHQvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lclxuXHRcdFx0XHRcdHRtcCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cdFxuXHRcdFx0XHRcdC8vIEVuc3VyZSB0aGUgY3JlYXRlZCBub2RlcyBhcmUgb3JwaGFuZWQgKCMxMjM5Milcblx0XHRcdFx0XHR0bXAudGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdFx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoICggZWxlbSA9IG5vZGVzWyBpKysgXSApICkge1xuXHRcblx0XHRcdC8vIFNraXAgZWxlbWVudHMgYWxyZWFkeSBpbiB0aGUgY29udGV4dCBjb2xsZWN0aW9uICh0cmFjLTQwODcpXG5cdFx0XHRpZiAoIHNlbGVjdGlvbiAmJiBqUXVlcnkuaW5BcnJheSggZWxlbSwgc2VsZWN0aW9uICkgPiAtMSApIHtcblx0XHRcdFx0aWYgKCBpZ25vcmVkICkge1xuXHRcdFx0XHRcdGlnbm9yZWQucHVzaCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcblx0XHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblx0XG5cdFx0XHQvLyBBcHBlbmQgdG8gZnJhZ21lbnRcblx0XHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXHRcblx0XHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRcdGlmICggY29udGFpbnMgKSB7XG5cdFx0XHRcdHNldEdsb2JhbEV2YWwoIHRtcCApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRcdGlmICggc2NyaXB0cyApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKCBlbGVtID0gdG1wWyBqKysgXSApICkge1xuXHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggZWxlbS50eXBlIHx8IFwiXCIgKSApIHtcblx0XHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGZyYWdtZW50O1xuXHR9XG5cdFxuXHRcblx0KCBmdW5jdGlvbigpIHtcblx0XHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0XHRkaXYgPSBmcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICksXG5cdFx0XHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMC00LjMsIFNhZmFyaTw9NS4xXG5cdFx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0XHQvLyBTdXBwb3J0OiBXaW5kb3dzIFdlYiBBcHBzIChXV0EpXG5cdFx0Ly8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpXG5cdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcImNoZWNrZWRcIiwgXCJjaGVja2VkXCIgKTtcblx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXHRcblx0XHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICk7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xLCBBbmRyb2lkPDQuMlxuXHRcdC8vIE9sZGVyIFdlYktpdCBkb2Vzbid0IGNsb25lIGNoZWNrZWQgc3RhdGUgY29ycmVjdGx5IGluIGZyYWdtZW50c1xuXHRcdHN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblx0XG5cdFx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHRcdC8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkXG5cdFx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRcdHN1cHBvcnQubm9DbG9uZUNoZWNrZWQgPSAhIWRpdi5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO1xuXHR9ICkoKTtcblx0XG5cdFxuXHR2YXJcblx0XHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdFx0cm1vdXNlRXZlbnQgPSAvXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sXG5cdFx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkvO1xuXHRcblx0ZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHQvLyBTdXBwb3J0OiBJRTlcblx0Ly8gU2VlICMxMzM5MyBmb3IgbW9yZSBpbmZvXG5cdGZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0XHR9IGNhdGNoICggZXJyICkgeyB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9uKCBlbGVtLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUgKSB7XG5cdFx0dmFyIG9yaWdGbiwgdHlwZTtcblx0XG5cdFx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFxuXHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuXHRcdFx0XHRkYXRhID0gZGF0YSB8fCBzZWxlY3Rvcjtcblx0XHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0XHRvbiggZWxlbSwgdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0fVxuXHRcblx0XHRpZiAoIGRhdGEgPT0gbnVsbCAmJiBmbiA9PSBudWxsICkge1xuXHRcblx0XHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcblx0XHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdC8vICggdHlwZXMsIGRhdGEsIGZuIClcblx0XHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0XHRkYXRhID0gc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fSBlbHNlIGlmICggIWZuICkge1xuXHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0fVxuXHRcblx0XHRpZiAoIG9uZSA9PT0gMSApIHtcblx0XHRcdG9yaWdGbiA9IGZuO1xuXHRcdFx0Zm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFxuXHRcdFx0XHQvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cblx0XHRcdFx0alF1ZXJ5KCkub2ZmKCBldmVudCApO1xuXHRcdFx0XHRyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdH07XG5cdFxuXHRcdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0XHR9ICk7XG5cdH1cblx0XG5cdC8qXG5cdCAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cblx0ICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy5cblx0ICovXG5cdGpRdWVyeS5ldmVudCA9IHtcblx0XG5cdFx0Z2xvYmFsOiB7fSxcblx0XG5cdFx0YWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkge1xuXHRcblx0XHRcdHZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCxcblx0XHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblx0XG5cdFx0XHQvLyBEb24ndCBhdHRhY2ggZXZlbnRzIHRvIG5vRGF0YSBvciB0ZXh0L2NvbW1lbnQgbm9kZXMgKGJ1dCBhbGxvdyBwbGFpbiBvYmplY3RzKVxuXHRcdFx0aWYgKCAhZWxlbURhdGEgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRcdGlmICggaGFuZGxlci5oYW5kbGVyICkge1xuXHRcdFx0XHRoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG5cdFx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0XHRzZWxlY3RvciA9IGhhbmRsZU9iakluLnNlbGVjdG9yO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlclxuXHRcdFx0aWYgKCAhaGFuZGxlci5ndWlkICkge1xuXHRcdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRcdGlmICggISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRcdGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IHt9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhKCBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSApICkge1xuXHRcdFx0XHRldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSA9IGZ1bmN0aW9uKCBlICkge1xuXHRcblx0XHRcdFx0XHQvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZFxuXHRcdFx0XHRcdC8vIHdoZW4gYW4gZXZlbnQgaXMgY2FsbGVkIGFmdGVyIGEgcGFnZSBoYXMgdW5sb2FkZWRcblx0XHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBIYW5kbGUgbXVsdGlwbGUgZXZlbnRzIHNlcGFyYXRlZCBieSBhIHNwYWNlXG5cdFx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0XHR0eXBlID0gb3JpZ1R5cGUgPSB0bXBbIDEgXTtcblx0XHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblx0XG5cdFx0XHRcdC8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVyc1xuXHRcdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcblx0XHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFxuXHRcdFx0XHQvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcblx0XHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcblx0XHRcdFx0Ly8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuXHRcdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XG5cdFx0XHRcdC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoIHtcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRcdG9yaWdUeXBlOiBvcmlnVHlwZSxcblx0XHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdFx0Z3VpZDogaGFuZGxlci5ndWlkLFxuXHRcdFx0XHRcdHNlbGVjdG9yOiBzZWxlY3Rvcixcblx0XHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApXG5cdFx0XHRcdH0sIGhhbmRsZU9iakluICk7XG5cdFxuXHRcdFx0XHQvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuXHRcdFx0XHRpZiAoICEoIGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gKSApIHtcblx0XHRcdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107XG5cdFx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cdFxuXHRcdFx0XHRcdC8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZVxuXHRcdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHxcblx0XHRcdFx0XHRcdHNwZWNpYWwuc2V0dXAuY2FsbCggZWxlbSwgZGF0YSwgbmFtZXNwYWNlcywgZXZlbnRIYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdFx0c3BlY2lhbC5hZGQuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cdFxuXHRcdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlci5ndWlkID0gaGFuZGxlci5ndWlkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQWRkIHRvIHRoZSBlbGVtZW50J3MgaGFuZGxlciBsaXN0LCBkZWxlZ2F0ZXMgaW4gZnJvbnRcblx0XHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQrKywgMCwgaGFuZGxlT2JqICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdFx0alF1ZXJ5LmV2ZW50Lmdsb2JhbFsgdHlwZSBdID0gdHJ1ZTtcblx0XHRcdH1cblx0XG5cdFx0fSxcblx0XG5cdFx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIHNlbGVjdG9yLCBtYXBwZWRUeXBlcyApIHtcblx0XG5cdFx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuaGFzRGF0YSggZWxlbSApICYmIGRhdGFQcml2LmdldCggZWxlbSApO1xuXHRcblx0XHRcdGlmICggIWVsZW1EYXRhIHx8ICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdFx0dHlwZXMgPSAoIHR5cGVzIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRcdG5hbWVzcGFjZXMgPSAoIHRtcFsgMiBdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cdFxuXHRcdFx0XHQvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnRcblx0XHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblx0XHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0dG1wID0gdG1wWyAyIF0gJiZcblx0XHRcdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKCBcIlxcXFwuKD86LipcXFxcLnwpXCIgKSArIFwiKFxcXFwufCQpXCIgKTtcblx0XG5cdFx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdFx0b3JpZ0NvdW50ID0gaiA9IGhhbmRsZXJzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblx0XG5cdFx0XHRcdFx0aWYgKCAoIG1hcHBlZFR5cGVzIHx8IG9yaWdUeXBlID09PSBoYW5kbGVPYmoub3JpZ1R5cGUgKSAmJlxuXHRcdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHRcdCggIXRtcCB8fCB0bXAudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgJiZcblx0XHRcdFx0XHRcdCggIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSBoYW5kbGVPYmouc2VsZWN0b3IgfHxcblx0XHRcdFx0XHRcdFx0c2VsZWN0b3IgPT09IFwiKipcIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXHRcblx0XHRcdFx0XHRcdGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWwucmVtb3ZlICkge1xuXHRcdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFJlbW92ZSBnZW5lcmljIGV2ZW50IGhhbmRsZXIgaWYgd2UgcmVtb3ZlZCBzb21ldGhpbmcgYW5kIG5vIG1vcmUgaGFuZGxlcnMgZXhpc3Rcblx0XHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRcdGlmICggb3JpZ0NvdW50ICYmICFoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0aWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fFxuXHRcdFx0XHRcdFx0c3BlY2lhbC50ZWFyZG93bi5jYWxsKCBlbGVtLCBuYW1lc3BhY2VzLCBlbGVtRGF0YS5oYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cdFxuXHRcdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBlbGVtRGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGRlbGV0ZSBldmVudHNbIHR5cGUgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFJlbW92ZSBkYXRhIGFuZCB0aGUgZXhwYW5kbyBpZiBpdCdzIG5vIGxvbmdlciB1c2VkXG5cdFx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImhhbmRsZSBldmVudHNcIiApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdGRpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFxuXHRcdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0XHRldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICk7XG5cdFxuXHRcdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLFxuXHRcdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXHRcdFx0XHRoYW5kbGVycyA9ICggZGF0YVByaXYuZ2V0KCB0aGlzLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLFxuXHRcdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGV2ZW50LnR5cGUgXSB8fCB7fTtcblx0XG5cdFx0XHQvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudFxuXHRcdFx0YXJnc1sgMCBdID0gZXZlbnQ7XG5cdFx0XHRldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7XG5cdFxuXHRcdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdFx0aWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBEZXRlcm1pbmUgaGFuZGxlcnNcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblx0XG5cdFx0XHQvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1c1xuXHRcdFx0aSA9IDA7XG5cdFx0XHR3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblx0XG5cdFx0XHRcdGogPSAwO1xuXHRcdFx0XHR3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJlxuXHRcdFx0XHRcdCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcblx0XHRcdFx0XHQvLyBUcmlnZ2VyZWQgZXZlbnQgbXVzdCBlaXRoZXIgMSkgaGF2ZSBubyBuYW1lc3BhY2UsIG9yIDIpIGhhdmUgbmFtZXNwYWNlKHMpXG5cdFx0XHRcdFx0Ly8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuXG5cdFx0XHRcdFx0aWYgKCAhZXZlbnQucm5hbWVzcGFjZSB8fCBldmVudC5ybmFtZXNwYWNlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHtcblx0XG5cdFx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0XHRldmVudC5kYXRhID0gaGFuZGxlT2JqLmRhdGE7XG5cdFxuXHRcdFx0XHRcdFx0cmV0ID0gKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSApLmhhbmRsZSB8fFxuXHRcdFx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlciApLmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0XHRpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkge1xuXHRcdFx0XHRzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdFx0fSxcblx0XG5cdFx0aGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG5cdFx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0XHRkZWxlZ2F0ZUNvdW50ID0gaGFuZGxlcnMuZGVsZWdhdGVDb3VudCxcblx0XHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXHRcblx0XHRcdC8vIFN1cHBvcnQgKGF0IGxlYXN0KTogQ2hyb21lLCBJRTlcblx0XHRcdC8vIEZpbmQgZGVsZWdhdGUgaGFuZGxlcnNcblx0XHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG5cdFx0XHQvL1xuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDw9NDIrXG5cdFx0XHQvLyBBdm9pZCBub24tbGVmdC1jbGljayBpbiBGRiBidXQgZG9uJ3QgYmxvY2sgSUUgcmFkaW8gZXZlbnRzICgjMzg2MSwgZ2gtMjM0Mylcblx0XHRcdGlmICggZGVsZWdhdGVDb3VudCAmJiBjdXIubm9kZVR5cGUgJiZcblx0XHRcdFx0KCBldmVudC50eXBlICE9PSBcImNsaWNrXCIgfHwgaXNOYU4oIGV2ZW50LmJ1dHRvbiApIHx8IGV2ZW50LmJ1dHRvbiA8IDEgKSApIHtcblx0XG5cdFx0XHRcdGZvciAoIDsgY3VyICE9PSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkge1xuXHRcblx0XHRcdFx0XHQvLyBEb24ndCBjaGVjayBub24tZWxlbWVudHMgKCMxMzIwOClcblx0XHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA9PT0gMSAmJiAoIGN1ci5kaXNhYmxlZCAhPT0gdHJ1ZSB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIgKSApIHtcblx0XHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblx0XHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkge1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaSBdO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3QgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKCMxMzIwMylcblx0XHRcdFx0XHRcdFx0c2VsID0gaGFuZGxlT2JqLnNlbGVjdG9yICsgXCIgXCI7XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bWF0Y2hlc1sgc2VsIF0gPSBoYW5kbGVPYmoubmVlZHNDb250ZXh0ID9cblx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOlxuXHRcdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQoIHNlbCwgdGhpcywgbnVsbCwgWyBjdXIgXSApLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRcdG1hdGNoZXMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlcy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZXMgfSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRcdGlmICggZGVsZWdhdGVDb3VudCA8IGhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogdGhpcywgaGFuZGxlcnM6IGhhbmRsZXJzLnNsaWNlKCBkZWxlZ2F0ZUNvdW50ICkgfSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdFx0fSxcblx0XG5cdFx0Ly8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnRcblx0XHRwcm9wczogKCBcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRldGFpbCBldmVudFBoYXNlIFwiICtcblx0XHRcdFwibWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiICkuc3BsaXQoIFwiIFwiICksXG5cdFxuXHRcdGZpeEhvb2tzOiB7fSxcblx0XG5cdFx0a2V5SG9va3M6IHtcblx0XHRcdHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdCggXCIgXCIgKSxcblx0XHRcdGZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHtcblx0XG5cdFx0XHRcdC8vIEFkZCB3aGljaCBmb3Iga2V5IGV2ZW50c1xuXHRcdFx0XHRpZiAoIGV2ZW50LndoaWNoID09IG51bGwgKSB7XG5cdFx0XHRcdFx0ZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0bW91c2VIb29rczoge1xuXHRcdFx0cHJvcHM6ICggXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIFwiICtcblx0XHRcdFx0XCJzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIgKS5zcGxpdCggXCIgXCIgKSxcblx0XHRcdGZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHtcblx0XHRcdFx0dmFyIGV2ZW50RG9jLCBkb2MsIGJvZHksXG5cdFx0XHRcdFx0YnV0dG9uID0gb3JpZ2luYWwuYnV0dG9uO1xuXHRcblx0XHRcdFx0Ly8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuXHRcdFx0XHRpZiAoIGV2ZW50LnBhZ2VYID09IG51bGwgJiYgb3JpZ2luYWwuY2xpZW50WCAhPSBudWxsICkge1xuXHRcdFx0XHRcdGV2ZW50RG9jID0gZXZlbnQudGFyZ2V0Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG5cdFx0XHRcdFx0ZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0XHRcdGJvZHkgPSBldmVudERvYy5ib2R5O1xuXHRcblx0XHRcdFx0XHRldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggK1xuXHRcdFx0XHRcdFx0KCBkb2MgJiYgZG9jLnNjcm9sbExlZnQgfHwgYm9keSAmJiBib2R5LnNjcm9sbExlZnQgfHwgMCApIC1cblx0XHRcdFx0XHRcdCggZG9jICYmIGRvYy5jbGllbnRMZWZ0IHx8IGJvZHkgJiYgYm9keS5jbGllbnRMZWZ0IHx8IDAgKTtcblx0XHRcdFx0XHRldmVudC5wYWdlWSA9IG9yaWdpbmFsLmNsaWVudFkgK1xuXHRcdFx0XHRcdFx0KCBkb2MgJiYgZG9jLnNjcm9sbFRvcCAgfHwgYm9keSAmJiBib2R5LnNjcm9sbFRvcCAgfHwgMCApIC1cblx0XHRcdFx0XHRcdCggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdFx0XHQvLyBOb3RlOiBidXR0b24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIGRvbid0IHVzZSBpdFxuXHRcdFx0XHRpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBldmVudDtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRmaXg6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGlmICggZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gKSB7XG5cdFx0XHRcdHJldHVybiBldmVudDtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcblx0XHRcdHZhciBpLCBwcm9wLCBjb3B5LFxuXHRcdFx0XHR0eXBlID0gZXZlbnQudHlwZSxcblx0XHRcdFx0b3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuXHRcdFx0XHRmaXhIb29rID0gdGhpcy5maXhIb29rc1sgdHlwZSBdO1xuXHRcblx0XHRcdGlmICggIWZpeEhvb2sgKSB7XG5cdFx0XHRcdHRoaXMuZml4SG9va3NbIHR5cGUgXSA9IGZpeEhvb2sgPVxuXHRcdFx0XHRcdHJtb3VzZUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMubW91c2VIb29rcyA6XG5cdFx0XHRcdFx0cmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuXHRcdFx0XHRcdHt9O1xuXHRcdFx0fVxuXHRcdFx0Y29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblx0XG5cdFx0XHRldmVudCA9IG5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTtcblx0XG5cdFx0XHRpID0gY29weS5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0cHJvcCA9IGNvcHlbIGkgXTtcblx0XHRcdFx0ZXZlbnRbIHByb3AgXSA9IG9yaWdpbmFsRXZlbnRbIHByb3AgXTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTdXBwb3J0OiBDb3Jkb3ZhIDIuNSAoV2ViS2l0KSAoIzEzMjU1KVxuXHRcdFx0Ly8gQWxsIGV2ZW50cyBzaG91bGQgaGF2ZSBhIHRhcmdldDsgQ29yZG92YSBkZXZpY2VyZWFkeSBkb2Vzbid0XG5cdFx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRcdGV2ZW50LnRhcmdldCA9IGRvY3VtZW50O1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA2LjArLCBDaHJvbWU8Mjhcblx0XHRcdC8vIFRhcmdldCBzaG91bGQgbm90IGJlIGEgdGV4dCBub2RlICgjNTA0LCAjMTMxNDMpXG5cdFx0XHRpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcblx0XHRcdFx0ZXZlbnQudGFyZ2V0ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoIGV2ZW50LCBvcmlnaW5hbEV2ZW50ICkgOiBldmVudDtcblx0XHR9LFxuXHRcblx0XHRzcGVjaWFsOiB7XG5cdFx0XHRsb2FkOiB7XG5cdFxuXHRcdFx0XHQvLyBQcmV2ZW50IHRyaWdnZXJlZCBpbWFnZS5sb2FkIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHRvIHdpbmRvdy5sb2FkXG5cdFx0XHRcdG5vQnViYmxlOiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0Zm9jdXM6IHtcblx0XG5cdFx0XHRcdC8vIEZpcmUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdFxuXHRcdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMgIT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5mb2N1cyApIHtcblx0XHRcdFx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHRcdH0sXG5cdFx0XHRibHVyOiB7XG5cdFx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcyA9PT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmJsdXIgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0XHR9LFxuXHRcdFx0Y2xpY2s6IHtcblx0XG5cdFx0XHRcdC8vIEZvciBjaGVja2JveCwgZmlyZSBuYXRpdmUgZXZlbnQgc28gY2hlY2tlZCBzdGF0ZSB3aWxsIGJlIHJpZ2h0XG5cdFx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy50eXBlID09PSBcImNoZWNrYm94XCIgJiYgdGhpcy5jbGljayAmJiBqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdFx0dGhpcy5jbGljaygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdC8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rc1xuXHRcdFx0XHRfZGVmYXVsdDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XG5cdFx0XHRiZWZvcmV1bmxvYWQ6IHtcblx0XHRcdFx0cG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggMjArXG5cdFx0XHRcdFx0Ly8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LlxuXHRcdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSBldmVudC5yZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRcblx0alF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblx0XG5cdFx0Ly8gVGhpcyBcImlmXCIgaXMgbmVlZGVkIGZvciBwbGFpbiBvYmplY3RzXG5cdFx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSApO1xuXHRcdH1cblx0fTtcblx0XG5cdGpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXHRcblx0XHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0XHRpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQgKSApIHtcblx0XHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdFx0fVxuXHRcblx0XHQvLyBFdmVudCBvYmplY3Rcblx0XHRpZiAoIHNyYyAmJiBzcmMudHlwZSApIHtcblx0XHRcdHRoaXMub3JpZ2luYWxFdmVudCA9IHNyYztcblx0XHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXHRcblx0XHRcdC8vIEV2ZW50cyBidWJibGluZyB1cCB0aGUgZG9jdW1lbnQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcHJldmVudGVkXG5cdFx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHxcblx0XHRcdFx0XHRzcmMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdW5kZWZpbmVkICYmXG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdFx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRcdHJldHVyblRydWUgOlxuXHRcdFx0XHRyZXR1cm5GYWxzZTtcblx0XG5cdFx0Ly8gRXZlbnQgdHlwZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdFx0fVxuXHRcblx0XHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRcdGlmICggcHJvcHMgKSB7XG5cdFx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApO1xuXHRcdH1cblx0XG5cdFx0Ly8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmVcblx0XHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblx0XG5cdFx0Ly8gTWFyayBpdCBhcyBmaXhlZFxuXHRcdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xuXHR9O1xuXHRcblx0Ly8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMDMwMzMxL2VjbWEtc2NyaXB0LWJpbmRpbmcuaHRtbFxuXHRqUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuXHRcdGNvbnN0cnVjdG9yOiBqUXVlcnkuRXZlbnQsXG5cdFx0aXNEZWZhdWx0UHJldmVudGVkOiByZXR1cm5GYWxzZSxcblx0XHRpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdFx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRcdGlzU2ltdWxhdGVkOiBmYWxzZSxcblx0XG5cdFx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cdFxuXHRcdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuXHRcblx0XHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXHRcblx0XHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXHRcblx0XHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblx0XG5cdFx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblx0XG5cdFx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH07XG5cdFxuXHQvLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3Ncblx0Ly8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS5cblx0Ly8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXRcblx0Ly9cblx0Ly8gU3VwcG9ydDogU2FmYXJpIDcgb25seVxuXHQvLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZTpcblx0Ly8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ3MDI1OFxuXHQvLyBmb3IgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBidWcgKGl0IGV4aXN0ZWQgaW4gb2xkZXIgQ2hyb21lIHZlcnNpb25zIGFzIHdlbGwpLlxuXHRqUXVlcnkuZWFjaCgge1xuXHRcdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdFx0bW91c2VsZWF2ZTogXCJtb3VzZW91dFwiLFxuXHRcdHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLFxuXHRcdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcblx0fSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblx0XHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0ge1xuXHRcdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0XHRiaW5kVHlwZTogZml4LFxuXHRcblx0XHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHR2YXIgcmV0LFxuXHRcdFx0XHRcdHRhcmdldCA9IHRoaXMsXG5cdFx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdFx0aGFuZGxlT2JqID0gZXZlbnQuaGFuZGxlT2JqO1xuXHRcblx0XHRcdFx0Ly8gRm9yIG1vdXNlZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC5cblx0XHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdFx0aWYgKCAhcmVsYXRlZCB8fCAoIHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSApICkge1xuXHRcdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdFx0cmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdGV2ZW50LnR5cGUgPSBmaXg7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHR9O1xuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0b246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdFx0fSxcblx0XHRvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG5cdFx0fSxcblx0XHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdFx0dmFyIGhhbmRsZU9iaiwgdHlwZTtcblx0XHRcdGlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkge1xuXHRcblx0XHRcdFx0Ly8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudFxuXHRcdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRcdGpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoXG5cdFx0XHRcdFx0aGFuZGxlT2JqLm5hbWVzcGFjZSA/XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUgKyBcIi5cIiArIGhhbmRsZU9iai5uYW1lc3BhY2UgOlxuXHRcdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRcdGhhbmRsZU9iai5zZWxlY3Rvcixcblx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlclxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0XHR0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcblx0XHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHR2YXJcblx0XHRyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Oi1dKylbXj5dKilcXC8+L2dpLFxuXHRcblx0XHQvLyBTdXBwb3J0OiBJRSAxMC0xMSwgRWRnZSAxMDI0MCtcblx0XHQvLyBJbiBJRS9FZGdlIHVzaW5nIHJlZ2V4IGdyb3VwcyBoZXJlIGNhdXNlcyBzZXZlcmUgc2xvd2Rvd25zLlxuXHRcdC8vIFNlZSBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzE3MzY1MTIvXG5cdFx0cm5vSW5uZXJodG1sID0gLzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksXG5cdFxuXHRcdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRcdHJjaGVja2VkID0gL2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxcblx0XHRyc2NyaXB0VHlwZU1hc2tlZCA9IC9edHJ1ZVxcLyguKikvLFxuXHRcdHJjbGVhblNjcmlwdCA9IC9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZztcblx0XG5cdC8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keVxuXHRmdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgXCJ0YWJsZVwiICkgJiZcblx0XHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cdFxuXHRcdFx0ZWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJ0Ym9keVwiIClbIDAgXSB8fFxuXHRcdFx0XHRlbGVtLmFwcGVuZENoaWxkKCBlbGVtLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJ0Ym9keVwiICkgKSA6XG5cdFx0XHRlbGVtO1xuXHR9XG5cdFxuXHQvLyBSZXBsYWNlL3Jlc3RvcmUgdGhlIHR5cGUgYXR0cmlidXRlIG9mIHNjcmlwdCBlbGVtZW50cyBmb3Igc2FmZSBET00gbWFuaXB1bGF0aW9uXG5cdGZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7XG5cdFx0ZWxlbS50eXBlID0gKCBlbGVtLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSAhPT0gbnVsbCApICsgXCIvXCIgKyBlbGVtLnR5cGU7XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblx0ZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcblx0XHR2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTtcblx0XG5cdFx0aWYgKCBtYXRjaCApIHtcblx0XHRcdGVsZW0udHlwZSA9IG1hdGNoWyAxIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBcInR5cGVcIiApO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7XG5cdFx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cdFxuXHRcdGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdFx0aWYgKCBkYXRhUHJpdi5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHRcdHBkYXRhT2xkID0gZGF0YVByaXYuYWNjZXNzKCBzcmMgKTtcblx0XHRcdHBkYXRhQ3VyID0gZGF0YVByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdFx0ZXZlbnRzID0gcGRhdGFPbGQuZXZlbnRzO1xuXHRcblx0XHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0XHRkZWxldGUgcGRhdGFDdXIuaGFuZGxlO1xuXHRcdFx0XHRwZGF0YUN1ci5ldmVudHMgPSB7fTtcblx0XG5cdFx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0XHRpZiAoIGRhdGFVc2VyLmhhc0RhdGEoIHNyYyApICkge1xuXHRcdFx0dWRhdGFPbGQgPSBkYXRhVXNlci5hY2Nlc3MoIHNyYyApO1xuXHRcdFx0dWRhdGFDdXIgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgdWRhdGFPbGQgKTtcblx0XG5cdFx0XHRkYXRhVXNlci5zZXQoIGRlc3QsIHVkYXRhQ3VyICk7XG5cdFx0fVxuXHR9XG5cdFxuXHQvLyBGaXggSUUgYnVncywgc2VlIHN1cHBvcnQgdGVzdHNcblx0ZnVuY3Rpb24gZml4SW5wdXQoIHNyYywgZGVzdCApIHtcblx0XHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFxuXHRcdC8vIEZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3ggb3IgcmFkaW8gYnV0dG9uLlxuXHRcdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdFx0ZGVzdC5jaGVja2VkID0gc3JjLmNoZWNrZWQ7XG5cdFxuXHRcdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdFx0fSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiB8fCBub2RlTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiICkge1xuXHRcdFx0ZGVzdC5kZWZhdWx0VmFsdWUgPSBzcmMuZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZG9tTWFuaXAoIGNvbGxlY3Rpb24sIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICkge1xuXHRcblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblx0XG5cdFx0dmFyIGZyYWdtZW50LCBmaXJzdCwgc2NyaXB0cywgaGFzU2NyaXB0cywgbm9kZSwgZG9jLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gY29sbGVjdGlvbi5sZW5ndGgsXG5cdFx0XHRpTm9DbG9uZSA9IGwgLSAxLFxuXHRcdFx0dmFsdWUgPSBhcmdzWyAwIF0sXG5cdFx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cdFxuXHRcdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRcdGlmICggaXNGdW5jdGlvbiB8fFxuXHRcdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdFx0cmV0dXJuIGNvbGxlY3Rpb24uZWFjaCggZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdFx0XHR2YXIgc2VsZiA9IGNvbGxlY3Rpb24uZXEoIGluZGV4ICk7XG5cdFx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0XHRhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkb21NYW5pcCggc2VsZiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cdFxuXHRcdGlmICggbCApIHtcblx0XHRcdGZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7XG5cdFx0XHRmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cdFxuXHRcdFx0aWYgKCBmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdFx0ZnJhZ21lbnQgPSBmaXJzdDtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBSZXF1aXJlIGVpdGhlciBuZXcgY29udGVudCBvciBhbiBpbnRlcmVzdCBpbiBpZ25vcmVkIGVsZW1lbnRzIHRvIGludm9rZSB0aGUgY2FsbGJhY2tcblx0XHRcdGlmICggZmlyc3QgfHwgaWdub3JlZCApIHtcblx0XHRcdFx0c2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsIFwic2NyaXB0XCIgKSwgZGlzYWJsZVNjcmlwdCApO1xuXHRcdFx0XHRoYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7XG5cdFxuXHRcdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtXG5cdFx0XHRcdC8vIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXHRcblx0XHRcdFx0XHRpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IGpRdWVyeS5jbG9uZSggbm9kZSwgdHJ1ZSwgdHJ1ZSApO1xuXHRcblx0XHRcdFx0XHRcdC8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb25cblx0XHRcdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xLCBQaGFudG9tSlM8MlxuXHRcdFx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFx0XHRcdFx0ZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDtcblx0XG5cdFx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblx0XG5cdFx0XHRcdFx0Ly8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvblxuXHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgaGFzU2NyaXB0czsgaSsrICkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IHNjcmlwdHNbIGkgXTtcblx0XHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8IFwiXCIgKSAmJlxuXHRcdFx0XHRcdFx0XHQhZGF0YVByaXYuYWNjZXNzKCBub2RlLCBcImdsb2JhbEV2YWxcIiApICYmXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jb250YWlucyggZG9jLCBub2RlICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBPcHRpb25hbCBBSkFYIGRlcGVuZGVuY3ksIGJ1dCB3b24ndCBydW4gc2NyaXB0cyBpZiBub3QgcHJlc2VudFxuXHRcdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5Ll9ldmFsVXJsICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0alF1ZXJ5Ll9ldmFsVXJsKCBub2RlLnNyYyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKCByY2xlYW5TY3JpcHQsIFwiXCIgKSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gY29sbGVjdGlvbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7XG5cdFx0dmFyIG5vZGUsXG5cdFx0XHRub2RlcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIGVsZW0gKSA6IGVsZW0sXG5cdFx0XHRpID0gMDtcblx0XG5cdFx0Zm9yICggOyAoIG5vZGUgPSBub2Rlc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCAha2VlcERhdGEgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBub2RlICkgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIG5vZGUucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIG5vZGUub3duZXJEb2N1bWVudCwgbm9kZSApICkge1xuXHRcdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXHRcblx0alF1ZXJ5LmV4dGVuZCgge1xuXHRcdGh0bWxQcmVmaWx0ZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdFx0cmV0dXJuIGh0bWwucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cdFx0fSxcblx0XG5cdFx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdHZhciBpLCBsLCBzcmNFbGVtZW50cywgZGVzdEVsZW1lbnRzLFxuXHRcdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRcdGluUGFnZSA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cdFxuXHRcdFx0Ly8gRml4IElFIGNsb25pbmcgaXNzdWVzXG5cdFx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdFx0IWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXHRcblx0XHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcblx0XHRcdFx0ZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSApO1xuXHRcdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXHRcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lXG5cdFx0XHRpZiAoIGRhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdFx0c3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTtcblx0XHRcdFx0XHRkZXN0RWxlbWVudHMgPSBkZXN0RWxlbWVudHMgfHwgZ2V0QWxsKCBjbG9uZSApO1xuXHRcblx0XHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRcdGNsb25lQ29weUV2ZW50KCBzcmNFbGVtZW50c1sgaSBdLCBkZXN0RWxlbWVudHNbIGkgXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjbG9uZUNvcHlFdmVudCggZWxlbSwgY2xvbmUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsIFwic2NyaXB0XCIgKTtcblx0XHRcdGlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdFx0cmV0dXJuIGNsb25lO1xuXHRcdH0sXG5cdFxuXHRcdGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsXG5cdFx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdFx0aSA9IDA7XG5cdFxuXHRcdFx0Zm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRpZiAoICggZGF0YSA9IGVsZW1bIGRhdGFQcml2LmV4cGFuZG8gXSApICkge1xuXHRcdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9IDM1LTQ1K1xuXHRcdFx0XHRcdFx0Ly8gQXNzaWduIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHVzaW5nIGRlbGV0ZSwgc2VlIERhdGEjcmVtb3ZlXG5cdFx0XHRcdFx0XHRlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PSAzNS00NStcblx0XHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdFx0ZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcblx0XHQvLyBLZWVwIGRvbU1hbmlwIGV4cG9zZWQgdW50aWwgMy4wIChnaC0yMjI1KVxuXHRcdGRvbU1hbmlwOiBkb21NYW5pcCxcblx0XG5cdFx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdH0sXG5cdFxuXHRcdHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0XHR9LFxuXHRcblx0XHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdFx0fSxcblx0XG5cdFx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0YWZ0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzLm5leHRTaWJsaW5nICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9LFxuXHRcblx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0aSA9IDA7XG5cdFxuXHRcdFx0Zm9yICggOyAoIGVsZW0gPSB0aGlzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblx0XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIGFueSByZW1haW5pbmcgbm9kZXNcblx0XHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFxuXHRcdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRkYXRhQW5kRXZlbnRzID0gZGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZmFsc2UgOiBkYXRhQW5kRXZlbnRzO1xuXHRcdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXHRcblx0XHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0aHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0XHRpID0gMCxcblx0XHRcdFx0XHRsID0gdGhpcy5sZW5ndGg7XG5cdFxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5pbm5lckhUTUw7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFNlZSBpZiB3ZSBjYW4gdGFrZSBhIHNob3J0Y3V0IGFuZCBqdXN0IHVzZSBpbm5lckhUTUxcblx0XHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdFx0IXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKSBdICkge1xuXHRcblx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXHRcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdIHx8IHt9O1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblx0XHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0ZWxlbSA9IDA7XG5cdFxuXHRcdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHRcdHRoaXMuZW1wdHkoKS5hcHBlbmQoIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdFx0fSxcblx0XG5cdFx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGlnbm9yZWQgPSBbXTtcblx0XG5cdFx0XHQvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBub24taWdub3JlZCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnRcblx0XHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblx0XG5cdFx0XHRcdGlmICggalF1ZXJ5LmluQXJyYXkoIHRoaXMsIGlnbm9yZWQgKSA8IDAgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblx0XHRcdFx0XHRcdHBhcmVudC5yZXBsYWNlQ2hpbGQoIGVsZW0sIHRoaXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0XHR9LCBpZ25vcmVkICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZWFjaCgge1xuXHRcdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRcdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdFx0aW5zZXJ0QmVmb3JlOiBcImJlZm9yZVwiLFxuXHRcdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdFx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG5cdH0sIGZ1bmN0aW9uKCBuYW1lLCBvcmlnaW5hbCApIHtcblx0XHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHZhciBlbGVtcyxcblx0XHRcdFx0cmV0ID0gW10sXG5cdFx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0XHRpID0gMDtcblx0XG5cdFx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0XHRlbGVtcyA9IGkgPT09IGxhc3QgPyB0aGlzIDogdGhpcy5jbG9uZSggdHJ1ZSApO1xuXHRcdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdFxuXHRcdFx0XHQvLyAuZ2V0KCkgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRcdHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuXHRcdH07XG5cdH0gKTtcblx0XG5cdFxuXHR2YXIgaWZyYW1lLFxuXHRcdGVsZW1kaXNwbGF5ID0ge1xuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3hcblx0XHRcdC8vIFdlIGhhdmUgdG8gcHJlLWRlZmluZSB0aGVzZSB2YWx1ZXMgZm9yIEZGICgjMTAyMjcpXG5cdFx0XHRIVE1MOiBcImJsb2NrXCIsXG5cdFx0XHRCT0RZOiBcImJsb2NrXCJcblx0XHR9O1xuXHRcblx0LyoqXG5cdCAqIFJldHJpZXZlIHRoZSBhY3R1YWwgZGlzcGxheSBvZiBhIGVsZW1lbnRcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbm9kZU5hbWUgb2YgdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3Rcblx0ICovXG5cdFxuXHQvLyBDYWxsZWQgb25seSBmcm9tIHdpdGhpbiBkZWZhdWx0RGlzcGxheVxuXHRmdW5jdGlvbiBhY3R1YWxEaXNwbGF5KCBuYW1lLCBkb2MgKSB7XG5cdFx0dmFyIGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcblx0XG5cdFx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbVsgMCBdLCBcImRpc3BsYXlcIiApO1xuXHRcblx0XHQvLyBXZSBkb24ndCBoYXZlIGFueSBkYXRhIHN0b3JlZCBvbiB0aGUgZWxlbWVudCxcblx0XHQvLyBzbyB1c2UgXCJkZXRhY2hcIiBtZXRob2QgYXMgZmFzdCB3YXkgdG8gZ2V0IHJpZCBvZiB0aGUgZWxlbWVudFxuXHRcdGVsZW0uZGV0YWNoKCk7XG5cdFxuXHRcdHJldHVybiBkaXNwbGF5O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJ5IHRvIGRldGVybWluZSB0aGUgZGVmYXVsdCBkaXNwbGF5IHZhbHVlIG9mIGFuIGVsZW1lbnRcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWZhdWx0RGlzcGxheSggbm9kZU5hbWUgKSB7XG5cdFx0dmFyIGRvYyA9IGRvY3VtZW50LFxuXHRcdFx0ZGlzcGxheSA9IGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdO1xuXHRcblx0XHRpZiAoICFkaXNwbGF5ICkge1xuXHRcdFx0ZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTtcblx0XG5cdFx0XHQvLyBJZiB0aGUgc2ltcGxlIHdheSBmYWlscywgcmVhZCBmcm9tIGluc2lkZSBhbiBpZnJhbWVcblx0XHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgfHwgIWRpc3BsYXkgKSB7XG5cdFxuXHRcdFx0XHQvLyBVc2UgdGhlIGFscmVhZHktY3JlYXRlZCBpZnJhbWUgaWYgcG9zc2libGVcblx0XHRcdFx0aWZyYW1lID0gKCBpZnJhbWUgfHwgalF1ZXJ5KCBcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIiApIClcblx0XHRcdFx0XHQuYXBwZW5kVG8oIGRvYy5kb2N1bWVudEVsZW1lbnQgKTtcblx0XG5cdFx0XHRcdC8vIEFsd2F5cyB3cml0ZSBhIG5ldyBIVE1MIHNrZWxldG9uIHNvIFdlYmtpdCBhbmQgRmlyZWZveCBkb24ndCBjaG9rZSBvbiByZXVzZVxuXHRcdFx0XHRkb2MgPSBpZnJhbWVbIDAgXS5jb250ZW50RG9jdW1lbnQ7XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRVxuXHRcdFx0XHRkb2Mud3JpdGUoKTtcblx0XHRcdFx0ZG9jLmNsb3NlKCk7XG5cdFxuXHRcdFx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXHRcdFx0XHRpZnJhbWUuZGV0YWNoKCk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5XG5cdFx0XHRlbGVtZGlzcGxheVsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gZGlzcGxheTtcblx0fVxuXHR2YXIgcm1hcmdpbiA9ICggL15tYXJnaW4vICk7XG5cdFxuXHR2YXIgcm51bW5vbnB4ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiICk7XG5cdFxuXHR2YXIgZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFxuXHRcdFx0Ly8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MClcblx0XHRcdC8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwc1xuXHRcdFx0Ly8gRkYgbWVhbndoaWxlIHRocm93cyBvbiBmcmFtZSBlbGVtZW50cyB0aHJvdWdoIFwiZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZVwiXG5cdFx0XHR2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldztcblx0XG5cdFx0XHRpZiAoICF2aWV3IHx8ICF2aWV3Lm9wZW5lciApIHtcblx0XHRcdFx0dmlldyA9IHdpbmRvdztcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG5cdFx0fTtcblx0XG5cdHZhciBzd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzICkge1xuXHRcdHZhciByZXQsIG5hbWUsXG5cdFx0XHRvbGQgPSB7fTtcblx0XG5cdFx0Ly8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG5cdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0b2xkWyBuYW1lIF0gPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07XG5cdFx0fVxuXHRcblx0XHRyZXQgPSBjYWxsYmFjay5hcHBseSggZWxlbSwgYXJncyB8fCBbXSApO1xuXHRcblx0XHQvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXNcblx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHRcblx0dmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0XG5cdFxuXHRcblx0KCBmdW5jdGlvbigpIHtcblx0XHR2YXIgcGl4ZWxQb3NpdGlvblZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsIHBpeGVsTWFyZ2luUmlnaHRWYWwsIHJlbGlhYmxlTWFyZ2luTGVmdFZhbCxcblx0XHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblx0XG5cdFx0Ly8gRmluaXNoIGVhcmx5IGluIGxpbWl0ZWQgKG5vbi1icm93c2VyKSBlbnZpcm9ubWVudHNcblx0XHRpZiAoICFkaXYuc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdFx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRcdGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiY29udGVudC1ib3hcIjtcblx0XHRkaXYuY2xvbmVOb2RlKCB0cnVlICkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiO1xuXHRcdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cdFxuXHRcdGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O1wiICtcblx0XHRcdFwicGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlXCI7XG5cdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKCBkaXYgKTtcblx0XG5cdFx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdFx0Ly8gc28gdGhleSdyZSBleGVjdXRlZCBhdCB0aGUgc2FtZSB0aW1lIHRvIHNhdmUgdGhlIHNlY29uZCBjb21wdXRhdGlvbi5cblx0XHRmdW5jdGlvbiBjb21wdXRlU3R5bGVUZXN0cygpIHtcblx0XHRcdGRpdi5zdHlsZS5jc3NUZXh0ID1cblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XHRcIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcdFwicG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztcIiArXG5cdFx0XHRcdFwibWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDtcIiArXG5cdFx0XHRcdFwidG9wOjElO3dpZHRoOjUwJVwiO1xuXHRcdFx0ZGl2LmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHRkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXHRcblx0XHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYgKTtcblx0XHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblx0XHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IGRpdlN0eWxlLm1hcmdpbkxlZnQgPT09IFwiMnB4XCI7XG5cdFx0XHRib3hTaXppbmdSZWxpYWJsZVZhbCA9IGRpdlN0eWxlLndpZHRoID09PSBcIjRweFwiO1xuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHlcblx0XHRcdC8vIFNvbWUgc3R5bGVzIGNvbWUgYmFjayB3aXRoIHBlcmNlbnRhZ2UgdmFsdWVzLCBldmVuIHRob3VnaCB0aGV5IHNob3VsZG4ndFxuXHRcdFx0ZGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCI1MCVcIjtcblx0XHRcdHBpeGVsTWFyZ2luUmlnaHRWYWwgPSBkaXZTdHlsZS5tYXJnaW5SaWdodCA9PT0gXCI0cHhcIjtcblx0XG5cdFx0XHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHRcdH1cblx0XG5cdFx0alF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwge1xuXHRcdFx0cGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHQvLyBUaGlzIHRlc3QgaXMgZXhlY3V0ZWQgb25seSBvbmNlIGJ1dCB3ZSBzdGlsbCBkbyBtZW1vaXppbmdcblx0XHRcdFx0Ly8gc2luY2Ugd2UgY2FuIHVzZSB0aGUgYm94U2l6aW5nUmVsaWFibGUgcHJlLWNvbXB1dGluZy5cblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBjaGVjayBpZiB0aGUgdGVzdCB3YXMgYWxyZWFkeSBwZXJmb3JtZWQsIHRob3VnaC5cblx0XHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdFx0cmV0dXJuIHBpeGVsUG9zaXRpb25WYWw7XG5cdFx0XHR9LFxuXHRcdFx0Ym94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGJveFNpemluZ1JlbGlhYmxlVmFsID09IG51bGwgKSB7XG5cdFx0XHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7XG5cdFx0XHR9LFxuXHRcdFx0cGl4ZWxNYXJnaW5SaWdodDogZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMC00LjNcblx0XHRcdFx0Ly8gV2UncmUgY2hlY2tpbmcgZm9yIGJveFNpemluZ1JlbGlhYmxlVmFsIGhlcmUgaW5zdGVhZCBvZiBwaXhlbE1hcmdpblJpZ2h0VmFsXG5cdFx0XHRcdC8vIHNpbmNlIHRoYXQgY29tcHJlc3NlcyBiZXR0ZXIgYW5kIHRoZXkncmUgY29tcHV0ZWQgdG9nZXRoZXIgYW55d2F5LlxuXHRcdFx0XHRpZiAoIGJveFNpemluZ1JlbGlhYmxlVmFsID09IG51bGwgKSB7XG5cdFx0XHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcGl4ZWxNYXJnaW5SaWdodFZhbDtcblx0XHRcdH0sXG5cdFx0XHRyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IG9ubHksIEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gMzdcblx0XHRcdFx0aWYgKCBib3hTaXppbmdSZWxpYWJsZVZhbCA9PSBudWxsICkge1xuXHRcdFx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlbGlhYmxlTWFyZ2luTGVmdFZhbDtcblx0XHRcdH0sXG5cdFx0XHRyZWxpYWJsZU1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIENoZWNrIGlmIGRpdiB3aXRoIGV4cGxpY2l0IHdpZHRoIGFuZCBubyBtYXJnaW4tcmlnaHQgaW5jb3JyZWN0bHlcblx0XHRcdFx0Ly8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG5cdFx0XHRcdC8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodFxuXHRcdFx0XHQvLyBUaGlzIHN1cHBvcnQgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbmNlIHNvIG5vIG1lbW9pemluZyBpcyBuZWVkZWQuXG5cdFx0XHRcdHZhciByZXQsXG5cdFx0XHRcdFx0bWFyZ2luRGl2ID0gZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblx0XG5cdFx0XHRcdC8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXI7IHBhZGRpbmdcblx0XHRcdFx0bWFyZ2luRGl2LnN0eWxlLmNzc1RleHQgPSBkaXYuc3R5bGUuY3NzVGV4dCA9XG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtcIiArXG5cdFx0XHRcdFx0XCJkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiO1xuXHRcdFx0XHRtYXJnaW5EaXYuc3R5bGUubWFyZ2luUmlnaHQgPSBtYXJnaW5EaXYuc3R5bGUud2lkdGggPSBcIjBcIjtcblx0XHRcdFx0ZGl2LnN0eWxlLndpZHRoID0gXCIxcHhcIjtcblx0XHRcdFx0ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblx0XG5cdFx0XHRcdHJldCA9ICFwYXJzZUZsb2F0KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggbWFyZ2luRGl2ICkubWFyZ2luUmlnaHQgKTtcblx0XG5cdFx0XHRcdGRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG5cdFx0XHRcdGRpdi5yZW1vdmVDaGlsZCggbWFyZ2luRGl2ICk7XG5cdFxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSApKCk7XG5cdFxuXHRcblx0ZnVuY3Rpb24gY3VyQ1NTKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHtcblx0XHR2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuXHRcdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXHRcblx0XHRjb21wdXRlZCA9IGNvbXB1dGVkIHx8IGdldFN0eWxlcyggZWxlbSApO1xuXHRcdHJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF0gOiB1bmRlZmluZWQ7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IE9wZXJhIDEyLjF4IG9ubHlcblx0XHQvLyBGYWxsIGJhY2sgdG8gc3R5bGUgZXZlbiB3aXRob3V0IGNvbXB1dGVkXG5cdFx0Ly8gY29tcHV0ZWQgaXMgdW5kZWZpbmVkIGZvciBlbGVtcyBvbiBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRpZiAoICggcmV0ID09PSBcIlwiIHx8IHJldCA9PT0gdW5kZWZpbmVkICkgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdC8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpICgjMTI1MzcpXG5cdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XG5cdFx0XHQvLyBBIHRyaWJ1dGUgdG8gdGhlIFwiYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkc1wiXG5cdFx0XHQvLyBBbmRyb2lkIEJyb3dzZXIgcmV0dXJucyBwZXJjZW50YWdlIGZvciBzb21lIHZhbHVlcyxcblx0XHRcdC8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMuXG5cdFx0XHQvLyBUaGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6XG5cdFx0XHQvLyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzXG5cdFx0XHRpZiAoICFzdXBwb3J0LnBpeGVsTWFyZ2luUmlnaHQoKSAmJiBybnVtbm9ucHgudGVzdCggcmV0ICkgJiYgcm1hcmdpbi50ZXN0KCBuYW1lICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHRcdHdpZHRoID0gc3R5bGUud2lkdGg7XG5cdFx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRcdG1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7XG5cdFxuXHRcdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRcdHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcblx0XHRcdFx0cmV0ID0gY29tcHV0ZWQud2lkdGg7XG5cdFxuXHRcdFx0XHQvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzXG5cdFx0XHRcdHN0eWxlLndpZHRoID0gd2lkdGg7XG5cdFx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRcdHN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gcmV0ICE9PSB1bmRlZmluZWQgP1xuXHRcblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHRcdC8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuXG5cdFx0XHRyZXQgKyBcIlwiIDpcblx0XHRcdHJldDtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHtcblx0XG5cdFx0Ly8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC5cblx0XHRyZXR1cm4ge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjb25kaXRpb25GbigpICkge1xuXHRcblx0XHRcdFx0XHQvLyBIb29rIG5vdCBuZWVkZWQgKG9yIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBpdCBkdWVcblx0XHRcdFx0XHQvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuXG5cdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gSG9vayBuZWVkZWQ7IHJlZGVmaW5lIGl0IHNvIHRoYXQgdGhlIHN1cHBvcnQgdGVzdCBpcyBub3QgZXhlY3V0ZWQgYWdhaW4uXG5cdFx0XHRcdHJldHVybiAoIHRoaXMuZ2V0ID0gaG9va0ZuICkuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0XG5cdFxuXHR2YXJcblx0XG5cdFx0Ly8gU3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZVxuXHRcdC8vIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHRcdC8vIFNlZSBoZXJlIGZvciBkaXNwbGF5IHZhbHVlczogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9DU1MvZGlzcGxheVxuXHRcdHJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxcblx0XG5cdFx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdFx0Y3NzTm9ybWFsVHJhbnNmb3JtID0ge1xuXHRcdFx0bGV0dGVyU3BhY2luZzogXCIwXCIsXG5cdFx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdFx0fSxcblx0XG5cdFx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiT1wiLCBcIk1velwiLCBcIm1zXCIgXSxcblx0XHRlbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLnN0eWxlO1xuXHRcblx0Ly8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuXHRmdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHtcblx0XG5cdFx0Ly8gU2hvcnRjdXQgZm9yIG5hbWVzIHRoYXQgYXJlIG5vdCB2ZW5kb3IgcHJlZml4ZWRcblx0XHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0XG5cdFx0Ly8gQ2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lc1xuXHRcdHZhciBjYXBOYW1lID0gbmFtZVsgMCBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKCAxICksXG5cdFx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXHRcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRcdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdFx0XHRyZXR1cm4gbmFtZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cdFxuXHRcdC8vIEFueSByZWxhdGl2ZSAoKy8tKSB2YWx1ZXMgaGF2ZSBhbHJlYWR5IGJlZW5cblx0XHQvLyBub3JtYWxpemVkIGF0IHRoaXMgcG9pbnRcblx0XHR2YXIgbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKTtcblx0XHRyZXR1cm4gbWF0Y2hlcyA/XG5cdFxuXHRcdFx0Ly8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgXCJzdWJ0cmFjdFwiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3Ncblx0XHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAyIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgOlxuXHRcdFx0dmFsdWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSwgaXNCb3JkZXJCb3gsIHN0eWxlcyApIHtcblx0XHR2YXIgaSA9IGV4dHJhID09PSAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICkgP1xuXHRcblx0XHRcdC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmlnaHQgbWVhc3VyZW1lbnQsIGF2b2lkIGF1Z21lbnRhdGlvblxuXHRcdFx0NCA6XG5cdFxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdFx0bmFtZSA9PT0gXCJ3aWR0aFwiID8gMSA6IDAsXG5cdFxuXHRcdFx0dmFsID0gMDtcblx0XG5cdFx0Zm9yICggOyBpIDwgNDsgaSArPSAyICkge1xuXHRcblx0XHRcdC8vIEJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpbiwgc28gYWRkIGl0IGlmIHdlIHdhbnQgaXRcblx0XHRcdGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGlzQm9yZGVyQm94ICkge1xuXHRcblx0XHRcdFx0Ly8gYm9yZGVyLWJveCBpbmNsdWRlcyBwYWRkaW5nLCBzbyByZW1vdmUgaXQgaWYgd2Ugd2FudCBjb250ZW50XG5cdFx0XHRcdGlmICggZXh0cmEgPT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdFx0aWYgKCBleHRyYSAhPT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQsIHNvIGFkZCBwYWRkaW5nXG5cdFx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XG5cdFx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQgbm9yIHBhZGRpbmcsIHNvIGFkZCBib3JkZXJcblx0XHRcdFx0aWYgKCBleHRyYSAhPT0gXCJwYWRkaW5nXCIgKSB7XG5cdFx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHJldHVybiB2YWw7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICkge1xuXHRcblx0XHQvLyBTdGFydCB3aXRoIG9mZnNldCBwcm9wZXJ0eSwgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgYm9yZGVyLWJveCB2YWx1ZVxuXHRcdHZhciB2YWx1ZUlzQm9yZGVyQm94ID0gdHJ1ZSxcblx0XHRcdHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcblx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLFxuXHRcdFx0aXNCb3JkZXJCb3ggPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiO1xuXHRcblx0XHQvLyBTb21lIG5vbi1odG1sIGVsZW1lbnRzIHJldHVybiB1bmRlZmluZWQgZm9yIG9mZnNldFdpZHRoLCBzbyBjaGVjayBmb3IgbnVsbC91bmRlZmluZWRcblx0XHQvLyBzdmcgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02NDkyODVcblx0XHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0XHRpZiAoIHZhbCA8PSAwIHx8IHZhbCA9PSBudWxsICkge1xuXHRcblx0XHRcdC8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuY29tcHV0ZWQgY3NzIGlmIG5lY2Vzc2FyeVxuXHRcdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHRcdGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdFx0dmFsID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIENvbXB1dGVkIHVuaXQgaXMgbm90IHBpeGVscy4gU3RvcCBoZXJlIGFuZCByZXR1cm4uXG5cdFx0XHRpZiAoIHJudW1ub25weC50ZXN0KCB2YWwgKSApIHtcblx0XHRcdFx0cmV0dXJuIHZhbDtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDaGVjayBmb3Igc3R5bGUgaW4gY2FzZSBhIGJyb3dzZXIgd2hpY2ggcmV0dXJucyB1bnJlbGlhYmxlIHZhbHVlc1xuXHRcdFx0Ly8gZm9yIGdldENvbXB1dGVkU3R5bGUgc2lsZW50bHkgZmFsbHMgYmFjayB0byB0aGUgcmVsaWFibGUgZWxlbS5zdHlsZVxuXHRcdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmXG5cdFx0XHRcdCggc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgbmFtZSBdICk7XG5cdFxuXHRcdFx0Ly8gTm9ybWFsaXplIFwiXCIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXHRcdFx0dmFsID0gcGFyc2VGbG9hdCggdmFsICkgfHwgMDtcblx0XHR9XG5cdFxuXHRcdC8vIFVzZSB0aGUgYWN0aXZlIGJveC1zaXppbmcgbW9kZWwgdG8gYWRkL3N1YnRyYWN0IGlycmVsZXZhbnQgc3R5bGVzXG5cdFx0cmV0dXJuICggdmFsICtcblx0XHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHRcdHZhbHVlSXNCb3JkZXJCb3gsXG5cdFx0XHRcdHN0eWxlc1xuXHRcdFx0KVxuXHRcdCkgKyBcInB4XCI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHtcblx0XHR2YXIgZGlzcGxheSwgZWxlbSwgaGlkZGVuLFxuXHRcdFx0dmFsdWVzID0gW10sXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cdFxuXHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XG5cdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICk7XG5cdFx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdFx0aWYgKCBzaG93ICkge1xuXHRcblx0XHRcdFx0Ly8gUmVzZXQgdGhlIGlubGluZSBkaXNwbGF5IG9mIHRoaXMgZWxlbWVudCB0byBsZWFybiBpZiBpdCBpc1xuXHRcdFx0XHQvLyBiZWluZyBoaWRkZW4gYnkgY2FzY2FkZWQgcnVsZXMgb3Igbm90XG5cdFx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBTZXQgZWxlbWVudHMgd2hpY2ggaGF2ZSBiZWVuIG92ZXJyaWRkZW4gd2l0aCBkaXNwbGF5OiBub25lXG5cdFx0XHRcdC8vIGluIGEgc3R5bGVzaGVldCB0byB3aGF0ZXZlciB0aGUgZGVmYXVsdCBicm93c2VyIHN0eWxlIGlzXG5cdFx0XHRcdC8vIGZvciBzdWNoIGFuIGVsZW1lbnRcblx0XHRcdFx0aWYgKCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiYgaXNIaWRkZW4oIGVsZW0gKSApIHtcblx0XHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhUHJpdi5hY2Nlc3MoXG5cdFx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdFx0XCJvbGRkaXNwbGF5XCIsXG5cdFx0XHRcdFx0XHRkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGlkZGVuID0gaXNIaWRkZW4oIGVsZW0gKTtcblx0XG5cdFx0XHRcdGlmICggZGlzcGxheSAhPT0gXCJub25lXCIgfHwgIWhpZGRlbiApIHtcblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoXG5cdFx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdFx0XCJvbGRkaXNwbGF5XCIsXG5cdFx0XHRcdFx0XHRoaWRkZW4gPyBkaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wXG5cdFx0Ly8gdG8gYXZvaWQgdGhlIGNvbnN0YW50IHJlZmxvd1xuXHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmICggIXNob3cgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgKSB7XG5cdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IHNob3cgPyB2YWx1ZXNbIGluZGV4IF0gfHwgXCJcIiA6IFwibm9uZVwiO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGVsZW1lbnRzO1xuXHR9XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFxuXHRcdC8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdFxuXHRcdC8vIGJlaGF2aW9yIG9mIGdldHRpbmcgYW5kIHNldHRpbmcgYSBzdHlsZSBwcm9wZXJ0eVxuXHRcdGNzc0hvb2tzOiB7XG5cdFx0XHRvcGFjaXR5OiB7XG5cdFx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gV2Ugc2hvdWxkIGFsd2F5cyBnZXQgYSBudW1iZXIgYmFjayBmcm9tIG9wYWNpdHlcblx0XHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmV0ID09PSBcIlwiID8gXCIxXCIgOiByZXQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Ly8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgXCJweFwiIHRvIHRoZXNlIHBvc3NpYmx5LXVuaXRsZXNzIHByb3BlcnRpZXNcblx0XHRjc3NOdW1iZXI6IHtcblx0XHRcdFwiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnRcIjogdHJ1ZSxcblx0XHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcdFwiZmlsbE9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcdFwiZmxleEdyb3dcIjogdHJ1ZSxcblx0XHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFx0XCJmb250V2VpZ2h0XCI6IHRydWUsXG5cdFx0XHRcImxpbmVIZWlnaHRcIjogdHJ1ZSxcblx0XHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFx0XCJvcmRlclwiOiB0cnVlLFxuXHRcdFx0XCJvcnBoYW5zXCI6IHRydWUsXG5cdFx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFx0XCJ6SW5kZXhcIjogdHJ1ZSxcblx0XHRcdFwiem9vbVwiOiB0cnVlXG5cdFx0fSxcblx0XG5cdFx0Ly8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZVxuXHRcdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0XHRjc3NQcm9wczoge1xuXHRcdFx0XCJmbG9hdFwiOiBcImNzc0Zsb2F0XCJcblx0XHR9LFxuXHRcblx0XHQvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZVxuXHRcdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXHRcblx0XHRcdC8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHRcdHZhciByZXQsIHR5cGUsIGhvb2tzLFxuXHRcdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXHRcblx0XHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHxcblx0XHRcdFx0KCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggb3JpZ05hbWUgKSB8fCBvcmlnTmFtZSApO1xuXHRcblx0XHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblx0XG5cdFx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0XG5cdFx0XHRcdC8vIENvbnZlcnQgXCIrPVwiIG9yIFwiLT1cIiB0byByZWxhdGl2ZSBudW1iZXJzICgjNzM0NSlcblx0XHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICYmICggcmV0ID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiYgcmV0WyAxIF0gKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBhZGp1c3RDU1MoIGVsZW0sIG5hbWUsIHJldCApO1xuXHRcblx0XHRcdFx0XHQvLyBGaXhlcyBidWcgIzkyMzdcblx0XHRcdFx0XHR0eXBlID0gXCJudW1iZXJcIjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbnVsbCBhbmQgTmFOIHZhbHVlcyBhcmVuJ3Qgc2V0ICgjNzExNilcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKVxuXHRcdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdFx0dmFsdWUgKz0gcmV0ICYmIHJldFsgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0XHQvLyBiYWNrZ3JvdW5kLSogcHJvcHMgYWZmZWN0IG9yaWdpbmFsIGNsb25lJ3MgdmFsdWVzXG5cdFx0XHRcdGlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSBcIlwiICYmIG5hbWUuaW5kZXhPZiggXCJiYWNrZ3JvdW5kXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHxcblx0XHRcdFx0XHQoIHZhbHVlID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFxuXHRcdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgbm9uLWNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XG5cdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3Rcblx0XHRcdFx0cmV0dXJuIHN0eWxlWyBuYW1lIF07XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Y3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcblx0XHRcdHZhciB2YWwsIG51bSwgaG9va3MsXG5cdFx0XHRcdG9yaWdOYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApO1xuXHRcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdFx0bmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBvcmlnTmFtZSApIHx8IG9yaWdOYW1lICk7XG5cdFxuXHRcdFx0Ly8gVHJ5IHByZWZpeGVkIG5hbWUgZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgbmFtZVxuXHRcdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cdFxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyApIHtcblx0XHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIENvbnZlcnQgXCJub3JtYWxcIiB0byBjb21wdXRlZCB2YWx1ZVxuXHRcdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHRcdHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpY1xuXHRcdFx0aWYgKCBleHRyYSA9PT0gXCJcIiB8fCBleHRyYSApIHtcblx0XHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRcdHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBpc0Zpbml0ZSggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHRcdH1cblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZWFjaCggWyBcImhlaWdodFwiLCBcIndpZHRoXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdFx0alF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gPSB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHRcdC8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0XG5cdFx0XHRcdFx0cmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICkgJiZcblx0XHRcdFx0XHRcdGVsZW0ub2Zmc2V0V2lkdGggPT09IDAgP1xuXHRcdFx0XHRcdFx0XHRzd2FwKCBlbGVtLCBjc3NTaG93LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSB7XG5cdFx0XHRcdHZhciBtYXRjaGVzLFxuXHRcdFx0XHRcdHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApLFxuXHRcdFx0XHRcdHN1YnRyYWN0ID0gZXh0cmEgJiYgYXVnbWVudFdpZHRoT3JIZWlnaHQoXG5cdFx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdFx0bmFtZSxcblx0XHRcdFx0XHRcdGV4dHJhLFxuXHRcdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRcdHN0eWxlc1xuXHRcdFx0XHRcdCk7XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IHRvIHBpeGVscyBpZiB2YWx1ZSBhZGp1c3RtZW50IGlzIG5lZWRlZFxuXHRcdFx0XHRpZiAoIHN1YnRyYWN0ICYmICggbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmXG5cdFx0XHRcdFx0KCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgIT09IFwicHhcIiApIHtcblx0XG5cdFx0XHRcdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSApO1xuXHRcblx0alF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdHJldHVybiAoIHBhcnNlRmxvYXQoIGN1ckNTUyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIgKSApIHx8XG5cdFx0XHRcdFx0ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC1cblx0XHRcdFx0XHRcdHN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblx0XHRcdFx0XHRcdH0gKVxuXHRcdFx0XHRcdCkgKyBcInB4XCI7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xuXHRcblx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0alF1ZXJ5LmNzc0hvb2tzLm1hcmdpblJpZ2h0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQsXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdFx0cmV0dXJuIHN3YXAoIGVsZW0sIHsgXCJkaXNwbGF5XCI6IFwiaW5saW5lLWJsb2NrXCIgfSxcblx0XHRcdFx0XHRjdXJDU1MsIFsgZWxlbSwgXCJtYXJnaW5SaWdodFwiIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cdCk7XG5cdFxuXHQvLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5cdGpRdWVyeS5lYWNoKCB7XG5cdFx0bWFyZ2luOiBcIlwiLFxuXHRcdHBhZGRpbmc6IFwiXCIsXG5cdFx0Ym9yZGVyOiBcIldpZHRoXCJcblx0fSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0gPSB7XG5cdFx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRcdGV4cGFuZGVkID0ge30sXG5cdFxuXHRcdFx0XHRcdC8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuXHRcdFx0XHRcdHBhcnRzID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUuc3BsaXQoIFwiIFwiICkgOiBbIHZhbHVlIF07XG5cdFxuXHRcdFx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdFx0cGFydHNbIGkgXSB8fCBwYXJ0c1sgaSAtIDIgXSB8fCBwYXJ0c1sgMCBdO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gZXhwYW5kZWQ7XG5cdFx0XHR9XG5cdFx0fTtcblx0XG5cdFx0aWYgKCAhcm1hcmdpbi50ZXN0KCBwcmVmaXggKSApIHtcblx0XHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBzdHlsZXMsIGxlbixcblx0XHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0XHRpID0gMDtcblx0XG5cdFx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XHRcdFx0XHRsZW4gPSBuYW1lLmxlbmd0aDtcblx0XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRtYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRyZXR1cm4gbWFwO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0XHR9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0XHR9LFxuXHRcdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7XG5cdFx0fSxcblx0XHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBzaG93SGlkZSggdGhpcyApO1xuXHRcdH0sXG5cdFx0dG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggaXNIaWRkZW4oIHRoaXMgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5zaG93KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRcblx0ZnVuY3Rpb24gVHdlZW4oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICkge1xuXHRcdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG5cdH1cblx0alF1ZXJ5LlR3ZWVuID0gVHdlZW47XG5cdFxuXHRUd2Vlbi5wcm90b3R5cGUgPSB7XG5cdFx0Y29uc3RydWN0b3I6IFR3ZWVuLFxuXHRcdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHRcdHRoaXMuZWxlbSA9IGVsZW07XG5cdFx0XHR0aGlzLnByb3AgPSBwcm9wO1xuXHRcdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgalF1ZXJ5LmVhc2luZy5fZGVmYXVsdDtcblx0XHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0XHR0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpO1xuXHRcdFx0dGhpcy5lbmQgPSBlbmQ7XG5cdFx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHRcdH0sXG5cdFx0Y3VyOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cdFxuXHRcdFx0cmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/XG5cdFx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApO1xuXHRcdH0sXG5cdFx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHRcdHZhciBlYXNlZCxcblx0XHRcdFx0aG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXHRcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmR1cmF0aW9uICkge1xuXHRcdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXShcblx0XHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5ub3cgPSAoIHRoaXMuZW5kIC0gdGhpcy5zdGFydCApICogZWFzZWQgKyB0aGlzLnN0YXJ0O1xuXHRcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7XG5cdFx0XHRcdHRoaXMub3B0aW9ucy5zdGVwLmNhbGwoIHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnNldCApIHtcblx0XHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdH07XG5cdFxuXHRUd2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7XG5cdFxuXHRUd2Vlbi5wcm9wSG9va3MgPSB7XG5cdFx0X2RlZmF1bHQ6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0XHR2YXIgcmVzdWx0O1xuXHRcblx0XHRcdFx0Ly8gVXNlIGEgcHJvcGVydHkgb24gdGhlIGVsZW1lbnQgZGlyZWN0bHkgd2hlbiBpdCBpcyBub3QgYSBET00gZWxlbWVudCxcblx0XHRcdFx0Ly8gb3Igd2hlbiB0aGVyZSBpcyBubyBtYXRjaGluZyBzdHlsZSBwcm9wZXJ0eSB0aGF0IGV4aXN0cy5cblx0XHRcdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICE9PSAxIHx8XG5cdFx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiYgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gUGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5XG5cdFx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHRcdC8vIFNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0O1xuXHRcdFx0XHQvLyBjb21wbGV4IHZhbHVlcyBzdWNoIGFzIFwicm90YXRlKDFyYWQpXCIgYXJlIHJldHVybmVkIGFzLWlzLlxuXHRcdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cdFxuXHRcdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdFx0cmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSBcImF1dG9cIiA/IDAgOiByZXN1bHQ7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFxuXHRcdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdFx0Ly8gVXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlLlxuXHRcdFx0XHQvLyBVc2UgLnN0eWxlIGlmIGF2YWlsYWJsZSBhbmQgdXNlIHBsYWluIHByb3BlcnRpZXMgd2hlcmUgYXZhaWxhYmxlLlxuXHRcdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSggdHdlZW4gKTtcblx0XHRcdFx0fSBlbHNlIGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdCggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8XG5cdFx0XHRcdFx0XHRqUXVlcnkuY3NzSG9va3NbIHR3ZWVuLnByb3AgXSApICkge1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0XG5cdC8vIFN1cHBvcnQ6IElFOVxuXHQvLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0VHdlZW4ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0ID0ge1xuXHRcdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0XG5cdGpRdWVyeS5lYXNpbmcgPSB7XG5cdFx0bGluZWFyOiBmdW5jdGlvbiggcCApIHtcblx0XHRcdHJldHVybiBwO1xuXHRcdH0sXG5cdFx0c3dpbmc6IGZ1bmN0aW9uKCBwICkge1xuXHRcdFx0cmV0dXJuIDAuNSAtIE1hdGguY29zKCBwICogTWF0aC5QSSApIC8gMjtcblx0XHR9LFxuXHRcdF9kZWZhdWx0OiBcInN3aW5nXCJcblx0fTtcblx0XG5cdGpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0O1xuXHRcblx0Ly8gQmFjayBDb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcblx0alF1ZXJ5LmZ4LnN0ZXAgPSB7fTtcblx0XG5cdFxuXHRcblx0XG5cdHZhclxuXHRcdGZ4Tm93LCB0aW1lcklkLFxuXHRcdHJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFxuXHRcdHJydW4gPSAvcXVldWVIb29rcyQvO1xuXHRcblx0Ly8gQW5pbWF0aW9ucyBjcmVhdGVkIHN5bmNocm9ub3VzbHkgd2lsbCBydW4gc3luY2hyb25vdXNseVxuXHRmdW5jdGlvbiBjcmVhdGVGeE5vdygpIHtcblx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRmeE5vdyA9IHVuZGVmaW5lZDtcblx0XHR9ICk7XG5cdFx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcblx0fVxuXHRcblx0Ly8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cblx0ZnVuY3Rpb24gZ2VuRngoIHR5cGUsIGluY2x1ZGVXaWR0aCApIHtcblx0XHR2YXIgd2hpY2gsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF0dHJzID0geyBoZWlnaHQ6IHR5cGUgfTtcblx0XG5cdFx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHRcdC8vIG90aGVyd2lzZSBzdGVwIHZhbHVlIGlzIDIgdG8gc2tpcCBvdmVyIExlZnQgYW5kIFJpZ2h0XG5cdFx0aW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoID8gMSA6IDA7XG5cdFx0Zm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHRcdHdoaWNoID0gY3NzRXhwYW5kWyBpIF07XG5cdFx0XHRhdHRyc1sgXCJtYXJnaW5cIiArIHdoaWNoIF0gPSBhdHRyc1sgXCJwYWRkaW5nXCIgKyB3aGljaCBdID0gdHlwZTtcblx0XHR9XG5cdFxuXHRcdGlmICggaW5jbHVkZVdpZHRoICkge1xuXHRcdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBhdHRycztcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdFx0dmFyIHR3ZWVuLFxuXHRcdFx0Y29sbGVjdGlvbiA9ICggQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW10gKS5jb25jYXQoIEFuaW1hdGlvbi50d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0bGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdGlmICggKCB0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBXZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eVxuXHRcdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHtcblx0XHQvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG5cdFx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LFxuXHRcdFx0YW5pbSA9IHRoaXMsXG5cdFx0XHRvcmlnID0ge30sXG5cdFx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0XHRoaWRkZW4gPSBlbGVtLm5vZGVUeXBlICYmIGlzSGlkZGVuKCBlbGVtICksXG5cdFx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXHRcblx0XHQvLyBIYW5kbGUgcXVldWU6IGZhbHNlIHByb21pc2VzXG5cdFx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCBcImZ4XCIgKTtcblx0XHRcdGlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHtcblx0XHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0XHRvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTtcblx0XHRcdFx0aG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdFx0b2xkZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGhvb2tzLnVucXVldWVkKys7XG5cdFxuXHRcdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGhvb2tzLnVucXVldWVkLS07XG5cdFx0XHRcdFx0aWYgKCAhalF1ZXJ5LnF1ZXVlKCBlbGVtLCBcImZ4XCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHRcblx0XHQvLyBIZWlnaHQvd2lkdGggb3ZlcmZsb3cgcGFzc1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiaGVpZ2h0XCIgaW4gcHJvcHMgfHwgXCJ3aWR0aFwiIGluIHByb3BzICkgKSB7XG5cdFxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbm90aGluZyBzbmVha3Mgb3V0XG5cdFx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFOS0xMCBkbyBub3Rcblx0XHRcdC8vIGNoYW5nZSB0aGUgb3ZlcmZsb3cgYXR0cmlidXRlIHdoZW4gb3ZlcmZsb3dYIGFuZFxuXHRcdFx0Ly8gb3ZlcmZsb3dZIGFyZSBzZXQgdG8gdGhlIHNhbWUgdmFsdWVcblx0XHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXHRcblx0XHRcdC8vIFNldCBkaXNwbGF5IHByb3BlcnR5IHRvIGlubGluZS1ibG9jayBmb3IgaGVpZ2h0L3dpZHRoXG5cdFx0XHQvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkXG5cdFx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XG5cdFx0XHQvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSBcIm5vbmVcIlxuXHRcdFx0Y2hlY2tEaXNwbGF5ID0gZGlzcGxheSA9PT0gXCJub25lXCIgP1xuXHRcdFx0XHRkYXRhUHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7XG5cdFxuXHRcdFx0aWYgKCBjaGVja0Rpc3BsYXkgPT09IFwiaW5saW5lXCIgJiYgalF1ZXJ5LmNzcyggZWxlbSwgXCJmbG9hdFwiICkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGlmICggb3B0cy5vdmVyZmxvdyApIHtcblx0XHRcdHN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRcdHN0eWxlLm92ZXJmbG93WCA9IG9wdHMub3ZlcmZsb3dbIDEgXTtcblx0XHRcdFx0c3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdO1xuXHRcdFx0fSApO1xuXHRcdH1cblx0XG5cdFx0Ly8gc2hvdy9oaWRlIHBhc3Ncblx0XHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgcHJvcCBdO1xuXHRcdFx0aWYgKCByZnh0eXBlcy5leGVjKCB2YWx1ZSApICkge1xuXHRcdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdFx0dG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSBcInRvZ2dsZVwiO1xuXHRcdFx0XHRpZiAoIHZhbHVlID09PSAoIGhpZGRlbiA/IFwiaGlkZVwiIDogXCJzaG93XCIgKSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgZGF0YVNob3cgbGVmdCBvdmVyIGZyb20gYSBzdG9wcGVkIGhpZGUgb3Igc2hvd1xuXHRcdFx0XHRcdC8vIGFuZCB3ZSBhcmUgZ29pbmcgdG8gcHJvY2VlZCB3aXRoIHNob3csIHdlIHNob3VsZCBwcmV0ZW5kIHRvIGJlIGhpZGRlblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGhpZGRlbiA9IHRydWU7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXHRcblx0XHRcdC8vIEFueSBub24tZnggdmFsdWUgc3RvcHMgdXMgZnJvbSByZXN0b3JpbmcgdGhlIG9yaWdpbmFsIGRpc3BsYXkgdmFsdWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRpc3BsYXkgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRpZiAoICFqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkge1xuXHRcdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdFx0aWYgKCBcImhpZGRlblwiIGluIGRhdGFTaG93ICkge1xuXHRcdFx0XHRcdGhpZGRlbiA9IGRhdGFTaG93LmhpZGRlbjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGF0YVNob3cgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gU3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byBcInJldmVyc2VcIlxuXHRcdFx0aWYgKCB0b2dnbGUgKSB7XG5cdFx0XHRcdGRhdGFTaG93LmhpZGRlbiA9ICFoaWRkZW47XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0alF1ZXJ5KCBlbGVtICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRqUXVlcnkoIGVsZW0gKS5oaWRlKCk7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBwcm9wO1xuXHRcblx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdHR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7XG5cdFxuXHRcdFx0XHRpZiAoICEoIHByb3AgaW4gZGF0YVNob3cgKSApIHtcblx0XHRcdFx0XHRkYXRhU2hvd1sgcHJvcCBdID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdFx0XHR0d2Vlbi5lbmQgPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0XHRcdHR3ZWVuLnN0YXJ0ID0gcHJvcCA9PT0gXCJ3aWR0aFwiIHx8IHByb3AgPT09IFwiaGVpZ2h0XCIgPyAxIDogMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0Ly8gSWYgdGhpcyBpcyBhIG5vb3AgbGlrZSAuaGlkZSgpLmhpZGUoKSwgcmVzdG9yZSBhbiBvdmVyd3JpdHRlbiBkaXNwbGF5IHZhbHVlXG5cdFx0fSBlbHNlIGlmICggKCBkaXNwbGF5ID09PSBcIm5vbmVcIiA/IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgOiBkaXNwbGF5ICkgPT09IFwiaW5saW5lXCIgKSB7XG5cdFx0XHRzdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuXHRcdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cdFxuXHRcdC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuXHRcdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIGluZGV4ICk7XG5cdFx0XHRlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG5cdFx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdFx0cHJvcHNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0XHR9XG5cdFxuXHRcdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdFx0dmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7XG5cdFx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXHRcblx0XHRcdFx0Ly8gTm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBrZXlzLlxuXHRcdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRcdGlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHtcblx0XHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHRcdHZhciByZXN1bHQsXG5cdFx0XHRzdG9wcGVkLFxuXHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0bGVuZ3RoID0gQW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdFx0Ly8gRG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yXG5cdFx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0XHR9ICksXG5cdFx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0XHRyZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksXG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHRcdHRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCxcblx0XHRcdFx0XHRwZXJjZW50ID0gMSAtIHRlbXAsXG5cdFx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRcdGxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO1xuXHRcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIHBlcmNlbnQgKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdICk7XG5cdFxuXHRcdFx0XHRpZiAoIHBlcmNlbnQgPCAxICYmIGxlbmd0aCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiBdICk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSgge1xuXHRcdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0XHRwcm9wczogalF1ZXJ5LmV4dGVuZCgge30sIHByb3BlcnRpZXMgKSxcblx0XHRcdFx0b3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwge1xuXHRcdFx0XHRcdHNwZWNpYWxFYXNpbmc6IHt9LFxuXHRcdFx0XHRcdGVhc2luZzogalF1ZXJ5LmVhc2luZy5fZGVmYXVsdFxuXHRcdFx0XHR9LCBvcHRpb25zICksXG5cdFx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdFx0b3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLFxuXHRcdFx0XHRzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0XHR0d2VlbnM6IFtdLFxuXHRcdFx0XHRjcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHtcblx0XHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRcdGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmdbIHByb3AgXSB8fCBhbmltYXRpb24ub3B0cy5lYXNpbmcgKTtcblx0XHRcdFx0XHRhbmltYXRpb24udHdlZW5zLnB1c2goIHR3ZWVuICk7XG5cdFx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHtcblx0XHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXHRcblx0XHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIHNraXAgdGhpcyBwYXJ0XG5cdFx0XHRcdFx0XHRsZW5ndGggPSBnb3RvRW5kID8gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGggOiAwO1xuXHRcdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCAxICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBSZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lOyBvdGhlcndpc2UsIHJlamVjdFxuXHRcdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdH0gKSxcblx0XHRcdHByb3BzID0gYW5pbWF0aW9uLnByb3BzO1xuXHRcblx0XHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXHRcblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdHJlc3VsdCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7XG5cdFx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcmVzdWx0LnN0b3AgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIGFuaW1hdGlvbi5lbGVtLCBhbmltYXRpb24ub3B0cy5xdWV1ZSApLnN0b3AgPVxuXHRcdFx0XHRcdFx0alF1ZXJ5LnByb3h5KCByZXN1bHQuc3RvcCwgcmVzdWx0ICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7XG5cdFxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGFuaW1hdGlvbi5vcHRzLnN0YXJ0ICkgKSB7XG5cdFx0XHRhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTtcblx0XHR9XG5cdFxuXHRcdGpRdWVyeS5meC50aW1lcihcblx0XHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdFx0YW5pbTogYW5pbWF0aW9uLFxuXHRcdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHRcdH0gKVxuXHRcdCk7XG5cdFxuXHRcdC8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdFx0cmV0dXJuIGFuaW1hdGlvbi5wcm9ncmVzcyggYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MgKVxuXHRcdFx0LmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlIClcblx0XHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHRcdC5hbHdheXMoIGFuaW1hdGlvbi5vcHRzLmFsd2F5cyApO1xuXHR9XG5cdFxuXHRqUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7XG5cdFx0dHdlZW5lcnM6IHtcblx0XHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKTtcblx0XHRcdFx0YWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7XG5cdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdH0gXVxuXHRcdH0sXG5cdFxuXHRcdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuXHRcdFx0XHRjYWxsYmFjayA9IHByb3BzO1xuXHRcdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHByb3BzID0gcHJvcHMubWF0Y2goIHJub3R3aGl0ZSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBwcm9wLFxuXHRcdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRcdGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblx0XG5cdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdFx0cHJvcCA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0XHRBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSA9IEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0XHRBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdHByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLFxuXHRcblx0XHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRcdGlmICggcHJlcGVuZCApIHtcblx0XHRcdFx0QW5pbWF0aW9uLnByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdFx0dmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuXHRcdFx0Y29tcGxldGU6IGZuIHx8ICFmbiAmJiBlYXNpbmcgfHxcblx0XHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0XHRkdXJhdGlvbjogc3BlZWQsXG5cdFx0XHRlYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmdcblx0XHR9O1xuXHRcblx0XHRvcHQuZHVyYXRpb24gPSBqUXVlcnkuZngub2ZmID8gMCA6IHR5cGVvZiBvcHQuZHVyYXRpb24gPT09IFwibnVtYmVyXCIgP1xuXHRcdFx0b3B0LmR1cmF0aW9uIDogb3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgP1xuXHRcdFx0XHRqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXSA6IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cdFxuXHRcdC8vIE5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+IFwiZnhcIlxuXHRcdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdFx0b3B0LnF1ZXVlID0gXCJmeFwiO1xuXHRcdH1cblx0XG5cdFx0Ly8gUXVldWVpbmdcblx0XHRvcHQub2xkID0gb3B0LmNvbXBsZXRlO1xuXHRcblx0XHRvcHQuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdC5vbGQgKSApIHtcblx0XHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCBvcHQucXVldWUgKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcblx0XHRyZXR1cm4gb3B0O1xuXHR9O1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdGZhZGVUbzogZnVuY3Rpb24oIHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XG5cdFx0XHQvLyBTaG93IGFueSBoaWRkZW4gZWxlbWVudHMgYWZ0ZXIgc2V0dGluZyBvcGFjaXR5IHRvIDBcblx0XHRcdHJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW4gKS5jc3MoIFwib3BhY2l0eVwiLCAwICkuc2hvdygpXG5cdFxuXHRcdFx0XHQvLyBBbmltYXRlIHRvIHRoZSB2YWx1ZSBzcGVjaWZpZWRcblx0XHRcdFx0LmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0XHR9LFxuXHRcdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRcdHZhciBlbXB0eSA9IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wICksXG5cdFx0XHRcdG9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSxcblx0XHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0XHR2YXIgYW5pbSA9IEFuaW1hdGlvbiggdGhpcywgalF1ZXJ5LmV4dGVuZCgge30sIHByb3AgKSwgb3B0YWxsICk7XG5cdFxuXHRcdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdGlmICggZW1wdHkgfHwgZGF0YVByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXHRcblx0XHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdFx0dGhpcy5xdWV1ZSggb3B0YWxsLnF1ZXVlLCBkb0FuaW1hdGlvbiApO1xuXHRcdH0sXG5cdFx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0XHR2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkge1xuXHRcdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0XHRzdG9wKCBnb3RvRW5kICk7XG5cdFx0XHR9O1xuXHRcblx0XHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdFx0dGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkZXF1ZXVlID0gdHJ1ZSxcblx0XHRcdFx0XHRpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG5cdFx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0XHRkYXRhID0gZGF0YVByaXYuZ2V0KCB0aGlzICk7XG5cdFxuXHRcdFx0XHRpZiAoIGluZGV4ICkge1xuXHRcdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgJiYgcnJ1bi50ZXN0KCBpbmRleCApICkge1xuXHRcdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJlxuXHRcdFx0XHRcdFx0KCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdFx0Ly8gd2lsbCBkZXF1ZXVlIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kLlxuXHRcdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH0sXG5cdFx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdGlmICggdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaW5kZXgsXG5cdFx0XHRcdFx0ZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRcdHF1ZXVlID0gZGF0YVsgdHlwZSArIFwicXVldWVcIiBdLFxuXHRcdFx0XHRcdGhvb2tzID0gZGF0YVsgdHlwZSArIFwicXVldWVIb29rc1wiIF0sXG5cdFx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0XHRsZW5ndGggPSBxdWV1ZSA/IHF1ZXVlLmxlbmd0aCA6IDA7XG5cdFxuXHRcdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRcdGRhdGEuZmluaXNoID0gdHJ1ZTtcblx0XG5cdFx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0XHRqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIFtdICk7XG5cdFxuXHRcdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdFx0aG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIExvb2sgZm9yIGFueSBhY3RpdmUgYW5pbWF0aW9ucywgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRpZiAoIHF1ZXVlWyBpbmRleCBdICYmIHF1ZXVlWyBpbmRleCBdLmZpbmlzaCApIHtcblx0XHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBUdXJuIG9mZiBmaW5pc2hpbmcgZmxhZ1xuXHRcdFx0XHRkZWxldGUgZGF0YS5maW5pc2g7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZWFjaCggWyBcInRvZ2dsZVwiLCBcInNob3dcIiwgXCJoaWRlXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdFx0dmFyIGNzc0ZuID0galF1ZXJ5LmZuWyBuYW1lIF07XG5cdFx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cblx0XHRcdFx0Y3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDpcblx0XHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHRcdH07XG5cdH0gKTtcblx0XG5cdC8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcblx0alF1ZXJ5LmVhY2goIHtcblx0XHRzbGlkZURvd246IGdlbkZ4KCBcInNob3dcIiApLFxuXHRcdHNsaWRlVXA6IGdlbkZ4KCBcImhpZGVcIiApLFxuXHRcdHNsaWRlVG9nZ2xlOiBnZW5GeCggXCJ0b2dnbGVcIiApLFxuXHRcdGZhZGVJbjogeyBvcGFjaXR5OiBcInNob3dcIiB9LFxuXHRcdGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSxcblx0XHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxuXHR9LCBmdW5jdGlvbiggbmFtZSwgcHJvcHMgKSB7XG5cdFx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0XHR9O1xuXHR9ICk7XG5cdFxuXHRqUXVlcnkudGltZXJzID0gW107XG5cdGpRdWVyeS5meC50aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRpbWVyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHR0aW1lcnMgPSBqUXVlcnkudGltZXJzO1xuXHRcblx0XHRmeE5vdyA9IGpRdWVyeS5ub3coKTtcblx0XG5cdFx0Zm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblx0XG5cdFx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRcdGlmICggIXRpbWVyKCkgJiYgdGltZXJzWyBpIF0gPT09IHRpbWVyICkge1xuXHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0XHRqUXVlcnkuZnguc3RvcCgpO1xuXHRcdH1cblx0XHRmeE5vdyA9IHVuZGVmaW5lZDtcblx0fTtcblx0XG5cdGpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0XHRqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7XG5cdFx0aWYgKCB0aW1lcigpICkge1xuXHRcdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpRdWVyeS50aW1lcnMucG9wKCk7XG5cdFx0fVxuXHR9O1xuXHRcblx0alF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cdGpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRpbWVySWQgKSB7XG5cdFx0XHR0aW1lcklkID0gd2luZG93LnNldEludGVydmFsKCBqUXVlcnkuZngudGljaywgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdFx0fVxuXHR9O1xuXHRcblx0alF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCggdGltZXJJZCApO1xuXHRcblx0XHR0aW1lcklkID0gbnVsbDtcblx0fTtcblx0XG5cdGpRdWVyeS5meC5zcGVlZHMgPSB7XG5cdFx0c2xvdzogNjAwLFxuXHRcdGZhc3Q6IDIwMCxcblx0XG5cdFx0Ly8gRGVmYXVsdCBzcGVlZFxuXHRcdF9kZWZhdWx0OiA0MDBcblx0fTtcblx0XG5cdFxuXHQvLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG5cdC8vIGh0dHA6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTAwMzI0MDE0NzQ3L2h0dHA6Ly9ibGluZHNpZ25hbHMuY29tL2luZGV4LnBocC8yMDA5LzA3L2pxdWVyeS1kZWxheS9cblx0alF1ZXJ5LmZuLmRlbGF5ID0gZnVuY3Rpb24oIHRpbWUsIHR5cGUgKSB7XG5cdFx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cdFxuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0XHR2YXIgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0XHRob29rcy5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXQgKTtcblx0XHRcdH07XG5cdFx0fSApO1xuXHR9O1xuXHRcblx0XG5cdCggZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0XHRzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNlbGVjdFwiICksXG5cdFx0XHRvcHQgPSBzZWxlY3QuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwib3B0aW9uXCIgKSApO1xuXHRcblx0XHRpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBpT1M8PTUuMSwgQW5kcm9pZDw9NC4yK1xuXHRcdC8vIERlZmF1bHQgdmFsdWUgZm9yIGEgY2hlY2tib3ggc2hvdWxkIGJlIFwib25cIlxuXHRcdHN1cHBvcnQuY2hlY2tPbiA9IGlucHV0LnZhbHVlICE9PSBcIlwiO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdFx0Ly8gTXVzdCBhY2Nlc3Mgc2VsZWN0ZWRJbmRleCB0byBtYWtlIGRlZmF1bHQgb3B0aW9ucyBzZWxlY3Rcblx0XHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPD0yLjNcblx0XHQvLyBPcHRpb25zIGluc2lkZSBkaXNhYmxlZCBzZWxlY3RzIGFyZSBpbmNvcnJlY3RseSBtYXJrZWQgYXMgZGlzYWJsZWRcblx0XHRzZWxlY3QuZGlzYWJsZWQgPSB0cnVlO1xuXHRcdHN1cHBvcnQub3B0RGlzYWJsZWQgPSAhb3B0LmRpc2FibGVkO1xuXHRcblx0XHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdFx0Ly8gQW4gaW5wdXQgbG9zZXMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW9cblx0XHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRcdGlucHV0LnZhbHVlID0gXCJ0XCI7XG5cdFx0aW5wdXQudHlwZSA9IFwicmFkaW9cIjtcblx0XHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG5cdH0gKSgpO1xuXHRcblx0XG5cdHZhciBib29sSG9vayxcblx0XHRhdHRySGFuZGxlID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRhdHRyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdFx0fSxcblx0XG5cdFx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5leHRlbmQoIHtcblx0XHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgcmV0LCBob29rcyxcblx0XHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXHRcblx0XHRcdC8vIERvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdFx0aWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBbGwgYXR0cmlidXRlcyBhcmUgbG93ZXJjYXNlXG5cdFx0XHQvLyBHcmFiIG5lY2Vzc2FyeSBob29rIGlmIG9uZSBpcyBkZWZpbmVkXG5cdFx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lIF0gfHxcblx0XHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiB1bmRlZmluZWQgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGlmICggdmFsdWUgPT09IG51bGwgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHRcdCggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcblx0XHRcdHJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XG5cdFx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuXHRcdH0sXG5cdFxuXHRcdGF0dHJIb29rczoge1xuXHRcdFx0dHlwZToge1xuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0XHRpZiAoICFzdXBwb3J0LnJhZGlvVmFsdWUgJiYgdmFsdWUgPT09IFwicmFkaW9cIiAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCB2YWx1ZSApO1xuXHRcdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0dmFyIG5hbWUsIHByb3BOYW1lLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0YXR0ck5hbWVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApO1xuXHRcblx0XHRcdGlmICggYXR0ck5hbWVzICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHdoaWxlICggKCBuYW1lID0gYXR0ck5hbWVzWyBpKysgXSApICkge1xuXHRcdFx0XHRcdHByb3BOYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuXHRcblx0XHRcdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgZ2V0IHNwZWNpYWwgdHJlYXRtZW50ICgjMTA4NzApXG5cdFx0XHRcdFx0aWYgKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyBTZXQgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSB0byBmYWxzZVxuXHRcdFx0XHRcdFx0ZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xuXHRcblx0Ly8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuXHRib29sSG9vayA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHtcblx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcblx0XHRcdFx0Ly8gUmVtb3ZlIGJvb2xlYW4gYXR0cmlidXRlcyB3aGVuIHNldCB0byBmYWxzZVxuXHRcdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0fTtcblx0alF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRcdHZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjtcblx0XG5cdFx0YXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdFx0dmFyIHJldCwgaGFuZGxlO1xuXHRcdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFxuXHRcdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRcdGhhbmRsZSA9IGF0dHJIYW5kbGVbIG5hbWUgXTtcblx0XHRcdFx0YXR0ckhhbmRsZVsgbmFtZSBdID0gcmV0O1xuXHRcdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdFx0bmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHRudWxsO1xuXHRcdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH07XG5cdH0gKTtcblx0XG5cdFxuXHRcblx0XG5cdHZhciByZm9jdXNhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0XHRyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pO1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0XHR9LFxuXHRcblx0XHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWxldGUgdGhpc1sgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lIF07XG5cdFx0XHR9ICk7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblx0XG5cdFx0XHQvLyBEb24ndCBnZXQvc2V0IHByb3BlcnRpZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBGaXggbmFtZSBhbmQgYXR0YWNoIGhvb2tzXG5cdFx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0aWYgKCBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdO1xuXHRcdH0sXG5cdFxuXHRcdHByb3BIb29rczoge1xuXHRcdFx0dGFiSW5kZXg6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gZWxlbS50YWJJbmRleCBkb2Vzbid0IGFsd2F5cyByZXR1cm4gdGhlXG5cdFx0XHRcdFx0Ly8gY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0XG5cdFx0XHRcdFx0Ly8gaHR0cDovL2ZsdWlkcHJvamVjdC5vcmcvYmxvZy8yMDA4LzAxLzA5L2dldHRpbmctc2V0dGluZy1hbmQtcmVtb3ZpbmctdGFiaW5kZXgtdmFsdWVzLXdpdGgtamF2YXNjcmlwdC9cblx0XHRcdFx0XHQvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKVxuXHRcdFx0XHRcdHZhciB0YWJpbmRleCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidGFiaW5kZXhcIiApO1xuXHRcblx0XHRcdFx0XHRyZXR1cm4gdGFiaW5kZXggP1xuXHRcdFx0XHRcdFx0cGFyc2VJbnQoIHRhYmluZGV4LCAxMCApIDpcblx0XHRcdFx0XHRcdHJmb2N1c2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApIHx8XG5cdFx0XHRcdFx0XHRcdHJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmIGVsZW0uaHJlZiA/XG5cdFx0XHRcdFx0XHRcdFx0MCA6XG5cdFx0XHRcdFx0XHRcdFx0LTE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRwcm9wRml4OiB7XG5cdFx0XHRcImZvclwiOiBcImh0bWxGb3JcIixcblx0XHRcdFwiY2xhc3NcIjogXCJjbGFzc05hbWVcIlxuXHRcdH1cblx0fSApO1xuXHRcblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIEFjY2Vzc2luZyB0aGUgc2VsZWN0ZWRJbmRleCBwcm9wZXJ0eVxuXHQvLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkXG5cdC8vIG9uIHRoZSBvcHRpb25cblx0Ly8gVGhlIGdldHRlciBlbnN1cmVzIGEgZGVmYXVsdCBvcHRpb24gaXMgc2VsZWN0ZWRcblx0Ly8gd2hlbiBpbiBhbiBvcHRncm91cFxuXHRpZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRcdGpRdWVyeS5wcm9wSG9va3Muc2VsZWN0ZWQgPSB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHRpZiAoIHBhcmVudCAmJiBwYXJlbnQucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fSxcblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRcdGlmICggcGFyZW50ICkge1xuXHRcdFx0XHRcdHBhcmVudC5zZWxlY3RlZEluZGV4O1xuXHRcblx0XHRcdFx0XHRpZiAoIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHRqUXVlcnkuZWFjaCggW1xuXHRcdFwidGFiSW5kZXhcIixcblx0XHRcInJlYWRPbmx5XCIsXG5cdFx0XCJtYXhMZW5ndGhcIixcblx0XHRcImNlbGxTcGFjaW5nXCIsXG5cdFx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcdFwicm93U3BhblwiLFxuXHRcdFwiY29sU3BhblwiLFxuXHRcdFwidXNlTWFwXCIsXG5cdFx0XCJmcmFtZUJvcmRlclwiLFxuXHRcdFwiY29udGVudEVkaXRhYmxlXCJcblx0XSwgZnVuY3Rpb24oKSB7XG5cdFx0alF1ZXJ5LnByb3BGaXhbIHRoaXMudG9Mb3dlckNhc2UoKSBdID0gdGhpcztcblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0dmFyIHJjbGFzcyA9IC9bXFx0XFxyXFxuXFxmXS9nO1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q2xhc3MoIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlICYmIGVsZW0uZ2V0QXR0cmlidXRlKCBcImNsYXNzXCIgKSB8fCBcIlwiO1xuXHR9XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdFx0aSA9IDA7XG5cdFxuXHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUgKSB7XG5cdFx0XHRcdGNsYXNzZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cdFxuXHRcdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdFx0Y3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApO1xuXHRcdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdCggXCIgXCIgKyBjdXJWYWx1ZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApO1xuXHRcblx0XHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRcdGN1ciArPSBjbGF6eiArIFwiIFwiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0Ly8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XG5cdFx0cmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdFx0aSA9IDA7XG5cdFxuXHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdFx0alF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuYXR0ciggXCJjbGFzc1wiLCBcIlwiICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUgKSB7XG5cdFx0XHRcdGNsYXNzZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cdFxuXHRcdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdFx0Y3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApO1xuXHRcblx0XHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdCggXCIgXCIgKyBjdXJWYWx1ZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApO1xuXHRcblx0XHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSAqYWxsKiBpbnN0YW5jZXNcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdFx0XHRjdXIgPSBjdXIucmVwbGFjZSggXCIgXCIgKyBjbGF6eiArIFwiIFwiLCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0Ly8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XG5cdFx0dG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7XG5cdFx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0XG5cdFx0XHRpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gXCJib29sZWFuXCIgJiYgdHlwZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5KCB0aGlzICkudG9nZ2xlQ2xhc3MoXG5cdFx0XHRcdFx0XHR2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLFxuXHRcdFx0XHRcdFx0c3RhdGVWYWxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBjbGFzc05hbWUsIGksIHNlbGYsIGNsYXNzTmFtZXM7XG5cdFxuXHRcdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG5cdFx0XHRcdFx0aSA9IDA7XG5cdFx0XHRcdFx0c2VsZiA9IGpRdWVyeSggdGhpcyApO1xuXHRcdFx0XHRcdGNsYXNzTmFtZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cdFxuXHRcdFx0XHRcdHdoaWxlICggKCBjbGFzc05hbWUgPSBjbGFzc05hbWVzWyBpKysgXSApICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdFxuXHRcdFx0XHRcdFx0aWYgKCBzZWxmLmhhc0NsYXNzKCBjbGFzc05hbWUgKSApIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmFkZENsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0XHR9IGVsc2UgaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRcdGNsYXNzTmFtZSA9IGdldENsYXNzKCB0aGlzICk7XG5cdFx0XHRcdFx0aWYgKCBjbGFzc05hbWUgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gU3RvcmUgY2xhc3NOYW1lIGlmIHNldFxuXHRcdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxuXHRcdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGJyaW5nIGJhY2sgd2hhdGV2ZXIgd2FzIHByZXZpb3VzbHkgc2F2ZWQgKGlmIGFueXRoaW5nKSxcblx0XHRcdFx0XHQvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG5cdFx0XHRcdFx0aWYgKCB0aGlzLnNldEF0dHJpYnV0ZSApIHtcblx0XHRcdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsXG5cdFx0XHRcdFx0XHRcdGNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0XHRcdFx0XHRcIlwiIDpcblx0XHRcdFx0XHRcdFx0ZGF0YVByaXYuZ2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiApIHx8IFwiXCJcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSxcblx0XG5cdFx0aGFzQ2xhc3M6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHZhciBjbGFzc05hbWUsIGVsZW0sXG5cdFx0XHRcdGkgPSAwO1xuXHRcblx0XHRcdGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIjtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0KCBcIiBcIiArIGdldENsYXNzKCBlbGVtICkgKyBcIiBcIiApLnJlcGxhY2UoIHJjbGFzcywgXCIgXCIgKVxuXHRcdFx0XHRcdFx0LmluZGV4T2YoIGNsYXNzTmFtZSApID4gLTFcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRcblx0XG5cdFxuXHR2YXIgcnJldHVybiA9IC9cXHIvZyxcblx0XHRyc3BhY2VzID0gL1tcXHgyMFxcdFxcclxcblxcZl0rL2c7XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgaG9va3MsIHJldCwgaXNGdW5jdGlvbixcblx0XHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblx0XG5cdFx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8XG5cdFx0XHRcdFx0XHRqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXHRcblx0XHRcdFx0XHRpZiAoIGhvb2tzICYmXG5cdFx0XHRcdFx0XHRcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdFx0XHQoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgXCJ2YWx1ZVwiICkgKSAhPT0gdW5kZWZpbmVkXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblx0XG5cdFx0XHRcdFx0cmV0dXJuIHR5cGVvZiByZXQgPT09IFwic3RyaW5nXCIgP1xuXHRcblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXNcblx0XHRcdFx0XHRcdHJldC5yZXBsYWNlKCBycmV0dXJuLCBcIlwiICkgOlxuXHRcblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuXHRcdFx0XHRcdFx0cmV0ID09IG51bGwgPyBcIlwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0aXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXHRcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHR2YXIgdmFsO1xuXHRcblx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uICkge1xuXHRcdFx0XHRcdHZhbCA9IHZhbHVlLmNhbGwoIHRoaXMsIGksIGpRdWVyeSggdGhpcyApLnZhbCgpICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFsID0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzIFwiXCI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdcblx0XHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdFx0XHR2YWwgPSBcIlwiO1xuXHRcblx0XHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0XHR2YWwgKz0gXCJcIjtcblx0XG5cdFx0XHRcdH0gZWxzZSBpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWwgKSApIHtcblx0XHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIjtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyB0aGlzLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXHRcblx0XHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdFx0aWYgKCAhaG9va3MgfHwgISggXCJzZXRcIiBpbiBob29rcyApIHx8IGhvb2tzLnNldCggdGhpcywgdmFsLCBcInZhbHVlXCIgKSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5leHRlbmQoIHtcblx0XHR2YWxIb29rczoge1xuXHRcdFx0b3B0aW9uOiB7XG5cdFx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFxuXHRcdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0XHRyZXR1cm4gdmFsICE9IG51bGwgP1xuXHRcdFx0XHRcdFx0dmFsIDpcblx0XG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTEwLTExK1xuXHRcdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdFx0Ly8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2Vcblx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0XHRqUXVlcnkudHJpbSggalF1ZXJ5LnRleHQoIGVsZW0gKSApLnJlcGxhY2UoIHJzcGFjZXMsIFwiIFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRzZWxlY3Q6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHR2YXIgdmFsdWUsIG9wdGlvbixcblx0XHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0XHRpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCxcblx0XHRcdFx0XHRcdG9uZSA9IGVsZW0udHlwZSA9PT0gXCJzZWxlY3Qtb25lXCIgfHwgaW5kZXggPCAwLFxuXHRcdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdFx0bWF4ID0gb25lID8gaW5kZXggKyAxIDogb3B0aW9ucy5sZW5ndGgsXG5cdFx0XHRcdFx0XHRpID0gaW5kZXggPCAwID9cblx0XHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdFx0b25lID8gaW5kZXggOiAwO1xuXHRcblx0XHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbWF4OyBpKysgKSB7XG5cdFx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFxuXHRcdFx0XHRcdFx0Ly8gSUU4LTkgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpXG5cdFx0XHRcdFx0XHRpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0XHRcdFx0XHRcdCggc3VwcG9ydC5vcHREaXNhYmxlZCA/XG5cdFx0XHRcdFx0XHRcdFx0XHQhb3B0aW9uLmRpc2FibGVkIDogb3B0aW9uLmdldEF0dHJpYnV0ZSggXCJkaXNhYmxlZFwiICkgPT09IG51bGwgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQhalF1ZXJ5Lm5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiICkgKSApIHtcblx0XG5cdFx0XHRcdFx0XHRcdC8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb25cblx0XHRcdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHNcblx0XHRcdFx0XHRcdFx0aWYgKCBvbmUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0XHR2YWx1ZXMucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdFx0dmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSxcblx0XHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblx0XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFx0XHRcdFx0XHRpZiAoIG9wdGlvbi5zZWxlY3RlZCA9XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldCggb3B0aW9uICksIHZhbHVlcyApID4gLTFcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXRcblx0XHRcdFx0XHRpZiAoICFvcHRpb25TZXQgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xuXHRcblx0Ly8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXJcblx0alF1ZXJ5LmVhY2goIFsgXCJyYWRpb1wiLCBcImNoZWNrYm94XCIgXSwgZnVuY3Rpb24oKSB7XG5cdFx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gKCBlbGVtLmNoZWNrZWQgPSBqUXVlcnkuaW5BcnJheSggalF1ZXJ5KCBlbGVtICkudmFsKCksIHZhbHVlICkgPiAtMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7XG5cdFx0XHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gbnVsbCA/IFwib25cIiA6IGVsZW0udmFsdWU7XG5cdFx0XHR9O1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0Ly8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvblxuXHRcblx0XG5cdHZhciByZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLztcblx0XG5cdGpRdWVyeS5leHRlbmQoIGpRdWVyeS5ldmVudCwge1xuXHRcblx0XHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHtcblx0XG5cdFx0XHR2YXIgaSwgY3VyLCB0bXAsIGJ1YmJsZVR5cGUsIG9udHlwZSwgaGFuZGxlLCBzcGVjaWFsLFxuXHRcdFx0XHRldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSxcblx0XHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdFx0bmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgXCJuYW1lc3BhY2VcIiApID8gZXZlbnQubmFtZXNwYWNlLnNwbGl0KCBcIi5cIiApIDogW107XG5cdFxuXHRcdFx0Y3VyID0gdG1wID0gZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQ7XG5cdFxuXHRcdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gZm9jdXMvYmx1ciBtb3JwaHMgdG8gZm9jdXNpbi9vdXQ7IGVuc3VyZSB3ZSdyZSBub3QgZmlyaW5nIHRoZW0gcmlnaHQgbm93XG5cdFx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIHR5cGUuaW5kZXhPZiggXCIuXCIgKSA+IC0xICkge1xuXHRcblx0XHRcdFx0Ly8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKVxuXHRcdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdCggXCIuXCIgKTtcblx0XHRcdFx0dHlwZSA9IG5hbWVzcGFjZXMuc2hpZnQoKTtcblx0XHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0XHR9XG5cdFx0XHRvbnR5cGUgPSB0eXBlLmluZGV4T2YoIFwiOlwiICkgPCAwICYmIFwib25cIiArIHR5cGU7XG5cdFxuXHRcdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGEgalF1ZXJ5LkV2ZW50IG9iamVjdCwgT2JqZWN0LCBvciBqdXN0IGFuIGV2ZW50IHR5cGUgc3RyaW5nXG5cdFx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdFx0ZXZlbnQgOlxuXHRcdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCB0eXBlLCB0eXBlb2YgZXZlbnQgPT09IFwib2JqZWN0XCIgJiYgZXZlbnQgKTtcblx0XG5cdFx0XHQvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpXG5cdFx0XHRldmVudC5pc1RyaWdnZXIgPSBvbmx5SGFuZGxlcnMgPyAyIDogMztcblx0XHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKTtcblx0XHRcdGV2ZW50LnJuYW1lc3BhY2UgPSBldmVudC5uYW1lc3BhY2UgP1xuXHRcdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKCBcIlxcXFwuKD86LipcXFxcLnwpXCIgKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRcdG51bGw7XG5cdFxuXHRcdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0XHRldmVudC5yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdFx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdFx0ZGF0YSA9IGRhdGEgPT0gbnVsbCA/XG5cdFx0XHRcdFsgZXZlbnQgXSA6XG5cdFx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXHRcblx0XHRcdC8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXNcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0aWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSlcblx0XHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcblx0XHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRcdGlmICggIXJmb2N1c01vcnBoLnRlc3QoIGJ1YmJsZVR5cGUgKyB0eXBlICkgKSB7XG5cdFx0XHRcdFx0Y3VyID0gY3VyLnBhcmVudE5vZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0Zm9yICggOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0XHRpZiAoIHRtcCA9PT0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSApIHtcblx0XHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoXG5cdFx0XHRpID0gMDtcblx0XHRcdHdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFxuXHRcdFx0XHRldmVudC50eXBlID0gaSA+IDEgP1xuXHRcdFx0XHRcdGJ1YmJsZVR5cGUgOlxuXHRcdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblx0XG5cdFx0XHRcdC8vIGpRdWVyeSBoYW5kbGVyXG5cdFx0XHRcdGhhbmRsZSA9ICggZGF0YVByaXYuZ2V0KCBjdXIsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gJiZcblx0XHRcdFx0XHRkYXRhUHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0XHRpZiAoIGhhbmRsZSApIHtcblx0XHRcdFx0XHRoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBOYXRpdmUgaGFuZGxlclxuXHRcdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdFx0aWYgKCBoYW5kbGUgJiYgaGFuZGxlLmFwcGx5ICYmIGFjY2VwdERhdGEoIGN1ciApICkge1xuXHRcdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXHRcblx0XHRcdC8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3dcblx0XHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cdFxuXHRcdFx0XHRpZiAoICggIXNwZWNpYWwuX2RlZmF1bHQgfHxcblx0XHRcdFx0XHRzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UgKSAmJlxuXHRcdFx0XHRcdGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIG5hbWUgYXMgdGhlIGV2ZW50LlxuXHRcdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0XHRpZiAoIG9udHlwZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggZWxlbVsgdHlwZSBdICkgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcblx0XHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHRcdHRtcCA9IGVsZW1bIG9udHlwZSBdO1xuXHRcblx0XHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCByZS10cmlnZ2VyaW5nIG9mIHRoZSBzYW1lIGV2ZW50LCBzaW5jZSB3ZSBhbHJlYWR5IGJ1YmJsZWQgaXQgYWJvdmVcblx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuXHRcdFx0XHRcdFx0ZWxlbVsgdHlwZSBdKCk7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdW5kZWZpbmVkO1xuXHRcblx0XHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IHRtcDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHRcdH0sXG5cdFxuXHRcdC8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZVxuXHRcdC8vIFVzZWQgb25seSBmb3IgYGZvY3VzKGluIHwgb3V0KWAgZXZlbnRzXG5cdFx0c2ltdWxhdGU6IGZ1bmN0aW9uKCB0eXBlLCBlbGVtLCBldmVudCApIHtcblx0XHRcdHZhciBlID0galF1ZXJ5LmV4dGVuZChcblx0XHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0XHRldmVudCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0aXNTaW11bGF0ZWQ6IHRydWVcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHRcdH1cblx0XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XG5cdFx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcblx0XHRcdH0gKTtcblx0XHR9LFxuXHRcdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHRcdHZhciBlbGVtID0gdGhpc1sgMCBdO1xuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRqUXVlcnkuZWFjaCggKCBcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XHRcIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIFwiICtcblx0XHRcImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIiApLnNwbGl0KCBcIiBcIiApLFxuXHRcdGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRcblx0XHQvLyBIYW5kbGUgZXZlbnQgYmluZGluZ1xuXHRcdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID9cblx0XHRcdFx0dGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6XG5cdFx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHRcdH07XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5tb3VzZWVudGVyKCBmbk92ZXIgKS5tb3VzZWxlYXZlKCBmbk91dCB8fCBmbk92ZXIgKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRcblx0XG5cdHN1cHBvcnQuZm9jdXNpbiA9IFwib25mb2N1c2luXCIgaW4gd2luZG93O1xuXHRcblx0XG5cdC8vIFN1cHBvcnQ6IEZpcmVmb3hcblx0Ly8gRmlyZWZveCBkb2Vzbid0IGhhdmUgZm9jdXMoaW4gfCBvdXQpIGV2ZW50c1xuXHQvLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY4Nzc4N1xuXHQvL1xuXHQvLyBTdXBwb3J0OiBDaHJvbWUsIFNhZmFyaVxuXHQvLyBmb2N1cyhpbiB8IG91dCkgZXZlbnRzIGZpcmUgYWZ0ZXIgZm9jdXMgJiBibHVyIGV2ZW50cyxcblx0Ly8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyXG5cdC8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0OTg1N1xuXHRpZiAoICFzdXBwb3J0LmZvY3VzaW4gKSB7XG5cdFx0alF1ZXJ5LmVhY2goIHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblx0XG5cdFx0XHQvLyBBdHRhY2ggYSBzaW5nbGUgY2FwdHVyaW5nIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50IHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dFxuXHRcdFx0dmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdGpRdWVyeS5ldmVudC5zaW11bGF0ZSggZml4LCBldmVudC50YXJnZXQsIGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICkgKTtcblx0XHRcdH07XG5cdFxuXHRcdFx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGZpeCBdID0ge1xuXHRcdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICk7XG5cdFxuXHRcdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdFx0ZG9jLmFkZEV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKSAtIDE7XG5cdFxuXHRcdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdFx0ZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblx0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXgsIGF0dGFjaGVzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0gKTtcblx0fVxuXHR2YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cdFxuXHR2YXIgbm9uY2UgPSBqUXVlcnkubm93KCk7XG5cdFxuXHR2YXIgcnF1ZXJ5ID0gKCAvXFw/LyApO1xuXHRcblx0XG5cdFxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuXHQvLyBXb3JrYXJvdW5kIGZhaWx1cmUgdG8gc3RyaW5nLWNhc3QgbnVsbCBpbnB1dFxuXHRqUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKyBcIlwiICk7XG5cdH07XG5cdFxuXHRcblx0Ly8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZ1xuXHRqUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0XHR2YXIgeG1sO1xuXHRcdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdHRyeSB7XG5cdFx0XHR4bWwgPSAoIG5ldyB3aW5kb3cuRE9NUGFyc2VyKCkgKS5wYXJzZUZyb21TdHJpbmcoIGRhdGEsIFwidGV4dC94bWxcIiApO1xuXHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0eG1sID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XG5cdFx0aWYgKCAheG1sIHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJwYXJzZXJlcnJvclwiICkubGVuZ3RoICkge1xuXHRcdFx0alF1ZXJ5LmVycm9yKCBcIkludmFsaWQgWE1MOiBcIiArIGRhdGEgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHhtbDtcblx0fTtcblx0XG5cdFxuXHR2YXJcblx0XHRyaGFzaCA9IC8jLiokLyxcblx0XHRydHMgPSAvKFs/Jl0pXz1bXiZdKi8sXG5cdFx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXHRcblx0XHQvLyAjNzY1MywgIzgxMjUsICM4MTUyOiBsb2NhbCBwcm90b2NvbCBkZXRlY3Rpb25cblx0XHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRcdHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuXHRcdHJwcm90b2NvbCA9IC9eXFwvXFwvLyxcblx0XG5cdFx0LyogUHJlZmlsdGVyc1xuXHRcdCAqIDEpIFRoZXkgYXJlIHVzZWZ1bCB0byBpbnRyb2R1Y2UgY3VzdG9tIGRhdGFUeXBlcyAoc2VlIGFqYXgvanNvbnAuanMgZm9yIGFuIGV4YW1wbGUpXG5cdFx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0XHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdFx0ICogICAgLSBBRlRFUiBwYXJhbSBzZXJpYWxpemF0aW9uIChzLmRhdGEgaXMgYSBzdHJpbmcgaWYgcy5wcm9jZXNzRGF0YSBpcyB0cnVlKVxuXHRcdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0XHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdFx0ICogNSkgZXhlY3V0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gY29udGludWUgZG93biB0byBcIipcIiBpZiBuZWVkZWRcblx0XHQgKi9cblx0XHRwcmVmaWx0ZXJzID0ge30sXG5cdFxuXHRcdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0XHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdFx0ICogMikgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHRcdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHRcdCAqL1xuXHRcdHRyYW5zcG9ydHMgPSB7fSxcblx0XG5cdFx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdFx0YWxsVHlwZXMgPSBcIiovXCIuY29uY2F0KCBcIipcIiApLFxuXHRcblx0XHQvLyBBbmNob3IgdGFnIGZvciBwYXJzaW5nIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0XHRvcmlnaW5BbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xuXHRcdG9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjtcblx0XG5cdC8vIEJhc2UgXCJjb25zdHJ1Y3RvclwiIGZvciBqUXVlcnkuYWpheFByZWZpbHRlciBhbmQgalF1ZXJ5LmFqYXhUcmFuc3BvcnRcblx0ZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cdFxuXHRcdC8vIGRhdGFUeXBlRXhwcmVzc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gXCIqXCJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblx0XG5cdFx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZUV4cHJlc3Npb24gIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblx0XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBmdW5jICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG5cdFx0XHRcdHdoaWxlICggKCBkYXRhVHlwZSA9IGRhdGFUeXBlc1sgaSsrIF0gKSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gUHJlcGVuZCBpZiByZXF1ZXN0ZWRcblx0XHRcdFx0XHRpZiAoIGRhdGFUeXBlWyAwIF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7XG5cdFxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS5wdXNoKCBmdW5jICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRcblx0Ly8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5cdGZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7XG5cdFxuXHRcdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRcdHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXHRcblx0XHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHRcdHZhciBzZWxlY3RlZDtcblx0XHRcdGluc3BlY3RlZFsgZGF0YVR5cGUgXSA9IHRydWU7XG5cdFx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0XHR2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApO1xuXHRcdFx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0ID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdFx0IXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXHRcblx0XHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHRcdHJldHVybiBzZWxlY3RlZDtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xuXHR9XG5cdFxuXHQvLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcblx0Ly8gdGhhdCB0YWtlcyBcImZsYXRcIiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZClcblx0Ly8gRml4ZXMgIzk4ODdcblx0ZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdFx0dmFyIGtleSwgZGVlcCxcblx0XHRcdGZsYXRPcHRpb25zID0galF1ZXJ5LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTtcblx0XG5cdFx0Zm9yICgga2V5IGluIHNyYyApIHtcblx0XHRcdGlmICggc3JjWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoIGRlZXAgPSB7fSApICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoIGRlZXAgKSB7XG5cdFx0XHRqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiB0YXJnZXQ7XG5cdH1cblx0XG5cdC8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcblx0ICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcblx0ICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdCAqL1xuXHRmdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXHRcblx0XHR2YXIgY3QsIHR5cGUsIGZpbmFsRGF0YVR5cGUsIGZpcnN0RGF0YVR5cGUsXG5cdFx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblx0XG5cdFx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0XHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRcdGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIgKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRcdGlmICggY3QgKSB7XG5cdFx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0eXBlICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcmVzcG9uc2UgZm9yIHRoZSBleHBlY3RlZCBkYXRhVHlwZVxuXHRcdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0Ly8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuXHRcdFx0Zm9yICggdHlwZSBpbiByZXNwb25zZXMgKSB7XG5cdFx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWyAwIF0gXSApIHtcblx0XHRcdFx0XHRmaW5hbERhdGFUeXBlID0gdHlwZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFmaXJzdERhdGFUeXBlICkge1xuXHRcdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHRcdH1cblx0XG5cdFx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHRcdC8vIFdlIGFkZCB0aGUgZGF0YVR5cGUgdG8gdGhlIGxpc3QgaWYgbmVlZGVkXG5cdFx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRcdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRcdGlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7XG5cdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VzWyBmaW5hbERhdGFUeXBlIF07XG5cdFx0fVxuXHR9XG5cdFxuXHQvKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG5cdCAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuXHQgKi9cblx0ZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHRcdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdFx0Y29udmVydGVycyA9IHt9LFxuXHRcblx0XHRcdC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cblx0XHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzLnNsaWNlKCk7XG5cdFxuXHRcdC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuXHRcdGlmICggZGF0YVR5cGVzWyAxIF0gKSB7XG5cdFx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdFx0Y29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblx0XG5cdFx0Ly8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcblx0XHR3aGlsZSAoIGN1cnJlbnQgKSB7XG5cdFxuXHRcdFx0aWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG5cdFx0XHRcdGpxWEhSWyBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gXSA9IHJlc3BvbnNlO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIEFwcGx5IHRoZSBkYXRhRmlsdGVyIGlmIHByb3ZpZGVkXG5cdFx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuXHRcdFx0fVxuXHRcblx0XHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdFx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcblx0XHRcdGlmICggY3VycmVudCApIHtcblx0XG5cdFx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRcdGlmICggY3VycmVudCA9PT0gXCIqXCIgKSB7XG5cdFxuXHRcdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXHRcblx0XHRcdFx0Ly8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXHRcblx0XHRcdFx0XHQvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlclxuXHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXHRcblx0XHRcdFx0XHQvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpclxuXHRcdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkge1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHRcdHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0XHRpZiAoIHRtcFsgMSBdID09PSBjdXJyZW50ICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXRcblx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgdG1wWyAwIF0gXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ29uZGVuc2UgZXF1aXZhbGVuY2UgY29udmVydGVyc1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBjb252ID09PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50ID0gdG1wWyAwIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBBcHBseSBjb252ZXJ0ZXIgKGlmIG5vdCBhbiBlcXVpdmFsZW5jZSlcblx0XHRcdFx0XHRpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gVW5sZXNzIGVycm9ycyBhcmUgYWxsb3dlZCB0byBidWJibGUsIGNhdGNoIGFuZCByZXR1cm4gdGhlbVxuXHRcdFx0XHRcdFx0aWYgKCBjb252ICYmIHMudGhyb3dzICkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRcdHN0YXRlOiBcInBhcnNlcmVycm9yXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJvcjogY29udiA/IGUgOiBcIk5vIGNvbnZlcnNpb24gZnJvbSBcIiArIHByZXYgKyBcIiB0byBcIiArIGN1cnJlbnRcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4geyBzdGF0ZTogXCJzdWNjZXNzXCIsIGRhdGE6IHJlc3BvbnNlIH07XG5cdH1cblx0XG5cdGpRdWVyeS5leHRlbmQoIHtcblx0XG5cdFx0Ly8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzXG5cdFx0YWN0aXZlOiAwLFxuXHRcblx0XHQvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0XG5cdFx0bGFzdE1vZGlmaWVkOiB7fSxcblx0XHRldGFnOiB7fSxcblx0XG5cdFx0YWpheFNldHRpbmdzOiB7XG5cdFx0XHR1cmw6IGxvY2F0aW9uLmhyZWYsXG5cdFx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdFx0aXNMb2NhbDogcmxvY2FsUHJvdG9jb2wudGVzdCggbG9jYXRpb24ucHJvdG9jb2wgKSxcblx0XHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRcdHByb2Nlc3NEYXRhOiB0cnVlLFxuXHRcdFx0YXN5bmM6IHRydWUsXG5cdFx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblx0XHRcdC8qXG5cdFx0XHR0aW1lb3V0OiAwLFxuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGRhdGFUeXBlOiBudWxsLFxuXHRcdFx0dXNlcm5hbWU6IG51bGwsXG5cdFx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRcdGNhY2hlOiBudWxsLFxuXHRcdFx0dGhyb3dzOiBmYWxzZSxcblx0XHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRcdGhlYWRlcnM6IHt9LFxuXHRcdFx0Ki9cblx0XG5cdFx0XHRhY2NlcHRzOiB7XG5cdFx0XHRcdFwiKlwiOiBhbGxUeXBlcyxcblx0XHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRcdGh0bWw6IFwidGV4dC9odG1sXCIsXG5cdFx0XHRcdHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG5cdFx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHRcdH0sXG5cdFxuXHRcdFx0Y29udGVudHM6IHtcblx0XHRcdFx0eG1sOiAvXFxieG1sXFxiLyxcblx0XHRcdFx0aHRtbDogL1xcYmh0bWwvLFxuXHRcdFx0XHRqc29uOiAvXFxianNvblxcYi9cblx0XHRcdH0sXG5cdFxuXHRcdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdFx0eG1sOiBcInJlc3BvbnNlWE1MXCIsXG5cdFx0XHRcdHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG5cdFx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0XHQvLyBLZXlzIHNlcGFyYXRlIHNvdXJjZSAob3IgY2F0Y2hhbGwgXCIqXCIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG5cdFx0XHRjb252ZXJ0ZXJzOiB7XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHRcblx0XHRcdFx0XCIqIHRleHRcIjogU3RyaW5nLFxuXHRcblx0XHRcdFx0Ly8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pXG5cdFx0XHRcdFwidGV4dCBodG1sXCI6IHRydWUsXG5cdFxuXHRcdFx0XHQvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG5cdFx0XHRcdFwidGV4dCBqc29uXCI6IGpRdWVyeS5wYXJzZUpTT04sXG5cdFxuXHRcdFx0XHQvLyBQYXJzZSB0ZXh0IGFzIHhtbFxuXHRcdFx0XHRcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuXHRcdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdFx0Ly8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmVcblx0XHRcdC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuXHRcdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdFx0dXJsOiB0cnVlLFxuXHRcdFx0XHRjb250ZXh0OiB0cnVlXG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0XHQvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuXG5cdFx0Ly8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cblx0XHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdFx0cmV0dXJuIHNldHRpbmdzID9cblx0XG5cdFx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRcdGFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDpcblx0XG5cdFx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdFx0YWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7XG5cdFx0fSxcblx0XG5cdFx0YWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksXG5cdFx0YWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cdFxuXHRcdC8vIE1haW4gbWV0aG9kXG5cdFx0YWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblx0XG5cdFx0XHQvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuXHRcdFx0aWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0XHR1cmwgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gRm9yY2Ugb3B0aW9ucyB0byBiZSBhbiBvYmplY3Rcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0XHRcdHZhciB0cmFuc3BvcnQsXG5cdFxuXHRcdFx0XHQvLyBVUkwgd2l0aG91dCBhbnRpLWNhY2hlIHBhcmFtXG5cdFx0XHRcdGNhY2hlVVJMLFxuXHRcblx0XHRcdFx0Ly8gUmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRcdHJlc3BvbnNlSGVhZGVycyxcblx0XG5cdFx0XHRcdC8vIHRpbWVvdXQgaGFuZGxlXG5cdFx0XHRcdHRpbWVvdXRUaW1lcixcblx0XG5cdFx0XHRcdC8vIFVybCBjbGVhbnVwIHZhclxuXHRcdFx0XHR1cmxBbmNob3IsXG5cdFxuXHRcdFx0XHQvLyBUbyBrbm93IGlmIGdsb2JhbCBldmVudHMgYXJlIHRvIGJlIGRpc3BhdGNoZWRcblx0XHRcdFx0ZmlyZUdsb2JhbHMsXG5cdFxuXHRcdFx0XHQvLyBMb29wIHZhcmlhYmxlXG5cdFx0XHRcdGksXG5cdFxuXHRcdFx0XHQvLyBDcmVhdGUgdGhlIGZpbmFsIG9wdGlvbnMgb2JqZWN0XG5cdFx0XHRcdHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuXHRcblx0XHRcdFx0Ly8gQ2FsbGJhY2tzIGNvbnRleHRcblx0XHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cdFxuXHRcdFx0XHQvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJlxuXHRcdFx0XHRcdCggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/XG5cdFx0XHRcdFx0XHRqUXVlcnkoIGNhbGxiYWNrQ29udGV4dCApIDpcblx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudCxcblx0XG5cdFx0XHRcdC8vIERlZmVycmVkc1xuXHRcdFx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0XHRjb21wbGV0ZURlZmVycmVkID0galF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cdFxuXHRcdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0XHRzdGF0dXNDb2RlID0gcy5zdGF0dXNDb2RlIHx8IHt9LFxuXHRcblx0XHRcdFx0Ly8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSlcblx0XHRcdFx0cmVxdWVzdEhlYWRlcnMgPSB7fSxcblx0XHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuXHRcblx0XHRcdFx0Ly8gVGhlIGpxWEhSIHN0YXRlXG5cdFx0XHRcdHN0YXRlID0gMCxcblx0XG5cdFx0XHRcdC8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZVxuXHRcdFx0XHRzdHJBYm9ydCA9IFwiY2FuY2VsZWRcIixcblx0XG5cdFx0XHRcdC8vIEZha2UgeGhyXG5cdFx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRcdHJlYWR5U3RhdGU6IDAsXG5cdFxuXHRcdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0XHRnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oIGtleSApIHtcblx0XHRcdFx0XHRcdHZhciBtYXRjaDtcblx0XHRcdFx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggIXJlc3BvbnNlSGVhZGVycyApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoICggbWF0Y2ggPSByaGVhZGVycy5leGVjKCByZXNwb25zZUhlYWRlcnNTdHJpbmcgKSApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIG1hdGNoID09IG51bGwgPyBudWxsIDogbWF0Y2g7XG5cdFx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdFx0Ly8gUmF3IHN0cmluZ1xuXHRcdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gc3RhdGUgPT09IDIgPyByZXNwb25zZUhlYWRlcnNTdHJpbmcgOiBudWxsO1xuXHRcdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRcdC8vIENhY2hlcyB0aGUgaGVhZGVyXG5cdFx0XHRcdFx0c2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0XHRcdFx0dmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0aWYgKCAhc3RhdGUgKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSB8fCBuYW1lO1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0XHR9LFxuXHRcblx0XHRcdFx0XHQvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlclxuXHRcdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhc3RhdGUgKSB7XG5cdFx0XHRcdFx0XHRcdHMubWltZVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdFx0XHRzdGF0dXNDb2RlOiBmdW5jdGlvbiggbWFwICkge1xuXHRcdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0XHRpZiAoIG1hcCApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBzdGF0ZSA8IDIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuXHRcdFx0XHRcdFx0XHRcdFx0c3RhdHVzQ29kZVsgY29kZSBdID0gWyBzdGF0dXNDb2RlWyBjb2RlIF0sIG1hcFsgY29kZSBdIF07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0XHRqcVhIUi5hbHdheXMoIG1hcFsganFYSFIuc3RhdHVzIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdFx0fSxcblx0XG5cdFx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSByZXF1ZXN0XG5cdFx0XHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCBzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0XHRpZiAoIHRyYW5zcG9ydCApIHtcblx0XHRcdFx0XHRcdFx0dHJhbnNwb3J0LmFib3J0KCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGRvbmUoIDAsIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcblx0XHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRcdGRlZmVycmVkLnByb21pc2UoIGpxWEhSICkuY29tcGxldGUgPSBjb21wbGV0ZURlZmVycmVkLmFkZDtcblx0XHRcdGpxWEhSLnN1Y2Nlc3MgPSBqcVhIUi5kb25lO1xuXHRcdFx0anFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXHRcblx0XHRcdC8vIFJlbW92ZSBoYXNoIGNoYXJhY3RlciAoIzc1MzE6IGFuZCBzdHJpbmcgcHJvbW90aW9uKVxuXHRcdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0XHQvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKVxuXHRcdFx0Ly8gV2UgYWxzbyB1c2UgdGhlIHVybCBwYXJhbWV0ZXIgaWYgYXZhaWxhYmxlXG5cdFx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgbG9jYXRpb24uaHJlZiApICsgXCJcIiApLnJlcGxhY2UoIHJoYXNoLCBcIlwiIClcblx0XHRcdFx0LnJlcGxhY2UoIHJwcm90b2NvbCwgbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKTtcblx0XG5cdFx0XHQvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDRcblx0XHRcdHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cdFxuXHRcdFx0Ly8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdFxuXHRcdFx0cy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcblx0XHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB0aGUgb3JpZ2luIGRvZXNuJ3QgbWF0Y2ggdGhlIGN1cnJlbnQgb3JpZ2luLlxuXHRcdFx0aWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7XG5cdFx0XHRcdHVybEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdFxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTgtMTErXG5cdFx0XHRcdC8vIElFIHRocm93cyBleGNlcHRpb24gaWYgdXJsIGlzIG1hbGZvcm1lZCwgZS5nLiBodHRwOi8vZXhhbXBsZS5jb206ODB4L1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHVybEFuY2hvci5ocmVmID0gcy51cmw7XG5cdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFOC0xMStcblx0XHRcdFx0XHQvLyBBbmNob3IncyBob3N0IHByb3BlcnR5IGlzbid0IGNvcnJlY3RseSBzZXQgd2hlbiBzLnVybCBpcyByZWxhdGl2ZVxuXHRcdFx0XHRcdHVybEFuY2hvci5ocmVmID0gdXJsQW5jaG9yLmhyZWY7XG5cdFx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IG9yaWdpbkFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIG9yaWdpbkFuY2hvci5ob3N0ICE9PVxuXHRcdFx0XHRcdFx0dXJsQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgdXJsQW5jaG9yLmhvc3Q7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcblx0XHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciBwYXJzaW5nIHRoZSBVUkwsIGFzc3VtZSBpdCBpcyBjcm9zc0RvbWFpbixcblx0XHRcdFx0XHQvLyBpdCBjYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIHRyYW5zcG9ydCBpZiBpdCBpcyBpbnZhbGlkXG5cdFx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRcdGlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0cy5kYXRhID0galF1ZXJ5LnBhcmFtKCBzLmRhdGEsIHMudHJhZGl0aW9uYWwgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBcHBseSBwcmVmaWx0ZXJzXG5cdFx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblx0XG5cdFx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhIHByZWZpbHRlciwgc3RvcCB0aGVyZVxuXHRcdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvXG5cdFx0XHQvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KVxuXHRcdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cdFxuXHRcdFx0Ly8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0c1xuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBcImFqYXhTdGFydFwiICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gVXBwZXJjYXNlIHRoZSB0eXBlXG5cdFx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblx0XG5cdFx0XHQvLyBEZXRlcm1pbmUgaWYgcmVxdWVzdCBoYXMgY29udGVudFxuXHRcdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cdFxuXHRcdFx0Ly8gU2F2ZSB0aGUgVVJMIGluIGNhc2Ugd2UncmUgdG95aW5nIHdpdGggdGhlIElmLU1vZGlmaWVkLVNpbmNlXG5cdFx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHRcdGNhY2hlVVJMID0gcy51cmw7XG5cdFxuXHRcdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRcdGlmICggIXMuaGFzQ29udGVudCApIHtcblx0XG5cdFx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdFx0aWYgKCBzLmRhdGEgKSB7XG5cdFx0XHRcdFx0Y2FjaGVVUkwgPSAoIHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGEgKTtcblx0XG5cdFx0XHRcdFx0Ly8gIzk2ODI6IHJlbW92ZSBkYXRhIHNvIHRoYXQgaXQncyBub3QgdXNlZCBpbiBhbiBldmVudHVhbCByZXRyeVxuXHRcdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcblx0XHRcdFx0aWYgKCBzLmNhY2hlID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRzLnVybCA9IHJ0cy50ZXN0KCBjYWNoZVVSTCApID9cblx0XG5cdFx0XHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IGEgJ18nIHBhcmFtZXRlciwgc2V0IGl0cyB2YWx1ZVxuXHRcdFx0XHRcdFx0Y2FjaGVVUkwucmVwbGFjZSggcnRzLCBcIiQxXz1cIiArIG5vbmNlKysgKSA6XG5cdFxuXHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFkZCBvbmUgdG8gdGhlIGVuZFxuXHRcdFx0XHRcdFx0Y2FjaGVVUkwgKyAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gXCImXCIgOiBcIj9cIiApICsgXCJfPVwiICsgbm9uY2UrKztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTZXQgdGhlIGNvcnJlY3QgaGVhZGVyLCBpZiBkYXRhIGlzIGJlaW5nIHNlbnRcblx0XHRcdGlmICggcy5kYXRhICYmIHMuaGFzQ29udGVudCAmJiBzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSB8fCBvcHRpb25zLmNvbnRlbnRUeXBlICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlcihcblx0XHRcdFx0XCJBY2NlcHRcIixcblx0XHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/XG5cdFx0XHRcdFx0cy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gK1xuXHRcdFx0XHRcdFx0KCBzLmRhdGFUeXBlc1sgMCBdICE9PSBcIipcIiA/IFwiLCBcIiArIGFsbFR5cGVzICsgXCI7IHE9MC4wMVwiIDogXCJcIiApIDpcblx0XHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHRcdCk7XG5cdFxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0XHRmb3IgKCBpIGluIHMuaGVhZGVycyApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggaSwgcy5oZWFkZXJzWyBpIF0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBBbGxvdyBjdXN0b20gaGVhZGVycy9taW1ldHlwZXMgYW5kIGVhcmx5IGFib3J0XG5cdFx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJlxuXHRcdFx0XHQoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG5cdFxuXHRcdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdFx0cmV0dXJuIGpxWEhSLmFib3J0KCk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gQWJvcnRpbmcgaXMgbm8gbG9uZ2VyIGEgY2FuY2VsbGF0aW9uXG5cdFx0XHRzdHJBYm9ydCA9IFwiYWJvcnRcIjtcblx0XG5cdFx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrcyBvbiBkZWZlcnJlZHNcblx0XHRcdGZvciAoIGkgaW4geyBzdWNjZXNzOiAxLCBlcnJvcjogMSwgY29tcGxldGU6IDEgfSApIHtcblx0XHRcdFx0anFYSFJbIGkgXSggc1sgaSBdICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdFx0dHJhbnNwb3J0ID0gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cdFxuXHRcdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0XHRpZiAoICF0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdGRvbmUoIC0xLCBcIk5vIFRyYW5zcG9ydFwiICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gMTtcblx0XG5cdFx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheFNlbmRcIiwgWyBqcVhIUiwgcyBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGFqYXhTZW5kLCBzdG9wIHRoZXJlXG5cdFx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBUaW1lb3V0XG5cdFx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHRcdHRpbWVvdXRUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGpxWEhSLmFib3J0KCBcInRpbWVvdXRcIiApO1xuXHRcdFx0XHRcdH0sIHMudGltZW91dCApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHN0YXRlID0gMTtcblx0XHRcdFx0XHR0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFByb3BhZ2F0ZSBleGNlcHRpb24gYXMgZXJyb3IgaWYgbm90IGRvbmVcblx0XHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRcdGRvbmUoIC0xLCBlICk7XG5cdFxuXHRcdFx0XHRcdC8vIFNpbXBseSByZXRocm93IG90aGVyd2lzZVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIENhbGxiYWNrIGZvciB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZVxuXHRcdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHRcdHZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsXG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IG5hdGl2ZVN0YXR1c1RleHQ7XG5cdFxuXHRcdFx0XHQvLyBDYWxsZWQgb25jZVxuXHRcdFx0XHRpZiAoIHN0YXRlID09PSAyICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG5cdFx0XHRcdHN0YXRlID0gMjtcblx0XG5cdFx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRcdGlmICggdGltZW91dFRpbWVyICkge1xuXHRcdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuXHRcdFx0XHQvLyAobm8gbWF0dGVyIGhvdyBsb25nIHRoZSBqcVhIUiBvYmplY3Qgd2lsbCBiZSB1c2VkKVxuXHRcdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cdFxuXHRcdFx0XHQvLyBDYWNoZSByZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblx0XG5cdFx0XHRcdC8vIFNldCByZWFkeVN0YXRlXG5cdFx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cdFxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgaWYgc3VjY2Vzc2Z1bFxuXHRcdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblx0XG5cdFx0XHRcdC8vIEdldCByZXNwb25zZSBkYXRhXG5cdFx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRcdHJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpXG5cdFx0XHRcdHJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7XG5cdFxuXHRcdFx0XHQvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZ1xuXHRcdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblx0XG5cdFx0XHRcdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRcdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiTGFzdC1Nb2RpZmllZFwiICk7XG5cdFx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcImV0YWdcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gXCJIRUFEXCIgKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub2NvbnRlbnRcIjtcblx0XG5cdFx0XHRcdFx0Ly8gaWYgbm90IG1vZGlmaWVkXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggc3RhdHVzID09PSAzMDQgKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXHRcblx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGRhdGEsIGxldCdzIGNvbnZlcnQgaXRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlO1xuXHRcdFx0XHRcdFx0c3VjY2VzcyA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdFx0aXNTdWNjZXNzID0gIWVycm9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRcdGVycm9yID0gc3RhdHVzVGV4dDtcblx0XHRcdFx0XHRpZiAoIHN0YXR1cyB8fCAhc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXR1cyA8IDAgKSB7XG5cdFx0XHRcdFx0XHRcdHN0YXR1cyA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdFxuXHRcdFx0XHRqcVhIUi5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblx0XG5cdFx0XHRcdC8vIFN1Y2Nlc3MvRXJyb3Jcblx0XHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcblx0XHRcdFx0c3RhdHVzQ29kZSA9IHVuZGVmaW5lZDtcblx0XG5cdFx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsXG5cdFx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0XHRjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApO1xuXHRcblx0XHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4Q29tcGxldGVcIiwgWyBqcVhIUiwgcyBdICk7XG5cdFxuXHRcdFx0XHRcdC8vIEhhbmRsZSB0aGUgZ2xvYmFsIEFKQVggY291bnRlclxuXHRcdFx0XHRcdGlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggXCJhamF4U3RvcFwiICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdH0sXG5cdFxuXHRcdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssIFwianNvblwiICk7XG5cdFx0fSxcblx0XG5cdFx0Z2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIHVuZGVmaW5lZCwgY2FsbGJhY2ssIFwic2NyaXB0XCIgKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdGpRdWVyeS5lYWNoKCBbIFwiZ2V0XCIsIFwicG9zdFwiIF0sIGZ1bmN0aW9uKCBpLCBtZXRob2QgKSB7XG5cdFx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXHRcblx0XHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHRcdHR5cGUgPSB0eXBlIHx8IGNhbGxiYWNrO1xuXHRcdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpXG5cdFx0XHRyZXR1cm4galF1ZXJ5LmFqYXgoIGpRdWVyeS5leHRlbmQoIHtcblx0XHRcdFx0dXJsOiB1cmwsXG5cdFx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdFx0ZGF0YVR5cGU6IHR5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0XHR9LCBqUXVlcnkuaXNQbGFpbk9iamVjdCggdXJsICkgJiYgdXJsICkgKTtcblx0XHR9O1xuXHR9ICk7XG5cdFxuXHRcblx0alF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmFqYXgoIHtcblx0XHRcdHVybDogdXJsLFxuXHRcblx0XHRcdC8vIE1ha2UgdGhpcyBleHBsaWNpdCwgc2luY2UgdXNlciBjYW4gb3ZlcnJpZGUgdGhpcyB0aHJvdWdoIGFqYXhTZXR1cCAoIzExMjY0KVxuXHRcdFx0dHlwZTogXCJHRVRcIixcblx0XHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdFx0YXN5bmM6IGZhbHNlLFxuXHRcdFx0Z2xvYmFsOiBmYWxzZSxcblx0XHRcdFwidGhyb3dzXCI6IHRydWVcblx0XHR9ICk7XG5cdH07XG5cdFxuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdFx0dmFyIHdyYXA7XG5cdFxuXHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cdFxuXHRcdFx0XHQvLyBUaGUgZWxlbWVudHMgdG8gd3JhcCB0aGUgdGFyZ2V0IGFyb3VuZFxuXHRcdFx0XHR3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTtcblx0XG5cdFx0XHRcdGlmICggdGhpc1sgMCBdLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0d3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR3cmFwLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0gPSB0aGlzO1xuXHRcblx0XHRcdFx0XHR3aGlsZSAoIGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQgKSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gZWxlbS5maXJzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHJldHVybiBlbGVtO1xuXHRcdFx0XHR9ICkuYXBwZW5kKCB0aGlzICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XG5cdFx0d3JhcElubmVyOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksXG5cdFx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cdFxuXHRcdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9LFxuXHRcblx0XHR3cmFwOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRcdHZhciBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKTtcblx0XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaXNGdW5jdGlvbiA/IGh0bWwuY2FsbCggdGhpcywgaSApIDogaHRtbCApO1xuXHRcdFx0fSApO1xuXHRcdH0sXG5cdFxuXHRcdHVud3JhcDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImJvZHlcIiApICkge1xuXHRcdFx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApLmVuZCgpO1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdGpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuICFqUXVlcnkuZXhwci5maWx0ZXJzLnZpc2libGUoIGVsZW0gKTtcblx0fTtcblx0alF1ZXJ5LmV4cHIuZmlsdGVycy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFxuXHRcdC8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyXG5cdFx0Ly8gT3BlcmEgcmVwb3J0cyBvZmZzZXRXaWR0aHMgYW5kIG9mZnNldEhlaWdodHMgbGVzcyB0aGFuIHplcm8gb24gc29tZSBlbGVtZW50c1xuXHRcdC8vIFVzZSBPUiBpbnN0ZWFkIG9mIEFORCBhcyB0aGUgZWxlbWVudCBpcyBub3QgdmlzaWJsZSBpZiBlaXRoZXIgaXMgdHJ1ZVxuXHRcdC8vIFNlZSB0aWNrZXRzICMxMDQwNiBhbmQgIzEzMTMyXG5cdFx0cmV0dXJuIGVsZW0ub2Zmc2V0V2lkdGggPiAwIHx8IGVsZW0ub2Zmc2V0SGVpZ2h0ID4gMCB8fCBlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoID4gMDtcblx0fTtcblx0XG5cdFxuXHRcblx0XG5cdHZhciByMjAgPSAvJTIwL2csXG5cdFx0cmJyYWNrZXQgPSAvXFxbXFxdJC8sXG5cdFx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRcdHJzdWJtaXR0ZXJUeXBlcyA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxcblx0XHRyc3VibWl0dGFibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7XG5cdFxuXHRmdW5jdGlvbiBidWlsZFBhcmFtcyggcHJlZml4LCBvYmosIHRyYWRpdGlvbmFsLCBhZGQgKSB7XG5cdFx0dmFyIG5hbWU7XG5cdFxuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG9iaiApICkge1xuXHRcblx0XHRcdC8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLlxuXHRcdFx0alF1ZXJ5LmVhY2goIG9iaiwgZnVuY3Rpb24oIGksIHYgKSB7XG5cdFx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cdFxuXHRcdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0XHRhZGQoIHByZWZpeCwgdiApO1xuXHRcblx0XHRcdFx0fSBlbHNlIHtcblx0XG5cdFx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdFx0YnVpbGRQYXJhbXMoXG5cdFx0XHRcdFx0XHRwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPSBudWxsID8gaSA6IFwiXCIgKSArIFwiXVwiLFxuXHRcdFx0XHRcdFx0dixcblx0XHRcdFx0XHRcdHRyYWRpdGlvbmFsLFxuXHRcdFx0XHRcdFx0YWRkXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcblx0XHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXHRcblx0XHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0XHRidWlsZFBhcmFtcyggcHJlZml4ICsgXCJbXCIgKyBuYW1lICsgXCJdXCIsIG9ialsgbmFtZSBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0XHR9XG5cdFxuXHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0Ly8gU2VyaWFsaXplIHNjYWxhciBpdGVtLlxuXHRcdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2Zcblx0Ly8ga2V5L3ZhbHVlcyBpbnRvIGEgcXVlcnkgc3RyaW5nXG5cdGpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0XHR2YXIgcHJlZml4LFxuXHRcdFx0cyA9IFtdLFxuXHRcdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFxuXHRcdFx0XHQvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWVcblx0XHRcdFx0dmFsdWUgPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSA/IHZhbHVlKCkgOiAoIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKTtcblx0XHRcdFx0c1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgKTtcblx0XHRcdH07XG5cdFxuXHRcdC8vIFNldCB0cmFkaXRpb25hbCB0byB0cnVlIGZvciBqUXVlcnkgPD0gMS4zLjIgYmVoYXZpb3IuXG5cdFx0aWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7XG5cdFx0fVxuXHRcblx0XHQvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7XG5cdFxuXHRcdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG5cdFx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7XG5cdFx0XHR9ICk7XG5cdFxuXHRcdH0gZWxzZSB7XG5cdFxuXHRcdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHRcdC8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LlxuXHRcdFx0Zm9yICggcHJlZml4IGluIGEgKSB7XG5cdFx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHQvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uXG5cdFx0cmV0dXJuIHMuam9pbiggXCImXCIgKS5yZXBsYWNlKCByMjAsIFwiK1wiICk7XG5cdH07XG5cdFxuXHRqUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdFx0c2VyaWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHRcdH0sXG5cdFx0c2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHRcdC8vIENhbiBhZGQgcHJvcEhvb2sgZm9yIFwiZWxlbWVudHNcIiB0byBmaWx0ZXIgb3IgYWRkIGZvcm0gZWxlbWVudHNcblx0XHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0XHRyZXR1cm4gZWxlbWVudHMgPyBqUXVlcnkubWFrZUFycmF5KCBlbGVtZW50cyApIDogdGhpcztcblx0XHRcdH0gKVxuXHRcdFx0LmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciB0eXBlID0gdGhpcy50eXBlO1xuXHRcblx0XHRcdFx0Ly8gVXNlIC5pcyggXCI6ZGlzYWJsZWRcIiApIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzXG5cdFx0XHRcdHJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCBcIjpkaXNhYmxlZFwiICkgJiZcblx0XHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdFx0KCB0aGlzLmNoZWNrZWQgfHwgIXJjaGVja2FibGVUeXBlLnRlc3QoIHR5cGUgKSApO1xuXHRcdFx0fSApXG5cdFx0XHQubWFwKCBmdW5jdGlvbiggaSwgZWxlbSApIHtcblx0XHRcdFx0dmFyIHZhbCA9IGpRdWVyeSggdGhpcyApLnZhbCgpO1xuXHRcblx0XHRcdFx0cmV0dXJuIHZhbCA9PSBudWxsID9cblx0XHRcdFx0XHRudWxsIDpcblx0XHRcdFx0XHRqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuXHRcdFx0XHRcdFx0alF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuXHRcdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHRcdH0gKS5nZXQoKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdFxuXHRqUXVlcnkuYWpheFNldHRpbmdzLnhociA9IGZ1bmN0aW9uKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuXHRcdH0gY2F0Y2ggKCBlICkge31cblx0fTtcblx0XG5cdHZhciB4aHJTdWNjZXNzU3RhdHVzID0ge1xuXHRcblx0XHRcdC8vIEZpbGUgcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgY29kZSAwLCBhc3N1bWUgMjAwXG5cdFx0XHQwOiAyMDAsXG5cdFxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0XHQvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcblx0XHRcdDEyMjM6IDIwNFxuXHRcdH0sXG5cdFx0eGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblx0XG5cdHN1cHBvcnQuY29ycyA9ICEheGhyU3VwcG9ydGVkICYmICggXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB4aHJTdXBwb3J0ZWQgKTtcblx0c3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cdFxuXHRqUXVlcnkuYWpheFRyYW5zcG9ydCggZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0dmFyIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrO1xuXHRcblx0XHQvLyBDcm9zcyBkb21haW4gb25seSBhbGxvd2VkIGlmIHN1cHBvcnRlZCB0aHJvdWdoIFhNTEh0dHBSZXF1ZXN0XG5cdFx0aWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c2VuZDogZnVuY3Rpb24oIGhlYWRlcnMsIGNvbXBsZXRlICkge1xuXHRcdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKTtcblx0XG5cdFx0XHRcdFx0eGhyLm9wZW4oXG5cdFx0XHRcdFx0XHRvcHRpb25zLnR5cGUsXG5cdFx0XHRcdFx0XHRvcHRpb25zLnVybCxcblx0XHRcdFx0XHRcdG9wdGlvbnMuYXN5bmMsXG5cdFx0XHRcdFx0XHRvcHRpb25zLnVzZXJuYW1lLFxuXHRcdFx0XHRcdFx0b3B0aW9ucy5wYXNzd29yZFxuXHRcdFx0XHRcdCk7XG5cdFxuXHRcdFx0XHRcdC8vIEFwcGx5IGN1c3RvbSBmaWVsZHMgaWYgcHJvdmlkZWRcblx0XHRcdFx0XHRpZiAoIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdFx0eGhyWyBpIF0gPSBvcHRpb25zLnhockZpZWxkc1sgaSBdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuXHRcdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHRcdHhoci5vdmVycmlkZU1pbWVUeXBlKCBvcHRpb25zLm1pbWVUeXBlICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBYLVJlcXVlc3RlZC1XaXRoIGhlYWRlclxuXHRcdFx0XHRcdC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcblx0XHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHRcdC8vIChpdCBjYW4gYWx3YXlzIGJlIHNldCBvbiBhIHBlci1yZXF1ZXN0IGJhc2lzIG9yIGV2ZW4gdXNpbmcgYWpheFNldHVwKVxuXHRcdFx0XHRcdC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuXHRcdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gKSB7XG5cdFx0XHRcdFx0XHRoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0XHRmb3IgKCBpIGluIGhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlciggaSwgaGVhZGVyc1sgaSBdICk7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBDYWxsYmFja1xuXHRcdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBlcnJvckNhbGxiYWNrID0geGhyLm9ubG9hZCA9XG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0geGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gXCJlcnJvclwiICkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gT24gYSBtYW51YWwgbmF0aXZlIGFib3J0LCBJRTkgdGhyb3dzXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBlcnJvcnMgb24gYW55IHByb3BlcnR5IGFjY2VzcyB0aGF0IGlzIG5vdCByZWFkeVN0YXRlXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGVvZiB4aHIuc3RhdHVzICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZSggMCwgXCJlcnJvclwiICk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHQsXG5cdFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJRTkgaGFzIG5vIFhIUjIgYnV0IHRocm93cyBvbiBiaW5hcnkgKHRyYWMtMTE0MjYpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCggeGhyLnJlc3BvbnNlVHlwZSB8fCBcInRleHRcIiApICE9PSBcInRleHRcIiAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHhoci5yZXNwb25zZVRleHQgIT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHsgYmluYXJ5OiB4aHIucmVzcG9uc2UgfSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0eyB0ZXh0OiB4aHIucmVzcG9uc2VUZXh0IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fTtcblx0XG5cdFx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHRcdGVycm9yQ2FsbGJhY2sgPSB4aHIub25lcnJvciA9IGNhbGxiYWNrKCBcImVycm9yXCIgKTtcblx0XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0XHRcdFx0Ly8gVXNlIG9ucmVhZHlzdGF0ZWNoYW5nZSB0byByZXBsYWNlIG9uYWJvcnRcblx0XHRcdFx0XHQvLyB0byBoYW5kbGUgdW5jYXVnaHQgYWJvcnRzXG5cdFx0XHRcdFx0aWYgKCB4aHIub25hYm9ydCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0eGhyLm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayByZWFkeVN0YXRlIGJlZm9yZSB0aW1lb3V0IGFzIGl0IGNoYW5nZXNcblx0XHRcdFx0XHRcdFx0aWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gNCApIHtcblx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWxsb3cgb25lcnJvciB0byBiZSBjYWxsZWQgZmlyc3QsXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYnV0IHRoYXQgd2lsbCBub3QgaGFuZGxlIGEgbmF0aXZlIGFib3J0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWxzbywgc2F2ZSBlcnJvckNhbGxiYWNrIHRvIGEgdmFyaWFibGVcblx0XHRcdFx0XHRcdFx0XHQvLyBhcyB4aHIub25lcnJvciBjYW5ub3QgYmUgYWNjZXNzZWRcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlcnJvckNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIHRoZSBhYm9ydCBjYWxsYmFja1xuXHRcdFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2soIFwiYWJvcnRcIiApO1xuXHRcblx0XHRcdFx0XHR0cnkge1xuXHRcblx0XHRcdFx0XHRcdC8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbilcblx0XHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XG5cdFx0XHRcdFx0XHQvLyAjMTQ2ODM6IE9ubHkgcmV0aHJvdyBpZiB0aGlzIGhhc24ndCBiZWVuIG5vdGlmaWVkIGFzIGFuIGVycm9yIHlldFxuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0Ly8gSW5zdGFsbCBzY3JpcHQgZGF0YVR5cGVcblx0alF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRcdGFjY2VwdHM6IHtcblx0XHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIFwiICtcblx0XHRcdFx0XCJhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIlxuXHRcdH0sXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHNjcmlwdDogL1xcYig/OmphdmF8ZWNtYSlzY3JpcHRcXGIvXG5cdFx0fSxcblx0XHRjb252ZXJ0ZXJzOiB7XG5cdFx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0XHRyZXR1cm4gdGV4dDtcblx0XHRcdH1cblx0XHR9XG5cdH0gKTtcblx0XG5cdC8vIEhhbmRsZSBjYWNoZSdzIHNwZWNpYWwgY2FzZSBhbmQgY3Jvc3NEb21haW5cblx0alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRcdGlmICggcy5jYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0cy5jYWNoZSA9IGZhbHNlO1xuXHRcdH1cblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0XHRzLnR5cGUgPSBcIkdFVFwiO1xuXHRcdH1cblx0fSApO1xuXHRcblx0Ly8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0XG5cdGpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0XG5cdFx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRcdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHRcdHZhciBzY3JpcHQsIGNhbGxiYWNrO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c2VuZDogZnVuY3Rpb24oIF8sIGNvbXBsZXRlICkge1xuXHRcdFx0XHRcdHNjcmlwdCA9IGpRdWVyeSggXCI8c2NyaXB0PlwiICkucHJvcCgge1xuXHRcdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdFx0c3JjOiBzLnVybFxuXHRcdFx0XHRcdH0gKS5vbihcblx0XHRcdFx0XHRcdFwibG9hZCBlcnJvclwiLFxuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0XHRzY3JpcHQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIGV2dC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDAsIGV2dC50eXBlICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQpO1xuXHRcblx0XHRcdFx0XHQvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnlcblx0XHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHRbIDAgXSApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0dmFyIG9sZENhbGxiYWNrcyA9IFtdLFxuXHRcdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cdFxuXHQvLyBEZWZhdWx0IGpzb25wIHNldHRpbmdzXG5cdGpRdWVyeS5hamF4U2V0dXAoIHtcblx0XHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRcdGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNhbGxiYWNrID0gb2xkQ2FsbGJhY2tzLnBvcCgpIHx8ICggalF1ZXJ5LmV4cGFuZG8gKyBcIl9cIiArICggbm9uY2UrKyApICk7XG5cdFx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRcdHJldHVybiBjYWxsYmFjaztcblx0XHR9XG5cdH0gKTtcblx0XG5cdC8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0c1xuXHRqUXVlcnkuYWpheFByZWZpbHRlciggXCJqc29uIGpzb25wXCIsIGZ1bmN0aW9uKCBzLCBvcmlnaW5hbFNldHRpbmdzLCBqcVhIUiApIHtcblx0XG5cdFx0dmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLFxuXHRcdFx0anNvblByb3AgPSBzLmpzb25wICE9PSBmYWxzZSAmJiAoIHJqc29ucC50ZXN0KCBzLnVybCApID9cblx0XHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHRcdHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0XHQoIHMuY29udGVudFR5cGUgfHwgXCJcIiApXG5cdFx0XHRcdFx0XHQuaW5kZXhPZiggXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiApID09PSAwICYmXG5cdFx0XHRcdFx0cmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0XHQpO1xuXHRcblx0XHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdFx0aWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSBcImpzb25wXCIgKSB7XG5cdFxuXHRcdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdFx0Y2FsbGJhY2tOYW1lID0gcy5qc29ucENhbGxiYWNrID0galF1ZXJ5LmlzRnVuY3Rpb24oIHMuanNvbnBDYWxsYmFjayApID9cblx0XHRcdFx0cy5qc29ucENhbGxiYWNrKCkgOlxuXHRcdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cdFxuXHRcdFx0Ly8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YVxuXHRcdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdFx0c1sganNvblByb3AgXSA9IHNbIGpzb25Qcm9wIF0ucmVwbGFjZSggcmpzb25wLCBcIiQxXCIgKyBjYWxsYmFja05hbWUgKTtcblx0XHRcdH0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkge1xuXHRcdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRcdHMuY29udmVydGVyc1sgXCJzY3JpcHQganNvblwiIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyBcIiB3YXMgbm90IGNhbGxlZFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0XHR9O1xuXHRcblx0XHRcdC8vIEZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRcdHMuZGF0YVR5cGVzWyAwIF0gPSBcImpzb25cIjtcblx0XG5cdFx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0XHRvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07XG5cdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdFx0fTtcblx0XG5cdFx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRcdGpxWEhSLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFxuXHRcdFx0XHQvLyBJZiBwcmV2aW91cyB2YWx1ZSBkaWRuJ3QgZXhpc3QgLSByZW1vdmUgaXRcblx0XHRcdFx0aWYgKCBvdmVyd3JpdHRlbiA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdGpRdWVyeSggd2luZG93ICkucmVtb3ZlUHJvcCggY2FsbGJhY2tOYW1lICk7XG5cdFxuXHRcdFx0XHQvLyBPdGhlcndpc2UgcmVzdG9yZSBwcmVleGlzdGluZyB2YWx1ZVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gU2F2ZSBiYWNrIGFzIGZyZWVcblx0XHRcdFx0aWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHtcblx0XG5cdFx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kXG5cdFx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXHRcblx0XHRcdFx0XHQvLyBTYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlXG5cdFx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdFx0aWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBqUXVlcnkuaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHtcblx0XHRcdFx0XHRvdmVyd3JpdHRlbiggcmVzcG9uc2VDb250YWluZXJbIDAgXSApO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IG92ZXJ3cml0dGVuID0gdW5kZWZpbmVkO1xuXHRcdFx0fSApO1xuXHRcblx0XHRcdC8vIERlbGVnYXRlIHRvIHNjcmlwdFxuXHRcdFx0cmV0dXJuIFwic2NyaXB0XCI7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRcblx0XG5cdFxuXHQvLyBBcmd1bWVudCBcImRhdGFcIiBzaG91bGQgYmUgc3RyaW5nIG9mIGh0bWxcblx0Ly8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LFxuXHQvLyBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHQvLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5cdGpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7XG5cdFx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRcdGNvbnRleHQgPSBmYWxzZTtcblx0XHR9XG5cdFx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cdFxuXHRcdHZhciBwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKSxcblx0XHRcdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cdFxuXHRcdC8vIFNpbmdsZSB0YWdcblx0XHRpZiAoIHBhcnNlZCApIHtcblx0XHRcdHJldHVybiBbIGNvbnRleHQuY3JlYXRlRWxlbWVudCggcGFyc2VkWyAxIF0gKSBdO1xuXHRcdH1cblx0XG5cdFx0cGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblx0XG5cdFx0aWYgKCBzY3JpcHRzICYmIHNjcmlwdHMubGVuZ3RoICkge1xuXHRcdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcblx0fTtcblx0XG5cdFxuXHQvLyBLZWVwIGEgY29weSBvZiB0aGUgb2xkIGxvYWQgbWV0aG9kXG5cdHZhciBfbG9hZCA9IGpRdWVyeS5mbi5sb2FkO1xuXHRcblx0LyoqXG5cdCAqIExvYWQgYSB1cmwgaW50byBhIHBhZ2Vcblx0ICovXG5cdGpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcblx0XHRpZiAoIHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIgJiYgX2xvYWQgKSB7XG5cdFx0XHRyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0XG5cdFx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRcdHNlbGYgPSB0aGlzLFxuXHRcdFx0b2ZmID0gdXJsLmluZGV4T2YoIFwiIFwiICk7XG5cdFxuXHRcdGlmICggb2ZmID4gLTEgKSB7XG5cdFx0XHRzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0XHR1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuXHRcdH1cblx0XG5cdFx0Ly8gSWYgaXQncyBhIGZ1bmN0aW9uXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7XG5cdFxuXHRcdFx0Ly8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcblx0XHRcdGNhbGxiYWNrID0gcGFyYW1zO1xuXHRcdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXHRcblx0XHQvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nXG5cdFx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHR0eXBlID0gXCJQT1NUXCI7XG5cdFx0fVxuXHRcblx0XHQvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuXHRcdGlmICggc2VsZi5sZW5ndGggPiAwICkge1xuXHRcdFx0alF1ZXJ5LmFqYXgoIHtcblx0XHRcdFx0dXJsOiB1cmwsXG5cdFxuXHRcdFx0XHQvLyBJZiBcInR5cGVcIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gXCJHRVRcIiBtZXRob2Qgd2lsbCBiZSB1c2VkLlxuXHRcdFx0XHQvLyBNYWtlIHZhbHVlIG9mIHRoaXMgZmllbGQgZXhwbGljaXQgc2luY2Vcblx0XHRcdFx0Ly8gdXNlciBjYW4gb3ZlcnJpZGUgaXQgdGhyb3VnaCBhamF4U2V0dXAgbWV0aG9kXG5cdFx0XHRcdHR5cGU6IHR5cGUgfHwgXCJHRVRcIixcblx0XHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxuXHRcdFx0XHRkYXRhOiBwYXJhbXNcblx0XHRcdH0gKS5kb25lKCBmdW5jdGlvbiggcmVzcG9uc2VUZXh0ICkge1xuXHRcblx0XHRcdFx0Ly8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrXG5cdFx0XHRcdHJlc3BvbnNlID0gYXJndW1lbnRzO1xuXHRcblx0XHRcdFx0c2VsZi5odG1sKCBzZWxlY3RvciA/XG5cdFxuXHRcdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHRcdC8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9yc1xuXHRcdFx0XHRcdGpRdWVyeSggXCI8ZGl2PlwiICkuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXHRcblx0XHRcdFx0XHQvLyBPdGhlcndpc2UgdXNlIHRoZSBmdWxsIHJlc3VsdFxuXHRcdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXHRcblx0XHRcdC8vIElmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJkYXRhXCIsIFwic3RhdHVzXCIsIFwianFYSFJcIlxuXHRcdFx0Ly8gYnV0IHRoZXkgYXJlIGlnbm9yZWQgYmVjYXVzZSByZXNwb25zZSB3YXMgc2V0IGFib3ZlLlxuXHRcdFx0Ly8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImpxWEhSXCIsIFwic3RhdHVzXCIsIFwiZXJyb3JcIlxuXHRcdFx0fSApLmFsd2F5cyggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRcdHNlbGYuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcblx0XHRcdFx0fSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRcblx0XG5cdFxuXHQvLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xuXHRqUXVlcnkuZWFjaCggW1xuXHRcdFwiYWpheFN0YXJ0XCIsXG5cdFx0XCJhamF4U3RvcFwiLFxuXHRcdFwiYWpheENvbXBsZXRlXCIsXG5cdFx0XCJhamF4RXJyb3JcIixcblx0XHRcImFqYXhTdWNjZXNzXCIsXG5cdFx0XCJhamF4U2VuZFwiXG5cdF0sIGZ1bmN0aW9uKCBpLCB0eXBlICkge1xuXHRcdGpRdWVyeS5mblsgdHlwZSBdID0gZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdFx0fTtcblx0fSApO1xuXHRcblx0XG5cdFxuXHRcblx0alF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG5cdFx0fSApLmxlbmd0aDtcblx0fTtcblx0XG5cdFxuXHRcblx0XG5cdC8qKlxuXHQgKiBHZXRzIGEgd2luZG93IGZyb20gYW4gZWxlbWVudFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSA/IGVsZW0gOiBlbGVtLm5vZGVUeXBlID09PSA5ICYmIGVsZW0uZGVmYXVsdFZpZXc7XG5cdH1cblx0XG5cdGpRdWVyeS5vZmZzZXQgPSB7XG5cdFx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRcdHBvc2l0aW9uID0galF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICksXG5cdFx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdFx0cHJvcHMgPSB7fTtcblx0XG5cdFx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0XHRlbGVtLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdFx0fVxuXHRcblx0XHRcdGN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCk7XG5cdFx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRcdGNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSAmJlxuXHRcdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKCBcImF1dG9cIiApID4gLTE7XG5cdFxuXHRcdFx0Ly8gTmVlZCB0byBiZSBhYmxlIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBpZiBlaXRoZXJcblx0XHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdFx0aWYgKCBjYWxjdWxhdGVQb3NpdGlvbiApIHtcblx0XHRcdFx0Y3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7XG5cdFx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdFx0Y3VyTGVmdCA9IGN1clBvc2l0aW9uLmxlZnQ7XG5cdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDtcblx0XHRcdFx0Y3VyTGVmdCA9IHBhcnNlRmxvYXQoIGN1ckNTU0xlZnQgKSB8fCAwO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHtcblx0XG5cdFx0XHRcdC8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KVxuXHRcdFx0XHRvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyT2Zmc2V0ICkgKTtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7XG5cdFx0XHRcdHByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkge1xuXHRcdFx0XHRwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDtcblx0XHRcdH1cblx0XG5cdFx0XHRpZiAoIFwidXNpbmdcIiBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRcblx0alF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRcdG9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiBvcHRpb25zID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRcdHRoaXMgOlxuXHRcdFx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XG5cdFx0XHR2YXIgZG9jRWxlbSwgd2luLFxuXHRcdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0XHRib3ggPSB7IHRvcDogMCwgbGVmdDogMCB9LFxuXHRcdFx0XHRkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblx0XG5cdFx0XHRpZiAoICFkb2MgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0XG5cdFx0XHQvLyBNYWtlIHN1cmUgaXQncyBub3QgYSBkaXNjb25uZWN0ZWQgRE9NIG5vZGVcblx0XHRcdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuXHRcdFx0XHRyZXR1cm4gYm94O1xuXHRcdFx0fVxuXHRcblx0XHRcdGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHR3aW4gPSBnZXRXaW5kb3coIGRvYyApO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG5cdFx0XHRcdGxlZnQ6IGJveC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRMZWZ0XG5cdFx0XHR9O1xuXHRcdH0sXG5cdFxuXHRcdHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCxcblx0XHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdFx0cGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblx0XG5cdFx0XHQvLyBGaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gd2luZG93IChwYXJlbnRPZmZzZXQgPSB7dG9wOjAsIGxlZnQ6IDB9LFxuXHRcdFx0Ly8gYmVjYXVzZSBpdCBpcyBpdHMgb25seSBvZmZzZXQgcGFyZW50XG5cdFx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApID09PSBcImZpeGVkXCIgKSB7XG5cdFxuXHRcdFx0XHQvLyBBc3N1bWUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIHRoZXJlIHdoZW4gY29tcHV0ZWQgcG9zaXRpb24gaXMgZml4ZWRcblx0XHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XG5cdFx0XHR9IGVsc2Uge1xuXHRcblx0XHRcdFx0Ly8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnRcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTtcblx0XG5cdFx0XHRcdC8vIEdldCBjb3JyZWN0IG9mZnNldHNcblx0XHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblx0XHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJodG1sXCIgKSApIHtcblx0XHRcdFx0XHRwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdC8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVyc1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdFx0cGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyTGVmdFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIsIHRydWUgKVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcblx0XHQvLyBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBkb2N1bWVudEVsZW1lbnQgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcblx0XHQvLyAxKSBGb3IgdGhlIGVsZW1lbnQgaW5zaWRlIHRoZSBpZnJhbWUgd2l0aG91dCBvZmZzZXRQYXJlbnQsIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuXG5cdFx0Ly8gICAgZG9jdW1lbnRFbGVtZW50IG9mIHRoZSBwYXJlbnQgd2luZG93XG5cdFx0Ly8gMikgRm9yIHRoZSBoaWRkZW4gb3IgZGV0YWNoZWQgZWxlbWVudFxuXHRcdC8vIDMpIEZvciBib2R5IG9yIGh0bWwgZWxlbWVudCwgaS5lLiBpbiBjYXNlIG9mIHRoZSBodG1sIG5vZGUgLSBpdCB3aWxsIHJldHVybiBpdHNlbGZcblx0XHQvL1xuXHRcdC8vIGJ1dCB0aG9zZSBleGNlcHRpb25zIHdlcmUgbmV2ZXIgcHJlc2VudGVkIGFzIGEgcmVhbCBsaWZlIHVzZS1jYXNlc1xuXHRcdC8vIGFuZCBtaWdodCBiZSBjb25zaWRlcmVkIGFzIG1vcmUgcHJlZmVyYWJsZSByZXN1bHRzLlxuXHRcdC8vXG5cdFx0Ly8gVGhpcyBsb2dpYywgaG93ZXZlciwgaXMgbm90IGd1YXJhbnRlZWQgYW5kIGNhbiBjaGFuZ2UgYXQgYW55IHBvaW50IGluIHRoZSBmdXR1cmVcblx0XHRvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50O1xuXHRcblx0XHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50RWxlbWVudDtcblx0XHRcdH0gKTtcblx0XHR9XG5cdH0gKTtcblx0XG5cdC8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kc1xuXHRqUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdFx0dmFyIHRvcCA9IFwicGFnZVlPZmZzZXRcIiA9PT0gcHJvcDtcblx0XG5cdFx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7XG5cdFx0XHRcdHZhciB3aW4gPSBnZXRXaW5kb3coIGVsZW0gKTtcblx0XG5cdFx0XHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHdpbiA/IHdpblsgcHJvcCBdIDogZWxlbVsgbWV0aG9kIF07XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGlmICggd2luICkge1xuXHRcdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHRcdCF0b3AgPyB2YWwgOiB3aW4ucGFnZVhPZmZzZXQsXG5cdFx0XHRcdFx0XHR0b3AgPyB2YWwgOiB3aW4ucGFnZVlPZmZzZXRcblx0XHRcdFx0XHQpO1xuXHRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdFx0fVxuXHRcdFx0fSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0XHR9O1xuXHR9ICk7XG5cdFxuXHQvLyBTdXBwb3J0OiBTYWZhcmk8Ny04KywgQ2hyb21lPDM3LTQ0K1xuXHQvLyBBZGQgdGhlIHRvcC9sZWZ0IGNzc0hvb2tzIHVzaW5nIGpRdWVyeS5mbi5wb3NpdGlvblxuXHQvLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODRcblx0Ly8gQmxpbmsgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MjgwXG5cdC8vIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBwZXJjZW50IHdoZW4gc3BlY2lmaWVkIGZvciB0b3AvbGVmdC9ib3R0b20vcmlnaHQ7XG5cdC8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCBqdXN0IGNoZWNrIGZvciBpdCBoZXJlXG5cdGpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sXG5cdFx0XHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdFx0Y29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTtcblx0XG5cdFx0XHRcdFx0Ly8gSWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0XG5cdFx0XHRcdFx0cmV0dXJuIHJudW1ub25weC50ZXN0KCBjb21wdXRlZCApID9cblx0XHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0XHRjb21wdXRlZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdCk7XG5cdH0gKTtcblx0XG5cdFxuXHQvLyBDcmVhdGUgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGgsIGhlaWdodCwgd2lkdGgsIG91dGVySGVpZ2h0IGFuZCBvdXRlcldpZHRoIG1ldGhvZHNcblx0alF1ZXJ5LmVhY2goIHsgSGVpZ2h0OiBcImhlaWdodFwiLCBXaWR0aDogXCJ3aWR0aFwiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkge1xuXHRcdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSxcblx0XHRcdGZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkge1xuXHRcblx0XHRcdC8vIE1hcmdpbiBpcyBvbmx5IGZvciBvdXRlckhlaWdodCwgb3V0ZXJXaWR0aFxuXHRcdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBjaGFpbmFibGUgPSBhcmd1bWVudHMubGVuZ3RoICYmICggZGVmYXVsdEV4dHJhIHx8IHR5cGVvZiBtYXJnaW4gIT09IFwiYm9vbGVhblwiICksXG5cdFx0XHRcdFx0ZXh0cmEgPSBkZWZhdWx0RXh0cmEgfHwgKCBtYXJnaW4gPT09IHRydWUgfHwgdmFsdWUgPT09IHRydWUgPyBcIm1hcmdpblwiIDogXCJib3JkZXJcIiApO1xuXHRcblx0XHRcdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIHZhbHVlICkge1xuXHRcdFx0XHRcdHZhciBkb2M7XG5cdFxuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gQXMgb2YgNS84LzIwMTIgdGhpcyB3aWxsIHlpZWxkIGluY29ycmVjdCByZXN1bHRzIGZvciBNb2JpbGUgU2FmYXJpLCBidXQgdGhlcmVcblx0XHRcdFx0XHRcdC8vIGlzbid0IGEgd2hvbGUgbG90IHdlIGNhbiBkby4gU2VlIHB1bGwgcmVxdWVzdCBhdCB0aGlzIFVSTCBmb3IgZGlzY3Vzc2lvbjpcblx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIFwiY2xpZW50XCIgKyBuYW1lIF07XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHQvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLFxuXHRcdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0XHRyZXR1cm4gTWF0aC5tYXgoXG5cdFx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJzY3JvbGxcIiArIG5hbWUgXSwgZG9jWyBcInNjcm9sbFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdFx0ZG9jWyBcImNsaWVudFwiICsgbmFtZSBdXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcblx0XHRcdFx0XHRcdC8vIEdldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnQsIHJlcXVlc3RpbmcgYnV0IG5vdCBmb3JjaW5nIHBhcnNlRmxvYXRcblx0XHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXHRcblx0XHRcdFx0XHRcdC8vIFNldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnRcblx0XHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHRcdH0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlLCBudWxsICk7XG5cdFx0XHR9O1xuXHRcdH0gKTtcblx0fSApO1xuXHRcblx0XG5cdGpRdWVyeS5mbi5leHRlbmQoIHtcblx0XG5cdFx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTtcblx0XHR9LFxuXHRcdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRcdHJldHVybiB0aGlzLm9mZiggdHlwZXMsIG51bGwsIGZuICk7XG5cdFx0fSxcblx0XG5cdFx0ZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0XHR9LFxuXHRcdHVuZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGZuICkge1xuXHRcblx0XHRcdC8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dIClcblx0XHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID9cblx0XHRcdFx0dGhpcy5vZmYoIHNlbGVjdG9yLCBcIioqXCIgKSA6XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuXHRcdH0sXG5cdFx0c2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5sZW5ndGg7XG5cdFx0fVxuXHR9ICk7XG5cdFxuXHRqUXVlcnkuZm4uYW5kU2VsZiA9IGpRdWVyeS5mbi5hZGRCYWNrO1xuXHRcblx0XG5cdFxuXHRcblx0Ly8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG5cdC8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXRcblx0Ly8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG5cdC8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcblx0Ly8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlXG5cdC8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuXHQvLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG5cdFxuXHQvLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuXHQvLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuXG5cdC8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblx0XG5cdGlmICggdHJ1ZSApIHtcblx0XHQhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnk7XG5cdFx0fS5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhclxuXHRcblx0XHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblx0XG5cdFx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XHRfJCA9IHdpbmRvdy4kO1xuXHRcblx0alF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0XHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0XHR3aW5kb3cuJCA9IF8kO1xuXHRcdH1cblx0XG5cdFx0aWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHtcblx0XHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fTtcblx0XG5cdC8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG5cdC8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcblx0Ly8gYW5kIENvbW1vbkpTIGZvciBicm93c2VyIGVtdWxhdG9ycyAoIzEzNTY2KVxuXHRpZiAoICFub0dsb2JhbCApIHtcblx0XHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG5cdH1cblx0XG5cdHJldHVybiBqUXVlcnk7XG5cdH0pKTtcblxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9iYWNrYm9uZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2JhY2tib25lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JhY2tib25lKTtcblx0XG5cdHZhciBfdW5kZXJzY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3VuZGVyc2NvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZXJzY29yZSk7XG5cdFxuXHR2YXIgX0VudHJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfRW50cnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRW50cnkpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIEVudHJpZXMgPSBmdW5jdGlvbiAoX0JhY2tib25lJENvbGxlY3Rpb24pIHtcblx0XHRfaW5oZXJpdHMoRW50cmllcywgX0JhY2tib25lJENvbGxlY3Rpb24pO1xuXHRcblx0XHRmdW5jdGlvbiBFbnRyaWVzKGVudHJpZXMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbnRyaWVzKTtcblx0XG5cdFx0XHRyZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEVudHJpZXMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihFbnRyaWVzKSkuY2FsbCh0aGlzLCBlbnRyaWVzKSk7XG5cdFx0fVxuXHRcblx0XHRfY3JlYXRlQ2xhc3MoRW50cmllcywgW3tcblx0XHRcdGtleTogJ2luaXRpYWxpemUnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdFx0XHRcdHRoaXMubW9kZWwgPSBfRW50cnkyLmRlZmF1bHQ7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnZ2V0VW52aWV3ZWRFbnRyeUlEJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBnZXRVbnZpZXdlZEVudHJ5SUQoKSB7XG5cdFx0XHRcdHZhciB1bnZpZXdlZEVudHJpZXMgPSB0aGlzLndoZXJlKHsgdmlld2VkOiBmYWxzZSB9KTtcblx0XG5cdFx0XHRcdGlmICh1bnZpZXdlZEVudHJpZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHJldHVybiBfdW5kZXJzY29yZTIuZGVmYXVsdC5zYW1wbGUodW52aWV3ZWRFbnRyaWVzKS5nZXQoJ2lkJyk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbiAobW9kZWwpIHtcblx0XHRcdFx0XHRtb2RlbC5zZXQoJ3ZpZXdlZCcsIGZhbHNlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiB0aGlzLnNhbXBsZSgpLmdldCgnaWQnKTtcblx0XHRcdH1cblx0XHR9XSk7XG5cdFxuXHRcdHJldHVybiBFbnRyaWVzO1xuXHR9KF9iYWNrYm9uZTIuZGVmYXVsdC5Db2xsZWN0aW9uKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEVudHJpZXM7XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2JhY2tib25lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfYmFja2JvbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFja2JvbmUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIEVudHJ5ID0gZnVuY3Rpb24gKF9CYWNrYm9uZSRNb2RlbCkge1xuXHRcdF9pbmhlcml0cyhFbnRyeSwgX0JhY2tib25lJE1vZGVsKTtcblx0XG5cdFx0ZnVuY3Rpb24gRW50cnkoYXR0cnMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbnRyeSk7XG5cdFxuXHRcdFx0cmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChFbnRyeS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEVudHJ5KSkuY2FsbCh0aGlzLCBhdHRycykpO1xuXHRcdH1cblx0XG5cdFx0X2NyZWF0ZUNsYXNzKEVudHJ5LCBbe1xuXHRcdFx0a2V5OiAnaW5pdGlhbGl6ZScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHRcdFx0dGhpcy5zZXQoeyB1cmxGcmllbmRseVRpdGxlOiB0aGlzLmNvbnZlcnRUb1NsdWcodGhpcy5nZXQoJ3RpdGxlJykpIH0pO1xuXHRcdFx0XHR0aGlzLnBhcnNlVGl0bGUoKTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdkZWZhdWx0cycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gZGVmYXVsdHMoKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dmlld2VkOiBmYWxzZVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3BhcnNlVGl0bGUnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHBhcnNlVGl0bGUoKSB7XG5cdFx0XHRcdGlmICh0aGlzLnRpdGxlQ29udGFpbnNQYXJlbnRoZXNpcyh0aGlzLmdldCgndGl0bGUnKSkpIHtcblx0XHRcdFx0XHR0aGlzLnNldCgndGl0bGUnLCB0aGlzLndyYXBUaXRsZVBhcmVudGhlc2lzSW5TcGFucyh0aGlzLmdldCgndGl0bGUnKSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnY29udmVydFRvU2x1ZycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gY29udmVydFRvU2x1Zyh0ZXh0KSB7XG5cdFx0XHRcdHJldHVybiB0ZXh0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15cXHcgXSsvZywgJycpLnJlcGxhY2UoLyArL2csICctJyk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAndGl0bGVDb250YWluc1BhcmVudGhlc2lzJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiB0aXRsZUNvbnRhaW5zUGFyZW50aGVzaXModGl0bGUpIHtcblx0XHRcdFx0aWYgKHRpdGxlLmluZGV4T2YoJygnKSA+IC0xIHx8IHRpdGxlLmluZGV4T2YoJyknKSA+IC0xKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICd3cmFwVGl0bGVQYXJlbnRoZXNpc0luU3BhbnMnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHdyYXBUaXRsZVBhcmVudGhlc2lzSW5TcGFucyh0aXRsZSkge1xuXHRcdFx0XHRyZXR1cm4gdGl0bGUucmVwbGFjZSgnKCcsICc8c3Bhbj4oJykucmVwbGFjZSgnKScsICcpPC9zcGFuPicpO1xuXHRcdFx0fVxuXHRcdH1dKTtcblx0XG5cdFx0cmV0dXJuIEVudHJ5O1xuXHR9KF9iYWNrYm9uZTIuZGVmYXVsdC5Nb2RlbCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBFbnRyeTtcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfYmFja2JvbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9iYWNrYm9uZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYWNrYm9uZSk7XG5cdFxuXHR2YXIgX2pxdWVyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2pxdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qcXVlcnkpO1xuXHRcblx0dmFyIF91bmRlcnNjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfdW5kZXJzY29yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bmRlcnNjb3JlKTtcblx0XG5cdHZhciBfTG9hZGVyVmlldyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX0xvYWRlclZpZXcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTG9hZGVyVmlldyk7XG5cdFxuXHR2YXIgX0VudHJpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9FbnRyaWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VudHJpZXMpO1xuXHRcblx0dmFyIF9FbnRyaWVzVmlldyA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX0VudHJpZXNWaWV3MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VudHJpZXNWaWV3KTtcblx0XG5cdHZhciBfRW50cnlWaWV3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfRW50cnlWaWV3MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0VudHJ5Vmlldyk7XG5cdFxuXHR2YXIgX2dyZWVrSW5UZWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgQXBwUm91dGVyID0gZnVuY3Rpb24gKF9CYWNrYm9uZSRSb3V0ZXIpIHtcblx0XHRfaW5oZXJpdHMoQXBwUm91dGVyLCBfQmFja2JvbmUkUm91dGVyKTtcblx0XG5cdFx0ZnVuY3Rpb24gQXBwUm91dGVyKCkge1xuXHRcdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwcFJvdXRlcik7XG5cdFxuXHRcdFx0dmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEFwcFJvdXRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEFwcFJvdXRlcikpLmNhbGwodGhpcykpO1xuXHRcblx0XHRcdF90aGlzLnJvdXRlcyA9IHtcblx0XHRcdFx0J2VudHJ5LzppZCgvOnRpdGxlKSc6ICdzaG93RW50cnknLFxuXHRcdFx0XHQnKmFjdGlvbnMnOiAnc2hvd1JhbmRvbUVudHJ5J1xuXHRcdFx0fTtcblx0XHRcdF90aGlzLl9iaW5kUm91dGVzKCk7XG5cdFx0XHRyZXR1cm4gX3RoaXM7XG5cdFx0fVxuXHRcblx0XHRfY3JlYXRlQ2xhc3MoQXBwUm91dGVyLCBbe1xuXHRcdFx0a2V5OiAnaW5pdGlhbGl6ZScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHRcdFx0dGhpcy5pbml0aWFsRnJhZ21lbnQgPSBudWxsO1xuXHRcdFx0XHR0aGlzLiRlbnRyeUVsID0gKDAsIF9qcXVlcnkyLmRlZmF1bHQpKCcjZW50cnknKTtcblx0XHRcdFx0dGhpcy5sb2FkZXIgPSBuZXcgX0xvYWRlclZpZXcyLmRlZmF1bHQoKTtcblx0XHRcdFx0dGhpcy5lbnRyaWVzID0gbmV3IF9FbnRyaWVzMi5kZWZhdWx0KEpTT04ucGFyc2UoX2dyZWVrSW5UZWNoLmFsbCkpO1xuXHRcdFx0XHR2YXIgZW50cmllc1ZpZXcgPSBuZXcgX0VudHJpZXNWaWV3Mi5kZWZhdWx0KHsgY29sbGVjdGlvbjogdGhpcy5lbnRyaWVzIH0pO1xuXHRcdFx0XHR0aGlzLmxpc3RlblRvKGVudHJpZXNWaWV3LCAncm91dGVUb1Vudmlld2VkRW50cnknLCB0aGlzLnNob3dFbnRyeSk7XG5cdFx0XHRcdHRoaXMubGlzdGVuVG8oZW50cmllc1ZpZXcsICduYXZpZ2F0ZUJhY2t3YXJkcycsIHRoaXMubmF2aWdhdGVCYWNrd2FyZHMpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3Nob3dSYW5kb21FbnRyeScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gc2hvd1JhbmRvbUVudHJ5KCkge1xuXHRcdFx0XHR2YXIgcmFuZG9tRW50cnlJRCA9IHRoaXMuZW50cmllcy5nZXRVbnZpZXdlZEVudHJ5SUQoKTtcblx0XHRcdFx0dGhpcy5zaG93RW50cnkocmFuZG9tRW50cnlJRCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnc2hvd0VudHJ5Jyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBzaG93RW50cnkoaWQpIHtcblx0XHRcdFx0aWYgKHRoaXMubG9hZGVyLiRlbC5pcygnOnZpc2libGUnKSkge1xuXHRcdFx0XHRcdHRoaXMubG9hZGVyLnRyaWdnZXIoJ2hpZGUnKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0dmFyIGVudHJ5ID0gdGhpcy5lbnRyaWVzLmZpbmRXaGVyZSh7IGlkOiBwYXJzZUludChpZCkgfSk7XG5cdFxuXHRcdFx0XHRpZiAoX3VuZGVyc2NvcmUyLmRlZmF1bHQuaXNVbmRlZmluZWQoZW50cnkpKSB7XG5cdFx0XHRcdFx0dGhpcy5zaG93UmFuZG9tRW50cnkoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHRoaXMubmF2aWdhdGUoJ2VudHJ5LycgKyBpZCArICcvJyArIGVudHJ5LmdldCgndXJsRnJpZW5kbHlUaXRsZScpLCB7IHRyaWdnZXI6IHRydWUgfSk7XG5cdFxuXHRcdFx0XHRpZiAoIXRoaXMuaW5pdGlhbEZyYWdtZW50KSB7XG5cdFx0XHRcdFx0dGhpcy5pbml0aWFsRnJhZ21lbnQgPSBfYmFja2JvbmUyLmRlZmF1bHQuaGlzdG9yeS5nZXRGcmFnbWVudCgpO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR0aGlzLmVudHJ5VmlldyA9IG5ldyBfRW50cnlWaWV3Mi5kZWZhdWx0KHsgbW9kZWw6IGVudHJ5LCBjb250YWluZXI6IHRoaXMuJGVudHJ5RWwgfSkucmVuZGVyKCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnbmF2aWdhdGVCYWNrd2FyZHMnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIG5hdmlnYXRlQmFja3dhcmRzKCkge1xuXHRcdFx0XHRpZiAodGhpcy5pbml0aWFsRnJhZ21lbnQgPT09IF9iYWNrYm9uZTIuZGVmYXVsdC5oaXN0b3J5LmdldEZyYWdtZW50KCkpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0d2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdFx0fVxuXHRcdH1dKTtcblx0XG5cdFx0cmV0dXJuIEFwcFJvdXRlcjtcblx0fShfYmFja2JvbmUyLmRlZmF1bHQuUm91dGVyKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEFwcFJvdXRlcjtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfYmFja2JvbmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9iYWNrYm9uZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYWNrYm9uZSk7XG5cdFxuXHR2YXIgX2pxdWVyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2pxdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9qcXVlcnkpO1xuXHRcblx0dmFyIF91bmRlcnNjb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfdW5kZXJzY29yZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91bmRlcnNjb3JlKTtcblx0XG5cdHZhciBfaGFtbWVyanMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfaGFtbWVyanMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGFtbWVyanMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIEVudHJpZXNWaWV3ID0gZnVuY3Rpb24gKF9CYWNrYm9uZSRWaWV3KSB7XG5cdFx0X2luaGVyaXRzKEVudHJpZXNWaWV3LCBfQmFja2JvbmUkVmlldyk7XG5cdFxuXHRcdGZ1bmN0aW9uIEVudHJpZXNWaWV3KG9wdGlvbnMpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbnRyaWVzVmlldyk7XG5cdFxuXHRcdFx0cmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChFbnRyaWVzVmlldy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEVudHJpZXNWaWV3KSkuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdGVsOiAnYm9keScsXG5cdFx0XHRcdGNvbGxlY3Rpb246IG9wdGlvbnMuY29sbGVjdGlvbixcblx0XG5cdFx0XHRcdGV2ZW50czoge1xuXHRcdFx0XHRcdGNsaWNrOiAncmVuZGVyUmFuZG9tRW50cnknLFxuXHRcdFx0XHRcdGtleWRvd246ICdoYW5kbGVLZXlib2FyZEV2ZW50J1xuXHRcdFx0XHR9XG5cdFx0XHR9KSk7XG5cdFx0fVxuXHRcblx0XHRfY3JlYXRlQ2xhc3MoRW50cmllc1ZpZXcsIFt7XG5cdFx0XHRrZXk6ICdpbml0aWFsaXplJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuXHRcdFx0XHR2YXIgbWMgPSBuZXcgX2hhbW1lcmpzMi5kZWZhdWx0KHRoaXMuJGVsLmdldCgwKSk7XG5cdFx0XHRcdG1jLm9uKCdzd2lwZXJpZ2h0IHN3aXBlbGVmdCcsIHRoaXMuaGFuZGxlTW9iaWxlRXZlbnQpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3JlbmRlclJhbmRvbUVudHJ5Jyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiByZW5kZXJSYW5kb21FbnRyeShlKSB7XG5cdFx0XHRcdC8vIFRPRE86IGZpbmQgYSBiZXR0ZXIgd2F5IHRvIHN1cHByZXNzIGV2ZW50IGRlbGVnYXRpb25cblx0XHRcdFx0aWYgKGUgJiYgKDAsIF9qcXVlcnkyLmRlZmF1bHQpKGUudGFyZ2V0KS5pcygnYScpKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciB1bnZpZXdlZEVudHJ5SUQgPSB0aGlzLmNvbGxlY3Rpb24uZ2V0VW52aWV3ZWRFbnRyeUlEKCk7XG5cdFx0XHRcdHRoaXMudHJpZ2dlcigncm91dGVUb1Vudmlld2VkRW50cnknLCB1bnZpZXdlZEVudHJ5SUQpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2hhbmRsZUtleWJvYXJkRXZlbnQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUtleWJvYXJkRXZlbnQoZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHRcdFx0XHR2YXIgYmFja0tleXMgPSBbMzcsIDcyXTtcblx0XHRcdFx0dmFyIGZvcndhcmRLZXlzID0gWzM5LCA3Nl07XG5cdFx0XHRcdHZhciBzcGFjZSA9IFszMl07XG5cdFxuXHRcdFx0XHRpZiAoIV91bmRlcnNjb3JlMi5kZWZhdWx0LmNvbnRhaW5zKF91bmRlcnNjb3JlMi5kZWZhdWx0LnVuaW9uKGJhY2tLZXlzLCBmb3J3YXJkS2V5cywgc3BhY2UpLCBlLmtleUNvZGUpKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR2YXIgaXNGb3J3YXJkID0gX3VuZGVyc2NvcmUyLmRlZmF1bHQuY29udGFpbnMoZm9yd2FyZEtleXMsIGUua2V5Q29kZSkgfHwgc3BhY2UgPT09IGUua2V5Q29kZSAmJiAhZS5zaGlmdEtleTtcblx0XHRcdFx0dGhpcy5tb3ZlVG9FbnRyeShpc0ZvcndhcmQpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ2hhbmRsZU1vYmlsZUV2ZW50Jyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVNb2JpbGVFdmVudChlKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XG5cdFx0XHRcdHZhciBpc0ZvcndhcmQgPSBlLnR5cGUgPT09ICdzd2lwZWxlZnQnO1xuXHRcdFx0XHR0aGlzLm1vdmVUb0VudHJ5KGlzRm9yd2FyZCk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnbW92ZVRvRW50cnknLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIG1vdmVUb0VudHJ5KGlzRm9yd2FyZCkge1xuXHRcdFx0XHRpc0ZvcndhcmQgPyB0aGlzLnJlbmRlclJhbmRvbUVudHJ5KCkgOiB0aGlzLnRyaWdnZXIoJ25hdmlnYXRlQmFja3dhcmRzJyk7XG5cdFx0XHR9XG5cdFx0fV0pO1xuXHRcblx0XHRyZXR1cm4gRW50cmllc1ZpZXc7XG5cdH0oX2JhY2tib25lMi5kZWZhdWx0LlZpZXcpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRW50cmllc1ZpZXc7XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX2JhY2tib25lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfYmFja2JvbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFja2JvbmUpO1xuXHRcblx0dmFyIF9qcXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9qcXVlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfanF1ZXJ5KTtcblx0XG5cdHZhciBfdW5kZXJzY29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3VuZGVyc2NvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdW5kZXJzY29yZSk7XG5cdFxuXHR2YXIgX2VudHJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX2VudHJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VudHJ5KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBFbnRyeVZpZXcgPSBmdW5jdGlvbiAoX0JhY2tib25lJFZpZXcpIHtcblx0XHRfaW5oZXJpdHMoRW50cnlWaWV3LCBfQmFja2JvbmUkVmlldyk7XG5cdFxuXHRcdGZ1bmN0aW9uIEVudHJ5VmlldyhvcHRpb25zKSB7XG5cdFx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW50cnlWaWV3KTtcblx0XG5cdFx0XHR2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRW50cnlWaWV3Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRW50cnlWaWV3KSkuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdGVsOiAnI2VudHJ5Jyxcblx0XHRcdFx0bW9kZWw6IG9wdGlvbnMubW9kZWwsXG5cdFx0XHRcdGNvbnRhaW5lcjogb3B0aW9ucy5jb250YWluZXIsXG5cdFxuXHRcdFx0XHRldmVudHM6IHtcblx0XHRcdFx0XHQnY2xpY2sgLnNvY2lhbC1saW5rcyBhJzogJ3NvY2lhbFNoYXJlJ1xuXHRcdFx0XHR9XG5cdFx0XHR9KSk7XG5cdFxuXHRcdFx0X3RoaXMudGVtcGxhdGUgPSBfdW5kZXJzY29yZTIuZGVmYXVsdC50ZW1wbGF0ZShfZW50cnkyLmRlZmF1bHQpO1xuXHRcdFx0cmV0dXJuIF90aGlzO1xuXHRcdH1cblx0XG5cdFx0X2NyZWF0ZUNsYXNzKEVudHJ5VmlldywgW3tcblx0XHRcdGtleTogJ2luaXRpYWxpemUnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuXHRcdFx0XHR0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsICdjaGFuZ2UnLCB0aGlzLnJlbmRlcik7XG5cdFx0XHRcdHRoaXMuQ1NTYW5pbWF0aW9uQ2xhc3NlcyA9ICdmbGlwSW5YIGFuaW1hdGVkJztcblx0XHRcdFx0dGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcblx0XHRcdFx0dGhpcy5hbmltYXRlVmlldygpO1xuXHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdGtleTogJ3JlbmRlcicsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcdFx0XHR0aGlzLm1vZGVsLnNldCgndmlld2VkJywgdHJ1ZSk7XG5cdFx0XHRcdHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLnRvSlNPTigpKSk7XG5cdFxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdhbmltYXRlVmlldycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gYW5pbWF0ZVZpZXcoKSB7XG5cdFx0XHRcdHRoaXMuY29udGFpbmVyLmFkZENsYXNzKHRoaXMuQ1NTYW5pbWF0aW9uQ2xhc3Nlcyk7XG5cdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnc29jaWFsU2hhcmUnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHNvY2lhbFNoYXJlKGUpIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcblx0XHRcdFx0dmFyIHdpZHRoID0gNTc1O1xuXHRcdFx0XHR2YXIgaGVpZ2h0ID0gNDAwO1xuXHRcdFx0XHR2YXIgbGVmdCA9ICgoMCwgX2pxdWVyeTIuZGVmYXVsdCkod2luZG93KS53aWR0aCgpIC0gd2lkdGgpIC8gMjtcblx0XHRcdFx0dmFyIHRvcCA9ICgoMCwgX2pxdWVyeTIuZGVmYXVsdCkod2luZG93KS5oZWlnaHQoKSAtIGhlaWdodCkgLyAyO1xuXHRcdFx0XHR2YXIgdXJsID0gKDAsIF9qcXVlcnkyLmRlZmF1bHQpKGUudGFyZ2V0KS5hdHRyKCdocmVmJyk7XG5cdFx0XHRcdHZhciBvcHRzID0gJ3N0YXR1cz0xLHdpZHRoPScgKyB3aWR0aCArICcsaGVpZ2h0PScgKyBoZWlnaHQgKyAnLHRvcD0nICsgdG9wICsgJyxsZWZ0PScgKyBsZWZ0O1xuXHRcblx0XHRcdFx0d2luZG93Lm9wZW4odXJsLCAnU2hhcmUnLCBvcHRzKTtcblx0XHRcdH1cblx0XHR9XSk7XG5cdFxuXHRcdHJldHVybiBFbnRyeVZpZXc7XG5cdH0oX2JhY2tib25lMi5kZWZhdWx0LlZpZXcpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRW50cnlWaWV3O1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9iYWNrYm9uZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2JhY2tib25lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JhY2tib25lKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBMb2FkZXJWaWV3ID0gZnVuY3Rpb24gKF9CYWNrYm9uZSRWaWV3KSB7XG5cdFx0X2luaGVyaXRzKExvYWRlclZpZXcsIF9CYWNrYm9uZSRWaWV3KTtcblx0XG5cdFx0ZnVuY3Rpb24gTG9hZGVyVmlldygpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2FkZXJWaWV3KTtcblx0XG5cdFx0XHRyZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExvYWRlclZpZXcuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihMb2FkZXJWaWV3KSkuY2FsbCh0aGlzLCB7XG5cdFx0XHRcdGVsOiAnLmxvYWRlcidcblx0XHRcdH0pKTtcblx0XHR9XG5cdFxuXHRcdF9jcmVhdGVDbGFzcyhMb2FkZXJWaWV3LCBbe1xuXHRcdFx0a2V5OiAnaW5pdGlhbGl6ZScsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblx0XHRcdFx0dmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHRcdFx0XHR0aGlzLmxpc3RlblRvKHRoaXMsICdoaWRlJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdF90aGlzMi4kZWwuaGlkZSgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XSk7XG5cdFxuXHRcdHJldHVybiBMb2FkZXJWaWV3O1xuXHR9KF9iYWNrYm9uZTIuZGVmYXVsdC5WaWV3KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IExvYWRlclZpZXc7XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5nZXRFbnRyeSA9IGV4cG9ydHMucmFuZG9tID0gZXhwb3J0cy5hbGwgPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX3VuaXF1ZVJhbmRvbUFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHR2YXIgX3VuaXF1ZVJhbmRvbUFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VuaXF1ZVJhbmRvbUFycmF5KTtcblx0XG5cdHZhciBfZW50cmllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIF9lbnRyaWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VudHJpZXMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBhbGwgPSBleHBvcnRzLmFsbCA9IF9lbnRyaWVzMi5kZWZhdWx0O1xuXHR2YXIgcmFuZG9tID0gZXhwb3J0cy5yYW5kb20gPSAoMCwgX3VuaXF1ZVJhbmRvbUFycmF5Mi5kZWZhdWx0KShfZW50cmllczIuZGVmYXVsdCk7XG5cdHZhciBnZXRFbnRyeSA9IGV4cG9ydHMuZ2V0RW50cnkgPSBmdW5jdGlvbiBnZXRFbnRyeSgpIHtcblx0ICB2YXIgaWQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAxIDogYXJndW1lbnRzWzBdO1xuXHRcblx0ICB2YXIgZW50cnkgPSBfZW50cmllczIuZGVmYXVsdFtpZCAtIDFdO1xuXHQgIGlmICghZW50cnkpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJRCcpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGVudHJ5O1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiEgSGFtbWVyLkpTIC0gdjIuMC43IC0gMjAxNi0wNC0yMlxuXHQgKiBodHRwOi8vaGFtbWVyanMuZ2l0aHViLmlvL1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQgKGMpIDIwMTYgSm9yaWsgVGFuZ2VsZGVyO1xuXHQgKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgKi9cblx0KGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIGV4cG9ydE5hbWUsIHVuZGVmaW5lZCkge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBWRU5ET1JfUFJFRklYRVMgPSBbJycsICd3ZWJraXQnLCAnTW96JywgJ01TJywgJ21zJywgJ28nXTtcblx0dmFyIFRFU1RfRUxFTUVOVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0dmFyIFRZUEVfRlVOQ1RJT04gPSAnZnVuY3Rpb24nO1xuXHRcblx0dmFyIHJvdW5kID0gTWF0aC5yb3VuZDtcblx0dmFyIGFicyA9IE1hdGguYWJzO1xuXHR2YXIgbm93ID0gRGF0ZS5ub3c7XG5cdFxuXHQvKipcblx0ICogc2V0IGEgdGltZW91dCB3aXRoIGEgZ2l2ZW4gc2NvcGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXRcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcblx0ICogQHJldHVybnMge251bWJlcn1cblx0ICovXG5cdGZ1bmN0aW9uIHNldFRpbWVvdXRDb250ZXh0KGZuLCB0aW1lb3V0LCBjb250ZXh0KSB7XG5cdCAgICByZXR1cm4gc2V0VGltZW91dChiaW5kRm4oZm4sIGNvbnRleHQpLCB0aW1lb3V0KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSwgd2Ugd2FudCB0byBleGVjdXRlIHRoZSBmbiBvbiBlYWNoIGVudHJ5XG5cdCAqIGlmIGl0IGFpbnQgYW4gYXJyYXkgd2UgZG9uJ3Qgd2FudCB0byBkbyBhIHRoaW5nLlxuXHQgKiB0aGlzIGlzIHVzZWQgYnkgYWxsIHRoZSBtZXRob2RzIHRoYXQgYWNjZXB0IGEgc2luZ2xlIGFuZCBhcnJheSBhcmd1bWVudC5cblx0ICogQHBhcmFtIHsqfEFycmF5fSBhcmdcblx0ICogQHBhcmFtIHtTdHJpbmd9IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dF1cblx0ICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAqL1xuXHRmdW5jdGlvbiBpbnZva2VBcnJheUFyZyhhcmcsIGZuLCBjb250ZXh0KSB7XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG5cdCAgICAgICAgZWFjaChhcmcsIGNvbnRleHRbZm5dLCBjb250ZXh0KTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHdhbGsgb2JqZWN0cyBhbmQgYXJyYXlzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0b3Jcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcblx0ICovXG5cdGZ1bmN0aW9uIGVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgaWYgKCFvYmopIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG9iai5mb3JFYWNoKSB7XG5cdCAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuXHQgICAgfSBlbHNlIGlmIChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IG9iai5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaik7XG5cdCAgICAgICAgICAgIGkrKztcblx0ICAgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvciAoaSBpbiBvYmopIHtcblx0ICAgICAgICAgICAgb2JqLmhhc093blByb3BlcnR5KGkpICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIHdyYXAgYSBtZXRob2Qgd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgYW5kIHN0YWNrIHRyYWNlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG1ldGhvZFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uIHdyYXBwaW5nIHRoZSBzdXBwbGllZCBtZXRob2QuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZXByZWNhdGUobWV0aG9kLCBuYW1lLCBtZXNzYWdlKSB7XG5cdCAgICB2YXIgZGVwcmVjYXRpb25NZXNzYWdlID0gJ0RFUFJFQ0FURUQgTUVUSE9EOiAnICsgbmFtZSArICdcXG4nICsgbWVzc2FnZSArICcgQVQgXFxuJztcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignZ2V0LXN0YWNrLXRyYWNlJyk7XG5cdCAgICAgICAgdmFyIHN0YWNrID0gZSAmJiBlLnN0YWNrID8gZS5zdGFjay5yZXBsYWNlKC9eW15cXChdKz9bXFxuJF0vZ20sICcnKVxuXHQgICAgICAgICAgICAucmVwbGFjZSgvXlxccythdFxccysvZ20sICcnKVxuXHQgICAgICAgICAgICAucmVwbGFjZSgvXk9iamVjdC48YW5vbnltb3VzPlxccypcXCgvZ20sICd7YW5vbnltb3VzfSgpQCcpIDogJ1Vua25vd24gU3RhY2sgVHJhY2UnO1xuXHRcblx0ICAgICAgICB2YXIgbG9nID0gd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLndhcm4gfHwgd2luZG93LmNvbnNvbGUubG9nKTtcblx0ICAgICAgICBpZiAobG9nKSB7XG5cdCAgICAgICAgICAgIGxvZy5jYWxsKHdpbmRvdy5jb25zb2xlLCBkZXByZWNhdGlvbk1lc3NhZ2UsIHN0YWNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGV4dGVuZCBvYmplY3QuXG5cdCAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Li4uT2JqZWN0fSBvYmplY3RzX3RvX2Fzc2lnblxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSB0YXJnZXRcblx0ICovXG5cdHZhciBhc3NpZ247XG5cdGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgYXNzaWduID0gZnVuY3Rpb24gYXNzaWduKHRhcmdldCkge1xuXHQgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG5cdCAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuZXh0S2V5KSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBvdXRwdXQ7XG5cdCAgICB9O1xuXHR9IGVsc2Uge1xuXHQgICAgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGV4dGVuZCBvYmplY3QuXG5cdCAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVzdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3JjXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW21lcmdlPWZhbHNlXVxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG5cdCAqL1xuXHR2YXIgZXh0ZW5kID0gZGVwcmVjYXRlKGZ1bmN0aW9uIGV4dGVuZChkZXN0LCBzcmMsIG1lcmdlKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNyYyk7XG5cdCAgICB2YXIgaSA9IDA7XG5cdCAgICB3aGlsZSAoaSA8IGtleXMubGVuZ3RoKSB7XG5cdCAgICAgICAgaWYgKCFtZXJnZSB8fCAobWVyZ2UgJiYgZGVzdFtrZXlzW2ldXSA9PT0gdW5kZWZpbmVkKSkge1xuXHQgICAgICAgICAgICBkZXN0W2tleXNbaV1dID0gc3JjW2tleXNbaV1dO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGVzdDtcblx0fSwgJ2V4dGVuZCcsICdVc2UgYGFzc2lnbmAuJyk7XG5cdFxuXHQvKipcblx0ICogbWVyZ2UgdGhlIHZhbHVlcyBmcm9tIHNyYyBpbiB0aGUgZGVzdC5cblx0ICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIHRoYXQgZXhpc3QgaW4gZGVzdCB3aWxsIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzcmNcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IHNyY1xuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG5cdCAqL1xuXHR2YXIgbWVyZ2UgPSBkZXByZWNhdGUoZnVuY3Rpb24gbWVyZ2UoZGVzdCwgc3JjKSB7XG5cdCAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYywgdHJ1ZSk7XG5cdH0sICdtZXJnZScsICdVc2UgYGFzc2lnbmAuJyk7XG5cdFxuXHQvKipcblx0ICogc2ltcGxlIGNsYXNzIGluaGVyaXRhbmNlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNoaWxkXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGJhc2Vcblx0ICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXVxuXHQgKi9cblx0ZnVuY3Rpb24gaW5oZXJpdChjaGlsZCwgYmFzZSwgcHJvcGVydGllcykge1xuXHQgICAgdmFyIGJhc2VQID0gYmFzZS5wcm90b3R5cGUsXG5cdCAgICAgICAgY2hpbGRQO1xuXHRcblx0ICAgIGNoaWxkUCA9IGNoaWxkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZVApO1xuXHQgICAgY2hpbGRQLmNvbnN0cnVjdG9yID0gY2hpbGQ7XG5cdCAgICBjaGlsZFAuX3N1cGVyID0gYmFzZVA7XG5cdFxuXHQgICAgaWYgKHByb3BlcnRpZXMpIHtcblx0ICAgICAgICBhc3NpZ24oY2hpbGRQLCBwcm9wZXJ0aWVzKTtcblx0ICAgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIHNpbXBsZSBmdW5jdGlvbiBiaW5kXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0ICovXG5cdGZ1bmN0aW9uIGJpbmRGbihmbiwgY29udGV4dCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIGJvdW5kRm4oKSB7XG5cdCAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogbGV0IGEgYm9vbGVhbiB2YWx1ZSBhbHNvIGJlIGEgZnVuY3Rpb24gdGhhdCBtdXN0IHJldHVybiBhIGJvb2xlYW5cblx0ICogdGhpcyBmaXJzdCBpdGVtIGluIGFyZ3Mgd2lsbCBiZSB1c2VkIGFzIHRoZSBjb250ZXh0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gdmFsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFthcmdzXVxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIGJvb2xPckZuKHZhbCwgYXJncykge1xuXHQgICAgaWYgKHR5cGVvZiB2YWwgPT0gVFlQRV9GVU5DVElPTikge1xuXHQgICAgICAgIHJldHVybiB2YWwuYXBwbHkoYXJncyA/IGFyZ3NbMF0gfHwgdW5kZWZpbmVkIDogdW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiB1c2UgdGhlIHZhbDIgd2hlbiB2YWwxIGlzIHVuZGVmaW5lZFxuXHQgKiBAcGFyYW0geyp9IHZhbDFcblx0ICogQHBhcmFtIHsqfSB2YWwyXG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0ZnVuY3Rpb24gaWZVbmRlZmluZWQodmFsMSwgdmFsMikge1xuXHQgICAgcmV0dXJuICh2YWwxID09PSB1bmRlZmluZWQpID8gdmFsMiA6IHZhbDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBhZGRFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2Vcblx0ICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlc1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyh0YXJnZXQsIHR5cGVzLCBoYW5kbGVyKSB7XG5cdCAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuXHQgICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogcmVtb3ZlRXZlbnRMaXN0ZW5lciB3aXRoIG11bHRpcGxlIGV2ZW50cyBhdCBvbmNlXG5cdCAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgKi9cblx0ZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuXHQgICAgZWFjaChzcGxpdFN0cih0eXBlcyksIGZ1bmN0aW9uKHR5cGUpIHtcblx0ICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIGZpbmQgaWYgYSBub2RlIGlzIGluIHRoZSBnaXZlbiBwYXJlbnRcblx0ICogQG1ldGhvZCBoYXNQYXJlbnRcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwYXJlbnRcblx0ICogQHJldHVybiB7Qm9vbGVhbn0gZm91bmRcblx0ICovXG5cdGZ1bmN0aW9uIGhhc1BhcmVudChub2RlLCBwYXJlbnQpIHtcblx0ICAgIHdoaWxlIChub2RlKSB7XG5cdCAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc21hbGwgaW5kZXhPZiB3cmFwcGVyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcblx0ICogQHJldHVybnMge0Jvb2xlYW59IGZvdW5kXG5cdCAqL1xuXHRmdW5jdGlvbiBpblN0cihzdHIsIGZpbmQpIHtcblx0ICAgIHJldHVybiBzdHIuaW5kZXhPZihmaW5kKSA+IC0xO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc3BsaXQgc3RyaW5nIG9uIHdoaXRlc3BhY2Vcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IHdvcmRzXG5cdCAqL1xuXHRmdW5jdGlvbiBzcGxpdFN0cihzdHIpIHtcblx0ICAgIHJldHVybiBzdHIudHJpbSgpLnNwbGl0KC9cXHMrL2cpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZmluZCBpZiBhIGFycmF5IGNvbnRhaW5zIHRoZSBvYmplY3QgdXNpbmcgaW5kZXhPZiBvciBhIHNpbXBsZSBwb2x5RmlsbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBzcmNcblx0ICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtmaW5kQnlLZXldXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW58TnVtYmVyfSBmYWxzZSB3aGVuIG5vdCBmb3VuZCwgb3IgdGhlIGluZGV4XG5cdCAqL1xuXHRmdW5jdGlvbiBpbkFycmF5KHNyYywgZmluZCwgZmluZEJ5S2V5KSB7XG5cdCAgICBpZiAoc3JjLmluZGV4T2YgJiYgIWZpbmRCeUtleSkge1xuXHQgICAgICAgIHJldHVybiBzcmMuaW5kZXhPZihmaW5kKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgc3JjLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBpZiAoKGZpbmRCeUtleSAmJiBzcmNbaV1bZmluZEJ5S2V5XSA9PSBmaW5kKSB8fCAoIWZpbmRCeUtleSAmJiBzcmNbaV0gPT09IGZpbmQpKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAtMTtcblx0ICAgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIGNvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIHJlYWwgYXJyYXlzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gdG9BcnJheShvYmopIHtcblx0ICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmosIDApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogdW5pcXVlIGFycmF5IHdpdGggb2JqZWN0cyBiYXNlZCBvbiBhIGtleSAobGlrZSAnaWQnKSBvciBqdXN0IGJ5IHRoZSBhcnJheSdzIHZhbHVlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHNyYyBbe2lkOjF9LHtpZDoyfSx7aWQ6MX1dXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtzb3J0PUZhbHNlXVxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFt7aWQ6MX0se2lkOjJ9XVxuXHQgKi9cblx0ZnVuY3Rpb24gdW5pcXVlQXJyYXkoc3JjLCBrZXksIHNvcnQpIHtcblx0ICAgIHZhciByZXN1bHRzID0gW107XG5cdCAgICB2YXIgdmFsdWVzID0gW107XG5cdCAgICB2YXIgaSA9IDA7XG5cdFxuXHQgICAgd2hpbGUgKGkgPCBzcmMubGVuZ3RoKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IGtleSA/IHNyY1tpXVtrZXldIDogc3JjW2ldO1xuXHQgICAgICAgIGlmIChpbkFycmF5KHZhbHVlcywgdmFsKSA8IDApIHtcblx0ICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHNyY1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhbHVlc1tpXSA9IHZhbDtcblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHNvcnQpIHtcblx0ICAgICAgICBpZiAoIWtleSkge1xuXHQgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zb3J0KCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydChmdW5jdGlvbiBzb3J0VW5pcXVlQXJyYXkoYSwgYikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGFba2V5XSA+IGJba2V5XTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByZXN1bHRzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfFVuZGVmaW5lZH0gcHJlZml4ZWRcblx0ICovXG5cdGZ1bmN0aW9uIHByZWZpeGVkKG9iaiwgcHJvcGVydHkpIHtcblx0ICAgIHZhciBwcmVmaXgsIHByb3A7XG5cdCAgICB2YXIgY2FtZWxQcm9wID0gcHJvcGVydHlbMF0udG9VcHBlckNhc2UoKSArIHByb3BlcnR5LnNsaWNlKDEpO1xuXHRcblx0ICAgIHZhciBpID0gMDtcblx0ICAgIHdoaWxlIChpIDwgVkVORE9SX1BSRUZJWEVTLmxlbmd0aCkge1xuXHQgICAgICAgIHByZWZpeCA9IFZFTkRPUl9QUkVGSVhFU1tpXTtcblx0ICAgICAgICBwcm9wID0gKHByZWZpeCkgPyBwcmVmaXggKyBjYW1lbFByb3AgOiBwcm9wZXJ0eTtcblx0XG5cdCAgICAgICAgaWYgKHByb3AgaW4gb2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwcm9wO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IGEgdW5pcXVlIGlkXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IHVuaXF1ZUlkXG5cdCAqL1xuXHR2YXIgX3VuaXF1ZUlkID0gMTtcblx0ZnVuY3Rpb24gdW5pcXVlSWQoKSB7XG5cdCAgICByZXR1cm4gX3VuaXF1ZUlkKys7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBnZXQgdGhlIHdpbmRvdyBvYmplY3Qgb2YgYW4gZWxlbWVudFxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG5cdCAqIEByZXR1cm5zIHtEb2N1bWVudFZpZXd8V2luZG93fVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0V2luZG93Rm9yRWxlbWVudChlbGVtZW50KSB7XG5cdCAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50IHx8IGVsZW1lbnQ7XG5cdCAgICByZXR1cm4gKGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93IHx8IHdpbmRvdyk7XG5cdH1cblx0XG5cdHZhciBNT0JJTEVfUkVHRVggPSAvbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2k7XG5cdFxuXHR2YXIgU1VQUE9SVF9UT1VDSCA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpO1xuXHR2YXIgU1VQUE9SVF9QT0lOVEVSX0VWRU5UUyA9IHByZWZpeGVkKHdpbmRvdywgJ1BvaW50ZXJFdmVudCcpICE9PSB1bmRlZmluZWQ7XG5cdHZhciBTVVBQT1JUX09OTFlfVE9VQ0ggPSBTVVBQT1JUX1RPVUNIICYmIE1PQklMRV9SRUdFWC50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXHRcblx0dmFyIElOUFVUX1RZUEVfVE9VQ0ggPSAndG91Y2gnO1xuXHR2YXIgSU5QVVRfVFlQRV9QRU4gPSAncGVuJztcblx0dmFyIElOUFVUX1RZUEVfTU9VU0UgPSAnbW91c2UnO1xuXHR2YXIgSU5QVVRfVFlQRV9LSU5FQ1QgPSAna2luZWN0Jztcblx0XG5cdHZhciBDT01QVVRFX0lOVEVSVkFMID0gMjU7XG5cdFxuXHR2YXIgSU5QVVRfU1RBUlQgPSAxO1xuXHR2YXIgSU5QVVRfTU9WRSA9IDI7XG5cdHZhciBJTlBVVF9FTkQgPSA0O1xuXHR2YXIgSU5QVVRfQ0FOQ0VMID0gODtcblx0XG5cdHZhciBESVJFQ1RJT05fTk9ORSA9IDE7XG5cdHZhciBESVJFQ1RJT05fTEVGVCA9IDI7XG5cdHZhciBESVJFQ1RJT05fUklHSFQgPSA0O1xuXHR2YXIgRElSRUNUSU9OX1VQID0gODtcblx0dmFyIERJUkVDVElPTl9ET1dOID0gMTY7XG5cdFxuXHR2YXIgRElSRUNUSU9OX0hPUklaT05UQUwgPSBESVJFQ1RJT05fTEVGVCB8IERJUkVDVElPTl9SSUdIVDtcblx0dmFyIERJUkVDVElPTl9WRVJUSUNBTCA9IERJUkVDVElPTl9VUCB8IERJUkVDVElPTl9ET1dOO1xuXHR2YXIgRElSRUNUSU9OX0FMTCA9IERJUkVDVElPTl9IT1JJWk9OVEFMIHwgRElSRUNUSU9OX1ZFUlRJQ0FMO1xuXHRcblx0dmFyIFBST1BTX1hZID0gWyd4JywgJ3knXTtcblx0dmFyIFBST1BTX0NMSUVOVF9YWSA9IFsnY2xpZW50WCcsICdjbGllbnRZJ107XG5cdFxuXHQvKipcblx0ICogY3JlYXRlIG5ldyBpbnB1dCB0eXBlIG1hbmFnZXJcblx0ICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqIEByZXR1cm5zIHtJbnB1dH1cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBJbnB1dChtYW5hZ2VyLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcblx0ICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblx0ICAgIHRoaXMuZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcblx0ICAgIHRoaXMudGFyZ2V0ID0gbWFuYWdlci5vcHRpb25zLmlucHV0VGFyZ2V0O1xuXHRcblx0ICAgIC8vIHNtYWxsZXIgd3JhcHBlciBhcm91bmQgdGhlIGhhbmRsZXIsIGZvciB0aGUgc2NvcGUgYW5kIHRoZSBlbmFibGVkIHN0YXRlIG9mIHRoZSBtYW5hZ2VyLFxuXHQgICAgLy8gc28gd2hlbiBkaXNhYmxlZCB0aGUgaW5wdXQgZXZlbnRzIGFyZSBjb21wbGV0ZWx5IGJ5cGFzc2VkLlxuXHQgICAgdGhpcy5kb21IYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcblx0ICAgICAgICBpZiAoYm9vbE9yRm4obWFuYWdlci5vcHRpb25zLmVuYWJsZSwgW21hbmFnZXJdKSkge1xuXHQgICAgICAgICAgICBzZWxmLmhhbmRsZXIoZXYpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5pbml0KCk7XG5cdFxuXHR9XG5cdFxuXHRJbnB1dC5wcm90b3R5cGUgPSB7XG5cdCAgICAvKipcblx0ICAgICAqIHNob3VsZCBoYW5kbGUgdGhlIGlucHV0RXZlbnQgZGF0YSBhbmQgdHJpZ2dlciB0aGUgY2FsbGJhY2tcblx0ICAgICAqIEB2aXJ0dWFsXG5cdCAgICAgKi9cblx0ICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCkgeyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogYmluZCB0aGUgZXZlbnRzXG5cdCAgICAgKi9cblx0ICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuZXZFbCAmJiBhZGRFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgICAgIHRoaXMuZXZXaW4gJiYgYWRkRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHVuYmluZCB0aGUgZXZlbnRzXG5cdCAgICAgKi9cblx0ICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuZXZFbCAmJiByZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLmVsZW1lbnQsIHRoaXMuZXZFbCwgdGhpcy5kb21IYW5kbGVyKTtcblx0ICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgICAgIHRoaXMuZXZXaW4gJiYgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoZ2V0V2luZG93Rm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpLCB0aGlzLmV2V2luLCB0aGlzLmRvbUhhbmRsZXIpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG5cdCAqIGNhbGxlZCBieSB0aGUgTWFuYWdlciBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0hhbW1lcn0gbWFuYWdlclxuXHQgKiBAcmV0dXJucyB7SW5wdXR9XG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVJbnB1dEluc3RhbmNlKG1hbmFnZXIpIHtcblx0ICAgIHZhciBUeXBlO1xuXHQgICAgdmFyIGlucHV0Q2xhc3MgPSBtYW5hZ2VyLm9wdGlvbnMuaW5wdXRDbGFzcztcblx0XG5cdCAgICBpZiAoaW5wdXRDbGFzcykge1xuXHQgICAgICAgIFR5cGUgPSBpbnB1dENsYXNzO1xuXHQgICAgfSBlbHNlIGlmIChTVVBQT1JUX1BPSU5URVJfRVZFTlRTKSB7XG5cdCAgICAgICAgVHlwZSA9IFBvaW50ZXJFdmVudElucHV0O1xuXHQgICAgfSBlbHNlIGlmIChTVVBQT1JUX09OTFlfVE9VQ0gpIHtcblx0ICAgICAgICBUeXBlID0gVG91Y2hJbnB1dDtcblx0ICAgIH0gZWxzZSBpZiAoIVNVUFBPUlRfVE9VQ0gpIHtcblx0ICAgICAgICBUeXBlID0gTW91c2VJbnB1dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgVHlwZSA9IFRvdWNoTW91c2VJbnB1dDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBuZXcgKFR5cGUpKG1hbmFnZXIsIGlucHV0SGFuZGxlcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBoYW5kbGUgaW5wdXQgZXZlbnRzXG5cdCAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRUeXBlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gaW5wdXRIYW5kbGVyKG1hbmFnZXIsIGV2ZW50VHlwZSwgaW5wdXQpIHtcblx0ICAgIHZhciBwb2ludGVyc0xlbiA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aDtcblx0ICAgIHZhciBjaGFuZ2VkUG9pbnRlcnNMZW4gPSBpbnB1dC5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoO1xuXHQgICAgdmFyIGlzRmlyc3QgPSAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKHBvaW50ZXJzTGVuIC0gY2hhbmdlZFBvaW50ZXJzTGVuID09PSAwKSk7XG5cdCAgICB2YXIgaXNGaW5hbCA9IChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcblx0XG5cdCAgICBpbnB1dC5pc0ZpcnN0ID0gISFpc0ZpcnN0O1xuXHQgICAgaW5wdXQuaXNGaW5hbCA9ICEhaXNGaW5hbDtcblx0XG5cdCAgICBpZiAoaXNGaXJzdCkge1xuXHQgICAgICAgIG1hbmFnZXIuc2Vzc2lvbiA9IHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHNvdXJjZSBldmVudCBpcyB0aGUgbm9ybWFsaXplZCB2YWx1ZSBvZiB0aGUgZG9tRXZlbnRzXG5cdCAgICAvLyBsaWtlICd0b3VjaHN0YXJ0LCBtb3VzZXVwLCBwb2ludGVyZG93bidcblx0ICAgIGlucHV0LmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcblx0XG5cdCAgICAvLyBjb21wdXRlIHNjYWxlLCByb3RhdGlvbiBldGNcblx0ICAgIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpO1xuXHRcblx0ICAgIC8vIGVtaXQgc2VjcmV0IGV2ZW50XG5cdCAgICBtYW5hZ2VyLmVtaXQoJ2hhbW1lci5pbnB1dCcsIGlucHV0KTtcblx0XG5cdCAgICBtYW5hZ2VyLnJlY29nbml6ZShpbnB1dCk7XG5cdCAgICBtYW5hZ2VyLnNlc3Npb24ucHJldklucHV0ID0gaW5wdXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBleHRlbmQgdGhlIGRhdGEgd2l0aCBzb21lIHVzYWJsZSBwcm9wZXJ0aWVzIGxpa2Ugc2NhbGUsIHJvdGF0ZSwgdmVsb2NpdHkgZXRjXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCkge1xuXHQgICAgdmFyIHNlc3Npb24gPSBtYW5hZ2VyLnNlc3Npb247XG5cdCAgICB2YXIgcG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycztcblx0ICAgIHZhciBwb2ludGVyc0xlbmd0aCA9IHBvaW50ZXJzLmxlbmd0aDtcblx0XG5cdCAgICAvLyBzdG9yZSB0aGUgZmlyc3QgaW5wdXQgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBhbmQgZGlyZWN0aW9uXG5cdCAgICBpZiAoIXNlc3Npb24uZmlyc3RJbnB1dCkge1xuXHQgICAgICAgIHNlc3Npb24uZmlyc3RJbnB1dCA9IHNpbXBsZUNsb25lSW5wdXREYXRhKGlucHV0KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB0byBjb21wdXRlIHNjYWxlIGFuZCByb3RhdGlvbiB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBtdWx0aXBsZSB0b3VjaGVzXG5cdCAgICBpZiAocG9pbnRlcnNMZW5ndGggPiAxICYmICFzZXNzaW9uLmZpcnN0TXVsdGlwbGUpIHtcblx0ICAgICAgICBzZXNzaW9uLmZpcnN0TXVsdGlwbGUgPSBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCk7XG5cdCAgICB9IGVsc2UgaWYgKHBvaW50ZXJzTGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpcnN0SW5wdXQgPSBzZXNzaW9uLmZpcnN0SW5wdXQ7XG5cdCAgICB2YXIgZmlyc3RNdWx0aXBsZSA9IHNlc3Npb24uZmlyc3RNdWx0aXBsZTtcblx0ICAgIHZhciBvZmZzZXRDZW50ZXIgPSBmaXJzdE11bHRpcGxlID8gZmlyc3RNdWx0aXBsZS5jZW50ZXIgOiBmaXJzdElucHV0LmNlbnRlcjtcblx0XG5cdCAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyID0gZ2V0Q2VudGVyKHBvaW50ZXJzKTtcblx0ICAgIGlucHV0LnRpbWVTdGFtcCA9IG5vdygpO1xuXHQgICAgaW5wdXQuZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gZmlyc3RJbnB1dC50aW1lU3RhbXA7XG5cdFxuXHQgICAgaW5wdXQuYW5nbGUgPSBnZXRBbmdsZShvZmZzZXRDZW50ZXIsIGNlbnRlcik7XG5cdCAgICBpbnB1dC5kaXN0YW5jZSA9IGdldERpc3RhbmNlKG9mZnNldENlbnRlciwgY2VudGVyKTtcblx0XG5cdCAgICBjb21wdXRlRGVsdGFYWShzZXNzaW9uLCBpbnB1dCk7XG5cdCAgICBpbnB1dC5vZmZzZXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuXHRcblx0ICAgIHZhciBvdmVyYWxsVmVsb2NpdHkgPSBnZXRWZWxvY2l0eShpbnB1dC5kZWx0YVRpbWUsIGlucHV0LmRlbHRhWCwgaW5wdXQuZGVsdGFZKTtcblx0ICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVggPSBvdmVyYWxsVmVsb2NpdHkueDtcblx0ICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVkgPSBvdmVyYWxsVmVsb2NpdHkueTtcblx0ICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eSA9IChhYnMob3ZlcmFsbFZlbG9jaXR5LngpID4gYWJzKG92ZXJhbGxWZWxvY2l0eS55KSkgPyBvdmVyYWxsVmVsb2NpdHkueCA6IG92ZXJhbGxWZWxvY2l0eS55O1xuXHRcblx0ICAgIGlucHV0LnNjYWxlID0gZmlyc3RNdWx0aXBsZSA/IGdldFNjYWxlKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDE7XG5cdCAgICBpbnB1dC5yb3RhdGlvbiA9IGZpcnN0TXVsdGlwbGUgPyBnZXRSb3RhdGlvbihmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAwO1xuXHRcblx0ICAgIGlucHV0Lm1heFBvaW50ZXJzID0gIXNlc3Npb24ucHJldklucHV0ID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogKChpbnB1dC5wb2ludGVycy5sZW5ndGggPlxuXHQgICAgICAgIHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKSA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6IHNlc3Npb24ucHJldklucHV0Lm1heFBvaW50ZXJzKTtcblx0XG5cdCAgICBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpO1xuXHRcblx0ICAgIC8vIGZpbmQgdGhlIGNvcnJlY3QgdGFyZ2V0XG5cdCAgICB2YXIgdGFyZ2V0ID0gbWFuYWdlci5lbGVtZW50O1xuXHQgICAgaWYgKGhhc1BhcmVudChpbnB1dC5zcmNFdmVudC50YXJnZXQsIHRhcmdldCkpIHtcblx0ICAgICAgICB0YXJnZXQgPSBpbnB1dC5zcmNFdmVudC50YXJnZXQ7XG5cdCAgICB9XG5cdCAgICBpbnB1dC50YXJnZXQgPSB0YXJnZXQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KSB7XG5cdCAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyO1xuXHQgICAgdmFyIG9mZnNldCA9IHNlc3Npb24ub2Zmc2V0RGVsdGEgfHwge307XG5cdCAgICB2YXIgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgfHwge307XG5cdCAgICB2YXIgcHJldklucHV0ID0gc2Vzc2lvbi5wcmV2SW5wdXQgfHwge307XG5cdFxuXHQgICAgaWYgKGlucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfU1RBUlQgfHwgcHJldklucHV0LmV2ZW50VHlwZSA9PT0gSU5QVVRfRU5EKSB7XG5cdCAgICAgICAgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgPSB7XG5cdCAgICAgICAgICAgIHg6IHByZXZJbnB1dC5kZWx0YVggfHwgMCxcblx0ICAgICAgICAgICAgeTogcHJldklucHV0LmRlbHRhWSB8fCAwXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgb2Zmc2V0ID0gc2Vzc2lvbi5vZmZzZXREZWx0YSA9IHtcblx0ICAgICAgICAgICAgeDogY2VudGVyLngsXG5cdCAgICAgICAgICAgIHk6IGNlbnRlci55XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBpbnB1dC5kZWx0YVggPSBwcmV2RGVsdGEueCArIChjZW50ZXIueCAtIG9mZnNldC54KTtcblx0ICAgIGlucHV0LmRlbHRhWSA9IHByZXZEZWx0YS55ICsgKGNlbnRlci55IC0gb2Zmc2V0LnkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogdmVsb2NpdHkgaXMgY2FsY3VsYXRlZCBldmVyeSB4IG1zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXNzaW9uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KSB7XG5cdCAgICB2YXIgbGFzdCA9IHNlc3Npb24ubGFzdEludGVydmFsIHx8IGlucHV0LFxuXHQgICAgICAgIGRlbHRhVGltZSA9IGlucHV0LnRpbWVTdGFtcCAtIGxhc3QudGltZVN0YW1wLFxuXHQgICAgICAgIHZlbG9jaXR5LCB2ZWxvY2l0eVgsIHZlbG9jaXR5WSwgZGlyZWN0aW9uO1xuXHRcblx0ICAgIGlmIChpbnB1dC5ldmVudFR5cGUgIT0gSU5QVVRfQ0FOQ0VMICYmIChkZWx0YVRpbWUgPiBDT01QVVRFX0lOVEVSVkFMIHx8IGxhc3QudmVsb2NpdHkgPT09IHVuZGVmaW5lZCkpIHtcblx0ICAgICAgICB2YXIgZGVsdGFYID0gaW5wdXQuZGVsdGFYIC0gbGFzdC5kZWx0YVg7XG5cdCAgICAgICAgdmFyIGRlbHRhWSA9IGlucHV0LmRlbHRhWSAtIGxhc3QuZGVsdGFZO1xuXHRcblx0ICAgICAgICB2YXIgdiA9IGdldFZlbG9jaXR5KGRlbHRhVGltZSwgZGVsdGFYLCBkZWx0YVkpO1xuXHQgICAgICAgIHZlbG9jaXR5WCA9IHYueDtcblx0ICAgICAgICB2ZWxvY2l0eVkgPSB2Lnk7XG5cdCAgICAgICAgdmVsb2NpdHkgPSAoYWJzKHYueCkgPiBhYnModi55KSkgPyB2LnggOiB2Lnk7XG5cdCAgICAgICAgZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGRlbHRhWCwgZGVsdGFZKTtcblx0XG5cdCAgICAgICAgc2Vzc2lvbi5sYXN0SW50ZXJ2YWwgPSBpbnB1dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gdXNlIGxhdGVzdCB2ZWxvY2l0eSBpbmZvIGlmIGl0IGRvZXNuJ3Qgb3ZlcnRha2UgYSBtaW5pbXVtIHBlcmlvZFxuXHQgICAgICAgIHZlbG9jaXR5ID0gbGFzdC52ZWxvY2l0eTtcblx0ICAgICAgICB2ZWxvY2l0eVggPSBsYXN0LnZlbG9jaXR5WDtcblx0ICAgICAgICB2ZWxvY2l0eVkgPSBsYXN0LnZlbG9jaXR5WTtcblx0ICAgICAgICBkaXJlY3Rpb24gPSBsYXN0LmRpcmVjdGlvbjtcblx0ICAgIH1cblx0XG5cdCAgICBpbnB1dC52ZWxvY2l0eSA9IHZlbG9jaXR5O1xuXHQgICAgaW5wdXQudmVsb2NpdHlYID0gdmVsb2NpdHlYO1xuXHQgICAgaW5wdXQudmVsb2NpdHlZID0gdmVsb2NpdHlZO1xuXHQgICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY3JlYXRlIGEgc2ltcGxlIGNsb25lIGZyb20gdGhlIGlucHV0IHVzZWQgZm9yIHN0b3JhZ2Ugb2YgZmlyc3RJbnB1dCBhbmQgZmlyc3RNdWx0aXBsZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICogQHJldHVybnMge09iamVjdH0gY2xvbmVkSW5wdXREYXRhXG5cdCAqL1xuXHRmdW5jdGlvbiBzaW1wbGVDbG9uZUlucHV0RGF0YShpbnB1dCkge1xuXHQgICAgLy8gbWFrZSBhIHNpbXBsZSBjb3B5IG9mIHRoZSBwb2ludGVycyBiZWNhdXNlIHdlIHdpbGwgZ2V0IGEgcmVmZXJlbmNlIGlmIHdlIGRvbid0XG5cdCAgICAvLyB3ZSBvbmx5IG5lZWQgY2xpZW50WFkgZm9yIHRoZSBjYWxjdWxhdGlvbnNcblx0ICAgIHZhciBwb2ludGVycyA9IFtdO1xuXHQgICAgdmFyIGkgPSAwO1xuXHQgICAgd2hpbGUgKGkgPCBpbnB1dC5wb2ludGVycy5sZW5ndGgpIHtcblx0ICAgICAgICBwb2ludGVyc1tpXSA9IHtcblx0ICAgICAgICAgICAgY2xpZW50WDogcm91bmQoaW5wdXQucG9pbnRlcnNbaV0uY2xpZW50WCksXG5cdCAgICAgICAgICAgIGNsaWVudFk6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFkpXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICB0aW1lU3RhbXA6IG5vdygpLFxuXHQgICAgICAgIHBvaW50ZXJzOiBwb2ludGVycyxcblx0ICAgICAgICBjZW50ZXI6IGdldENlbnRlcihwb2ludGVycyksXG5cdCAgICAgICAgZGVsdGFYOiBpbnB1dC5kZWx0YVgsXG5cdCAgICAgICAgZGVsdGFZOiBpbnB1dC5kZWx0YVlcblx0ICAgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBnZXQgdGhlIGNlbnRlciBvZiBhbGwgdGhlIHBvaW50ZXJzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHBvaW50ZXJzXG5cdCAqIEByZXR1cm4ge09iamVjdH0gY2VudGVyIGNvbnRhaW5zIGB4YCBhbmQgYHlgIHByb3BlcnRpZXNcblx0ICovXG5cdGZ1bmN0aW9uIGdldENlbnRlcihwb2ludGVycykge1xuXHQgICAgdmFyIHBvaW50ZXJzTGVuZ3RoID0gcG9pbnRlcnMubGVuZ3RoO1xuXHRcblx0ICAgIC8vIG5vIG5lZWQgdG8gbG9vcCB3aGVuIG9ubHkgb25lIHRvdWNoXG5cdCAgICBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICB4OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRYKSxcblx0ICAgICAgICAgICAgeTogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WSlcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciB4ID0gMCwgeSA9IDAsIGkgPSAwO1xuXHQgICAgd2hpbGUgKGkgPCBwb2ludGVyc0xlbmd0aCkge1xuXHQgICAgICAgIHggKz0gcG9pbnRlcnNbaV0uY2xpZW50WDtcblx0ICAgICAgICB5ICs9IHBvaW50ZXJzW2ldLmNsaWVudFk7XG5cdCAgICAgICAgaSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgeDogcm91bmQoeCAvIHBvaW50ZXJzTGVuZ3RoKSxcblx0ICAgICAgICB5OiByb3VuZCh5IC8gcG9pbnRlcnNMZW5ndGgpXG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSB2ZWxvY2l0eSBiZXR3ZWVuIHR3byBwb2ludHMuIHVuaXQgaXMgaW4gcHggcGVyIG1zLlxuXHQgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFUaW1lXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB4XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB5XG5cdCAqIEByZXR1cm4ge09iamVjdH0gdmVsb2NpdHkgYHhgIGFuZCBgeWBcblx0ICovXG5cdGZ1bmN0aW9uIGdldFZlbG9jaXR5KGRlbHRhVGltZSwgeCwgeSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICB4OiB4IC8gZGVsdGFUaW1lIHx8IDAsXG5cdCAgICAgICAgeTogeSAvIGRlbHRhVGltZSB8fCAwXG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogZ2V0IHRoZSBkaXJlY3Rpb24gYmV0d2VlbiB0d28gcG9pbnRzXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB4XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB5XG5cdCAqIEByZXR1cm4ge051bWJlcn0gZGlyZWN0aW9uXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXREaXJlY3Rpb24oeCwgeSkge1xuXHQgICAgaWYgKHggPT09IHkpIHtcblx0ICAgICAgICByZXR1cm4gRElSRUNUSU9OX05PTkU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGFicyh4KSA+PSBhYnMoeSkpIHtcblx0ICAgICAgICByZXR1cm4geCA8IDAgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB5IDwgMCA/IERJUkVDVElPTl9VUCA6IERJUkVDVElPTl9ET1dOO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSBhYnNvbHV0ZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHNcblx0ICogQHBhcmFtIHtPYmplY3R9IHAxIHt4LCB5fVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcDIge3gsIHl9XG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcblx0ICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0RGlzdGFuY2UocDEsIHAyLCBwcm9wcykge1xuXHQgICAgaWYgKCFwcm9wcykge1xuXHQgICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG5cdCAgICB9XG5cdCAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcblx0ICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuXHRcblx0ICAgIHJldHVybiBNYXRoLnNxcnQoKHggKiB4KSArICh5ICogeSkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSBhbmdsZSBiZXR3ZWVuIHR3byBjb29yZGluYXRlc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gcDFcblx0ICogQHBhcmFtIHtPYmplY3R9IHAyXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcblx0ICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0QW5nbGUocDEsIHAyLCBwcm9wcykge1xuXHQgICAgaWYgKCFwcm9wcykge1xuXHQgICAgICAgIHByb3BzID0gUFJPUFNfWFk7XG5cdCAgICB9XG5cdCAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcblx0ICAgICAgICB5ID0gcDJbcHJvcHNbMV1dIC0gcDFbcHJvcHNbMV1dO1xuXHQgICAgcmV0dXJuIE1hdGguYXRhbjIoeSwgeCkgKiAxODAgLyBNYXRoLlBJO1xuXHR9XG5cdFxuXHQvKipcblx0ICogY2FsY3VsYXRlIHRoZSByb3RhdGlvbiBkZWdyZWVzIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHN0YXJ0IGFycmF5IG9mIHBvaW50ZXJzXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IHJvdGF0aW9uXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRSb3RhdGlvbihzdGFydCwgZW5kKSB7XG5cdCAgICByZXR1cm4gZ2V0QW5nbGUoZW5kWzFdLCBlbmRbMF0sIFBST1BTX0NMSUVOVF9YWSkgKyBnZXRBbmdsZShzdGFydFsxXSwgc3RhcnRbMF0sIFBST1BTX0NMSUVOVF9YWSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBjYWxjdWxhdGUgdGhlIHNjYWxlIGZhY3RvciBiZXR3ZWVuIHR3byBwb2ludGVyc2V0c1xuXHQgKiBubyBzY2FsZSBpcyAxLCBhbmQgZ29lcyBkb3duIHRvIDAgd2hlbiBwaW5jaGVkIHRvZ2V0aGVyLCBhbmQgYmlnZ2VyIHdoZW4gcGluY2hlZCBvdXRcblx0ICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcblx0ICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG5cdCAqIEByZXR1cm4ge051bWJlcn0gc2NhbGVcblx0ICovXG5cdGZ1bmN0aW9uIGdldFNjYWxlKHN0YXJ0LCBlbmQpIHtcblx0ICAgIHJldHVybiBnZXREaXN0YW5jZShlbmRbMF0sIGVuZFsxXSwgUFJPUFNfQ0xJRU5UX1hZKSAvIGdldERpc3RhbmNlKHN0YXJ0WzBdLCBzdGFydFsxXSwgUFJPUFNfQ0xJRU5UX1hZKTtcblx0fVxuXHRcblx0dmFyIE1PVVNFX0lOUFVUX01BUCA9IHtcblx0ICAgIG1vdXNlZG93bjogSU5QVVRfU1RBUlQsXG5cdCAgICBtb3VzZW1vdmU6IElOUFVUX01PVkUsXG5cdCAgICBtb3VzZXVwOiBJTlBVVF9FTkRcblx0fTtcblx0XG5cdHZhciBNT1VTRV9FTEVNRU5UX0VWRU5UUyA9ICdtb3VzZWRvd24nO1xuXHR2YXIgTU9VU0VfV0lORE9XX0VWRU5UUyA9ICdtb3VzZW1vdmUgbW91c2V1cCc7XG5cdFxuXHQvKipcblx0ICogTW91c2UgZXZlbnRzIGlucHV0XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBJbnB1dFxuXHQgKi9cblx0ZnVuY3Rpb24gTW91c2VJbnB1dCgpIHtcblx0ICAgIHRoaXMuZXZFbCA9IE1PVVNFX0VMRU1FTlRfRVZFTlRTO1xuXHQgICAgdGhpcy5ldldpbiA9IE1PVVNFX1dJTkRPV19FVkVOVFM7XG5cdFxuXHQgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7IC8vIG1vdXNlZG93biBzdGF0ZVxuXHRcblx0ICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoTW91c2VJbnB1dCwgSW5wdXQsIHtcblx0ICAgIC8qKlxuXHQgICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGV2XG5cdCAgICAgKi9cblx0ICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1FaGFuZGxlcihldikge1xuXHQgICAgICAgIHZhciBldmVudFR5cGUgPSBNT1VTRV9JTlBVVF9NQVBbZXYudHlwZV07XG5cdFxuXHQgICAgICAgIC8vIG9uIHN0YXJ0IHdlIHdhbnQgdG8gaGF2ZSB0aGUgbGVmdCBtb3VzZSBidXR0b24gZG93blxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiBldi5idXR0b24gPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9NT1ZFICYmIGV2LndoaWNoICE9PSAxKSB7XG5cdCAgICAgICAgICAgIGV2ZW50VHlwZSA9IElOUFVUX0VORDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIG1vdXNlIG11c3QgYmUgZG93blxuXHQgICAgICAgIGlmICghdGhpcy5wcmVzc2VkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcblx0ICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG5cdCAgICAgICAgICAgIHBvaW50ZXJzOiBbZXZdLFxuXHQgICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG5cdCAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX01PVVNFLFxuXHQgICAgICAgICAgICBzcmNFdmVudDogZXZcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHR2YXIgUE9JTlRFUl9JTlBVVF9NQVAgPSB7XG5cdCAgICBwb2ludGVyZG93bjogSU5QVVRfU1RBUlQsXG5cdCAgICBwb2ludGVybW92ZTogSU5QVVRfTU9WRSxcblx0ICAgIHBvaW50ZXJ1cDogSU5QVVRfRU5ELFxuXHQgICAgcG9pbnRlcmNhbmNlbDogSU5QVVRfQ0FOQ0VMLFxuXHQgICAgcG9pbnRlcm91dDogSU5QVVRfQ0FOQ0VMXG5cdH07XG5cdFxuXHQvLyBpbiBJRTEwIHRoZSBwb2ludGVyIHR5cGVzIGlzIGRlZmluZWQgYXMgYW4gZW51bVxuXHR2YXIgSUUxMF9QT0lOVEVSX1RZUEVfRU5VTSA9IHtcblx0ICAgIDI6IElOUFVUX1RZUEVfVE9VQ0gsXG5cdCAgICAzOiBJTlBVVF9UWVBFX1BFTixcblx0ICAgIDQ6IElOUFVUX1RZUEVfTU9VU0UsXG5cdCAgICA1OiBJTlBVVF9UWVBFX0tJTkVDVCAvLyBzZWUgaHR0cHM6Ly90d2l0dGVyLmNvbS9qYWNvYnJvc3NpL3N0YXR1cy80ODA1OTY0Mzg0ODk4OTA4MTZcblx0fTtcblx0XG5cdHZhciBQT0lOVEVSX0VMRU1FTlRfRVZFTlRTID0gJ3BvaW50ZXJkb3duJztcblx0dmFyIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdwb2ludGVybW92ZSBwb2ludGVydXAgcG9pbnRlcmNhbmNlbCc7XG5cdFxuXHQvLyBJRTEwIGhhcyBwcmVmaXhlZCBzdXBwb3J0LCBhbmQgY2FzZS1zZW5zaXRpdmVcblx0aWYgKHdpbmRvdy5NU1BvaW50ZXJFdmVudCAmJiAhd2luZG93LlBvaW50ZXJFdmVudCkge1xuXHQgICAgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdNU1BvaW50ZXJEb3duJztcblx0ICAgIFBPSU5URVJfV0lORE9XX0VWRU5UUyA9ICdNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQb2ludGVyIGV2ZW50cyBpbnB1dFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgSW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIFBvaW50ZXJFdmVudElucHV0KCkge1xuXHQgICAgdGhpcy5ldkVsID0gUE9JTlRFUl9FTEVNRU5UX0VWRU5UUztcblx0ICAgIHRoaXMuZXZXaW4gPSBQT0lOVEVSX1dJTkRPV19FVkVOVFM7XG5cdFxuXHQgICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XG5cdCAgICB0aGlzLnN0b3JlID0gKHRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHMgPSBbXSk7XG5cdH1cblx0XG5cdGluaGVyaXQoUG9pbnRlckV2ZW50SW5wdXQsIElucHV0LCB7XG5cdCAgICAvKipcblx0ICAgICAqIGhhbmRsZSBtb3VzZSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuXHQgICAgICovXG5cdCAgICBoYW5kbGVyOiBmdW5jdGlvbiBQRWhhbmRsZXIoZXYpIHtcblx0ICAgICAgICB2YXIgc3RvcmUgPSB0aGlzLnN0b3JlO1xuXHQgICAgICAgIHZhciByZW1vdmVQb2ludGVyID0gZmFsc2U7XG5cdFxuXHQgICAgICAgIHZhciBldmVudFR5cGVOb3JtYWxpemVkID0gZXYudHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ21zJywgJycpO1xuXHQgICAgICAgIHZhciBldmVudFR5cGUgPSBQT0lOVEVSX0lOUFVUX01BUFtldmVudFR5cGVOb3JtYWxpemVkXTtcblx0ICAgICAgICB2YXIgcG9pbnRlclR5cGUgPSBJRTEwX1BPSU5URVJfVFlQRV9FTlVNW2V2LnBvaW50ZXJUeXBlXSB8fCBldi5wb2ludGVyVHlwZTtcblx0XG5cdCAgICAgICAgdmFyIGlzVG91Y2ggPSAocG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCk7XG5cdFxuXHQgICAgICAgIC8vIGdldCBpbmRleCBvZiB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG5cdCAgICAgICAgdmFyIHN0b3JlSW5kZXggPSBpbkFycmF5KHN0b3JlLCBldi5wb2ludGVySWQsICdwb2ludGVySWQnKTtcblx0XG5cdCAgICAgICAgLy8gc3RhcnQgYW5kIG1vdXNlIG11c3QgYmUgZG93blxuXHQgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAoZXYuYnV0dG9uID09PSAwIHx8IGlzVG91Y2gpKSB7XG5cdCAgICAgICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuXHQgICAgICAgICAgICAgICAgc3RvcmUucHVzaChldik7XG5cdCAgICAgICAgICAgICAgICBzdG9yZUluZGV4ID0gc3RvcmUubGVuZ3RoIC0gMTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcblx0ICAgICAgICAgICAgcmVtb3ZlUG9pbnRlciA9IHRydWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBpdCBub3QgZm91bmQsIHNvIHRoZSBwb2ludGVyIGhhc24ndCBiZWVuIGRvd24gKHNvIGl0J3MgcHJvYmFibHkgYSBob3Zlcilcblx0ICAgICAgICBpZiAoc3RvcmVJbmRleCA8IDApIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gdXBkYXRlIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcblx0ICAgICAgICBzdG9yZVtzdG9yZUluZGV4XSA9IGV2O1xuXHRcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG5cdCAgICAgICAgICAgIHBvaW50ZXJzOiBzdG9yZSxcblx0ICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiBbZXZdLFxuXHQgICAgICAgICAgICBwb2ludGVyVHlwZTogcG9pbnRlclR5cGUsXG5cdCAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAocmVtb3ZlUG9pbnRlcikge1xuXHQgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSB0aGUgc3RvcmVcblx0ICAgICAgICAgICAgc3RvcmUuc3BsaWNlKHN0b3JlSW5kZXgsIDEpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fSk7XG5cdFxuXHR2YXIgU0lOR0xFX1RPVUNIX0lOUFVUX01BUCA9IHtcblx0ICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuXHQgICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuXHQgICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcblx0ICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcblx0fTtcblx0XG5cdHZhciBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0Jztcblx0dmFyIFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblx0XG5cdC8qKlxuXHQgKiBUb3VjaCBldmVudHMgaW5wdXRcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIElucHV0XG5cdCAqL1xuXHRmdW5jdGlvbiBTaW5nbGVUb3VjaElucHV0KCkge1xuXHQgICAgdGhpcy5ldlRhcmdldCA9IFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTO1xuXHQgICAgdGhpcy5ldldpbiA9IFNJTkdMRV9UT1VDSF9XSU5ET1dfRVZFTlRTO1xuXHQgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cdFxuXHQgICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChTaW5nbGVUb3VjaElucHV0LCBJbnB1dCwge1xuXHQgICAgaGFuZGxlcjogZnVuY3Rpb24gVEVoYW5kbGVyKGV2KSB7XG5cdCAgICAgICAgdmFyIHR5cGUgPSBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXHRcblx0ICAgICAgICAvLyBzaG91bGQgd2UgaGFuZGxlIHRoZSB0b3VjaCBldmVudHM/XG5cdCAgICAgICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoIXRoaXMuc3RhcnRlZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgdG91Y2hlcyA9IG5vcm1hbGl6ZVNpbmdsZVRvdWNoZXMuY2FsbCh0aGlzLCBldiwgdHlwZSk7XG5cdFxuXHQgICAgICAgIC8vIHdoZW4gZG9uZSwgcmVzZXQgdGhlIHN0YXJ0ZWQgc3RhdGVcblx0ICAgICAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmIHRvdWNoZXNbMF0ubGVuZ3RoIC0gdG91Y2hlc1sxXS5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuXHQgICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcblx0ICAgICAgICAgICAgY2hhbmdlZFBvaW50ZXJzOiB0b3VjaGVzWzFdLFxuXHQgICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcblx0ICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEB0aGlzIHtUb3VjaElucHV0fVxuXHQgKiBAcGFyYW0ge09iamVjdH0gZXZcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuXHQgKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuXHQgKi9cblx0ZnVuY3Rpb24gbm9ybWFsaXplU2luZ2xlVG91Y2hlcyhldiwgdHlwZSkge1xuXHQgICAgdmFyIGFsbCA9IHRvQXJyYXkoZXYudG91Y2hlcyk7XG5cdCAgICB2YXIgY2hhbmdlZCA9IHRvQXJyYXkoZXYuY2hhbmdlZFRvdWNoZXMpO1xuXHRcblx0ICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcblx0ICAgICAgICBhbGwgPSB1bmlxdWVBcnJheShhbGwuY29uY2F0KGNoYW5nZWQpLCAnaWRlbnRpZmllcicsIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBbYWxsLCBjaGFuZ2VkXTtcblx0fVxuXHRcblx0dmFyIFRPVUNIX0lOUFVUX01BUCA9IHtcblx0ICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuXHQgICAgdG91Y2htb3ZlOiBJTlBVVF9NT1ZFLFxuXHQgICAgdG91Y2hlbmQ6IElOUFVUX0VORCxcblx0ICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcblx0fTtcblx0XG5cdHZhciBUT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblx0XG5cdC8qKlxuXHQgKiBNdWx0aS11c2VyIHRvdWNoIGV2ZW50cyBpbnB1dFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgSW5wdXRcblx0ICovXG5cdGZ1bmN0aW9uIFRvdWNoSW5wdXQoKSB7XG5cdCAgICB0aGlzLmV2VGFyZ2V0ID0gVE9VQ0hfVEFSR0VUX0VWRU5UUztcblx0ICAgIHRoaXMudGFyZ2V0SWRzID0ge307XG5cdFxuXHQgICAgSW5wdXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChUb3VjaElucHV0LCBJbnB1dCwge1xuXHQgICAgaGFuZGxlcjogZnVuY3Rpb24gTVRFaGFuZGxlcihldikge1xuXHQgICAgICAgIHZhciB0eXBlID0gVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXHQgICAgICAgIHZhciB0b3VjaGVzID0gZ2V0VG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcblx0ICAgICAgICBpZiAoIXRvdWNoZXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsIHR5cGUsIHtcblx0ICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG5cdCAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcblx0ICAgICAgICAgICAgcG9pbnRlclR5cGU6IElOUFVUX1RZUEVfVE9VQ0gsXG5cdCAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBAdGhpcyB7VG91Y2hJbnB1dH1cblx0ICogQHBhcmFtIHtPYmplY3R9IGV2XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0eXBlIGZsYWdcblx0ICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cblx0ICovXG5cdGZ1bmN0aW9uIGdldFRvdWNoZXMoZXYsIHR5cGUpIHtcblx0ICAgIHZhciBhbGxUb3VjaGVzID0gdG9BcnJheShldi50b3VjaGVzKTtcblx0ICAgIHZhciB0YXJnZXRJZHMgPSB0aGlzLnRhcmdldElkcztcblx0XG5cdCAgICAvLyB3aGVuIHRoZXJlIGlzIG9ubHkgb25lIHRvdWNoLCB0aGUgcHJvY2VzcyBjYW4gYmUgc2ltcGxpZmllZFxuXHQgICAgaWYgKHR5cGUgJiAoSU5QVVRfU1RBUlQgfCBJTlBVVF9NT1ZFKSAmJiBhbGxUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIHRhcmdldElkc1thbGxUb3VjaGVzWzBdLmlkZW50aWZpZXJdID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gW2FsbFRvdWNoZXMsIGFsbFRvdWNoZXNdO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpLFxuXHQgICAgICAgIHRhcmdldFRvdWNoZXMsXG5cdCAgICAgICAgY2hhbmdlZFRvdWNoZXMgPSB0b0FycmF5KGV2LmNoYW5nZWRUb3VjaGVzKSxcblx0ICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyA9IFtdLFxuXHQgICAgICAgIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXHRcblx0ICAgIC8vIGdldCB0YXJnZXQgdG91Y2hlcyBmcm9tIHRvdWNoZXNcblx0ICAgIHRhcmdldFRvdWNoZXMgPSBhbGxUb3VjaGVzLmZpbHRlcihmdW5jdGlvbih0b3VjaCkge1xuXHQgICAgICAgIHJldHVybiBoYXNQYXJlbnQodG91Y2gudGFyZ2V0LCB0YXJnZXQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8gY29sbGVjdCB0b3VjaGVzXG5cdCAgICBpZiAodHlwZSA9PT0gSU5QVVRfU1RBUlQpIHtcblx0ICAgICAgICBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IHRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHRhcmdldElkc1t0YXJnZXRUb3VjaGVzW2ldLmlkZW50aWZpZXJdID0gdHJ1ZTtcblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBmaWx0ZXIgY2hhbmdlZCB0b3VjaGVzIHRvIG9ubHkgY29udGFpbiB0b3VjaGVzIHRoYXQgZXhpc3QgaW4gdGhlIGNvbGxlY3RlZCB0YXJnZXQgaWRzXG5cdCAgICBpID0gMDtcblx0ICAgIHdoaWxlIChpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgaWYgKHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXSkge1xuXHQgICAgICAgICAgICBjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5wdXNoKGNoYW5nZWRUb3VjaGVzW2ldKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGNsZWFudXAgcmVtb3ZlZCB0b3VjaGVzXG5cdCAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuXHQgICAgICAgICAgICBkZWxldGUgdGFyZ2V0SWRzW2NoYW5nZWRUb3VjaGVzW2ldLmlkZW50aWZpZXJdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIFtcblx0ICAgICAgICAvLyBtZXJnZSB0YXJnZXRUb3VjaGVzIHdpdGggY2hhbmdlZFRhcmdldFRvdWNoZXMgc28gaXQgY29udGFpbnMgQUxMIHRvdWNoZXMsIGluY2x1ZGluZyAnZW5kJyBhbmQgJ2NhbmNlbCdcblx0ICAgICAgICB1bmlxdWVBcnJheSh0YXJnZXRUb3VjaGVzLmNvbmNhdChjaGFuZ2VkVGFyZ2V0VG91Y2hlcyksICdpZGVudGlmaWVyJywgdHJ1ZSksXG5cdCAgICAgICAgY2hhbmdlZFRhcmdldFRvdWNoZXNcblx0ICAgIF07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21iaW5lZCB0b3VjaCBhbmQgbW91c2UgaW5wdXRcblx0ICpcblx0ICogVG91Y2ggaGFzIGEgaGlnaGVyIHByaW9yaXR5IHRoZW4gbW91c2UsIGFuZCB3aGlsZSB0b3VjaGluZyBubyBtb3VzZSBldmVudHMgYXJlIGFsbG93ZWQuXG5cdCAqIFRoaXMgYmVjYXVzZSB0b3VjaCBkZXZpY2VzIGFsc28gZW1pdCBtb3VzZSBldmVudHMgd2hpbGUgZG9pbmcgYSB0b3VjaC5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIElucHV0XG5cdCAqL1xuXHRcblx0dmFyIERFRFVQX1RJTUVPVVQgPSAyNTAwO1xuXHR2YXIgREVEVVBfRElTVEFOQ0UgPSAyNTtcblx0XG5cdGZ1bmN0aW9uIFRvdWNoTW91c2VJbnB1dCgpIHtcblx0ICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFxuXHQgICAgdmFyIGhhbmRsZXIgPSBiaW5kRm4odGhpcy5oYW5kbGVyLCB0aGlzKTtcblx0ICAgIHRoaXMudG91Y2ggPSBuZXcgVG91Y2hJbnB1dCh0aGlzLm1hbmFnZXIsIGhhbmRsZXIpO1xuXHQgICAgdGhpcy5tb3VzZSA9IG5ldyBNb3VzZUlucHV0KHRoaXMubWFuYWdlciwgaGFuZGxlcik7XG5cdFxuXHQgICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBudWxsO1xuXHQgICAgdGhpcy5sYXN0VG91Y2hlcyA9IFtdO1xuXHR9XG5cdFxuXHRpbmhlcml0KFRvdWNoTW91c2VJbnB1dCwgSW5wdXQsIHtcblx0ICAgIC8qKlxuXHQgICAgICogaGFuZGxlIG1vdXNlIGFuZCB0b3VjaCBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXRFdmVudFxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuXHQgICAgICovXG5cdCAgICBoYW5kbGVyOiBmdW5jdGlvbiBUTUVoYW5kbGVyKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSkge1xuXHQgICAgICAgIHZhciBpc1RvdWNoID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX1RPVUNIKSxcblx0ICAgICAgICAgICAgaXNNb3VzZSA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9NT1VTRSk7XG5cdFxuXHQgICAgICAgIGlmIChpc01vdXNlICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMgJiYgaW5wdXREYXRhLnNvdXJjZUNhcGFiaWxpdGllcy5maXJlc1RvdWNoRXZlbnRzKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHdoZW4gd2UncmUgaW4gYSB0b3VjaCBldmVudCwgcmVjb3JkIHRvdWNoZXMgdG8gIGRlLWR1cGUgc3ludGhldGljIG1vdXNlIGV2ZW50XG5cdCAgICAgICAgaWYgKGlzVG91Y2gpIHtcblx0ICAgICAgICAgICAgcmVjb3JkVG91Y2hlcy5jYWxsKHRoaXMsIGlucHV0RXZlbnQsIGlucHV0RGF0YSk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc01vdXNlICYmIGlzU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBpbnB1dERhdGEpKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuY2FsbGJhY2sobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyc1xuXHQgICAgICovXG5cdCAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICAgIHRoaXMudG91Y2guZGVzdHJveSgpO1xuXHQgICAgICAgIHRoaXMubW91c2UuZGVzdHJveSgpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIHJlY29yZFRvdWNoZXMoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcblx0ICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkge1xuXHQgICAgICAgIHRoaXMucHJpbWFyeVRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXS5pZGVudGlmaWVyO1xuXHQgICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG5cdCAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG5cdCAgICAgICAgc2V0TGFzdFRvdWNoLmNhbGwodGhpcywgZXZlbnREYXRhKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0TGFzdFRvdWNoKGV2ZW50RGF0YSkge1xuXHQgICAgdmFyIHRvdWNoID0gZXZlbnREYXRhLmNoYW5nZWRQb2ludGVyc1swXTtcblx0XG5cdCAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5wcmltYXJ5VG91Y2gpIHtcblx0ICAgICAgICB2YXIgbGFzdFRvdWNoID0ge3g6IHRvdWNoLmNsaWVudFgsIHk6IHRvdWNoLmNsaWVudFl9O1xuXHQgICAgICAgIHRoaXMubGFzdFRvdWNoZXMucHVzaChsYXN0VG91Y2gpO1xuXHQgICAgICAgIHZhciBsdHMgPSB0aGlzLmxhc3RUb3VjaGVzO1xuXHQgICAgICAgIHZhciByZW1vdmVMYXN0VG91Y2ggPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgdmFyIGkgPSBsdHMuaW5kZXhPZihsYXN0VG91Y2gpO1xuXHQgICAgICAgICAgICBpZiAoaSA+IC0xKSB7XG5cdCAgICAgICAgICAgICAgICBsdHMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBzZXRUaW1lb3V0KHJlbW92ZUxhc3RUb3VjaCwgREVEVVBfVElNRU9VVCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU3ludGhldGljRXZlbnQoZXZlbnREYXRhKSB7XG5cdCAgICB2YXIgeCA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRYLCB5ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGFzdFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgdCA9IHRoaXMubGFzdFRvdWNoZXNbaV07XG5cdCAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoeCAtIHQueCksIGR5ID0gTWF0aC5hYnMoeSAtIHQueSk7XG5cdCAgICAgICAgaWYgKGR4IDw9IERFRFVQX0RJU1RBTkNFICYmIGR5IDw9IERFRFVQX0RJU1RBTkNFKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0dmFyIFBSRUZJWEVEX1RPVUNIX0FDVElPTiA9IHByZWZpeGVkKFRFU1RfRUxFTUVOVC5zdHlsZSwgJ3RvdWNoQWN0aW9uJyk7XG5cdHZhciBOQVRJVkVfVE9VQ0hfQUNUSU9OID0gUFJFRklYRURfVE9VQ0hfQUNUSU9OICE9PSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBtYWdpY2FsIHRvdWNoQWN0aW9uIHZhbHVlXG5cdHZhciBUT1VDSF9BQ1RJT05fQ09NUFVURSA9ICdjb21wdXRlJztcblx0dmFyIFRPVUNIX0FDVElPTl9BVVRPID0gJ2F1dG8nO1xuXHR2YXIgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTiA9ICdtYW5pcHVsYXRpb24nOyAvLyBub3QgaW1wbGVtZW50ZWRcblx0dmFyIFRPVUNIX0FDVElPTl9OT05FID0gJ25vbmUnO1xuXHR2YXIgVE9VQ0hfQUNUSU9OX1BBTl9YID0gJ3Bhbi14Jztcblx0dmFyIFRPVUNIX0FDVElPTl9QQU5fWSA9ICdwYW4teSc7XG5cdHZhciBUT1VDSF9BQ1RJT05fTUFQID0gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpO1xuXHRcblx0LyoqXG5cdCAqIFRvdWNoIEFjdGlvblxuXHQgKiBzZXRzIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eSBvciB1c2VzIHRoZSBqcyBhbHRlcm5hdGl2ZVxuXHQgKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcblx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gVG91Y2hBY3Rpb24obWFuYWdlciwgdmFsdWUpIHtcblx0ICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG5cdCAgICB0aGlzLnNldCh2YWx1ZSk7XG5cdH1cblx0XG5cdFRvdWNoQWN0aW9uLnByb3RvdHlwZSA9IHtcblx0ICAgIC8qKlxuXHQgICAgICogc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZSBvbiB0aGUgZWxlbWVudCBvciBlbmFibGUgdGhlIHBvbHlmaWxsXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICAgICAqL1xuXHQgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIC8vIGZpbmQgb3V0IHRoZSB0b3VjaC1hY3Rpb24gYnkgdGhlIGV2ZW50IGhhbmRsZXJzXG5cdCAgICAgICAgaWYgKHZhbHVlID09IFRPVUNIX0FDVElPTl9DT01QVVRFKSB7XG5cdCAgICAgICAgICAgIHZhbHVlID0gdGhpcy5jb21wdXRlKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoTkFUSVZFX1RPVUNIX0FDVElPTiAmJiB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZSAmJiBUT1VDSF9BQ1RJT05fTUFQW3ZhbHVlXSkge1xuXHQgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtQUkVGSVhFRF9UT1VDSF9BQ1RJT05dID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYWN0aW9ucyA9IHZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGp1c3QgcmUtc2V0IHRoZSB0b3VjaEFjdGlvbiB2YWx1ZVxuXHQgICAgICovXG5cdCAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBjb21wdXRlIHRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IGJhc2VkIG9uIHRoZSByZWNvZ25pemVyJ3Mgc2V0dGluZ3Ncblx0ICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IHZhbHVlXG5cdCAgICAgKi9cblx0ICAgIGNvbXB1dGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBhY3Rpb25zID0gW107XG5cdCAgICAgICAgZWFjaCh0aGlzLm1hbmFnZXIucmVjb2duaXplcnMsIGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcblx0ICAgICAgICAgICAgaWYgKGJvb2xPckZuKHJlY29nbml6ZXIub3B0aW9ucy5lbmFibGUsIFtyZWNvZ25pemVyXSkpIHtcblx0ICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBhY3Rpb25zLmNvbmNhdChyZWNvZ25pemVyLmdldFRvdWNoQWN0aW9uKCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFuVG91Y2hBY3Rpb25zKGFjdGlvbnMuam9pbignICcpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgb24gZWFjaCBpbnB1dCBjeWNsZSBhbmQgcHJvdmlkZXMgdGhlIHByZXZlbnRpbmcgb2YgdGhlIGJyb3dzZXIgYmVoYXZpb3Jcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuXHQgICAgICovXG5cdCAgICBwcmV2ZW50RGVmYXVsdHM6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgdmFyIHNyY0V2ZW50ID0gaW5wdXQuc3JjRXZlbnQ7XG5cdCAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlucHV0Lm9mZnNldERpcmVjdGlvbjtcblx0XG5cdCAgICAgICAgLy8gaWYgdGhlIHRvdWNoIGFjdGlvbiBkaWQgcHJldmVudGVkIG9uY2UgdGhpcyBzZXNzaW9uXG5cdCAgICAgICAgaWYgKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZCkge1xuXHQgICAgICAgICAgICBzcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcblx0ICAgICAgICB2YXIgaGFzTm9uZSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSAmJiAhVE9VQ0hfQUNUSU9OX01BUFtUT1VDSF9BQ1RJT05fTk9ORV07XG5cdCAgICAgICAgdmFyIGhhc1BhblkgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1kpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWV07XG5cdCAgICAgICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWF07XG5cdFxuXHQgICAgICAgIGlmIChoYXNOb25lKSB7XG5cdCAgICAgICAgICAgIC8vZG8gbm90IHByZXZlbnQgZGVmYXVsdHMgaWYgdGhpcyBpcyBhIHRhcCBnZXN0dXJlXG5cdFxuXHQgICAgICAgICAgICB2YXIgaXNUYXBQb2ludGVyID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSAxO1xuXHQgICAgICAgICAgICB2YXIgaXNUYXBNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgMjtcblx0ICAgICAgICAgICAgdmFyIGlzVGFwVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgMjUwO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVGFwUG9pbnRlciAmJiBpc1RhcE1vdmVtZW50ICYmIGlzVGFwVG91Y2hUaW1lKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcblx0ICAgICAgICAgICAgLy8gYHBhbi14IHBhbi15YCBtZWFucyBicm93c2VyIGhhbmRsZXMgYWxsIHNjcm9sbGluZy9wYW5uaW5nLCBkbyBub3QgcHJldmVudFxuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoaGFzTm9uZSB8fFxuXHQgICAgICAgICAgICAoaGFzUGFuWSAmJiBkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkgfHxcblx0ICAgICAgICAgICAgKGhhc1BhblggJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2ZW50U3JjKHNyY0V2ZW50KTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogY2FsbCBwcmV2ZW50RGVmYXVsdCB0byBwcmV2ZW50IHRoZSBicm93c2VyJ3MgZGVmYXVsdCBiZWhhdmlvciAoc2Nyb2xsaW5nIGluIG1vc3QgY2FzZXMpXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gc3JjRXZlbnRcblx0ICAgICAqL1xuXHQgICAgcHJldmVudFNyYzogZnVuY3Rpb24oc3JjRXZlbnQpIHtcblx0ICAgICAgICB0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQgPSB0cnVlO1xuXHQgICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogd2hlbiB0aGUgdG91Y2hBY3Rpb25zIGFyZSBjb2xsZWN0ZWQgdGhleSBhcmUgbm90IGEgdmFsaWQgdmFsdWUsIHNvIHdlIG5lZWQgdG8gY2xlYW4gdGhpbmdzIHVwLiAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25zXG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0ZnVuY3Rpb24gY2xlYW5Ub3VjaEFjdGlvbnMoYWN0aW9ucykge1xuXHQgICAgLy8gbm9uZVxuXHQgICAgaWYgKGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9OT05FKSkge1xuXHQgICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTk9ORTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaGFzUGFuWCA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWCk7XG5cdCAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSk7XG5cdFxuXHQgICAgLy8gaWYgYm90aCBwYW4teCBhbmQgcGFuLXkgYXJlIHNldCAoZGlmZmVyZW50IHJlY29nbml6ZXJzXG5cdCAgICAvLyBmb3IgZGlmZmVyZW50IGRpcmVjdGlvbnMsIGUuZy4gaG9yaXpvbnRhbCBwYW4gYnV0IHZlcnRpY2FsIHN3aXBlPylcblx0ICAgIC8vIHdlIG5lZWQgbm9uZSAoYXMgb3RoZXJ3aXNlIHdpdGggcGFuLXggcGFuLXkgY29tYmluZWQgbm9uZSBvZiB0aGVzZVxuXHQgICAgLy8gcmVjb2duaXplcnMgd2lsbCB3b3JrLCBzaW5jZSB0aGUgYnJvd3NlciB3b3VsZCBoYW5kbGUgYWxsIHBhbm5pbmdcblx0ICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcblx0ICAgICAgICByZXR1cm4gVE9VQ0hfQUNUSU9OX05PTkU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcGFuLXggT1IgcGFuLXlcblx0ICAgIGlmIChoYXNQYW5YIHx8IGhhc1BhblkpIHtcblx0ICAgICAgICByZXR1cm4gaGFzUGFuWCA/IFRPVUNIX0FDVElPTl9QQU5fWCA6IFRPVUNIX0FDVElPTl9QQU5fWTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBtYW5pcHVsYXRpb25cblx0ICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OKSkge1xuXHQgICAgICAgIHJldHVybiBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBUT1VDSF9BQ1RJT05fQVVUTztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpIHtcblx0ICAgIGlmICghTkFUSVZFX1RPVUNIX0FDVElPTikge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciB0b3VjaE1hcCA9IHt9O1xuXHQgICAgdmFyIGNzc1N1cHBvcnRzID0gd2luZG93LkNTUyAmJiB3aW5kb3cuQ1NTLnN1cHBvcnRzO1xuXHQgICAgWydhdXRvJywgJ21hbmlwdWxhdGlvbicsICdwYW4teScsICdwYW4teCcsICdwYW4teCBwYW4teScsICdub25lJ10uZm9yRWFjaChmdW5jdGlvbih2YWwpIHtcblx0XG5cdCAgICAgICAgLy8gSWYgY3NzLnN1cHBvcnRzIGlzIG5vdCBzdXBwb3J0ZWQgYnV0IHRoZXJlIGlzIG5hdGl2ZSB0b3VjaC1hY3Rpb24gYXNzdW1lIGl0IHN1cHBvcnRzXG5cdCAgICAgICAgLy8gYWxsIHZhbHVlcy4gVGhpcyBpcyB0aGUgY2FzZSBmb3IgSUUgMTAgYW5kIDExLlxuXHQgICAgICAgIHRvdWNoTWFwW3ZhbF0gPSBjc3NTdXBwb3J0cyA/IHdpbmRvdy5DU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsIHZhbCkgOiB0cnVlO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdG91Y2hNYXA7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZWNvZ25pemVyIGZsb3cgZXhwbGFpbmVkOyAqXG5cdCAqIEFsbCByZWNvZ25pemVycyBoYXZlIHRoZSBpbml0aWFsIHN0YXRlIG9mIFBPU1NJQkxFIHdoZW4gYSBpbnB1dCBzZXNzaW9uIHN0YXJ0cy5cblx0ICogVGhlIGRlZmluaXRpb24gb2YgYSBpbnB1dCBzZXNzaW9uIGlzIGZyb20gdGhlIGZpcnN0IGlucHV0IHVudGlsIHRoZSBsYXN0IGlucHV0LCB3aXRoIGFsbCBpdCdzIG1vdmVtZW50IGluIGl0LiAqXG5cdCAqIEV4YW1wbGUgc2Vzc2lvbiBmb3IgbW91c2UtaW5wdXQ6IG1vdXNlZG93biAtPiBtb3VzZW1vdmUgLT4gbW91c2V1cFxuXHQgKlxuXHQgKiBPbiBlYWNoIHJlY29nbml6aW5nIGN5Y2xlIChzZWUgTWFuYWdlci5yZWNvZ25pemUpIHRoZSAucmVjb2duaXplKCkgbWV0aG9kIGlzIGV4ZWN1dGVkXG5cdCAqIHdoaWNoIGRldGVybWluZXMgd2l0aCBzdGF0ZSBpdCBzaG91bGQgYmUuXG5cdCAqXG5cdCAqIElmIHRoZSByZWNvZ25pemVyIGhhcyB0aGUgc3RhdGUgRkFJTEVELCBDQU5DRUxMRUQgb3IgUkVDT0dOSVpFRCAoZXF1YWxzIEVOREVEKSwgaXQgaXMgcmVzZXQgdG9cblx0ICogUE9TU0lCTEUgdG8gZ2l2ZSBpdCBhbm90aGVyIGNoYW5nZSBvbiB0aGUgbmV4dCBjeWNsZS5cblx0ICpcblx0ICogICAgICAgICAgICAgICBQb3NzaWJsZVxuXHQgKiAgICAgICAgICAgICAgICAgIHxcblx0ICogICAgICAgICAgICArLS0tLS0rLS0tLS0tLS0tLS0tLS0tK1xuXHQgKiAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICB8XG5cdCAqICAgICAgKy0tLS0tKy0tLS0tKyAgICAgICAgICAgICAgIHxcblx0ICogICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgfFxuXHQgKiAgIEZhaWxlZCAgICAgIENhbmNlbGxlZCAgICAgICAgICB8XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLSstLS0tLS0rXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICB8XG5cdCAqICAgICAgICAgICAgICAgICAgICAgIFJlY29nbml6ZWQgICAgICAgQmVnYW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoYW5nZWRcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kZWQvUmVjb2duaXplZFxuXHQgKi9cblx0dmFyIFNUQVRFX1BPU1NJQkxFID0gMTtcblx0dmFyIFNUQVRFX0JFR0FOID0gMjtcblx0dmFyIFNUQVRFX0NIQU5HRUQgPSA0O1xuXHR2YXIgU1RBVEVfRU5ERUQgPSA4O1xuXHR2YXIgU1RBVEVfUkVDT0dOSVpFRCA9IFNUQVRFX0VOREVEO1xuXHR2YXIgU1RBVEVfQ0FOQ0VMTEVEID0gMTY7XG5cdHZhciBTVEFURV9GQUlMRUQgPSAzMjtcblx0XG5cdC8qKlxuXHQgKiBSZWNvZ25pemVyXG5cdCAqIEV2ZXJ5IHJlY29nbml6ZXIgbmVlZHMgdG8gZXh0ZW5kIGZyb20gdGhpcyBjbGFzcy5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRmdW5jdGlvbiBSZWNvZ25pemVyKG9wdGlvbnMpIHtcblx0ICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgdGhpcy5kZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cdFxuXHQgICAgdGhpcy5pZCA9IHVuaXF1ZUlkKCk7XG5cdFxuXHQgICAgdGhpcy5tYW5hZ2VyID0gbnVsbDtcblx0XG5cdCAgICAvLyBkZWZhdWx0IGlzIGVuYWJsZSB0cnVlXG5cdCAgICB0aGlzLm9wdGlvbnMuZW5hYmxlID0gaWZVbmRlZmluZWQodGhpcy5vcHRpb25zLmVuYWJsZSwgdHJ1ZSk7XG5cdFxuXHQgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1BPU1NJQkxFO1xuXHRcblx0ICAgIHRoaXMuc2ltdWx0YW5lb3VzID0ge307XG5cdCAgICB0aGlzLnJlcXVpcmVGYWlsID0gW107XG5cdH1cblx0XG5cdFJlY29nbml6ZXIucHJvdG90eXBlID0ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAdmlydHVhbFxuXHQgICAgICogQHR5cGUge09iamVjdH1cblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHt9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogc2V0IG9wdGlvbnNcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgKiBAcmV0dXJuIHtSZWNvZ25pemVyfVxuXHQgICAgICovXG5cdCAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblx0XG5cdCAgICAgICAgLy8gYWxzbyB1cGRhdGUgdGhlIHRvdWNoQWN0aW9uLCBpbiBjYXNlIHNvbWV0aGluZyBjaGFuZ2VkIGFib3V0IHRoZSBkaXJlY3Rpb25zL2VuYWJsZWQgc3RhdGVcblx0ICAgICAgICB0aGlzLm1hbmFnZXIgJiYgdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJlY29nbml6ZSBzaW11bHRhbmVvdXMgd2l0aCBhbiBvdGhlciByZWNvZ25pemVyLlxuXHQgICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG5cdCAgICAgKi9cblx0ICAgIHJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZWNvZ25pemVXaXRoJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgc2ltdWx0YW5lb3VzID0gdGhpcy5zaW11bHRhbmVvdXM7XG5cdCAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuXHQgICAgICAgIGlmICghc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0pIHtcblx0ICAgICAgICAgICAgc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF0gPSBvdGhlclJlY29nbml6ZXI7XG5cdCAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZWNvZ25pemVXaXRoKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBkcm9wIHRoZSBzaW11bHRhbmVvdXMgbGluay4gaXQgZG9lc250IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG5cdCAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuXHQgICAgICovXG5cdCAgICBkcm9wUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG5cdCAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ2Ryb3BSZWNvZ25pemVXaXRoJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG5cdCAgICAgICAgZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW290aGVyUmVjb2duaXplci5pZF07XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcmVjb2duaXplciBjYW4gb25seSBydW4gd2hlbiBhbiBvdGhlciBpcyBmYWlsaW5nXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgcmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhvdGhlclJlY29nbml6ZXIsICdyZXF1aXJlRmFpbHVyZScsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHJlcXVpcmVGYWlsID0gdGhpcy5yZXF1aXJlRmFpbDtcblx0ICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG5cdCAgICAgICAgaWYgKGluQXJyYXkocmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcikgPT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJlcXVpcmVGYWlsLnB1c2gob3RoZXJSZWNvZ25pemVyKTtcblx0ICAgICAgICAgICAgb3RoZXJSZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBkcm9wIHRoZSByZXF1aXJlRmFpbHVyZSBsaW5rLiBpdCBkb2VzIG5vdCByZW1vdmUgdGhlIGxpbmsgb24gdGhlIG90aGVyIHJlY29nbml6ZXIuXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgZHJvcFJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcblx0ICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gaW5BcnJheSh0aGlzLnJlcXVpcmVGYWlsLCBvdGhlclJlY29nbml6ZXIpO1xuXHQgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogaGFzIHJlcXVpcmUgZmFpbHVyZXMgYm9vbGVhblxuXHQgICAgICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAgICAgKi9cblx0ICAgIGhhc1JlcXVpcmVGYWlsdXJlczogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoID4gMDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBpZiB0aGUgcmVjb2duaXplciBjYW4gcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXJcblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG5cdCAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAqL1xuXHQgICAgY2FuUmVjb2duaXplV2l0aDogZnVuY3Rpb24ob3RoZXJSZWNvZ25pemVyKSB7XG5cdCAgICAgICAgcmV0dXJuICEhdGhpcy5zaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBZb3Ugc2hvdWxkIHVzZSBgdHJ5RW1pdGAgaW5zdGVhZCBvZiBgZW1pdGAgZGlyZWN0bHkgdG8gY2hlY2tcblx0ICAgICAqIHRoYXQgYWxsIHRoZSBuZWVkZWQgcmVjb2duaXplcnMgaGFzIGZhaWxlZCBiZWZvcmUgZW1pdHRpbmcuXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICAgICAqL1xuXHQgICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcblx0XG5cdCAgICAgICAgZnVuY3Rpb24gZW1pdChldmVudCkge1xuXHQgICAgICAgICAgICBzZWxmLm1hbmFnZXIuZW1pdChldmVudCwgaW5wdXQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gJ3BhbnN0YXJ0JyBhbmQgJ3Bhbm1vdmUnXG5cdCAgICAgICAgaWYgKHN0YXRlIDwgU1RBVEVfRU5ERUQpIHtcblx0ICAgICAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQgKyBzdGF0ZVN0cihzdGF0ZSkpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZW1pdChzZWxmLm9wdGlvbnMuZXZlbnQpOyAvLyBzaW1wbGUgJ2V2ZW50TmFtZScgZXZlbnRzXG5cdFxuXHQgICAgICAgIGlmIChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpIHsgLy8gYWRkaXRpb25hbCBldmVudChwYW5sZWZ0LCBwYW5yaWdodCwgcGluY2hpbiwgcGluY2hvdXQuLi4pXG5cdCAgICAgICAgICAgIGVtaXQoaW5wdXQuYWRkaXRpb25hbEV2ZW50KTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHBhbmVuZCBhbmQgcGFuY2FuY2VsXG5cdCAgICAgICAgaWYgKHN0YXRlID49IFNUQVRFX0VOREVEKSB7XG5cdCAgICAgICAgICAgIGVtaXQoc2VsZi5vcHRpb25zLmV2ZW50ICsgc3RhdGVTdHIoc3RhdGUpKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2hlY2sgdGhhdCBhbGwgdGhlIHJlcXVpcmUgZmFpbHVyZSByZWNvZ25pemVycyBoYXMgZmFpbGVkLFxuXHQgICAgICogaWYgdHJ1ZSwgaXQgZW1pdHMgYSBnZXN0dXJlIGV2ZW50LFxuXHQgICAgICogb3RoZXJ3aXNlLCBzZXR1cCB0aGUgc3RhdGUgdG8gRkFJTEVELlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG5cdCAgICAgKi9cblx0ICAgIHRyeUVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgaWYgKHRoaXMuY2FuRW1pdCgpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoaW5wdXQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBpdCdzIGZhaWxpbmcgYW55d2F5XG5cdCAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBjYW4gd2UgZW1pdD9cblx0ICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgICAgICovXG5cdCAgICBjYW5FbWl0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBpZiAoISh0aGlzLnJlcXVpcmVGYWlsW2ldLnN0YXRlICYgKFNUQVRFX0ZBSUxFRCB8IFNUQVRFX1BPU1NJQkxFKSkpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHVwZGF0ZSB0aGUgcmVjb2duaXplclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuXHQgICAgICovXG5cdCAgICByZWNvZ25pemU6IGZ1bmN0aW9uKGlucHV0RGF0YSkge1xuXHQgICAgICAgIC8vIG1ha2UgYSBuZXcgY29weSBvZiB0aGUgaW5wdXREYXRhXG5cdCAgICAgICAgLy8gc28gd2UgY2FuIGNoYW5nZSB0aGUgaW5wdXREYXRhIHdpdGhvdXQgbWVzc2luZyB1cCB0aGUgb3RoZXIgcmVjb2duaXplcnNcblx0ICAgICAgICB2YXIgaW5wdXREYXRhQ2xvbmUgPSBhc3NpZ24oe30sIGlucHV0RGF0YSk7XG5cdFxuXHQgICAgICAgIC8vIGlzIGlzIGVuYWJsZWQgYW5kIGFsbG93IHJlY29nbml6aW5nP1xuXHQgICAgICAgIGlmICghYm9vbE9yRm4odGhpcy5vcHRpb25zLmVuYWJsZSwgW3RoaXMsIGlucHV0RGF0YUNsb25lXSkpIHtcblx0ICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRkFJTEVEO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyByZXNldCB3aGVuIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZFxuXHQgICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX1JFQ09HTklaRUQgfCBTVEFURV9DQU5DRUxMRUQgfCBTVEFURV9GQUlMRUQpKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9QT1NTSUJMRTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnByb2Nlc3MoaW5wdXREYXRhQ2xvbmUpO1xuXHRcblx0ICAgICAgICAvLyB0aGUgcmVjb2duaXplciBoYXMgcmVjb2duaXplZCBhIGdlc3R1cmVcblx0ICAgICAgICAvLyBzbyB0cmlnZ2VyIGFuIGV2ZW50XG5cdCAgICAgICAgaWYgKHRoaXMuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQgfCBTVEFURV9DQU5DRUxMRUQpKSB7XG5cdCAgICAgICAgICAgIHRoaXMudHJ5RW1pdChpbnB1dERhdGFDbG9uZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJldHVybiB0aGUgc3RhdGUgb2YgdGhlIHJlY29nbml6ZXJcblx0ICAgICAqIHRoZSBhY3R1YWwgcmVjb2duaXppbmcgaGFwcGVucyBpbiB0aGlzIG1ldGhvZFxuXHQgICAgICogQHZpcnR1YWxcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcblx0ICAgICAqIEByZXR1cm5zIHtDb25zdH0gU1RBVEVcblx0ICAgICAqL1xuXHQgICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXREYXRhKSB7IH0sIC8vIGpzaGludCBpZ25vcmU6bGluZVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcmV0dXJuIHRoZSBwcmVmZXJyZWQgdG91Y2gtYWN0aW9uXG5cdCAgICAgKiBAdmlydHVhbFxuXHQgICAgICogQHJldHVybnMge0FycmF5fVxuXHQgICAgICovXG5cdCAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZ2VzdHVyZSBpc24ndCBhbGxvd2VkIHRvIHJlY29nbml6ZVxuXHQgICAgICogbGlrZSB3aGVuIGFub3RoZXIgaXMgYmVpbmcgcmVjb2duaXplZCBvciBpdCBpcyBkaXNhYmxlZFxuXHQgICAgICogQHZpcnR1YWxcblx0ICAgICAqL1xuXHQgICAgcmVzZXQ6IGZ1bmN0aW9uKCkgeyB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogZ2V0IGEgdXNhYmxlIHN0cmluZywgdXNlZCBhcyBldmVudCBwb3N0Zml4XG5cdCAqIEBwYXJhbSB7Q29uc3R9IHN0YXRlXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IHN0YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGF0ZVN0cihzdGF0ZSkge1xuXHQgICAgaWYgKHN0YXRlICYgU1RBVEVfQ0FOQ0VMTEVEKSB7XG5cdCAgICAgICAgcmV0dXJuICdjYW5jZWwnO1xuXHQgICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0VOREVEKSB7XG5cdCAgICAgICAgcmV0dXJuICdlbmQnO1xuXHQgICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0NIQU5HRUQpIHtcblx0ICAgICAgICByZXR1cm4gJ21vdmUnO1xuXHQgICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0JFR0FOKSB7XG5cdCAgICAgICAgcmV0dXJuICdzdGFydCc7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBkaXJlY3Rpb24gY29ucyB0byBzdHJpbmdcblx0ICogQHBhcmFtIHtDb25zdH0gZGlyZWN0aW9uXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBkaXJlY3Rpb25TdHIoZGlyZWN0aW9uKSB7XG5cdCAgICBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9ET1dOKSB7XG5cdCAgICAgICAgcmV0dXJuICdkb3duJztcblx0ICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9VUCkge1xuXHQgICAgICAgIHJldHVybiAndXAnO1xuXHQgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX0xFRlQpIHtcblx0ICAgICAgICByZXR1cm4gJ2xlZnQnO1xuXHQgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRElSRUNUSU9OX1JJR0hUKSB7XG5cdCAgICAgICAgcmV0dXJuICdyaWdodCc7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBnZXQgYSByZWNvZ25pemVyIGJ5IG5hbWUgaWYgaXQgaXMgYm91bmQgdG8gYSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IG90aGVyUmVjb2duaXplclxuXHQgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcblx0ICogQHJldHVybnMge1JlY29nbml6ZXJ9XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgcmVjb2duaXplcikge1xuXHQgICAgdmFyIG1hbmFnZXIgPSByZWNvZ25pemVyLm1hbmFnZXI7XG5cdCAgICBpZiAobWFuYWdlcikge1xuXHQgICAgICAgIHJldHVybiBtYW5hZ2VyLmdldChvdGhlclJlY29nbml6ZXIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG90aGVyUmVjb2duaXplcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgcmVjb2duaXplciBpcyBqdXN0IHVzZWQgYXMgYSBiYXNlIGZvciB0aGUgc2ltcGxlIGF0dHJpYnV0ZSByZWNvZ25pemVycy5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIFJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIEF0dHJSZWNvZ25pemVyKCkge1xuXHQgICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cdFxuXHRpbmhlcml0KEF0dHJSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuXHQgICAgICovXG5cdCAgICBkZWZhdWx0czoge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG5cdCAgICAgICAgICogQGRlZmF1bHQgMVxuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHBvaW50ZXJzOiAxXG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVXNlZCB0byBjaGVjayBpZiBpdCB0aGUgcmVjb2duaXplciByZWNlaXZlcyB2YWxpZCBpbnB1dCwgbGlrZSBpbnB1dC5kaXN0YW5jZSA+IDEwLlxuXHQgICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRcblx0ICAgICAqIEByZXR1cm5zIHtCb29sZWFufSByZWNvZ25pemVkXG5cdCAgICAgKi9cblx0ICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBvcHRpb25Qb2ludGVycyA9IHRoaXMub3B0aW9ucy5wb2ludGVycztcblx0ICAgICAgICByZXR1cm4gb3B0aW9uUG9pbnRlcnMgPT09IDAgfHwgaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25Qb2ludGVycztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBQcm9jZXNzIHRoZSBpbnB1dCBhbmQgcmV0dXJuIHRoZSBzdGF0ZSBmb3IgdGhlIHJlY29nbml6ZXJcblx0ICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG5cdCAgICAgKiBAcmV0dXJucyB7Kn0gU3RhdGVcblx0ICAgICAqL1xuXHQgICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlO1xuXHQgICAgICAgIHZhciBldmVudFR5cGUgPSBpbnB1dC5ldmVudFR5cGU7XG5cdFxuXHQgICAgICAgIHZhciBpc1JlY29nbml6ZWQgPSBzdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQpO1xuXHQgICAgICAgIHZhciBpc1ZhbGlkID0gdGhpcy5hdHRyVGVzdChpbnB1dCk7XG5cdFxuXHQgICAgICAgIC8vIG9uIGNhbmNlbCBpbnB1dCBhbmQgd2UndmUgcmVjb2duaXplZCBiZWZvcmUsIHJldHVybiBTVEFURV9DQU5DRUxMRURcblx0ICAgICAgICBpZiAoaXNSZWNvZ25pemVkICYmIChldmVudFR5cGUgJiBJTlBVVF9DQU5DRUwgfHwgIWlzVmFsaWQpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NBTkNFTExFRDtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzUmVjb2duaXplZCB8fCBpc1ZhbGlkKSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0VOREVEO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKCEoc3RhdGUgJiBTVEFURV9CRUdBTikpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gc3RhdGUgfCBTVEFURV9DSEFOR0VEO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBQYW5cblx0ICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gYW5kIG1vdmVkIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIEF0dHJSZWNvZ25pemVyXG5cdCAqL1xuXHRmdW5jdGlvbiBQYW5SZWNvZ25pemVyKCkge1xuXHQgICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XG5cdCAgICB0aGlzLnBYID0gbnVsbDtcblx0ICAgIHRoaXMucFkgPSBudWxsO1xuXHR9XG5cdFxuXHRpbmhlcml0KFBhblJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBQYW5SZWNvZ25pemVyXG5cdCAgICAgKi9cblx0ICAgIGRlZmF1bHRzOiB7XG5cdCAgICAgICAgZXZlbnQ6ICdwYW4nLFxuXHQgICAgICAgIHRocmVzaG9sZDogMTAsXG5cdCAgICAgICAgcG9pbnRlcnM6IDEsXG5cdCAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fQUxMXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcblx0ICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuXHQgICAgICAgIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuXHQgICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuXHQgICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9YKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGFjdGlvbnM7XG5cdCAgICB9LFxuXHRcblx0ICAgIGRpcmVjdGlvblRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cdCAgICAgICAgdmFyIGhhc01vdmVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgZGlzdGFuY2UgPSBpbnB1dC5kaXN0YW5jZTtcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQuZGlyZWN0aW9uO1xuXHQgICAgICAgIHZhciB4ID0gaW5wdXQuZGVsdGFYO1xuXHQgICAgICAgIHZhciB5ID0gaW5wdXQuZGVsdGFZO1xuXHRcblx0ICAgICAgICAvLyBsb2NrIHRvIGF4aXM/XG5cdCAgICAgICAgaWYgKCEoZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb24pKSB7XG5cdCAgICAgICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG5cdCAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeCA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh4IDwgMCkgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcblx0ICAgICAgICAgICAgICAgIGhhc01vdmVkID0geCAhPSB0aGlzLnBYO1xuXHQgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVgpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHkgPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeSA8IDApID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG5cdCAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHkgIT0gdGhpcy5wWTtcblx0ICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoaW5wdXQuZGVsdGFZKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG5cdCAgICAgICAgcmV0dXJuIGhhc01vdmVkICYmIGRpc3RhbmNlID4gb3B0aW9ucy50aHJlc2hvbGQgJiYgZGlyZWN0aW9uICYgb3B0aW9ucy5kaXJlY3Rpb247XG5cdCAgICB9LFxuXHRcblx0ICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHJldHVybiBBdHRyUmVjb2duaXplci5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcblx0ICAgICAgICAgICAgKHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTiB8fCAoISh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4pICYmIHRoaXMuZGlyZWN0aW9uVGVzdChpbnB1dCkpKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0XG5cdCAgICAgICAgdGhpcy5wWCA9IGlucHV0LmRlbHRhWDtcblx0ICAgICAgICB0aGlzLnBZID0gaW5wdXQuZGVsdGFZO1xuXHRcblx0ICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0LmRpcmVjdGlvbik7XG5cdFxuXHQgICAgICAgIGlmIChkaXJlY3Rpb24pIHtcblx0ICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcywgaW5wdXQpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBQaW5jaFxuXHQgKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlcnMgYXJlIG1vdmluZyB0b3dhcmQgKHpvb20taW4pIG9yIGF3YXkgZnJvbSBlYWNoIG90aGVyICh6b29tLW91dCkuXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gUGluY2hSZWNvZ25pemVyKCkge1xuXHQgICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChQaW5jaFJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3BpbmNoJyxcblx0ICAgICAgICB0aHJlc2hvbGQ6IDAsXG5cdCAgICAgICAgcG9pbnRlcnM6IDJcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuXHQgICAgfSxcblx0XG5cdCAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcblx0ICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnNjYWxlIC0gMSkgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG5cdCAgICB9LFxuXHRcblx0ICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgaWYgKGlucHV0LnNjYWxlICE9PSAxKSB7XG5cdCAgICAgICAgICAgIHZhciBpbk91dCA9IGlucHV0LnNjYWxlIDwgMSA/ICdpbicgOiAnb3V0Jztcblx0ICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgaW5PdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFByZXNzXG5cdCAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBkb3duIGZvciB4IG1zIHdpdGhvdXQgYW55IG1vdmVtZW50LlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQGV4dGVuZHMgUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gUHJlc3NSZWNvZ25pemVyKCkge1xuXHQgICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcblx0ICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcblx0ICAgIHRoaXMuX2lucHV0ID0gbnVsbDtcblx0fVxuXHRcblx0aW5oZXJpdChQcmVzc1JlY29nbml6ZXIsIFJlY29nbml6ZXIsIHtcblx0ICAgIC8qKlxuXHQgICAgICogQG5hbWVzcGFjZVxuXHQgICAgICogQG1lbWJlcm9mIFByZXNzUmVjb2duaXplclxuXHQgICAgICovXG5cdCAgICBkZWZhdWx0czoge1xuXHQgICAgICAgIGV2ZW50OiAncHJlc3MnLFxuXHQgICAgICAgIHBvaW50ZXJzOiAxLFxuXHQgICAgICAgIHRpbWU6IDI1MSwgLy8gbWluaW1hbCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIHByZXNzZWRcblx0ICAgICAgICB0aHJlc2hvbGQ6IDkgLy8gYSBtaW5pbWFsIG1vdmVtZW50IGlzIG9rLCBidXQga2VlcCBpdCBsb3dcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX0FVVE9dO1xuXHQgICAgfSxcblx0XG5cdCAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHQgICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuXHQgICAgICAgIHZhciB2YWxpZE1vdmVtZW50ID0gaW5wdXQuZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZDtcblx0ICAgICAgICB2YXIgdmFsaWRUaW1lID0gaW5wdXQuZGVsdGFUaW1lID4gb3B0aW9ucy50aW1lO1xuXHRcblx0ICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXHRcblx0ICAgICAgICAvLyB3ZSBvbmx5IGFsbG93IGxpdHRsZSBtb3ZlbWVudFxuXHQgICAgICAgIC8vIGFuZCB3ZSd2ZSByZWFjaGVkIGFuIGVuZCBldmVudCwgc28gYSB0YXAgaXMgcG9zc2libGVcblx0ICAgICAgICBpZiAoIXZhbGlkTW92ZW1lbnQgfHwgIXZhbGlkUG9pbnRlcnMgfHwgKGlucHV0LmV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmICF2YWxpZFRpbWUpKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX1NUQVJUKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcblx0ICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuXHQgICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG5cdCAgICAgICAgICAgIH0sIG9wdGlvbnMudGltZSwgdGhpcyk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBTVEFURV9SRUNPR05JWkVEKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChpbnB1dCAmJiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EKSkge1xuXHQgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyAndXAnLCBpbnB1dCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpcy5faW5wdXQudGltZVN0YW1wID0gbm93KCk7XG5cdCAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUm90YXRlXG5cdCAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVyIGFyZSBtb3ZpbmcgaW4gYSBjaXJjdWxhciBtb3Rpb24uXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gUm90YXRlUmVjb2duaXplcigpIHtcblx0ICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdH1cblx0XG5cdGluaGVyaXQoUm90YXRlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcblx0ICAgIC8qKlxuXHQgICAgICogQG5hbWVzcGFjZVxuXHQgICAgICogQG1lbWJlcm9mIFJvdGF0ZVJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3JvdGF0ZScsXG5cdCAgICAgICAgdGhyZXNob2xkOiAwLFxuXHQgICAgICAgIHBvaW50ZXJzOiAyXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG5cdCAgICAgICAgICAgIChNYXRoLmFicyhpbnB1dC5yb3RhdGlvbikgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFN3aXBlXG5cdCAqIFJlY29nbml6ZWQgd2hlbiB0aGUgcG9pbnRlciBpcyBtb3ZpbmcgZmFzdCAodmVsb2NpdHkpLCB3aXRoIGVub3VnaCBkaXN0YW5jZSBpbiB0aGUgYWxsb3dlZCBkaXJlY3Rpb24uXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuXHQgKi9cblx0ZnVuY3Rpb24gU3dpcGVSZWNvZ25pemVyKCkge1xuXHQgICAgQXR0clJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0fVxuXHRcblx0aW5oZXJpdChTd2lwZVJlY29nbml6ZXIsIEF0dHJSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBTd2lwZVJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3N3aXBlJyxcblx0ICAgICAgICB0aHJlc2hvbGQ6IDEwLFxuXHQgICAgICAgIHZlbG9jaXR5OiAwLjMsXG5cdCAgICAgICAgZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCxcblx0ICAgICAgICBwb2ludGVyczogMVxuXHQgICAgfSxcblx0XG5cdCAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIFBhblJlY29nbml6ZXIucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuZGlyZWN0aW9uO1xuXHQgICAgICAgIHZhciB2ZWxvY2l0eTtcblx0XG5cdCAgICAgICAgaWYgKGRpcmVjdGlvbiAmIChESVJFQ1RJT05fSE9SSVpPTlRBTCB8IERJUkVDVElPTl9WRVJUSUNBTCkpIHtcblx0ICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuXHQgICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eVg7XG5cdCAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fVkVSVElDQUwpIHtcblx0ICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG5cdCAgICAgICAgICAgIGRpcmVjdGlvbiAmIGlucHV0Lm9mZnNldERpcmVjdGlvbiAmJlxuXHQgICAgICAgICAgICBpbnB1dC5kaXN0YW5jZSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgJiZcblx0ICAgICAgICAgICAgaW5wdXQubWF4UG9pbnRlcnMgPT0gdGhpcy5vcHRpb25zLnBvaW50ZXJzICYmXG5cdCAgICAgICAgICAgIGFicyh2ZWxvY2l0eSkgPiB0aGlzLm9wdGlvbnMudmVsb2NpdHkgJiYgaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfRU5EO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJlY3Rpb25TdHIoaW5wdXQub2Zmc2V0RGlyZWN0aW9uKTtcblx0ICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCArIGRpcmVjdGlvbiwgaW5wdXQpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCBpbnB1dCk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEEgdGFwIGlzIGVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvaW5nIGEgc21hbGwgdGFwL2NsaWNrLiBNdWx0aXBsZSB0YXBzIGFyZSByZWNvZ25pemVkIGlmIHRoZXkgb2NjdXJcblx0ICogYmV0d2VlbiB0aGUgZ2l2ZW4gaW50ZXJ2YWwgYW5kIHBvc2l0aW9uLiBUaGUgZGVsYXkgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHJlY29nbml6ZSBtdWx0aS10YXBzIHdpdGhvdXQgZmlyaW5nXG5cdCAqIGEgc2luZ2xlIHRhcC5cblx0ICpcblx0ICogVGhlIGV2ZW50RGF0YSBmcm9tIHRoZSBlbWl0dGVkIGV2ZW50IGNvbnRhaW5zIHRoZSBwcm9wZXJ0eSBgdGFwQ291bnRgLCB3aGljaCBjb250YWlucyB0aGUgYW1vdW50IG9mXG5cdCAqIG11bHRpLXRhcHMgYmVpbmcgcmVjb2duaXplZC5cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleHRlbmRzIFJlY29nbml6ZXJcblx0ICovXG5cdGZ1bmN0aW9uIFRhcFJlY29nbml6ZXIoKSB7XG5cdCAgICBSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFxuXHQgICAgLy8gcHJldmlvdXMgdGltZSBhbmQgY2VudGVyLFxuXHQgICAgLy8gdXNlZCBmb3IgdGFwIGNvdW50aW5nXG5cdCAgICB0aGlzLnBUaW1lID0gZmFsc2U7XG5cdCAgICB0aGlzLnBDZW50ZXIgPSBmYWxzZTtcblx0XG5cdCAgICB0aGlzLl90aW1lciA9IG51bGw7XG5cdCAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG5cdCAgICB0aGlzLmNvdW50ID0gMDtcblx0fVxuXHRcblx0aW5oZXJpdChUYXBSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG5cdCAgICAvKipcblx0ICAgICAqIEBuYW1lc3BhY2Vcblx0ICAgICAqIEBtZW1iZXJvZiBQaW5jaFJlY29nbml6ZXJcblx0ICAgICAqL1xuXHQgICAgZGVmYXVsdHM6IHtcblx0ICAgICAgICBldmVudDogJ3RhcCcsXG5cdCAgICAgICAgcG9pbnRlcnM6IDEsXG5cdCAgICAgICAgdGFwczogMSxcblx0ICAgICAgICBpbnRlcnZhbDogMzAwLCAvLyBtYXggdGltZSBiZXR3ZWVuIHRoZSBtdWx0aS10YXAgdGFwc1xuXHQgICAgICAgIHRpbWU6IDI1MCwgLy8gbWF4IHRpbWUgb2YgdGhlIHBvaW50ZXIgdG8gYmUgZG93biAobGlrZSBmaW5nZXIgb24gdGhlIHNjcmVlbilcblx0ICAgICAgICB0aHJlc2hvbGQ6IDksIC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG5cdCAgICAgICAgcG9zVGhyZXNob2xkOiAxMCAvLyBhIG11bHRpLXRhcCBjYW4gYmUgYSBiaXQgb2ZmIHRoZSBpbml0aWFsIHBvc2l0aW9uXG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9NQU5JUFVMQVRJT05dO1xuXHQgICAgfSxcblx0XG5cdCAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHRcblx0ICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcblx0ICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG5cdCAgICAgICAgdmFyIHZhbGlkVG91Y2hUaW1lID0gaW5wdXQuZGVsdGFUaW1lIDwgb3B0aW9ucy50aW1lO1xuXHRcblx0ICAgICAgICB0aGlzLnJlc2V0KCk7XG5cdFxuXHQgICAgICAgIGlmICgoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpICYmICh0aGlzLmNvdW50ID09PSAwKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcblx0ICAgICAgICAvLyBhbmQgd2UndmUgcmVhY2hlZCBhbiBlbmQgZXZlbnQsIHNvIGEgdGFwIGlzIHBvc3NpYmxlXG5cdCAgICAgICAgaWYgKHZhbGlkTW92ZW1lbnQgJiYgdmFsaWRUb3VjaFRpbWUgJiYgdmFsaWRQb2ludGVycykge1xuXHQgICAgICAgICAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0VORCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdmFyIHZhbGlkSW50ZXJ2YWwgPSB0aGlzLnBUaW1lID8gKGlucHV0LnRpbWVTdGFtcCAtIHRoaXMucFRpbWUgPCBvcHRpb25zLmludGVydmFsKSA6IHRydWU7XG5cdCAgICAgICAgICAgIHZhciB2YWxpZE11bHRpVGFwID0gIXRoaXMucENlbnRlciB8fCBnZXREaXN0YW5jZSh0aGlzLnBDZW50ZXIsIGlucHV0LmNlbnRlcikgPCBvcHRpb25zLnBvc1RocmVzaG9sZDtcblx0XG5cdCAgICAgICAgICAgIHRoaXMucFRpbWUgPSBpbnB1dC50aW1lU3RhbXA7XG5cdCAgICAgICAgICAgIHRoaXMucENlbnRlciA9IGlucHV0LmNlbnRlcjtcblx0XG5cdCAgICAgICAgICAgIGlmICghdmFsaWRNdWx0aVRhcCB8fCAhdmFsaWRJbnRlcnZhbCkge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IDE7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvdW50ICs9IDE7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cdFxuXHQgICAgICAgICAgICAvLyBpZiB0YXAgY291bnQgbWF0Y2hlcyB3ZSBoYXZlIHJlY29nbml6ZWQgaXQsXG5cdCAgICAgICAgICAgIC8vIGVsc2UgaXQgaGFzIGJlZ2FuIHJlY29nbml6aW5nLi4uXG5cdCAgICAgICAgICAgIHZhciB0YXBDb3VudCA9IHRoaXMuY291bnQgJSBvcHRpb25zLnRhcHM7XG5cdCAgICAgICAgICAgIGlmICh0YXBDb3VudCA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgLy8gbm8gZmFpbGluZyByZXF1aXJlbWVudHMsIGltbWVkaWF0ZWx5IHRyaWdnZXIgdGhlIHRhcCBldmVudFxuXHQgICAgICAgICAgICAgICAgLy8gb3Igd2FpdCBhcyBsb25nIGFzIHRoZSBtdWx0aXRhcCBpbnRlcnZhbCB0byB0cmlnZ2VyXG5cdCAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfUkVDT0dOSVpFRDtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJ5RW1pdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBTVEFURV9CRUdBTjtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuXHQgICAgfSxcblx0XG5cdCAgICBmYWlsVGltZW91dDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcblx0ICAgICAgICB9LCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuXHQgICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuXHQgICAgfSxcblx0XG5cdCAgICBlbWl0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBTVEFURV9SRUNPR05JWkVEKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX2lucHV0LnRhcENvdW50ID0gdGhpcy5jb3VudDtcblx0ICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LCB0aGlzLl9pbnB1dCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgd2F5IHRvIGNyZWF0ZSBhIG1hbmFnZXIgd2l0aCBhIGRlZmF1bHQgc2V0IG9mIHJlY29nbml6ZXJzLlxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBIYW1tZXIoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICBvcHRpb25zLnJlY29nbml6ZXJzID0gaWZVbmRlZmluZWQob3B0aW9ucy5yZWNvZ25pemVycywgSGFtbWVyLmRlZmF1bHRzLnByZXNldCk7XG5cdCAgICByZXR1cm4gbmV3IE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAY29uc3Qge3N0cmluZ31cblx0ICovXG5cdEhhbW1lci5WRVJTSU9OID0gJzIuMC43Jztcblx0XG5cdC8qKlxuXHQgKiBkZWZhdWx0IHNldHRpbmdzXG5cdCAqIEBuYW1lc3BhY2Vcblx0ICovXG5cdEhhbW1lci5kZWZhdWx0cyA9IHtcblx0ICAgIC8qKlxuXHQgICAgICogc2V0IGlmIERPTSBldmVudHMgYXJlIGJlaW5nIHRyaWdnZXJlZC5cblx0ICAgICAqIEJ1dCB0aGlzIGlzIHNsb3dlciBhbmQgdW51c2VkIGJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbnMsIHNvIGRpc2FibGVkIGJ5IGRlZmF1bHQuXG5cdCAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgICAqIEBkZWZhdWx0IGZhbHNlXG5cdCAgICAgKi9cblx0ICAgIGRvbUV2ZW50czogZmFsc2UsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGUgdmFsdWUgZm9yIHRoZSB0b3VjaEFjdGlvbiBwcm9wZXJ0eS9mYWxsYmFjay5cblx0ICAgICAqIFdoZW4gc2V0IHRvIGBjb21wdXRlYCBpdCB3aWxsIG1hZ2ljYWxseSBzZXQgdGhlIGNvcnJlY3QgdmFsdWUgYmFzZWQgb24gdGhlIGFkZGVkIHJlY29nbml6ZXJzLlxuXHQgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAqIEBkZWZhdWx0IGNvbXB1dGVcblx0ICAgICAqL1xuXHQgICAgdG91Y2hBY3Rpb246IFRPVUNIX0FDVElPTl9DT01QVVRFLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICAgKiBAZGVmYXVsdCB0cnVlXG5cdCAgICAgKi9cblx0ICAgIGVuYWJsZTogdHJ1ZSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEVYUEVSSU1FTlRBTCBGRUFUVVJFIC0tIGNhbiBiZSByZW1vdmVkL2NoYW5nZWRcblx0ICAgICAqIENoYW5nZSB0aGUgcGFyZW50IGlucHV0IHRhcmdldCBlbGVtZW50LlxuXHQgICAgICogSWYgTnVsbCwgdGhlbiBpdCBpcyBiZWluZyBzZXQgdGhlIHRvIG1haW4gZWxlbWVudC5cblx0ICAgICAqIEB0eXBlIHtOdWxsfEV2ZW50VGFyZ2V0fVxuXHQgICAgICogQGRlZmF1bHQgbnVsbFxuXHQgICAgICovXG5cdCAgICBpbnB1dFRhcmdldDogbnVsbCxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGZvcmNlIGFuIGlucHV0IGNsYXNzXG5cdCAgICAgKiBAdHlwZSB7TnVsbHxGdW5jdGlvbn1cblx0ICAgICAqIEBkZWZhdWx0IG51bGxcblx0ICAgICAqL1xuXHQgICAgaW5wdXRDbGFzczogbnVsbCxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIERlZmF1bHQgcmVjb2duaXplciBzZXR1cCB3aGVuIGNhbGxpbmcgYEhhbW1lcigpYFxuXHQgICAgICogV2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyIHRoZXNlIHdpbGwgYmUgc2tpcHBlZC5cblx0ICAgICAqIEB0eXBlIHtBcnJheX1cblx0ICAgICAqL1xuXHQgICAgcHJlc2V0OiBbXG5cdCAgICAgICAgLy8gUmVjb2duaXplckNsYXNzLCBvcHRpb25zLCBbcmVjb2duaXplV2l0aCwgLi4uXSwgW3JlcXVpcmVGYWlsdXJlLCAuLi5dXG5cdCAgICAgICAgW1JvdGF0ZVJlY29nbml6ZXIsIHtlbmFibGU6IGZhbHNlfV0sXG5cdCAgICAgICAgW1BpbmNoUmVjb2duaXplciwge2VuYWJsZTogZmFsc2V9LCBbJ3JvdGF0ZSddXSxcblx0ICAgICAgICBbU3dpcGVSZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH1dLFxuXHQgICAgICAgIFtQYW5SZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH0sIFsnc3dpcGUnXV0sXG5cdCAgICAgICAgW1RhcFJlY29nbml6ZXJdLFxuXHQgICAgICAgIFtUYXBSZWNvZ25pemVyLCB7ZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyfSwgWyd0YXAnXV0sXG5cdCAgICAgICAgW1ByZXNzUmVjb2duaXplcl1cblx0ICAgIF0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTb21lIENTUyBwcm9wZXJ0aWVzIGNhbiBiZSB1c2VkIHRvIGltcHJvdmUgdGhlIHdvcmtpbmcgb2YgSGFtbWVyLlxuXHQgICAgICogQWRkIHRoZW0gdG8gdGhpcyBtZXRob2QgYW5kIHRoZXkgd2lsbCBiZSBzZXQgd2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyLlxuXHQgICAgICogQG5hbWVzcGFjZVxuXHQgICAgICovXG5cdCAgICBjc3NQcm9wczoge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIERpc2FibGVzIHRleHQgc2VsZWN0aW9uIHRvIGltcHJvdmUgdGhlIGRyYWdnaW5nIGdlc3R1cmUuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cblx0ICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuXHQgICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogRGlzYWJsZSB0aGUgV2luZG93cyBQaG9uZSBncmlwcGVycyB3aGVuIHByZXNzaW5nIGFuIGVsZW1lbnQuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB0b3VjaFNlbGVjdDogJ25vbmUnLFxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBEaXNhYmxlcyB0aGUgZGVmYXVsdCBjYWxsb3V0IHNob3duIHdoZW4geW91IHRvdWNoIGFuZCBob2xkIGEgdG91Y2ggdGFyZ2V0LlxuXHQgICAgICAgICAqIE9uIGlPUywgd2hlbiB5b3UgdG91Y2ggYW5kIGhvbGQgYSB0b3VjaCB0YXJnZXQgc3VjaCBhcyBhIGxpbmssIFNhZmFyaSBkaXNwbGF5c1xuXHQgICAgICAgICAqIGEgY2FsbG91dCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5rLiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGlzYWJsZSB0aGF0IGNhbGxvdXQuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB0b3VjaENhbGxvdXQ6ICdub25lJyxcblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogU3BlY2lmaWVzIHdoZXRoZXIgem9vbWluZyBpcyBlbmFibGVkLiBVc2VkIGJ5IElFMTA+XG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICBjb250ZW50Wm9vbWluZzogJ25vbmUnLFxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBTcGVjaWZpZXMgdGhhdCBhbiBlbnRpcmUgZWxlbWVudCBzaG91bGQgYmUgZHJhZ2dhYmxlIGluc3RlYWQgb2YgaXRzIGNvbnRlbnRzLiBNYWlubHkgZm9yIGRlc2t0b3AgYnJvd3NlcnMuXG5cdCAgICAgICAgICogQHR5cGUge1N0cmluZ31cblx0ICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcblx0ICAgICAgICAgKi9cblx0ICAgICAgICB1c2VyRHJhZzogJ25vbmUnLFxuXHRcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBPdmVycmlkZXMgdGhlIGhpZ2hsaWdodCBjb2xvciBzaG93biB3aGVuIHRoZSB1c2VyIHRhcHMgYSBsaW5rIG9yIGEgSmF2YVNjcmlwdFxuXHQgICAgICAgICAqIGNsaWNrYWJsZSBlbGVtZW50IGluIGlPUy4gVGhpcyBwcm9wZXJ0eSBvYmV5cyB0aGUgYWxwaGEgdmFsdWUsIGlmIHNwZWNpZmllZC5cblx0ICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuXHQgICAgICAgICAqIEBkZWZhdWx0ICdyZ2JhKDAsMCwwLDApJ1xuXHQgICAgICAgICAqL1xuXHQgICAgICAgIHRhcEhpZ2hsaWdodENvbG9yOiAncmdiYSgwLDAsMCwwKSdcblx0ICAgIH1cblx0fTtcblx0XG5cdHZhciBTVE9QID0gMTtcblx0dmFyIEZPUkNFRF9TVE9QID0gMjtcblx0XG5cdC8qKlxuXHQgKiBNYW5hZ2VyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucykge1xuXHQgICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCBIYW1tZXIuZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCA9IHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCB8fCBlbGVtZW50O1xuXHRcblx0ICAgIHRoaXMuaGFuZGxlcnMgPSB7fTtcblx0ICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuXHQgICAgdGhpcy5yZWNvZ25pemVycyA9IFtdO1xuXHQgICAgdGhpcy5vbGRDc3NQcm9wcyA9IHt9O1xuXHRcblx0ICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdCAgICB0aGlzLmlucHV0ID0gY3JlYXRlSW5wdXRJbnN0YW5jZSh0aGlzKTtcblx0ICAgIHRoaXMudG91Y2hBY3Rpb24gPSBuZXcgVG91Y2hBY3Rpb24odGhpcywgdGhpcy5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblx0XG5cdCAgICB0b2dnbGVDc3NQcm9wcyh0aGlzLCB0cnVlKTtcblx0XG5cdCAgICBlYWNoKHRoaXMub3B0aW9ucy5yZWNvZ25pemVycywgZnVuY3Rpb24oaXRlbSkge1xuXHQgICAgICAgIHZhciByZWNvZ25pemVyID0gdGhpcy5hZGQobmV3IChpdGVtWzBdKShpdGVtWzFdKSk7XG5cdCAgICAgICAgaXRlbVsyXSAmJiByZWNvZ25pemVyLnJlY29nbml6ZVdpdGgoaXRlbVsyXSk7XG5cdCAgICAgICAgaXRlbVszXSAmJiByZWNvZ25pemVyLnJlcXVpcmVGYWlsdXJlKGl0ZW1bM10pO1xuXHQgICAgfSwgdGhpcyk7XG5cdH1cblx0XG5cdE1hbmFnZXIucHJvdG90eXBlID0ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBzZXQgb3B0aW9uc1xuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuXHQgICAgICovXG5cdCAgICBzZXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblx0XG5cdCAgICAgICAgLy8gT3B0aW9ucyB0aGF0IG5lZWQgYSBsaXR0bGUgbW9yZSBzZXR1cFxuXHQgICAgICAgIGlmIChvcHRpb25zLnRvdWNoQWN0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChvcHRpb25zLmlucHV0VGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVpbml0aWFsaXplXG5cdCAgICAgICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICB0aGlzLmlucHV0LnRhcmdldCA9IG9wdGlvbnMuaW5wdXRUYXJnZXQ7XG5cdCAgICAgICAgICAgIHRoaXMuaW5wdXQuaW5pdCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBzdG9wIHJlY29nbml6aW5nIGZvciB0aGlzIHNlc3Npb24uXG5cdCAgICAgKiBUaGlzIHNlc3Npb24gd2lsbCBiZSBkaXNjYXJkZWQsIHdoZW4gYSBuZXcgW2lucHV0XXN0YXJ0IGV2ZW50IGlzIGZpcmVkLlxuXHQgICAgICogV2hlbiBmb3JjZWQsIHRoZSByZWNvZ25pemVyIGN5Y2xlIGlzIHN0b3BwZWQgaW1tZWRpYXRlbHkuXG5cdCAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmb3JjZV1cblx0ICAgICAqL1xuXHQgICAgc3RvcDogZnVuY3Rpb24oZm9yY2UpIHtcblx0ICAgICAgICB0aGlzLnNlc3Npb24uc3RvcHBlZCA9IGZvcmNlID8gRk9SQ0VEX1NUT1AgOiBTVE9QO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHJ1biB0aGUgcmVjb2duaXplcnMhXG5cdCAgICAgKiBjYWxsZWQgYnkgdGhlIGlucHV0SGFuZGxlciBmdW5jdGlvbiBvbiBldmVyeSBtb3ZlbWVudCBvZiB0aGUgcG9pbnRlcnMgKHRvdWNoZXMpXG5cdCAgICAgKiBpdCB3YWxrcyB0aHJvdWdoIGFsbCB0aGUgcmVjb2duaXplcnMgYW5kIHRyaWVzIHRvIGRldGVjdCB0aGUgZ2VzdHVyZSB0aGF0IGlzIGJlaW5nIG1hZGVcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcblx0ICAgICAqL1xuXHQgICAgcmVjb2duaXplOiBmdW5jdGlvbihpbnB1dERhdGEpIHtcblx0ICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcblx0ICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHJ1biB0aGUgdG91Y2gtYWN0aW9uIHBvbHlmaWxsXG5cdCAgICAgICAgdGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoaW5wdXREYXRhKTtcblx0XG5cdCAgICAgICAgdmFyIHJlY29nbml6ZXI7XG5cdCAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcblx0XG5cdCAgICAgICAgLy8gdGhpcyBob2xkcyB0aGUgcmVjb2duaXplciB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG5cdCAgICAgICAgLy8gc28gdGhlIHJlY29nbml6ZXIncyBzdGF0ZSBuZWVkcyB0byBiZSBCRUdBTiwgQ0hBTkdFRCwgRU5ERUQgb3IgUkVDT0dOSVpFRFxuXHQgICAgICAgIC8vIGlmIG5vIHJlY29nbml6ZXIgaXMgZGV0ZWN0aW5nIGEgdGhpbmcsIGl0IGlzIHNldCB0byBgbnVsbGBcblx0ICAgICAgICB2YXIgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplcjtcblx0XG5cdCAgICAgICAgLy8gcmVzZXQgd2hlbiB0aGUgbGFzdCByZWNvZ25pemVyIGlzIHJlY29nbml6ZWRcblx0ICAgICAgICAvLyBvciB3aGVuIHdlJ3JlIGluIGEgbmV3IHNlc3Npb25cblx0ICAgICAgICBpZiAoIWN1clJlY29nbml6ZXIgfHwgKGN1clJlY29nbml6ZXIgJiYgY3VyUmVjb2duaXplci5zdGF0ZSAmIFNUQVRFX1JFQ09HTklaRUQpKSB7XG5cdCAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSBudWxsO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgcmVjb2duaXplcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHJlY29nbml6ZXIgPSByZWNvZ25pemVyc1tpXTtcblx0XG5cdCAgICAgICAgICAgIC8vIGZpbmQgb3V0IGlmIHdlIGFyZSBhbGxvd2VkIHRyeSB0byByZWNvZ25pemUgdGhlIGlucHV0IGZvciB0aGlzIG9uZS5cblx0ICAgICAgICAgICAgLy8gMS4gICBhbGxvdyBpZiB0aGUgc2Vzc2lvbiBpcyBOT1QgZm9yY2VkIHN0b3BwZWQgKHNlZSB0aGUgLnN0b3AoKSBtZXRob2QpXG5cdCAgICAgICAgICAgIC8vIDIuICAgYWxsb3cgaWYgd2Ugc3RpbGwgaGF2ZW4ndCByZWNvZ25pemVkIGEgZ2VzdHVyZSBpbiB0aGlzIHNlc3Npb24sIG9yIHRoZSB0aGlzIHJlY29nbml6ZXIgaXMgdGhlIG9uZVxuXHQgICAgICAgICAgICAvLyAgICAgIHRoYXQgaXMgYmVpbmcgcmVjb2duaXplZC5cblx0ICAgICAgICAgICAgLy8gMy4gICBhbGxvdyBpZiB0aGUgcmVjb2duaXplciBpcyBhbGxvd2VkIHRvIHJ1biBzaW11bHRhbmVvdXMgd2l0aCB0aGUgY3VycmVudCByZWNvZ25pemVkIHJlY29nbml6ZXIuXG5cdCAgICAgICAgICAgIC8vICAgICAgdGhpcyBjYW4gYmUgc2V0dXAgd2l0aCB0aGUgYHJlY29nbml6ZVdpdGgoKWAgbWV0aG9kIG9uIHRoZSByZWNvZ25pemVyLlxuXHQgICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkICE9PSBGT1JDRURfU1RPUCAmJiAoIC8vIDFcblx0ICAgICAgICAgICAgICAgICAgICAhY3VyUmVjb2duaXplciB8fCByZWNvZ25pemVyID09IGN1clJlY29nbml6ZXIgfHwgLy8gMlxuXHQgICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuY2FuUmVjb2duaXplV2l0aChjdXJSZWNvZ25pemVyKSkpIHsgLy8gM1xuXHQgICAgICAgICAgICAgICAgcmVjb2duaXplci5yZWNvZ25pemUoaW5wdXREYXRhKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVzZXQoKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy8gaWYgdGhlIHJlY29nbml6ZXIgaGFzIGJlZW4gcmVjb2duaXppbmcgdGhlIGlucHV0IGFzIGEgdmFsaWQgZ2VzdHVyZSwgd2Ugd2FudCB0byBzdG9yZSB0aGlzIG9uZSBhcyB0aGVcblx0ICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgcmVjb2duaXplci4gYnV0IG9ubHkgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGFuIGFjdGl2ZSByZWNvZ25pemVyXG5cdCAgICAgICAgICAgIGlmICghY3VyUmVjb2duaXplciAmJiByZWNvZ25pemVyLnN0YXRlICYgKFNUQVRFX0JFR0FOIHwgU1RBVEVfQ0hBTkdFRCB8IFNUQVRFX0VOREVEKSkge1xuXHQgICAgICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IHJlY29nbml6ZXI7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBnZXQgYSByZWNvZ25pemVyIGJ5IGl0cyBldmVudCBuYW1lLlxuXHQgICAgICogQHBhcmFtIHtSZWNvZ25pemVyfFN0cmluZ30gcmVjb2duaXplclxuXHQgICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TnVsbH1cblx0ICAgICAqL1xuXHQgICAgZ2V0OiBmdW5jdGlvbihyZWNvZ25pemVyKSB7XG5cdCAgICAgICAgaWYgKHJlY29nbml6ZXIgaW5zdGFuY2VvZiBSZWNvZ25pemVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIHJlY29nbml6ZXJzID0gdGhpcy5yZWNvZ25pemVycztcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29nbml6ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlmIChyZWNvZ25pemVyc1tpXS5vcHRpb25zLmV2ZW50ID09IHJlY29nbml6ZXIpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZWNvZ25pemVyc1tpXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBhZGQgYSByZWNvZ25pemVyIHRvIHRoZSBtYW5hZ2VyXG5cdCAgICAgKiBleGlzdGluZyByZWNvZ25pemVycyB3aXRoIHRoZSBzYW1lIGV2ZW50IG5hbWUgd2lsbCBiZSByZW1vdmVkXG5cdCAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IHJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfE1hbmFnZXJ9XG5cdCAgICAgKi9cblx0ICAgIGFkZDogZnVuY3Rpb24ocmVjb2duaXplcikge1xuXHQgICAgICAgIGlmIChpbnZva2VBcnJheUFyZyhyZWNvZ25pemVyLCAnYWRkJywgdGhpcykpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyByZW1vdmUgZXhpc3Rpbmdcblx0ICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChyZWNvZ25pemVyLm9wdGlvbnMuZXZlbnQpO1xuXHQgICAgICAgIGlmIChleGlzdGluZykge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShleGlzdGluZyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnJlY29nbml6ZXJzLnB1c2gocmVjb2duaXplcik7XG5cdCAgICAgICAgcmVjb2duaXplci5tYW5hZ2VyID0gdGhpcztcblx0XG5cdCAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcblx0ICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiByZW1vdmUgYSByZWNvZ25pemVyIGJ5IG5hbWUgb3IgaW5zdGFuY2Vcblx0ICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcblx0ICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuXHQgICAgICovXG5cdCAgICByZW1vdmU6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcblx0ICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcocmVjb2duaXplciwgJ3JlbW92ZScsIHRoaXMpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVjb2duaXplciA9IHRoaXMuZ2V0KHJlY29nbml6ZXIpO1xuXHRcblx0ICAgICAgICAvLyBsZXQncyBtYWtlIHN1cmUgdGhpcyByZWNvZ25pemVyIGV4aXN0c1xuXHQgICAgICAgIGlmIChyZWNvZ25pemVyKSB7XG5cdCAgICAgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG5cdCAgICAgICAgICAgIHZhciBpbmRleCA9IGluQXJyYXkocmVjb2duaXplcnMsIHJlY29nbml6ZXIpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuXHQgICAgICAgICAgICAgICAgcmVjb2duaXplcnMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGJpbmQgZXZlbnRcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgICAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IHRoaXNcblx0ICAgICAqL1xuXHQgICAgb246IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuXHQgICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycztcblx0ICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGhhbmRsZXJzW2V2ZW50XSA9IGhhbmRsZXJzW2V2ZW50XSB8fCBbXTtcblx0ICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdLnB1c2goaGFuZGxlcik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogdW5iaW5kIGV2ZW50LCBsZWF2ZSBlbWl0IGJsYW5rIHRvIHJlbW92ZSBhbGwgaGFuZGxlcnNcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtoYW5kbGVyXVxuXHQgICAgICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gdGhpc1xuXHQgICAgICovXG5cdCAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuXHQgICAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuXHQgICAgICAgIGVhY2goc3BsaXRTdHIoZXZlbnRzKSwgZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKCFoYW5kbGVyKSB7XG5cdCAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlcnNbZXZlbnRdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgaGFuZGxlcnNbZXZlbnRdICYmIGhhbmRsZXJzW2V2ZW50XS5zcGxpY2UoaW5BcnJheShoYW5kbGVyc1tldmVudF0sIGhhbmRsZXIpLCAxKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGVtaXQgZXZlbnQgdG8gdGhlIGxpc3RlbmVyc1xuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuXHQgICAgICovXG5cdCAgICBlbWl0OiBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuXHQgICAgICAgIC8vIHdlIGFsc28gd2FudCB0byB0cmlnZ2VyIGRvbSBldmVudHNcblx0ICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRvbUV2ZW50cykge1xuXHQgICAgICAgICAgICB0cmlnZ2VyRG9tRXZlbnQoZXZlbnQsIGRhdGEpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gbm8gaGFuZGxlcnMsIHNvIHNraXAgaXQgYWxsXG5cdCAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tldmVudF0gJiYgdGhpcy5oYW5kbGVyc1tldmVudF0uc2xpY2UoKTtcblx0ICAgICAgICBpZiAoIWhhbmRsZXJzIHx8ICFoYW5kbGVycy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZGF0YS50eXBlID0gZXZlbnQ7XG5cdCAgICAgICAgZGF0YS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICBkYXRhLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgaGFuZGxlcnMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGhhbmRsZXJzW2ldKGRhdGEpO1xuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGRlc3Ryb3kgdGhlIG1hbmFnZXIgYW5kIHVuYmluZHMgYWxsIGV2ZW50c1xuXHQgICAgICogaXQgZG9lc24ndCB1bmJpbmQgZG9tIGV2ZW50cywgdGhhdCBpcyB0aGUgdXNlciBvd24gcmVzcG9uc2liaWxpdHlcblx0ICAgICAqL1xuXHQgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGhpcy5lbGVtZW50ICYmIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIGZhbHNlKTtcblx0XG5cdCAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuXHQgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuXHQgICAgICAgIHRoaXMuaW5wdXQuZGVzdHJveSgpO1xuXHQgICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogYWRkL3JlbW92ZSB0aGUgY3NzIHByb3BlcnRpZXMgYXMgZGVmaW5lZCBpbiBtYW5hZ2VyLm9wdGlvbnMuY3NzUHJvcHNcblx0ICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gYWRkXG5cdCAqL1xuXHRmdW5jdGlvbiB0b2dnbGVDc3NQcm9wcyhtYW5hZ2VyLCBhZGQpIHtcblx0ICAgIHZhciBlbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuXHQgICAgaWYgKCFlbGVtZW50LnN0eWxlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb3A7XG5cdCAgICBlYWNoKG1hbmFnZXIub3B0aW9ucy5jc3NQcm9wcywgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICBwcm9wID0gcHJlZml4ZWQoZWxlbWVudC5zdHlsZSwgbmFtZSk7XG5cdCAgICAgICAgaWYgKGFkZCkge1xuXHQgICAgICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdID0gZWxlbWVudC5zdHlsZVtwcm9wXTtcblx0ICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbcHJvcF0gPSBtYW5hZ2VyLm9sZENzc1Byb3BzW3Byb3BdIHx8ICcnO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgaWYgKCFhZGQpIHtcblx0ICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzID0ge307XG5cdCAgICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiB0cmlnZ2VyIGRvbSBldmVudFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGRhdGFcblx0ICovXG5cdGZ1bmN0aW9uIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSkge1xuXHQgICAgdmFyIGdlc3R1cmVFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHQgICAgZ2VzdHVyZUV2ZW50LmluaXRFdmVudChldmVudCwgdHJ1ZSwgdHJ1ZSk7XG5cdCAgICBnZXN0dXJlRXZlbnQuZ2VzdHVyZSA9IGRhdGE7XG5cdCAgICBkYXRhLnRhcmdldC5kaXNwYXRjaEV2ZW50KGdlc3R1cmVFdmVudCk7XG5cdH1cblx0XG5cdGFzc2lnbihIYW1tZXIsIHtcblx0ICAgIElOUFVUX1NUQVJUOiBJTlBVVF9TVEFSVCxcblx0ICAgIElOUFVUX01PVkU6IElOUFVUX01PVkUsXG5cdCAgICBJTlBVVF9FTkQ6IElOUFVUX0VORCxcblx0ICAgIElOUFVUX0NBTkNFTDogSU5QVVRfQ0FOQ0VMLFxuXHRcblx0ICAgIFNUQVRFX1BPU1NJQkxFOiBTVEFURV9QT1NTSUJMRSxcblx0ICAgIFNUQVRFX0JFR0FOOiBTVEFURV9CRUdBTixcblx0ICAgIFNUQVRFX0NIQU5HRUQ6IFNUQVRFX0NIQU5HRUQsXG5cdCAgICBTVEFURV9FTkRFRDogU1RBVEVfRU5ERUQsXG5cdCAgICBTVEFURV9SRUNPR05JWkVEOiBTVEFURV9SRUNPR05JWkVELFxuXHQgICAgU1RBVEVfQ0FOQ0VMTEVEOiBTVEFURV9DQU5DRUxMRUQsXG5cdCAgICBTVEFURV9GQUlMRUQ6IFNUQVRFX0ZBSUxFRCxcblx0XG5cdCAgICBESVJFQ1RJT05fTk9ORTogRElSRUNUSU9OX05PTkUsXG5cdCAgICBESVJFQ1RJT05fTEVGVDogRElSRUNUSU9OX0xFRlQsXG5cdCAgICBESVJFQ1RJT05fUklHSFQ6IERJUkVDVElPTl9SSUdIVCxcblx0ICAgIERJUkVDVElPTl9VUDogRElSRUNUSU9OX1VQLFxuXHQgICAgRElSRUNUSU9OX0RPV046IERJUkVDVElPTl9ET1dOLFxuXHQgICAgRElSRUNUSU9OX0hPUklaT05UQUw6IERJUkVDVElPTl9IT1JJWk9OVEFMLFxuXHQgICAgRElSRUNUSU9OX1ZFUlRJQ0FMOiBESVJFQ1RJT05fVkVSVElDQUwsXG5cdCAgICBESVJFQ1RJT05fQUxMOiBESVJFQ1RJT05fQUxMLFxuXHRcblx0ICAgIE1hbmFnZXI6IE1hbmFnZXIsXG5cdCAgICBJbnB1dDogSW5wdXQsXG5cdCAgICBUb3VjaEFjdGlvbjogVG91Y2hBY3Rpb24sXG5cdFxuXHQgICAgVG91Y2hJbnB1dDogVG91Y2hJbnB1dCxcblx0ICAgIE1vdXNlSW5wdXQ6IE1vdXNlSW5wdXQsXG5cdCAgICBQb2ludGVyRXZlbnRJbnB1dDogUG9pbnRlckV2ZW50SW5wdXQsXG5cdCAgICBUb3VjaE1vdXNlSW5wdXQ6IFRvdWNoTW91c2VJbnB1dCxcblx0ICAgIFNpbmdsZVRvdWNoSW5wdXQ6IFNpbmdsZVRvdWNoSW5wdXQsXG5cdFxuXHQgICAgUmVjb2duaXplcjogUmVjb2duaXplcixcblx0ICAgIEF0dHJSZWNvZ25pemVyOiBBdHRyUmVjb2duaXplcixcblx0ICAgIFRhcDogVGFwUmVjb2duaXplcixcblx0ICAgIFBhbjogUGFuUmVjb2duaXplcixcblx0ICAgIFN3aXBlOiBTd2lwZVJlY29nbml6ZXIsXG5cdCAgICBQaW5jaDogUGluY2hSZWNvZ25pemVyLFxuXHQgICAgUm90YXRlOiBSb3RhdGVSZWNvZ25pemVyLFxuXHQgICAgUHJlc3M6IFByZXNzUmVjb2duaXplcixcblx0XG5cdCAgICBvbjogYWRkRXZlbnRMaXN0ZW5lcnMsXG5cdCAgICBvZmY6IHJlbW92ZUV2ZW50TGlzdGVuZXJzLFxuXHQgICAgZWFjaDogZWFjaCxcblx0ICAgIG1lcmdlOiBtZXJnZSxcblx0ICAgIGV4dGVuZDogZXh0ZW5kLFxuXHQgICAgYXNzaWduOiBhc3NpZ24sXG5cdCAgICBpbmhlcml0OiBpbmhlcml0LFxuXHQgICAgYmluZEZuOiBiaW5kRm4sXG5cdCAgICBwcmVmaXhlZDogcHJlZml4ZWRcblx0fSk7XG5cdFxuXHQvLyB0aGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIEhhbW1lciBpcyBsb2FkZWQgaW4gdGhlIHByZXNlbmNlIG9mIGFuIEFNRFxuXHQvLyAgc3R5bGUgbG9hZGVyIGJ1dCBieSBzY3JpcHQgdGFnLCBub3QgYnkgdGhlIGxvYWRlci5cblx0dmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9KSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuXHRmcmVlR2xvYmFsLkhhbW1lciA9IEhhbW1lcjtcblx0XG5cdGlmICh0cnVlKSB7XG5cdCAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIEhhbW1lcjtcblx0ICAgIH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBIYW1tZXI7XG5cdH0gZWxzZSB7XG5cdCAgICB3aW5kb3dbZXhwb3J0TmFtZV0gPSBIYW1tZXI7XG5cdH1cblx0XG5cdH0pKHdpbmRvdywgZG9jdW1lbnQsICdIYW1tZXInKTtcblxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCJbe1xcbiAgXFxcImlkXFxcIjogMSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJDcm9uIChqb2Igc2NoZWR1bGVyKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiSXQgY29tZXMgZnJvbSB0aGUgR3JlZWsgd29yZCBmb3IgdGltZSwgY2hyb25vcyAoz4fPgc+Mzr3Ov8+CKS4gQ2hyb25vcyBpcyB0aGUgcGVyc29uaWZpY2F0aW9uIG9mIHRpbWUgaW4gZWFybHkgR3JlZWsgbXl0aG9sb2d5IGFuZCBsaXRlcmF0dXJlLiBIZSBsYXRlciBhcHBlYXJzIGluIHRoZSBSZW5haXNzYW5jZSBhcyBGYXRoZXIgVGltZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJPU1xcXCIsXFxuICAgIFxcXCJ1bml4XFxcIixcXG4gICAgXFxcImxpbnV4XFxcIixcXG4gICAgXFxcIm9wZW4gc291cmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ3JvblxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkRhZW1vblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHRlcm0gY29pbmVkIGJ5IHByb2dyYW1tZXJzIG9mIE1JVCdzIFByb2plY3QgTUFDLCB3YXMgaW5zcGlyZWQgYnkgdGhlIHBoeXNpY2lzdCBKYW1lcyBDbGVyayBNYXh3ZWxsJ3MgZGVtb24uIEl0IG9yaWdpbmF0ZWQgYXMgYW4gaW1hZ2luYXJ5IGJlaW5nIGZyb20gYSB0aG91Z2h0IGV4cGVyaW1lbnQgdGhhdCBjb25zdGFudGx5IHdvcmtzIGluIHRoZSBiYWNrZ3JvdW5kIHNvcnRpbmcgbW9sZWN1bGVzLiBJbiBHcmVlayBteXRob2xvZ3ksIGEgZGFlbW9uIGlzIGEgc3VwZXJuYXR1cmFsIGJlaW5nIHdvcmtpbmcgaW4gdGhlIGJhY2tncm91bmQsIHdpdGggbm8gcGFydGljdWxhciBiaWFzIHRvd2FyZHMgZ29vZCBvciBldmlsLiBUaGUgZGFlbW9uIGNvbmNlcHQgd2FzIHN1YnNlcXVlbnRseSBhZG9wdGVkIGJ5IFVuaXggc3lzdGVtcywgaG93ZXZlciwgQlNEIGFuZCBzb21lIG9mIGl0cyBkZXJpdmF0aXZlcyBoYXZlIHVzZWQgYSBDaHJpc3RpYW4gaW50ZXJwcmV0YXRpb24gb2YgdGhlIG15dGhvbG9naWNhbCBkZWFtb24gYXMgdGhlaXIgbWFzY290IHJhdGhlciB0aGFuIGEgR3JlZWsgZGFlbW9uLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIk9TXFxcIixcXG4gICAgXFxcInVuaXhcXFwiLFxcbiAgICBcXFwibGludXhcXFwiLFxcbiAgICBcXFwib3BlbiBzb3VyY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EYWVtb25fKGNvbXB1dGluZykjRXR5bW9sb2d5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUG9seW1vcnBoaXNtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJJbiBwcm9ncmFtbWluZyBsYW5ndWFnZXMgYW5kIHR5cGUgdGhlb3J5LCBwb2x5bW9ycGhpc20gaXMgdGhlIHByb3Zpc2lvbiBvZiBhIHNpbmdsZSBpbnRlcmZhY2UgdG8gZW50aXRpZXMgb2YgZGlmZmVyZW50IHR5cGVzLiBQb2x5bW9ycGhpc20gY29tZXMgZnJvbSB0aGUgZ3JlZWsgd29yZHMsIHBvbHlzICjPgM6/zrvPjc+CKSwgbWVhbmluZyBcXFxcXFxcIm11Y2hcXFxcXFxcIiBvciBcXFxcXFxcIm1hbnlcXFxcXFxcIiBhbmQgbW9ycGjEkyAozrzOv8+Bz4bOriksIG1lYW5pbmcgXFxcXFxcXCJmb3JtXFxcXFxcXCIgb3IgXFxcXFxcXCJzaGFwZVxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCIoQXBhY2hlKSBDYXNzYW5kcmFcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkFwYWNoZSBDYXNzYW5kcmEgd2FzIG5hbWVkIGFmdGVyIENhc3NhbmRyYSAoR3JlZWs6IM6azrHPg8+DzqzOvc60z4HOsSwgYWxzbyDOms6xz4POrM69zrTPgc6xKSwgZGF1Z2h0ZXIgb2YgS2luZyBQcmlhbSBhbmQgUXVlZW4gSGVjdWJhIG9mIFRyb3kuIEEgY29tbW9uIHZlcnNpb24gb2YgaGVyIHN0b3J5IGlzIHRoYXQgQXBvbGxvIGdhdmUgaGVyIHRoZSBwb3dlciBvZiBwcm9waGVjeSBpbiBvcmRlciB0byBzZWR1Y2UgaGVyLCBidXQgd2hlbiBzaGUgc3B1cm5lZCBoaXMgYWR2YW5jZXMsIGhlIHNwYXQgaW50byBoZXIgbW91dGggdG8gZW5zdXJlIHRoYXQgQ2FkYW5kcmHigJlzIHByb3BoZXNpZXMgZmVsbCBvbiBkZWFmIGVhcnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwib3BlbiBzb3VyY2VcXFwiLFxcbiAgICBcXFwiZGF0YWJhc2VzXFxcIixcXG4gICAgXFxcImJpZyBkYXRhXFxcIixcXG4gICAgXFxcIm5vU1FMXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlBzZXVkb1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHByZWZpeCBwc2V1ZG8gY29tZXMgZnJvbSBwc2V1ZGVzICjPiM61z4XOtM6uz4IsKSwgbWVhbmluZyBcXFxcXFxcImx5aW5nXFxcXFxcXCIgb3IgXFxcXFxcXCJmYWxzZVxcXFxcXFwiLiBUaGUgdGVybSByZWZlcnMgdG8gc29tZXRoaW5nIHdoaWNoIGFwcGVhcnMsIG9uIHRoZSBzdXJmYWNlLCB0byBiZSBvbmUgdGhpbmcsIGJ1dCBpcyBhY3R1YWxseSBhbm90aGVyLiBQc2V1ZG8gbWF5IGNvbm5vdGUgY29pbmNpZGVuY2UsIGltaXRhdGlvbiwgaW50ZW50aW9uYWwgZGVjZXB0aW9uLCBvciBhIGNvbWJpbmF0aW9uIHRoZXJlb2YuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIixcXG4gICAgXFxcIkNTU1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJUcm9qYW4gaG9yc2VcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB0ZXJtIGNvbWVzIGZyb20gdGhlIEFuY2llbnQgR3JlZWsgc3Rvcnkgb2YgdGhlIHdvb2RlbiBob3JzZSB0aGF0IHdhcyB1c2VkIGJ5IHRoZSBHcmVlayB0cm9vcHMgdG8gaW52YWRlIFRyb3kgYnkgc3RlYWx0aCBmcm9tIHdpdGhpbiB0aGUgY2l0eeKAmXMgd2FsbHMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic29jaWFsIGVuZ2luZWVyaW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1cXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDcsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiVGVjaG5vbG9neVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGVjaG5vbG9neSBkZXJpdmVzIGZyb20gdGhlIEdyZWVrIHdvcmRzIHRlY2huZSAoz4TOrc+Hzr3OtyksIG1lYW5pbmcgYXJ0LCBza2lsbCBvciBzbGVpZ2h0IG9mIGhhbmQgYW5kIGxvZ2lhICjOu86/zrPOr86xKSwgd2hpY2ggcmVmZXJzIHRvIGEgY29sbGVjdGlvbiBvZiB0ZWNobmlxdWVzLCBza2lsbHMgYW5kIHByb2Nlc3NlcyB1c2VkIGluIHRoZSBwcm9kdWN0aW9uIG9mIGdvb2RzLCBzZXJ2aWNlcyBvciBpbiB0aGUgYWNjb21wbGlzaG1lbnQgb2Ygb2JqZWN0aXZlcy4gSXQgaXMgZWFzeSB0byBzZWUgaG93IHRoZXNlIGNvbmNlcHRzIGFwcGx5IHRvIG91ciBjb250ZW1wb3JhcnkgdW5kZXJzdGFuZGluZyBvZiB0ZWNobm9sb2d5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNjaWVuY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiS2VyYmVyb3MgKHByb3RvY29sKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHByb3RvY29sIHdhcyBuYW1lZCBhZnRlciBLZXJiZXJvcyAob3IgQ2VyYmVydXMpIGluIEdyZWVrIG15dGhvbG9neSwgdGhlIGZlcm9jaW91cyB0aHJlZS1oZWFkZWQgZ3VhcmQgZG9nIG9mIEhhZGVzLiBJdHMgZGVzaWduZXJzIGNvbmNlaXZlZCBpdCBwcmltYXJpbHkgYXMgYSBjbGllbnTigJNzZXJ2ZXIgbW9kZWwgYW5kIGl0IHByb3ZpZGVzIG11dHVhbCBhdXRoZW50aWNhdGlvbiAtIGJvdGggdGhlIHVzZXIgYW5kIHRoZSBzZXJ2ZXIgdmVyaWZ5IGVhY2ggb3RoZXIncyBpZGVudGl0eS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIixcXG4gICAgXFxcImF1dGhlbnRpY2F0aW9uIHByb3RvY29sXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA5LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlNrZXVvbW9ycGgg4oCTIFNrZXVvbW9ycGhpc21cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB0ZXJtIHNrZXVvbW9ycGggaXMgY29tcG91bmRlZCBmcm9tIHRoZSBHcmVlazogc2vDqXVvcyAoz4POus614b+mzr/PgiksIG1lYW5pbmcgXFxcXFxcXCJjb250YWluZXJcXFxcXFxcIiBvciBcXFxcXFxcInRvb2xcXFxcXFxcIiwgYW5kIG1vcnBo4biXICjOvM6/z4HPhs6uKSwgXFxcXFxcXCJzaGFwZVxcXFxcXFwiLiBBIHNrZXVvbW9ycGggaXMgYSBkZXJpdmF0aXZlIG9iamVjdCB0aGF0IHJldGFpbnMgb3JuYW1lbnRhbCBkZXNpZ24gY3VlcyBmcm9tIHN0cnVjdHVyZXMgdGhhdCB3ZXJlIG5lY2Vzc2FyeSBpbiB0aGUgb3JpZ2luYWwsIGxpa2UgYSBzb2Z0d2FyZSBjYWxlbmRhciB0aGF0IGltaXRhdGVzIHRoZSBhcHBlYXJhbmNlIG9mIGJpbmRpbmcgb24gYSBwYXBlciBkZXNrIGNhbGVuZGFyLiBTa2V1b21vcnBoIGNhbiBiZSB1c2VkIHRvIGRlc2NyaWJlIGNvbXB1dGVyIGFuZCBtb2JpbGUgaW50ZXJmYWNlcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJkZXNpZ25cXFwiLFxcbiAgICBcXFwiaW50ZXJmYWNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxMCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJFY2xpcHNlXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgdGVybSBlY2xpcHNlIGlzIGRlcml2ZWQgZnJvbSB0aGUgYW5jaWVudCBHcmVlayDDqWtsZWlwc2lzICjhvJTOus67zrXOuc+IzrnPgiksIHdoaWNoIG1lYW5zIFxcXFxcXFwidGhlIGFiYW5kb25tZW50LCBkb3duZmFsbCwgb3IgZGFya2VuaW5nIG9mIGEgaGVhdmVubHkgYm9keVxcXFxcXFwiLiBFY2xpcHNlIHNvZnR3YXJlLCBpbml0aWFsbHkgZGV2ZWxvcGVkIGJ5IElCTSwgaXMgcHJpbWFyaWx5IHVzZWQgdG8gcHJvZHVjZSBKYXZhIGFwcGxpY2F0aW9ucy4gTWFueSB2ZXJzaW9ucyBvZiBFY2xpcHNlIGhhdmUgYmVlbiBuYW1lZCBhZnRlciBhIGNlbGVzdGlhbCBib2RpZXMsIHN1Y2ggYXMgSnVubywgTHVuYSBhbmQgTWFycy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJJREVcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcIkphdmFcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDExLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkFuZHJvaWRcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIHdhcyBjb2luZWQgZnJvbSB0aGUgcHJlZml4IGFuZHJvLSBmb3IgXFxcXFxcXCJtYW5cXFxcXFxcIiBvciBcXFxcXFxcIm1hbGVcXFxcXFxcIiAo4byAzr3OtM+BKSBhbmQgdGhlIHN1ZmZpeCAtb2lkIFxcXFxcXFwiaGF2aW5nIHRoZSBmb3JtIG9yIGxpa2VuZXNzIG9mXFxcXFxcXCIuIEl0IGhhcyByZWNlbnRseSBjb21lIHRvIHJlZmVyIHRvIGFuIG9wZXJhdGluZyBzeXN0ZW0gZW5kb3JzZWQgYnkgR29vZ2xlLCB3aGljaCBoYXMgYmVjb21lIGEgbGVhZGVyIGluIHRoZSBtb2JpbGUgZGV2aWNlIG1hcmtldC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJPU1xcXCIsXFxuICAgIFxcXCJtb2JpbGVcXFwiLFxcbiAgICBcXFwiR29vZ2xlXFxcIixcXG4gICAgXFxcIm9wZW4gc291cmNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxMixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJJY29uXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBbiBpY29uLCBmcm9tIHRoZSBHcmVlayBlaWvFjW4gKM614bywzrrPjs69KSBkZWZpbmVkIGFzIFxcXFxcXFwiaW1hZ2VcXFxcXFxcIiwgaXMgZ2VuZXJhbGx5IGEgZmxhdCBwYW5lbCBwYWludGluZyBkZXBpY3RpbmcgcmVsaWdpb3VzIGZpZ3VyZXMgb3Igc2NlbmVzLiBUaGUgdGVybSBoYXMgYmVlbiBhZGFwdGVkIHRvIHJlZmVyIHRvIGEgZ3JhcGhpY2FsIHVzZXIgaW50ZXJmYWNlIChHVUkpLCB3aGljaCBpcyB0aGUgdmlzdWFsIHN5bWJvbCBpZGVudGlmeWluZyBhIGNvbW1hbmQsIGZpbGUsIGRpcmVjdG9yeSBvciBkZXZpY2UuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiR1VJXFxcIixcXG4gICAgXFxcImludGVyZmFjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUGFyYW1ldGVyXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJQYXJhbWV0ZXIgY29tZXMgZnJvbSB0aGUgYW5jaWVudCBHcmVlayB3b3JkcyBcXFxcXFxcInBhcmFcXFxcXFxcIiAoz4DOsc+BzqwpLCBtZWFuaW5nIFxcXFxcXFwiYmVzaWRlLCBzdWJzaWRpYXJ5XFxcXFxcXCIgYW5kIFxcXFxcXFwibWV0cm9uXFxcXFxcXCIgKM68zq3PhM+Bzr/OvSksIG1lYW5pbmcgXFxcXFxcXCJtZWFzdXJlXFxcXFxcXCIuIEl0IGNvbW1vbmx5IHJlZmVycyB0byBhIFxcXFxcXFwiY2hhcmFjdGVyaXN0aWMsIGZlYXR1cmUsIG9yIG1lYXN1cmFibGUgZmFjdG9yIHRoYXQgY2FuIGhlbHAgaW4gZGVmaW5pbmcgYSBwYXJ0aWN1bGFyIHN5c3RlbVxcXFxcXFwiLiBBIHBhcmFtZXRlciBpcyBhbiBpbXBvcnRhbnQgZWxlbWVudCB0byBjb25zaWRlciBpbiBldmFsdWF0aW9uIG9yIGNvbXByZWhlbnNpb24gb2YgYW4gZXZlbnQsIHByb2plY3QsIG9yIHNpdHVhdGlvbi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDE0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkFzeW1tZXRyaWNcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkFzeW1tZXRyaWMgb3JpZ2luYXRlZCBmcm9tIHRoZSBhbmNpZW50IEdyZWVrIHdvcmQgYXN1bW1ldHLDrWEgKOG8gM+Dz4XOvM68zrXPhM+Bzq/OsSksIG1lYW5pbmcgXFxcXFxcXCJkaXNwcm9wb3J0aW9uLCBkZWZvcm1pdHlcXFxcXFxcIi4gSXQgY2FuIGJlIGZvdW5kIGluIG1hbnkgY29tcHV0aW5nLXJlbGF0ZWQgdG9waWNzIHN1Y2ggYXMgYXN5bW1ldHJpYyBjcnlwdG9ncmFwaHksIGFzeW1tZXRyaWMgZGlnaXRhbCBzdWJzY3JpYmVyIGxpbmUgKEFEU0wpIGluIGludGVybmV0IGNvbm5lY3Rpdml0eSBhbmQgYXN5bW1ldHJpYyBtdWx0aXByb2Nlc3NpbmcgaW4gY29tcHV0ZXIgYXJjaGl0ZWN0dXJlLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNyeXB0b2dyYXBoeVxcXCIsXFxuICAgIFxcXCJpbnRlcm5ldCBjb25uZWN0aXZpdHlcXFwiLFxcbiAgICBcXFwiY29tcHV0aW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxNSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTeW5jaHJvbm91cyDigJMgQXN5bmNocm9ub3VzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJTeW5jaHJvbm91cywgbWVhbmluZyBcXFxcXFxcImhhcHBlbmluZyBhdCB0aGUgc2FtZSB0aW1lXFxcXFxcXCIsIGlzIGZyb20gdGhlIEdyZWVrIHdvcmQgc3lua2hyb25vcyAoz4PPhc6zz4fPgc+Mzr3Pic+CKS4gSXQgaXMgYSBjb21wb3VuZCB3b3JkIGZvcm1lZCBieSBzeW4tIFxcXFxcXFwidG9nZXRoZXJcXFxcXFxcIiBhbmQgLWtocm9ub3MgXFxcXFxcXCJ0aW1lXFxcXFxcXCIuIEFzeW5jaHJvbm91cyBoYXMgdGhlIG9wcG9zaXRlIG1lYW5pbmcuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCIsXFxuICAgIFxcXCJ0ZWxlY29tbXVuaWNhdGlvbnNcXFwiLFxcbiAgICBcXFwic3lzdGVtc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQW5vbnltb3VzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBbm9ueW1pdHkgaXMgZGVyaXZlZCBmcm9tIHRoZSBHcmVlayB3b3JkIGFub255bWlhICjhvIDOvc+Jzr3Phc68zq/OsSksIGZvciBcXFxcXFxcIndpdGhvdXQgYSBuYW1lXFxcXFxcXCIgb3IgXFxcXFxcXCJuYW1lbGVzc25lc3NcXFxcXFxcIi4gSW4gY29sbG9xdWlhbCB1c2UsIFxcXFxcXFwiYW5vbnltb3VzXFxcXFxcXCIgaXMgdXNlZCB0byBkZXNjcmliZSBzaXR1YXRpb25zIHdoZXJlIHRoZSBhY3RpbmcgcGVyc29uJ3MgbmFtZSBpcyB1bmtub3duLiBTb21lIHdyaXRlcnMgaGF2ZSBhcmd1ZWQgdGhhdCBuYW1lbGVzc25lc3MsIHRob3VnaCB0ZWNobmljYWxseSBjb3JyZWN0LCBkb2VzIG5vdCBjYXB0dXJlIHdoYXQgaXMgbW9yZSBjZW50cmFsbHkgYXQgc3Rha2UgaW4gY29udGV4dHMgb2YgYW5vbnltaXR5LiBUaGUgaW1wb3J0YW50IGlkZWEgaGVyZSBpcyB0aGF0IGEgcGVyc29uIGJlIHVuaWRlbnRpZmlhYmxlLCB1bnJlYWNoYWJsZSwgb3IgdW50cmFjZWFibGUuIEFub255bWl0eSBpcyBzZWVuIGFzIGEgdGVjaG5pcXVlLCBvciBhIHdheSBvZiByZWFsaXppbmcsIGNlcnRhaW4gb3RoZXIgdmFsdWVzLCBzdWNoIGFzIHByaXZhY3ksIG9yIGxpYmVydHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFja2luZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDE3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1vc2FpYyAod2ViIGJyb3dzZXIpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJNb3NhaWMgaXMgdGhlIGFydCBvZiBjcmVhdGluZyBpbWFnZXMgd2l0aCBhbiBhc3NlbWJsYWdlIG9mIHNtYWxsIHBpZWNlcyBvZiBjb2xvcmVkIGdsYXNzLCBzdG9uZSwgb3Igb3RoZXIgbWF0ZXJpYWxzLiBJdCBjb21lcyBmcm9tIHRoZSBHcmVlayB3b3JkIG1vdXNlaW9uLCAncGxhY2UgaG9seSB0byB0aGUgTXVzZXMsJyBhbmQgbWF5IGhhdmUgYmVlbiBvcmlnaW5hbGx5IGRlZGljYXRlZCB0byB0aGUgTXVzZXMuIFRoaXMgYXBwbGllZCBhcnQgZm9ybSBzaGFyZXMgYSBuYW1lIHdpdGggYSBkaXNjb250aW51ZWQgZWFybHkgd2ViIGJyb3dzZXIgY3JlZGl0ZWQgd2l0aCBwb3B1bGFyaXppbmcgdGhlIFdvcmxkIFdpZGUgV2ViLiBNb3NhaWMgb3IgTkNTQSBNb3NhaWMgd2FzIG5hbWVkIGZvciBpdHMgc3VwcG9ydCBvZiBtdWx0aXBsZSBpbnRlcm5ldCBwcm90b2NvbHMgYW5kIHdhcyBhbHNvIHRoZSBmaXJzdCBicm93c2VyIHRvIGRpc3BsYXkgaW1hZ2VzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcImJyb3dzZXJcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDE4LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkt1YmVybmV0ZXNcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBHcmVlayB3b3JkIGt1YmVybmV0ZXMsIG1lYW5zIFxcXFxcXFwiaGVsbXNtYW4gb2YgYSBzaGlwLFxcXFxcXFwiIG9yLCBtb3JlIG1ldGFwaG9yaWNhbGx5LCBcXFxcXFxcInJ1bGVyXFxcXFxcXCIsIHdoaWxlIHRoZSBMYXRpbiB0cmFuc2xhdGlvbiBvZiBcXFxcXFxcImt1YmVybmV0ZXNcXFxcXFxcIiBpcyBcXFxcXFxcImd1YmVybmFyZVxcXFxcXFwiLCBtZWFuaW5nIFxcXFxcXFwidG8gcnVsZVxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm9wZW4gc291cmNlXFxcIixcXG4gICAgXFxcImNsdXN0ZXJcXFwiLFxcbiAgICBcXFwicGxhdGZvcm1cXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDE5LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlB5dGhvblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiUHl0aG9uICjOoM+NzrjPic69KSwgdGhlIGRyYWdvbiBvZiBEZWxwaGksIHdhcyBhbHdheXMgcmVwcmVzZW50ZWQgaW4gR3JlZWsgc2N1bHB0dXJlIGFuZCB2YXNlLXBhaW50aW5ncyBhcyBhIHNlcnBlbnQuIEhlIHByZXNpZGVkIGF0IHRoZSBEZWxwaGljIG9yYWNsZSwgd2hpY2ggd2FzIHRob3VnaHQgdG8gZXhpc3QgYXQgdGhlIGNlbnRlciBvZiB0aGUgRWFydGgtbW90aGVyIGN1bHQgb2YgR2FpYSwgXFxcXFxcXCJFYXJ0aFxcXFxcXFwiLiBHcmVla3MgY29uc2lkZXJlZCB0aGUgc2l0ZSB0byBiZSB0aGUgY2VudGVyIG9mIHRoZSBlYXJ0aCwgYW5kIHRoZSBjZW50ZXIgb2YgRGVscGhpIHdhcyByZXByZXNlbnRlZCBieSBhIHN0b25lOyB0aGUgb21waGFsb3MsIG9yIG5hdmVsLCB3aGljaCBQeXRob24gZ3VhcmRlZC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZyBsYW5ndWFnZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTWV0ZW9yXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgcm9vdCB3b3JkIG1ldGVvciBjb21lcyBmcm9tIHRoZSBHcmVlayBtZXRlxY1yb3MgKM68zrXPhM6tz4nPgc6/z4IpLCBtZWFuaW5nIFxcXFxcXFwiaGlnaCBpbiB0aGUgYWlyXFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiamF2YXNjcmlwdFxcXCIsXFxuICAgIFxcXCJmcmFtZXdvcmtcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDIxLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkh5cGVyICh0ZXh0LCBsaW5rLCBldGMuKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIEVuZ2xpc2ggcHJlZml4IGh5cGVyLSBjb21lcyBmcm9tIHRoZSBHcmVlayBwcmVmaXggXFxcXFxcXCLhvZHPgM61z4EtXFxcXFxcXCIgYW5kIG1lYW5zIFxcXFxcXFwib3ZlclxcXFxcXFwiIG9yIFxcXFxcXFwiYmV5b25kXFxcXFxcXCIgYW5kIHNpZ25pZmllcyB0aGUgb3ZlcmNvbWluZyBvZiB0aGUgcHJldmlvdXMgY29uc3RyYWludHMuIEl0IGhhcyBzaW1pbGFyIGxpbmd1aXN0aWMgcm9vdHMgYXMgdGhlIHByZWZpeCBcXFxcXFxcInN1cGVyLVxcXFxcXFwiIHdoaWNoIGNvbWVzIGZyb20gTGF0aW4uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaW50ZXJuZXRcXFwiLFxcbiAgICBcXFwid2ViXFxcIixcXG4gICAgXFxcIm5ldHdvcmtpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDIyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkdyYXBoaWNzXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCBncmFwaGljcyBjb21lcyBmcm9tIHRoZSBHcmVlayBncmFwaGlrb3MgKM6zz4HOsc+GzrnOus+Mz4IpLCBmb3IgXFxcXFxcXCJzb21ldGhpbmcgd3JpdHRlblxcXFxcXFwiLCBsaWtlIGFuIGF1dG9ncmFwaCwgZm9yIGV4YW1wbGUuIFRoZSBjb250ZW1wb3JhcnkgbWVhbmluZyBvZiB0aGUgd29yZCBncmFwaGljcyBpcyBcXFxcXFxcInZpc3VhbCBpbWFnZXMgb3IgZGVzaWducyBvbiBzb21lIHN1cmZhY2UsIHN1Y2ggYXMgYSB3YWxsLCBjYW52YXMsIHNjcmVlbiwgcGFwZXIsIG9yIHN0b25lIHRvIGluZm9ybSwgaWxsdXN0cmF0ZSwgb3IgZW50ZXJ0YWluXFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiR1VJXFxcIixcXG4gICAgXFxcImludGVyZmFjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUGVyaXBoZXJhbFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQSBwZXJpcGhlcmFsIGlzIGEgZGV2aWNlIHRoYXQgaXMgdXNlZCB0byBwdXQgaW5mb3JtYXRpb24gaW50byBvciBnZXQgaW5mb3JtYXRpb24gb3V0IG9mIHRoZSBjb21wdXRlci4gUGVyaXBoZXJhbCBjb21lcyBmcm9tIHRoZSBhbmNpZW50IEdyZWVrIHdvcmRzIHBlcmlwaMOpcmVpYSAoz4DOtc+BzrnPhs6tz4HOtc65zrEpLCBtZWFuaW5nIFxcXFxcXFwidGhlIGxpbmUgYXJvdW5kIHRoZSBjaXJjbGUsIGNpcmN1bWZlcmVuY2UsIHBhcnQgb2YgYSBjaXJjbGUsIGFuIGFyYywgdGhlIG91dGVyIHN1cmZhY2VcXFxcXFxcIiBhbmQgcGjDqXLFjSAoz4bOrc+Bz4kpIFxcXFxcXFwi4oCOYmVhciwgY2FycnlcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYXJkd2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRGVscGhpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJJbiBteXRocywgdGhlIHNpdGUgb2YgRGVscGhpICjOlM61zrvPhs6/zq8pIHdhcyBiZWxpZXZlZCB0byBiZSB0aGUgY2VudGVyIG9mIHRoZSBcXFxcXFxcIkVhcnRoXFxcXFxcXCIgKFxcXFxcXFwiR2FpYVxcXFxcXFwiKSwgIGdyYW5kbW90aGVyIG9mIFpldXMuIFBlb3BsZSBjb25zdWx0ZWQgdGhlIERlbHBoaWMgb3JhY2xlIFB5dGhpYSAoYWx3YXlzIGEgd29tYW4pLCBvbiBldmVyeXRoaW5nIGZyb20gaW1wb3J0YW50IG1hdHRlcnMgb2YgcHVibGljIHBvbGljeSB0byBwZXJzb25hbCBhZmZhaXJzLiBUaGUgUHl0aGlhIGFuZCBwcmllc3RzIG9mIEFwb2xsbydzIHRlbXBsZSBrZXB0IHZlcnkgZGV0YWlsZWQgcmVjb3JkcyBvZiB0aGVpciB2aXNpdG9ycywga2luZCBvZiBsaWtlIGFuIGFuY2llbnQgZGF0YWJhc2UuIERlbHBoaSB3YXMgb3JpZ2luYWxseSBvbmUgb2YgbWFueSBjb2RlbmFtZXMgb2YgYSBwcmUtcmVsZWFzZSBkZXZlbG9wbWVudCB0b29sIHByb2plY3QgYXQgQm9ybGFuZC4gQm9ybGFuZCBkZXZlbG9wZXIgRGFubnkgVGhvcnBlIHN1Z2dlc3RlZCBEZWxwaGkgYXMgYSBjb2RlbmFtZSBpbiByZWZlcmVuY2UgdG8gdGhlIE9yYWNsZSBvZiBEZWxwaGkuIE9uZSBvZiB0aGUgZGVzaWduIGdvYWxzIG9mIHRoZSBwcm9kdWN0IHdhcyB0byBwcm92aWRlIGRhdGFiYXNlIGNvbm5lY3Rpdml0eSB0byBwcm9ncmFtbWVycyBhcyBhIGtleSBmZWF0dXJlIGFuZCBhIHBvcHVsYXIgZGF0YWJhc2UgcGFja2FnZSBhdCB0aGUgdGltZSB3YXMgT3JhY2xlIGRhdGFiYXNlOyBoZW5jZSwgXFxcXFxcXCJJZiB5b3Ugd2FudCB0byB0YWxrIHRvIFt0aGVdIE9yYWNsZSwgZ28gdG8gRGVscGhpXFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmcgbGFuZ3VhZ2VcXFwiLFxcbiAgICBcXFwiZGF0YWJhc2VcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiLFxcbiAgICBcXFwiSURFXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyNSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJIb21vaWNvbmljXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJEZXJpdmVkIGZyb20gXFxcXFxcXCJob21vXFxcXFxcXCIgKM+MzrzOvykgbWVhbmluZyB0aGUgc2FtZSBhbmQgXFxcXFxcXCJpY29uXFxcXFxcXCIgKM61zrnOus+Ozr0pIG1lYW5pbmcgcmVwcmVzZW50YXRpb24uIEEgcHJvZ2FtbWluZyBsYW5ndWFnZSBpcyBzYWlkIHRvIGJlIGhvbW9pY29uaWMgd2hlbiBpdCBzaGFyZXMgdGhlIHNhbWUgcmVwcmVzZW50YXRpb24gZm9yIGNvZGUgYW5kIGRhdGEuIEEgd2VsbC1rbm93biBleGFtcGxlIGlzIExJU1AsIHdoZXJlIHRoZSBwcmltYXJ5IHByaW1pdGl2ZSBkYXRhIHN0cnVjdHVyZSBpcyB0aGUgbGlzdCBhbmQgcHJvZ3JhbXMgYXJlIHdyaXR0ZW4gYXMgbGlzdHMuIEFzIHN1Y2gsIGNvZGUgY2FuIGJlIG1hbmlwdWxhdGVkIGFzIGlmIGl0IHdhcyBkYXRhIGFuZCB2aWNlLXZlcnNhXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkNyeXB0b2dyYXBoeVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRGVyaXZlZCBmcm9tIGtyeXB0w7NzICjOus+Bz4XPgM+Ez4zPgikgZm9yIFxcXFxcXFwiaGlkZGVuLCBzZWNyZXRcXFxcXFxcIiBhbmQgZ3JhcGhlaW4gKM6zz4HOrM+GzrXOuc69KSBmb3IgXFxcXFxcXCJ3cml0aW5nXFxcXFxcXCIuIENyeXB0b2dyYXBoeSBpcyB0aGUgcHJhY3RpY2UgYW5kIHN0dWR5IG9mIHRlY2huaXF1ZXMgZm9yIHNlY3VyZSBjb21tdW5pY2F0aW9uIGluIHRoZSBwcmVzZW5jZSBvZiB0aGlyZCBwYXJ0aWVzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNlY3VyaXR5XFxcIixcXG4gICAgXFxcImNvbW11bmljYXRpb25cXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DcnlwdG9ncmFwaHlcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjcsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU3RlZ2Fub2dyYXBoeVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQ29tYmluZXMgdGhlIHdvcmRzIHN0ZWdhbm9zICjPg8+EzrXOs86xzr3PjM+CKSwgbWVhbmluZyBcXFxcXFxcImNvdmVyZWQsIGNvbmNlYWxlZCwgb3IgcHJvdGVjdGVkXFxcXFxcXCIsIGFuZCBncmFwaGVpbiAozrPPgc6sz4bOtc65zr0pIG1lYW5pbmcgXFxcXFxcXCJ3cml0aW5nXFxcXFxcXCIuIFN0ZWdhbm9ncmFwaHkgaXMgdGhlIHByYWN0aWNlIG9mIGNvbmNlYWxpbmcgYSBmaWxlLCBtZXNzYWdlLCBpbWFnZSBvciB2aWRlbyB3aXRoaW4gYW5vdGhlciBmaWxlLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNlY3VyaXR5XFxcIixcXG4gICAgXFxcImNvbW11bmljYXRpb25cXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGVnYW5vZ3JhcGh5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI4LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkVudHJvcHlcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkNvbWVzIGZyb20gdGhlIHdvcmQgdHJvcGVlICjPhM+Bzr/PgM6uKSB3aGljaCBtZWFucyBcXFxcXFxcInR1cm5pbmcgdG93YXJkXFxcXFxcXCIgb3IgXFxcXFxcXCJ0cmFuc2Zvcm1hdGlvblxcXFxcXFwiLiBFbnRyb3B5IGlzIHRoZSByYW5kb21uZXNzIGNvbGxlY3RlZCBieSBhbiBhcHBsaWNhdGlvbiBmb3IgdXNlIGluIGNyeXB0b2dyYXBoeSBvciBvdGhlciB0aGF0IHJlcXVpcmVzIHJhbmRvbSBkYXRhLiBUaGlzIHJhbmRvbW5lc3MgaXMgb2Z0ZW4gY29sbGVjdGVkIGZyb20gaGFyZHdhcmUgc291cmNlcyBzdWNoIGFzIG1vdXNlIG1vdmVtZW50cyBvciByYW5kb21uZXNzIGdlbmVyYXRvcnMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY3J5cHRvZ3JhcGh5XFxcIixcXG4gICAgXFxcInNlY3VyaXR5XFxcIixcXG4gICAgXFxcImNvbW11bmljYXRpb25cXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZW50cm9weVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyOSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNb25vbGl0aGljXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJEZXJpdmVzIGZyb20gbW9uw7NsaXRob3MgKM68zr/Ovc+MzrvOuc64zr/Pgikgd2hpY2ggYWN0dWFsbHkgbWVhbnMgXFxcXFxcXCJtYWRlIG9mIG9uZSBzdG9uZVxcXFxcXFwiLiBBIHNvZnR3YXJlIGlzIGNhbGxlZCBcXFxcXFxcIm1vbm9saXRoaWNcXFxcXFxcIiBpZiBpdCBoYXMgYSBtb25vbGl0aGljIGFyY2hpdGVjdHVyZSwgaW4gd2hpY2ggZnVuY3Rpb25hbGx5IGRpc3Rpbmd1aXNoYWJsZSBhc3BlY3RzIGFyZSBub3Qgc2VwYXJhdGUgY29tcG9uZW50cyBidXQgYXJlIGFsbCBpbnRlZ3JhdGVkLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImFyY2hpdGVjdHVyZVxcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01vbm9saXRoXFxcIixcXG4gICAgXFxcImh0dHA6Ly9kaWN0aW9uYXJ5LnJlZmVyZW5jZS5jb20vYnJvd3NlL21vbm9saXRoXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDMwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkF1dGhlbnRpY2F0aW9uXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIHRoZSB3b3JkIGF1dGhlbnRpa29zICjOsc+FzrjOtc69z4TOuc66z4zPgikgbWVhbmluZyBcXFxcXFxcInJlYWwsIGdlbnVpbmVcXFxcXFxcIiwgaXMgdGhlIGFjdCBvZiBjb25maXJtaW5nIHRoZSB0cnV0aCBvZiBhbiBhdHRyaWJ1dGUgb2YgYSBzaW5nbGUgcGllY2Ugb2YgZGF0YSwgZm9yIGV4YW1wbGUgYW4gaWRlbnRpdHksIGNsYWltZWQgdHJ1ZSBieSBhbiBlbnRpdHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiLFxcbiAgICBcXFwic2VjdXJpdHlcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BdXRoZW50aWNhdGlvblxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzMSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNb3VzZVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQ29tZXMgZnJvbSB0aGUgd29yZCBtZWVzICjOvM+Fz4IpIHdoaWNoIGlzIHRoZSBhbmNpZW50IEdyZWVrIG5hbWUgb2YgdGhlIHJvZGVudCBtb3VzZS4gSW4gdGhlIHdvcmxkIG9mIGNvbXB1dGluZyBpdCdzIHRoZSBuYW1lIG9mIGEgaGFyZHdhcmUgZGV2aWNlLCB0aGUgd2VsbC1rbm93biBzb3VyY2Ugb2YgaW5wdXQgb2YgYSBjb21wdXRlciBzeXN0ZW0uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicGVyaXBoZXJhbFxcXCIsXFxuICAgIFxcXCJoYXJkd2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHA6Ly9kaWN0aW9uYXJ5LnJlZmVyZW5jZS5jb20vYnJvd3NlL21vdXNlXFxcIixcXG4gICAgXFxcImh0dHA6Ly93d3cuZXR5bW9ubGluZS5jb20vaW5kZXgucGhwP3Rlcm09bW91c2VcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUGFyYWxsZWxpc21cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gdGhlIHdvcmQgcGFyw6FsbGVsb3MgKM+AzrHPgc6szrvOu863zrvOv8+CKSB3aGljaCBjb21iaW5lcyB0d28gd29yZHMgXFxcXFxcXCLPgM6xz4HOrFxcXFxcXFwiICsgXFxcXFxcXCLOrM67zrvOt867zr/PglxcXFxcXFwiIG1lYW5pbmcgXFxcXFxcXCJhbG9uZyBlYWNoIG90aGVyXFxcXFxcXCIuIFBhcmFsbGVsaXNtIGlzIGEgdHlwZSBvZiBjb21wdXRhdGlvbiBpbiB3aGljaCBjYWxjdWxhdGlvbnMgYXJlIGNhcnJpZWQgb3V0IHNpbXVsdGFuZW91c2x5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL3BhcmFsbGVsI0V0eW1vbG9neVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzMyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJJc29tb3JwaGlzbVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiSW4gbWF0aGVtYXRpY3MsIGFuIGlzb21vcnBoaXNtIChmcm9tIHRoZSBBbmNpZW50IEdyZWVrOiDhvLTPg86/z4IgaXNvcyBcXFxcXFxcImVxdWFsXFxcXFxcXCIsIGFuZCDOvM6/z4HPhs6uIG1vcnBoZSBcXFxcXFxcImZvcm1cXFxcXFxcIiBvciBcXFxcXFxcInNoYXBlXFxcXFxcXCIpIGlzIGEgaG9tb21vcnBoaXNtIChvciBtb3JlIGdlbmVyYWxseSBhIG1vcnBoaXNtKSB0aGF0IGFkbWl0cyBhbiBpbnZlcnNlLiBUd28gbWF0aGVtYXRpY2FsIG9iamVjdHMgYXJlIGlzb21vcnBoaWMgaWYgYW4gaXNvbW9ycGhpc20gZXhpc3RzIGJldHdlZW4gdGhlbS4gSW4gdGhlIGRldmVsb3BtZW50IHdvcmxkIHRoZXJlIGFyZSBhIGxvdCBvZiBpc29tb3JwaGljIGZyYW1ld29ya3MgbGF0ZWx5XFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDM0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkVwaGVtZXJhbFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRXBoZW1lcmFsaXR5IChmcm9tIEdyZWVrIM61z4bOrs68zrXPgc6/z4Ig4oCTIGVwaGVtZXJvcywgbGl0ZXJhbGx5IFxcXFxcXFwibGFzdGluZyBvbmx5IG9uZSBkYXlcXFxcXFxcIikgaXMgdGhlIGNvbmNlcHQgb2YgdGhpbmdzIGJlaW5nIHRyYW5zaXRvcnksIGV4aXN0aW5nIG9ubHkgYnJpZWZseS4gQW4gZXBoZW1lcmFsIHBvcnQgaXMgYSBzaG9ydC1saXZlZCB0cmFuc3BvcnQgcHJvdG9jb2wgcG9ydCBmb3IgSW50ZXJuZXQgUHJvdG9jb2wgKElQKSBjb21tdW5pY2F0aW9ucyBhbGxvY2F0ZWQgYXV0b21hdGljYWxseSBmcm9tIGEgcHJlZGVmaW5lZCByYW5nZSBieSB0aGUgSVAgc29mdHdhcmVcXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzNSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJDdWJlIChPTEFQKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiSW4gY29tcHV0ZXIgc2NpZW5jZSBhbmQgQkkgYW4gT0xBUCBDdWJlIGlzIGEgY29sbGVjdGlvbiBvZiBEaW1lbnNpb25zLCBNZWFzdXJlcyBhbmQgSGllcmFyY2hpZXMgdGhhdCBhcmUgcHJlcHJvY2Vzc2VkIGFuZCBzdG9yZWQgaW4gYSB3YXkgdGhhdCBhbGxvd3MgZGF0YSB0byBhcHBlYXIgaW5zdGFudGFuZW91c2x5IHdoZW4gYSB1c2VyIG1ha2VzIGhpcy9oZXIgYW5hbHlzaXMuIFRoZSB0ZXJtIGN1YmUgaXMgZGVyaXZlZCBmcm9tIFxcXFxcXFwia3Vib3NcXFxcXFxcIiAozrrPjc6yzr/PgikuIEluIGFuY2llbnQgZ3JlZWssIGt1Ym9zIHdhcyBhIGRpZS4gTGF0ZXIgb24gdGhlIG1lYW5pbmcgZXhwYW5kZWQgdG8gbWFueSBjdWJlLXNoYXBlZCBvYmplY3RzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImJpZyBkYXRhXFxcIixcXG4gICAgXFxcImRhdGFiYXNlc1xcXCIsXFxuICAgIFxcXCJkYXRhLXdhcmVob3VzZVxcXCIsXFxuICAgIFxcXCJidXNpbmVzcyBpbnRlbGxpZ2VuY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDM2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlNjaGVtYVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgc2NoZW1hIGNvbWVzIGZyb20gdGhlIEdyZWVrIHdvcmQgz4PPh86uzrzOsSAoc2toxJNtYSksIHdoaWNoIG1lYW5zIHNoYXBlLCBvciBtb3JlIGdlbmVyYWxseSwgcGxhbi4gQSBkYXRhYmFzZSBzY2hlbWEgZGVzY3JpYmVzIHRoZSBzdHJ1Y3R1cmUgb2YgaXRzIGRhdGFiYXNlIHN5c3RlbS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJkYXRhYmFzZXNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDM3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIihBZG9iZSkgQWNyb2JhdFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQWRvYmUgQWNyb2JhdCBpcyBhIGZhbWlseSBvZiBhcHBsaWNhdGlvbiBzb2Z0d2FyZSBhbmQgV2ViIHNlcnZpY2VzIGRldmVsb3BlZCBieSBBZG9iZSBTeXN0ZW1zIHRvIHZpZXcsIGNyZWF0ZSwgbWFuaXB1bGF0ZSwgcHJpbnQgYW5kIG1hbmFnZSBmaWxlcyBpbiBQb3J0YWJsZSBEb2N1bWVudCBGb3JtYXQgKFBERikuIEJhc2VkIG9uIGFuY2llbnQgR3JlZWsgd29yZCDhvIDOus+Bzr/Oss6sz4TOt8+C4oCOIChha3JvYsOhdMSTcywgXFxcXFxcXCJ3YWxraW5nIG9uIHRpcHRvZSwgY2xpbWJpbmcgYWxvZnRcXFxcXFxcIikuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic29mdHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDM4LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkFscGhhIC8gQmV0YVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQSBzb2Z0d2FyZSByZWxlYXNlIGxpZmUgY3ljbGUgY29udGFpbnMgdGhlIFxcXFxcXFwiYWxwaGFcXFxcXFxcIiBhbmQgXFxcXFxcXCJiZXRhXFxcXFxcXCIgc3RhZ2VzIG9mIGRldmVsb3BtZW50LiBUaGUgYWxwaGEgcGhhc2Ugb2YgdGhlIHJlbGVhc2UgbGlmZSBjeWNsZSBpcyB0aGUgZmlyc3QgcGhhc2UgdG8gYmVnaW4gc29mdHdhcmUgdGVzdGluZyAoYWxwaGEgaXMgdGhlIGZpcnN0IGxldHRlciBvZiB0aGUgR3JlZWsgYWxwaGFiZXQsIHVzZWQgYWxzbyBhcyB0aGUgbnVtYmVyIDEpLiBCZXRhLCBuYW1lZCBhZnRlciB0aGUgc2Vjb25kIGxldHRlciBvZiB0aGUgR3JlZWsgYWxwaGFiZXQsIGlzIHRoZSBzb2Z0d2FyZSBkZXZlbG9wbWVudCBwaGFzZSBmb2xsb3dpbmcgYWxwaGEuIEJldGEgcGhhc2UgZ2VuZXJhbGx5IGJlZ2lucyB3aGVuIHRoZSBzb2Z0d2FyZSBpcyBmZWF0dXJlIGNvbXBsZXRlIGJ1dCBsaWtlbHkgdG8gY29udGFpbiBhIG51bWJlciBvZiBrbm93biBvciB1bmtub3duIGJ1Z3MuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic29mdHdhcmVcXFwiLFxcbiAgICBcXFwiZGV2ZWxvcG1lbnRcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDM5LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkRpc2sgKG9yIGRpc2MpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzrTOr8+DzrrOv8+CIChkw61za29zLCBcXFxcXFxcImEgY2lyY3VsYXIgcGxhdGUgc3VpdGVkIGZvciBodXJsaW5nXFxcXFxcXCIpLCBmcm9tIM60zrnOus614b+Wzr0g4oCOKGRpa2XDrm4sIFxcXFxcXFwidG8gaHVybCwgdG8gbGF1bmNoXFxcXFxcXCIpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhcmR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0MCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQcm9ncmFtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBIGNvbXB1dGVyIHByb2dyYW0gaXMgYSBjb2xsZWN0aW9uIG9mIGluc3RydWN0aW9ucyB0aGF0IHBlcmZvcm1zIGEgc3BlY2lmaWMgdGFzayB3aGVuIGV4ZWN1dGVkIGJ5IGEgY29tcHV0ZXIuIFRoZSB3b3JkIHByb2dyYW0gY29tZXMgZnJvbSBBbmNpZW50IEdyZWVrIM+Az4HPjM6zz4HOsc68zrzOsSDigI4ocHLDs2dyYW1tYSwgXFxcXFxcXCJhIHdyaXR0ZW4gcHVibGljIG5vdGljZSwgYW4gZWRpY3RcXFxcXFxcIikuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQxLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIihHb29nbGUpIENocm9tZSAvIENocm9taXVtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJHb29nbGUgQ2hyb21lIC8gQ2hyb21pdW0gYXJlIHdlYiBicm93c2VycyBkZXZlbG9wZWQgYnkgR29vZ2xlLiBUaGVpciBuYW1lcyBhcmUgZGVyaXZlZCBmcm9tIHRoZSBHcmVlayB3b3JkIM+Hz4Hhv7bOvM6xLCBjaHLFjW1hLCBtZWFuaW5nIGNvbG9yLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcImJyb3dzZXJcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkF1dG9tYXRvblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgXFxcXFxcXCJhdXRvbWF0b25cXFxcXFxcIiBpcyB0aGUgbGF0aW5pemF0aW9uIG9mIHRoZSBHcmVlayDOseG9kM+Ez4zOvM6xz4TOv869LCBhdXRvbWF0b24sIFxcXFxcXFwiYWN0aW5nIG9mIG9uZSdzIG93biB3aWxsXFxcXFxcXCIuIEFuIGF1dG9tYXRvbiAocGx1cmFsOiBhdXRvbWF0YSBvciBhdXRvbWF0b25zKSBpcyBhIHNlbGYtb3BlcmF0aW5nIG1hY2hpbmUsIG9yIGEgbWFjaGluZSBvciBjb250cm9sIG1lY2hhbmlzbSBkZXNpZ25lZCB0byBmb2xsb3cgYXV0b21hdGljYWxseSBhIHByZWRldGVybWluZWQgc2VxdWVuY2Ugb2Ygb3BlcmF0aW9ucywgb3IgcmVzcG9uZCB0byBwcmVkZXRlcm1pbmVkIGluc3RydWN0aW9ucy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYXJkd2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQ3liZXJcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSBwcmVmaXggY3liZXItIGlzIGRlcml2ZWQgZnJvbSBcXFxcXFxcImN5YmVybmV0aWMsXFxcXFxcXCIgd2hpY2ggY29tZXMgZnJvbSB0aGUgR3JlZWsgd29yZCDOus+FzrLOtc+Bzr3Ot8+EzrnOus+Mz4IgbWVhbmluZyBza2lsbGVkIGluIHN0ZWVyaW5nIG9yIGdvdmVybmluZy4gSXQgaXMgdXNlZCBpbiB0aGUgdGVybXMgY3liZXJzcGFjZSwgY3liZXJwdW5rLCBjeWJlcmdvdGgsIGN5YmVybGF3LCBjeWJlcmNyaW1lLCBjeWJlcndhcmZhcmUsIGN5YmVydGVycm9yaXNtLCBjeWJlcnNleCwgYW5kIGN5YmVyYnVsbHlpbmcsIGFtb25nIG90aGVycy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJpbnRlcm5ldFxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU3ltZm9ueSAod2ViIGFwcGxpY2F0aW9uIGZyYW1ld29yaylcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIk9yaWdpbmF0ZXMgZnJvbSB0aGUgaG9tb3Bob25lIHdvcmQgXFxcXFxcXCJTeW1waG9ueVxcXFxcXFwiIHdoaWNoIGlzIGRlcml2ZWQgZnJvbSB0aGUgd29yZCDPg8+FzrzPhs+Jzr3Or86xIChzeW1waG9uaWEpLCBtZWFuaW5nIFxcXFxcXFwiYWdyZWVtZW50IC8gY29uY29yZCBvZiBzb3VuZFxcXFxcXFwiIGFuZCBkZXNjcmliZXMgYW4gZXh0ZW5kZWQgbXVzaWNhbCBjb21wb3NpdGlvbiBpbiB3ZXN0ZXJuIGNsYXNzaWNhbCBtdXNpYy4gU3ltZm9ueSBpcyBhIFxcXFxcXFwiZnVsbC1zdGFja1xcXFxcXFwiIFBIUCBmcmFtZXdvcmsgd2hpY2ggcHJvbW90ZXMgYmVzdCBwcmFjdGljZXMgYW5kIGNvbnNpc3RzIG9mIGEgc2V0IG9mIGRlY291cGxlZCBhbmQgcmV1c2FibGUgbGlicmFyaWVzLiBJdCBpbXBsZW1lbnRzIHRoZSBNVkMgYXJjaGl0ZWN0dXJhbCBkZXNpZ24gcGF0dGVybiBhbmQgbWFueSBvdGhlciBkZXNpZ24gcGF0dGVybnMgbGlrZSBcXFxcXFxcIkRlcGVuZGVuY3kgSW5qZWN0aW9uXFxcXFxcXCIsIFxcXFxcXFwiRGF0YSBBY2Nlc3MgT2JqZWN0XFxcXFxcXCIgYW5kIFxcXFxcXFwiT2JzZXJ2ZXJcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJmcmFtZXdvcmtzXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3ltcGhvbnkjT3JpZ2luc1xcXCIsXFxuICAgIFxcXCJodHRwOi8vc3ltZm9ueS5jb20vd2hhdC1pcy1zeW1mb255XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ1LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkF0b21pY2l0eSAoZGF0YWJhc2Ugc3lzdGVtcylcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkF0b21pY2l0eSBjb21lcyBmcm9tIHRoZSB3b3JkIM6sz4TOv868zr/PgiAoYXRvbW9zKSB3aGljaCBtZWFucyBcXFxcXFxcImluZGl2aXNpYmxlXFxcXFxcXCIuIEl0J3Mgb25lIG9mIHRoZSBBQ0lEIHByb3BlcnRpZXMgdGhhdCBndWFyYW50ZWUgdHJhbnNhY3Rpb24gcmVsaWFiaWxpdHkuIEF0b21pY2l0eSByZXF1aXJlcyB0aGF0IGVhY2ggdHJhbnNhY3Rpb24gbXVzdCBiZSBcXFxcXFxcImFsbCBvciBub3RoaW5nXFxcXFxcXCIsIHNvIHRoYXQgaWYgb25lIHBhcnQgb2YgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLCB0aGUgZW50aXJlIHRyYW5zYWN0aW9uIGZhaWxzIHRvbyBhbmQgdGhlIGRhdGFiYXNlIHN0YXRlIGlzIGxlZnQgdW5jaGFuZ2VkLiBBbHNvIHRoZSBzZXJpZXMgb2Ygb3BlcmF0aW9ucyBjYW5ub3QgYmUgZGl2aWRlZCBhcGFydCBhbmQgZXhlY3V0ZWQgcGFydGlhbGx5IGZyb20gZWFjaCBvdGhlciwgd2hpY2ggbWFrZXMgdGhlIHNlcmllcyBvZiBvcGVyYXRpb25zIFxcXFxcXFwiaW5kaXZpc2libGVcXFxcXFxcIiwgaGVuY2UgdGhlIG5hbWUuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiZGF0YWJhc2VzXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXRvbWljaXR5XyhkYXRhYmFzZV9zeXN0ZW1zKVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0NixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEZWx0YSAoZGlmZmVyZW5jaW5nKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwizpTOrc67z4TOsSAoZGVsdGEpIGlzIGEgbGV0dGVyIG9mIHRoZSBHcmVlayBhbHBoYWJldCAozpQgb3IgzrQpLiBEZWx0YSBkaWZmZXJlbmNpbmcgaXMgYSB3YXkgb2Ygc3RvcmluZyBvciB0cmFuc21pdHRpbmcgZmlsZSBkaWZmZXJlbmNlcyByYXRoZXIgdGhhbiBjb21wbGV0ZSBmaWxlcy4gRGVsdGFzLCBmb3IgZXhhbXBsZSwgYXJlIHRoZSBjaGFuZ2VzIGFmdGVyIGEgZnVsbCBiYWNrdXAuIFRoZSBkaWZmZXJlbmNlcyBhcmUgc3RvcmVkIGluIGZpbGVzIGNhbGxlZCBkZWx0YXMuIEFzIGEgYmFja3VwIGFwcHJvYWNoIHNhdmVzIGJhbmR3aWR0aCwgcmVkdWNlcyByZWR1bmRhbmN5IGFuZCBzdG9yYWdlLiBZb3UgY2FuIGFsc28gZmluZCBkZWx0YXMgb24gdGhlIGRlcGxveW1lbnQgcHJvY2VzcyBvZiBhbiBhcHBsaWNhdGlvbiB0aGF0IHJlcXVpcmVzIGRhdGFiYXNlIGNoYW5nZXMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiYmFja3VwXFxcIixcXG4gICAgXFxcImRhdGFiYXNlc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0RlbHRhX2VuY29kaW5nXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ3LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlN5bnRheFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgc3ludGF4IGNvbWVzIGZyb20gQW5jaWVudCBHcmVlazogz4PPjc69z4TOsc6+zrnPgiBcXFxcXFxcImNvb3JkaW5hdGlvblxcXFxcXFwiLCB3aGljaCBjb25zaXN0cyBvZiDPg8+Nzr0gc3luLCBcXFxcXFxcInRvZ2V0aGVyXFxcXFxcXCIsIGFuZCDPhM6szr7Ouc+CIHTDoXhpcywgXFxcXFxcXCJhbiBvcmRlcmluZ1xcXFxcXFwiLiBJbiBjb21wdXRlciBzY2llbmNlLCB0aGUgc3ludGF4IG9mIGEgY29tcHV0ZXIgbGFuZ3VhZ2UgaXMgdGhlIHNldCBvZiBydWxlcyB0aGF0IGRlZmluZXMgdGhlIGNvbWJpbmF0aW9ucyBvZiBzeW1ib2xzIHRoYXQgYXJlIGNvbnNpZGVyZWQgdG8gYmUgYSBjb3JyZWN0bHkgc3RydWN0dXJlZCBkb2N1bWVudCBvciBmcmFnbWVudCBpbiB0aGF0IGxhbmd1YWdlLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3ludGF4Xyhwcm9ncmFtbWluZ19sYW5ndWFnZXMpXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bnRheFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0OCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTZW1hbnRpY3NcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlNlbWFudGljcyAoZnJvbSBBbmNpZW50IEdyZWVrOiDPg863zrzOsc69z4TOuc66z4zPgiBzxJNtYW50aWvDs3MsIFxcXFxcXFwic2lnbmlmaWNhbnRcXFxcXFxcIikgaXMgdGhlIHN0dWR5IG9mIG1lYW5pbmcuIEluIGNvbXB1dGVyIHNjaWVuY2UsIHRoZSB0ZXJtIHNlbWFudGljcyByZWZlcnMgdG8gdGhlIG1lYW5pbmcgb2YgbGFuZ3VhZ2VzLCBhcyBvcHBvc2VkIHRvIHRoZWlyIGZvcm0gKHN5bnRheCkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TZW1hbnRpY3NcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDksXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiS2lsb1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRGVyaXZlZCBmcm9tIGFuY2llbnQgZ3JlZWsgz4fOr867zrnOv865IChjaGlsaW9pICkgXFxcXFxcXCJvbmUgdGhvdXNhbmRcXFxcXFxcIi4gSW4gY29tcHV0aW5nIGl0IHJlZmVycyB0byBtdWx0aXBseWluZyB0aGUgdW5pdCB0byB3aGljaCBpdCBpcyBhdHRhY2hlZCBieSAyXjEwICgxMDI0KS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kva2lsby1cXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvS2lsby1cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUGFyYWdvblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM+AzrHPgc6xzrrOv869zqzPiSAocGFyYWtvbsOhxY0sIFxcXFxcXFwiSSBzaGFycGVuLCB3aGV0XFxcXFxcXCIpLiBUaGUgSW50ZWwgUGFyYWdvbiBpcyBhIGRpc2NvbnRpbnVlZCBzZXJpZXMgb2YgbWFzc2l2ZWx5IHBhcmFsbGVsIHN1cGVyY29tcHV0ZXJzIHRoYXQgd2FzIHByb2R1Y2VkIGJ5IEludGVsIGluIHRoZSAxOTkwcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYXJkd2FyZVxcXCIsXFxuICAgIFxcXCJzdXBlcmNvbXB1dGVyXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL3BhcmFnb25cXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSW50ZWxfUGFyYWdvblxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1MSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJUaXRhblxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM6kzrnPhM6szr0gKFRpdMOhbiksIGEgcmFjZSBvZiBnaWFudCBnb2RzIGluIEdyZWVrIG15dGhvbG9neSB0aGF0IHByZWNlZGVkIGFuZCB3YXMgb3ZlcnRocm93biBieSB0aGUgT2x5bXBpYW4gZ29kcy4gVGl0YW4gaXMgYSBzdXBlcmNvbXB1dGVyIGJ1aWx0IGJ5IENyYXkgYXQgT2FrIFJpZGdlIE5hdGlvbmFsIExhYm9yYXRvcnkgZm9yIHVzZSBpbiBhIHZhcmlldHkgb2Ygc2NpZW5jZSBwcm9qZWN0cy4gSXQgdXNlcyBncmFwaGljcyBwcm9jZXNzaW5nIHVuaXRzIChHUFVzKSBpbiBhZGRpdGlvbiB0byBjb252ZW50aW9uYWwgY2VudHJhbCBwcm9jZXNzaW5nIHVuaXRzIChDUFVzKS4gVGl0YW4gaXMgYWxzbyB0aGUgbmFtZSBvZiB0aGUgcHJvdG90eXBlIG9mIHRoZSBBdGxhcyAyIGNvbXB1dGVyIGRldmVsb3BlZCBieSBGZXJyYW50aSBhbmQgdGhlIFVuaXZlcnNpdHkgb2YgQ2FtYnJpZGdlIE1hdGhlbWF0aWNhbCBMYWJvcmF0b3J5IGluIENhbWJyaWRnZSwgRW5nbGFuZC4gRmFjZWJvb2sgYWxzbyBnYXZlIHRoZSBuYW1lIFRpdGFuIHRvIGl0J3MgbW9kZXJuIG1lc3NhZ2luZyBzeXN0ZW0gdW52ZWlsZWQgaW4gMjAxMC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYXJkd2FyZVxcXCIsXFxuICAgIFxcXCJzdXBlcmNvbXB1dGVyc1xcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9UaXRhblxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UaXRhbl8oc3VwZXJjb21wdXRlcilcXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGl0YW5fKGNvbXB1dGVyKVxcXCIsXFxuICAgIFxcXCJodHRwOi8vd3d3LmRpZ2l0YWx0cmVuZHMuY29tL2NvbXB1dGluZy9mYWNlYm9va3MtcHJvamVjdC10aXRhbi1pcy10aGUtbW9kZXJuLW1lc3NhZ2luZy1zeXN0ZW0tYnV0LWlzLW5vdC1hbi1lLW1haWwta2lsbGVyL1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1MixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJPY3RldFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBhbmNpZW50IEdyZWVrIOG9gM66z4TPjiAob2t04bmTKS4gQW4gb2N0ZXQgaXMgYSB1bml0IG9mIGRpZ2l0YWwgaW5mb3JtYXRpb24gaW4gY29tcHV0aW5nIGFuZCB0ZWxlY29tbXVuaWNhdGlvbnMgdGhhdCBjb25zaXN0cyBvZiBlaWdodCBiaXRzLiBUaGUgdGVybSBpcyBvZnRlbiB1c2VkIHdoZW4gdGhlIHRlcm0gYnl0ZSBtaWdodCBiZSBhbWJpZ3VvdXMsIGFzIGhpc3RvcmljYWxseSB0aGVyZSB3YXMgbm8gc3RhbmRhcmQgZGVmaW5pdGlvbiBmb3IgdGhlIHNpemUgb2YgdGhlIGJ5dGUuIE9jdGV0cyBhcmUgdXNlZCBpbiB0aGUgcmVwcmVzZW50YXRpb24gb2YgSW50ZXJuZXQgUHJvdG9jb2wgY29tcHV0ZXIgbmV0d29yayBhZGRyZXNzZXMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcIm5ldHdvcmtpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvb2N0b1xcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9PY3RldF8oY29tcHV0aW5nKVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1MyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJOZXVyYWxcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOvc614b+mz4HOv869IChuZcO7cm9uLCDigJxhIHNpbmV3LCBuZXJ2ZeKAnSkgKyAtYWwuIEluIGNvbXB1dGluZyBpdCBtZWFucyBzb21ldGhpbmcgdGhhdCBpcyBtb2RlbGxlZCBvbiB0aGUgYXJyYW5nZW1lbnQgb2YgbmV1cm9ucyBpbiB0aGUgYnJhaW4uIE5ldXJhbCBuZXR3b3JrIHNvZnR3YXJlIGlzIHVzZWQgdG8gc2ltdWxhdGUsIHJlc2VhcmNoLCBkZXZlbG9wIGFuZCBhcHBseSBhcnRpZmljaWFsIG5ldXJhbCBuZXR3b3JrcywgYmlvbG9naWNhbCBuZXVyYWwgbmV0d29ya3MgYW5kLCBpbiBzb21lIGNhc2VzLCBhIHdpZGVyIGFycmF5IG9mIGFkYXB0aXZlIHN5c3RlbXMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiYXJ0aWZpY2FsIGludGVsbGlnZW5jZVxcXCIsXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIixcXG4gICAgXFxcIm1hY2hpbmUgbGVhcm5pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvbmV1cmFsXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FydGlmaWNpYWxfbmV1cmFsX25ldHdvcmtcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUHJvdG9jb2xcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQnl6YW50aW5lIEdyZWVrIM+Az4HPic+Ez4zOus6/zrvOu86/zr0gKOKAnGZpcnN0IHNoZWV0IGdsdWVkIG9udG8gYSBtYW51c2NyaXB04oCdKSwgZnJvbSDPgM+B4b+2z4TOv8+CIChwcsO0dG9zLCBcXFxcXFxcImZpcnN0XFxcXFxcXCIpICsgzrrPjM67zrvOsSAoa8OzbGxhLCBcXFxcXFxcImdsdWVcXFxcXFxcIikuIEluIHRlbGVjb21tdW5pY2F0aW9ucywgYSBjb21tdW5pY2F0aW9ucyBwcm90b2NvbCBpcyBhIHN5c3RlbSBvZiBydWxlcyB0aGF0IGFsbG93IHR3byBvciBtb3JlIGVudGl0aWVzIG9mIGEgY29tbXVuaWNhdGlvbnMgc3lzdGVtIHRvIHRyYW5zbWl0IGluZm9ybWF0aW9uIHZpYSBhbnkga2luZCBvZiB2YXJpYXRpb24gb2YgYSBwaHlzaWNhbCBxdWFudGl0eS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJuZXR3b3JraW5nXFxcIixcXG4gICAgXFxcImNvbW11bmljYXRpb25zXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL3Byb3RvY29sXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbW11bmljYXRpb25zX3Byb3RvY29sXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU1LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1ldGhvZFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM68zq3OuM6/zrTOv8+CIChtw6l0aG9kb3MsIFxcXFxcXFwicHVyc3VpdCBvZiBrbm93bGVkZ2UsIGludmVzdGlnYXRpb24sIG1vZGUgb2YgcHJvc2VjdXRpbmcgc3VjaCBpbnF1aXJ5LCBzeXN0ZW1cXFxcXFxcIikuIEluIG9iamVjdCBvcmllbnRlZCBwcm9ncmFtbWluZyBpdCBkZXNjcmliZXMgYSBzdWJyb3V0aW5lIG9yIGZ1bmN0aW9uIGJlbG9uZ2luZyB0byBhIGNsYXNzIG9yIG9iamVjdC5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9tZXRob2RcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiVG9wb2xvZ3lcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDPhM+Mz4DOv8+CICh0w7Nwb3MsIFxcXFxcXFwicGxhY2UsIGxvY2FsaXR5XFxcXFxcXCIpICsgLShvKWxvZ3kgKFxcXFxcXFwic3R1ZHkgb2ZcXFxcXFxcIiwgXFxcXFxcXCJhIGJyYW5jaCBvZiBrbm93bGVkZ2VcXFxcXFxcIikuIEluIGNvbXB1dGluZyB0b3BvbG9neSBtZWFucyB0aGUgYXJyYW5nZW1lbnQgb2Ygbm9kZXMgaW4gYSBjb21tdW5pY2F0aW9ucyBuZXR3b3JrLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm5ldHdvcmtpbmdcXFwiLFxcbiAgICBcXFwiaGFyZHdhcmVcXFwiLFxcbiAgICBcXFwiY29tbXVuaWNhdGlvbnNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvdG9wb2xvZ3lcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTcsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRGlhZ25vc3RpY3NcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gR3JlZWsgZGlhZ27FjXN0aWtvcyDigJhhYmxlIHRvIGRpc3Rpbmd1aXNo4oCZLCBmcm9tIGRpYWdpZ27FjXNrZWluIOKAmGRpc3Rpbmd1aXNo4oCZLiBBbnkgdG9vbCBvciB0ZWNobmlxdWUsIHVzdWFsbHkgYSBzcGVjaWFsIHBpZWNlIG9mIHNvZnR3YXJlLCB1c2VkIHRvIGZpbmQgdGhlIHJvb3Qgb2YgYSBoYXJkd2FyZSBvciBzb2Z0d2FyZSBwcm9ibGVtIGFuZCBhc3Npc3Qgd2l0aCBpdCdzIGZpeGluZy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9kaWFnbm9zaXNcXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2RpYWdub3N0aWMjRW5nbGlzaFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1OCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJIZXhhZGVjaW1hbFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgaGV4YWRlY2ltYWwgaXMgY29tcG9zZWQgb2YgaGV4YS0sIGRlcml2ZWQgZnJvbSB0aGUgR3JlZWsgzq3OviAoaGV4KSBmb3Igc2l4LCBhbmQgLWRlY2ltYWwsIGRlcml2ZWQgZnJvbSB0aGUgTGF0aW4gZm9yIHRlbnRoLiBJbiBtYXRoZW1hdGljcyBhbmQgY29tcHV0aW5nLCBoZXhhZGVjaW1hbCAoYWxzbyBiYXNlIDE2LCBvciBoZXgpIGlzIGEgcG9zaXRpb25hbCBudW1lcmFsIHN5c3RlbSB3aXRoIGEgcmFkaXgsIG9yIGJhc2UsIG9mIDE2LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9oZXhhLSNFbmdsaXNoXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hleGFkZWNpbWFsXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU5LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkdpZ2FcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOs86vzrPOsc+CIOKAjihnw61nYXMsIOKAnGdpYW504oCdKS4gSW4gY29tcHV0aW5nIGl0IGlzIGEgcHJlZml4IHRoYXQgbWVhbnMgbXVsdGlwbHlpbmcgdGhlIHVuaXQgdG8gd2hpY2ggaXQgaXMgYXR0YWNoZWQgYnkgMl4zMCBvciAxLDA3Myw3NDEsODI0LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9naWdhLVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2MCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNZXRhIChwcm9ncmFtbWluZywgZGF0YSwgZXRjLilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIk1ldGEgKGZyb20gdGhlIEdyZWVrIHByZXBvc2l0aW9uIGFuZCBwcmVmaXggbWV0YS0gKM68zrXPhM6sLSkgbWVhbmluZyBcXFxcXFxcImFmdGVyXFxcXFxcXCIsIG9yIFxcXFxcXFwiYmV5b25kXFxcXFxcXCIpIGlzIGEgcHJlZml4IHVzZWQgaW4gRW5nbGlzaCB0byBpbmRpY2F0ZSBhIGNvbmNlcHQgd2hpY2ggaXMgYW4gYWJzdHJhY3Rpb24gZnJvbSBhbm90aGVyIGNvbmNlcHQsIHVzZWQgdG8gY29tcGxldGUgb3IgYWRkIHRvIHRoZSBsYXR0ZXIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWV0YVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2MSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJMYW1iZGEgKGZ1bmN0aW9uKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiTGFtYmRhIGNhbGN1bHVzIChhbHNvIHdyaXR0ZW4gYXMgzrstY2FsY3VsdXMpIGlzIGEgZm9ybWFsIHN5c3RlbSBpbiBtYXRoZW1hdGljYWwgbG9naWMgZm9yIGV4cHJlc3NpbmcgY29tcHV0YXRpb24gYmFzZWQgb24gZnVuY3Rpb24gYWJzdHJhY3Rpb24gYW5kIGFwcGxpY2F0aW9uIHVzaW5nIHZhcmlhYmxlIGJpbmRpbmcgYW5kIHN1YnN0aXR1dGlvbi4gSXQgd2FzIGZpcnN0IGludHJvZHVjZWQgYnkgbWF0aGVtYXRpY2lhbiBBbG9uem8gQ2h1cmNoIGluIHRoZSAxOTMwcyBhcyBwYXJ0IG9mIGFuIGludmVzdGlnYXRpb24gaW50byB0aGUgZm91bmRhdGlvbnMgb2YgbWF0aGVtYXRpY3MuIExhbWJkYSBjYWxjdWx1cyBpcyBhIHVuaXZlcnNhbCBtb2RlbCBvZiBjb21wdXRhdGlvbiBlcXVpdmFsZW50IHRvIGEgVHVyaW5nIG1hY2hpbmUgKENodXJjaC1UdXJpbmcgdGhlc2lzLCAxOTM3KS4gSXRzIG5hbWVzYWtlLCBHcmVlayBsZXR0ZXIgbGFtYmRhICjOuyksIGlzIHVzZWQgaW4gbGFtYmRhIHRlcm1zIChhbHNvIGNhbGxlZCBsYW1iZGEgZXhwcmVzc2lvbnMpIHRvIGRlbm90ZSBiaW5kaW5nIGEgdmFyaWFibGUgaW4gYSBmdW5jdGlvbi4gTGFtYmRhIGNhbGN1bHVzIG1heSBiZSB0eXBlZCBhbmQgdW50eXBlZC4gSW4gdHlwZWQgbGFtYmRhIGNhbGN1bHVzIGZ1bmN0aW9ucyBjYW4gYmUgYXBwbGllZCBvbmx5IGlmIHRoZXkgYXJlIGNhcGFibGUgb2YgYWNjZXB0aW5nIHRoZSBnaXZlbiBpbnB1dCdzIFxcXFxcXFwidHlwZVxcXFxcXFwiIG9mIGRhdGEuIExhbWJkYSBjYWxjdWx1cyBoYXMgYXBwbGljYXRpb25zIGluIG1hbnkgZGlmZmVyZW50IGFyZWFzIGluIG1hdGhlbWF0aWNzLCBwaGlsb3NvcGh5LCBsaW5ndWlzdGljcyBhbmQgY29tcHV0ZXIgc2NpZW5jZS4gTGFtYmRhIGNhbGN1bHVzIGhhcyBwbGF5ZWQgYW4gaW1wb3J0YW50IHJvbGUgaW4gdGhlIGRldmVsb3BtZW50IG9mIHRoZSB0aGVvcnkgb2YgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzLiBGdW5jdGlvbmFsIHByb2dyYW1taW5nIGxhbmd1YWdlcyBpbXBsZW1lbnQgdGhlIGxhbWJkYSBjYWxjdWx1cy4gTGFtYmRhIGNhbGN1bHVzIGFsc28gaXMgYSBjdXJyZW50IHJlc2VhcmNoIHRvcGljIGluIENhdGVnb3J5IHRoZW9yeS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MYW1iZGFfY2FsY3VsdXNcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTWVnYVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM68zq3Os86xz4Ig4oCOKG3DqWdhcywg4oCcZ3JlYXQsIGxhcmdlLCBtaWdodHnigJ0pLiBJbiBjb21wdXRpbmcsIG1lZ2EgbWF5IHNvbWV0aW1lcyBkZW5vdGUgMSwwNDgsNTc2ICgyXjIwKSBvZiBpbmZvcm1hdGlvbiB1bml0cyAoZXhhbXBsZTogYSBtZWdhYnl0ZSwgYSBtZWdhd29yZCksIGJ1dCBkZW5vdGVzIDEwMDAwMDAgKDEwXjYpIHVuaXRzIG9mIG90aGVyIHF1YW50aXRpZXMsIGZvciBleGFtcGxlLCB0cmFuc2ZlciByYXRlczogMW1lZ2FiaXQvcyA9IDEwMDAwMDBiaXQvcy4gVGhlIHByZWZpeCBtZWJpIGhhcyBiZWVuIHN1Z2dlc3RlZCBhcyBhIHByZWZpeCBmb3IgMl4yMCB0byBhdm9pZCBhbWJpZ3VpdHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL21lZ2EtXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01lZ2EtXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDYzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkFuYWxvZ1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIOG8gM69zqzOu86/zrPOv8+CIOKAjihhbsOhbG9nb3MsIOKAnHByb3BvcnRpb25hdGXigJ0pLkEgZGV2aWNlIG9yIHN5c3RlbSBpbiB3aGljaCB0aGUgdmFsdWUgb2YgYSBkYXRhIGl0ZW0gKHN1Y2ggYXMgdGltZSkgaXMgcmVwcmVzZW50ZWQgYnkgYSBjb250aW51b3VzKGx5KSB2YXJpYWJsZSBwaHlzaWNhbCBxdWFudGl0eSB0aGF0IGNhbiBiZSBtZWFzdXJlZCAoc3VjaCBhcyB0aGUgc2hhZG93IG9mIGEgc3VuZGlhbClcXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJ0ZWNobm9sb2d5XFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2FuYWxvZ1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2NCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEeW5hbWljXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJmcm9tIEFuY2llbnQgR3JlZWsgzrTPhc69zrHOvM65zrrPjM+CIOKAjihkdW5hbWlrw7NzLCDigJxwb3dlcmZ1bOKAnSkuSW4gY29tcHV0aW5nIGl0IG1lYW5zIHNvbWV0aGluZyB0aGF0IGlzIGhhcHBlbmluZyBhdCBydW50aW1lIGluc3RlYWQgb2YgYmVpbmcgcHJlZGV0ZXJtaW5lZCBhdCBjb21waWxlIHRpbWUuRm9yIGluc3RhbmNlOiBkeW5hbWljIGFsbG9jYXRpb24sIGR5bmFtaWMgSVAgYWRkcmVzc2VzLCB0aGUgZHluYW1pYyByZXNpemluZyBvZiBhbiBhcnJheVxcXFxuXFxcXG5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZHluYW1pY1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2NSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNYWNyb1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM68zrHOus+Bz4zPgiDigI4obWFrcsOzcywg4oCcbG9uZ+KAnSkuIEEgY29tcGFyYXRpdmVseSBodW1hbi1mcmllbmRseSBhYmJyZXZpYXRpb24gb2YgY29tcGxpY2F0ZWQgaW5wdXQgdG8gYSBjb21wdXRlciBwcm9ncmFtLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9tYWNyb1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2NixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJFdGhlcm5ldFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgRXRoZXJuZXQgaXMgYSBjb21wb3VuZCB3b3JkIGZvcm1lZCBieSBqb2luaW5nICdFdGhlcicgYW5kICdOZXQnLiAgVGhlIHdvcmQgJ0V0aGVyJyBpcyBiYXNlZCBvbiBBbmNpZW50IEdyZWVrIHdvcmQgzrHhvLDOuM6uz4Eg4oCOKGFpdGjhuJdyLCDigJx1cHBlciBhaXLigJ0pLkluIGNvbXB1dGluZyBpdCByZWZlcnMgdG8gYSBzZXQgb2YgbmV0d29yayBjYWJsaW5nIGFuZCBuZXR3b3JrIGFjY2VzcyAoQ1NNQS9DRCkgcHJvdG9jb2wgc3RhbmRhcmRzIGZvciBidXMgdG9wb2xvZ3kgY29tcHV0ZXIgbmV0d29ya3MgaW52ZW50ZWQgYnkgWGVyb3ggYnV0IG5vdyBjb250cm9sbGVkIGJ5IHRoZSA4MDIuMyBzdWJjb21taXR0ZWUgb2YgdGhlIElFRUUuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya3NcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvRXRoZXJuZXRcXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2V0aGVyXFxcIlxcbiAgXVxcbn1dXFxuXCJcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGhlYWRlcj5cXG5cXHQ8ZGl2IGNsYXNzPVxcXCJjb250YWluZXJcXFwiPlxcblxcdFxcdDxoMT48JT0gdGl0bGUgJT48L2gxPlxcblxcdFxcdDx1bCBjbGFzcz1cXFwic29jaWFsLWxpbmtzXFxcIj5cXG5cXHRcXHRcXHQ8bGk+XFxuXFx0XFx0XFx0XFx0PGEgY2xhc3M9XFxcImlvbi1zb2NpYWwtdHdpdHRlclxcXCJcXG5cXHRcXHRcXHRcXHRcXHRocmVmPVxcXCJodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD9cXG5cXHRcXHRcXHRcXHRcXHR0ZXh0PURpZCUyMHlvdSUyMGtub3clMjB0aGF0JTIwJTIyPCU9IHRpdGxlICU+JTIyJTIwaXMlMjBhJTIwZ3JlZWslMjB3b3JkJTNGJTIwJmFtcDtcXG5cXHRcXHRcXHRcXHRcXHR1cmw9aHR0cCUzQSUyRiUyRmdyZWVraW50ZWNoLmNvbSUyRjwlPSBpZCAlPiUyRjwlPSB1cmxGcmllbmRseVRpdGxlICU+JmFtcDtcXG5cXHRcXHRcXHRcXHRcXHRoYXNodGFncz1ncmVla2ludGVjaFxcXCJcXG5cXHRcXHRcXHRcXHRcXHRkYXRhLWNvdW50PVxcXCJub25lXFxcIj5cXG5cXHRcXHRcXHRcXHQ8L2E+XFxuXFx0XFx0XFx0PC9saT5cXG5cXHRcXHRcXHQ8bGk+XFxuXFx0XFx0XFx0XFx0PGEgY2xhc3M9XFxcImlvbi1zb2NpYWwtZmFjZWJvb2tcXFwiXFxuXFx0XFx0XFx0XFx0XFx0aHJlZj1cXFwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwXFxuXFx0XFx0XFx0XFx0XFx0P3U9aHR0cDovL2dyZWVraW50ZWNoLmNvbS8jZW50cnkvPCU9IGlkICU+LzwlPSB1cmxGcmllbmRseVRpdGxlICU+XFxcIj5cXG5cXHRcXHRcXHRcXHQ8L2E+XFxuXFx0XFx0XFx0PC9saT5cXG5cXHRcXHQ8L3VsPlxcblxcdDwvZGl2PlxcbjwvaGVhZGVyPlxcbjxwPjwlPSBkZXNjcmlwdGlvbiAlPjwvcD5cXG48Zm9vdGVyPlxcblxcdDxwIGNsYXNzPVxcXCJ0YWdzLWNvcHlcXFwiPlRhZ3M6IDwvcD5cXG5cXHQ8dWwgY2xhc3M9XFxcInRhZ3NcXFwiPlxcblxcdFxcdDwlIF8uZWFjaChjYXRlZ29yaWVzLCBmdW5jdGlvbihjYXRlZ29yeSkgeyAlPlxcblxcdFxcdFxcdDxsaT48JT0gY2F0ZWdvcnkgJT48L2xpPlxcblxcdFxcdDwlIH0pICU+XFxuXFx0PC91bD5cXG5cXG5cXHQ8JSBpZiAoIV8uaXNFbXB0eShyZWZlcmVuY2VzKSkgeyAlPlxcblxcdFxcdDxwIGNsYXNzPVxcXCJyZWZlcmVuY2VzLWNvcHlcXFwiPlJlZmVyZW5jZXM6IDwvcD5cXG5cXHRcXHQ8dWwgY2xhc3M9XFxcInJlZmVyZW5jZXNcXFwiPlxcblxcdFxcdFxcdDwlIF8uZWFjaChyZWZlcmVuY2VzLCBmdW5jdGlvbihyZWZlcmVuY2UpIHsgJT5cXG5cXHRcXHRcXHRcXHQ8bGk+PGEgaHJlZj1cXFwiPCU9IHJlZmVyZW5jZSAlPlxcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPjwlPSByZWZlcmVuY2UgJT48L2E+PC9saT5cXG5cXHRcXHRcXHQ8JSB9KSAlPlxcblxcdFxcdDwvdWw+XFxuXFx0PCUgfSAlPlxcbjwvZm9vdGVyPlwiXG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgdW5pcXVlUmFuZG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIpIHtcblx0XHR2YXIgcmFuZCA9IHVuaXF1ZVJhbmRvbSgwLCBhcnIubGVuZ3RoIC0gMSk7XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gYXJyW3JhbmQoKV07XG5cdFx0fTtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcblx0XHR2YXIgcHJldjtcblx0XHRyZXR1cm4gZnVuY3Rpb24gcmFuZCgpIHtcblx0XHRcdHZhciBudW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkgKyBtaW4pO1xuXHRcdFx0cmV0dXJuIHByZXYgPSBudW0gPT09IHByZXYgJiYgbWluICE9PSBtYXggPyByYW5kKCkgOiBudW07XG5cdFx0fTtcblx0fTtcblxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBidW5kbGUuanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJkaXN0L1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgYzU5NWM0OGNmMWQ2NDY1OTc0ZmFcbiAqKi8iLCJyZXF1aXJlKCcuLi9zY3NzL21haW4uc2NzcycpO1xuaW1wb3J0IEJhY2tib25lIGZyb20gJ2JhY2tib25lJztcbmltcG9ydCBBcHBSb3V0ZXIgZnJvbSAnLi9yb3V0ZXIvQXBwUm91dGVyJztcblxubmV3IEFwcFJvdXRlcigpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ld1xuQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9hcHAuanNcbiAqKi8iLCIvLyAgICAgQmFja2JvbmUuanMgMS4zLjNcblxuLy8gICAgIChjKSAyMDEwLTIwMTYgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbi8vICAgICBCYWNrYm9uZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vICAgICBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG4vLyAgICAgaHR0cDovL2JhY2tib25lanMub3JnXG5cbihmdW5jdGlvbihmYWN0b3J5KSB7XG5cbiAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgKGBzZWxmYCkgaW4gdGhlIGJyb3dzZXIsIG9yIGBnbG9iYWxgIG9uIHRoZSBzZXJ2ZXIuXG4gIC8vIFdlIHVzZSBgc2VsZmAgaW5zdGVhZCBvZiBgd2luZG93YCBmb3IgYFdlYldvcmtlcmAgc3VwcG9ydC5cbiAgdmFyIHJvb3QgPSAodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYpIHx8XG4gICAgICAgICAgICAodHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWwgJiYgZ2xvYmFsKTtcblxuICAvLyBTZXQgdXAgQmFja2JvbmUgYXBwcm9wcmlhdGVseSBmb3IgdGhlIGVudmlyb25tZW50LiBTdGFydCB3aXRoIEFNRC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5JywgJ2V4cG9ydHMnXSwgZnVuY3Rpb24oXywgJCwgZXhwb3J0cykge1xuICAgICAgLy8gRXhwb3J0IGdsb2JhbCBldmVuIGluIEFNRCBjYXNlIGluIGNhc2UgdGhpcyBzY3JpcHQgaXMgbG9hZGVkIHdpdGhcbiAgICAgIC8vIG90aGVycyB0aGF0IG1heSBzdGlsbCBleHBlY3QgYSBnbG9iYWwgQmFja2JvbmUuXG4gICAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcbiAgICB9KTtcblxuICAvLyBOZXh0IGZvciBOb2RlLmpzIG9yIENvbW1vbkpTLiBqUXVlcnkgbWF5IG5vdCBiZSBuZWVkZWQgYXMgYSBtb2R1bGUuXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyksICQ7XG4gICAgdHJ5IHsgJCA9IHJlcXVpcmUoJ2pxdWVyeScpOyB9IGNhdGNoIChlKSB7fVxuICAgIGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXywgJCk7XG5cbiAgLy8gRmluYWxseSwgYXMgYSBicm93c2VyIGdsb2JhbC5cbiAgfSBlbHNlIHtcbiAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCB7fSwgcm9vdC5fLCAocm9vdC5qUXVlcnkgfHwgcm9vdC5aZXB0byB8fCByb290LmVuZGVyIHx8IHJvb3QuJCkpO1xuICB9XG5cbn0pKGZ1bmN0aW9uKHJvb3QsIEJhY2tib25lLCBfLCAkKSB7XG5cbiAgLy8gSW5pdGlhbCBTZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBCYWNrYm9uZWAgdmFyaWFibGUsIHNvIHRoYXQgaXQgY2FuIGJlXG4gIC8vIHJlc3RvcmVkIGxhdGVyIG9uLCBpZiBgbm9Db25mbGljdGAgaXMgdXNlZC5cbiAgdmFyIHByZXZpb3VzQmFja2JvbmUgPSByb290LkJhY2tib25lO1xuXG4gIC8vIENyZWF0ZSBhIGxvY2FsIHJlZmVyZW5jZSB0byBhIGNvbW1vbiBhcnJheSBtZXRob2Qgd2UnbGwgd2FudCB0byB1c2UgbGF0ZXIuXG4gIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuICAvLyBDdXJyZW50IHZlcnNpb24gb2YgdGhlIGxpYnJhcnkuIEtlZXAgaW4gc3luYyB3aXRoIGBwYWNrYWdlLmpzb25gLlxuICBCYWNrYm9uZS5WRVJTSU9OID0gJzEuMy4zJztcblxuICAvLyBGb3IgQmFja2JvbmUncyBwdXJwb3NlcywgalF1ZXJ5LCBaZXB0bywgRW5kZXIsIG9yIE15IExpYnJhcnkgKGtpZGRpbmcpIG93bnNcbiAgLy8gdGhlIGAkYCB2YXJpYWJsZS5cbiAgQmFja2JvbmUuJCA9ICQ7XG5cbiAgLy8gUnVucyBCYWNrYm9uZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlXG4gIC8vIHRvIGl0cyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGlzIEJhY2tib25lIG9iamVjdC5cbiAgQmFja2JvbmUubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuQmFja2JvbmUgPSBwcmV2aW91c0JhY2tib25lO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVIVFRQYCB0byBzdXBwb3J0IGxlZ2FjeSBIVFRQIHNlcnZlcnMuIFNldHRpbmcgdGhpcyBvcHRpb25cbiAgLy8gd2lsbCBmYWtlIGBcIlBBVENIXCJgLCBgXCJQVVRcImAgYW5kIGBcIkRFTEVURVwiYCByZXF1ZXN0cyB2aWEgdGhlIGBfbWV0aG9kYCBwYXJhbWV0ZXIgYW5kXG4gIC8vIHNldCBhIGBYLUh0dHAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gIEJhY2tib25lLmVtdWxhdGVIVFRQID0gZmFsc2U7XG5cbiAgLy8gVHVybiBvbiBgZW11bGF0ZUpTT05gIHRvIHN1cHBvcnQgbGVnYWN5IHNlcnZlcnMgdGhhdCBjYW4ndCBkZWFsIHdpdGggZGlyZWN0XG4gIC8vIGBhcHBsaWNhdGlvbi9qc29uYCByZXF1ZXN0cyAuLi4gdGhpcyB3aWxsIGVuY29kZSB0aGUgYm9keSBhc1xuICAvLyBgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkYCBpbnN0ZWFkIGFuZCB3aWxsIHNlbmQgdGhlIG1vZGVsIGluIGFcbiAgLy8gZm9ybSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuICBCYWNrYm9uZS5lbXVsYXRlSlNPTiA9IGZhbHNlO1xuXG4gIC8vIFByb3h5IEJhY2tib25lIGNsYXNzIG1ldGhvZHMgdG8gVW5kZXJzY29yZSBmdW5jdGlvbnMsIHdyYXBwaW5nIHRoZSBtb2RlbCdzXG4gIC8vIGBhdHRyaWJ1dGVzYCBvYmplY3Qgb3IgY29sbGVjdGlvbidzIGBtb2RlbHNgIGFycmF5IGJlaGluZCB0aGUgc2NlbmVzLlxuICAvL1xuICAvLyBjb2xsZWN0aW9uLmZpbHRlcihmdW5jdGlvbihtb2RlbCkgeyByZXR1cm4gbW9kZWwuZ2V0KCdhZ2UnKSA+IDEwIH0pO1xuICAvLyBjb2xsZWN0aW9uLmVhY2godGhpcy5hZGRWaWV3KTtcbiAgLy9cbiAgLy8gYEZ1bmN0aW9uI2FwcGx5YCBjYW4gYmUgc2xvdyBzbyB3ZSB1c2UgdGhlIG1ldGhvZCdzIGFyZyBjb3VudCwgaWYgd2Uga25vdyBpdC5cbiAgdmFyIGFkZE1ldGhvZCA9IGZ1bmN0aW9uKGxlbmd0aCwgbWV0aG9kLCBhdHRyaWJ1dGUpIHtcbiAgICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCBjYihpdGVyYXRlZSwgdGhpcyksIGNvbnRleHQpO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGl0ZXJhdGVlLCBkZWZhdWx0VmFsLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCBjYihpdGVyYXRlZSwgdGhpcyksIGRlZmF1bHRWYWwsIGNvbnRleHQpO1xuICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgIGFyZ3MudW5zaGlmdCh0aGlzW2F0dHJpYnV0ZV0pO1xuICAgICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG4gIHZhciBhZGRVbmRlcnNjb3JlTWV0aG9kcyA9IGZ1bmN0aW9uKENsYXNzLCBtZXRob2RzLCBhdHRyaWJ1dGUpIHtcbiAgICBfLmVhY2gobWV0aG9kcywgZnVuY3Rpb24obGVuZ3RoLCBtZXRob2QpIHtcbiAgICAgIGlmIChfW21ldGhvZF0pIENsYXNzLnByb3RvdHlwZVttZXRob2RdID0gYWRkTWV0aG9kKGxlbmd0aCwgbWV0aG9kLCBhdHRyaWJ1dGUpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFN1cHBvcnQgYGNvbGxlY3Rpb24uc29ydEJ5KCdhdHRyJylgIGFuZCBgY29sbGVjdGlvbi5maW5kV2hlcmUoe2lkOiAxfSlgLlxuICB2YXIgY2IgPSBmdW5jdGlvbihpdGVyYXRlZSwgaW5zdGFuY2UpIHtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkgcmV0dXJuIGl0ZXJhdGVlO1xuICAgIGlmIChfLmlzT2JqZWN0KGl0ZXJhdGVlKSAmJiAhaW5zdGFuY2UuX2lzTW9kZWwoaXRlcmF0ZWUpKSByZXR1cm4gbW9kZWxNYXRjaGVyKGl0ZXJhdGVlKTtcbiAgICBpZiAoXy5pc1N0cmluZyhpdGVyYXRlZSkpIHJldHVybiBmdW5jdGlvbihtb2RlbCkgeyByZXR1cm4gbW9kZWwuZ2V0KGl0ZXJhdGVlKTsgfTtcbiAgICByZXR1cm4gaXRlcmF0ZWU7XG4gIH07XG4gIHZhciBtb2RlbE1hdGNoZXIgPSBmdW5jdGlvbihhdHRycykge1xuICAgIHZhciBtYXRjaGVyID0gXy5tYXRjaGVzKGF0dHJzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgIHJldHVybiBtYXRjaGVyKG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQmFja2JvbmUuRXZlbnRzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEEgbW9kdWxlIHRoYXQgY2FuIGJlIG1peGVkIGluIHRvICphbnkgb2JqZWN0KiBpbiBvcmRlciB0byBwcm92aWRlIGl0IHdpdGhcbiAgLy8gYSBjdXN0b20gZXZlbnQgY2hhbm5lbC4gWW91IG1heSBiaW5kIGEgY2FsbGJhY2sgdG8gYW4gZXZlbnQgd2l0aCBgb25gIG9yXG4gIC8vIHJlbW92ZSB3aXRoIGBvZmZgOyBgdHJpZ2dlcmAtaW5nIGFuIGV2ZW50IGZpcmVzIGFsbCBjYWxsYmFja3MgaW5cbiAgLy8gc3VjY2Vzc2lvbi5cbiAgLy9cbiAgLy8gICAgIHZhciBvYmplY3QgPSB7fTtcbiAgLy8gICAgIF8uZXh0ZW5kKG9iamVjdCwgQmFja2JvbmUuRXZlbnRzKTtcbiAgLy8gICAgIG9iamVjdC5vbignZXhwYW5kJywgZnVuY3Rpb24oKXsgYWxlcnQoJ2V4cGFuZGVkJyk7IH0pO1xuICAvLyAgICAgb2JqZWN0LnRyaWdnZXIoJ2V4cGFuZCcpO1xuICAvL1xuICB2YXIgRXZlbnRzID0gQmFja2JvbmUuRXZlbnRzID0ge307XG5cbiAgLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5ncy5cbiAgdmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG5cbiAgLy8gSXRlcmF0ZXMgb3ZlciB0aGUgc3RhbmRhcmQgYGV2ZW50LCBjYWxsYmFja2AgKGFzIHdlbGwgYXMgdGhlIGZhbmN5IG11bHRpcGxlXG4gIC8vIHNwYWNlLXNlcGFyYXRlZCBldmVudHMgYFwiY2hhbmdlIGJsdXJcIiwgY2FsbGJhY2tgIGFuZCBqUXVlcnktc3R5bGUgZXZlbnRcbiAgLy8gbWFwcyBge2V2ZW50OiBjYWxsYmFja31gKS5cbiAgdmFyIGV2ZW50c0FwaSA9IGZ1bmN0aW9uKGl0ZXJhdGVlLCBldmVudHMsIG5hbWUsIGNhbGxiYWNrLCBvcHRzKSB7XG4gICAgdmFyIGkgPSAwLCBuYW1lcztcbiAgICBpZiAobmFtZSAmJiB0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIEhhbmRsZSBldmVudCBtYXBzLlxuICAgICAgaWYgKGNhbGxiYWNrICE9PSB2b2lkIDAgJiYgJ2NvbnRleHQnIGluIG9wdHMgJiYgb3B0cy5jb250ZXh0ID09PSB2b2lkIDApIG9wdHMuY29udGV4dCA9IGNhbGxiYWNrO1xuICAgICAgZm9yIChuYW1lcyA9IF8ua2V5cyhuYW1lKTsgaSA8IG5hbWVzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICBldmVudHMgPSBldmVudHNBcGkoaXRlcmF0ZWUsIGV2ZW50cywgbmFtZXNbaV0sIG5hbWVbbmFtZXNbaV1dLCBvcHRzKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG5hbWUgJiYgZXZlbnRTcGxpdHRlci50ZXN0KG5hbWUpKSB7XG4gICAgICAvLyBIYW5kbGUgc3BhY2Utc2VwYXJhdGVkIGV2ZW50IG5hbWVzIGJ5IGRlbGVnYXRpbmcgdGhlbSBpbmRpdmlkdWFsbHkuXG4gICAgICBmb3IgKG5hbWVzID0gbmFtZS5zcGxpdChldmVudFNwbGl0dGVyKTsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGV2ZW50cyA9IGl0ZXJhdGVlKGV2ZW50cywgbmFtZXNbaV0sIGNhbGxiYWNrLCBvcHRzKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmluYWxseSwgc3RhbmRhcmQgZXZlbnRzLlxuICAgICAgZXZlbnRzID0gaXRlcmF0ZWUoZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0cyk7XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH07XG5cbiAgLy8gQmluZCBhbiBldmVudCB0byBhIGBjYWxsYmFja2AgZnVuY3Rpb24uIFBhc3NpbmcgYFwiYWxsXCJgIHdpbGwgYmluZFxuICAvLyB0aGUgY2FsbGJhY2sgdG8gYWxsIGV2ZW50cyBmaXJlZC5cbiAgRXZlbnRzLm9uID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICByZXR1cm4gaW50ZXJuYWxPbih0aGlzLCBuYW1lLCBjYWxsYmFjaywgY29udGV4dCk7XG4gIH07XG5cbiAgLy8gR3VhcmQgdGhlIGBsaXN0ZW5pbmdgIGFyZ3VtZW50IGZyb20gdGhlIHB1YmxpYyBBUEkuXG4gIHZhciBpbnRlcm5hbE9uID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaywgY29udGV4dCwgbGlzdGVuaW5nKSB7XG4gICAgb2JqLl9ldmVudHMgPSBldmVudHNBcGkob25BcGksIG9iai5fZXZlbnRzIHx8IHt9LCBuYW1lLCBjYWxsYmFjaywge1xuICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgIGN0eDogb2JqLFxuICAgICAgbGlzdGVuaW5nOiBsaXN0ZW5pbmdcbiAgICB9KTtcblxuICAgIGlmIChsaXN0ZW5pbmcpIHtcbiAgICAgIHZhciBsaXN0ZW5lcnMgPSBvYmouX2xpc3RlbmVycyB8fCAob2JqLl9saXN0ZW5lcnMgPSB7fSk7XG4gICAgICBsaXN0ZW5lcnNbbGlzdGVuaW5nLmlkXSA9IGxpc3RlbmluZztcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIEludmVyc2lvbi1vZi1jb250cm9sIHZlcnNpb25zIG9mIGBvbmAuIFRlbGwgKnRoaXMqIG9iamVjdCB0byBsaXN0ZW4gdG9cbiAgLy8gYW4gZXZlbnQgaW4gYW5vdGhlciBvYmplY3QuLi4ga2VlcGluZyB0cmFjayBvZiB3aGF0IGl0J3MgbGlzdGVuaW5nIHRvXG4gIC8vIGZvciBlYXNpZXIgdW5iaW5kaW5nIGxhdGVyLlxuICBFdmVudHMubGlzdGVuVG8gPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiB0aGlzO1xuICAgIHZhciBpZCA9IG9iai5fbGlzdGVuSWQgfHwgKG9iai5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvIHx8ICh0aGlzLl9saXN0ZW5pbmdUbyA9IHt9KTtcbiAgICB2YXIgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRdO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgbm90IGxpc3RlbmluZyB0byBhbnkgb3RoZXIgZXZlbnRzIG9uIGBvYmpgIHlldC5cbiAgICAvLyBTZXR1cCB0aGUgbmVjZXNzYXJ5IHJlZmVyZW5jZXMgdG8gdHJhY2sgdGhlIGxpc3RlbmluZyBjYWxsYmFja3MuXG4gICAgaWYgKCFsaXN0ZW5pbmcpIHtcbiAgICAgIHZhciB0aGlzSWQgPSB0aGlzLl9saXN0ZW5JZCB8fCAodGhpcy5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuICAgICAgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRdID0ge29iajogb2JqLCBvYmpJZDogaWQsIGlkOiB0aGlzSWQsIGxpc3RlbmluZ1RvOiBsaXN0ZW5pbmdUbywgY291bnQ6IDB9O1xuICAgIH1cblxuICAgIC8vIEJpbmQgY2FsbGJhY2tzIG9uIG9iaiwgYW5kIGtlZXAgdHJhY2sgb2YgdGhlbSBvbiBsaXN0ZW5pbmcuXG4gICAgaW50ZXJuYWxPbihvYmosIG5hbWUsIGNhbGxiYWNrLCB0aGlzLCBsaXN0ZW5pbmcpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFRoZSByZWR1Y2luZyBBUEkgdGhhdCBhZGRzIGEgY2FsbGJhY2sgdG8gdGhlIGBldmVudHNgIG9iamVjdC5cbiAgdmFyIG9uQXBpID0gZnVuY3Rpb24oZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdIHx8IChldmVudHNbbmFtZV0gPSBbXSk7XG4gICAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCwgY3R4ID0gb3B0aW9ucy5jdHgsIGxpc3RlbmluZyA9IG9wdGlvbnMubGlzdGVuaW5nO1xuICAgICAgaWYgKGxpc3RlbmluZykgbGlzdGVuaW5nLmNvdW50Kys7XG5cbiAgICAgIGhhbmRsZXJzLnB1c2goe2NhbGxiYWNrOiBjYWxsYmFjaywgY29udGV4dDogY29udGV4dCwgY3R4OiBjb250ZXh0IHx8IGN0eCwgbGlzdGVuaW5nOiBsaXN0ZW5pbmd9KTtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbiAgfTtcblxuICAvLyBSZW1vdmUgb25lIG9yIG1hbnkgY2FsbGJhY2tzLiBJZiBgY29udGV4dGAgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcbiAgLy8gY2FsbGJhY2tzIHdpdGggdGhhdCBmdW5jdGlvbi4gSWYgYGNhbGxiYWNrYCBpcyBudWxsLCByZW1vdmVzIGFsbFxuICAvLyBjYWxsYmFja3MgZm9yIHRoZSBldmVudC4gSWYgYG5hbWVgIGlzIG51bGwsIHJlbW92ZXMgYWxsIGJvdW5kXG4gIC8vIGNhbGxiYWNrcyBmb3IgYWxsIGV2ZW50cy5cbiAgRXZlbnRzLm9mZiA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMpIHJldHVybiB0aGlzO1xuICAgIHRoaXMuX2V2ZW50cyA9IGV2ZW50c0FwaShvZmZBcGksIHRoaXMuX2V2ZW50cywgbmFtZSwgY2FsbGJhY2ssIHtcbiAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICBsaXN0ZW5lcnM6IHRoaXMuX2xpc3RlbmVyc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFRlbGwgdGhpcyBvYmplY3QgdG8gc3RvcCBsaXN0ZW5pbmcgdG8gZWl0aGVyIHNwZWNpZmljIGV2ZW50cyAuLi4gb3JcbiAgLy8gdG8gZXZlcnkgb2JqZWN0IGl0J3MgY3VycmVudGx5IGxpc3RlbmluZyB0by5cbiAgRXZlbnRzLnN0b3BMaXN0ZW5pbmcgPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGxpc3RlbmluZ1RvID0gdGhpcy5fbGlzdGVuaW5nVG87XG4gICAgaWYgKCFsaXN0ZW5pbmdUbykgcmV0dXJuIHRoaXM7XG5cbiAgICB2YXIgaWRzID0gb2JqID8gW29iai5fbGlzdGVuSWRdIDogXy5rZXlzKGxpc3RlbmluZ1RvKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGlzdGVuaW5nID0gbGlzdGVuaW5nVG9baWRzW2ldXTtcblxuICAgICAgLy8gSWYgbGlzdGVuaW5nIGRvZXNuJ3QgZXhpc3QsIHRoaXMgb2JqZWN0IGlzIG5vdCBjdXJyZW50bHlcbiAgICAgIC8vIGxpc3RlbmluZyB0byBvYmouIEJyZWFrIG91dCBlYXJseS5cbiAgICAgIGlmICghbGlzdGVuaW5nKSBicmVhaztcblxuICAgICAgbGlzdGVuaW5nLm9iai5vZmYobmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFRoZSByZWR1Y2luZyBBUEkgdGhhdCByZW1vdmVzIGEgY2FsbGJhY2sgZnJvbSB0aGUgYGV2ZW50c2Agb2JqZWN0LlxuICB2YXIgb2ZmQXBpID0gZnVuY3Rpb24oZXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmICghZXZlbnRzKSByZXR1cm47XG5cbiAgICB2YXIgaSA9IDAsIGxpc3RlbmluZztcbiAgICB2YXIgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCwgbGlzdGVuZXJzID0gb3B0aW9ucy5saXN0ZW5lcnM7XG5cbiAgICAvLyBEZWxldGUgYWxsIGV2ZW50cyBsaXN0ZW5lcnMgYW5kIFwiZHJvcFwiIGV2ZW50cy5cbiAgICBpZiAoIW5hbWUgJiYgIWNhbGxiYWNrICYmICFjb250ZXh0KSB7XG4gICAgICB2YXIgaWRzID0gXy5rZXlzKGxpc3RlbmVycyk7XG4gICAgICBmb3IgKDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0ZW5pbmcgPSBsaXN0ZW5lcnNbaWRzW2ldXTtcbiAgICAgICAgZGVsZXRlIGxpc3RlbmVyc1tsaXN0ZW5pbmcuaWRdO1xuICAgICAgICBkZWxldGUgbGlzdGVuaW5nLmxpc3RlbmluZ1RvW2xpc3RlbmluZy5vYmpJZF07XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5hbWVzID0gbmFtZSA/IFtuYW1lXSA6IF8ua2V5cyhldmVudHMpO1xuICAgIGZvciAoOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcblxuICAgICAgLy8gQmFpbCBvdXQgaWYgdGhlcmUgYXJlIG5vIGV2ZW50cyBzdG9yZWQuXG4gICAgICBpZiAoIWhhbmRsZXJzKSBicmVhaztcblxuICAgICAgLy8gUmVwbGFjZSBldmVudHMgaWYgdGhlcmUgYXJlIGFueSByZW1haW5pbmcuICBPdGhlcndpc2UsIGNsZWFuIHVwLlxuICAgICAgdmFyIHJlbWFpbmluZyA9IFtdO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBoYW5kbGVycy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2pdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sgIT09IGhhbmRsZXIuY2FsbGJhY2sgJiZcbiAgICAgICAgICAgIGNhbGxiYWNrICE9PSBoYW5kbGVyLmNhbGxiYWNrLl9jYWxsYmFjayB8fFxuICAgICAgICAgICAgICBjb250ZXh0ICYmIGNvbnRleHQgIT09IGhhbmRsZXIuY29udGV4dFxuICAgICAgICApIHtcbiAgICAgICAgICByZW1haW5pbmcucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0ZW5pbmcgPSBoYW5kbGVyLmxpc3RlbmluZztcbiAgICAgICAgICBpZiAobGlzdGVuaW5nICYmIC0tbGlzdGVuaW5nLmNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBkZWxldGUgbGlzdGVuZXJzW2xpc3RlbmluZy5pZF07XG4gICAgICAgICAgICBkZWxldGUgbGlzdGVuaW5nLmxpc3RlbmluZ1RvW2xpc3RlbmluZy5vYmpJZF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0YWlsIGV2ZW50IGlmIHRoZSBsaXN0IGhhcyBhbnkgZXZlbnRzLiAgT3RoZXJ3aXNlLCBjbGVhbiB1cC5cbiAgICAgIGlmIChyZW1haW5pbmcubGVuZ3RoKSB7XG4gICAgICAgIGV2ZW50c1tuYW1lXSA9IHJlbWFpbmluZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSBldmVudHNbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBldmVudHM7XG4gIH07XG5cbiAgLy8gQmluZCBhbiBldmVudCB0byBvbmx5IGJlIHRyaWdnZXJlZCBhIHNpbmdsZSB0aW1lLiBBZnRlciB0aGUgZmlyc3QgdGltZVxuICAvLyB0aGUgY2FsbGJhY2sgaXMgaW52b2tlZCwgaXRzIGxpc3RlbmVyIHdpbGwgYmUgcmVtb3ZlZC4gSWYgbXVsdGlwbGUgZXZlbnRzXG4gIC8vIGFyZSBwYXNzZWQgaW4gdXNpbmcgdGhlIHNwYWNlLXNlcGFyYXRlZCBzeW50YXgsIHRoZSBoYW5kbGVyIHdpbGwgZmlyZVxuICAvLyBvbmNlIGZvciBlYWNoIGV2ZW50LCBub3Qgb25jZSBmb3IgYSBjb21iaW5hdGlvbiBvZiBhbGwgZXZlbnRzLlxuICBFdmVudHMub25jZSA9IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgLy8gTWFwIHRoZSBldmVudCBpbnRvIGEgYHtldmVudDogb25jZX1gIG9iamVjdC5cbiAgICB2YXIgZXZlbnRzID0gZXZlbnRzQXBpKG9uY2VNYXAsIHt9LCBuYW1lLCBjYWxsYmFjaywgXy5iaW5kKHRoaXMub2ZmLCB0aGlzKSk7XG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyAmJiBjb250ZXh0ID09IG51bGwpIGNhbGxiYWNrID0gdm9pZCAwO1xuICAgIHJldHVybiB0aGlzLm9uKGV2ZW50cywgY2FsbGJhY2ssIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIEludmVyc2lvbi1vZi1jb250cm9sIHZlcnNpb25zIG9mIGBvbmNlYC5cbiAgRXZlbnRzLmxpc3RlblRvT25jZSA9IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICAvLyBNYXAgdGhlIGV2ZW50IGludG8gYSBge2V2ZW50OiBvbmNlfWAgb2JqZWN0LlxuICAgIHZhciBldmVudHMgPSBldmVudHNBcGkob25jZU1hcCwge30sIG5hbWUsIGNhbGxiYWNrLCBfLmJpbmQodGhpcy5zdG9wTGlzdGVuaW5nLCB0aGlzLCBvYmopKTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5UbyhvYmosIGV2ZW50cyk7XG4gIH07XG5cbiAgLy8gUmVkdWNlcyB0aGUgZXZlbnQgY2FsbGJhY2tzIGludG8gYSBtYXAgb2YgYHtldmVudDogb25jZVdyYXBwZXJ9YC5cbiAgLy8gYG9mZmVyYCB1bmJpbmRzIHRoZSBgb25jZVdyYXBwZXJgIGFmdGVyIGl0IGhhcyBiZWVuIGNhbGxlZC5cbiAgdmFyIG9uY2VNYXAgPSBmdW5jdGlvbihtYXAsIG5hbWUsIGNhbGxiYWNrLCBvZmZlcikge1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgdmFyIG9uY2UgPSBtYXBbbmFtZV0gPSBfLm9uY2UoZnVuY3Rpb24oKSB7XG4gICAgICAgIG9mZmVyKG5hbWUsIG9uY2UpO1xuICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgICBvbmNlLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gbWFwO1xuICB9O1xuXG4gIC8vIFRyaWdnZXIgb25lIG9yIG1hbnkgZXZlbnRzLCBmaXJpbmcgYWxsIGJvdW5kIGNhbGxiYWNrcy4gQ2FsbGJhY2tzIGFyZVxuICAvLyBwYXNzZWQgdGhlIHNhbWUgYXJndW1lbnRzIGFzIGB0cmlnZ2VyYCBpcywgYXBhcnQgZnJvbSB0aGUgZXZlbnQgbmFtZVxuICAvLyAodW5sZXNzIHlvdSdyZSBsaXN0ZW5pbmcgb24gYFwiYWxsXCJgLCB3aGljaCB3aWxsIGNhdXNlIHlvdXIgY2FsbGJhY2sgdG9cbiAgLy8gcmVjZWl2ZSB0aGUgdHJ1ZSBuYW1lIG9mIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQpLlxuICBFdmVudHMudHJpZ2dlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7XG5cbiAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgoMCwgYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcblxuICAgIGV2ZW50c0FwaSh0cmlnZ2VyQXBpLCB0aGlzLl9ldmVudHMsIG5hbWUsIHZvaWQgMCwgYXJncyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gSGFuZGxlcyB0cmlnZ2VyaW5nIHRoZSBhcHByb3ByaWF0ZSBldmVudCBjYWxsYmFja3MuXG4gIHZhciB0cmlnZ2VyQXBpID0gZnVuY3Rpb24ob2JqRXZlbnRzLCBuYW1lLCBjYWxsYmFjaywgYXJncykge1xuICAgIGlmIChvYmpFdmVudHMpIHtcbiAgICAgIHZhciBldmVudHMgPSBvYmpFdmVudHNbbmFtZV07XG4gICAgICB2YXIgYWxsRXZlbnRzID0gb2JqRXZlbnRzLmFsbDtcbiAgICAgIGlmIChldmVudHMgJiYgYWxsRXZlbnRzKSBhbGxFdmVudHMgPSBhbGxFdmVudHMuc2xpY2UoKTtcbiAgICAgIGlmIChldmVudHMpIHRyaWdnZXJFdmVudHMoZXZlbnRzLCBhcmdzKTtcbiAgICAgIGlmIChhbGxFdmVudHMpIHRyaWdnZXJFdmVudHMoYWxsRXZlbnRzLCBbbmFtZV0uY29uY2F0KGFyZ3MpKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iakV2ZW50cztcbiAgfTtcblxuICAvLyBBIGRpZmZpY3VsdC10by1iZWxpZXZlLCBidXQgb3B0aW1pemVkIGludGVybmFsIGRpc3BhdGNoIGZ1bmN0aW9uIGZvclxuICAvLyB0cmlnZ2VyaW5nIGV2ZW50cy4gVHJpZXMgdG8ga2VlcCB0aGUgdXN1YWwgY2FzZXMgc3BlZWR5IChtb3N0IGludGVybmFsXG4gIC8vIEJhY2tib25lIGV2ZW50cyBoYXZlIDMgYXJndW1lbnRzKS5cbiAgdmFyIHRyaWdnZXJFdmVudHMgPSBmdW5jdGlvbihldmVudHMsIGFyZ3MpIHtcbiAgICB2YXIgZXYsIGkgPSAtMSwgbCA9IGV2ZW50cy5sZW5ndGgsIGExID0gYXJnc1swXSwgYTIgPSBhcmdzWzFdLCBhMyA9IGFyZ3NbMl07XG4gICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCk7IHJldHVybjtcbiAgICAgIGNhc2UgMTogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExKTsgcmV0dXJuO1xuICAgICAgY2FzZSAyOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyKTsgcmV0dXJuO1xuICAgICAgY2FzZSAzOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyLCBhMyk7IHJldHVybjtcbiAgICAgIGRlZmF1bHQ6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmFwcGx5KGV2LmN0eCwgYXJncyk7IHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWxpYXNlcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIEV2ZW50cy5iaW5kICAgPSBFdmVudHMub247XG4gIEV2ZW50cy51bmJpbmQgPSBFdmVudHMub2ZmO1xuXG4gIC8vIEFsbG93IHRoZSBgQmFja2JvbmVgIG9iamVjdCB0byBzZXJ2ZSBhcyBhIGdsb2JhbCBldmVudCBidXMsIGZvciBmb2xrcyB3aG9cbiAgLy8gd2FudCBnbG9iYWwgXCJwdWJzdWJcIiBpbiBhIGNvbnZlbmllbnQgcGxhY2UuXG4gIF8uZXh0ZW5kKEJhY2tib25lLCBFdmVudHMpO1xuXG4gIC8vIEJhY2tib25lLk1vZGVsXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgKipNb2RlbHMqKiBhcmUgdGhlIGJhc2ljIGRhdGEgb2JqZWN0IGluIHRoZSBmcmFtZXdvcmsgLS1cbiAgLy8gZnJlcXVlbnRseSByZXByZXNlbnRpbmcgYSByb3cgaW4gYSB0YWJsZSBpbiBhIGRhdGFiYXNlIG9uIHlvdXIgc2VydmVyLlxuICAvLyBBIGRpc2NyZXRlIGNodW5rIG9mIGRhdGEgYW5kIGEgYnVuY2ggb2YgdXNlZnVsLCByZWxhdGVkIG1ldGhvZHMgZm9yXG4gIC8vIHBlcmZvcm1pbmcgY29tcHV0YXRpb25zIGFuZCB0cmFuc2Zvcm1hdGlvbnMgb24gdGhhdCBkYXRhLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlcy4gQSBjbGllbnQgaWQgKGBjaWRgKVxuICAvLyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBhbmQgYXNzaWduZWQgZm9yIHlvdS5cbiAgdmFyIE1vZGVsID0gQmFja2JvbmUuTW9kZWwgPSBmdW5jdGlvbihhdHRyaWJ1dGVzLCBvcHRpb25zKSB7XG4gICAgdmFyIGF0dHJzID0gYXR0cmlidXRlcyB8fCB7fTtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCh0aGlzLmNpZFByZWZpeCk7XG4gICAgdGhpcy5hdHRyaWJ1dGVzID0ge307XG4gICAgaWYgKG9wdGlvbnMuY29sbGVjdGlvbikgdGhpcy5jb2xsZWN0aW9uID0gb3B0aW9ucy5jb2xsZWN0aW9uO1xuICAgIGlmIChvcHRpb25zLnBhcnNlKSBhdHRycyA9IHRoaXMucGFyc2UoYXR0cnMsIG9wdGlvbnMpIHx8IHt9O1xuICAgIHZhciBkZWZhdWx0cyA9IF8ucmVzdWx0KHRoaXMsICdkZWZhdWx0cycpO1xuICAgIGF0dHJzID0gXy5kZWZhdWx0cyhfLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGF0dHJzKSwgZGVmYXVsdHMpO1xuICAgIHRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKTtcbiAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBBdHRhY2ggYWxsIGluaGVyaXRhYmxlIG1ldGhvZHMgdG8gdGhlIE1vZGVsIHByb3RvdHlwZS5cbiAgXy5leHRlbmQoTW9kZWwucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEEgaGFzaCBvZiBhdHRyaWJ1dGVzIHdob3NlIGN1cnJlbnQgYW5kIHByZXZpb3VzIHZhbHVlIGRpZmZlci5cbiAgICBjaGFuZ2VkOiBudWxsLFxuXG4gICAgLy8gVGhlIHZhbHVlIHJldHVybmVkIGR1cmluZyB0aGUgbGFzdCBmYWlsZWQgdmFsaWRhdGlvbi5cbiAgICB2YWxpZGF0aW9uRXJyb3I6IG51bGwsXG5cbiAgICAvLyBUaGUgZGVmYXVsdCBuYW1lIGZvciB0aGUgSlNPTiBgaWRgIGF0dHJpYnV0ZSBpcyBgXCJpZFwiYC4gTW9uZ29EQiBhbmRcbiAgICAvLyBDb3VjaERCIHVzZXJzIG1heSB3YW50IHRvIHNldCB0aGlzIHRvIGBcIl9pZFwiYC5cbiAgICBpZEF0dHJpYnV0ZTogJ2lkJyxcblxuICAgIC8vIFRoZSBwcmVmaXggaXMgdXNlZCB0byBjcmVhdGUgdGhlIGNsaWVudCBpZCB3aGljaCBpcyB1c2VkIHRvIGlkZW50aWZ5IG1vZGVscyBsb2NhbGx5LlxuICAgIC8vIFlvdSBtYXkgd2FudCB0byBvdmVycmlkZSB0aGlzIGlmIHlvdSdyZSBleHBlcmllbmNpbmcgbmFtZSBjbGFzaGVzIHdpdGggbW9kZWwgaWRzLlxuICAgIGNpZFByZWZpeDogJ2MnLFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgbW9kZWwncyBgYXR0cmlidXRlc2Agb2JqZWN0LlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQgLS0gYnV0IG92ZXJyaWRlIHRoaXMgaWYgeW91IG5lZWRcbiAgICAvLyBjdXN0b20gc3luY2luZyBzZW1hbnRpY3MgZm9yICp0aGlzKiBwYXJ0aWN1bGFyIG1vZGVsLlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZ2V0OiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIEhUTUwtZXNjYXBlZCB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZXNjYXBlOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gXy5lc2NhcGUodGhpcy5nZXQoYXR0cikpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRlIGNvbnRhaW5zIGEgdmFsdWUgdGhhdCBpcyBub3QgbnVsbFxuICAgIC8vIG9yIHVuZGVmaW5lZC5cbiAgICBoYXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldChhdHRyKSAhPSBudWxsO1xuICAgIH0sXG5cbiAgICAvLyBTcGVjaWFsLWNhc2VkIHByb3h5IHRvIHVuZGVyc2NvcmUncyBgXy5tYXRjaGVzYCBtZXRob2QuXG4gICAgbWF0Y2hlczogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiAhIV8uaXRlcmF0ZWUoYXR0cnMsIHRoaXMpKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcyBvbiB0aGUgb2JqZWN0LCBmaXJpbmcgYFwiY2hhbmdlXCJgLiBUaGlzIGlzXG4gICAgLy8gdGhlIGNvcmUgcHJpbWl0aXZlIG9wZXJhdGlvbiBvZiBhIG1vZGVsLCB1cGRhdGluZyB0aGUgZGF0YSBhbmQgbm90aWZ5aW5nXG4gICAgLy8gYW55b25lIHdobyBuZWVkcyB0byBrbm93IGFib3V0IHRoZSBjaGFuZ2UgaW4gc3RhdGUuIFRoZSBoZWFydCBvZiB0aGUgYmVhc3QuXG4gICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuICAgICAgaWYgKGtleSA9PSBudWxsKSByZXR1cm4gdGhpcztcblxuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIHZhciBhdHRycztcbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgICAvLyBSdW4gdmFsaWRhdGlvbi5cbiAgICAgIGlmICghdGhpcy5fdmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIEV4dHJhY3QgYXR0cmlidXRlcyBhbmQgb3B0aW9ucy5cbiAgICAgIHZhciB1bnNldCAgICAgID0gb3B0aW9ucy51bnNldDtcbiAgICAgIHZhciBzaWxlbnQgICAgID0gb3B0aW9ucy5zaWxlbnQ7XG4gICAgICB2YXIgY2hhbmdlcyAgICA9IFtdO1xuICAgICAgdmFyIGNoYW5naW5nICAgPSB0aGlzLl9jaGFuZ2luZztcbiAgICAgIHRoaXMuX2NoYW5naW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKCFjaGFuZ2luZykge1xuICAgICAgICB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgPSBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCA9IHt9O1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgIHZhciBjaGFuZ2VkID0gdGhpcy5jaGFuZ2VkO1xuICAgICAgdmFyIHByZXYgICAgPSB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7XG5cbiAgICAgIC8vIEZvciBlYWNoIGBzZXRgIGF0dHJpYnV0ZSwgdXBkYXRlIG9yIGRlbGV0ZSB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIGZvciAodmFyIGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgdmFsID0gYXR0cnNbYXR0cl07XG4gICAgICAgIGlmICghXy5pc0VxdWFsKGN1cnJlbnRbYXR0cl0sIHZhbCkpIGNoYW5nZXMucHVzaChhdHRyKTtcbiAgICAgICAgaWYgKCFfLmlzRXF1YWwocHJldlthdHRyXSwgdmFsKSkge1xuICAgICAgICAgIGNoYW5nZWRbYXR0cl0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGNoYW5nZWRbYXR0cl07XG4gICAgICAgIH1cbiAgICAgICAgdW5zZXQgPyBkZWxldGUgY3VycmVudFthdHRyXSA6IGN1cnJlbnRbYXR0cl0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgYGlkYC5cbiAgICAgIGlmICh0aGlzLmlkQXR0cmlidXRlIGluIGF0dHJzKSB0aGlzLmlkID0gdGhpcy5nZXQodGhpcy5pZEF0dHJpYnV0ZSk7XG5cbiAgICAgIC8vIFRyaWdnZXIgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZSBjaGFuZ2VzLlxuICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMubGVuZ3RoKSB0aGlzLl9wZW5kaW5nID0gb3B0aW9ucztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2U6JyArIGNoYW5nZXNbaV0sIHRoaXMsIGN1cnJlbnRbY2hhbmdlc1tpXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFlvdSBtaWdodCBiZSB3b25kZXJpbmcgd2h5IHRoZXJlJ3MgYSBgd2hpbGVgIGxvb3AgaGVyZS4gQ2hhbmdlcyBjYW5cbiAgICAgIC8vIGJlIHJlY3Vyc2l2ZWx5IG5lc3RlZCB3aXRoaW4gYFwiY2hhbmdlXCJgIGV2ZW50cy5cbiAgICAgIGlmIChjaGFuZ2luZykgcmV0dXJuIHRoaXM7XG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICB3aGlsZSAodGhpcy5fcGVuZGluZykge1xuICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLl9wZW5kaW5nO1xuICAgICAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9wZW5kaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9jaGFuZ2luZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSB0aGUgbW9kZWwsIGZpcmluZyBgXCJjaGFuZ2VcImAuIGB1bnNldGAgaXMgYSBub29wXG4gICAgLy8gaWYgdGhlIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0LlxuICAgIHVuc2V0OiBmdW5jdGlvbihhdHRyLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoYXR0ciwgdm9pZCAwLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBDbGVhciBhbGwgYXR0cmlidXRlcyBvbiB0aGUgbW9kZWwsIGZpcmluZyBgXCJjaGFuZ2VcImAuXG4gICAgY2xlYXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRycyA9IHt9O1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuYXR0cmlidXRlcykgYXR0cnNba2V5XSA9IHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRycywgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt1bnNldDogdHJ1ZX0pKTtcbiAgICB9LFxuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBtb2RlbCBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCBgXCJjaGFuZ2VcImAgZXZlbnQuXG4gICAgLy8gSWYgeW91IHNwZWNpZnkgYW4gYXR0cmlidXRlIG5hbWUsIGRldGVybWluZSBpZiB0aGF0IGF0dHJpYnV0ZSBoYXMgY2hhbmdlZC5cbiAgICBoYXNDaGFuZ2VkOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICBpZiAoYXR0ciA9PSBudWxsKSByZXR1cm4gIV8uaXNFbXB0eSh0aGlzLmNoYW5nZWQpO1xuICAgICAgcmV0dXJuIF8uaGFzKHRoaXMuY2hhbmdlZCwgYXR0cik7XG4gICAgfSxcblxuICAgIC8vIFJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIGF0dHJpYnV0ZXMgdGhhdCBoYXZlIGNoYW5nZWQsIG9yXG4gICAgLy8gZmFsc2UgaWYgdGhlcmUgYXJlIG5vIGNoYW5nZWQgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBkZXRlcm1pbmluZyB3aGF0XG4gICAgLy8gcGFydHMgb2YgYSB2aWV3IG5lZWQgdG8gYmUgdXBkYXRlZCBhbmQvb3Igd2hhdCBhdHRyaWJ1dGVzIG5lZWQgdG8gYmVcbiAgICAvLyBwZXJzaXN0ZWQgdG8gdGhlIHNlcnZlci4gVW5zZXQgYXR0cmlidXRlcyB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuXG4gICAgLy8gWW91IGNhbiBhbHNvIHBhc3MgYW4gYXR0cmlidXRlcyBvYmplY3QgdG8gZGlmZiBhZ2FpbnN0IHRoZSBtb2RlbCxcbiAgICAvLyBkZXRlcm1pbmluZyBpZiB0aGVyZSAqd291bGQgYmUqIGEgY2hhbmdlLlxuICAgIGNoYW5nZWRBdHRyaWJ1dGVzOiBmdW5jdGlvbihkaWZmKSB7XG4gICAgICBpZiAoIWRpZmYpIHJldHVybiB0aGlzLmhhc0NoYW5nZWQoKSA/IF8uY2xvbmUodGhpcy5jaGFuZ2VkKSA6IGZhbHNlO1xuICAgICAgdmFyIG9sZCA9IHRoaXMuX2NoYW5naW5nID8gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzIDogdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgdmFyIGNoYW5nZWQgPSB7fTtcbiAgICAgIGZvciAodmFyIGF0dHIgaW4gZGlmZikge1xuICAgICAgICB2YXIgdmFsID0gZGlmZlthdHRyXTtcbiAgICAgICAgaWYgKF8uaXNFcXVhbChvbGRbYXR0cl0sIHZhbCkpIGNvbnRpbnVlO1xuICAgICAgICBjaGFuZ2VkW2F0dHJdID0gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF8uc2l6ZShjaGFuZ2VkKSA/IGNoYW5nZWQgOiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBwcmV2aW91cyB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUsIHJlY29yZGVkIGF0IHRoZSB0aW1lIHRoZSBsYXN0XG4gICAgLy8gYFwiY2hhbmdlXCJgIGV2ZW50IHdhcyBmaXJlZC5cbiAgICBwcmV2aW91czogZnVuY3Rpb24oYXR0cikge1xuICAgICAgaWYgKGF0dHIgPT0gbnVsbCB8fCAhdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbYXR0cl07XG4gICAgfSxcblxuICAgIC8vIEdldCBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG1vZGVsIGF0IHRoZSB0aW1lIG9mIHRoZSBwcmV2aW91c1xuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICBwcmV2aW91c0F0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIG1vZGVsIGZyb20gdGhlIHNlcnZlciwgbWVyZ2luZyB0aGUgcmVzcG9uc2Ugd2l0aCB0aGUgbW9kZWwnc1xuICAgIC8vIGxvY2FsIGF0dHJpYnV0ZXMuIEFueSBjaGFuZ2VkIGF0dHJpYnV0ZXMgd2lsbCB0cmlnZ2VyIGEgXCJjaGFuZ2VcIiBldmVudC5cbiAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHtwYXJzZTogdHJ1ZX0sIG9wdGlvbnMpO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICB2YXIgc2VydmVyQXR0cnMgPSBvcHRpb25zLnBhcnNlID8gbW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucykgOiByZXNwO1xuICAgICAgICBpZiAoIW1vZGVsLnNldChzZXJ2ZXJBdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcywgYW5kIHN5bmMgdGhlIG1vZGVsIHRvIHRoZSBzZXJ2ZXIuXG4gICAgLy8gSWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGF0dHJpYnV0ZXMgaGFzaCB0aGF0IGRpZmZlcnMsIHRoZSBtb2RlbCdzXG4gICAgLy8gc3RhdGUgd2lsbCBiZSBgc2V0YCBhZ2Fpbi5cbiAgICBzYXZlOiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIHZhciBhdHRycztcbiAgICAgIGlmIChrZXkgPT0gbnVsbCB8fCB0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gXy5leHRlbmQoe3ZhbGlkYXRlOiB0cnVlLCBwYXJzZTogdHJ1ZX0sIG9wdGlvbnMpO1xuICAgICAgdmFyIHdhaXQgPSBvcHRpb25zLndhaXQ7XG5cbiAgICAgIC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIGFuZCBhdHRyaWJ1dGVzIGV4aXN0LCBzYXZlIGFjdHMgYXNcbiAgICAgIC8vIGBzZXQoYXR0cikuc2F2ZShudWxsLCBvcHRzKWAgd2l0aCB2YWxpZGF0aW9uLiBPdGhlcndpc2UsIGNoZWNrIGlmXG4gICAgICAvLyB0aGUgbW9kZWwgd2lsbCBiZSB2YWxpZCB3aGVuIHRoZSBhdHRyaWJ1dGVzLCBpZiBhbnksIGFyZSBzZXQuXG4gICAgICBpZiAoYXR0cnMgJiYgIXdhaXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNldChhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIEFmdGVyIGEgc3VjY2Vzc2Z1bCBzZXJ2ZXItc2lkZSBzYXZlLCB0aGUgY2xpZW50IGlzIChvcHRpb25hbGx5KVxuICAgICAgLy8gdXBkYXRlZCB3aXRoIHRoZSBzZXJ2ZXItc2lkZSBzdGF0ZS5cbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAvLyBFbnN1cmUgYXR0cmlidXRlcyBhcmUgcmVzdG9yZWQgZHVyaW5nIHN5bmNocm9ub3VzIHNhdmVzLlxuICAgICAgICBtb2RlbC5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHNlcnZlckF0dHJzID0gb3B0aW9ucy5wYXJzZSA/IG1vZGVsLnBhcnNlKHJlc3AsIG9wdGlvbnMpIDogcmVzcDtcbiAgICAgICAgaWYgKHdhaXQpIHNlcnZlckF0dHJzID0gXy5leHRlbmQoe30sIGF0dHJzLCBzZXJ2ZXJBdHRycyk7XG4gICAgICAgIGlmIChzZXJ2ZXJBdHRycyAmJiAhbW9kZWwuc2V0KHNlcnZlckF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblxuICAgICAgLy8gU2V0IHRlbXBvcmFyeSBhdHRyaWJ1dGVzIGlmIGB7d2FpdDogdHJ1ZX1gIHRvIHByb3Blcmx5IGZpbmQgbmV3IGlkcy5cbiAgICAgIGlmIChhdHRycyAmJiB3YWl0KSB0aGlzLmF0dHJpYnV0ZXMgPSBfLmV4dGVuZCh7fSwgYXR0cmlidXRlcywgYXR0cnMpO1xuXG4gICAgICB2YXIgbWV0aG9kID0gdGhpcy5pc05ldygpID8gJ2NyZWF0ZScgOiAob3B0aW9ucy5wYXRjaCA/ICdwYXRjaCcgOiAndXBkYXRlJyk7XG4gICAgICBpZiAobWV0aG9kID09PSAncGF0Y2gnICYmICFvcHRpb25zLmF0dHJzKSBvcHRpb25zLmF0dHJzID0gYXR0cnM7XG4gICAgICB2YXIgeGhyID0gdGhpcy5zeW5jKG1ldGhvZCwgdGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFJlc3RvcmUgYXR0cmlidXRlcy5cbiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG5cbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlc3Ryb3kgdGhpcyBtb2RlbCBvbiB0aGUgc2VydmVyIGlmIGl0IHdhcyBhbHJlYWR5IHBlcnNpc3RlZC5cbiAgICAvLyBPcHRpbWlzdGljYWxseSByZW1vdmVzIHRoZSBtb2RlbCBmcm9tIGl0cyBjb2xsZWN0aW9uLCBpZiBpdCBoYXMgb25lLlxuICAgIC8vIElmIGB3YWl0OiB0cnVlYCBpcyBwYXNzZWQsIHdhaXRzIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQgYmVmb3JlIHJlbW92YWwuXG4gICAgZGVzdHJveTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICB2YXIgd2FpdCA9IG9wdGlvbnMud2FpdDtcblxuICAgICAgdmFyIGRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbW9kZWwuc3RvcExpc3RlbmluZygpO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdkZXN0cm95JywgbW9kZWwsIG1vZGVsLmNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICBpZiAod2FpdCkgZGVzdHJveSgpO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIW1vZGVsLmlzTmV3KCkpIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgeGhyID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5pc05ldygpKSB7XG4gICAgICAgIF8uZGVmZXIob3B0aW9ucy5zdWNjZXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgeGhyID0gdGhpcy5zeW5jKCdkZWxldGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmICghd2FpdCkgZGVzdHJveSgpO1xuICAgICAgcmV0dXJuIHhocjtcbiAgICB9LFxuXG4gICAgLy8gRGVmYXVsdCBVUkwgZm9yIHRoZSBtb2RlbCdzIHJlcHJlc2VudGF0aW9uIG9uIHRoZSBzZXJ2ZXIgLS0gaWYgeW91J3JlXG4gICAgLy8gdXNpbmcgQmFja2JvbmUncyByZXN0ZnVsIG1ldGhvZHMsIG92ZXJyaWRlIHRoaXMgdG8gY2hhbmdlIHRoZSBlbmRwb2ludFxuICAgIC8vIHRoYXQgd2lsbCBiZSBjYWxsZWQuXG4gICAgdXJsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiYXNlID1cbiAgICAgICAgXy5yZXN1bHQodGhpcywgJ3VybFJvb3QnKSB8fFxuICAgICAgICBfLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sICd1cmwnKSB8fFxuICAgICAgICB1cmxFcnJvcigpO1xuICAgICAgaWYgKHRoaXMuaXNOZXcoKSkgcmV0dXJuIGJhc2U7XG4gICAgICB2YXIgaWQgPSB0aGlzLmdldCh0aGlzLmlkQXR0cmlidXRlKTtcbiAgICAgIHJldHVybiBiYXNlLnJlcGxhY2UoL1teXFwvXSQvLCAnJCYvJykgKyBlbmNvZGVVUklDb21wb25lbnQoaWQpO1xuICAgIH0sXG5cbiAgICAvLyAqKnBhcnNlKiogY29udmVydHMgYSByZXNwb25zZSBpbnRvIHRoZSBoYXNoIG9mIGF0dHJpYnV0ZXMgdG8gYmUgYHNldGAgb25cbiAgICAvLyB0aGUgbW9kZWwuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyB0aGUgcmVzcG9uc2UgYWxvbmcuXG4gICAgcGFyc2U6IGZ1bmN0aW9uKHJlc3AsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCBpZGVudGljYWwgYXR0cmlidXRlcyB0byB0aGlzIG9uZS5cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gQSBtb2RlbCBpcyBuZXcgaWYgaXQgaGFzIG5ldmVyIGJlZW4gc2F2ZWQgdG8gdGhlIHNlcnZlciwgYW5kIGxhY2tzIGFuIGlkLlxuICAgIGlzTmV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5oYXModGhpcy5pZEF0dHJpYnV0ZSk7XG4gICAgfSxcblxuICAgIC8vIENoZWNrIGlmIHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgaW4gYSB2YWxpZCBzdGF0ZS5cbiAgICBpc1ZhbGlkOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30sIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dmFsaWRhdGU6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluc3QgdGhlIG5leHQgY29tcGxldGUgc2V0IG9mIG1vZGVsIGF0dHJpYnV0ZXMsXG4gICAgLy8gcmV0dXJuaW5nIGB0cnVlYCBpZiBhbGwgaXMgd2VsbC4gT3RoZXJ3aXNlLCBmaXJlIGFuIGBcImludmFsaWRcImAgZXZlbnQuXG4gICAgX3ZhbGlkYXRlOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKCFvcHRpb25zLnZhbGlkYXRlIHx8ICF0aGlzLnZhbGlkYXRlKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGF0dHJzID0gXy5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcywgYXR0cnMpO1xuICAgICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSB8fCBudWxsO1xuICAgICAgaWYgKCFlcnJvcikgcmV0dXJuIHRydWU7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBlcnJvciwgXy5leHRlbmQob3B0aW9ucywge3ZhbGlkYXRpb25FcnJvcjogZXJyb3J9KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBNb2RlbCwgbWFwcGVkIHRvIHRoZVxuICAvLyBudW1iZXIgb2YgYXJndW1lbnRzIHRoZXkgdGFrZS5cbiAgdmFyIG1vZGVsTWV0aG9kcyA9IHtrZXlzOiAxLCB2YWx1ZXM6IDEsIHBhaXJzOiAxLCBpbnZlcnQ6IDEsIHBpY2s6IDAsXG4gICAgICBvbWl0OiAwLCBjaGFpbjogMSwgaXNFbXB0eTogMX07XG5cbiAgLy8gTWl4IGluIGVhY2ggVW5kZXJzY29yZSBtZXRob2QgYXMgYSBwcm94eSB0byBgTW9kZWwjYXR0cmlidXRlc2AuXG4gIGFkZFVuZGVyc2NvcmVNZXRob2RzKE1vZGVsLCBtb2RlbE1ldGhvZHMsICdhdHRyaWJ1dGVzJyk7XG5cbiAgLy8gQmFja2JvbmUuQ29sbGVjdGlvblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSWYgbW9kZWxzIHRlbmQgdG8gcmVwcmVzZW50IGEgc2luZ2xlIHJvdyBvZiBkYXRhLCBhIEJhY2tib25lIENvbGxlY3Rpb24gaXNcbiAgLy8gbW9yZSBhbmFsb2dvdXMgdG8gYSB0YWJsZSBmdWxsIG9mIGRhdGEgLi4uIG9yIGEgc21hbGwgc2xpY2Ugb3IgcGFnZSBvZiB0aGF0XG4gIC8vIHRhYmxlLCBvciBhIGNvbGxlY3Rpb24gb2Ygcm93cyB0aGF0IGJlbG9uZyB0b2dldGhlciBmb3IgYSBwYXJ0aWN1bGFyIHJlYXNvblxuICAvLyAtLSBhbGwgb2YgdGhlIG1lc3NhZ2VzIGluIHRoaXMgcGFydGljdWxhciBmb2xkZXIsIGFsbCBvZiB0aGUgZG9jdW1lbnRzXG4gIC8vIGJlbG9uZ2luZyB0byB0aGlzIHBhcnRpY3VsYXIgYXV0aG9yLCBhbmQgc28gb24uIENvbGxlY3Rpb25zIG1haW50YWluXG4gIC8vIGluZGV4ZXMgb2YgdGhlaXIgbW9kZWxzLCBib3RoIGluIG9yZGVyLCBhbmQgZm9yIGxvb2t1cCBieSBgaWRgLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyAqKkNvbGxlY3Rpb24qKiwgcGVyaGFwcyB0byBjb250YWluIGEgc3BlY2lmaWMgdHlwZSBvZiBgbW9kZWxgLlxuICAvLyBJZiBhIGBjb21wYXJhdG9yYCBpcyBzcGVjaWZpZWQsIHRoZSBDb2xsZWN0aW9uIHdpbGwgbWFpbnRhaW5cbiAgLy8gaXRzIG1vZGVscyBpbiBzb3J0IG9yZGVyLCBhcyB0aGV5J3JlIGFkZGVkIGFuZCByZW1vdmVkLlxuICB2YXIgQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24gPSBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLm1vZGVsKSB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgICBpZiAob3B0aW9ucy5jb21wYXJhdG9yICE9PSB2b2lkIDApIHRoaXMuY29tcGFyYXRvciA9IG9wdGlvbnMuY29tcGFyYXRvcjtcbiAgICB0aGlzLl9yZXNldCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChtb2RlbHMpIHRoaXMucmVzZXQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuICB9O1xuXG4gIC8vIERlZmF1bHQgb3B0aW9ucyBmb3IgYENvbGxlY3Rpb24jc2V0YC5cbiAgdmFyIHNldE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IHRydWUsIG1lcmdlOiB0cnVlfTtcbiAgdmFyIGFkZE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IGZhbHNlfTtcblxuICAvLyBTcGxpY2VzIGBpbnNlcnRgIGludG8gYGFycmF5YCBhdCBpbmRleCBgYXRgLlxuICB2YXIgc3BsaWNlID0gZnVuY3Rpb24oYXJyYXksIGluc2VydCwgYXQpIHtcbiAgICBhdCA9IE1hdGgubWluKE1hdGgubWF4KGF0LCAwKSwgYXJyYXkubGVuZ3RoKTtcbiAgICB2YXIgdGFpbCA9IEFycmF5KGFycmF5Lmxlbmd0aCAtIGF0KTtcbiAgICB2YXIgbGVuZ3RoID0gaW5zZXJ0Lmxlbmd0aDtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFpbC5sZW5ndGg7IGkrKykgdGFpbFtpXSA9IGFycmF5W2kgKyBhdF07XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSBhcnJheVtpICsgYXRdID0gaW5zZXJ0W2ldO1xuICAgIGZvciAoaSA9IDA7IGkgPCB0YWlsLmxlbmd0aDsgaSsrKSBhcnJheVtpICsgbGVuZ3RoICsgYXRdID0gdGFpbFtpXTtcbiAgfTtcblxuICAvLyBEZWZpbmUgdGhlIENvbGxlY3Rpb24ncyBpbmhlcml0YWJsZSBtZXRob2RzLlxuICBfLmV4dGVuZChDb2xsZWN0aW9uLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBmb3IgYSBjb2xsZWN0aW9uIGlzIGp1c3QgYSAqKkJhY2tib25lLk1vZGVsKiouXG4gICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbiBtb3N0IGNhc2VzLlxuICAgIG1vZGVsOiBNb2RlbCxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgQ29sbGVjdGlvbiBpcyBhbiBhcnJheSBvZiB0aGVcbiAgICAvLyBtb2RlbHMnIGF0dHJpYnV0ZXMuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obW9kZWwpIHsgcmV0dXJuIG1vZGVsLnRvSlNPTihvcHRpb25zKTsgfSk7XG4gICAgfSxcblxuICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0LlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwsIG9yIGxpc3Qgb2YgbW9kZWxzIHRvIHRoZSBzZXQuIGBtb2RlbHNgIG1heSBiZSBCYWNrYm9uZVxuICAgIC8vIE1vZGVscyBvciByYXcgSmF2YVNjcmlwdCBvYmplY3RzIHRvIGJlIGNvbnZlcnRlZCB0byBNb2RlbHMsIG9yIGFueVxuICAgIC8vIGNvbWJpbmF0aW9uIG9mIHRoZSB0d28uXG4gICAgYWRkOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChtb2RlbHMsIF8uZXh0ZW5kKHttZXJnZTogZmFsc2V9LCBvcHRpb25zLCBhZGRPcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsLCBvciBhIGxpc3Qgb2YgbW9kZWxzIGZyb20gdGhlIHNldC5cbiAgICByZW1vdmU6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBvcHRpb25zKTtcbiAgICAgIHZhciBzaW5ndWxhciA9ICFfLmlzQXJyYXkobW9kZWxzKTtcbiAgICAgIG1vZGVscyA9IHNpbmd1bGFyID8gW21vZGVsc10gOiBtb2RlbHMuc2xpY2UoKTtcbiAgICAgIHZhciByZW1vdmVkID0gdGhpcy5fcmVtb3ZlTW9kZWxzKG1vZGVscywgb3B0aW9ucyk7XG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50ICYmIHJlbW92ZWQubGVuZ3RoKSB7XG4gICAgICAgIG9wdGlvbnMuY2hhbmdlcyA9IHthZGRlZDogW10sIG1lcmdlZDogW10sIHJlbW92ZWQ6IHJlbW92ZWR9O1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3VwZGF0ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNpbmd1bGFyID8gcmVtb3ZlZFswXSA6IHJlbW92ZWQ7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSBhIGNvbGxlY3Rpb24gYnkgYHNldGAtaW5nIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCBhZGRpbmcgbmV3IG9uZXMsXG4gICAgLy8gcmVtb3ZpbmcgbW9kZWxzIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LCBhbmQgbWVyZ2luZyBtb2RlbHMgdGhhdFxuICAgIC8vIGFscmVhZHkgZXhpc3QgaW4gdGhlIGNvbGxlY3Rpb24sIGFzIG5lY2Vzc2FyeS4gU2ltaWxhciB0byAqKk1vZGVsI3NldCoqLFxuICAgIC8vIHRoZSBjb3JlIG9wZXJhdGlvbiBmb3IgdXBkYXRpbmcgdGhlIGRhdGEgY29udGFpbmVkIGJ5IHRoZSBjb2xsZWN0aW9uLlxuICAgIHNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBpZiAobW9kZWxzID09IG51bGwpIHJldHVybjtcblxuICAgICAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBzZXRPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlICYmICF0aGlzLl9pc01vZGVsKG1vZGVscykpIHtcbiAgICAgICAgbW9kZWxzID0gdGhpcy5wYXJzZShtb2RlbHMsIG9wdGlvbnMpIHx8IFtdO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogbW9kZWxzLnNsaWNlKCk7XG5cbiAgICAgIHZhciBhdCA9IG9wdGlvbnMuYXQ7XG4gICAgICBpZiAoYXQgIT0gbnVsbCkgYXQgPSArYXQ7XG4gICAgICBpZiAoYXQgPiB0aGlzLmxlbmd0aCkgYXQgPSB0aGlzLmxlbmd0aDtcbiAgICAgIGlmIChhdCA8IDApIGF0ICs9IHRoaXMubGVuZ3RoICsgMTtcblxuICAgICAgdmFyIHNldCA9IFtdO1xuICAgICAgdmFyIHRvQWRkID0gW107XG4gICAgICB2YXIgdG9NZXJnZSA9IFtdO1xuICAgICAgdmFyIHRvUmVtb3ZlID0gW107XG4gICAgICB2YXIgbW9kZWxNYXAgPSB7fTtcblxuICAgICAgdmFyIGFkZCA9IG9wdGlvbnMuYWRkO1xuICAgICAgdmFyIG1lcmdlID0gb3B0aW9ucy5tZXJnZTtcbiAgICAgIHZhciByZW1vdmUgPSBvcHRpb25zLnJlbW92ZTtcblxuICAgICAgdmFyIHNvcnQgPSBmYWxzZTtcbiAgICAgIHZhciBzb3J0YWJsZSA9IHRoaXMuY29tcGFyYXRvciAmJiBhdCA9PSBudWxsICYmIG9wdGlvbnMuc29ydCAhPT0gZmFsc2U7XG4gICAgICB2YXIgc29ydEF0dHIgPSBfLmlzU3RyaW5nKHRoaXMuY29tcGFyYXRvcikgPyB0aGlzLmNvbXBhcmF0b3IgOiBudWxsO1xuXG4gICAgICAvLyBUdXJuIGJhcmUgb2JqZWN0cyBpbnRvIG1vZGVsIHJlZmVyZW5jZXMsIGFuZCBwcmV2ZW50IGludmFsaWQgbW9kZWxzXG4gICAgICAvLyBmcm9tIGJlaW5nIGFkZGVkLlxuICAgICAgdmFyIG1vZGVsLCBpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IG1vZGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXTtcblxuICAgICAgICAvLyBJZiBhIGR1cGxpY2F0ZSBpcyBmb3VuZCwgcHJldmVudCBpdCBmcm9tIGJlaW5nIGFkZGVkIGFuZFxuICAgICAgICAvLyBvcHRpb25hbGx5IG1lcmdlIGl0IGludG8gdGhlIGV4aXN0aW5nIG1vZGVsLlxuICAgICAgICB2YXIgZXhpc3RpbmcgPSB0aGlzLmdldChtb2RlbCk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgIGlmIChtZXJnZSAmJiBtb2RlbCAhPT0gZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHZhciBhdHRycyA9IHRoaXMuX2lzTW9kZWwobW9kZWwpID8gbW9kZWwuYXR0cmlidXRlcyA6IG1vZGVsO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gZXhpc3RpbmcucGFyc2UoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgZXhpc3Rpbmcuc2V0KGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRvTWVyZ2UucHVzaChleGlzdGluZyk7XG4gICAgICAgICAgICBpZiAoc29ydGFibGUgJiYgIXNvcnQpIHNvcnQgPSBleGlzdGluZy5oYXNDaGFuZ2VkKHNvcnRBdHRyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFtb2RlbE1hcFtleGlzdGluZy5jaWRdKSB7XG4gICAgICAgICAgICBtb2RlbE1hcFtleGlzdGluZy5jaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIHNldC5wdXNoKGV4aXN0aW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kZWxzW2ldID0gZXhpc3Rpbmc7XG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIG5ldywgdmFsaWQgbW9kZWwsIHB1c2ggaXQgdG8gdGhlIGB0b0FkZGAgbGlzdC5cbiAgICAgICAgfSBlbHNlIGlmIChhZGQpIHtcbiAgICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuX3ByZXBhcmVNb2RlbChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgICAgICB0b0FkZC5wdXNoKG1vZGVsKTtcbiAgICAgICAgICAgIHRoaXMuX2FkZFJlZmVyZW5jZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBtb2RlbE1hcFttb2RlbC5jaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIHNldC5wdXNoKG1vZGVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHN0YWxlIG1vZGVscy5cbiAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtb2RlbCA9IHRoaXMubW9kZWxzW2ldO1xuICAgICAgICAgIGlmICghbW9kZWxNYXBbbW9kZWwuY2lkXSkgdG9SZW1vdmUucHVzaChtb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCkgdGhpcy5fcmVtb3ZlTW9kZWxzKHRvUmVtb3ZlLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VlIGlmIHNvcnRpbmcgaXMgbmVlZGVkLCB1cGRhdGUgYGxlbmd0aGAgYW5kIHNwbGljZSBpbiBuZXcgbW9kZWxzLlxuICAgICAgdmFyIG9yZGVyQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgdmFyIHJlcGxhY2UgPSAhc29ydGFibGUgJiYgYWRkICYmIHJlbW92ZTtcbiAgICAgIGlmIChzZXQubGVuZ3RoICYmIHJlcGxhY2UpIHtcbiAgICAgICAgb3JkZXJDaGFuZ2VkID0gdGhpcy5sZW5ndGggIT09IHNldC5sZW5ndGggfHwgXy5zb21lKHRoaXMubW9kZWxzLCBmdW5jdGlvbihtLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBtICE9PSBzZXRbaW5kZXhdO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tb2RlbHMubGVuZ3RoID0gMDtcbiAgICAgICAgc3BsaWNlKHRoaXMubW9kZWxzLCBzZXQsIDApO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubW9kZWxzLmxlbmd0aDtcbiAgICAgIH0gZWxzZSBpZiAodG9BZGQubGVuZ3RoKSB7XG4gICAgICAgIGlmIChzb3J0YWJsZSkgc29ydCA9IHRydWU7XG4gICAgICAgIHNwbGljZSh0aGlzLm1vZGVscywgdG9BZGQsIGF0ID09IG51bGwgPyB0aGlzLmxlbmd0aCA6IGF0KTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLm1vZGVscy5sZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIC8vIFNpbGVudGx5IHNvcnQgdGhlIGNvbGxlY3Rpb24gaWYgYXBwcm9wcmlhdGUuXG4gICAgICBpZiAoc29ydCkgdGhpcy5zb3J0KHtzaWxlbnQ6IHRydWV9KTtcblxuICAgICAgLy8gVW5sZXNzIHNpbGVuY2VkLCBpdCdzIHRpbWUgdG8gZmlyZSBhbGwgYXBwcm9wcmlhdGUgYWRkL3NvcnQvdXBkYXRlIGV2ZW50cy5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRvQWRkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGF0ICE9IG51bGwpIG9wdGlvbnMuaW5kZXggPSBhdCArIGk7XG4gICAgICAgICAgbW9kZWwgPSB0b0FkZFtpXTtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdhZGQnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnQgfHwgb3JkZXJDaGFuZ2VkKSB0aGlzLnRyaWdnZXIoJ3NvcnQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHRvQWRkLmxlbmd0aCB8fCB0b1JlbW92ZS5sZW5ndGggfHwgdG9NZXJnZS5sZW5ndGgpIHtcbiAgICAgICAgICBvcHRpb25zLmNoYW5nZXMgPSB7XG4gICAgICAgICAgICBhZGRlZDogdG9BZGQsXG4gICAgICAgICAgICByZW1vdmVkOiB0b1JlbW92ZSxcbiAgICAgICAgICAgIG1lcmdlZDogdG9NZXJnZVxuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIGFkZGVkIChvciBtZXJnZWQpIG1vZGVsIChvciBtb2RlbHMpLlxuICAgICAgcmV0dXJuIHNpbmd1bGFyID8gbW9kZWxzWzBdIDogbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBXaGVuIHlvdSBoYXZlIG1vcmUgaXRlbXMgdGhhbiB5b3Ugd2FudCB0byBhZGQgb3IgcmVtb3ZlIGluZGl2aWR1YWxseSxcbiAgICAvLyB5b3UgY2FuIHJlc2V0IHRoZSBlbnRpcmUgc2V0IHdpdGggYSBuZXcgbGlzdCBvZiBtb2RlbHMsIHdpdGhvdXQgZmlyaW5nXG4gICAgLy8gYW55IGdyYW51bGFyIGBhZGRgIG9yIGByZW1vdmVgIGV2ZW50cy4gRmlyZXMgYHJlc2V0YCB3aGVuIGZpbmlzaGVkLlxuICAgIC8vIFVzZWZ1bCBmb3IgYnVsayBvcGVyYXRpb25zIGFuZCBvcHRpbWl6YXRpb25zLlxuICAgIHJlc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1vZGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UodGhpcy5tb2RlbHNbaV0sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5wcmV2aW91c01vZGVscyA9IHRoaXMubW9kZWxzO1xuICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgIG1vZGVscyA9IHRoaXMuYWRkKG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcigncmVzZXQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbHM7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgcHVzaDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZChtb2RlbCwgXy5leHRlbmQoe2F0OiB0aGlzLmxlbmd0aH0sIG9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHBvcDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICB1bnNoaWZ0OiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuYWRkKG1vZGVsLCBfLmV4dGVuZCh7YXQ6IDB9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBzaGlmdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCgwKTtcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIFNsaWNlIG91dCBhIHN1Yi1hcnJheSBvZiBtb2RlbHMgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICBzbGljZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc2xpY2UuYXBwbHkodGhpcy5tb2RlbHMsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIC8vIEdldCBhIG1vZGVsIGZyb20gdGhlIHNldCBieSBpZCwgY2lkLCBtb2RlbCBvYmplY3Qgd2l0aCBpZCBvciBjaWRcbiAgICAvLyBwcm9wZXJ0aWVzLCBvciBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0aGF0IGlzIHRyYW5zZm9ybWVkIHRocm91Z2ggbW9kZWxJZC5cbiAgICBnZXQ6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuX2J5SWRbb2JqXSB8fFxuICAgICAgICB0aGlzLl9ieUlkW3RoaXMubW9kZWxJZChvYmouYXR0cmlidXRlcyB8fCBvYmopXSB8fFxuICAgICAgICBvYmouY2lkICYmIHRoaXMuX2J5SWRbb2JqLmNpZF07XG4gICAgfSxcblxuICAgIC8vIFJldHVybnMgYHRydWVgIGlmIHRoZSBtb2RlbCBpcyBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICBoYXM6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0KG9iaikgIT0gbnVsbDtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBtb2RlbCBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgYXQ6IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICBpZiAoaW5kZXggPCAwKSBpbmRleCArPSB0aGlzLmxlbmd0aDtcbiAgICAgIHJldHVybiB0aGlzLm1vZGVsc1tpbmRleF07XG4gICAgfSxcblxuICAgIC8vIFJldHVybiBtb2RlbHMgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlcyBvZlxuICAgIC8vIGBmaWx0ZXJgLlxuICAgIHdoZXJlOiBmdW5jdGlvbihhdHRycywgZmlyc3QpIHtcbiAgICAgIHJldHVybiB0aGlzW2ZpcnN0ID8gJ2ZpbmQnIDogJ2ZpbHRlciddKGF0dHJzKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIHRoZSBmaXJzdCBtb2RlbCB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzXG4gICAgLy8gb2YgYGZpbmRgLlxuICAgIGZpbmRXaGVyZTogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiB0aGlzLndoZXJlKGF0dHJzLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gRm9yY2UgdGhlIGNvbGxlY3Rpb24gdG8gcmUtc29ydCBpdHNlbGYuIFlvdSBkb24ndCBuZWVkIHRvIGNhbGwgdGhpcyB1bmRlclxuICAgIC8vIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBhcyB0aGUgc2V0IHdpbGwgbWFpbnRhaW4gc29ydCBvcmRlciBhcyBlYWNoIGl0ZW1cbiAgICAvLyBpcyBhZGRlZC5cbiAgICBzb3J0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvcjtcbiAgICAgIGlmICghY29tcGFyYXRvcikgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvcicpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuICAgICAgdmFyIGxlbmd0aCA9IGNvbXBhcmF0b3IubGVuZ3RoO1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihjb21wYXJhdG9yKSkgY29tcGFyYXRvciA9IF8uYmluZChjb21wYXJhdG9yLCB0aGlzKTtcblxuICAgICAgLy8gUnVuIHNvcnQgYmFzZWQgb24gdHlwZSBvZiBgY29tcGFyYXRvcmAuXG4gICAgICBpZiAobGVuZ3RoID09PSAxIHx8IF8uaXNTdHJpbmcoY29tcGFyYXRvcikpIHtcbiAgICAgICAgdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeShjb21wYXJhdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW9kZWxzLnNvcnQoY29tcGFyYXRvcik7XG4gICAgICB9XG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3NvcnQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBQbHVjayBhbiBhdHRyaWJ1dGUgZnJvbSBlYWNoIG1vZGVsIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgIHBsdWNrOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoYXR0ciArICcnKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIGRlZmF1bHQgc2V0IG9mIG1vZGVscyBmb3IgdGhpcyBjb2xsZWN0aW9uLCByZXNldHRpbmcgdGhlXG4gICAgLy8gY29sbGVjdGlvbiB3aGVuIHRoZXkgYXJyaXZlLiBJZiBgcmVzZXQ6IHRydWVgIGlzIHBhc3NlZCwgdGhlIHJlc3BvbnNlXG4gICAgLy8gZGF0YSB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoIHRoZSBgcmVzZXRgIG1ldGhvZCBpbnN0ZWFkIG9mIGBzZXRgLlxuICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gXy5leHRlbmQoe3BhcnNlOiB0cnVlfSwgb3B0aW9ucyk7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9wdGlvbnMucmVzZXQgPyAncmVzZXQnIDogJ3NldCc7XG4gICAgICAgIGNvbGxlY3Rpb25bbWV0aG9kXShyZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIGNvbGxlY3Rpb24sIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBjb2xsZWN0aW9uLnRyaWdnZXIoJ3N5bmMnLCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBhIG1vZGVsIGluIHRoaXMgY29sbGVjdGlvbi4gQWRkIHRoZSBtb2RlbCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIGltbWVkaWF0ZWx5LCB1bmxlc3MgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgaW4gd2hpY2ggY2FzZSB3ZVxuICAgIC8vIHdhaXQgZm9yIHRoZSBzZXJ2ZXIgdG8gYWdyZWUuXG4gICAgY3JlYXRlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICB2YXIgd2FpdCA9IG9wdGlvbnMud2FpdDtcbiAgICAgIG1vZGVsID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIGlmICghbW9kZWwpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghd2FpdCkgdGhpcy5hZGQobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihtLCByZXNwLCBjYWxsYmFja09wdHMpIHtcbiAgICAgICAgaWYgKHdhaXQpIGNvbGxlY3Rpb24uYWRkKG0sIGNhbGxiYWNrT3B0cyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzLmNhbGwoY2FsbGJhY2tPcHRzLmNvbnRleHQsIG0sIHJlc3AsIGNhbGxiYWNrT3B0cyk7XG4gICAgICB9O1xuICAgICAgbW9kZWwuc2F2ZShudWxsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gKipwYXJzZSoqIGNvbnZlcnRzIGEgcmVzcG9uc2UgaW50byBhIGxpc3Qgb2YgbW9kZWxzIHRvIGJlIGFkZGVkIHRvIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24uIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyBpdCB0aHJvdWdoLlxuICAgIHBhcnNlOiBmdW5jdGlvbihyZXNwLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gcmVzcDtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGNvbGxlY3Rpb24gd2l0aCBhbiBpZGVudGljYWwgbGlzdCBvZiBtb2RlbHMgYXMgdGhpcyBvbmUuXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMubW9kZWxzLCB7XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICBjb21wYXJhdG9yOiB0aGlzLmNvbXBhcmF0b3JcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBEZWZpbmUgaG93IHRvIHVuaXF1ZWx5IGlkZW50aWZ5IG1vZGVscyBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICBtb2RlbElkOiBmdW5jdGlvbihhdHRycykge1xuICAgICAgcmV0dXJuIGF0dHJzW3RoaXMubW9kZWwucHJvdG90eXBlLmlkQXR0cmlidXRlIHx8ICdpZCddO1xuICAgIH0sXG5cbiAgICAvLyBQcml2YXRlIG1ldGhvZCB0byByZXNldCBhbGwgaW50ZXJuYWwgc3RhdGUuIENhbGxlZCB3aGVuIHRoZSBjb2xsZWN0aW9uXG4gICAgLy8gaXMgZmlyc3QgaW5pdGlhbGl6ZWQgb3IgcmVzZXQuXG4gICAgX3Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMubW9kZWxzID0gW107XG4gICAgICB0aGlzLl9ieUlkICA9IHt9O1xuICAgIH0sXG5cbiAgICAvLyBQcmVwYXJlIGEgaGFzaCBvZiBhdHRyaWJ1dGVzIChvciBvdGhlciBtb2RlbCkgdG8gYmUgYWRkZWQgdG8gdGhpc1xuICAgIC8vIGNvbGxlY3Rpb24uXG4gICAgX3ByZXBhcmVNb2RlbDogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh0aGlzLl9pc01vZGVsKGF0dHJzKSkge1xuICAgICAgICBpZiAoIWF0dHJzLmNvbGxlY3Rpb24pIGF0dHJzLmNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgICByZXR1cm4gYXR0cnM7XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIG9wdGlvbnMuY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgbW9kZWwgPSBuZXcgdGhpcy5tb2RlbChhdHRycywgb3B0aW9ucyk7XG4gICAgICBpZiAoIW1vZGVsLnZhbGlkYXRpb25FcnJvcikgcmV0dXJuIG1vZGVsO1xuICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgbW9kZWwudmFsaWRhdGlvbkVycm9yLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIGNhbGxlZCBieSBib3RoIHJlbW92ZSBhbmQgc2V0LlxuICAgIF9yZW1vdmVNb2RlbHM6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgdmFyIHJlbW92ZWQgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9kZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0KG1vZGVsc1tpXSk7XG4gICAgICAgIGlmICghbW9kZWwpIGNvbnRpbnVlO1xuXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZihtb2RlbCk7XG4gICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMubGVuZ3RoLS07XG5cbiAgICAgICAgLy8gUmVtb3ZlIHJlZmVyZW5jZXMgYmVmb3JlIHRyaWdnZXJpbmcgJ3JlbW92ZScgZXZlbnQgdG8gcHJldmVudCBhblxuICAgICAgICAvLyBpbmZpbml0ZSBsb29wLiAjMzY5M1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5jaWRdO1xuICAgICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSBkZWxldGUgdGhpcy5fYnlJZFtpZF07XG5cbiAgICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdyZW1vdmUnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICByZW1vdmVkLnB1c2gobW9kZWwpO1xuICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlbW92ZWQ7XG4gICAgfSxcblxuICAgIC8vIE1ldGhvZCBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3Qgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBtb2RlbCBmb3JcbiAgICAvLyB0aGUgcHVycG9zZXMgb2YgYWRkaW5nIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgIF9pc01vZGVsOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgcmV0dXJuIG1vZGVsIGluc3RhbmNlb2YgTW9kZWw7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBjcmVhdGUgYSBtb2RlbCdzIHRpZXMgdG8gYSBjb2xsZWN0aW9uLlxuICAgIF9hZGRSZWZlcmVuY2U6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLl9ieUlkW21vZGVsLmNpZF0gPSBtb2RlbDtcbiAgICAgIHZhciBpZCA9IHRoaXMubW9kZWxJZChtb2RlbC5hdHRyaWJ1dGVzKTtcbiAgICAgIGlmIChpZCAhPSBudWxsKSB0aGlzLl9ieUlkW2lkXSA9IG1vZGVsO1xuICAgICAgbW9kZWwub24oJ2FsbCcsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBzZXZlciBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG4gICAgX3JlbW92ZVJlZmVyZW5jZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmNpZF07XG4gICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICBpZiAoaWQgIT0gbnVsbCkgZGVsZXRlIHRoaXMuX2J5SWRbaWRdO1xuICAgICAgaWYgKHRoaXMgPT09IG1vZGVsLmNvbGxlY3Rpb24pIGRlbGV0ZSBtb2RlbC5jb2xsZWN0aW9uO1xuICAgICAgbW9kZWwub2ZmKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGV2ZXJ5IHRpbWUgYSBtb2RlbCBpbiB0aGUgc2V0IGZpcmVzIGFuIGV2ZW50LlxuICAgIC8vIFNldHMgbmVlZCB0byB1cGRhdGUgdGhlaXIgaW5kZXhlcyB3aGVuIG1vZGVscyBjaGFuZ2UgaWRzLiBBbGwgb3RoZXJcbiAgICAvLyBldmVudHMgc2ltcGx5IHByb3h5IHRocm91Z2guIFwiYWRkXCIgYW5kIFwicmVtb3ZlXCIgZXZlbnRzIHRoYXQgb3JpZ2luYXRlXG4gICAgLy8gaW4gb3RoZXIgY29sbGVjdGlvbnMgYXJlIGlnbm9yZWQuXG4gICAgX29uTW9kZWxFdmVudDogZnVuY3Rpb24oZXZlbnQsIG1vZGVsLCBjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgaWYgKChldmVudCA9PT0gJ2FkZCcgfHwgZXZlbnQgPT09ICdyZW1vdmUnKSAmJiBjb2xsZWN0aW9uICE9PSB0aGlzKSByZXR1cm47XG4gICAgICAgIGlmIChldmVudCA9PT0gJ2Rlc3Ryb3knKSB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChldmVudCA9PT0gJ2NoYW5nZScpIHtcbiAgICAgICAgICB2YXIgcHJldklkID0gdGhpcy5tb2RlbElkKG1vZGVsLnByZXZpb3VzQXR0cmlidXRlcygpKTtcbiAgICAgICAgICB2YXIgaWQgPSB0aGlzLm1vZGVsSWQobW9kZWwuYXR0cmlidXRlcyk7XG4gICAgICAgICAgaWYgKHByZXZJZCAhPT0gaWQpIHtcbiAgICAgICAgICAgIGlmIChwcmV2SWQgIT0gbnVsbCkgZGVsZXRlIHRoaXMuX2J5SWRbcHJldklkXTtcbiAgICAgICAgICAgIGlmIChpZCAhPSBudWxsKSB0aGlzLl9ieUlkW2lkXSA9IG1vZGVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBDb2xsZWN0aW9uLlxuICAvLyA5MCUgb2YgdGhlIGNvcmUgdXNlZnVsbmVzcyBvZiBCYWNrYm9uZSBDb2xsZWN0aW9ucyBpcyBhY3R1YWxseSBpbXBsZW1lbnRlZFxuICAvLyByaWdodCBoZXJlOlxuICB2YXIgY29sbGVjdGlvbk1ldGhvZHMgPSB7Zm9yRWFjaDogMywgZWFjaDogMywgbWFwOiAzLCBjb2xsZWN0OiAzLCByZWR1Y2U6IDAsXG4gICAgICBmb2xkbDogMCwgaW5qZWN0OiAwLCByZWR1Y2VSaWdodDogMCwgZm9sZHI6IDAsIGZpbmQ6IDMsIGRldGVjdDogMywgZmlsdGVyOiAzLFxuICAgICAgc2VsZWN0OiAzLCByZWplY3Q6IDMsIGV2ZXJ5OiAzLCBhbGw6IDMsIHNvbWU6IDMsIGFueTogMywgaW5jbHVkZTogMywgaW5jbHVkZXM6IDMsXG4gICAgICBjb250YWluczogMywgaW52b2tlOiAwLCBtYXg6IDMsIG1pbjogMywgdG9BcnJheTogMSwgc2l6ZTogMSwgZmlyc3Q6IDMsXG4gICAgICBoZWFkOiAzLCB0YWtlOiAzLCBpbml0aWFsOiAzLCByZXN0OiAzLCB0YWlsOiAzLCBkcm9wOiAzLCBsYXN0OiAzLFxuICAgICAgd2l0aG91dDogMCwgZGlmZmVyZW5jZTogMCwgaW5kZXhPZjogMywgc2h1ZmZsZTogMSwgbGFzdEluZGV4T2Y6IDMsXG4gICAgICBpc0VtcHR5OiAxLCBjaGFpbjogMSwgc2FtcGxlOiAzLCBwYXJ0aXRpb246IDMsIGdyb3VwQnk6IDMsIGNvdW50Qnk6IDMsXG4gICAgICBzb3J0Qnk6IDMsIGluZGV4Qnk6IDMsIGZpbmRJbmRleDogMywgZmluZExhc3RJbmRleDogM307XG5cbiAgLy8gTWl4IGluIGVhY2ggVW5kZXJzY29yZSBtZXRob2QgYXMgYSBwcm94eSB0byBgQ29sbGVjdGlvbiNtb2RlbHNgLlxuICBhZGRVbmRlcnNjb3JlTWV0aG9kcyhDb2xsZWN0aW9uLCBjb2xsZWN0aW9uTWV0aG9kcywgJ21vZGVscycpO1xuXG4gIC8vIEJhY2tib25lLlZpZXdcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEJhY2tib25lIFZpZXdzIGFyZSBhbG1vc3QgbW9yZSBjb252ZW50aW9uIHRoYW4gdGhleSBhcmUgYWN0dWFsIGNvZGUuIEEgVmlld1xuICAvLyBpcyBzaW1wbHkgYSBKYXZhU2NyaXB0IG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYSBsb2dpY2FsIGNodW5rIG9mIFVJIGluIHRoZVxuICAvLyBET00uIFRoaXMgbWlnaHQgYmUgYSBzaW5nbGUgaXRlbSwgYW4gZW50aXJlIGxpc3QsIGEgc2lkZWJhciBvciBwYW5lbCwgb3JcbiAgLy8gZXZlbiB0aGUgc3Vycm91bmRpbmcgZnJhbWUgd2hpY2ggd3JhcHMgeW91ciB3aG9sZSBhcHAuIERlZmluaW5nIGEgY2h1bmsgb2ZcbiAgLy8gVUkgYXMgYSAqKlZpZXcqKiBhbGxvd3MgeW91IHRvIGRlZmluZSB5b3VyIERPTSBldmVudHMgZGVjbGFyYXRpdmVseSwgd2l0aG91dFxuICAvLyBoYXZpbmcgdG8gd29ycnkgYWJvdXQgcmVuZGVyIG9yZGVyIC4uLiBhbmQgbWFrZXMgaXQgZWFzeSBmb3IgdGhlIHZpZXcgdG9cbiAgLy8gcmVhY3QgdG8gc3BlY2lmaWMgY2hhbmdlcyBpbiB0aGUgc3RhdGUgb2YgeW91ciBtb2RlbHMuXG5cbiAgLy8gQ3JlYXRpbmcgYSBCYWNrYm9uZS5WaWV3IGNyZWF0ZXMgaXRzIGluaXRpYWwgZWxlbWVudCBvdXRzaWRlIG9mIHRoZSBET00sXG4gIC8vIGlmIGFuIGV4aXN0aW5nIGVsZW1lbnQgaXMgbm90IHByb3ZpZGVkLi4uXG4gIHZhciBWaWV3ID0gQmFja2JvbmUuVmlldyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQoJ3ZpZXcnKTtcbiAgICBfLmV4dGVuZCh0aGlzLCBfLnBpY2sob3B0aW9ucywgdmlld09wdGlvbnMpKTtcbiAgICB0aGlzLl9lbnN1cmVFbGVtZW50KCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IHRvIHNwbGl0IGtleXMgZm9yIGBkZWxlZ2F0ZWAuXG4gIHZhciBkZWxlZ2F0ZUV2ZW50U3BsaXR0ZXIgPSAvXihcXFMrKVxccyooLiopJC87XG5cbiAgLy8gTGlzdCBvZiB2aWV3IG9wdGlvbnMgdG8gYmUgc2V0IGFzIHByb3BlcnRpZXMuXG4gIHZhciB2aWV3T3B0aW9ucyA9IFsnbW9kZWwnLCAnY29sbGVjdGlvbicsICdlbCcsICdpZCcsICdhdHRyaWJ1dGVzJywgJ2NsYXNzTmFtZScsICd0YWdOYW1lJywgJ2V2ZW50cyddO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5WaWV3KiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cbiAgXy5leHRlbmQoVmlldy5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgYHRhZ05hbWVgIG9mIGEgVmlldydzIGVsZW1lbnQgaXMgYFwiZGl2XCJgLlxuICAgIHRhZ05hbWU6ICdkaXYnLFxuXG4gICAgLy8galF1ZXJ5IGRlbGVnYXRlIGZvciBlbGVtZW50IGxvb2t1cCwgc2NvcGVkIHRvIERPTSBlbGVtZW50cyB3aXRoaW4gdGhlXG4gICAgLy8gY3VycmVudCB2aWV3LiBUaGlzIHNob3VsZCBiZSBwcmVmZXJyZWQgdG8gZ2xvYmFsIGxvb2t1cHMgd2hlcmUgcG9zc2libGUuXG4gICAgJDogZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiB0aGlzLiRlbC5maW5kKHNlbGVjdG9yKTtcbiAgICB9LFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gKipyZW5kZXIqKiBpcyB0aGUgY29yZSBmdW5jdGlvbiB0aGF0IHlvdXIgdmlldyBzaG91bGQgb3ZlcnJpZGUsIGluIG9yZGVyXG4gICAgLy8gdG8gcG9wdWxhdGUgaXRzIGVsZW1lbnQgKGB0aGlzLmVsYCksIHdpdGggdGhlIGFwcHJvcHJpYXRlIEhUTUwuIFRoZVxuICAgIC8vIGNvbnZlbnRpb24gaXMgZm9yICoqcmVuZGVyKiogdG8gYWx3YXlzIHJldHVybiBgdGhpc2AuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgdGhpcyB2aWV3IGJ5IHRha2luZyB0aGUgZWxlbWVudCBvdXQgb2YgdGhlIERPTSwgYW5kIHJlbW92aW5nIGFueVxuICAgIC8vIGFwcGxpY2FibGUgQmFja2JvbmUuRXZlbnRzIGxpc3RlbmVycy5cbiAgICByZW1vdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fcmVtb3ZlRWxlbWVudCgpO1xuICAgICAgdGhpcy5zdG9wTGlzdGVuaW5nKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIHRoaXMgdmlldydzIGVsZW1lbnQgZnJvbSB0aGUgZG9jdW1lbnQgYW5kIGFsbCBldmVudCBsaXN0ZW5lcnNcbiAgICAvLyBhdHRhY2hlZCB0byBpdC4gRXhwb3NlZCBmb3Igc3ViY2xhc3NlcyB1c2luZyBhbiBhbHRlcm5hdGl2ZSBET01cbiAgICAvLyBtYW5pcHVsYXRpb24gQVBJLlxuICAgIF9yZW1vdmVFbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuJGVsLnJlbW92ZSgpO1xuICAgIH0sXG5cbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcncyBlbGVtZW50IChgdGhpcy5lbGAgcHJvcGVydHkpIGFuZCByZS1kZWxlZ2F0ZSB0aGVcbiAgICAvLyB2aWV3J3MgZXZlbnRzIG9uIHRoZSBuZXcgZWxlbWVudC5cbiAgICBzZXRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKTtcbiAgICAgIHRoaXMuX3NldEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICB0aGlzLmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlcyB0aGUgYHRoaXMuZWxgIGFuZCBgdGhpcy4kZWxgIHJlZmVyZW5jZXMgZm9yIHRoaXMgdmlldyB1c2luZyB0aGVcbiAgICAvLyBnaXZlbiBgZWxgLiBgZWxgIGNhbiBiZSBhIENTUyBzZWxlY3RvciBvciBhbiBIVE1MIHN0cmluZywgYSBqUXVlcnlcbiAgICAvLyBjb250ZXh0IG9yIGFuIGVsZW1lbnQuIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlIHRoaXMgdG8gdXRpbGl6ZSBhblxuICAgIC8vIGFsdGVybmF0aXZlIERPTSBtYW5pcHVsYXRpb24gQVBJIGFuZCBhcmUgb25seSByZXF1aXJlZCB0byBzZXQgdGhlXG4gICAgLy8gYHRoaXMuZWxgIHByb3BlcnR5LlxuICAgIF9zZXRFbGVtZW50OiBmdW5jdGlvbihlbCkge1xuICAgICAgdGhpcy4kZWwgPSBlbCBpbnN0YW5jZW9mIEJhY2tib25lLiQgPyBlbCA6IEJhY2tib25lLiQoZWwpO1xuICAgICAgdGhpcy5lbCA9IHRoaXMuJGVsWzBdO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgY2FsbGJhY2tzLCB3aGVyZSBgdGhpcy5ldmVudHNgIGlzIGEgaGFzaCBvZlxuICAgIC8vXG4gICAgLy8gKntcImV2ZW50IHNlbGVjdG9yXCI6IFwiY2FsbGJhY2tcIn0qXG4gICAgLy9cbiAgICAvLyAgICAge1xuICAgIC8vICAgICAgICdtb3VzZWRvd24gLnRpdGxlJzogICdlZGl0JyxcbiAgICAvLyAgICAgICAnY2xpY2sgLmJ1dHRvbic6ICAgICAnc2F2ZScsXG4gICAgLy8gICAgICAgJ2NsaWNrIC5vcGVuJzogICAgICAgZnVuY3Rpb24oZSkgeyAuLi4gfVxuICAgIC8vICAgICB9XG4gICAgLy9cbiAgICAvLyBwYWlycy4gQ2FsbGJhY2tzIHdpbGwgYmUgYm91bmQgdG8gdGhlIHZpZXcsIHdpdGggYHRoaXNgIHNldCBwcm9wZXJseS5cbiAgICAvLyBVc2VzIGV2ZW50IGRlbGVnYXRpb24gZm9yIGVmZmljaWVuY3kuXG4gICAgLy8gT21pdHRpbmcgdGhlIHNlbGVjdG9yIGJpbmRzIHRoZSBldmVudCB0byBgdGhpcy5lbGAuXG4gICAgZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKGV2ZW50cykge1xuICAgICAgZXZlbnRzIHx8IChldmVudHMgPSBfLnJlc3VsdCh0aGlzLCAnZXZlbnRzJykpO1xuICAgICAgaWYgKCFldmVudHMpIHJldHVybiB0aGlzO1xuICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBldmVudHNba2V5XTtcbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24obWV0aG9kKSkgbWV0aG9kID0gdGhpc1ttZXRob2RdO1xuICAgICAgICBpZiAoIW1ldGhvZCkgY29udGludWU7XG4gICAgICAgIHZhciBtYXRjaCA9IGtleS5tYXRjaChkZWxlZ2F0ZUV2ZW50U3BsaXR0ZXIpO1xuICAgICAgICB0aGlzLmRlbGVnYXRlKG1hdGNoWzFdLCBtYXRjaFsyXSwgXy5iaW5kKG1ldGhvZCwgdGhpcykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIHNpbmdsZSBldmVudCBsaXN0ZW5lciB0byB0aGUgdmlldydzIGVsZW1lbnQgKG9yIGEgY2hpbGQgZWxlbWVudFxuICAgIC8vIHVzaW5nIGBzZWxlY3RvcmApLiBUaGlzIG9ubHkgd29ya3MgZm9yIGRlbGVnYXRlLWFibGUgZXZlbnRzOiBub3QgYGZvY3VzYCxcbiAgICAvLyBgYmx1cmAsIGFuZCBub3QgYGNoYW5nZWAsIGBzdWJtaXRgLCBhbmQgYHJlc2V0YCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cbiAgICBkZWxlZ2F0ZTogZnVuY3Rpb24oZXZlbnROYW1lLCBzZWxlY3RvciwgbGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuJGVsLm9uKGV2ZW50TmFtZSArICcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQsIHNlbGVjdG9yLCBsaXN0ZW5lcik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQ2xlYXJzIGFsbCBjYWxsYmFja3MgcHJldmlvdXNseSBib3VuZCB0byB0aGUgdmlldyBieSBgZGVsZWdhdGVFdmVudHNgLlxuICAgIC8vIFlvdSB1c3VhbGx5IGRvbid0IG5lZWQgdG8gdXNlIHRoaXMsIGJ1dCBtYXkgd2lzaCB0byBpZiB5b3UgaGF2ZSBtdWx0aXBsZVxuICAgIC8vIEJhY2tib25lIHZpZXdzIGF0dGFjaGVkIHRvIHRoZSBzYW1lIERPTSBlbGVtZW50LlxuICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuJGVsKSB0aGlzLiRlbC5vZmYoJy5kZWxlZ2F0ZUV2ZW50cycgKyB0aGlzLmNpZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQSBmaW5lci1ncmFpbmVkIGB1bmRlbGVnYXRlRXZlbnRzYCBmb3IgcmVtb3ZpbmcgYSBzaW5nbGUgZGVsZWdhdGVkIGV2ZW50LlxuICAgIC8vIGBzZWxlY3RvcmAgYW5kIGBsaXN0ZW5lcmAgYXJlIGJvdGggb3B0aW9uYWwuXG4gICAgdW5kZWxlZ2F0ZTogZnVuY3Rpb24oZXZlbnROYW1lLCBzZWxlY3RvciwgbGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuJGVsLm9mZihldmVudE5hbWUgKyAnLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkLCBzZWxlY3RvciwgbGlzdGVuZXIpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFByb2R1Y2VzIGEgRE9NIGVsZW1lbnQgdG8gYmUgYXNzaWduZWQgdG8geW91ciB2aWV3LiBFeHBvc2VkIGZvclxuICAgIC8vIHN1YmNsYXNzZXMgdXNpbmcgYW4gYWx0ZXJuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiBBUEkuXG4gICAgX2NyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uKHRhZ05hbWUpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICAgIH0sXG5cbiAgICAvLyBFbnN1cmUgdGhhdCB0aGUgVmlldyBoYXMgYSBET00gZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICAvLyBJZiBgdGhpcy5lbGAgaXMgYSBzdHJpbmcsIHBhc3MgaXQgdGhyb3VnaCBgJCgpYCwgdGFrZSB0aGUgZmlyc3RcbiAgICAvLyBtYXRjaGluZyBlbGVtZW50LCBhbmQgcmUtYXNzaWduIGl0IHRvIGBlbGAuIE90aGVyd2lzZSwgY3JlYXRlXG4gICAgLy8gYW4gZWxlbWVudCBmcm9tIHRoZSBgaWRgLCBgY2xhc3NOYW1lYCBhbmQgYHRhZ05hbWVgIHByb3BlcnRpZXMuXG4gICAgX2Vuc3VyZUVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLmVsKSB7XG4gICAgICAgIHZhciBhdHRycyA9IF8uZXh0ZW5kKHt9LCBfLnJlc3VsdCh0aGlzLCAnYXR0cmlidXRlcycpKTtcbiAgICAgICAgaWYgKHRoaXMuaWQpIGF0dHJzLmlkID0gXy5yZXN1bHQodGhpcywgJ2lkJyk7XG4gICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSkgYXR0cnNbJ2NsYXNzJ10gPSBfLnJlc3VsdCh0aGlzLCAnY2xhc3NOYW1lJyk7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudCh0aGlzLl9jcmVhdGVFbGVtZW50KF8ucmVzdWx0KHRoaXMsICd0YWdOYW1lJykpKTtcbiAgICAgICAgdGhpcy5fc2V0QXR0cmlidXRlcyhhdHRycyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldEVsZW1lbnQoXy5yZXN1bHQodGhpcywgJ2VsJykpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBTZXQgYXR0cmlidXRlcyBmcm9tIGEgaGFzaCBvbiB0aGlzIHZpZXcncyBlbGVtZW50LiAgRXhwb3NlZCBmb3JcbiAgICAvLyBzdWJjbGFzc2VzIHVzaW5nIGFuIGFsdGVybmF0aXZlIERPTSBtYW5pcHVsYXRpb24gQVBJLlxuICAgIF9zZXRBdHRyaWJ1dGVzOiBmdW5jdGlvbihhdHRyaWJ1dGVzKSB7XG4gICAgICB0aGlzLiRlbC5hdHRyKGF0dHJpYnV0ZXMpO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5zeW5jXG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgbWFubmVyIGluIHdoaWNoIEJhY2tib25lIHBlcnNpc3RzXG4gIC8vIG1vZGVscyB0byB0aGUgc2VydmVyLiBZb3Ugd2lsbCBiZSBwYXNzZWQgdGhlIHR5cGUgb2YgcmVxdWVzdCwgYW5kIHRoZVxuICAvLyBtb2RlbCBpbiBxdWVzdGlvbi4gQnkgZGVmYXVsdCwgbWFrZXMgYSBSRVNUZnVsIEFqYXggcmVxdWVzdFxuICAvLyB0byB0aGUgbW9kZWwncyBgdXJsKClgLiBTb21lIHBvc3NpYmxlIGN1c3RvbWl6YXRpb25zIGNvdWxkIGJlOlxuICAvL1xuICAvLyAqIFVzZSBgc2V0VGltZW91dGAgdG8gYmF0Y2ggcmFwaWQtZmlyZSB1cGRhdGVzIGludG8gYSBzaW5nbGUgcmVxdWVzdC5cbiAgLy8gKiBTZW5kIHVwIHRoZSBtb2RlbHMgYXMgWE1MIGluc3RlYWQgb2YgSlNPTi5cbiAgLy8gKiBQZXJzaXN0IG1vZGVscyB2aWEgV2ViU29ja2V0cyBpbnN0ZWFkIG9mIEFqYXguXG4gIC8vXG4gIC8vIFR1cm4gb24gYEJhY2tib25lLmVtdWxhdGVIVFRQYCBpbiBvcmRlciB0byBzZW5kIGBQVVRgIGFuZCBgREVMRVRFYCByZXF1ZXN0c1xuICAvLyBhcyBgUE9TVGAsIHdpdGggYSBgX21ldGhvZGAgcGFyYW1ldGVyIGNvbnRhaW5pbmcgdGhlIHRydWUgSFRUUCBtZXRob2QsXG4gIC8vIGFzIHdlbGwgYXMgYWxsIHJlcXVlc3RzIHdpdGggdGhlIGJvZHkgYXMgYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGBcbiAgLy8gaW5zdGVhZCBvZiBgYXBwbGljYXRpb24vanNvbmAgd2l0aCB0aGUgbW9kZWwgaW4gYSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuICAvLyBVc2VmdWwgd2hlbiBpbnRlcmZhY2luZyB3aXRoIHNlcnZlci1zaWRlIGxhbmd1YWdlcyBsaWtlICoqUEhQKiogdGhhdCBtYWtlXG4gIC8vIGl0IGRpZmZpY3VsdCB0byByZWFkIHRoZSBib2R5IG9mIGBQVVRgIHJlcXVlc3RzLlxuICBCYWNrYm9uZS5zeW5jID0gZnVuY3Rpb24obWV0aG9kLCBtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciB0eXBlID0gbWV0aG9kTWFwW21ldGhvZF07XG5cbiAgICAvLyBEZWZhdWx0IG9wdGlvbnMsIHVubGVzcyBzcGVjaWZpZWQuXG4gICAgXy5kZWZhdWx0cyhvcHRpb25zIHx8IChvcHRpb25zID0ge30pLCB7XG4gICAgICBlbXVsYXRlSFRUUDogQmFja2JvbmUuZW11bGF0ZUhUVFAsXG4gICAgICBlbXVsYXRlSlNPTjogQmFja2JvbmUuZW11bGF0ZUpTT05cbiAgICB9KTtcblxuICAgIC8vIERlZmF1bHQgSlNPTi1yZXF1ZXN0IG9wdGlvbnMuXG4gICAgdmFyIHBhcmFtcyA9IHt0eXBlOiB0eXBlLCBkYXRhVHlwZTogJ2pzb24nfTtcblxuICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgYSBVUkwuXG4gICAgaWYgKCFvcHRpb25zLnVybCkge1xuICAgICAgcGFyYW1zLnVybCA9IF8ucmVzdWx0KG1vZGVsLCAndXJsJykgfHwgdXJsRXJyb3IoKTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIHRoZSBhcHByb3ByaWF0ZSByZXF1ZXN0IGRhdGEuXG4gICAgaWYgKG9wdGlvbnMuZGF0YSA9PSBudWxsICYmIG1vZGVsICYmIChtZXRob2QgPT09ICdjcmVhdGUnIHx8IG1ldGhvZCA9PT0gJ3VwZGF0ZScgfHwgbWV0aG9kID09PSAncGF0Y2gnKSkge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgcGFyYW1zLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmF0dHJzIHx8IG1vZGVsLnRvSlNPTihvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSlNPTiBieSBlbmNvZGluZyB0aGUgcmVxdWVzdCBpbnRvIGFuIEhUTUwtZm9ybS5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG4gICAgICBwYXJhbXMuZGF0YSA9IHBhcmFtcy5kYXRhID8ge21vZGVsOiBwYXJhbXMuZGF0YX0gOiB7fTtcbiAgICB9XG5cbiAgICAvLyBGb3Igb2xkZXIgc2VydmVycywgZW11bGF0ZSBIVFRQIGJ5IG1pbWlja2luZyB0aGUgSFRUUCBtZXRob2Qgd2l0aCBgX21ldGhvZGBcbiAgICAvLyBBbmQgYW4gYFgtSFRUUC1NZXRob2QtT3ZlcnJpZGVgIGhlYWRlci5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSFRUUCAmJiAodHlwZSA9PT0gJ1BVVCcgfHwgdHlwZSA9PT0gJ0RFTEVURScgfHwgdHlwZSA9PT0gJ1BBVENIJykpIHtcbiAgICAgIHBhcmFtcy50eXBlID0gJ1BPU1QnO1xuICAgICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHBhcmFtcy5kYXRhLl9tZXRob2QgPSB0eXBlO1xuICAgICAgdmFyIGJlZm9yZVNlbmQgPSBvcHRpb25zLmJlZm9yZVNlbmQ7XG4gICAgICBvcHRpb25zLmJlZm9yZVNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtSFRUUC1NZXRob2QtT3ZlcnJpZGUnLCB0eXBlKTtcbiAgICAgICAgaWYgKGJlZm9yZVNlbmQpIHJldHVybiBiZWZvcmVTZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIERvbid0IHByb2Nlc3MgZGF0YSBvbiBhIG5vbi1HRVQgcmVxdWVzdC5cbiAgICBpZiAocGFyYW1zLnR5cGUgIT09ICdHRVQnICYmICFvcHRpb25zLmVtdWxhdGVKU09OKSB7XG4gICAgICBwYXJhbXMucHJvY2Vzc0RhdGEgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBQYXNzIGFsb25nIGB0ZXh0U3RhdHVzYCBhbmQgYGVycm9yVGhyb3duYCBmcm9tIGpRdWVyeS5cbiAgICB2YXIgZXJyb3IgPSBvcHRpb25zLmVycm9yO1xuICAgIG9wdGlvbnMuZXJyb3IgPSBmdW5jdGlvbih4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICBvcHRpb25zLnRleHRTdGF0dXMgPSB0ZXh0U3RhdHVzO1xuICAgICAgb3B0aW9ucy5lcnJvclRocm93biA9IGVycm9yVGhyb3duO1xuICAgICAgaWYgKGVycm9yKSBlcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bik7XG4gICAgfTtcblxuICAgIC8vIE1ha2UgdGhlIHJlcXVlc3QsIGFsbG93aW5nIHRoZSB1c2VyIHRvIG92ZXJyaWRlIGFueSBBamF4IG9wdGlvbnMuXG4gICAgdmFyIHhociA9IG9wdGlvbnMueGhyID0gQmFja2JvbmUuYWpheChfLmV4dGVuZChwYXJhbXMsIG9wdGlvbnMpKTtcbiAgICBtb2RlbC50cmlnZ2VyKCdyZXF1ZXN0JywgbW9kZWwsIHhociwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHhocjtcbiAgfTtcblxuICAvLyBNYXAgZnJvbSBDUlVEIHRvIEhUVFAgZm9yIG91ciBkZWZhdWx0IGBCYWNrYm9uZS5zeW5jYCBpbXBsZW1lbnRhdGlvbi5cbiAgdmFyIG1ldGhvZE1hcCA9IHtcbiAgICAnY3JlYXRlJzogJ1BPU1QnLFxuICAgICd1cGRhdGUnOiAnUFVUJyxcbiAgICAncGF0Y2gnOiAnUEFUQ0gnLFxuICAgICdkZWxldGUnOiAnREVMRVRFJyxcbiAgICAncmVhZCc6ICdHRVQnXG4gIH07XG5cbiAgLy8gU2V0IHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGBCYWNrYm9uZS5hamF4YCB0byBwcm94eSB0aHJvdWdoIHRvIGAkYC5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBpZiB5b3UnZCBsaWtlIHRvIHVzZSBhIGRpZmZlcmVudCBsaWJyYXJ5LlxuICBCYWNrYm9uZS5hamF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLiQuYWpheC5hcHBseShCYWNrYm9uZS4kLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEJhY2tib25lLlJvdXRlclxuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSb3V0ZXJzIG1hcCBmYXV4LVVSTHMgdG8gYWN0aW9ucywgYW5kIGZpcmUgZXZlbnRzIHdoZW4gcm91dGVzIGFyZVxuICAvLyBtYXRjaGVkLiBDcmVhdGluZyBhIG5ldyBvbmUgc2V0cyBpdHMgYHJvdXRlc2AgaGFzaCwgaWYgbm90IHNldCBzdGF0aWNhbGx5LlxuICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgaWYgKG9wdGlvbnMucm91dGVzKSB0aGlzLnJvdXRlcyA9IG9wdGlvbnMucm91dGVzO1xuICAgIHRoaXMuX2JpbmRSb3V0ZXMoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3IgbWF0Y2hpbmcgbmFtZWQgcGFyYW0gcGFydHMgYW5kIHNwbGF0dGVkXG4gIC8vIHBhcnRzIG9mIHJvdXRlIHN0cmluZ3MuXG4gIHZhciBvcHRpb25hbFBhcmFtID0gL1xcKCguKj8pXFwpL2c7XG4gIHZhciBuYW1lZFBhcmFtICAgID0gLyhcXChcXD8pPzpcXHcrL2c7XG4gIHZhciBzcGxhdFBhcmFtICAgID0gL1xcKlxcdysvZztcbiAgdmFyIGVzY2FwZVJlZ0V4cCAgPSAvW1xcLXt9XFxbXFxdKz8uLFxcXFxcXF4kfCNcXHNdL2c7XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlJvdXRlcioqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKFJvdXRlci5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gTWFudWFsbHkgYmluZCBhIHNpbmdsZSBuYW1lZCByb3V0ZSB0byBhIGNhbGxiYWNrLiBGb3IgZXhhbXBsZTpcbiAgICAvL1xuICAgIC8vICAgICB0aGlzLnJvdXRlKCdzZWFyY2gvOnF1ZXJ5L3A6bnVtJywgJ3NlYXJjaCcsIGZ1bmN0aW9uKHF1ZXJ5LCBudW0pIHtcbiAgICAvLyAgICAgICAuLi5cbiAgICAvLyAgICAgfSk7XG4gICAgLy9cbiAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIV8uaXNSZWdFeHAocm91dGUpKSByb3V0ZSA9IHRoaXMuX3JvdXRlVG9SZWdFeHAocm91dGUpO1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICBjYWxsYmFjayA9IG5hbWU7XG4gICAgICAgIG5hbWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gdGhpc1tuYW1lXTtcbiAgICAgIHZhciByb3V0ZXIgPSB0aGlzO1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5yb3V0ZShyb3V0ZSwgZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSByb3V0ZXIuX2V4dHJhY3RQYXJhbWV0ZXJzKHJvdXRlLCBmcmFnbWVudCk7XG4gICAgICAgIGlmIChyb3V0ZXIuZXhlY3V0ZShjYWxsYmFjaywgYXJncywgbmFtZSkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgcm91dGVyLnRyaWdnZXIuYXBwbHkocm91dGVyLCBbJ3JvdXRlOicgKyBuYW1lXS5jb25jYXQoYXJncykpO1xuICAgICAgICAgIHJvdXRlci50cmlnZ2VyKCdyb3V0ZScsIG5hbWUsIGFyZ3MpO1xuICAgICAgICAgIEJhY2tib25lLmhpc3RvcnkudHJpZ2dlcigncm91dGUnLCByb3V0ZXIsIG5hbWUsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBFeGVjdXRlIGEgcm91dGUgaGFuZGxlciB3aXRoIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLiAgVGhpcyBpcyBhblxuICAgIC8vIGV4Y2VsbGVudCBwbGFjZSB0byBkbyBwcmUtcm91dGUgc2V0dXAgb3IgcG9zdC1yb3V0ZSBjbGVhbnVwLlxuICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBhcmdzLCBuYW1lKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0sXG5cbiAgICAvLyBTaW1wbGUgcHJveHkgdG8gYEJhY2tib25lLmhpc3RvcnlgIHRvIHNhdmUgYSBmcmFnbWVudCBpbnRvIHRoZSBoaXN0b3J5LlxuICAgIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCwgb3B0aW9ucykge1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQmluZCBhbGwgZGVmaW5lZCByb3V0ZXMgdG8gYEJhY2tib25lLmhpc3RvcnlgLiBXZSBoYXZlIHRvIHJldmVyc2UgdGhlXG4gICAgLy8gb3JkZXIgb2YgdGhlIHJvdXRlcyBoZXJlIHRvIHN1cHBvcnQgYmVoYXZpb3Igd2hlcmUgdGhlIG1vc3QgZ2VuZXJhbFxuICAgIC8vIHJvdXRlcyBjYW4gYmUgZGVmaW5lZCBhdCB0aGUgYm90dG9tIG9mIHRoZSByb3V0ZSBtYXAuXG4gICAgX2JpbmRSb3V0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLnJvdXRlcykgcmV0dXJuO1xuICAgICAgdGhpcy5yb3V0ZXMgPSBfLnJlc3VsdCh0aGlzLCAncm91dGVzJyk7XG4gICAgICB2YXIgcm91dGUsIHJvdXRlcyA9IF8ua2V5cyh0aGlzLnJvdXRlcyk7XG4gICAgICB3aGlsZSAoKHJvdXRlID0gcm91dGVzLnBvcCgpKSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucm91dGUocm91dGUsIHRoaXMucm91dGVzW3JvdXRlXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIENvbnZlcnQgYSByb3V0ZSBzdHJpbmcgaW50byBhIHJlZ3VsYXIgZXhwcmVzc2lvbiwgc3VpdGFibGUgZm9yIG1hdGNoaW5nXG4gICAgLy8gYWdhaW5zdCB0aGUgY3VycmVudCBsb2NhdGlvbiBoYXNoLlxuICAgIF9yb3V0ZVRvUmVnRXhwOiBmdW5jdGlvbihyb3V0ZSkge1xuICAgICAgcm91dGUgPSByb3V0ZS5yZXBsYWNlKGVzY2FwZVJlZ0V4cCwgJ1xcXFwkJicpXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uob3B0aW9uYWxQYXJhbSwgJyg/OiQxKT8nKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG5hbWVkUGFyYW0sIGZ1bmN0aW9uKG1hdGNoLCBvcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbmFsID8gbWF0Y2ggOiAnKFteLz9dKyknO1xuICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uoc3BsYXRQYXJhbSwgJyhbXj9dKj8pJyk7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByb3V0ZSArICcoPzpcXFxcPyhbXFxcXHNcXFxcU10qKSk/JCcpO1xuICAgIH0sXG5cbiAgICAvLyBHaXZlbiBhIHJvdXRlLCBhbmQgYSBVUkwgZnJhZ21lbnQgdGhhdCBpdCBtYXRjaGVzLCByZXR1cm4gdGhlIGFycmF5IG9mXG4gICAgLy8gZXh0cmFjdGVkIGRlY29kZWQgcGFyYW1ldGVycy4gRW1wdHkgb3IgdW5tYXRjaGVkIHBhcmFtZXRlcnMgd2lsbCBiZVxuICAgIC8vIHRyZWF0ZWQgYXMgYG51bGxgIHRvIG5vcm1hbGl6ZSBjcm9zcy1icm93c2VyIGJlaGF2aW9yLlxuICAgIF9leHRyYWN0UGFyYW1ldGVyczogZnVuY3Rpb24ocm91dGUsIGZyYWdtZW50KSB7XG4gICAgICB2YXIgcGFyYW1zID0gcm91dGUuZXhlYyhmcmFnbWVudCkuc2xpY2UoMSk7XG4gICAgICByZXR1cm4gXy5tYXAocGFyYW1zLCBmdW5jdGlvbihwYXJhbSwgaSkge1xuICAgICAgICAvLyBEb24ndCBkZWNvZGUgdGhlIHNlYXJjaCBwYXJhbXMuXG4gICAgICAgIGlmIChpID09PSBwYXJhbXMubGVuZ3RoIC0gMSkgcmV0dXJuIHBhcmFtIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBwYXJhbSA/IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbSkgOiBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLkhpc3RvcnlcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEhhbmRsZXMgY3Jvc3MtYnJvd3NlciBoaXN0b3J5IG1hbmFnZW1lbnQsIGJhc2VkIG9uIGVpdGhlclxuICAvLyBbcHVzaFN0YXRlXShodHRwOi8vZGl2ZWludG9odG1sNS5pbmZvL2hpc3RvcnkuaHRtbCkgYW5kIHJlYWwgVVJMcywgb3JcbiAgLy8gW29uaGFzaGNoYW5nZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vd2luZG93Lm9uaGFzaGNoYW5nZSlcbiAgLy8gYW5kIFVSTCBmcmFnbWVudHMuIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIG5laXRoZXIgKG9sZCBJRSwgbmF0Y2gpLFxuICAvLyBmYWxscyBiYWNrIHRvIHBvbGxpbmcuXG4gIHZhciBIaXN0b3J5ID0gQmFja2JvbmUuSGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICB0aGlzLmNoZWNrVXJsID0gXy5iaW5kKHRoaXMuY2hlY2tVcmwsIHRoaXMpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgYEhpc3RvcnlgIGNhbiBiZSB1c2VkIG91dHNpZGUgb2YgdGhlIGJyb3dzZXIuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgdGhpcy5oaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGEgbGVhZGluZyBoYXNoL3NsYXNoIGFuZCB0cmFpbGluZyBzcGFjZS5cbiAgdmFyIHJvdXRlU3RyaXBwZXIgPSAvXlsjXFwvXXxcXHMrJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMuXG4gIHZhciByb290U3RyaXBwZXIgPSAvXlxcLyt8XFwvKyQvZztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyB1cmxzIG9mIGhhc2guXG4gIHZhciBwYXRoU3RyaXBwZXIgPSAvIy4qJC87XG5cbiAgLy8gSGFzIHRoZSBoaXN0b3J5IGhhbmRsaW5nIGFscmVhZHkgYmVlbiBzdGFydGVkP1xuICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuSGlzdG9yeSoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKEhpc3RvcnkucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGludGVydmFsIHRvIHBvbGwgZm9yIGhhc2ggY2hhbmdlcywgaWYgbmVjZXNzYXJ5LCBpc1xuICAgIC8vIHR3ZW50eSB0aW1lcyBhIHNlY29uZC5cbiAgICBpbnRlcnZhbDogNTAsXG5cbiAgICAvLyBBcmUgd2UgYXQgdGhlIGFwcCByb290P1xuICAgIGF0Um9vdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGF0aCA9IHRoaXMubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvW15cXC9dJC8sICckJi8nKTtcbiAgICAgIHJldHVybiBwYXRoID09PSB0aGlzLnJvb3QgJiYgIXRoaXMuZ2V0U2VhcmNoKCk7XG4gICAgfSxcblxuICAgIC8vIERvZXMgdGhlIHBhdGhuYW1lIG1hdGNoIHRoZSByb290P1xuICAgIG1hdGNoUm9vdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGF0aCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSk7XG4gICAgICB2YXIgcm9vdFBhdGggPSBwYXRoLnNsaWNlKDAsIHRoaXMucm9vdC5sZW5ndGggLSAxKSArICcvJztcbiAgICAgIHJldHVybiByb290UGF0aCA9PT0gdGhpcy5yb290O1xuICAgIH0sXG5cbiAgICAvLyBVbmljb2RlIGNoYXJhY3RlcnMgaW4gYGxvY2F0aW9uLnBhdGhuYW1lYCBhcmUgcGVyY2VudCBlbmNvZGVkIHNvIHRoZXkncmVcbiAgICAvLyBkZWNvZGVkIGZvciBjb21wYXJpc29uLiBgJTI1YCBzaG91bGQgbm90IGJlIGRlY29kZWQgc2luY2UgaXQgbWF5IGJlIHBhcnRcbiAgICAvLyBvZiBhbiBlbmNvZGVkIHBhcmFtZXRlci5cbiAgICBkZWNvZGVGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgIHJldHVybiBkZWNvZGVVUkkoZnJhZ21lbnQucmVwbGFjZSgvJTI1L2csICclMjUyNScpKTtcbiAgICB9LFxuXG4gICAgLy8gSW4gSUU2LCB0aGUgaGFzaCBmcmFnbWVudCBhbmQgc2VhcmNoIHBhcmFtcyBhcmUgaW5jb3JyZWN0IGlmIHRoZVxuICAgIC8vIGZyYWdtZW50IGNvbnRhaW5zIGA/YC5cbiAgICBnZXRTZWFyY2g6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hdGNoID0gdGhpcy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKi8sICcnKS5tYXRjaCgvXFw/LisvKTtcbiAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzBdIDogJyc7XG4gICAgfSxcblxuICAgIC8vIEdldHMgdGhlIHRydWUgaGFzaCB2YWx1ZS4gQ2Fubm90IHVzZSBsb2NhdGlvbi5oYXNoIGRpcmVjdGx5IGR1ZSB0byBidWdcbiAgICAvLyBpbiBGaXJlZm94IHdoZXJlIGxvY2F0aW9uLmhhc2ggd2lsbCBhbHdheXMgYmUgZGVjb2RlZC5cbiAgICBnZXRIYXNoOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAgIHZhciBtYXRjaCA9ICh3aW5kb3cgfHwgdGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7XG4gICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHBhdGhuYW1lIGFuZCBzZWFyY2ggcGFyYW1zLCB3aXRob3V0IHRoZSByb290LlxuICAgIGdldFBhdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhdGggPSB0aGlzLmRlY29kZUZyYWdtZW50KFxuICAgICAgICB0aGlzLmxvY2F0aW9uLnBhdGhuYW1lICsgdGhpcy5nZXRTZWFyY2goKVxuICAgICAgKS5zbGljZSh0aGlzLnJvb3QubGVuZ3RoIC0gMSk7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGguc2xpY2UoMSkgOiBwYXRoO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIGNyb3NzLWJyb3dzZXIgbm9ybWFsaXplZCBVUkwgZnJhZ21lbnQgZnJvbSB0aGUgcGF0aCBvciBoYXNoLlxuICAgIGdldEZyYWdtZW50OiBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgaWYgKGZyYWdtZW50ID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuX3VzZVB1c2hTdGF0ZSB8fCAhdGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldFBhdGgoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmcmFnbWVudCA9IHRoaXMuZ2V0SGFzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZnJhZ21lbnQucmVwbGFjZShyb3V0ZVN0cmlwcGVyLCAnJyk7XG4gICAgfSxcblxuICAgIC8vIFN0YXJ0IHRoZSBoYXNoIGNoYW5nZSBoYW5kbGluZywgcmV0dXJuaW5nIGB0cnVlYCBpZiB0aGUgY3VycmVudCBVUkwgbWF0Y2hlc1xuICAgIC8vIGFuIGV4aXN0aW5nIHJvdXRlLCBhbmQgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGlmIChIaXN0b3J5LnN0YXJ0ZWQpIHRocm93IG5ldyBFcnJvcignQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQnKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IHRydWU7XG5cbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGluaXRpYWwgY29uZmlndXJhdGlvbi4gRG8gd2UgbmVlZCBhbiBpZnJhbWU/XG4gICAgICAvLyBJcyBwdXNoU3RhdGUgZGVzaXJlZCAuLi4gaXMgaXQgYXZhaWxhYmxlP1xuICAgICAgdGhpcy5vcHRpb25zICAgICAgICAgID0gXy5leHRlbmQoe3Jvb3Q6ICcvJ30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnJvb3QgICAgICAgICAgICAgPSB0aGlzLm9wdGlvbnMucm9vdDtcbiAgICAgIHRoaXMuX3dhbnRzSGFzaENoYW5nZSA9IHRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlICE9PSBmYWxzZTtcbiAgICAgIHRoaXMuX2hhc0hhc2hDaGFuZ2UgICA9ICdvbmhhc2hjaGFuZ2UnIGluIHdpbmRvdyAmJiAoZG9jdW1lbnQuZG9jdW1lbnRNb2RlID09PSB2b2lkIDAgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID4gNyk7XG4gICAgICB0aGlzLl91c2VIYXNoQ2hhbmdlICAgPSB0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5faGFzSGFzaENoYW5nZTtcbiAgICAgIHRoaXMuX3dhbnRzUHVzaFN0YXRlICA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAgICA9ICEhKHRoaXMuaGlzdG9yeSAmJiB0aGlzLmhpc3RvcnkucHVzaFN0YXRlKTtcbiAgICAgIHRoaXMuX3VzZVB1c2hTdGF0ZSAgICA9IHRoaXMuX3dhbnRzUHVzaFN0YXRlICYmIHRoaXMuX2hhc1B1c2hTdGF0ZTtcbiAgICAgIHRoaXMuZnJhZ21lbnQgICAgICAgICA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcblxuICAgICAgLy8gTm9ybWFsaXplIHJvb3QgdG8gYWx3YXlzIGluY2x1ZGUgYSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaC5cbiAgICAgIHRoaXMucm9vdCA9ICgnLycgKyB0aGlzLnJvb3QgKyAnLycpLnJlcGxhY2Uocm9vdFN0cmlwcGVyLCAnLycpO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGFzaENoYW5nZSB0byBwdXNoU3RhdGUgb3IgdmljZSB2ZXJzYSBpZiBib3RoIGFyZVxuICAgICAgLy8gcmVxdWVzdGVkLlxuICAgICAgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkge1xuXG4gICAgICAgIC8vIElmIHdlJ3ZlIHN0YXJ0ZWQgb2ZmIHdpdGggYSByb3V0ZSBmcm9tIGEgYHB1c2hTdGF0ZWAtZW5hYmxlZFxuICAgICAgICAvLyBicm93c2VyLCBidXQgd2UncmUgY3VycmVudGx5IGluIGEgYnJvd3NlciB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCBpdC4uLlxuICAgICAgICBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHZhciByb290UGF0aCA9IHRoaXMucm9vdC5zbGljZSgwLCAtMSkgfHwgJy8nO1xuICAgICAgICAgIHRoaXMubG9jYXRpb24ucmVwbGFjZShyb290UGF0aCArICcjJyArIHRoaXMuZ2V0UGF0aCgpKTtcbiAgICAgICAgICAvLyBSZXR1cm4gaW1tZWRpYXRlbHkgYXMgYnJvd3NlciB3aWxsIGRvIHJlZGlyZWN0IHRvIG5ldyB1cmxcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAvLyBPciBpZiB3ZSd2ZSBzdGFydGVkIG91dCB3aXRoIGEgaGFzaC1iYXNlZCByb3V0ZSwgYnV0IHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAvLyBpbiBhIGJyb3dzZXIgd2hlcmUgaXQgY291bGQgYmUgYHB1c2hTdGF0ZWAtYmFzZWQgaW5zdGVhZC4uLlxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSAmJiB0aGlzLmF0Um9vdCgpKSB7XG4gICAgICAgICAgdGhpcy5uYXZpZ2F0ZSh0aGlzLmdldEhhc2goKSwge3JlcGxhY2U6IHRydWV9KTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIC8vIFByb3h5IGFuIGlmcmFtZSB0byBoYW5kbGUgbG9jYXRpb24gZXZlbnRzIGlmIHRoZSBicm93c2VyIGRvZXNuJ3RcbiAgICAgIC8vIHN1cHBvcnQgdGhlIGBoYXNoY2hhbmdlYCBldmVudCwgSFRNTDUgaGlzdG9yeSwgb3IgdGhlIHVzZXIgd2FudHNcbiAgICAgIC8vIGBoYXNoQ2hhbmdlYCBidXQgbm90IGBwdXNoU3RhdGVgLlxuICAgICAgaWYgKCF0aGlzLl9oYXNIYXNoQ2hhbmdlICYmIHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiAhdGhpcy5fdXNlUHVzaFN0YXRlKSB7XG4gICAgICAgIHRoaXMuaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgIHRoaXMuaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0OjAnO1xuICAgICAgICB0aGlzLmlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLmlmcmFtZS50YWJJbmRleCA9IC0xO1xuICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIC8vIFVzaW5nIGBhcHBlbmRDaGlsZGAgd2lsbCB0aHJvdyBvbiBJRSA8IDkgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCByZWFkeS5cbiAgICAgICAgdmFyIGlXaW5kb3cgPSBib2R5Lmluc2VydEJlZm9yZSh0aGlzLmlmcmFtZSwgYm9keS5maXJzdENoaWxkKS5jb250ZW50V2luZG93O1xuICAgICAgICBpV2luZG93LmRvY3VtZW50Lm9wZW4oKTtcbiAgICAgICAgaVdpbmRvdy5kb2N1bWVudC5jbG9zZSgpO1xuICAgICAgICBpV2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIycgKyB0aGlzLmZyYWdtZW50O1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgYSBjcm9zcy1wbGF0Zm9ybSBgYWRkRXZlbnRMaXN0ZW5lcmAgc2hpbSBmb3Igb2xkZXIgYnJvd3NlcnMuXG4gICAgICB2YXIgYWRkRXZlbnRMaXN0ZW5lciA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IGZ1bmN0aW9uKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIGF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIERlcGVuZGluZyBvbiB3aGV0aGVyIHdlJ3JlIHVzaW5nIHB1c2hTdGF0ZSBvciBoYXNoZXMsIGFuZCB3aGV0aGVyXG4gICAgICAvLyAnb25oYXNoY2hhbmdlJyBpcyBzdXBwb3J0ZWQsIGRldGVybWluZSBob3cgd2UgY2hlY2sgdGhlIFVSTCBzdGF0ZS5cbiAgICAgIGlmICh0aGlzLl91c2VQdXNoU3RhdGUpIHtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3VzZUhhc2hDaGFuZ2UgJiYgIXRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrVXJsLCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB0aGlzLl9jaGVja1VybEludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5jaGVja1VybCwgdGhpcy5pbnRlcnZhbCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnNpbGVudCkgcmV0dXJuIHRoaXMubG9hZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBEaXNhYmxlIEJhY2tib25lLmhpc3RvcnksIHBlcmhhcHMgdGVtcG9yYXJpbHkuIE5vdCB1c2VmdWwgaW4gYSByZWFsIGFwcCxcbiAgICAvLyBidXQgcG9zc2libHkgdXNlZnVsIGZvciB1bml0IHRlc3RpbmcgUm91dGVycy5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIEFkZCBhIGNyb3NzLXBsYXRmb3JtIGByZW1vdmVFdmVudExpc3RlbmVyYCBzaGltIGZvciBvbGRlciBicm93c2Vycy5cbiAgICAgIHZhciByZW1vdmVFdmVudExpc3RlbmVyID0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgfHwgZnVuY3Rpb24oZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICByZXR1cm4gZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgfTtcblxuICAgICAgLy8gUmVtb3ZlIHdpbmRvdyBsaXN0ZW5lcnMuXG4gICAgICBpZiAodGhpcy5fdXNlUHVzaFN0YXRlKSB7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl91c2VIYXNoQ2hhbmdlICYmICF0aGlzLmlmcmFtZSkge1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCwgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbiB1cCB0aGUgaWZyYW1lIGlmIG5lY2Vzc2FyeS5cbiAgICAgIGlmICh0aGlzLmlmcmFtZSkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lKTtcbiAgICAgICAgdGhpcy5pZnJhbWUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTb21lIGVudmlyb25tZW50cyB3aWxsIHRocm93IHdoZW4gY2xlYXJpbmcgYW4gdW5kZWZpbmVkIGludGVydmFsLlxuICAgICAgaWYgKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpIGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCk7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgcm91dGUgdG8gYmUgdGVzdGVkIHdoZW4gdGhlIGZyYWdtZW50IGNoYW5nZXMuIFJvdXRlcyBhZGRlZCBsYXRlclxuICAgIC8vIG1heSBvdmVycmlkZSBwcmV2aW91cyByb3V0ZXMuXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5oYW5kbGVycy51bnNoaWZ0KHtyb3V0ZTogcm91dGUsIGNhbGxiYWNrOiBjYWxsYmFja30pO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgdGhlIGN1cnJlbnQgVVJMIHRvIHNlZSBpZiBpdCBoYXMgY2hhbmdlZCwgYW5kIGlmIGl0IGhhcyxcbiAgICAvLyBjYWxscyBgbG9hZFVybGAsIG5vcm1hbGl6aW5nIGFjcm9zcyB0aGUgaGlkZGVuIGlmcmFtZS5cbiAgICBjaGVja1VybDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KCk7XG5cbiAgICAgIC8vIElmIHRoZSB1c2VyIHByZXNzZWQgdGhlIGJhY2sgYnV0dG9uLCB0aGUgaWZyYW1lJ3MgaGFzaCB3aWxsIGhhdmVcbiAgICAgIC8vIGNoYW5nZWQgYW5kIHdlIHNob3VsZCB1c2UgdGhhdCBmb3IgY29tcGFyaXNvbi5cbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50ICYmIHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLmdldEhhc2godGhpcy5pZnJhbWUuY29udGVudFdpbmRvdyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAodGhpcy5pZnJhbWUpIHRoaXMubmF2aWdhdGUoY3VycmVudCk7XG4gICAgICB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gQXR0ZW1wdCB0byBsb2FkIHRoZSBjdXJyZW50IFVSTCBmcmFnbWVudC4gSWYgYSByb3V0ZSBzdWNjZWVkcyB3aXRoIGFcbiAgICAvLyBtYXRjaCwgcmV0dXJucyBgdHJ1ZWAuIElmIG5vIGRlZmluZWQgcm91dGVzIG1hdGNoZXMgdGhlIGZyYWdtZW50LFxuICAgIC8vIHJldHVybnMgYGZhbHNlYC5cbiAgICBsb2FkVXJsOiBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgLy8gSWYgdGhlIHJvb3QgZG9lc24ndCBtYXRjaCwgbm8gcm91dGVzIGNhbiBtYXRjaCBlaXRoZXIuXG4gICAgICBpZiAoIXRoaXMubWF0Y2hSb290KCkpIHJldHVybiBmYWxzZTtcbiAgICAgIGZyYWdtZW50ID0gdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoZnJhZ21lbnQpO1xuICAgICAgcmV0dXJuIF8uc29tZSh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XG4gICAgICAgICAgaGFuZGxlci5jYWxsYmFjayhmcmFnbWVudCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBTYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGFzaCBoaXN0b3J5LCBvciByZXBsYWNlIHRoZSBVUkwgc3RhdGUgaWYgdGhlXG4gICAgLy8gJ3JlcGxhY2UnIG9wdGlvbiBpcyBwYXNzZWQuIFlvdSBhcmUgcmVzcG9uc2libGUgZm9yIHByb3Blcmx5IFVSTC1lbmNvZGluZ1xuICAgIC8vIHRoZSBmcmFnbWVudCBpbiBhZHZhbmNlLlxuICAgIC8vXG4gICAgLy8gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBjb250YWluIGB0cmlnZ2VyOiB0cnVlYCBpZiB5b3Ugd2lzaCB0byBoYXZlIHRoZVxuICAgIC8vIHJvdXRlIGNhbGxiYWNrIGJlIGZpcmVkIChub3QgdXN1YWxseSBkZXNpcmFibGUpLCBvciBgcmVwbGFjZTogdHJ1ZWAsIGlmXG4gICAgLy8geW91IHdpc2ggdG8gbW9kaWZ5IHRoZSBjdXJyZW50IFVSTCB3aXRob3V0IGFkZGluZyBhbiBlbnRyeSB0byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghSGlzdG9yeS5zdGFydGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucyA9PT0gdHJ1ZSkgb3B0aW9ucyA9IHt0cmlnZ2VyOiAhIW9wdGlvbnN9O1xuXG4gICAgICAvLyBOb3JtYWxpemUgdGhlIGZyYWdtZW50LlxuICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50IHx8ICcnKTtcblxuICAgICAgLy8gRG9uJ3QgaW5jbHVkZSBhIHRyYWlsaW5nIHNsYXNoIG9uIHRoZSByb290LlxuICAgICAgdmFyIHJvb3RQYXRoID0gdGhpcy5yb290O1xuICAgICAgaWYgKGZyYWdtZW50ID09PSAnJyB8fCBmcmFnbWVudC5jaGFyQXQoMCkgPT09ICc/Jykge1xuICAgICAgICByb290UGF0aCA9IHJvb3RQYXRoLnNsaWNlKDAsIC0xKSB8fCAnLyc7XG4gICAgICB9XG4gICAgICB2YXIgdXJsID0gcm9vdFBhdGggKyBmcmFnbWVudDtcblxuICAgICAgLy8gU3RyaXAgdGhlIGhhc2ggYW5kIGRlY29kZSBmb3IgbWF0Y2hpbmcuXG4gICAgICBmcmFnbWVudCA9IHRoaXMuZGVjb2RlRnJhZ21lbnQoZnJhZ21lbnQucmVwbGFjZShwYXRoU3RyaXBwZXIsICcnKSk7XG5cbiAgICAgIGlmICh0aGlzLmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgdGhpcy5mcmFnbWVudCA9IGZyYWdtZW50O1xuXG4gICAgICAvLyBJZiBwdXNoU3RhdGUgaXMgYXZhaWxhYmxlLCB3ZSB1c2UgaXQgdG8gc2V0IHRoZSBmcmFnbWVudCBhcyBhIHJlYWwgVVJMLlxuICAgICAgaWYgKHRoaXMuX3VzZVB1c2hTdGF0ZSkge1xuICAgICAgICB0aGlzLmhpc3Rvcnlbb3B0aW9ucy5yZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oe30sIGRvY3VtZW50LnRpdGxlLCB1cmwpO1xuXG4gICAgICAvLyBJZiBoYXNoIGNoYW5nZXMgaGF2ZW4ndCBiZWVuIGV4cGxpY2l0bHkgZGlzYWJsZWQsIHVwZGF0ZSB0aGUgaGFzaFxuICAgICAgLy8gZnJhZ21lbnQgdG8gc3RvcmUgaGlzdG9yeS5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUhhc2godGhpcy5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIGlmICh0aGlzLmlmcmFtZSAmJiBmcmFnbWVudCAhPT0gdGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cpKSB7XG4gICAgICAgICAgdmFyIGlXaW5kb3cgPSB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93O1xuXG4gICAgICAgICAgLy8gT3BlbmluZyBhbmQgY2xvc2luZyB0aGUgaWZyYW1lIHRyaWNrcyBJRTcgYW5kIGVhcmxpZXIgdG8gcHVzaCBhXG4gICAgICAgICAgLy8gaGlzdG9yeSBlbnRyeSBvbiBoYXNoLXRhZyBjaGFuZ2UuICBXaGVuIHJlcGxhY2UgaXMgdHJ1ZSwgd2UgZG9uJ3RcbiAgICAgICAgICAvLyB3YW50IHRoaXMuXG4gICAgICAgICAgaWYgKCFvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgICAgICAgIGlXaW5kb3cuZG9jdW1lbnQub3BlbigpO1xuICAgICAgICAgICAgaVdpbmRvdy5kb2N1bWVudC5jbG9zZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUhhc2goaVdpbmRvdy5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIH1cblxuICAgICAgLy8gSWYgeW91J3ZlIHRvbGQgdXMgdGhhdCB5b3UgZXhwbGljaXRseSBkb24ndCB3YW50IGZhbGxiYWNrIGhhc2hjaGFuZ2UtXG4gICAgICAvLyBiYXNlZCBoaXN0b3J5LCB0aGVuIGBuYXZpZ2F0ZWAgYmVjb21lcyBhIHBhZ2UgcmVmcmVzaC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLmFzc2lnbih1cmwpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcikgcmV0dXJuIHRoaXMubG9hZFVybChmcmFnbWVudCk7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSB0aGUgaGFzaCBsb2NhdGlvbiwgZWl0aGVyIHJlcGxhY2luZyB0aGUgY3VycmVudCBlbnRyeSwgb3IgYWRkaW5nXG4gICAgLy8gYSBuZXcgb25lIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uKGxvY2F0aW9uLCBmcmFnbWVudCwgcmVwbGFjZSkge1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgdmFyIGhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sICcnKTtcbiAgICAgICAgbG9jYXRpb24ucmVwbGFjZShocmVmICsgJyMnICsgZnJhZ21lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU29tZSBicm93c2VycyByZXF1aXJlIHRoYXQgYGhhc2hgIGNvbnRhaW5zIGEgbGVhZGluZyAjLlxuICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyMnICsgZnJhZ21lbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBCYWNrYm9uZS5oaXN0b3J5LlxuICBCYWNrYm9uZS5oaXN0b3J5ID0gbmV3IEhpc3Rvcnk7XG5cbiAgLy8gSGVscGVyc1xuICAvLyAtLS0tLS0tXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiBmb3Igc3ViY2xhc3Nlcy5cbiAgLy8gU2ltaWxhciB0byBgZ29vZy5pbmhlcml0c2AsIGJ1dCB1c2VzIGEgaGFzaCBvZiBwcm90b3R5cGUgcHJvcGVydGllcyBhbmRcbiAgLy8gY2xhc3MgcHJvcGVydGllcyB0byBiZSBleHRlbmRlZC5cbiAgdmFyIGV4dGVuZCA9IGZ1bmN0aW9uKHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgdmFyIGNoaWxkO1xuXG4gICAgLy8gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGZvciB0aGUgbmV3IHN1YmNsYXNzIGlzIGVpdGhlciBkZWZpbmVkIGJ5IHlvdVxuICAgIC8vICh0aGUgXCJjb25zdHJ1Y3RvclwiIHByb3BlcnR5IGluIHlvdXIgYGV4dGVuZGAgZGVmaW5pdGlvbiksIG9yIGRlZmF1bHRlZFxuICAgIC8vIGJ5IHVzIHRvIHNpbXBseSBjYWxsIHRoZSBwYXJlbnQgY29uc3RydWN0b3IuXG4gICAgaWYgKHByb3RvUHJvcHMgJiYgXy5oYXMocHJvdG9Qcm9wcywgJ2NvbnN0cnVjdG9yJykpIHtcbiAgICAgIGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGQgPSBmdW5jdGlvbigpeyByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG4gICAgfVxuXG4gICAgLy8gQWRkIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaWYgc3VwcGxpZWQuXG4gICAgXy5leHRlbmQoY2hpbGQsIHBhcmVudCwgc3RhdGljUHJvcHMpO1xuXG4gICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgY2hhaW4gdG8gaW5oZXJpdCBmcm9tIGBwYXJlbnRgLCB3aXRob3V0IGNhbGxpbmdcbiAgICAvLyBgcGFyZW50YCdzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFuZCBhZGQgdGhlIHByb3RvdHlwZSBwcm9wZXJ0aWVzLlxuICAgIGNoaWxkLnByb3RvdHlwZSA9IF8uY3JlYXRlKHBhcmVudC5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGNoaWxkLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNoaWxkO1xuXG4gICAgLy8gU2V0IGEgY29udmVuaWVuY2UgcHJvcGVydHkgaW4gY2FzZSB0aGUgcGFyZW50J3MgcHJvdG90eXBlIGlzIG5lZWRlZFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7XG5cbiAgICByZXR1cm4gY2hpbGQ7XG4gIH07XG5cbiAgLy8gU2V0IHVwIGluaGVyaXRhbmNlIGZvciB0aGUgbW9kZWwsIGNvbGxlY3Rpb24sIHJvdXRlciwgdmlldyBhbmQgaGlzdG9yeS5cbiAgTW9kZWwuZXh0ZW5kID0gQ29sbGVjdGlvbi5leHRlbmQgPSBSb3V0ZXIuZXh0ZW5kID0gVmlldy5leHRlbmQgPSBIaXN0b3J5LmV4dGVuZCA9IGV4dGVuZDtcblxuICAvLyBUaHJvdyBhbiBlcnJvciB3aGVuIGEgVVJMIGlzIG5lZWRlZCwgYW5kIG5vbmUgaXMgc3VwcGxpZWQuXG4gIHZhciB1cmxFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSBcInVybFwiIHByb3BlcnR5IG9yIGZ1bmN0aW9uIG11c3QgYmUgc3BlY2lmaWVkJyk7XG4gIH07XG5cbiAgLy8gV3JhcCBhbiBvcHRpb25hbCBlcnJvciBjYWxsYmFjayB3aXRoIGEgZmFsbGJhY2sgZXJyb3IgZXZlbnQuXG4gIHZhciB3cmFwRXJyb3IgPSBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG4gICAgb3B0aW9ucy5lcnJvciA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgIGlmIChlcnJvcikgZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIG1vZGVsLnRyaWdnZXIoJ2Vycm9yJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIEJhY2tib25lO1xufSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL34vYmFja2JvbmUvYmFja2JvbmUuanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZXhwb3J0c2Agb24gdGhlIHNlcnZlci5cbiAgdmFyIHJvb3QgPSB0aGlzO1xuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuXG4gIHZhciBwcmV2aW91c1VuZGVyc2NvcmUgPSByb290Ll87XG5cbiAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjpcbiAgdmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsIE9ialByb3RvID0gT2JqZWN0LnByb3RvdHlwZSwgRnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXJcbiAgICBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLFxuICAgIHNsaWNlICAgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgIHRvU3RyaW5nICAgICAgICAgPSBPYmpQcm90by50b1N0cmluZyxcbiAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlXG4gIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuICB2YXJcbiAgICBuYXRpdmVJc0FycmF5ICAgICAgPSBBcnJheS5pc0FycmF5LFxuICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLFxuICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kLFxuICAgIG5hdGl2ZUNyZWF0ZSAgICAgICA9IE9iamVjdC5jcmVhdGU7XG5cbiAgLy8gTmFrZWQgZnVuY3Rpb24gcmVmZXJlbmNlIGZvciBzdXJyb2dhdGUtcHJvdG90eXBlLXN3YXBwaW5nLlxuICB2YXIgQ3RvciA9IGZ1bmN0aW9uKCl7fTtcblxuICAvLyBDcmVhdGUgYSBzYWZlIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yIHVzZSBiZWxvdy5cbiAgdmFyIF8gPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgXykgcmV0dXJuIG9iajtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgXykpIHJldHVybiBuZXcgXyhvYmopO1xuICAgIHRoaXMuX3dyYXBwZWQgPSBvYmo7XG4gIH07XG5cbiAgLy8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGhcbiAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgYHJlcXVpcmUoKWAgQVBJLiBJZiB3ZSdyZSBpblxuICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOC4zJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIG90aGVyKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBIG1vc3RseS1pbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBjYWxsYmFja3MgdGhhdCBjYW4gYmUgYXBwbGllZFxuICAvLyB0byBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdGhlIGRlc2lyZWQgcmVzdWx0IOKAlCBlaXRoZXJcbiAgLy8gaWRlbnRpdHksIGFuIGFyYml0cmFyeSBjYWxsYmFjaywgYSBwcm9wZXJ0eSBtYXRjaGVyLCBvciBhIHByb3BlcnR5IGFjY2Vzc29yLlxuICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIF8uaWRlbnRpdHk7XG4gICAgaWYgKF8uaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCk7XG4gICAgaWYgKF8uaXNPYmplY3QodmFsdWUpKSByZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTtcbiAgICByZXR1cm4gXy5wcm9wZXJ0eSh2YWx1ZSk7XG4gIH07XG4gIF8uaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBjYih2YWx1ZSwgY29udGV4dCwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCB1bmRlZmluZWRPbmx5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoIDwgMiB8fCBvYmogPT0gbnVsbCkgcmV0dXJuIG9iajtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF0sXG4gICAgICAgICAgICBrZXlzID0ga2V5c0Z1bmMoc291cmNlKSxcbiAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBpZiAoIXVuZGVmaW5lZE9ubHkgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhIG5ldyBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIGFub3RoZXIuXG4gIHZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpIHJldHVybiB7fTtcbiAgICBpZiAobmF0aXZlQ3JlYXRlKSByZXR1cm4gbmF0aXZlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBDdG9yO1xuICAgIEN0b3IucHJvdG90eXBlID0gbnVsbDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBwcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3RcbiAgLy8gUmVsYXRlZDogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGhcbiAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTRcbiAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gIHZhciBnZXRMZW5ndGggPSBwcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gIHZhciBpc0FycmF5TGlrZSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pO1xuICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8PSBNQVhfQVJSQVlfSU5ERVg7XG4gIH07XG5cbiAgLy8gQ29sbGVjdGlvbiBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUaGUgY29ybmVyc3RvbmUsIGFuIGBlYWNoYCBpbXBsZW1lbnRhdGlvbiwgYWthIGBmb3JFYWNoYC5cbiAgLy8gSGFuZGxlcyByYXcgb2JqZWN0cyBpbiBhZGRpdGlvbiB0byBhcnJheS1saWtlcy4gVHJlYXRzIGFsbFxuICAvLyBzcGFyc2UgYXJyYXktbGlrZXMgYXMgaWYgdGhleSB3ZXJlIGRlbnNlLlxuICBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2ldLCBpLCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpba2V5c1tpXV0sIGtleXNbaV0sIG9iaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuXG4gIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICByZXN1bHRzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgcmVzdWx0c1tpbmRleF0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIHJlZHVjaW5nIGZ1bmN0aW9uIGl0ZXJhdGluZyBsZWZ0IG9yIHJpZ2h0LlxuICBmdW5jdGlvbiBjcmVhdGVSZWR1Y2UoZGlyKSB7XG4gICAgLy8gT3B0aW1pemVkIGl0ZXJhdG9yIGZ1bmN0aW9uIGFzIHVzaW5nIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAvLyBpbiB0aGUgbWFpbiBmdW5jdGlvbiB3aWxsIGRlb3B0aW1pemUgdGhlLCBzZWUgIzE5OTEuXG4gICAgZnVuY3Rpb24gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCkge1xuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGNvbnRleHQpIHtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCk7XG4gICAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpbml0aWFsIHZhbHVlIGlmIG5vbmUgaXMgcHJvdmlkZWQuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgbWVtbyA9IG9ialtrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleF07XG4gICAgICAgIGluZGV4ICs9IGRpcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGtleSA9IF8uZmluZEluZGV4KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gXy5maW5kS2V5KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gZnVuY3Rpb24ob2JqLCBtZXRob2QpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgaXNGdW5jID0gXy5pc0Z1bmN0aW9uKG1ldGhvZCk7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNGdW5jID8gbWV0aG9kIDogdmFsdWVbbWV0aG9kXTtcbiAgICAgIHJldHVybiBmdW5jID09IG51bGwgPyBmdW5jIDogZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IEluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSBJbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSA8IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkIDwgbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSBJbmZpbml0eSAmJiByZXN1bHQgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFNodWZmbGUgYSBjb2xsZWN0aW9uLCB1c2luZyB0aGUgbW9kZXJuIHZlcnNpb24gb2YgdGhlXG4gIC8vIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXLigJNZYXRlc19zaHVmZmxlKS5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHNldCA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBzZXQubGVuZ3RoO1xuICAgIHZhciBzaHVmZmxlZCA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwLCByYW5kOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmFuZCA9IF8ucmFuZG9tKDAsIGluZGV4KTtcbiAgICAgIGlmIChyYW5kICE9PSBpbmRleCkgc2h1ZmZsZWRbaW5kZXhdID0gc2h1ZmZsZWRbcmFuZF07XG4gICAgICBzaHVmZmxlZFtyYW5kXSA9IHNldFtpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBzaHVmZmxlZDtcbiAgfTtcblxuICAvLyBTYW1wbGUgKipuKiogcmFuZG9tIHZhbHVlcyBmcm9tIGEgY29sbGVjdGlvbi5cbiAgLy8gSWYgKipuKiogaXMgbm90IHNwZWNpZmllZCwgcmV0dXJucyBhIHNpbmdsZSByYW5kb20gZWxlbWVudC5cbiAgLy8gVGhlIGludGVybmFsIGBndWFyZGAgYXJndW1lbnQgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgbWFwYC5cbiAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xuICAgICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldO1xuICAgIH1cbiAgICByZXR1cm4gXy5zaHVmZmxlKG9iaikuc2xpY2UoMCwgTWF0aC5tYXgoMCwgbikpO1xuICB9O1xuXG4gIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRlZS5cbiAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KVxuICAgICAgfTtcbiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7XG4gICAgICB2YXIgYiA9IHJpZ2h0LmNyaXRlcmlhO1xuICAgICAgaWYgKGEgIT09IGIpIHtcbiAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7XG4gICAgICAgIGlmIChhIDwgYiB8fCBiID09PSB2b2lkIDApIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7XG4gICAgfSksICd2YWx1ZScpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSBcImdyb3VwIGJ5XCIgb3BlcmF0aW9ucy5cbiAgdmFyIGdyb3VwID0gZnVuY3Rpb24oYmVoYXZpb3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGtleSA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgb2JqKTtcbiAgICAgICAgYmVoYXZpb3IocmVzdWx0LCB2YWx1ZSwga2V5KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGVcbiAgLy8gdG8gZ3JvdXAgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjcml0ZXJpb24uXG4gIF8uZ3JvdXBCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XSsrOyBlbHNlIHJlc3VsdFtrZXldID0gMTtcbiAgfSk7XG5cbiAgLy8gU2FmZWx5IGNyZWF0ZSBhIHJlYWwsIGxpdmUgYXJyYXkgZnJvbSBhbnl0aGluZyBpdGVyYWJsZS5cbiAgXy50b0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiBbXTtcbiAgICBpZiAoXy5pc0FycmF5KG9iaikpIHJldHVybiBzbGljZS5jYWxsKG9iaik7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpO1xuICAgIHJldHVybiBfLnZhbHVlcyhvYmopO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIG9iamVjdC5cbiAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDtcbiAgICByZXR1cm4gaXNBcnJheUxpa2Uob2JqKSA/IG9iai5sZW5ndGggOiBfLmtleXMob2JqKS5sZW5ndGg7XG4gIH07XG5cbiAgLy8gU3BsaXQgYSBjb2xsZWN0aW9uIGludG8gdHdvIGFycmF5czogb25lIHdob3NlIGVsZW1lbnRzIGFsbCBzYXRpc2Z5IHRoZSBnaXZlblxuICAvLyBwcmVkaWNhdGUsIGFuZCBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIGRvIG5vdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXG4gIF8ucGFydGl0aW9uID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBwYXNzID0gW10sIGZhaWwgPSBbXTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICAgIChwcmVkaWNhdGUodmFsdWUsIGtleSwgb2JqKSA/IHBhc3MgOiBmYWlsKS5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW3Bhc3MsIGZhaWxdO1xuICB9O1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbMF07XG4gICAgcmV0dXJuIF8uaW5pdGlhbChhcnJheSwgYXJyYXkubGVuZ3RoIC0gbik7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEVzcGVjaWFsbHkgdXNlZnVsIG9uXG4gIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluXG4gIC8vIHRoZSBhcnJheSwgZXhjbHVkaW5nIHRoZSBsYXN0IE4uXG4gIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSAobiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pKSk7XG4gIH07XG5cbiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIF8ucmVzdChhcnJheSwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gbikpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgdGFpbGAgYW5kIGBkcm9wYC5cbiAgLy8gRXNwZWNpYWxseSB1c2VmdWwgb24gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgYW4gKipuKiogd2lsbCByZXR1cm5cbiAgLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLnJlc3QgPSBfLnRhaWwgPSBfLmRyb3AgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgbiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pO1xuICB9O1xuXG4gIC8vIFRyaW0gb3V0IGFsbCBmYWxzeSB2YWx1ZXMgZnJvbSBhbiBhcnJheS5cbiAgXy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIF8uaWRlbnRpdHkpO1xuICB9O1xuXG4gIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi5cbiAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbihpbnB1dCwgc2hhbGxvdywgc3RyaWN0LCBzdGFydEluZGV4KSB7XG4gICAgdmFyIG91dHB1dCA9IFtdLCBpZHggPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIGxlbmd0aCA9IGdldExlbmd0aChpbnB1dCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChfLmlzQXJyYXkodmFsdWUpIHx8IF8uaXNBcmd1bWVudHModmFsdWUpKSkge1xuICAgICAgICAvL2ZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0XG4gICAgICAgIGlmICghc2hhbGxvdykgdmFsdWUgPSBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QpO1xuICAgICAgICB2YXIgaiA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgb3V0cHV0Lmxlbmd0aCArPSBsZW47XG4gICAgICAgIHdoaWxlIChqIDwgbGVuKSB7XG4gICAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlW2orK107XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCkge1xuICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG5cbiAgLy8gRmxhdHRlbiBvdXQgYW4gYXJyYXksIGVpdGhlciByZWN1cnNpdmVseSAoYnkgZGVmYXVsdCksIG9yIGp1c3Qgb25lIGxldmVsLlxuICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykge1xuICAgIHJldHVybiBmbGF0dGVuKGFycmF5LCBzaGFsbG93LCBmYWxzZSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuXG4gIF8ud2l0aG91dCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeVxuICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uXG4gIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuXG4gIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmICghXy5pc0Jvb2xlYW4oaXNTb3J0ZWQpKSB7XG4gICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7XG4gICAgICBpdGVyYXRlZSA9IGlzU29ydGVkO1xuICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldLFxuICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7XG4gICAgICBpZiAoaXNTb3J0ZWQpIHtcbiAgICAgICAgaWYgKCFpIHx8IHNlZW4gIT09IGNvbXB1dGVkKSByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIHNlZW4gPSBjb21wdXRlZDtcbiAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKHNlZW4sIGNvbXB1dGVkKSkge1xuICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFfLmNvbnRhaW5zKHJlc3VsdCwgdmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2ZcbiAgLy8gdGhlIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8udW5pb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZVxuICAvLyBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGFycmF5W2ldO1xuICAgICAgaWYgKF8uY29udGFpbnMocmVzdWx0LCBpdGVtKSkgY29udGludWU7XG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN0ID0gZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpO1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKHJlc3QsIHZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuemlwKGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ29tcGxlbWVudCBvZiBfLnppcC4gVW56aXAgYWNjZXB0cyBhbiBhcnJheSBvZiBhcnJheXMgYW5kIGdyb3Vwc1xuICAvLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXNcbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDb252ZXJ0cyBsaXN0cyBpbnRvIG9iamVjdHMuIFBhc3MgZWl0aGVyIGEgc2luZ2xlIGFycmF5IG9mIGBba2V5LCB2YWx1ZV1gXG4gIC8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZlxuICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoZGlyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyLCBwcmVkaWNhdGVGaW5kLCBzb3J0ZWRJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7XG4gICAgICB2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICAgICAgaSA9IGlkeCA+PSAwID8gaWR4IDogTWF0aC5tYXgoaWR4ICsgbGVuZ3RoLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksXG4gIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuXG4gIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYFxuICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLlxuICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7XG4gIF8ubGFzdEluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigtMSwgXy5maW5kTGFzdEluZGV4KTtcblxuICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG4gIC8vIHRoZSBuYXRpdmUgUHl0aG9uIGByYW5nZSgpYCBmdW5jdGlvbi4gU2VlXG4gIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG4gIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICAgIGlmIChzdG9wID09IG51bGwpIHtcbiAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBzdGVwID0gc3RlcCB8fCAxO1xuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTtcbiAgICB2YXIgcmFuZ2UgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkge1xuICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvclxuICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHNcbiAgdmFyIGV4ZWN1dGVCb3VuZCA9IGZ1bmN0aW9uKHNvdXJjZUZ1bmMsIGJvdW5kRnVuYywgY29udGV4dCwgY2FsbGluZ0NvbnRleHQsIGFyZ3MpIHtcbiAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIHZhciBzZWxmID0gYmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7XG4gICAgdmFyIHJlc3VsdCA9IHNvdXJjZUZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdCAoYXNzaWduaW5nIGB0aGlzYCwgYW5kIGFyZ3VtZW50cyxcbiAgLy8gb3B0aW9uYWxseSkuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBGdW5jdGlvbi5iaW5kYCBpZlxuICAvLyBhdmFpbGFibGUuXG4gIF8uYmluZCA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQpIHtcbiAgICBpZiAobmF0aXZlQmluZCAmJiBmdW5jLmJpbmQgPT09IG5hdGl2ZUJpbmQpIHJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgY29udGV4dCwgdGhpcywgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gUGFydGlhbGx5IGFwcGx5IGEgZnVuY3Rpb24gYnkgY3JlYXRpbmcgYSB2ZXJzaW9uIHRoYXQgaGFzIGhhZCBzb21lIG9mIGl0c1xuICAvLyBhcmd1bWVudHMgcHJlLWZpbGxlZCwgd2l0aG91dCBjaGFuZ2luZyBpdHMgZHluYW1pYyBgdGhpc2AgY29udGV4dC4gXyBhY3RzXG4gIC8vIGFzIGEgcGxhY2Vob2xkZXIsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmUgcHJlLWZpbGxlZC5cbiAgXy5wYXJ0aWFsID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciBib3VuZEFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLCBsZW5ndGggPSBib3VuZEFyZ3MubGVuZ3RoO1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcmdzW2ldID0gYm91bmRBcmdzW2ldID09PSBfID8gYXJndW1lbnRzW3Bvc2l0aW9uKytdIDogYm91bmRBcmdzW2ldO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYXJndW1lbnRzLmxlbmd0aCkgYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7XG4gICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCB0aGlzLCB0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIHJldHVybiBib3VuZDtcbiAgfTtcblxuICAvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHNcbiAgLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzXG4gIC8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC5cbiAgXy5iaW5kQWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGksIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsIGtleTtcbiAgICBpZiAobGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcycpO1xuICAgIGZvciAoaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gYXJndW1lbnRzW2ldO1xuICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghXy5oYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBjYWNoZVthZGRyZXNzXTtcbiAgICB9O1xuICAgIG1lbW9pemUuY2FjaGUgPSB7fTtcbiAgICByZXR1cm4gbWVtb2l6ZTtcbiAgfTtcblxuICAvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzXG4gIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cbiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH07XG5cbiAgLy8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzXG4gIC8vIGNsZWFyZWQuXG4gIF8uZGVmZXIgPSBfLnBhcnRpYWwoXy5kZWxheSwgXywgMSk7XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG4gIC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuICAvLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG4gIC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG4gIC8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuICBfLnRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgIHZhciBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XG4gICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBwcmV2aW91cyA9IDA7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vdyA9IF8ubm93KCk7XG4gICAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsYXN0ID0gXy5ub3coKSAtIHRpbWVzdGFtcDtcblxuICAgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB0aW1lc3RhbXAgPSBfLm5vdygpO1xuICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgLy8gT2JqZWN0IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gS2V5cyBpbiBJRSA8IDkgdGhhdCB3b24ndCBiZSBpdGVyYXRlZCBieSBgZm9yIGtleSBpbiAuLi5gIGFuZCB0aHVzIG1pc3NlZC5cbiAgdmFyIGhhc0VudW1CdWcgPSAhe3RvU3RyaW5nOiBudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKTtcbiAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFsndmFsdWVPZicsICdpc1Byb3RvdHlwZU9mJywgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLCAnaGFzT3duUHJvcGVydHknLCAndG9Mb2NhbGVTdHJpbmcnXTtcblxuICBmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cykge1xuICAgIHZhciBub25FbnVtSWR4ID0gbm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aDtcbiAgICB2YXIgY29uc3RydWN0b3IgPSBvYmouY29uc3RydWN0b3I7XG4gICAgdmFyIHByb3RvID0gKF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlKSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoXy5oYXMob2JqLCBwcm9wKSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkga2V5cy5wdXNoKHByb3ApO1xuXG4gICAgd2hpbGUgKG5vbkVudW1JZHgtLSkge1xuICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtcbiAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7XG4gICAgICAgIGtleXMucHVzaChwcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2BcbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuICBfLmFsbEtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlc1tpXSA9IG9ialtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdFxuICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdFxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHRzID0ge30sXG4gICAgICAgICAgY3VycmVudEtleTtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY3VycmVudEtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ29udmVydCBhbiBvYmplY3QgaW50byBhIGxpc3Qgb2YgYFtrZXksIHZhbHVlXWAgcGFpcnMuXG4gIF8ucGFpcnMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgcGFpcnMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07XG4gICAgfVxuICAgIHJldHVybiBwYWlycztcbiAgfTtcblxuICAvLyBJbnZlcnQgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiBhbiBvYmplY3QuIFRoZSB2YWx1ZXMgbXVzdCBiZSBzZXJpYWxpemFibGUuXG4gIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdFtvYmpba2V5c1tpXV1dID0ga2V5c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG4gIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgXG4gIF8uZnVuY3Rpb25zID0gXy5tZXRob2RzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpIG5hbWVzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWVzLnNvcnQoKTtcbiAgfTtcblxuICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS5cbiAgXy5leHRlbmQgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMpO1xuXG4gIC8vIEFzc2lnbnMgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIG93biBwcm9wZXJ0aWVzIGluIHRoZSBwYXNzZWQtaW4gb2JqZWN0KHMpXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3RcbiAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5waWNrID0gZnVuY3Rpb24ob2JqZWN0LCBvaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0ge30sIG9iaiA9IG9iamVjdCwgaXRlcmF0ZWUsIGtleXM7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChfLmlzRnVuY3Rpb24ob2l0ZXJhdGVlKSkge1xuICAgICAga2V5cyA9IF8uYWxsS2V5cyhvYmopO1xuICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKG9pdGVyYXRlZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7IHJldHVybiBrZXkgaW4gb2JqOyB9O1xuICAgICAgb2JqID0gT2JqZWN0KG9iaik7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgaWYgKGl0ZXJhdGVlKHZhbHVlLCBrZXksIG9iaikpIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCB3aXRob3V0IHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLm9taXQgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHtcbiAgICAgIGl0ZXJhdGVlID0gXy5uZWdhdGUoaXRlcmF0ZWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpLCBTdHJpbmcpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiAhXy5jb250YWlucyhrZXlzLCBrZXkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBfLmRlZmF1bHRzID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLCB0cnVlKTtcblxuICAvLyBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIHByb3RvdHlwZSBvYmplY3QuXG4gIC8vIElmIGFkZGl0aW9uYWwgcHJvcGVydGllcyBhcmUgcHJvdmlkZWQgdGhlbiB0aGV5IHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4gIC8vIGNyZWF0ZWQgb2JqZWN0LlxuICBfLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSwgcHJvcHMpIHtcbiAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIGlmIChwcm9wcykgXy5leHRlbmRPd24ocmVzdWx0LCBwcm9wcyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSAoc2hhbGxvdy1jbG9uZWQpIGR1cGxpY2F0ZSBvZiBhbiBvYmplY3QuXG4gIF8uY2xvbmUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmouc2xpY2UoKSA6IF8uZXh0ZW5kKHt9LCBvYmopO1xuICB9O1xuXG4gIC8vIEludm9rZXMgaW50ZXJjZXB0b3Igd2l0aCB0aGUgb2JqLCBhbmQgdGhlbiByZXR1cm5zIG9iai5cbiAgLy8gVGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4sIGluXG4gIC8vIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW4gdGhlIGNoYWluLlxuICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHtcbiAgICBpbnRlcmNlcHRvcihvYmopO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2YgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhhdHRycyksIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICFsZW5ndGg7XG4gICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cblxuICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLlxuICB2YXIgZXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykge1xuICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC5cbiAgICAvLyBTZWUgdGhlIFtIYXJtb255IGBlZ2FsYCBwcm9wb3NhbF0oaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsKS5cbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC5cbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGEgPT09IGI7XG4gICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuXG4gICAgaWYgKGEgaW5zdGFuY2VvZiBfKSBhID0gYS5fd3JhcHBlZDtcbiAgICBpZiAoYiBpbnN0YW5jZW9mIF8pIGIgPSBiLl93cmFwcGVkO1xuICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSk7XG4gICAgaWYgKGNsYXNzTmFtZSAhPT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgICAvLyBTdHJpbmdzLCBudW1iZXJzLCByZWd1bGFyIGV4cHJlc3Npb25zLCBkYXRlcywgYW5kIGJvb2xlYW5zIGFyZSBjb21wYXJlZCBieSB2YWx1ZS5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAvLyBSZWdFeHBzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgZm9yIGNvbXBhcmlzb24gKE5vdGU6ICcnICsgL2EvaSA9PT0gJy9hL2knKVxuICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGBcIjVcImAgaXNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZyhcIjVcIilgLlxuICAgICAgICByZXR1cm4gJycgKyBhID09PSAnJyArIGI7XG4gICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgICAgICAvLyBPYmplY3QoTmFOKSBpcyBlcXVpdmFsZW50IHRvIE5hTlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKF8uaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnBvcCgpO1xuICAgIGJTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cbiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBlcShhLCBiKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT9cbiAgLy8gQW4gXCJlbXB0eVwiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy5cbiAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50P1xuICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuICBfLmlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IuXG4gIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBfWydpcycgKyBuYW1lXSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRGVmaW5lIGEgZmFsbGJhY2sgdmVyc2lvbiBvZiB0aGUgbWV0aG9kIGluIGJyb3dzZXJzIChhaGVtLCBJRSA8IDkpLCB3aGVyZVxuICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgXCJBcmd1bWVudHNcIiB0eXBlLlxuICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkge1xuICAgIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBfLmhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgYW5kIGluIFNhZmFyaSA4ICgjMTkyOSkuXG4gIGlmICh0eXBlb2YgLy4vICE9ICdmdW5jdGlvbicgJiYgdHlwZW9mIEludDhBcnJheSAhPSAnb2JqZWN0Jykge1xuICAgIF8uaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgICB9O1xuICB9XG5cbiAgLy8gSXMgYSBnaXZlbiBvYmplY3QgYSBmaW5pdGUgbnVtYmVyP1xuICBfLmlzRmluaXRlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gPyAoTmFOIGlzIHRoZSBvbmx5IG51bWJlciB3aGljaCBkb2VzIG5vdCBlcXVhbCBpdHNlbGYpLlxuICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBvYmogIT09ICtvYmo7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/XG4gIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgZXF1YWwgdG8gbnVsbD9cbiAgXy5pc051bGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSBudWxsO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkP1xuICBfLmlzVW5kZWZpbmVkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdm9pZCAwO1xuICB9O1xuXG4gIC8vIFNob3J0Y3V0IGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gcHJvcGVydHkgZGlyZWN0bHlcbiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS5cbiAgXy5oYXMgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIF8ucHJvcGVydHkgPSBwcm9wZXJ0eTtcblxuICAvLyBHZW5lcmF0ZXMgYSBmdW5jdGlvbiBmb3IgYSBnaXZlbiBvYmplY3QgdGhhdCByZXR1cm5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT0gbnVsbCA/IGZ1bmN0aW9uKCl7fSA6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mXG4gIC8vIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLm1hdGNoZXIgPSBfLm1hdGNoZXMgPSBmdW5jdGlvbihhdHRycykge1xuICAgIGF0dHJzID0gXy5leHRlbmRPd24oe30sIGF0dHJzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5pc01hdGNoKG9iaiwgYXR0cnMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG4gIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBhY2N1bSA9IEFycmF5KE1hdGgubWF4KDAsIG4pKTtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpO1xuICAgIHJldHVybiBhY2N1bTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4IChpbmNsdXNpdmUpLlxuICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgaWYgKG1heCA9PSBudWxsKSB7XG4gICAgICBtYXggPSBtaW47XG4gICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgfTtcblxuICAvLyBBIChwb3NzaWJseSBmYXN0ZXIpIHdheSB0byBnZXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFzIGFuIGludGVnZXIuXG4gIF8ubm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9O1xuXG4gICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZFxuICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJztcbiAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpO1xuICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7XG4gICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBfLmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTtcbiAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApO1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBvZiB0aGUgbmFtZWQgYHByb3BlcnR5YCBpcyBhIGZ1bmN0aW9uIHRoZW4gaW52b2tlIGl0IHdpdGggdGhlXG4gIC8vIGBvYmplY3RgIGFzIGNvbnRleHQ7IG90aGVyd2lzZSwgcmV0dXJuIGl0LlxuICBfLnJlc3VsdCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGZhbGxiYWNrKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB2b2lkIDAgOiBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YWx1ZSA9IGZhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuICB9O1xuXG4gIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGludGVnZXIgaWQgKHVuaXF1ZSB3aXRoaW4gdGhlIGVudGlyZSBjbGllbnQgc2Vzc2lvbikuXG4gIC8vIFVzZWZ1bCBmb3IgdGVtcG9yYXJ5IERPTSBpZHMuXG4gIHZhciBpZENvdW50ZXIgPSAwO1xuICBfLnVuaXF1ZUlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIGlkID0gKytpZENvdW50ZXIgKyAnJztcbiAgICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbiAgfTtcblxuICAvLyBCeSBkZWZhdWx0LCBVbmRlcnNjb3JlIHVzZXMgRVJCLXN0eWxlIHRlbXBsYXRlIGRlbGltaXRlcnMsIGNoYW5nZSB0aGVcbiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgZXZhbHVhdGUgICAgOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgIGludGVycG9sYXRlIDogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlICAgICAgOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiAgICAgIFwiJ1wiLFxuICAgICdcXFxcJzogICAgICdcXFxcJyxcbiAgICAnXFxyJzogICAgICdyJyxcbiAgICAnXFxuJzogICAgICduJyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgdmFyIGVzY2FwZXIgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVyLCBlc2NhcGVDaGFyKTtcbiAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgZXNjYXBlICsgXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGludGVycG9sYXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgaW50ZXJwb2xhdGUgKyBcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChldmFsdWF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGUgKyBcIlxcbl9fcCs9J1wiO1xuICAgICAgfVxuXG4gICAgICAvLyBBZG9iZSBWTXMgbmVlZCB0aGUgbWF0Y2ggcmV0dXJuZWQgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBvZmZlc3QuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG4gICAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuXG4gICAgaWYgKCFzZXR0aW5ncy52YXJpYWJsZSkgc291cmNlID0gJ3dpdGgob2JqfHx7fSl7XFxuJyArIHNvdXJjZSArICd9XFxuJztcblxuICAgIHNvdXJjZSA9IFwidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLFwiICtcbiAgICAgIFwicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcXG5cIiArXG4gICAgICBzb3VyY2UgKyAncmV0dXJuIF9fcDtcXG4nO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uKGluc3RhbmNlLCBvYmopIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuX2NoYWluID8gXyhvYmopLmNoYWluKCkgOiBvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgXy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gX1tuYW1lXSA9IG9ialtuYW1lXTtcbiAgICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gW3RoaXMuX3dyYXBwZWRdO1xuICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiByZXN1bHQodGhpcywgZnVuYy5hcHBseShfLCBhcmdzKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEFkZCBhbGwgb2YgdGhlIFVuZGVyc2NvcmUgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgXy5taXhpbihfKTtcblxuICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDtcbiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoKG5hbWUgPT09ICdzaGlmdCcgfHwgbmFtZSA9PT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07XG4gICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRXh0cmFjdHMgdGhlIHJlc3VsdCBmcm9tIGEgd3JhcHBlZCBhbmQgY2hhaW5lZCBvYmplY3QuXG4gIF8ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbiAgLy8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9uc1xuICAvLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLlxuICBfLnByb3RvdHlwZS52YWx1ZU9mID0gXy5wcm90b3R5cGUudG9KU09OID0gXy5wcm90b3R5cGUudmFsdWU7XG5cbiAgXy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIEFNRCByZWdpc3RyYXRpb24gaGFwcGVucyBhdCB0aGUgZW5kIGZvciBjb21wYXRpYmlsaXR5IHdpdGggQU1EIGxvYWRlcnNcbiAgLy8gdGhhdCBtYXkgbm90IGVuZm9yY2UgbmV4dC10dXJuIHNlbWFudGljcyBvbiBtb2R1bGVzLiBFdmVuIHRob3VnaCBnZW5lcmFsXG4gIC8vIHByYWN0aWNlIGZvciBBTUQgcmVnaXN0cmF0aW9uIGlzIHRvIGJlIGFub255bW91cywgdW5kZXJzY29yZSByZWdpc3RlcnNcbiAgLy8gYXMgYSBuYW1lZCBtb2R1bGUgYmVjYXVzZSwgbGlrZSBqUXVlcnksIGl0IGlzIGEgYmFzZSBsaWJyYXJ5IHRoYXQgaXNcbiAgLy8gcG9wdWxhciBlbm91Z2ggdG8gYmUgYnVuZGxlZCBpbiBhIHRoaXJkIHBhcnR5IGxpYiwgYnV0IG5vdCBiZSBwYXJ0IG9mXG4gIC8vIGFuIEFNRCBsb2FkIHJlcXVlc3QuIFRob3NlIGNhc2VzIGNvdWxkIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYW5cbiAgLy8gYW5vbnltb3VzIGRlZmluZSgpIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgbG9hZGVyIHJlcXVlc3QuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoJ3VuZGVyc2NvcmUnLCBbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxufS5jYWxsKHRoaXMpKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi4vfi91bmRlcnNjb3JlL3VuZGVyc2NvcmUuanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjIuMi40XG4gKiBodHRwOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTYtMDUtMjBUMTc6MjNaXG4gKi9cblxuKGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG5cblx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHQvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcGVyIGB3aW5kb3dgXG5cdFx0Ly8gaXMgcHJlc2VudCwgZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeS5cblx0XHQvLyBGb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IGhhdmUgYSBgd2luZG93YCB3aXRoIGEgYGRvY3VtZW50YFxuXHRcdC8vIChzdWNoIGFzIE5vZGUuanMpLCBleHBvc2UgYSBmYWN0b3J5IGFzIG1vZHVsZS5leHBvcnRzLlxuXHRcdC8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgYHdpbmRvd2AuXG5cdFx0Ly8gZS5nLiB2YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKSh3aW5kb3cpO1xuXHRcdC8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm8uXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQgP1xuXHRcdFx0ZmFjdG9yeSggZ2xvYmFsLCB0cnVlICkgOlxuXHRcdFx0ZnVuY3Rpb24oIHcgKSB7XG5cdFx0XHRcdGlmICggIXcuZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWN0b3J5KCB3ICk7XG5cdFx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGZhY3RvcnkoIGdsb2JhbCApO1xuXHR9XG5cbi8vIFBhc3MgdGhpcyBpZiB3aW5kb3cgaXMgbm90IGRlZmluZWQgeWV0XG59KHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiggd2luZG93LCBub0dsb2JhbCApIHtcblxuLy8gU3VwcG9ydDogRmlyZWZveCAxOCtcbi8vIENhbid0IGJlIGluIHN0cmljdCBtb2RlLCBzZXZlcmFsIGxpYnMgaW5jbHVkaW5nIEFTUC5ORVQgdHJhY2Vcbi8vIHRoZSBzdGFjayB2aWEgYXJndW1lbnRzLmNhbGxlci5jYWxsZWUgYW5kIEZpcmVmb3ggZGllcyBpZlxuLy8geW91IHRyeSB0byB0cmFjZSB0aHJvdWdoIFwidXNlIHN0cmljdFwiIGNhbGwgY2hhaW5zLiAoIzEzMzM1KVxuLy9cInVzZSBzdHJpY3RcIjtcbnZhciBhcnIgPSBbXTtcblxudmFyIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50O1xuXG52YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbnZhciBjb25jYXQgPSBhcnIuY29uY2F0O1xuXG52YXIgcHVzaCA9IGFyci5wdXNoO1xuXG52YXIgaW5kZXhPZiA9IGFyci5pbmRleE9mO1xuXG52YXIgY2xhc3MydHlwZSA9IHt9O1xuXG52YXIgdG9TdHJpbmcgPSBjbGFzczJ0eXBlLnRvU3RyaW5nO1xuXG52YXIgaGFzT3duID0gY2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxudmFyIHN1cHBvcnQgPSB7fTtcblxuXG5cbnZhclxuXHR2ZXJzaW9uID0gXCIyLjIuNFwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblxuXHRcdC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuXHRcdC8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpXG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMVxuXHQvLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1Bcblx0cnRyaW0gPSAvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXG5cblx0Ly8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG5cdHJtc1ByZWZpeCA9IC9eLW1zLS8sXG5cdHJkYXNoQWxwaGEgPSAvLShbXFxkYS16XSkvZ2ksXG5cblx0Ly8gVXNlZCBieSBqUXVlcnkuY2FtZWxDYXNlIGFzIGNhbGxiYWNrIHRvIHJlcGxhY2UoKVxuXHRmY2FtZWxDYXNlID0gZnVuY3Rpb24oIGFsbCwgbGV0dGVyICkge1xuXHRcdHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcblx0fTtcblxualF1ZXJ5LmZuID0galF1ZXJ5LnByb3RvdHlwZSA9IHtcblxuXHQvLyBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIGpRdWVyeSBiZWluZyB1c2VkXG5cdGpxdWVyeTogdmVyc2lvbixcblxuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LFxuXG5cdC8vIFN0YXJ0IHdpdGggYW4gZW1wdHkgc2VsZWN0b3Jcblx0c2VsZWN0b3I6IFwiXCIsXG5cblx0Ly8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwXG5cdGxlbmd0aDogMCxcblxuXHR0b0FycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1Jcblx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0Z2V0OiBmdW5jdGlvbiggbnVtICkge1xuXHRcdHJldHVybiBudW0gIT0gbnVsbCA/XG5cblx0XHRcdC8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXRcblx0XHRcdCggbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXSApIDpcblxuXHRcdFx0Ly8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheVxuXHRcdFx0c2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2tcblx0Ly8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpXG5cdHB1c2hTdGFjazogZnVuY3Rpb24oIGVsZW1zICkge1xuXG5cdFx0Ly8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcblx0XHR2YXIgcmV0ID0galF1ZXJ5Lm1lcmdlKCB0aGlzLmNvbnN0cnVjdG9yKCksIGVsZW1zICk7XG5cblx0XHQvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKVxuXHRcdHJldC5wcmV2T2JqZWN0ID0gdGhpcztcblx0XHRyZXQuY29udGV4dCA9IHRoaXMuY29udGV4dDtcblxuXHRcdC8vIFJldHVybiB0aGUgbmV3bHktZm9ybWVkIGVsZW1lbnQgc2V0XG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHQvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LlxuXHRlYWNoOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5lYWNoKCB0aGlzLCBjYWxsYmFjayApO1xuXHR9LFxuXG5cdG1hcDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCggdGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdH0gKSApO1xuXHR9LFxuXG5cdHNsaWNlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHNsaWNlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSApO1xuXHR9LFxuXG5cdGZpcnN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggMCApO1xuXHR9LFxuXG5cdGxhc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAtMSApO1xuXHR9LFxuXG5cdGVxOiBmdW5jdGlvbiggaSApIHtcblx0XHR2YXIgbGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRqID0gK2kgKyAoIGkgPCAwID8gbGVuIDogMCApO1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbIGogXSBdIDogW10gKTtcblx0fSxcblxuXHRlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnByZXZPYmplY3QgfHwgdGhpcy5jb25zdHJ1Y3RvcigpO1xuXHR9LFxuXG5cdC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cblx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdHB1c2g6IHB1c2gsXG5cdHNvcnQ6IGFyci5zb3J0LFxuXHRzcGxpY2U6IGFyci5zcGxpY2Vcbn07XG5cbmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIDAgXSB8fCB7fSxcblx0XHRpID0gMSxcblx0XHRsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdGRlZXAgPSBmYWxzZTtcblxuXHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXG5cdGlmICggdHlwZW9mIHRhcmdldCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0ZGVlcCA9IHRhcmdldDtcblxuXHRcdC8vIFNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIGkgXSB8fCB7fTtcblx0XHRpKys7XG5cdH1cblxuXHQvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSlcblx0aWYgKCB0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiICYmICFqUXVlcnkuaXNGdW5jdGlvbiggdGFyZ2V0ICkgKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0dGFyZ2V0ID0gdGhpcztcblx0XHRpLS07XG5cdH1cblxuXHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblxuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoICggb3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdICkgIT0gbnVsbCApIHtcblxuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICggdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvcHkgKSB8fFxuXHRcdFx0XHRcdCggY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheSggY29weSApICkgKSApIHtcblxuXHRcdFx0XHRcdGlmICggY29weUlzQXJyYXkgKSB7XG5cdFx0XHRcdFx0XHRjb3B5SXNBcnJheSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzQXJyYXkoIHNyYyApID8gc3JjIDogW107XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHNyYyApID8gc3JjIDoge307XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG5cdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0gY29weTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlXG5cdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cblx0Ly8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGVcblx0aXNSZWFkeTogdHJ1ZSxcblxuXHRlcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHR9LFxuXG5cdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cblx0aXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnR5cGUoIG9iaiApID09PSBcImZ1bmN0aW9uXCI7XG5cdH0sXG5cblx0aXNBcnJheTogQXJyYXkuaXNBcnJheSxcblxuXHRpc1dpbmRvdzogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRyZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09PSBvYmoud2luZG93O1xuXHR9LFxuXG5cdGlzTnVtZXJpYzogZnVuY3Rpb24oIG9iaiApIHtcblxuXHRcdC8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzIChudWxsfHRydWV8ZmFsc2V8XCJcIilcblx0XHQvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG5cdFx0Ly8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdFx0Ly8gYWRkaW5nIDEgY29ycmVjdHMgbG9zcyBvZiBwcmVjaXNpb24gZnJvbSBwYXJzZUZsb2F0ICgjMTUxMDApXG5cdFx0dmFyIHJlYWxTdHJpbmdPYmogPSBvYmogJiYgb2JqLnRvU3RyaW5nKCk7XG5cdFx0cmV0dXJuICFqUXVlcnkuaXNBcnJheSggb2JqICkgJiYgKCByZWFsU3RyaW5nT2JqIC0gcGFyc2VGbG9hdCggcmVhbFN0cmluZ09iaiApICsgMSApID49IDA7XG5cdH0sXG5cblx0aXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblx0XHR2YXIga2V5O1xuXG5cdFx0Ly8gTm90IHBsYWluIG9iamVjdHM6XG5cdFx0Ly8gLSBBbnkgb2JqZWN0IG9yIHZhbHVlIHdob3NlIGludGVybmFsIFtbQ2xhc3NdXSBwcm9wZXJ0eSBpcyBub3QgXCJbb2JqZWN0IE9iamVjdF1cIlxuXHRcdC8vIC0gRE9NIG5vZGVzXG5cdFx0Ly8gLSB3aW5kb3dcblx0XHRpZiAoIGpRdWVyeS50eXBlKCBvYmogKSAhPT0gXCJvYmplY3RcIiB8fCBvYmoubm9kZVR5cGUgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0XG5cdFx0aWYgKCBvYmouY29uc3RydWN0b3IgJiZcblx0XHRcdFx0IWhhc093bi5jYWxsKCBvYmosIFwiY29uc3RydWN0b3JcIiApICYmXG5cdFx0XHRcdCFoYXNPd24uY2FsbCggb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSB8fCB7fSwgXCJpc1Byb3RvdHlwZU9mXCIgKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBPd24gcHJvcGVydGllcyBhcmUgZW51bWVyYXRlZCBmaXJzdGx5LCBzbyB0byBzcGVlZCB1cCxcblx0XHQvLyBpZiBsYXN0IG9uZSBpcyBvd24sIHRoZW4gYWxsIHByb3BlcnRpZXMgYXJlIG93blxuXHRcdGZvciAoIGtleSBpbiBvYmogKSB7fVxuXG5cdFx0cmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkIHx8IGhhc093bi5jYWxsKCBvYmosIGtleSApO1xuXHR9LFxuXG5cdGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIG5hbWU7XG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdHR5cGU6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0aWYgKCBvYmogPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHRcdH1cblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wLCBpT1M8NiAoZnVuY3Rpb25pc2ggUmVnRXhwKVxuXHRcdHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIiA/XG5cdFx0XHRjbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKCBvYmogKSBdIHx8IFwib2JqZWN0XCIgOlxuXHRcdFx0dHlwZW9mIG9iajtcblx0fSxcblxuXHQvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dFxuXHRnbG9iYWxFdmFsOiBmdW5jdGlvbiggY29kZSApIHtcblx0XHR2YXIgc2NyaXB0LFxuXHRcdFx0aW5kaXJlY3QgPSBldmFsO1xuXG5cdFx0Y29kZSA9IGpRdWVyeS50cmltKCBjb2RlICk7XG5cblx0XHRpZiAoIGNvZGUgKSB7XG5cblx0XHRcdC8vIElmIHRoZSBjb2RlIGluY2x1ZGVzIGEgdmFsaWQsIHByb2xvZ3VlIHBvc2l0aW9uXG5cdFx0XHQvLyBzdHJpY3QgbW9kZSBwcmFnbWEsIGV4ZWN1dGUgY29kZSBieSBpbmplY3RpbmcgYVxuXHRcdFx0Ly8gc2NyaXB0IHRhZyBpbnRvIHRoZSBkb2N1bWVudC5cblx0XHRcdGlmICggY29kZS5pbmRleE9mKCBcInVzZSBzdHJpY3RcIiApID09PSAxICkge1xuXHRcdFx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNjcmlwdFwiICk7XG5cdFx0XHRcdHNjcmlwdC50ZXh0ID0gY29kZTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0ICkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgYXZvaWQgdGhlIERPTSBub2RlIGNyZWF0aW9uLCBpbnNlcnRpb25cblx0XHRcdFx0Ly8gYW5kIHJlbW92YWwgYnkgdXNpbmcgYW4gaW5kaXJlY3QgZ2xvYmFsIGV2YWxcblxuXHRcdFx0XHRpbmRpcmVjdCggY29kZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuXHRjYW1lbENhc2U6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG5cdFx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG5cdH0sXG5cblx0bm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHR9LFxuXG5cdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrICkge1xuXHRcdHZhciBsZW5ndGgsIGkgPSAwO1xuXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7XG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gb2JqICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBvYmo7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0dHJpbTogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0cmV0dXJuIHRleHQgPT0gbnVsbCA/XG5cdFx0XHRcIlwiIDpcblx0XHRcdCggdGV4dCArIFwiXCIgKS5yZXBsYWNlKCBydHJpbSwgXCJcIiApO1xuXHR9LFxuXG5cdC8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFrZUFycmF5OiBmdW5jdGlvbiggYXJyLCByZXN1bHRzICkge1xuXHRcdHZhciByZXQgPSByZXN1bHRzIHx8IFtdO1xuXG5cdFx0aWYgKCBhcnIgIT0gbnVsbCApIHtcblx0XHRcdGlmICggaXNBcnJheUxpa2UoIE9iamVjdCggYXJyICkgKSApIHtcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCByZXQsXG5cdFx0XHRcdFx0dHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0WyBhcnIgXSA6IGFyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5jYWxsKCByZXQsIGFyciApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0aW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcblx0XHRyZXR1cm4gYXJyID09IG51bGwgPyAtMSA6IGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7XG5cdH0sXG5cblx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcblx0XHRcdGogPSAwLFxuXHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0fVxuXG5cdFx0Zmlyc3QubGVuZ3RoID0gaTtcblxuXHRcdHJldHVybiBmaXJzdDtcblx0fSxcblxuXHRncmVwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBpbnZlcnQgKSB7XG5cdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdG1hdGNoZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0Y2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0O1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdC8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uXG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdGlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHtcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBlbGVtc1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZXM7XG5cdH0sXG5cblx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1hcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgYXJnICkge1xuXHRcdHZhciBsZW5ndGgsIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggZWxlbXMgKSApIHtcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsXG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gZWxlbXMgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0XHRyZXR1cm4gY29uY2F0LmFwcGx5KCBbXSwgcmV0ICk7XG5cdH0sXG5cblx0Ly8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzXG5cdGd1aWQ6IDEsXG5cblx0Ly8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55XG5cdC8vIGFyZ3VtZW50cy5cblx0cHJveHk6IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHtcblx0XHR2YXIgdG1wLCBhcmdzLCBwcm94eTtcblxuXHRcdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0bXAgPSBmblsgY29udGV4dCBdO1xuXHRcdFx0Y29udGV4dCA9IGZuO1xuXHRcdFx0Zm4gPSB0bXA7XG5cdFx0fVxuXG5cdFx0Ly8gUXVpY2sgY2hlY2sgdG8gZGV0ZXJtaW5lIGlmIHRhcmdldCBpcyBjYWxsYWJsZSwgaW4gdGhlIHNwZWNcblx0XHQvLyB0aGlzIHRocm93cyBhIFR5cGVFcnJvciwgYnV0IHdlIHdpbGwganVzdCByZXR1cm4gdW5kZWZpbmVkLlxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCBmbiApICkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBTaW11bGF0ZWQgYmluZFxuXHRcdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTtcblx0XHRwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGZuLmFwcGx5KCBjb250ZXh0IHx8IHRoaXMsIGFyZ3MuY29uY2F0KCBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSApICk7XG5cdFx0fTtcblxuXHRcdC8vIFNldCB0aGUgZ3VpZCBvZiB1bmlxdWUgaGFuZGxlciB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBoYW5kbGVyLCBzbyBpdCBjYW4gYmUgcmVtb3ZlZFxuXHRcdHByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrO1xuXG5cdFx0cmV0dXJuIHByb3h5O1xuXHR9LFxuXG5cdG5vdzogRGF0ZS5ub3csXG5cblx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdC8vIHByb3BlcnRpZXMgdG8gaXQgc28gaXQgbmVlZHMgdG8gZXhpc3QuXG5cdHN1cHBvcnQ6IHN1cHBvcnRcbn0gKTtcblxuLy8gSlNIaW50IHdvdWxkIGVycm9yIG9uIHRoaXMgY29kZSBkdWUgdG8gdGhlIFN5bWJvbCBub3QgYmVpbmcgZGVmaW5lZCBpbiBFUzUuXG4vLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuanNoaW50cmMgd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWxcbi8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBqdXN0IGRpc2FibGUgSlNIaW50IGZvciB0aGVzZVxuLy8gdGhyZWUgbGluZXMuXG4vKiBqc2hpbnQgaWdub3JlOiBzdGFydCAqL1xuaWYgKCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdGpRdWVyeS5mblsgU3ltYm9sLml0ZXJhdG9yIF0gPSBhcnJbIFN5bWJvbC5pdGVyYXRvciBdO1xufVxuLyoganNoaW50IGlnbm9yZTogZW5kICovXG5cbi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxualF1ZXJ5LmVhY2goIFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2xcIi5zcGxpdCggXCIgXCIgKSxcbmZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRjbGFzczJ0eXBlWyBcIltvYmplY3QgXCIgKyBuYW1lICsgXCJdXCIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbn0gKTtcblxuZnVuY3Rpb24gaXNBcnJheUxpa2UoIG9iaiApIHtcblxuXHQvLyBTdXBwb3J0OiBpT1MgOC4yIChub3QgcmVwcm9kdWNpYmxlIGluIHNpbXVsYXRvcilcblx0Ly8gYGluYCBjaGVjayB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0yMTQ1KVxuXHQvLyBoYXNPd24gaXNuJ3QgdXNlZCBoZXJlIGR1ZSB0byBmYWxzZSBuZWdhdGl2ZXNcblx0Ly8gcmVnYXJkaW5nIE5vZGVsaXN0IGxlbmd0aCBpbiBJRVxuXHR2YXIgbGVuZ3RoID0gISFvYmogJiYgXCJsZW5ndGhcIiBpbiBvYmogJiYgb2JqLmxlbmd0aCxcblx0XHR0eXBlID0galF1ZXJ5LnR5cGUoIG9iaiApO1xuXG5cdGlmICggdHlwZSA9PT0gXCJmdW5jdGlvblwiIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIHR5cGUgPT09IFwiYXJyYXlcIiB8fCBsZW5ndGggPT09IDAgfHxcblx0XHR0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiICYmIGxlbmd0aCA+IDAgJiYgKCBsZW5ndGggLSAxICkgaW4gb2JqO1xufVxudmFyIFNpenpsZSA9XG4vKiFcbiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjIuMVxuICogaHR0cDovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxNS0xMC0xN1xuICovXG4oZnVuY3Rpb24oIHdpbmRvdyApIHtcblxudmFyIGksXG5cdHN1cHBvcnQsXG5cdEV4cHIsXG5cdGdldFRleHQsXG5cdGlzWE1MLFxuXHR0b2tlbml6ZSxcblx0Y29tcGlsZSxcblx0c2VsZWN0LFxuXHRvdXRlcm1vc3RDb250ZXh0LFxuXHRzb3J0SW5wdXQsXG5cdGhhc0R1cGxpY2F0ZSxcblxuXHQvLyBMb2NhbCBkb2N1bWVudCB2YXJzXG5cdHNldERvY3VtZW50LFxuXHRkb2N1bWVudCxcblx0ZG9jRWxlbSxcblx0ZG9jdW1lbnRJc0hUTUwsXG5cdHJidWdneVFTQSxcblx0cmJ1Z2d5TWF0Y2hlcyxcblx0bWF0Y2hlcyxcblx0Y29udGFpbnMsXG5cblx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRleHBhbmRvID0gXCJzaXp6bGVcIiArIDEgKiBuZXcgRGF0ZSgpLFxuXHRwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsXG5cdGRpcnJ1bnMgPSAwLFxuXHRkb25lID0gMCxcblx0Y2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0c29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIDA7XG5cdH0sXG5cblx0Ly8gR2VuZXJhbC1wdXJwb3NlIGNvbnN0YW50c1xuXHRNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLFxuXG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0aGFzT3duID0gKHt9KS5oYXNPd25Qcm9wZXJ0eSxcblx0YXJyID0gW10sXG5cdHBvcCA9IGFyci5wb3AsXG5cdHB1c2hfbmF0aXZlID0gYXJyLnB1c2gsXG5cdHB1c2ggPSBhcnIucHVzaCxcblx0c2xpY2UgPSBhcnIuc2xpY2UsXG5cdC8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBhcyBpdCdzIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQvLyBodHRwOi8vanNwZXJmLmNvbS90aG9yLWluZGV4b2YtdnMtZm9yLzVcblx0aW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdGxlbiA9IGxpc3QubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0aWYgKCBsaXN0W2ldID09PSBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9LFxuXG5cdGJvb2xlYW5zID0gXCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLFxuXG5cdC8vIFJlZ3VsYXIgZXhwcmVzc2lvbnNcblxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuXHR3aGl0ZXNwYWNlID0gXCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLFxuXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCN2YWx1ZS1kZWYtaWRlbnRpZmllclxuXHRpZGVudGlmaWVyID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBpZGVudGlmaWVyICsgXCIpKD86XCIgKyB3aGl0ZXNwYWNlICtcblx0XHQvLyBPcGVyYXRvciAoY2FwdHVyZSAyKVxuXHRcdFwiKihbKl4kfCF+XT89KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gXCJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdIG9yIHN0cmluZ3MgW2NhcHR1cmUgMyBvciBjYXB0dXJlIDRdXCJcblx0XHRcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiICsgaWRlbnRpZmllciArIFwiKSl8KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XCIqXFxcXF1cIixcblxuXHRwc2V1ZG9zID0gXCI6KFwiICsgaWRlbnRpZmllciArIFwiKSg/OlxcXFwoKFwiICtcblx0XHQvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOlxuXHRcdC8vIDEuIHF1b3RlZCAoY2FwdHVyZSAzOyBjYXB0dXJlIDQgb3IgY2FwdHVyZSA1KVxuXHRcdFwiKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8XCIgK1xuXHRcdC8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KVxuXHRcdFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiICsgYXR0cmlidXRlcyArIFwiKSopfFwiICtcblx0XHQvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpXG5cdFx0XCIuKlwiICtcblx0XHRcIilcXFxcKXwpXCIsXG5cblx0Ly8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlclxuXHRyd2hpdGVzcGFjZSA9IG5ldyBSZWdFeHAoIHdoaXRlc3BhY2UgKyBcIitcIiwgXCJnXCIgKSxcblx0cnRyaW0gPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIgKyB3aGl0ZXNwYWNlICsgXCIrJFwiLCBcImdcIiApLFxuXG5cdHJjb21tYSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKixcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXHRyY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiooWz4rfl18XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblxuXHRyYXR0cmlidXRlUXVvdGVzID0gbmV3IFJlZ0V4cCggXCI9XCIgKyB3aGl0ZXNwYWNlICsgXCIqKFteXFxcXF0nXFxcIl0qPylcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcXVwiLCBcImdcIiApLFxuXG5cdHJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksXG5cdHJpZGVudGlmaWVyID0gbmV3IFJlZ0V4cCggXCJeXCIgKyBpZGVudGlmaWVyICsgXCIkXCIgKSxcblxuXHRtYXRjaEV4cHIgPSB7XG5cdFx0XCJJRFwiOiBuZXcgUmVnRXhwKCBcIl4jKFwiICsgaWRlbnRpZmllciArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFwiVEFHXCI6IG5ldyBSZWdFeHAoIFwiXihcIiArIGlkZW50aWZpZXIgKyBcInxbKl0pXCIgKSxcblx0XHRcIkFUVFJcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBhdHRyaWJ1dGVzICksXG5cdFx0XCJQU0VVRE9cIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBwc2V1ZG9zICksXG5cdFx0XCJDSElMRFwiOiBuZXcgUmVnRXhwKCBcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86KFsrLV18KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIiooXFxcXGQrKXwpKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfClcIiwgXCJpXCIgKSxcblx0XHRcImJvb2xcIjogbmV3IFJlZ0V4cCggXCJeKD86XCIgKyBib29sZWFucyArIFwiKSRcIiwgXCJpXCIgKSxcblx0XHQvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKClcblx0XHQvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgXG5cdFx0XCJuZWVkc0NvbnRleHRcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiICtcblx0XHRcdHdoaXRlc3BhY2UgKyBcIiooKD86LVxcXFxkKT9cXFxcZCopXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KSg/PVteLV18JClcIiwgXCJpXCIgKVxuXHR9LFxuXG5cdHJpbnB1dHMgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyaGVhZGVyID0gL15oXFxkJC9pLFxuXG5cdHJuYXRpdmUgPSAvXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLFxuXG5cdC8vIEVhc2lseS1wYXJzZWFibGUvcmV0cmlldmFibGUgSUQgb3IgVEFHIG9yIENMQVNTIHNlbGVjdG9yc1xuXHRycXVpY2tFeHByID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sXG5cblx0cnNpYmxpbmcgPSAvWyt+XS8sXG5cdHJlc2NhcGUgPSAvJ3xcXFxcL2csXG5cblx0Ly8gQ1NTIGVzY2FwZXMgaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI2VzY2FwZWQtY2hhcmFjdGVyc1xuXHRydW5lc2NhcGUgPSBuZXcgUmVnRXhwKCBcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiICsgd2hpdGVzcGFjZSArIFwiP3woXCIgKyB3aGl0ZXNwYWNlICsgXCIpfC4pXCIsIFwiaWdcIiApLFxuXHRmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7XG5cdFx0dmFyIGhpZ2ggPSBcIjB4XCIgKyBlc2NhcGVkIC0gMHgxMDAwMDtcblx0XHQvLyBOYU4gbWVhbnMgbm9uLWNvZGVwb2ludFxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjRcblx0XHQvLyBXb3JrYXJvdW5kIGVycm9uZW91cyBudW1lcmljIGludGVycHJldGF0aW9uIG9mICtcIjB4XCJcblx0XHRyZXR1cm4gaGlnaCAhPT0gaGlnaCB8fCBlc2NhcGVkV2hpdGVzcGFjZSA/XG5cdFx0XHRlc2NhcGVkIDpcblx0XHRcdGhpZ2ggPCAwID9cblx0XHRcdFx0Ly8gQk1QIGNvZGVwb2ludFxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDpcblx0XHRcdFx0Ly8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpXG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggPj4gMTAgfCAweEQ4MDAsIGhpZ2ggJiAweDNGRiB8IDB4REMwMCApO1xuXHR9LFxuXG5cdC8vIFVzZWQgZm9yIGlmcmFtZXNcblx0Ly8gU2VlIHNldERvY3VtZW50KClcblx0Ly8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgXCJQZXJtaXNzaW9uIERlbmllZFwiXG5cdC8vIGVycm9yIGluIElFXG5cdHVubG9hZEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcblx0XHRzZXREb2N1bWVudCgpO1xuXHR9O1xuXG4vLyBPcHRpbWl6ZSBmb3IgcHVzaC5hcHBseSggXywgTm9kZUxpc3QgKVxudHJ5IHtcblx0cHVzaC5hcHBseShcblx0XHQoYXJyID0gc2xpY2UuY2FsbCggcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMgKSksXG5cdFx0cHJlZmVycmVkRG9jLmNoaWxkTm9kZXNcblx0KTtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0Ly8gRGV0ZWN0IHNpbGVudGx5IGZhaWxpbmcgcHVzaC5hcHBseVxuXHRhcnJbIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aCBdLm5vZGVUeXBlO1xufSBjYXRjaCAoIGUgKSB7XG5cdHB1c2ggPSB7IGFwcGx5OiBhcnIubGVuZ3RoID9cblxuXHRcdC8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlXG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0cHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7XG5cdFx0fSA6XG5cblx0XHQvLyBTdXBwb3J0OiBJRTw5XG5cdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZCBkaXJlY3RseVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHZhciBqID0gdGFyZ2V0Lmxlbmd0aCxcblx0XHRcdFx0aSA9IDA7XG5cdFx0XHQvLyBDYW4ndCB0cnVzdCBOb2RlTGlzdC5sZW5ndGhcblx0XHRcdHdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge31cblx0XHRcdHRhcmdldC5sZW5ndGggPSBqIC0gMTtcblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBtLCBpLCBlbGVtLCBuaWQsIG5pZHNlbGVjdCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsXG5cdFx0bmV3Q29udGV4dCA9IGNvbnRleHQgJiYgY29udGV4dC5vd25lckRvY3VtZW50LFxuXG5cdFx0Ly8gbm9kZVR5cGUgZGVmYXVsdHMgdG8gOSwgc2luY2UgY29udGV4dCBkZWZhdWx0cyB0byBkb2N1bWVudFxuXHRcdG5vZGVUeXBlID0gY29udGV4dCA/IGNvbnRleHQubm9kZVR5cGUgOiA5O1xuXG5cdHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdO1xuXG5cdC8vIFJldHVybiBlYXJseSBmcm9tIGNhbGxzIHdpdGggaW52YWxpZCBzZWxlY3RvciBvciBjb250ZXh0XG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0Ly8gVHJ5IHRvIHNob3J0Y3V0IGZpbmQgb3BlcmF0aW9ucyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXJzKSBpbiBIVE1MIGRvY3VtZW50c1xuXHRpZiAoICFzZWVkICkge1xuXG5cdFx0aWYgKCAoIGNvbnRleHQgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IHByZWZlcnJlZERvYyApICE9PSBkb2N1bWVudCApIHtcblx0XHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdFx0fVxuXHRcdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdFx0Ly8gSWYgdGhlIHNlbGVjdG9yIGlzIHN1ZmZpY2llbnRseSBzaW1wbGUsIHRyeSB1c2luZyBhIFwiZ2V0KkJ5KlwiIERPTSBtZXRob2Rcblx0XHRcdC8vIChleGNlcHRpbmcgRG9jdW1lbnRGcmFnbWVudCBjb250ZXh0LCB3aGVyZSB0aGUgbWV0aG9kcyBkb24ndCBleGlzdClcblx0XHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0Ly8gSUQgc2VsZWN0b3Jcblx0XHRcdFx0aWYgKCAobSA9IG1hdGNoWzFdKSApIHtcblxuXHRcdFx0XHRcdC8vIERvY3VtZW50IGNvbnRleHRcblx0XHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnNcblx0XHRcdFx0XHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0XHRpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRWxlbWVudCBjb250ZXh0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUsIE9wZXJhLCBXZWJraXRcblx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRpZiAoIG5ld0NvbnRleHQgJiYgKGVsZW0gPSBuZXdDb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICYmXG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiZcblx0XHRcdFx0XHRcdFx0ZWxlbS5pZCA9PT0gbSApIHtcblxuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFR5cGUgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbMl0gKSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHRcdC8vIENsYXNzIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoIChtID0gbWF0Y2hbM10pICYmIHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJlxuXHRcdFx0XHRcdGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVGFrZSBhZHZhbnRhZ2Ugb2YgcXVlcnlTZWxlY3RvckFsbFxuXHRcdFx0aWYgKCBzdXBwb3J0LnFzYSAmJlxuXHRcdFx0XHQhY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdICYmXG5cdFx0XHRcdCghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7XG5cblx0XHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dDtcblx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IHNlbGVjdG9yO1xuXG5cdFx0XHRcdC8vIHFTQSBsb29rcyBvdXRzaWRlIEVsZW1lbnQgY29udGV4dCwgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudFxuXHRcdFx0XHQvLyBUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhpcyB3b3JrYXJvdW5kIHRlY2huaXF1ZVxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PThcblx0XHRcdFx0Ly8gRXhjbHVkZSBvYmplY3QgZWxlbWVudHNcblx0XHRcdFx0fSBlbHNlIGlmICggY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHRcdFx0Ly8gQ2FwdHVyZSB0aGUgY29udGV4dCBJRCwgc2V0dGluZyBpdCBmaXJzdCBpZiBuZWNlc3Nhcnlcblx0XHRcdFx0XHRpZiAoIChuaWQgPSBjb250ZXh0LmdldEF0dHJpYnV0ZSggXCJpZFwiICkpICkge1xuXHRcdFx0XHRcdFx0bmlkID0gbmlkLnJlcGxhY2UoIHJlc2NhcGUsIFwiXFxcXCQmXCIgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgKG5pZCA9IGV4cGFuZG8pICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUHJlZml4IGV2ZXJ5IHNlbGVjdG9yIGluIHRoZSBsaXN0XG5cdFx0XHRcdFx0Z3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0XHRcdFx0aSA9IGdyb3Vwcy5sZW5ndGg7XG5cdFx0XHRcdFx0bmlkc2VsZWN0ID0gcmlkZW50aWZpZXIudGVzdCggbmlkICkgPyBcIiNcIiArIG5pZCA6IFwiW2lkPSdcIiArIG5pZCArIFwiJ11cIjtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGdyb3Vwc1tpXSA9IG5pZHNlbGVjdCArIFwiIFwiICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oIFwiLFwiICk7XG5cblx0XHRcdFx0XHQvLyBFeHBhbmQgY29udGV4dCBmb3Igc2libGluZyBzZWxlY3RvcnNcblx0XHRcdFx0XHRuZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHxcblx0XHRcdFx0XHRcdGNvbnRleHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9IGNhdGNoICggcXNhRXJyb3IgKSB7XG5cdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdGlmICggbmlkID09PSBleHBhbmRvICkge1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsIG90aGVyc1xuXHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdHZhciBrZXlzID0gW107XG5cblx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cdFx0Ly8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1Nylcblx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cdFx0XHQvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcblx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07XG5cdFx0fVxuXHRcdHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG5cdH1cblx0cmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRmblsgZXhwYW5kbyBdID0gdHJ1ZTtcblx0cmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZGl2IGFuZCBleHBlY3RzIGEgYm9vbGVhbiByZXN1bHRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHtcblx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cblx0dHJ5IHtcblx0XHRyZXR1cm4gISFmbiggZGl2ICk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0gZmluYWxseSB7XG5cdFx0Ly8gUmVtb3ZlIGZyb20gaXRzIHBhcmVudCBieSBkZWZhdWx0XG5cdFx0aWYgKCBkaXYucGFyZW50Tm9kZSApIHtcblx0XHRcdGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTtcblx0XHR9XG5cdFx0Ly8gcmVsZWFzZSBtZW1vcnkgaW4gSUVcblx0XHRkaXYgPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG5cdHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG5cdFx0aSA9IGFyci5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0RXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYlxuICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gKi9cbmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHtcblx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0KCB+Yi5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKSAtXG5cdFx0XHQoIH5hLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApO1xuXG5cdC8vIFVzZSBJRSBzb3VyY2VJbmRleCBpZiBhdmFpbGFibGUgb24gYm90aCBub2Rlc1xuXHRpZiAoIGRpZmYgKSB7XG5cdFx0cmV0dXJuIGRpZmY7XG5cdH1cblxuXHQvLyBDaGVjayBpZiBiIGZvbGxvd3MgYVxuXHRpZiAoIGN1ciApIHtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIubmV4dFNpYmxpbmcpICkge1xuXHRcdFx0aWYgKCBjdXIgPT09IGIgKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYSA/IDEgOiAtMTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGlucHV0IHR5cGVzXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnB1dFBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgYnV0dG9uc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQnV0dG9uUHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIChuYW1lID09PSBcImlucHV0XCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIikgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkge1xuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHtcblx0XHRhcmd1bWVudCA9ICthcmd1bWVudDtcblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0dmFyIGosXG5cdFx0XHRcdG1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksXG5cdFx0XHRcdGkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoO1xuXG5cdFx0XHQvLyBNYXRjaCBlbGVtZW50cyBmb3VuZCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4ZXNcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoIHNlZWRbIChqID0gbWF0Y2hJbmRleGVzW2ldKSBdICkge1xuXHRcdFx0XHRcdHNlZWRbal0gPSAhKG1hdGNoZXNbal0gPSBzZWVkW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dFxuICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkge1xuXHRyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb250ZXh0O1xufVxuXG4vLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZVxuc3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307XG5cbi8qKlxuICogRGV0ZWN0cyBYTUwgbm9kZXNcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlXG4gKi9cbmlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIGRvY3VtZW50RWxlbWVudCBpcyB2ZXJpZmllZCBmb3IgY2FzZXMgd2hlcmUgaXQgZG9lc24ndCB5ZXQgZXhpc3Rcblx0Ly8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpXG5cdHZhciBkb2N1bWVudEVsZW1lbnQgPSBlbGVtICYmIChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSkuZG9jdW1lbnRFbGVtZW50O1xuXHRyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSBcIkhUTUxcIiA6IGZhbHNlO1xufTtcblxuLyoqXG4gKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IFtkb2NdIEFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgb2JqZWN0IHRvIHVzZSB0byBzZXQgdGhlIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKi9cbnNldERvY3VtZW50ID0gU2l6emxlLnNldERvY3VtZW50ID0gZnVuY3Rpb24oIG5vZGUgKSB7XG5cdHZhciBoYXNDb21wYXJlLCBwYXJlbnQsXG5cdFx0ZG9jID0gbm9kZSA/IG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlIDogcHJlZmVycmVkRG9jO1xuXG5cdC8vIFJldHVybiBlYXJseSBpZiBkb2MgaXMgaW52YWxpZCBvciBhbHJlYWR5IHNlbGVjdGVkXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gVXBkYXRlIGdsb2JhbCB2YXJpYWJsZXNcblx0ZG9jdW1lbnQgPSBkb2M7XG5cdGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdGRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2N1bWVudCApO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2Vcblx0Ly8gQWNjZXNzaW5nIGlmcmFtZSBkb2N1bWVudHMgYWZ0ZXIgdW5sb2FkIHRocm93cyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KVxuXHRpZiAoIChwYXJlbnQgPSBkb2N1bWVudC5kZWZhdWx0VmlldykgJiYgcGFyZW50LnRvcCAhPT0gcGFyZW50ICkge1xuXHRcdC8vIFN1cHBvcnQ6IElFIDExXG5cdFx0aWYgKCBwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCBcInVubG9hZFwiLCB1bmxvYWRIYW5kbGVyLCBmYWxzZSApO1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDEwIG9ubHlcblx0XHR9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRwYXJlbnQuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIEF0dHJpYnV0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFN1cHBvcnQ6IElFPDhcblx0Ly8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzXG5cdC8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuXHRzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRkaXYuY2xhc3NOYW1lID0gXCJpXCI7XG5cdFx0cmV0dXJuICFkaXYuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpO1xuXHR9KTtcblxuXHQvKiBnZXRFbGVtZW50KHMpQnkqXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzXG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDEwXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZVxuXHQvLyBUaGUgYnJva2VuIGdldEVsZW1lbnRCeUlkIG1ldGhvZHMgZG9uJ3QgcGljayB1cCBwcm9ncmFtYXRpY2FsbHktc2V0IG5hbWVzLFxuXHQvLyBzbyB1c2UgYSByb3VuZGFib3V0IGdldEVsZW1lbnRzQnlOYW1lIHRlc3Rcblx0c3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaWQgPSBleHBhbmRvO1xuXHRcdHJldHVybiAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdHJldHVybiBtID8gWyBtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHQvLyBTdXBwb3J0OiBJRTYvN1xuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRkZWxldGUgRXhwci5maW5kW1wiSURcIl07XG5cblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcblx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcblx0XHRcdFx0cmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHR9XG5cblx0Ly8gVGFnXG5cdEV4cHIuZmluZFtcIlRBR1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgP1xuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgZG9uJ3QgaGF2ZSBnRUJUTlxuXHRcdFx0fSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyApO1xuXHRcdFx0fVxuXHRcdH0gOlxuXG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHR0bXAgPSBbXSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdC8vIEJ5IGhhcHB5IGNvaW5jaWRlbmNlLCBhIChicm9rZW4pIGdFQlROIGFwcGVhcnMgb24gRG9jdW1lbnRGcmFnbWVudCBub2RlcyB0b29cblx0XHRcdFx0cmVzdWx0cyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzXG5cdFx0XHRpZiAoIHRhZyA9PT0gXCIqXCIgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdHRtcC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRtcDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH07XG5cblx0Ly8gQ2xhc3Ncblx0RXhwci5maW5kW1wiQ0xBU1NcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgZnVuY3Rpb24oIGNsYXNzTmFtZSwgY29udGV4dCApIHtcblx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKTtcblx0XHR9XG5cdH07XG5cblx0LyogUVNBL21hdGNoZXNTZWxlY3RvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gUVNBIGFuZCBtYXRjaGVzU2VsZWN0b3Igc3VwcG9ydFxuXG5cdC8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpXG5cdHJidWdneU1hdGNoZXMgPSBbXTtcblxuXHQvLyBxU2EoOmZvY3VzKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoQ2hyb21lIDIxKVxuXHQvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3Jcblx0Ly8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZVxuXHQvLyBTbywgd2UgYWxsb3cgOmZvY3VzIHRvIHBhc3MgdGhyb3VnaCBRU0EgYWxsIHRoZSB0aW1lIHRvIGF2b2lkIHRoZSBJRSBlcnJvclxuXHQvLyBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcblx0cmJ1Z2d5UVNBID0gW107XG5cblx0aWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxyXFxcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuNCwgU2FmYXJpPDcuMCssIGlPUzw3LjArLCBQaGFudG9tSlM8MS45LjgrXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJbaWR+PVwiICsgZXhwYW5kbyArIFwiLV1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCJ+PVwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiOmNoZWNrZWRcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4KywgaU9TIDgrXG5cdFx0XHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxXG5cdFx0XHQvLyBJbi1wYWdlIGBzZWxlY3RvciNpZCBzaWJpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCBcImEjXCIgKyBleHBhbmRvICsgXCIrKlwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIi4jLitbK35dXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBTdXBwb3J0OiBXaW5kb3dzIDggTmF0aXZlIEFwcHNcblx0XHRcdC8vIFRoZSB0eXBlIGFuZCBuYW1lIGF0dHJpYnV0ZXMgYXJlIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudFxuXHRcdFx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJoaWRkZW5cIiApO1xuXHRcdFx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApLnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwiRFwiICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gRW5mb3JjZSBjYXNlLXNlbnNpdGl2aXR5IG9mIG5hbWUgYXR0cmlidXRlXG5cdFx0XHRpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3Ncblx0XHRcdGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKTtcblx0XHRcdHJidWdneVFTQS5wdXNoKFwiLC4qOlwiKTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fFxuXHRcdGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIGl0J3MgcG9zc2libGUgdG8gZG8gbWF0Y2hlc1NlbGVjdG9yXG5cdFx0XHQvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KVxuXHRcdFx0c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZGl2LCBcImRpdlwiICk7XG5cblx0XHRcdC8vIFRoaXMgc2hvdWxkIGZhaWwgd2l0aCBhbiBleGNlcHRpb25cblx0XHRcdC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcblx0XHRcdG1hdGNoZXMuY2FsbCggZGl2LCBcIltzIT0nJ106eFwiICk7XG5cdFx0XHRyYnVnZ3lNYXRjaGVzLnB1c2goIFwiIT1cIiwgcHNldWRvcyApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbihcInxcIikgKTtcblx0cmJ1Z2d5TWF0Y2hlcyA9IHJidWdneU1hdGNoZXMubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneU1hdGNoZXMuam9pbihcInxcIikgKTtcblxuXHQvKiBDb250YWluc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdGhhc0NvbXBhcmUgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gKTtcblxuXHQvLyBFbGVtZW50IGNvbnRhaW5zIGFub3RoZXJcblx0Ly8gUHVycG9zZWZ1bGx5IHNlbGYtZXhjbHVzaXZlXG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkpO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHR3aGlsZSAoIChiID0gYi5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0MTtcblxuXHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdGlmICggY29tcGFyZSAmIDEgfHxcblx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHRpZiAoIGEgPT09IGRvY3VtZW50IHx8IGEub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYSkgKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHRcdGlmICggYiA9PT0gZG9jdW1lbnQgfHwgYi5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBiKSApIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1haW50YWluIG9yaWdpbmFsIG9yZGVyXG5cdFx0XHRyZXR1cm4gc29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXHRcdH1cblxuXHRcdHJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTtcblx0fSA6XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdC8vIEV4aXQgZWFybHkgaWYgdGhlIG5vZGVzIGFyZSBpZGVudGljYWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0YXVwID0gYS5wYXJlbnROb2RlLFxuXHRcdFx0YnVwID0gYi5wYXJlbnROb2RlLFxuXHRcdFx0YXAgPSBbIGEgXSxcblx0XHRcdGJwID0gWyBiIF07XG5cblx0XHQvLyBQYXJlbnRsZXNzIG5vZGVzIGFyZSBlaXRoZXIgZG9jdW1lbnRzIG9yIGRpc2Nvbm5lY3RlZFxuXHRcdGlmICggIWF1cCB8fCAhYnVwICkge1xuXHRcdFx0cmV0dXJuIGEgPT09IGRvY3VtZW50ID8gLTEgOlxuXHRcdFx0XHRiID09PSBkb2N1bWVudCA/IDEgOlxuXHRcdFx0XHRhdXAgPyAtMSA6XG5cdFx0XHRcdGJ1cCA/IDEgOlxuXHRcdFx0XHRzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cblx0XHQvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVja1xuXHRcdH0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSB3ZSBuZWVkIGZ1bGwgbGlzdHMgb2YgdGhlaXIgYW5jZXN0b3JzIGZvciBjb21wYXJpc29uXG5cdFx0Y3VyID0gYTtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRhcC51bnNoaWZ0KCBjdXIgKTtcblx0XHR9XG5cdFx0Y3VyID0gYjtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRicC51bnNoaWZ0KCBjdXIgKTtcblx0XHR9XG5cblx0XHQvLyBXYWxrIGRvd24gdGhlIHRyZWUgbG9va2luZyBmb3IgYSBkaXNjcmVwYW5jeVxuXHRcdHdoaWxlICggYXBbaV0gPT09IGJwW2ldICkge1xuXHRcdFx0aSsrO1xuXHRcdH1cblxuXHRcdHJldHVybiBpID9cblx0XHRcdC8vIERvIGEgc2libGluZyBjaGVjayBpZiB0aGUgbm9kZXMgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvclxuXHRcdFx0c2libGluZ0NoZWNrKCBhcFtpXSwgYnBbaV0gKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSBub2RlcyBpbiBvdXIgZG9jdW1lbnQgc29ydCBmaXJzdFxuXHRcdFx0YXBbaV0gPT09IHByZWZlcnJlZERvYyA/IC0xIDpcblx0XHRcdGJwW2ldID09PSBwcmVmZXJyZWREb2MgPyAxIDpcblx0XHRcdDA7XG5cdH07XG5cblx0cmV0dXJuIGRvY3VtZW50O1xufTtcblxuU2l6emxlLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgZWxlbWVudHMgKSB7XG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7XG59O1xuXG5TaXp6bGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIGVsZW0sIGV4cHIgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdC8vIE1ha2Ugc3VyZSB0aGF0IGF0dHJpYnV0ZSBzZWxlY3RvcnMgYXJlIHF1b3RlZFxuXHRleHByID0gZXhwci5yZXBsYWNlKCByYXR0cmlidXRlUXVvdGVzLCBcIj0nJDEnXVwiICk7XG5cblx0aWYgKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdCFjb21waWxlckNhY2hlWyBleHByICsgXCIgXCIgXSAmJlxuXHRcdCggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiZcblx0XHQoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7XG5cblx0XHR0cnkge1xuXHRcdFx0dmFyIHJldCA9IG1hdGNoZXMuY2FsbCggZWxlbSwgZXhwciApO1xuXG5cdFx0XHQvLyBJRSA5J3MgbWF0Y2hlc1NlbGVjdG9yIHJldHVybnMgZmFsc2Ugb24gZGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0XHRpZiAoIHJldCB8fCBzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoIHx8XG5cdFx0XHRcdFx0Ly8gQXMgd2VsbCwgZGlzY29ubmVjdGVkIG5vZGVzIGFyZSBzYWlkIHRvIGJlIGluIGEgZG9jdW1lbnRcblx0XHRcdFx0XHQvLyBmcmFnbWVudCBpbiBJRSA5XG5cdFx0XHRcdFx0ZWxlbS5kb2N1bWVudCAmJiBlbGVtLmRvY3VtZW50Lm5vZGVUeXBlICE9PSAxMSApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7fVxuXHR9XG5cblx0cmV0dXJuIFNpenpsZSggZXhwciwgZG9jdW1lbnQsIG51bGwsIFsgZWxlbSBdICkubGVuZ3RoID4gMDtcbn07XG5cblNpenpsZS5jb250YWlucyA9IGZ1bmN0aW9uKCBjb250ZXh0LCBlbGVtICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdH1cblx0cmV0dXJuIGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICk7XG59O1xuXG5TaXp6bGUuYXR0ciA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHR2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLFxuXHRcdC8vIERvbid0IGdldCBmb29sZWQgYnkgT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzIChqUXVlcnkgIzEzODA3KVxuXHRcdHZhbCA9IGZuICYmIGhhc093bi5jYWxsKCBFeHByLmF0dHJIYW5kbGUsIG5hbWUudG9Mb3dlckNhc2UoKSApID9cblx0XHRcdGZuKCBlbGVtLCBuYW1lLCAhZG9jdW1lbnRJc0hUTUwgKSA6XG5cdFx0XHR1bmRlZmluZWQ7XG5cblx0cmV0dXJuIHZhbCAhPT0gdW5kZWZpbmVkID9cblx0XHR2YWwgOlxuXHRcdHN1cHBvcnQuYXR0cmlidXRlcyB8fCAhZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA6XG5cdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKG5hbWUpKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0bnVsbDtcbn07XG5cblNpenpsZS5lcnJvciA9IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdHRocm93IG5ldyBFcnJvciggXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIiArIG1zZyApO1xufTtcblxuLyoqXG4gKiBEb2N1bWVudCBzb3J0aW5nIGFuZCByZW1vdmluZyBkdXBsaWNhdGVzXG4gKiBAcGFyYW0ge0FycmF5TGlrZX0gcmVzdWx0c1xuICovXG5TaXp6bGUudW5pcXVlU29ydCA9IGZ1bmN0aW9uKCByZXN1bHRzICkge1xuXHR2YXIgZWxlbSxcblx0XHRkdXBsaWNhdGVzID0gW10sXG5cdFx0aiA9IDAsXG5cdFx0aSA9IDA7XG5cblx0Ly8gVW5sZXNzIHdlICprbm93KiB3ZSBjYW4gZGV0ZWN0IGR1cGxpY2F0ZXMsIGFzc3VtZSB0aGVpciBwcmVzZW5jZVxuXHRoYXNEdXBsaWNhdGUgPSAhc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzO1xuXHRzb3J0SW5wdXQgPSAhc3VwcG9ydC5zb3J0U3RhYmxlICYmIHJlc3VsdHMuc2xpY2UoIDAgKTtcblx0cmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTtcblxuXHRpZiAoIGhhc0R1cGxpY2F0ZSApIHtcblx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdGlmICggZWxlbSA9PT0gcmVzdWx0c1sgaSBdICkge1xuXHRcdFx0XHRqID0gZHVwbGljYXRlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0cmVzdWx0cy5zcGxpY2UoIGR1cGxpY2F0ZXNbIGogXSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdC8vIENsZWFyIGlucHV0IGFmdGVyIHNvcnRpbmcgdG8gcmVsZWFzZSBvYmplY3RzXG5cdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L3NpenpsZS9wdWxsLzIyNVxuXHRzb3J0SW5wdXQgPSBudWxsO1xuXG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2Rlc1xuICogQHBhcmFtIHtBcnJheXxFbGVtZW50fSBlbGVtXG4gKi9cbmdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHR2YXIgbm9kZSxcblx0XHRyZXQgPSBcIlwiLFxuXHRcdGkgPSAwLFxuXHRcdG5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRpZiAoICFub2RlVHlwZSApIHtcblx0XHQvLyBJZiBubyBub2RlVHlwZSwgdGhpcyBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheVxuXHRcdHdoaWxlICggKG5vZGUgPSBlbGVtW2krK10pICkge1xuXHRcdFx0Ly8gRG8gbm90IHRyYXZlcnNlIGNvbW1lbnQgbm9kZXNcblx0XHRcdHJldCArPSBnZXRUZXh0KCBub2RlICk7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMSB8fCBub2RlVHlwZSA9PT0gOSB8fCBub2RlVHlwZSA9PT0gMTEgKSB7XG5cdFx0Ly8gVXNlIHRleHRDb250ZW50IGZvciBlbGVtZW50c1xuXHRcdC8vIGlubmVyVGV4dCB1c2FnZSByZW1vdmVkIGZvciBjb25zaXN0ZW5jeSBvZiBuZXcgbGluZXMgKGpRdWVyeSAjMTExNTMpXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS50ZXh0Q29udGVudCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBlbGVtLnRleHRDb250ZW50O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBUcmF2ZXJzZSBpdHMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRyZXQgKz0gZ2V0VGV4dCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7XG5cdFx0cmV0dXJuIGVsZW0ubm9kZVZhbHVlO1xuXHR9XG5cdC8vIERvIG5vdCBpbmNsdWRlIGNvbW1lbnQgb3IgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBub2Rlc1xuXG5cdHJldHVybiByZXQ7XG59O1xuXG5FeHByID0gU2l6emxlLnNlbGVjdG9ycyA9IHtcblxuXHQvLyBDYW4gYmUgYWRqdXN0ZWQgYnkgdGhlIHVzZXJcblx0Y2FjaGVMZW5ndGg6IDUwLFxuXG5cdGNyZWF0ZVBzZXVkbzogbWFya0Z1bmN0aW9uLFxuXG5cdG1hdGNoOiBtYXRjaEV4cHIsXG5cblx0YXR0ckhhbmRsZToge30sXG5cblx0ZmluZDoge30sXG5cblx0cmVsYXRpdmU6IHtcblx0XHRcIj5cIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiIFwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIgfSxcblx0XHRcIitcIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCJ+XCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiIH1cblx0fSxcblxuXHRwcmVGaWx0ZXI6IHtcblx0XHRcIkFUVFJcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0bWF0Y2hbMV0gPSBtYXRjaFsxXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXG5cdFx0XHQvLyBNb3ZlIHRoZSBnaXZlbiB2YWx1ZSB0byBtYXRjaFszXSB3aGV0aGVyIHF1b3RlZCBvciB1bnF1b3RlZFxuXHRcdFx0bWF0Y2hbM10gPSAoIG1hdGNoWzNdIHx8IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCIgKS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXG5cdFx0XHRpZiAoIG1hdGNoWzJdID09PSBcIn49XCIgKSB7XG5cdFx0XHRcdG1hdGNoWzNdID0gXCIgXCIgKyBtYXRjaFszXSArIFwiIFwiO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDQgKTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHQvKiBtYXRjaGVzIGZyb20gbWF0Y2hFeHByW1wiQ0hJTERcIl1cblx0XHRcdFx0MSB0eXBlIChvbmx5fG50aHwuLi4pXG5cdFx0XHRcdDIgd2hhdCAoY2hpbGR8b2YtdHlwZSlcblx0XHRcdFx0MyBhcmd1bWVudCAoZXZlbnxvZGR8XFxkKnxcXGQqbihbKy1dXFxkKyk/fC4uLilcblx0XHRcdFx0NCB4bi1jb21wb25lbnQgb2YgeG4reSBhcmd1bWVudCAoWystXT9cXGQqbnwpXG5cdFx0XHRcdDUgc2lnbiBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NiB4IG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ3IHNpZ24gb2YgeS1jb21wb25lbnRcblx0XHRcdFx0OCB5IG9mIHktY29tcG9uZW50XG5cdFx0XHQqL1xuXHRcdFx0bWF0Y2hbMV0gPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRpZiAoIG1hdGNoWzFdLnNsaWNlKCAwLCAzICkgPT09IFwibnRoXCIgKSB7XG5cdFx0XHRcdC8vIG50aC0qIHJlcXVpcmVzIGFyZ3VtZW50XG5cdFx0XHRcdGlmICggIW1hdGNoWzNdICkge1xuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIG51bWVyaWMgeCBhbmQgeSBwYXJhbWV0ZXJzIGZvciBFeHByLmZpbHRlci5DSElMRFxuXHRcdFx0XHQvLyByZW1lbWJlciB0aGF0IGZhbHNlL3RydWUgY2FzdCByZXNwZWN0aXZlbHkgdG8gMC8xXG5cdFx0XHRcdG1hdGNoWzRdID0gKyggbWF0Y2hbNF0gPyBtYXRjaFs1XSArIChtYXRjaFs2XSB8fCAxKSA6IDIgKiAoIG1hdGNoWzNdID09PSBcImV2ZW5cIiB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApICk7XG5cdFx0XHRcdG1hdGNoWzVdID0gKyggKCBtYXRjaFs3XSArIG1hdGNoWzhdICkgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKTtcblxuXHRcdFx0Ly8gb3RoZXIgdHlwZXMgcHJvaGliaXQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCBtYXRjaFszXSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdHZhciBleGNlc3MsXG5cdFx0XHRcdHVucXVvdGVkID0gIW1hdGNoWzZdICYmIG1hdGNoWzJdO1xuXG5cdFx0XHRpZiAoIG1hdGNoRXhwcltcIkNISUxEXCJdLnRlc3QoIG1hdGNoWzBdICkgKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBY2NlcHQgcXVvdGVkIGFyZ3VtZW50cyBhcy1pc1xuXHRcdFx0aWYgKCBtYXRjaFszXSApIHtcblx0XHRcdFx0bWF0Y2hbMl0gPSBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTdHJpcCBleGNlc3MgY2hhcmFjdGVycyBmcm9tIHVucXVvdGVkIGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmXG5cdFx0XHRcdC8vIEdldCBleGNlc3MgZnJvbSB0b2tlbml6ZSAocmVjdXJzaXZlbHkpXG5cdFx0XHRcdChleGNlc3MgPSB0b2tlbml6ZSggdW5xdW90ZWQsIHRydWUgKSkgJiZcblx0XHRcdFx0Ly8gYWR2YW5jZSB0byB0aGUgbmV4dCBjbG9zaW5nIHBhcmVudGhlc2lzXG5cdFx0XHRcdChleGNlc3MgPSB1bnF1b3RlZC5pbmRleE9mKCBcIilcIiwgdW5xdW90ZWQubGVuZ3RoIC0gZXhjZXNzICkgLSB1bnF1b3RlZC5sZW5ndGgpICkge1xuXG5cdFx0XHRcdC8vIGV4Y2VzcyBpcyBhIG5lZ2F0aXZlIGluZGV4XG5cdFx0XHRcdG1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0XHRtYXRjaFsyXSA9IHVucXVvdGVkLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV0dXJuIG9ubHkgY2FwdHVyZXMgbmVlZGVkIGJ5IHRoZSBwc2V1ZG8gZmlsdGVyIG1ldGhvZCAodHlwZSBhbmQgYXJndW1lbnQpXG5cdFx0XHRyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDMgKTtcblx0XHR9XG5cdH0sXG5cblx0ZmlsdGVyOiB7XG5cblx0XHRcIlRBR1wiOiBmdW5jdGlvbiggbm9kZU5hbWVTZWxlY3RvciApIHtcblx0XHRcdHZhciBub2RlTmFtZSA9IG5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5vZGVOYW1lU2VsZWN0b3IgPT09IFwiKlwiID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9IDpcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZTtcblx0XHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDTEFTU1wiOiBmdW5jdGlvbiggY2xhc3NOYW1lICkge1xuXHRcdFx0dmFyIHBhdHRlcm4gPSBjbGFzc0NhY2hlWyBjbGFzc05hbWUgKyBcIiBcIiBdO1xuXG5cdFx0XHRyZXR1cm4gcGF0dGVybiB8fFxuXHRcdFx0XHQocGF0dGVybiA9IG5ldyBSZWdFeHAoIFwiKF58XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyBjbGFzc05hbWUgKyBcIihcIiArIHdoaXRlc3BhY2UgKyBcInwkKVwiICkpICYmXG5cdFx0XHRcdGNsYXNzQ2FjaGUoIGNsYXNzTmFtZSwgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdHRlcm4udGVzdCggdHlwZW9mIGVsZW0uY2xhc3NOYW1lID09PSBcInN0cmluZ1wiICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBlbGVtLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIgKTtcblx0XHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbmFtZSwgb3BlcmF0b3IsIGNoZWNrICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0XHRpZiAoIHJlc3VsdCA9PSBudWxsICkge1xuXHRcdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCIhPVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggIW9wZXJhdG9yICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVzdWx0ICs9IFwiXCI7XG5cblx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIj1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiE9XCIgPyByZXN1bHQgIT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJePVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIio9XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIkPVwiID8gY2hlY2sgJiYgcmVzdWx0LnNsaWNlKCAtY2hlY2subGVuZ3RoICkgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJ+PVwiID8gKCBcIiBcIiArIHJlc3VsdC5yZXBsYWNlKCByd2hpdGVzcGFjZSwgXCIgXCIgKSArIFwiIFwiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJ8PVwiID8gcmVzdWx0ID09PSBjaGVjayB8fCByZXN1bHQuc2xpY2UoIDAsIGNoZWNrLmxlbmd0aCArIDEgKSA9PT0gY2hlY2sgKyBcIi1cIiA6XG5cdFx0XHRcdFx0ZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBhcmd1bWVudCwgZmlyc3QsIGxhc3QgKSB7XG5cdFx0XHR2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSBcIm50aFwiLFxuXHRcdFx0XHRmb3J3YXJkID0gdHlwZS5zbGljZSggLTQgKSAhPT0gXCJsYXN0XCIsXG5cdFx0XHRcdG9mVHlwZSA9IHdoYXQgPT09IFwib2YtdHlwZVwiO1xuXG5cdFx0XHRyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/XG5cblx0XHRcdFx0Ly8gU2hvcnRjdXQgZm9yIDpudGgtKihuKVxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gISFlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRcdH0gOlxuXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGNhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSwgbm9kZSwgbm9kZUluZGV4LCBzdGFydCxcblx0XHRcdFx0XHRcdGRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/IFwibmV4dFNpYmxpbmdcIiA6IFwicHJldmlvdXNTaWJsaW5nXCIsXG5cdFx0XHRcdFx0XHRwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUsXG5cdFx0XHRcdFx0XHRuYW1lID0gb2ZUeXBlICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdHVzZUNhY2hlID0gIXhtbCAmJiAhb2ZUeXBlLFxuXHRcdFx0XHRcdFx0ZGlmZiA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIDooZmlyc3R8bGFzdHxvbmx5KS0oY2hpbGR8b2YtdHlwZSlcblx0XHRcdFx0XHRcdGlmICggc2ltcGxlICkge1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIGRpciApIHtcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gbm9kZVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBvZlR5cGUgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmV2ZXJzZSBkaXJlY3Rpb24gZm9yIDpvbmx5LSogKGlmIHdlIGhhdmVuJ3QgeWV0IGRvbmUgc28pXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnQgPSBkaXIgPSB0eXBlID09PSBcIm9ubHlcIiAmJiAhc3RhcnQgJiYgXCJuZXh0U2libGluZ1wiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzdGFydCA9IFsgZm9yd2FyZCA/IHBhcmVudC5maXJzdENoaWxkIDogcGFyZW50Lmxhc3RDaGlsZCBdO1xuXG5cdFx0XHRcdFx0XHQvLyBub24teG1sIDpudGgtY2hpbGQoLi4uKSBzdG9yZXMgY2FjaGUgZGF0YSBvbiBgcGFyZW50YFxuXHRcdFx0XHRcdFx0aWYgKCBmb3J3YXJkICYmIHVzZUNhY2hlICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0bm9kZSA9IHBhcmVudDtcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdG5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTtcblx0XHRcdFx0XHRcdFx0ZGlmZiA9IG5vZGVJbmRleCAmJiBjYWNoZVsgMiBdO1xuXHRcdFx0XHRcdFx0XHRub2RlID0gbm9kZUluZGV4ICYmIHBhcmVudC5jaGlsZE5vZGVzWyBub2RlSW5kZXggXTtcblxuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFdoZW4gZm91bmQsIGNhY2hlIGluZGV4ZXMgb24gYHBhcmVudGAgYW5kIGJyZWFrXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBub2RlLm5vZGVUeXBlID09PSAxICYmICsrZGlmZiAmJiBub2RlID09PSBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0XHRcdGlmICggdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheVxuXHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdGNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07XG5cdFx0XHRcdFx0XHRcdFx0ZGlmZiA9IG5vZGVJbmRleDtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIHhtbCA6bnRoLWNoaWxkKC4uLilcblx0XHRcdFx0XHRcdFx0Ly8gb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKVxuXHRcdFx0XHRcdFx0XHRpZiAoIGRpZmYgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoICggb2ZUeXBlID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCsrZGlmZiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDYWNoZSB0aGUgaW5kZXggb2YgZWFjaCBlbmNvdW50ZXJlZCBlbGVtZW50XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBub2RlID09PSBlbGVtICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXHRcdFx0Ly8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0Ly8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvc1xuXHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIHBzZXVkbyApO1xuXG5cdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHQvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuXHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRyZXR1cm4gZm4oIGFyZ3VtZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuXHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0cmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWR4ID0gaW5kZXhPZiggc2VlZCwgbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9XG5cdH0sXG5cblx0cHNldWRvczoge1xuXHRcdC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuXHRcdFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHQvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuXHRcdFx0Ly8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcblx0XHRcdC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuXHRcdFx0dmFyIGlucHV0ID0gW10sXG5cdFx0XHRcdHJlc3VsdHMgPSBbXSxcblx0XHRcdFx0bWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSApO1xuXG5cdFx0XHRyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cblx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRpID0gc2VlZC5sZW5ndGg7XG5cblx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0c2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkgOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdGlucHV0WzBdID0gZWxlbTtcblx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cdFx0XHRcdFx0Ly8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdFx0XHRpbnB1dFswXSA9IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJoYXNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdC8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsXG5cdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHQvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLlwiXG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXHRcdFx0Ly8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxuXHRcdFx0aWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8IFwiXCIpICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHR9XG5cdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBlbGVtTGFuZztcblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdGlmICggKGVsZW1MYW5nID0gZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0XHRcdFx0ZWxlbS5sYW5nIDpcblx0XHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKSApIHtcblxuXHRcdFx0XHRcdFx0ZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHR9LFxuXG5cdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG5cdFx0fSxcblxuXHRcdFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpO1xuXHRcdH0sXG5cblx0XHQvLyBCb29sZWFuIHByb3BlcnRpZXNcblx0XHRcImVuYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2U7XG5cdFx0fSxcblxuXHRcdFwiZGlzYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09IFwib3B0aW9uXCIgJiYgISFlbGVtLnNlbGVjdGVkKTtcblx0XHR9LFxuXG5cdFx0XCJzZWxlY3RlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHRcblx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdC8vIENvbnRlbnRzXG5cdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jZW1wdHktcHNldWRvXG5cdFx0XHQvLyA6ZW1wdHkgaXMgbmVnYXRlZCBieSBlbGVtZW50ICgxKSBvciBjb250ZW50IG5vZGVzICh0ZXh0OiAzOyBjZGF0YTogNDsgZW50aXR5IHJlZjogNSksXG5cdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0Ly8gbm9kZVR5cGUgPCA2IHdvcmtzIGJlY2F1c2UgYXR0cmlidXRlcyAoMikgZG8gbm90IGFwcGVhciBhcyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJwYXJlbnRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gIUV4cHIucHNldWRvc1tcImVtcHR5XCJdKCBlbGVtICk7XG5cdFx0fSxcblxuXHRcdC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcblx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJpbnB1dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJidXR0b25cIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSBcImJ1dHRvblwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCI7XG5cdFx0fSxcblxuXHRcdFwidGV4dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBhdHRyO1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdC8vIE5ldyBIVE1MNSBhdHRyaWJ1dGUgdmFsdWVzIChlLmcuLCBcInNlYXJjaFwiKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09IFwidGV4dFwiXG5cdFx0XHRcdCggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIiApO1xuXHRcdH0sXG5cblx0XHQvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uXG5cdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFsgMCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIFsgbGVuZ3RoIC0gMSBdO1xuXHRcdH0pLFxuXG5cdFx0XCJlcVwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0fSksXG5cblx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcIm9kZFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwibHRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pXG5cdH1cbn07XG5cbkV4cHIucHNldWRvc1tcIm50aFwiXSA9IEV4cHIucHNldWRvc1tcImVxXCJdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbn1cbmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7XG59XG5cbi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVyc1xuZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5zZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvcztcbkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7XG5cbnRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7XG5cdHZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLFxuXHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0Y2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggY2FjaGVkICkge1xuXHRcdHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG5cdH1cblxuXHRzb0ZhciA9IHNlbGVjdG9yO1xuXHRncm91cHMgPSBbXTtcblx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXG5cdHdoaWxlICggc29GYXIgKSB7XG5cblx0XHQvLyBDb21tYSBhbmQgZmlyc3QgcnVuXG5cdFx0aWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHQvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZFxuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0Zhcjtcblx0XHRcdH1cblx0XHRcdGdyb3Vwcy5wdXNoKCAodG9rZW5zID0gW10pICk7XG5cdFx0fVxuXG5cdFx0bWF0Y2hlZCA9IGZhbHNlO1xuXG5cdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0Ly8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlXG5cdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHR9KTtcblx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlsdGVyc1xuXHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG5cdFx0XHRcdChtYXRjaCA9IHByZUZpbHRlcnNbIHR5cGUgXSggbWF0Y2ggKSkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0bWF0Y2hlczogbWF0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhbWF0Y2hlZCApIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHQvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcblx0Ly8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zXG5cdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdHNvRmFyLmxlbmd0aCA6XG5cdFx0c29GYXIgP1xuXHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdC8vIENhY2hlIHRoZSB0b2tlbnNcblx0XHRcdHRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApO1xufTtcblxuZnVuY3Rpb24gdG9TZWxlY3RvciggdG9rZW5zICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRzZWxlY3RvciA9IFwiXCI7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdHNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0b3I7XG59XG5cbmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdHZhciBkaXIgPSBjb21iaW5hdG9yLmRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSxcblx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cblx0XHRcdC8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGNvbWJpbmF0b3IgY2FjaGluZ1xuXHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHwgKG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0aWYgKCAob2xkQ2FjaGUgPSB1bmlxdWVDYWNoZVsgZGlyIF0pICYmXG5cdFx0XHRcdFx0XHRcdG9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQXNzaWduIHRvIG5ld0NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXVzZSBuZXdjYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZ1xuXHRcdFx0XHRcdFx0XHRpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkge1xuXHRyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBpID0gbWF0Y2hlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gOlxuXHRcdG1hdGNoZXJzWzBdO1xufVxuXG5mdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG5cdHZhciBlbGVtLFxuXHRcdG5ld1VubWF0Y2hlZCA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsXG5cdFx0bWFwcGVkID0gbWFwICE9IG51bGw7XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0bmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0aWYgKCBtYXBwZWQgKSB7XG5cdFx0XHRcdFx0bWFwLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuZXdVbm1hdGNoZWQ7XG59XG5cbmZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcblx0aWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTtcblx0fVxuXHRpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG5cdH1cblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuXHRcdHZhciB0ZW1wLCBpLCBlbGVtLFxuXHRcdFx0cHJlTWFwID0gW10sXG5cdFx0XHRwb3N0TWFwID0gW10sXG5cdFx0XHRwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuXHRcdFx0ZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8IFwiKlwiLCBjb250ZXh0Lm5vZGVUeXBlID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LCBbXSApLFxuXG5cdFx0XHQvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cblx0XHRcdG1hdGNoZXJJbiA9IHByZUZpbHRlciAmJiAoIHNlZWQgfHwgIXNlbGVjdG9yICkgP1xuXHRcdFx0XHRjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdGVsZW1zLFxuXG5cdFx0XHRtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG5cdFx0XHRcdHBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID9cblxuXHRcdFx0XHRcdC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFtdIDpcblxuXHRcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuXHRcdFx0XHRcdHJlc3VsdHMgOlxuXHRcdFx0XHRtYXRjaGVySW47XG5cblx0XHQvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuXHRcdGlmICggbWF0Y2hlciApIHtcblx0XHRcdG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcG9zdEZpbHRlclxuXHRcdGlmICggcG9zdEZpbHRlciApIHtcblx0XHRcdHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuXHRcdFx0cG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG5cdFx0XHQvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG5cdFx0XHRpID0gdGVtcC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAoZWxlbSA9IHRlbXBbaV0pICkge1xuXHRcdFx0XHRcdG1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggc2VlZCApIHtcblx0XHRcdGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG5cdFx0XHRcdGlmICggcG9zdEZpbmRlciApIHtcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcblx0XHRcdFx0XHR0ZW1wID0gW107XG5cdFx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaFxuXHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuXHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJlxuXHRcdFx0XHRcdFx0KHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkge1xuXG5cdFx0XHRcdFx0XHRzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWRcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlck91dCA9IGNvbmRlbnNlKFxuXHRcdFx0XHRtYXRjaGVyT3V0ID09PSByZXN1bHRzID9cblx0XHRcdFx0XHRtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuXHRcdFx0XHRcdG1hdGNoZXJPdXRcblx0XHRcdCk7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG5cdHZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMF0udHlwZSBdLFxuXHRcdGltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVtcIiBcIl0sXG5cdFx0aSA9IGxlYWRpbmdSZWxhdGl2ZSA/IDEgOiAwLFxuXG5cdFx0Ly8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocylcblx0XHRtYXRjaENvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoQW55Q29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIHJldCA9ICggIWxlYWRpbmdSZWxhdGl2ZSAmJiAoIHhtbCB8fCBjb250ZXh0ICE9PSBvdXRlcm1vc3RDb250ZXh0ICkgKSB8fCAoXG5cdFx0XHRcdChjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/XG5cdFx0XHRcdFx0bWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdFx0bWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuXHRcdFx0Ly8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRjaGVja0NvbnRleHQgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9IF07XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuXHRcdFx0bWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcblx0XHRcdGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHQvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcblx0XHRcdFx0aiA9ICsraTtcblx0XHRcdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXRNYXRjaGVyKFxuXHRcdFx0XHRcdGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuXHRcdFx0XHRcdGkgPiAxICYmIHRvU2VsZWN0b3IoXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYFxuXHRcdFx0XHRcdFx0dG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gXCIgXCIgPyBcIipcIiA6IFwiXCIgfSlcblx0XHRcdFx0XHQpLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSxcblx0XHRcdFx0XHRtYXRjaGVyLFxuXHRcdFx0XHRcdGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG5cdHZhciBieVNldCA9IHNldE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0YnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0c3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkge1xuXHRcdFx0dmFyIGVsZW0sIGosIG1hdGNoZXIsXG5cdFx0XHRcdG1hdGNoZWRDb3VudCA9IDAsXG5cdFx0XHRcdGkgPSBcIjBcIixcblx0XHRcdFx0dW5tYXRjaGVkID0gc2VlZCAmJiBbXSxcblx0XHRcdFx0c2V0TWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHRjb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCxcblx0XHRcdFx0Ly8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dFxuXHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFtcIlRBR1wiXSggXCIqXCIsIG91dGVybW9zdCApLFxuXHRcdFx0XHQvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlclxuXHRcdFx0XHRkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSxcblx0XHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT09IGRvY3VtZW50IHx8IGNvbnRleHQgfHwgb3V0ZXJtb3N0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gU3VwcG9ydDogSUU8OSwgU2FmYXJpXG5cdFx0XHQvLyBUb2xlcmF0ZSBOb2RlTGlzdCBwcm9wZXJ0aWVzIChJRTogXCJsZW5ndGhcIjsgU2FmYXJpOiA8bnVtYmVyPikgbWF0Y2hpbmcgZWxlbWVudHMgYnkgaWRcblx0XHRcdGZvciAoIDsgaSAhPT0gbGVuICYmIChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHRpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdFx0XHRcdFx0eG1sID0gIWRvY3VtZW50SXNIVE1MO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0IHx8IGRvY3VtZW50LCB4bWwpICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gYGlgIGlzIG5vdyB0aGUgY291bnQgb2YgZWxlbWVudHMgdmlzaXRlZCBhYm92ZSwgYW5kIGFkZGluZyBpdCB0byBgbWF0Y2hlZENvdW50YFxuXHRcdFx0Ly8gbWFrZXMgdGhlIGxhdHRlciBub25uZWdhdGl2ZS5cblx0XHRcdG1hdGNoZWRDb3VudCArPSBpO1xuXG5cdFx0XHQvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcblx0XHRcdC8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZVxuXHRcdFx0Ly8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC5cblx0XHRcdC8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nIFwiMFwiIGBpYCBhbGxvd3MgYGlgIHRvIHJlbWFpbiBhIHN0cmluZyBvbmx5IGluIHRoYXRcblx0XHRcdC8vIGNhc2UsIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgXCIwMFwiIGBtYXRjaGVkQ291bnRgIHRoYXQgZGlmZmVycyBmcm9tIGBpYCBidXQgaXMgYWxzb1xuXHRcdFx0Ly8gbnVtZXJpY2FsbHkgemVyby5cblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBzZWxlY3RvciBpbiB0aGUgbGlzdCBhbmQgbm8gc2VlZFxuXHQvLyAodGhlIGxhdHRlciBvZiB3aGljaCBndWFyYW50ZWVzIHVzIGNvbnRleHQpXG5cdGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXG5cdFx0Ly8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSURcblx0XHR0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7XG5cdFx0aWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09IFwiSURcIiAmJlxuXHRcdFx0XHRzdXBwb3J0LmdldEJ5SWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdFx0XHRFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXG5cdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG5cdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0fSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG5cdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRva2VuID0gdG9rZW5zW2ldO1xuXG5cdFx0XHQvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yXG5cdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuXHRcdFx0XHQvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcblx0XHRcdFx0aWYgKCAoc2VlZCA9IGZpbmQoXG5cdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuXHRcdFx0XHRcdHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHRcdFx0KSkgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHR0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0KCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuXHRcdHNlZWQsXG5cdFx0Y29udGV4dCxcblx0XHQhZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmVzdWx0cyxcblx0XHQhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdCk7XG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1K1xuLy8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cbi8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuc2V0RG9jdW1lbnQoKTtcblxuLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcbi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdjEgKSB7XG5cdC8vIFNob3VsZCByZXR1cm4gMSwgYnV0IHJldHVybnMgNCAoZm9sbG93aW5nKVxuXHRyZXR1cm4gZGl2MS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApICYgMTtcbn0pO1xuXG4vLyBTdXBwb3J0OiBJRTw4XG4vLyBQcmV2ZW50IGF0dHJpYnV0ZS9wcm9wZXJ0eSBcImludGVycG9sYXRpb25cIlxuLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM2NDI5JTI4VlMuODUlMjkuYXNweFxuaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdGRpdi5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyMnPjwvYT5cIjtcblx0cmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIikgPT09IFwiI1wiIDtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ0eXBlXCIgPyAxIDogMiApO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBkZWZhdWx0VmFsdWUgaW4gcGxhY2Ugb2YgZ2V0QXR0cmlidXRlKFwidmFsdWVcIilcbmlmICggIXN1cHBvcnQuYXR0cmlidXRlcyB8fCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdGRpdi5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdGRpdi5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiLCBcIlwiICk7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ2YWx1ZVwiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGdldEF0dHJpYnV0ZU5vZGUgdG8gZmV0Y2ggYm9vbGVhbnMgd2hlbiBnZXRBdHRyaWJ1dGUgbGllc1xuaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdHJldHVybiBkaXYuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikgPT0gbnVsbDtcbn0pICkge1xuXHRhZGRIYW5kbGUoIGJvb2xlYW5zLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0dmFyIHZhbDtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtWyBuYW1lIF0gPT09IHRydWUgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOlxuXHRcdFx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKSkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0bnVsbDtcblx0XHR9XG5cdH0pO1xufVxuXG5yZXR1cm4gU2l6emxlO1xuXG59KSggd2luZG93ICk7XG5cblxuXG5qUXVlcnkuZmluZCA9IFNpenpsZTtcbmpRdWVyeS5leHByID0gU2l6emxlLnNlbGVjdG9ycztcbmpRdWVyeS5leHByWyBcIjpcIiBdID0galF1ZXJ5LmV4cHIucHNldWRvcztcbmpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblxuXG5cbnZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHtcblx0dmFyIG1hdGNoZWQgPSBbXSxcblx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0d2hpbGUgKCAoIGVsZW0gPSBlbGVtWyBkaXIgXSApICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0aWYgKCB0cnVuY2F0ZSAmJiBqUXVlcnkoIGVsZW0gKS5pcyggdW50aWwgKSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBzaWJsaW5ncyA9IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHR2YXIgbWF0Y2hlZCA9IFtdO1xuXG5cdGZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7XG5cdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRtYXRjaGVkLnB1c2goIG4gKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbWF0Y2hlZDtcbn07XG5cblxudmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7XG5cbnZhciByc2luZ2xlVGFnID0gKCAvXjwoW1xcdy1dKylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8gKTtcblxuXG5cbnZhciByaXNTaW1wbGUgPSAvXi5bXjojXFxbXFwuLF0qJC87XG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG5mdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHQvKiBqc2hpbnQgLVcwMTggKi9cblx0XHRcdHJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDtcblx0XHR9ICk7XG5cblx0fVxuXG5cdGlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDtcblx0XHR9ICk7XG5cblx0fVxuXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcblx0XHR9XG5cblx0XHRxdWFsaWZpZXIgPSBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzICk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gKCBpbmRleE9mLmNhbGwoIHF1YWxpZmllciwgZWxlbSApID4gLTEgKSAhPT0gbm90O1xuXHR9ICk7XG59XG5cbmpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHtcblx0dmFyIGVsZW0gPSBlbGVtc1sgMCBdO1xuXG5cdGlmICggbm90ICkge1xuXHRcdGV4cHIgPSBcIjpub3QoXCIgKyBleHByICsgXCIpXCI7XG5cdH1cblxuXHRyZXR1cm4gZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgP1xuXHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXSA6XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlcyggZXhwciwgalF1ZXJ5LmdyZXAoIGVsZW1zLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHRcdH0gKSApO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRmaW5kOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGksXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0c2VsZiA9IHRoaXM7XG5cblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9ICkgKTtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcblx0XHRyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3Rvcjtcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIGZhbHNlICkgKTtcblx0fSxcblx0bm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlICkgKTtcblx0fSxcblx0aXM6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gISF3aW5ub3coXG5cdFx0XHR0aGlzLFxuXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgcG9zaXRpb25hbC9yZWxhdGl2ZSBzZWxlY3RvciwgY2hlY2sgbWVtYmVyc2hpcCBpbiB0aGUgcmV0dXJuZWQgc2V0XG5cdFx0XHQvLyBzbyAkKFwicDpmaXJzdFwiKS5pcyhcInA6bGFzdFwiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gXCJwXCIuXG5cdFx0XHR0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID9cblx0XHRcdFx0alF1ZXJ5KCBzZWxlY3RvciApIDpcblx0XHRcdFx0c2VsZWN0b3IgfHwgW10sXG5cdFx0XHRmYWxzZVxuXHRcdCkubGVuZ3RoO1xuXHR9XG59ICk7XG5cblxuLy8gSW5pdGlhbGl6ZSBhIGpRdWVyeSBvYmplY3RcblxuXG4vLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudClcbnZhciByb290alF1ZXJ5LFxuXG5cdC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG5cdC8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSlcblx0Ly8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpXG5cdHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxcblxuXHRpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJvb3QgKSB7XG5cdFx0dmFyIG1hdGNoLCBlbGVtO1xuXG5cdFx0Ly8gSEFORExFOiAkKFwiXCIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpXG5cdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHQvLyBNZXRob2QgaW5pdCgpIGFjY2VwdHMgYW4gYWx0ZXJuYXRlIHJvb3RqUXVlcnlcblx0XHQvLyBzbyBtaWdyYXRlIGNhbiBzdXBwb3J0IGpRdWVyeS5zdWIgKGdoLTIxMDEpXG5cdFx0cm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTtcblxuXHRcdC8vIEhhbmRsZSBIVE1MIHN0cmluZ3Ncblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGlmICggc2VsZWN0b3JbIDAgXSA9PT0gXCI8XCIgJiZcblx0XHRcdFx0c2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiZcblx0XHRcdFx0c2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cblx0XHRcdFx0Ly8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2tcblx0XHRcdFx0bWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG5cdFx0XHRpZiAoIG1hdGNoICYmICggbWF0Y2hbIDEgXSB8fCAhY29udGV4dCApICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWyAxIF0gKSB7XG5cdFx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WyAwIF0gOiBjb250ZXh0O1xuXG5cdFx0XHRcdFx0Ly8gT3B0aW9uIHRvIHJ1biBzY3JpcHRzIGlzIHRydWUgZm9yIGJhY2stY29tcGF0XG5cdFx0XHRcdFx0Ly8gSW50ZW50aW9uYWxseSBsZXQgdGhlIGVycm9yIGJlIHRocm93biBpZiBwYXJzZUhUTUwgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoXG5cdFx0XHRcdFx0XHRtYXRjaFsgMSBdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWyAxIF0gKSAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29udGV4dCApICkge1xuXHRcdFx0XHRcdFx0Zm9yICggbWF0Y2ggaW4gY29udGV4dCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlXG5cdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHRoaXNbIG1hdGNoIF0gKSApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzWyBtYXRjaCBdKCBjb250ZXh0WyBtYXRjaCBdICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gLi4uYW5kIG90aGVyd2lzZSBzZXQgYXMgYXR0cmlidXRlc1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXR0ciggbWF0Y2gsIGNvbnRleHRbIG1hdGNoIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJCgjaWQpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtYXRjaFsgMiBdICk7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBCbGFja2JlcnJ5IDQuNlxuXHRcdFx0XHRcdC8vIGdFQklEIHJldHVybnMgbm9kZXMgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAoIzY5NjMpXG5cdFx0XHRcdFx0aWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSW5qZWN0IHRoZSBlbGVtZW50IGRpcmVjdGx5IGludG8gdGhlIGpRdWVyeSBvYmplY3Rcblx0XHRcdFx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdFx0XHRcdHRoaXNbIDAgXSA9IGVsZW07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGhpcy5jb250ZXh0ID0gZG9jdW1lbnQ7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCAkKC4uLikpXG5cdFx0XHR9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHtcblx0XHRcdFx0cmV0dXJuICggY29udGV4dCB8fCByb290ICkuZmluZCggc2VsZWN0b3IgKTtcblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG5cdFx0XHQvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdC8vIEhBTkRMRTogJChET01FbGVtZW50KVxuXHRcdH0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkge1xuXHRcdFx0dGhpcy5jb250ZXh0ID0gdGhpc1sgMCBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcblx0XHRcdHJldHVybiByb290LnJlYWR5ICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRyb290LnJlYWR5KCBzZWxlY3RvciApIDpcblxuXHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdHNlbGVjdG9yKCBqUXVlcnkgKTtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cblx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0Z3VhcmFudGVlZFVuaXF1ZSA9IHtcblx0XHRjaGlsZHJlbjogdHJ1ZSxcblx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRuZXh0OiB0cnVlLFxuXHRcdHByZXY6IHRydWVcblx0fTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0dmFyIHRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLFxuXHRcdFx0bCA9IHRhcmdldHMubGVuZ3RoO1xuXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGNsb3Nlc3Q6IGZ1bmN0aW9uKCBzZWxlY3RvcnMsIGNvbnRleHQgKSB7XG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0cG9zID0gcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvcnMgKSB8fCB0eXBlb2Ygc2VsZWN0b3JzICE9PSBcInN0cmluZ1wiID9cblx0XHRcdFx0alF1ZXJ5KCBzZWxlY3RvcnMsIGNvbnRleHQgfHwgdGhpcy5jb250ZXh0ICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0Zm9yICggY3VyID0gdGhpc1sgaSBdOyBjdXIgJiYgY3VyICE9PSBjb250ZXh0OyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblxuXHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHBvcyA/XG5cdFx0XHRcdFx0cG9zLmluZGV4KCBjdXIgKSA+IC0xIDpcblxuXHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBjdXIsIHNlbGVjdG9ycyApICkgKSB7XG5cblx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApIDogbWF0Y2hlZCApO1xuXHR9LFxuXG5cdC8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4gdGhlIHNldFxuXHRpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudFxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG5cdFx0fVxuXG5cdFx0Ly8gSW5kZXggaW4gc2VsZWN0b3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggalF1ZXJ5KCBlbGVtICksIHRoaXNbIDAgXSApO1xuXHRcdH1cblxuXHRcdC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuXHRcdHJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsXG5cblx0XHRcdC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuXHRcdFx0ZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtXG5cdFx0KTtcblx0fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soXG5cdFx0XHRqUXVlcnkudW5pcXVlU29ydChcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLmdldCgpLCBqUXVlcnkoIHNlbGVjdG9yLCBjb250ZXh0ICkgKVxuXHRcdFx0KVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXG5cdFx0KTtcblx0fVxufSApO1xuXG5mdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHtcblx0d2hpbGUgKCAoIGN1ciA9IGN1clsgZGlyIF0gKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCgge1xuXHRwYXJlbnQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0cmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDtcblx0fSxcblx0cGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdH0sXG5cdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTtcblx0fSxcblx0Y2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5ncyggZWxlbS5maXJzdENoaWxkICk7XG5cdH0sXG5cdGNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZWxlbS5jb250ZW50RG9jdW1lbnQgfHwgalF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7XG5cdH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBmbiApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggdW50aWwsIHNlbGVjdG9yICkge1xuXHRcdHZhciBtYXRjaGVkID0galF1ZXJ5Lm1hcCggdGhpcywgZm4sIHVudGlsICk7XG5cblx0XHRpZiAoIG5hbWUuc2xpY2UoIC01ICkgIT09IFwiVW50aWxcIiApIHtcblx0XHRcdHNlbGVjdG9yID0gdW50aWw7XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWxlY3RvciAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRtYXRjaGVkID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIG1hdGNoZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV2ZXJzZSBvcmRlciBmb3IgcGFyZW50cyogYW5kIHByZXYtZGVyaXZhdGl2ZXNcblx0XHRcdGlmICggcnBhcmVudHNwcmV2LnRlc3QoIG5hbWUgKSApIHtcblx0XHRcdFx0bWF0Y2hlZC5yZXZlcnNlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkICk7XG5cdH07XG59ICk7XG52YXIgcm5vdHdoaXRlID0gKCAvXFxTKy9nICk7XG5cblxuXG4vLyBDb252ZXJ0IFN0cmluZy1mb3JtYXR0ZWQgb3B0aW9ucyBpbnRvIE9iamVjdC1mb3JtYXR0ZWQgb25lc1xuZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIHtcblx0dmFyIG9iamVjdCA9IHt9O1xuXHRqUXVlcnkuZWFjaCggb3B0aW9ucy5tYXRjaCggcm5vdHdoaXRlICkgfHwgW10sIGZ1bmN0aW9uKCBfLCBmbGFnICkge1xuXHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0fSApO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSA6XG5cdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblxuXHR2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZ1xuXHRcdGZpcmluZyxcblxuXHRcdC8vIExhc3QgZmlyZSB2YWx1ZSBmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzXG5cdFx0bWVtb3J5LFxuXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblxuXHRcdC8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmdcblx0XHRsb2NrZWQsXG5cblx0XHQvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuXHRcdGxpc3QgPSBbXSxcblxuXHRcdC8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzXG5cdFx0cXVldWUgPSBbXSxcblxuXHRcdC8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4ID0gLTEsXG5cblx0XHQvLyBGaXJlIGNhbGxiYWNrc1xuXHRcdGZpcmUgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5mb3JjZSBzaW5nbGUtZmlyaW5nXG5cdFx0XHRsb2NrZWQgPSBvcHRpb25zLm9uY2U7XG5cblx0XHRcdC8vIEV4ZWN1dGUgY2FsbGJhY2tzIGZvciBhbGwgcGVuZGluZyBleGVjdXRpb25zLFxuXHRcdFx0Ly8gcmVzcGVjdGluZyBmaXJpbmdJbmRleCBvdmVycmlkZXMgYW5kIHJ1bnRpbWUgY2hhbmdlc1xuXHRcdFx0ZmlyZWQgPSBmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBxdWV1ZS5sZW5ndGg7IGZpcmluZ0luZGV4ID0gLTEgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdHdoaWxlICggKytmaXJpbmdJbmRleCA8IGxpc3QubGVuZ3RoICkge1xuXG5cdFx0XHRcdFx0Ly8gUnVuIGNhbGxiYWNrIGFuZCBjaGVjayBmb3IgZWFybHkgdGVybWluYXRpb25cblx0XHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIG1lbW9yeVsgMCBdLCBtZW1vcnlbIDEgXSApID09PSBmYWxzZSAmJlxuXHRcdFx0XHRcdFx0b3B0aW9ucy5zdG9wT25GYWxzZSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSnVtcCB0byBlbmQgYW5kIGZvcmdldCB0aGUgZGF0YSBzbyAuYWRkIGRvZXNuJ3QgcmUtZmlyZVxuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3JnZXQgdGhlIGRhdGEgaWYgd2UncmUgZG9uZSB3aXRoIGl0XG5cdFx0XHRpZiAoICFvcHRpb25zLm1lbW9yeSApIHtcblx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGZpcmluZyA9IGZhbHNlO1xuXG5cdFx0XHQvLyBDbGVhbiB1cCBpZiB3ZSdyZSBkb25lIGZpcmluZyBmb3IgZ29vZFxuXHRcdFx0aWYgKCBsb2NrZWQgKSB7XG5cblx0XHRcdFx0Ly8gS2VlcCBhbiBlbXB0eSBsaXN0IGlmIHdlIGhhdmUgZGF0YSBmb3IgZnV0dXJlIGFkZCBjYWxsc1xuXHRcdFx0XHRpZiAoIG1lbW9yeSApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0aGlzIG9iamVjdCBpcyBzcGVudFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxpc3QgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0XG5cdFx0c2VsZiA9IHtcblxuXHRcdFx0Ly8gQWRkIGEgY2FsbGJhY2sgb3IgYSBjb2xsZWN0aW9uIG9mIGNhbGxiYWNrcyB0byB0aGUgbGlzdFxuXHRcdFx0YWRkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmdcblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBtZW1vcnkgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQoIGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIGpRdWVyeS50eXBlKCBhcmcgKSAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0fSApKCBhcmd1bWVudHMgKTtcblxuXHRcdFx0XHRcdGlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdFxuXHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHR2YXIgaW5kZXg7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRpZiAoIGluZGV4IDw9IGZpcmluZ0luZGV4ICkge1xuXHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gP1xuXHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBmbiwgbGlzdCApID4gLTEgOlxuXHRcdFx0XHRcdGxpc3QubGVuZ3RoID4gMDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhbGwgY2FsbGJhY2tzIGZyb20gdGhlIGxpc3Rcblx0XHRcdGVtcHR5OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmUgYW5kIC5hZGRcblx0XHRcdC8vIEFib3J0IGFueSBjdXJyZW50L3BlbmRpbmcgZXhlY3V0aW9uc1xuXHRcdFx0Ly8gQ2xlYXIgYWxsIGNhbGxiYWNrcyBhbmQgdmFsdWVzXG5cdFx0XHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGRpc2FibGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFsaXN0O1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRGlzYWJsZSAuZmlyZVxuXHRcdFx0Ly8gQWxzbyBkaXNhYmxlIC5hZGQgdW5sZXNzIHdlIGhhdmUgbWVtb3J5IChzaW5jZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdClcblx0XHRcdC8vIEFib3J0IGFueSBwZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdGxvY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsb2NrZWQgPSBxdWV1ZSA9IFtdO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhbG9ja2VkO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgYW5kIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkge1xuXHRcdFx0XHRpZiAoICFsb2NrZWQgKSB7XG5cdFx0XHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHRcdFx0YXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0aWYgKCAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzXG5cdFx0XHRmaXJlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHREZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG5cdFx0dmFyIHR1cGxlcyA9IFtcblxuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCBcInJlc29sdmVkXCIgXSxcblx0XHRcdFx0WyBcInJlamVjdFwiLCBcImZhaWxcIiwgalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksIFwicmVqZWN0ZWRcIiBdLFxuXHRcdFx0XHRbIFwibm90aWZ5XCIsIFwicHJvZ3Jlc3NcIiwgalF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApIF1cblx0XHRcdF0sXG5cdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0cHJvbWlzZSA9IHtcblx0XHRcdFx0c3RhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWx3YXlzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZCggZnVuY3Rpb24oIG5ld0RlZmVyICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgZm4gPSBqUXVlcnkuaXNGdW5jdGlvbiggZm5zWyBpIF0gKSAmJiBmbnNbIGkgXTtcblxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAxIF0gXSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZhaWwoIG5ld0RlZmVyLnJlamVjdCApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50c1xuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuXHRcdC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcblx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdHN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTtcblxuXHRcdFx0Ly8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcblx0XHRcdHByb21pc2VbIHR1cGxlWyAxIF0gXSA9IGxpc3QuYWRkO1xuXG5cdFx0XHQvLyBIYW5kbGUgc3RhdGVcblx0XHRcdGlmICggc3RhdGVTdHJpbmcgKSB7XG5cdFx0XHRcdGxpc3QuYWRkKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdC8vIHN0YXRlID0gWyByZXNvbHZlZCB8IHJlamVjdGVkIF1cblx0XHRcdFx0XHRzdGF0ZSA9IHN0YXRlU3RyaW5nO1xuXG5cdFx0XHRcdC8vIFsgcmVqZWN0X2xpc3QgfCByZXNvbHZlX2xpc3QgXS5kaXNhYmxlOyBwcm9ncmVzc19saXN0LmxvY2tcblx0XHRcdFx0fSwgdHVwbGVzWyBpIF4gMSBdWyAyIF0uZGlzYWJsZSwgdHVwbGVzWyAyIF1bIDIgXS5sb2NrICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGRlZmVycmVkWyByZXNvbHZlIHwgcmVqZWN0IHwgbm90aWZ5IF1cblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdID0gbGlzdC5maXJlV2l0aDtcblx0XHR9ICk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblx0XHRcdGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG5cdFx0XHQvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHxcblx0XHRcdFx0KCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkLlxuXHRcdFx0Ly8gSWYgcmVzb2x2ZVZhbHVlcyBjb25zaXN0IG9mIG9ubHkgYSBzaW5nbGUgRGVmZXJyZWQsIGp1c3QgdXNlIHRoYXQuXG5cdFx0XHRkZWZlcnJlZCA9IHJlbWFpbmluZyA9PT0gMSA/IHN1Ym9yZGluYXRlIDogalF1ZXJ5LkRlZmVycmVkKCksXG5cblx0XHRcdC8vIFVwZGF0ZSBmdW5jdGlvbiBmb3IgYm90aCByZXNvbHZlIGFuZCBwcm9ncmVzcyB2YWx1ZXNcblx0XHRcdHVwZGF0ZUZ1bmMgPSBmdW5jdGlvbiggaSwgY29udGV4dHMsIHZhbHVlcyApIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRjb250ZXh0c1sgaSBdID0gdGhpcztcblx0XHRcdFx0XHR2YWx1ZXNbIGkgXSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gc2xpY2UuY2FsbCggYXJndW1lbnRzICkgOiB2YWx1ZTtcblx0XHRcdFx0XHRpZiAoIHZhbHVlcyA9PT0gcHJvZ3Jlc3NWYWx1ZXMgKSB7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBjb250ZXh0cywgdmFsdWVzICk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggISggLS1yZW1haW5pbmcgKSApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjb250ZXh0cywgdmFsdWVzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblxuXHRcdFx0cHJvZ3Jlc3NWYWx1ZXMsIHByb2dyZXNzQ29udGV4dHMsIHJlc29sdmVDb250ZXh0cztcblxuXHRcdC8vIEFkZCBsaXN0ZW5lcnMgdG8gRGVmZXJyZWQgc3Vib3JkaW5hdGVzOyB0cmVhdCBvdGhlcnMgYXMgcmVzb2x2ZWRcblx0XHRpZiAoIGxlbmd0aCA+IDEgKSB7XG5cdFx0XHRwcm9ncmVzc1ZhbHVlcyA9IG5ldyBBcnJheSggbGVuZ3RoICk7XG5cdFx0XHRwcm9ncmVzc0NvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdHJlc29sdmVDb250ZXh0cyA9IG5ldyBBcnJheSggbGVuZ3RoICk7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0aWYgKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0LnByb2dyZXNzKCB1cGRhdGVGdW5jKCBpLCBwcm9ncmVzc0NvbnRleHRzLCBwcm9ncmVzc1ZhbHVlcyApIClcblx0XHRcdFx0XHRcdC5kb25lKCB1cGRhdGVGdW5jKCBpLCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKSApXG5cdFx0XHRcdFx0XHQuZmFpbCggZGVmZXJyZWQucmVqZWN0ICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0LS1yZW1haW5pbmc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiB3ZSdyZSBub3Qgd2FpdGluZyBvbiBhbnl0aGluZywgcmVzb2x2ZSB0aGUgbWFzdGVyXG5cdFx0aWYgKCAhcmVtYWluaW5nICkge1xuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG5cdH1cbn0gKTtcblxuXG4vLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcbnZhciByZWFkeUxpc3Q7XG5cbmpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHtcblxuXHQvLyBBZGQgdGhlIGNhbGxiYWNrXG5cdGpRdWVyeS5yZWFkeS5wcm9taXNlKCkuZG9uZSggZm4gKTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBJcyB0aGUgRE9NIHJlYWR5IHRvIGJlIHVzZWQ/IFNldCB0byB0cnVlIG9uY2UgaXQgb2NjdXJzLlxuXHRpc1JlYWR5OiBmYWxzZSxcblxuXHQvLyBBIGNvdW50ZXIgdG8gdHJhY2sgaG93IG1hbnkgaXRlbXMgdG8gd2FpdCBmb3IgYmVmb3JlXG5cdC8vIHRoZSByZWFkeSBldmVudCBmaXJlcy4gU2VlICM2NzgxXG5cdHJlYWR5V2FpdDogMSxcblxuXHQvLyBIb2xkIChvciByZWxlYXNlKSB0aGUgcmVhZHkgZXZlbnRcblx0aG9sZFJlYWR5OiBmdW5jdGlvbiggaG9sZCApIHtcblx0XHRpZiAoIGhvbGQgKSB7XG5cdFx0XHRqUXVlcnkucmVhZHlXYWl0Kys7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpRdWVyeS5yZWFkeSggdHJ1ZSApO1xuXHRcdH1cblx0fSxcblxuXHQvLyBIYW5kbGUgd2hlbiB0aGUgRE9NIGlzIHJlYWR5XG5cdHJlYWR5OiBmdW5jdGlvbiggd2FpdCApIHtcblxuXHRcdC8vIEFib3J0IGlmIHRoZXJlIGFyZSBwZW5kaW5nIGhvbGRzIG9yIHdlJ3JlIGFscmVhZHkgcmVhZHlcblx0XHRpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZW1lbWJlciB0aGF0IHRoZSBET00gaXMgcmVhZHlcblx0XHRqUXVlcnkuaXNSZWFkeSA9IHRydWU7XG5cblx0XHQvLyBJZiBhIG5vcm1hbCBET00gUmVhZHkgZXZlbnQgZmlyZWQsIGRlY3JlbWVudCwgYW5kIHdhaXQgaWYgbmVlZCBiZVxuXHRcdGlmICggd2FpdCAhPT0gdHJ1ZSAmJiAtLWpRdWVyeS5yZWFkeVdhaXQgPiAwICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIElmIHRoZXJlIGFyZSBmdW5jdGlvbnMgYm91bmQsIHRvIGV4ZWN1dGVcblx0XHRyZWFkeUxpc3QucmVzb2x2ZVdpdGgoIGRvY3VtZW50LCBbIGpRdWVyeSBdICk7XG5cblx0XHQvLyBUcmlnZ2VyIGFueSBib3VuZCByZWFkeSBldmVudHNcblx0XHRpZiAoIGpRdWVyeS5mbi50cmlnZ2VySGFuZGxlciApIHtcblx0XHRcdGpRdWVyeSggZG9jdW1lbnQgKS50cmlnZ2VySGFuZGxlciggXCJyZWFkeVwiICk7XG5cdFx0XHRqUXVlcnkoIGRvY3VtZW50ICkub2ZmKCBcInJlYWR5XCIgKTtcblx0XHR9XG5cdH1cbn0gKTtcblxuLyoqXG4gKiBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZFxuICovXG5mdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG5cdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbmpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHtcblx0aWYgKCAhcmVhZHlMaXN0ICkge1xuXG5cdFx0cmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cblx0XHQvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZFxuXHRcdC8vIGFmdGVyIHRoZSBicm93c2VyIGV2ZW50IGhhcyBhbHJlYWR5IG9jY3VycmVkLlxuXHRcdC8vIFN1cHBvcnQ6IElFOS0xMCBvbmx5XG5cdFx0Ly8gT2xkZXIgSUUgc29tZXRpbWVzIHNpZ25hbHMgXCJpbnRlcmFjdGl2ZVwiIHRvbyBzb29uXG5cdFx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgfHxcblx0XHRcdCggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIgJiYgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCApICkge1xuXG5cdFx0XHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFVzZSB0aGUgaGFuZHkgZXZlbnQgY2FsbGJhY2tcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblxuXHRcdFx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZWFkeUxpc3QucHJvbWlzZSggb2JqICk7XG59O1xuXG4vLyBLaWNrIG9mZiB0aGUgRE9NIHJlYWR5IGNoZWNrIGV2ZW4gaWYgdGhlIHVzZXIgZG9lcyBub3RcbmpRdWVyeS5yZWFkeS5wcm9taXNlKCk7XG5cblxuXG5cbi8vIE11bHRpZnVuY3Rpb25hbCBtZXRob2QgdG8gZ2V0IGFuZCBzZXQgdmFsdWVzIG9mIGEgY29sbGVjdGlvblxuLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uXG52YXIgYWNjZXNzID0gZnVuY3Rpb24oIGVsZW1zLCBmbiwga2V5LCB2YWx1ZSwgY2hhaW5hYmxlLCBlbXB0eUdldCwgcmF3ICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gZWxlbXMubGVuZ3RoLFxuXHRcdGJ1bGsgPSBrZXkgPT0gbnVsbDtcblxuXHQvLyBTZXRzIG1hbnkgdmFsdWVzXG5cdGlmICggalF1ZXJ5LnR5cGUoIGtleSApID09PSBcIm9iamVjdFwiICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cdFx0Zm9yICggaSBpbiBrZXkgKSB7XG5cdFx0XHRhY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5WyBpIF0sIHRydWUsIGVtcHR5R2V0LCByYXcgKTtcblx0XHR9XG5cblx0Ly8gU2V0cyBvbmUgdmFsdWVcblx0fSBlbHNlIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXG5cdFx0aWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyYXcgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGlmICggYnVsayApIHtcblxuXHRcdFx0Ly8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0XG5cdFx0XHRpZiAoIHJhdyApIHtcblx0XHRcdFx0Zm4uY2FsbCggZWxlbXMsIHZhbHVlICk7XG5cdFx0XHRcdGZuID0gbnVsbDtcblxuXHRcdFx0Ly8gLi4uZXhjZXB0IHdoZW4gZXhlY3V0aW5nIGZ1bmN0aW9uIHZhbHVlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnVsayA9IGZuO1xuXHRcdFx0XHRmbiA9IGZ1bmN0aW9uKCBlbGVtLCBrZXksIHZhbHVlICkge1xuXHRcdFx0XHRcdHJldHVybiBidWxrLmNhbGwoIGpRdWVyeSggZWxlbSApLCB2YWx1ZSApO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggZm4gKSB7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0Zm4oXG5cdFx0XHRcdFx0ZWxlbXNbIGkgXSwga2V5LCByYXcgP1xuXHRcdFx0XHRcdHZhbHVlIDpcblx0XHRcdFx0XHR2YWx1ZS5jYWxsKCBlbGVtc1sgaSBdLCBpLCBmbiggZWxlbXNbIGkgXSwga2V5ICkgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBjaGFpbmFibGUgP1xuXHRcdGVsZW1zIDpcblxuXHRcdC8vIEdldHNcblx0XHRidWxrID9cblx0XHRcdGZuLmNhbGwoIGVsZW1zICkgOlxuXHRcdFx0bGVuID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xudmFyIGFjY2VwdERhdGEgPSBmdW5jdGlvbiggb3duZXIgKSB7XG5cblx0Ly8gQWNjZXB0cyBvbmx5OlxuXHQvLyAgLSBOb2RlXG5cdC8vICAgIC0gTm9kZS5FTEVNRU5UX05PREVcblx0Ly8gICAgLSBOb2RlLkRPQ1VNRU5UX05PREVcblx0Ly8gIC0gT2JqZWN0XG5cdC8vICAgIC0gQW55XG5cdC8qIGpzaGludCAtVzAxOCAqL1xuXHRyZXR1cm4gb3duZXIubm9kZVR5cGUgPT09IDEgfHwgb3duZXIubm9kZVR5cGUgPT09IDkgfHwgISggK293bmVyLm5vZGVUeXBlICk7XG59O1xuXG5cblxuXG5mdW5jdGlvbiBEYXRhKCkge1xuXHR0aGlzLmV4cGFuZG8gPSBqUXVlcnkuZXhwYW5kbyArIERhdGEudWlkKys7XG59XG5cbkRhdGEudWlkID0gMTtcblxuRGF0YS5wcm90b3R5cGUgPSB7XG5cblx0cmVnaXN0ZXI6IGZ1bmN0aW9uKCBvd25lciwgaW5pdGlhbCApIHtcblx0XHR2YXIgdmFsdWUgPSBpbml0aWFsIHx8IHt9O1xuXG5cdFx0Ly8gSWYgaXQgaXMgYSBub2RlIHVubGlrZWx5IHRvIGJlIHN0cmluZ2lmeS1lZCBvciBsb29wZWQgb3ZlclxuXHRcdC8vIHVzZSBwbGFpbiBhc3NpZ25tZW50XG5cdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHZhbHVlO1xuXG5cdFx0Ly8gT3RoZXJ3aXNlIHNlY3VyZSBpdCBpbiBhIG5vbi1lbnVtZXJhYmxlLCBub24td3JpdGFibGUgcHJvcGVydHlcblx0XHQvLyBjb25maWd1cmFiaWxpdHkgbXVzdCBiZSB0cnVlIHRvIGFsbG93IHRoZSBwcm9wZXJ0eSB0byBiZVxuXHRcdC8vIGRlbGV0ZWQgd2l0aCB0aGUgZGVsZXRlIG9wZXJhdG9yXG5cdFx0fSBlbHNlIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb3duZXIsIHRoaXMuZXhwYW5kbywge1xuXHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWVcblx0XHRcdH0gKTtcblx0XHR9XG5cdFx0cmV0dXJuIG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0fSxcblx0Y2FjaGU6IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdC8vIGJ1dCB3ZSBzaG91bGQgbm90LCBzZWUgIzgzMzUuXG5cdFx0Ly8gQWx3YXlzIHJldHVybiBhbiBlbXB0eSBvYmplY3QuXG5cdFx0aWYgKCAhYWNjZXB0RGF0YSggb3duZXIgKSApIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGVcblx0XHR2YXIgdmFsdWUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF2YWx1ZSApIHtcblx0XHRcdHZhbHVlID0ge307XG5cblx0XHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdFx0Ly8gYnV0IHdlIHNob3VsZCBub3QsIHNlZSAjODMzNS5cblx0XHRcdC8vIEFsd2F5cyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LlxuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBvd25lciApICkge1xuXG5cdFx0XHRcdC8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXJcblx0XHRcdFx0Ly8gdXNlIHBsYWluIGFzc2lnbm1lbnRcblx0XHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB2YWx1ZTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2Ugc2VjdXJlIGl0IGluIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHlcblx0XHRcdFx0Ly8gY29uZmlndXJhYmxlIG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmVcblx0XHRcdFx0Ly8gZGVsZXRlZCB3aGVuIGRhdGEgaXMgcmVtb3ZlZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb3duZXIsIHRoaXMuZXhwYW5kbywge1xuXHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGUoIG93bmVyICk7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBkYXRhIF0gPSB2YWx1ZTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gQ29weSB0aGUgcHJvcGVydGllcyBvbmUtYnktb25lIHRvIHRoZSBjYWNoZSBvYmplY3Rcblx0XHRcdGZvciAoIHByb3AgaW4gZGF0YSApIHtcblx0XHRcdFx0Y2FjaGVbIHByb3AgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9LFxuXHRnZXQ6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzLmNhY2hlKCBvd25lciApIDpcblx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSAmJiBvd25lclsgdGhpcy5leHBhbmRvIF1bIGtleSBdO1xuXHR9LFxuXHRhY2Nlc3M6IGZ1bmN0aW9uKCBvd25lciwga2V5LCB2YWx1ZSApIHtcblx0XHR2YXIgc3RvcmVkO1xuXG5cdFx0Ly8gSW4gY2FzZXMgd2hlcmUgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBObyBrZXkgd2FzIHNwZWNpZmllZFxuXHRcdC8vICAgMi4gQSBzdHJpbmcga2V5IHdhcyBzcGVjaWZpZWQsIGJ1dCBubyB2YWx1ZSBwcm92aWRlZFxuXHRcdC8vXG5cdFx0Ly8gVGFrZSB0aGUgXCJyZWFkXCIgcGF0aCBhbmQgYWxsb3cgdGhlIGdldCBtZXRob2QgdG8gZGV0ZXJtaW5lXG5cdFx0Ly8gd2hpY2ggdmFsdWUgdG8gcmV0dXJuLCByZXNwZWN0aXZlbHkgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBUaGUgZW50aXJlIGNhY2hlIG9iamVjdFxuXHRcdC8vICAgMi4gVGhlIGRhdGEgc3RvcmVkIGF0IHRoZSBrZXlcblx0XHQvL1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0KCAoIGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApICkge1xuXG5cdFx0XHRzdG9yZWQgPSB0aGlzLmdldCggb3duZXIsIGtleSApO1xuXG5cdFx0XHRyZXR1cm4gc3RvcmVkICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRzdG9yZWQgOiB0aGlzLmdldCggb3duZXIsIGpRdWVyeS5jYW1lbENhc2UoIGtleSApICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWVcblx0XHQvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcblx0XHQvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vXG5cdFx0dGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7XG5cblx0XHQvLyBTaW5jZSB0aGUgXCJzZXRcIiBwYXRoIGNhbiBoYXZlIHR3byBwb3NzaWJsZSBlbnRyeSBwb2ludHNcblx0XHQvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl1cblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5O1xuXHR9LFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHZhciBpLCBuYW1lLCBjYW1lbCxcblx0XHRcdGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXG5cdFx0aWYgKCBjYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLnJlZ2lzdGVyKCBvd25lciApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGtleSApICkge1xuXG5cdFx0XHRcdC8vIElmIFwibmFtZVwiIGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0Ly8gV2hlbiBkYXRhIGlzIGluaXRpYWxseSBjcmVhdGVkLCB2aWEgKFwia2V5XCIsIFwidmFsXCIpIHNpZ25hdHVyZSxcblx0XHRcdFx0Ly8ga2V5cyB3aWxsIGJlIGNvbnZlcnRlZCB0byBjYW1lbENhc2UuXG5cdFx0XHRcdC8vIFNpbmNlIHRoZXJlIGlzIG5vIHdheSB0byB0ZWxsIF9ob3dfIGEga2V5IHdhcyBhZGRlZCwgcmVtb3ZlXG5cdFx0XHRcdC8vIGJvdGggcGxhaW4ga2V5IGFuZCBjYW1lbENhc2Uga2V5LiAjMTI3ODZcblx0XHRcdFx0Ly8gVGhpcyB3aWxsIG9ubHkgcGVuYWxpemUgdGhlIGFycmF5IGFyZ3VtZW50IHBhdGguXG5cdFx0XHRcdG5hbWUgPSBrZXkuY29uY2F0KCBrZXkubWFwKCBqUXVlcnkuY2FtZWxDYXNlICkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNhbWVsID0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICk7XG5cblx0XHRcdFx0Ly8gVHJ5IHRoZSBzdHJpbmcgYXMgYSBrZXkgYmVmb3JlIGFueSBtYW5pcHVsYXRpb25cblx0XHRcdFx0aWYgKCBrZXkgaW4gY2FjaGUgKSB7XG5cdFx0XHRcdFx0bmFtZSA9IFsga2V5LCBjYW1lbCBdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0bmFtZSA9IGNhbWVsO1xuXHRcdFx0XHRcdG5hbWUgPSBuYW1lIGluIGNhY2hlID9cblx0XHRcdFx0XHRcdFsgbmFtZSBdIDogKCBuYW1lLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBuYW1lLmxlbmd0aDtcblxuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGRlbGV0ZSBjYWNoZVsgbmFtZVsgaSBdIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIHRoZXJlJ3Mgbm8gbW9yZSBkYXRhXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fCBqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKSApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9IDM1LTQ1K1xuXHRcdFx0Ly8gV2Via2l0ICYgQmxpbmsgcGVyZm9ybWFuY2Ugc3VmZmVycyB3aGVuIGRlbGV0aW5nIHByb3BlcnRpZXNcblx0XHRcdC8vIGZyb20gRE9NIG5vZGVzLCBzbyBzZXQgdG8gdW5kZWZpbmVkIGluc3RlYWRcblx0XHRcdC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzg2MDdcblx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlbGV0ZSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoYXNEYXRhOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0dmFyIGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdHJldHVybiBjYWNoZSAhPT0gdW5kZWZpbmVkICYmICFqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKTtcblx0fVxufTtcbnZhciBkYXRhUHJpdiA9IG5ldyBEYXRhKCk7XG5cbnZhciBkYXRhVXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvW0EtWl0vZztcblxuZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHtcblx0dmFyIG5hbWU7XG5cblx0Ly8gSWYgbm90aGluZyB3YXMgZm91bmQgaW50ZXJuYWxseSwgdHJ5IHRvIGZldGNoIGFueVxuXHQvLyBkYXRhIGZyb20gdGhlIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGVcblx0aWYgKCBkYXRhID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRuYW1lID0gXCJkYXRhLVwiICsga2V5LnJlcGxhY2UoIHJtdWx0aURhc2gsIFwiLSQmXCIgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdGRhdGEgPSBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApO1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRhdGEgPSBkYXRhID09PSBcInRydWVcIiA/IHRydWUgOlxuXHRcdFx0XHRcdGRhdGEgPT09IFwiZmFsc2VcIiA/IGZhbHNlIDpcblx0XHRcdFx0XHRkYXRhID09PSBcIm51bGxcIiA/IG51bGwgOlxuXG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG5cdFx0XHRcdFx0ZGF0YTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge31cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyXG5cdFx0XHRkYXRhVXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKTtcblx0fSxcblxuXHRkYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YVVzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YVByaXYgbWV0aG9kcywgdGhlc2UgY2FuIGJlIGRlcHJlY2F0ZWQuXG5cdF9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0X3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGRhdGEsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0YXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlcztcblxuXHRcdC8vIEdldHMgYWxsIHZhbHVlc1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtICk7XG5cblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFkYXRhUHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTExK1xuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSggNSApICk7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YUF0dHIoIGVsZW0sIG5hbWUsIGRhdGFbIG5hbWUgXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG5cdFx0aWYgKCB0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5ICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGRhdGEsIGNhbWVsS2V5O1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyB3aXRoIHRoZSBrZXkgYXMtaXNcblx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSwga2V5ICkgfHxcblxuXHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGRhc2hlZCBrZXkgaWYgaXQgZXhpc3RzIChnaC0yNzc5KVxuXHRcdFx0XHRcdC8vIFRoaXMgaXMgZm9yIDIuMi54IG9ubHlcblx0XHRcdFx0XHRkYXRhVXNlci5nZXQoIGVsZW0sIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kJlwiICkudG9Mb3dlckNhc2UoKSApO1xuXG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y2FtZWxLZXkgPSBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKTtcblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIHdpdGggdGhlIGtleSBjYW1lbGl6ZWRcblx0XHRcdFx0ZGF0YSA9IGRhdGFVc2VyLmdldCggZWxlbSwgY2FtZWxLZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIFwiZGlzY292ZXJcIiB0aGUgZGF0YSBpblxuXHRcdFx0XHQvLyBIVE1MNSBjdXN0b20gZGF0YS0qIGF0dHJzXG5cdFx0XHRcdGRhdGEgPSBkYXRhQXR0ciggZWxlbSwgY2FtZWxLZXksIHVuZGVmaW5lZCApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFdlIHRyaWVkIHJlYWxseSBoYXJkLCBidXQgdGhlIGRhdGEgZG9lc24ndCBleGlzdC5cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgdGhlIGRhdGEuLi5cblx0XHRcdGNhbWVsS2V5ID0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICk7XG5cdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIEZpcnN0LCBhdHRlbXB0IHRvIHN0b3JlIGEgY29weSBvciByZWZlcmVuY2Ugb2YgYW55XG5cdFx0XHRcdC8vIGRhdGEgdGhhdCBtaWdodCd2ZSBiZWVuIHN0b3JlIHdpdGggYSBjYW1lbENhc2VkIGtleS5cblx0XHRcdFx0dmFyIGRhdGEgPSBkYXRhVXNlci5nZXQoIHRoaXMsIGNhbWVsS2V5ICk7XG5cblx0XHRcdFx0Ly8gRm9yIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGUgaW50ZXJvcCwgd2UgaGF2ZSB0b1xuXHRcdFx0XHQvLyBzdG9yZSBwcm9wZXJ0eSBuYW1lcyB3aXRoIGRhc2hlcyBpbiBhIGNhbWVsQ2FzZSBmb3JtLlxuXHRcdFx0XHQvLyBUaGlzIG1pZ2h0IG5vdCBhcHBseSB0byBhbGwgcHJvcGVydGllcy4uLipcblx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBjYW1lbEtleSwgdmFsdWUgKTtcblxuXHRcdFx0XHQvLyAqLi4uIEluIHRoZSBjYXNlIG9mIHByb3BlcnRpZXMgdGhhdCBtaWdodCBfYWN0dWFsbHlfXG5cdFx0XHRcdC8vIGhhdmUgZGFzaGVzLCB3ZSBuZWVkIHRvIGFsc28gc3RvcmUgYSBjb3B5IG9mIHRoYXRcblx0XHRcdFx0Ly8gdW5jaGFuZ2VkIHByb3BlcnR5LlxuXHRcdFx0XHRpZiAoIGtleS5pbmRleE9mKCBcIi1cIiApID4gLTEgJiYgZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRhdGFVc2VyLnJlbW92ZSggdGhpcywga2V5ICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHF1ZXVlO1xuXG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0dHlwZSA9ICggdHlwZSB8fCBcImZ4XCIgKSArIFwicXVldWVcIjtcblx0XHRcdHF1ZXVlID0gZGF0YVByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cXVldWUucHVzaCggZGF0YSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcXVldWUgfHwgW107XG5cdFx0fVxuXHR9LFxuXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCksXG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuXHRcdFx0fTtcblxuXHRcdC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcblx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdHN0YXJ0TGVuZ3RoLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblxuXHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0Ly8gYXV0b21hdGljYWxseSBkZXF1ZXVlZFxuXHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHR9XG5cblx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmVcblx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBrZXksIHtcblx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKS5hZGQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdH0gKVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgc2V0dGVyID0gMjtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRzZXR0ZXItLTtcblx0XHR9XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWyAwIF0sIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMgOlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbIDAgXSAhPT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHR9LFxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSApO1xuXHR9LFxuXHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdH0sXG5cblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhUHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0aWYgKCB0bXAgJiYgdG1wLmVtcHR5ICkge1xuXHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJlc29sdmUoKTtcblx0XHRyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7XG5cdH1cbn0gKTtcbnZhciBwbnVtID0gKCAvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLyApLnNvdXJjZTtcblxudmFyIHJjc3NOdW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApO1xuXG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXG5cdFx0Ly8gaXNIaWRkZW4gbWlnaHQgYmUgY2FsbGVkIGZyb20galF1ZXJ5I2ZpbHRlciBmdW5jdGlvbjtcblx0XHQvLyBpbiB0aGF0IGNhc2UsIGVsZW1lbnQgd2lsbCBiZSBzZWNvbmQgYXJndW1lbnRcblx0XHRlbGVtID0gZWwgfHwgZWxlbTtcblx0XHRyZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSA9PT0gXCJub25lXCIgfHxcblx0XHRcdCFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHR9O1xuXG5cblxuZnVuY3Rpb24gYWRqdXN0Q1NTKCBlbGVtLCBwcm9wLCB2YWx1ZVBhcnRzLCB0d2VlbiApIHtcblx0dmFyIGFkanVzdGVkLFxuXHRcdHNjYWxlID0gMSxcblx0XHRtYXhJdGVyYXRpb25zID0gMjAsXG5cdFx0Y3VycmVudFZhbHVlID0gdHdlZW4gP1xuXHRcdFx0ZnVuY3Rpb24oKSB7IHJldHVybiB0d2Vlbi5jdXIoKTsgfSA6XG5cdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AsIFwiXCIgKTsgfSxcblx0XHRpbml0aWFsID0gY3VycmVudFZhbHVlKCksXG5cdFx0dW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG5cdFx0Ly8gU3RhcnRpbmcgdmFsdWUgY29tcHV0YXRpb24gaXMgcmVxdWlyZWQgZm9yIHBvdGVudGlhbCB1bml0IG1pc21hdGNoZXNcblx0XHRpbml0aWFsSW5Vbml0ID0gKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gfHwgdW5pdCAhPT0gXCJweFwiICYmICtpbml0aWFsICkgJiZcblx0XHRcdHJjc3NOdW0uZXhlYyggalF1ZXJ5LmNzcyggZWxlbSwgcHJvcCApICk7XG5cblx0aWYgKCBpbml0aWFsSW5Vbml0ICYmIGluaXRpYWxJblVuaXRbIDMgXSAhPT0gdW5pdCApIHtcblxuXHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHR1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07XG5cblx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0dmFsdWVQYXJ0cyA9IHZhbHVlUGFydHMgfHwgW107XG5cblx0XHQvLyBJdGVyYXRpdmVseSBhcHByb3hpbWF0ZSBmcm9tIGEgbm9uemVybyBzdGFydGluZyBwb2ludFxuXHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbCB8fCAxO1xuXG5cdFx0ZG8ge1xuXG5cdFx0XHQvLyBJZiBwcmV2aW91cyBpdGVyYXRpb24gemVyb2VkIG91dCwgZG91YmxlIHVudGlsIHdlIGdldCAqc29tZXRoaW5nKi5cblx0XHRcdC8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93XG5cdFx0XHRzY2FsZSA9IHNjYWxlIHx8IFwiLjVcIjtcblxuXHRcdFx0Ly8gQWRqdXN0IGFuZCBhcHBseVxuXHRcdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTtcblx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgaW5pdGlhbEluVW5pdCArIHVuaXQgKTtcblxuXHRcdC8vIFVwZGF0ZSBzY2FsZSwgdG9sZXJhdGluZyB6ZXJvIG9yIE5hTiBmcm9tIHR3ZWVuLmN1cigpXG5cdFx0Ly8gQnJlYWsgdGhlIGxvb3AgaWYgc2NhbGUgaXMgdW5jaGFuZ2VkIG9yIHBlcmZlY3QsIG9yIGlmIHdlJ3ZlIGp1c3QgaGFkIGVub3VnaC5cblx0XHR9IHdoaWxlIChcblx0XHRcdHNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zXG5cdFx0KTtcblx0fVxuXG5cdGlmICggdmFsdWVQYXJ0cyApIHtcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWxJblVuaXQgfHwgK2luaXRpYWwgfHwgMDtcblxuXHRcdC8vIEFwcGx5IHJlbGF0aXZlIG9mZnNldCAoKz0vLT0pIGlmIHNwZWNpZmllZFxuXHRcdGFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID9cblx0XHRcdGluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6XG5cdFx0XHQrdmFsdWVQYXJ0c1sgMiBdO1xuXHRcdGlmICggdHdlZW4gKSB7XG5cdFx0XHR0d2Vlbi51bml0ID0gdW5pdDtcblx0XHRcdHR3ZWVuLnN0YXJ0ID0gaW5pdGlhbEluVW5pdDtcblx0XHRcdHR3ZWVuLmVuZCA9IGFkanVzdGVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gYWRqdXN0ZWQ7XG59XG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoIC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pICk7XG5cbnZhciBydGFnTmFtZSA9ICggLzwoW1xcdzotXSspLyApO1xuXG52YXIgcnNjcmlwdFR5cGUgPSAoIC9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kgKTtcblxuXG5cbi8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG52YXIgd3JhcE1hcCA9IHtcblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0b3B0aW9uOiBbIDEsIFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLCBcIjwvc2VsZWN0PlwiIF0sXG5cblx0Ly8gWEhUTUwgcGFyc2VycyBkbyBub3QgbWFnaWNhbGx5IGluc2VydCBlbGVtZW50cyBpbiB0aGVcblx0Ly8gc2FtZSB3YXkgdGhhdCB0YWcgc291cCBwYXJzZXJzIGRvLiBTbyB3ZSBjYW5ub3Qgc2hvcnRlblxuXHQvLyB0aGlzIGJ5IG9taXR0aW5nIDx0Ym9keT4gb3Igb3RoZXIgcmVxdWlyZWQgZWxlbWVudHMuXG5cdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0Y29sOiBbIDIsIFwiPHRhYmxlPjxjb2xncm91cD5cIiwgXCI8L2NvbGdyb3VwPjwvdGFibGU+XCIgXSxcblx0dHI6IFsgMiwgXCI8dGFibGU+PHRib2R5PlwiLCBcIjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0X2RlZmF1bHQ6IFsgMCwgXCJcIiwgXCJcIiBdXG59O1xuXG4vLyBTdXBwb3J0OiBJRTlcbndyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjtcblxud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcbndyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXG5cbmZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkge1xuXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gVXNlIHR5cGVvZiB0byBhdm9pZCB6ZXJvLWFyZ3VtZW50IG1ldGhvZCBpbnZvY2F0aW9uIG9uIGhvc3Qgb2JqZWN0cyAoIzE1MTUxKVxuXHR2YXIgcmV0ID0gdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgP1xuXHRcdFx0Y29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8IFwiKlwiICkgOlxuXHRcdFx0dHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnIHx8IFwiKlwiICkgOlxuXHRcdFx0W107XG5cblx0cmV0dXJuIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBqUXVlcnkubm9kZU5hbWUoIGNvbnRleHQsIHRhZyApID9cblx0XHRqUXVlcnkubWVyZ2UoIFsgY29udGV4dCBdLCByZXQgKSA6XG5cdFx0cmV0O1xufVxuXG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YVByaXYuc2V0KFxuXHRcdFx0ZWxlbXNbIGkgXSxcblx0XHRcdFwiZ2xvYmFsRXZhbFwiLFxuXHRcdFx0IXJlZkVsZW1lbnRzIHx8IGRhdGFQcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuXG52YXIgcmh0bWwgPSAvPHwmIz9cXHcrOy87XG5cbmZ1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24sIGlnbm9yZWQgKSB7XG5cdHZhciBlbGVtLCB0bXAsIHRhZywgd3JhcCwgY29udGFpbnMsIGosXG5cdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRub2RlcyA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGVsZW0gPSBlbGVtc1sgaSBdO1xuXG5cdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdC8vIEFkZCBub2RlcyBkaXJlY3RseVxuXHRcdFx0aWYgKCBqUXVlcnkudHlwZSggZWxlbSApID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xLCBQaGFudG9tSlM8MlxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0Ly8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG5cdFx0XHR9IGVsc2UgaWYgKCAhcmh0bWwudGVzdCggZWxlbSApICkge1xuXHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0Ly8gQ29udmVydCBodG1sIGludG8gRE9NIG5vZGVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICk7XG5cblx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHR0YWcgPSAoIHJ0YWdOYW1lLmV4ZWMoIGVsZW0gKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0d3JhcCA9IHdyYXBNYXBbIHRhZyBdIHx8IHdyYXBNYXAuX2RlZmF1bHQ7XG5cdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBqUXVlcnkuaHRtbFByZWZpbHRlciggZWxlbSApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdC8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudFxuXHRcdFx0XHRqID0gd3JhcFsgMCBdO1xuXHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAubGFzdENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjEsIFBoYW50b21KUzwyXG5cdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTtcblxuXHRcdFx0XHQvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lclxuXHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSB0aGUgY3JlYXRlZCBub2RlcyBhcmUgb3JwaGFuZWQgKCMxMjM5Milcblx0XHRcdFx0dG1wLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdGZyYWdtZW50LnRleHRDb250ZW50ID0gXCJcIjtcblxuXHRpID0gMDtcblx0d2hpbGUgKCAoIGVsZW0gPSBub2Rlc1sgaSsrIF0gKSApIHtcblxuXHRcdC8vIFNraXAgZWxlbWVudHMgYWxyZWFkeSBpbiB0aGUgY29udGV4dCBjb2xsZWN0aW9uICh0cmFjLTQwODcpXG5cdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApID4gLTEgKSB7XG5cdFx0XHRpZiAoIGlnbm9yZWQgKSB7XG5cdFx0XHRcdGlnbm9yZWQucHVzaCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29udGFpbnMgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0dG1wID0gZ2V0QWxsKCBmcmFnbWVudC5hcHBlbmRDaGlsZCggZWxlbSApLCBcInNjcmlwdFwiICk7XG5cblx0XHQvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG5cdFx0aWYgKCBjb250YWlucyApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIHRtcCApO1xuXHRcdH1cblxuXHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRpZiAoIHNjcmlwdHMgKSB7XG5cdFx0XHRqID0gMDtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdG1wWyBqKysgXSApICkge1xuXHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0c2NyaXB0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZnJhZ21lbnQ7XG59XG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdGRpdiA9IGZyYWdtZW50LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKSxcblx0XHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wLTQuMywgU2FmYXJpPD01LjFcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xLCBBbmRyb2lkPDQuMlxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0gKSgpO1xuXG5cbnZhclxuXHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFxuXHRydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KS87XG5cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTdXBwb3J0OiBJRTlcbi8vIFNlZSAjMTMzOTMgZm9yIG1vcmUgaW5mb1xuZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cdH0gY2F0Y2ggKCBlcnIgKSB7IH1cbn1cblxuZnVuY3Rpb24gb24oIGVsZW0sIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIG9uZSApIHtcblx0dmFyIG9yaWdGbiwgdHlwZTtcblxuXHQvLyBUeXBlcyBjYW4gYmUgYSBtYXAgb2YgdHlwZXMvaGFuZGxlcnNcblx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHQvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKVxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgZGF0YSApXG5cdFx0XHRkYXRhID0gZGF0YSB8fCBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0b24oIGVsZW0sIHR5cGUsIHNlbGVjdG9yLCBkYXRhLCB0eXBlc1sgdHlwZSBdLCBvbmUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblxuXHRpZiAoIGRhdGEgPT0gbnVsbCAmJiBmbiA9PSBudWxsICkge1xuXG5cdFx0Ly8gKCB0eXBlcywgZm4gKVxuXHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0ZGF0YSA9IHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHR9IGVsc2UgaWYgKCBmbiA9PSBudWxsICkge1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKVxuXHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyAoIHR5cGVzLCBkYXRhLCBmbiApXG5cdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0fSBlbHNlIGlmICggIWZuICkge1xuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cblx0aWYgKCBvbmUgPT09IDEgKSB7XG5cdFx0b3JpZ0ZuID0gZm47XG5cdFx0Zm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdC8vIENhbiB1c2UgYW4gZW1wdHkgc2V0LCBzaW5jZSBldmVudCBjb250YWlucyB0aGUgaW5mb1xuXHRcdFx0alF1ZXJ5KCkub2ZmKCBldmVudCApO1xuXHRcdFx0cmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fTtcblxuXHRcdC8vIFVzZSBzYW1lIGd1aWQgc28gY2FsbGVyIGNhbiByZW1vdmUgdXNpbmcgb3JpZ0ZuXG5cdFx0Zm4uZ3VpZCA9IG9yaWdGbi5ndWlkIHx8ICggb3JpZ0ZuLmd1aWQgPSBqUXVlcnkuZ3VpZCsrICk7XG5cdH1cblx0cmV0dXJuIGVsZW0uZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0alF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgdHlwZXMsIGZuLCBkYXRhLCBzZWxlY3RvciApO1xuXHR9ICk7XG59XG5cbi8qXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuXG4gKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICovXG5qUXVlcnkuZXZlbnQgPSB7XG5cblx0Z2xvYmFsOiB7fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7XG5cblx0XHR2YXIgaGFuZGxlT2JqSW4sIGV2ZW50SGFuZGxlLCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHQvLyBEb24ndCBhdHRhY2ggZXZlbnRzIHRvIG5vRGF0YSBvciB0ZXh0L2NvbW1lbnQgbm9kZXMgKGJ1dCBhbGxvdyBwbGFpbiBvYmplY3RzKVxuXHRcdGlmICggIWVsZW1EYXRhICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhbiBvYmplY3Qgb2YgY3VzdG9tIGRhdGEgaW4gbGlldSBvZiB0aGUgaGFuZGxlclxuXHRcdGlmICggaGFuZGxlci5oYW5kbGVyICkge1xuXHRcdFx0aGFuZGxlT2JqSW4gPSBoYW5kbGVyO1xuXHRcdFx0aGFuZGxlciA9IGhhbmRsZU9iakluLmhhbmRsZXI7XG5cdFx0XHRzZWxlY3RvciA9IGhhbmRsZU9iakluLnNlbGVjdG9yO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlclxuXHRcdGlmICggIWhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdGhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7XG5cdFx0fVxuXG5cdFx0Ly8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuXHRcdGlmICggISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgPSB7fTtcblx0XHR9XG5cdFx0aWYgKCAhKCBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSApICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHQvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZFxuXHRcdFx0XHQvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107XG5cdFx0XHR0eXBlID0gb3JpZ1R5cGUgPSB0bXBbIDEgXTtcblx0XHRcdG5hbWVzcGFjZXMgPSAoIHRtcFsgMiBdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVyc1xuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZVxuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoIHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0b3JpZ1R5cGU6IG9yaWdUeXBlLFxuXHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHRoYW5kbGVyOiBoYW5kbGVyLFxuXHRcdFx0XHRndWlkOiBoYW5kbGVyLmd1aWQsXG5cdFx0XHRcdHNlbGVjdG9yOiBzZWxlY3Rvcixcblx0XHRcdFx0bmVlZHNDb250ZXh0OiBzZWxlY3RvciAmJiBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSxcblx0XHRcdFx0bmFtZXNwYWNlOiBuYW1lc3BhY2VzLmpvaW4oIFwiLlwiIClcblx0XHRcdH0sIGhhbmRsZU9iakluICk7XG5cblx0XHRcdC8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0XG5cdFx0XHRpZiAoICEoIGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gKSApIHtcblx0XHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSA9IFtdO1xuXHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50ID0gMDtcblxuXHRcdFx0XHQvLyBPbmx5IHVzZSBhZGRFdmVudExpc3RlbmVyIGlmIHRoZSBzcGVjaWFsIGV2ZW50cyBoYW5kbGVyIHJldHVybnMgZmFsc2Vcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC5zZXR1cCB8fFxuXHRcdFx0XHRcdHNwZWNpYWwuc2V0dXAuY2FsbCggZWxlbSwgZGF0YSwgbmFtZXNwYWNlcywgZXZlbnRIYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBzcGVjaWFsLmFkZCApIHtcblx0XHRcdFx0c3BlY2lhbC5hZGQuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cblx0XHRcdFx0aWYgKCAhaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlci5ndWlkID0gaGFuZGxlci5ndWlkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCB0byB0aGUgZWxlbWVudCdzIGhhbmRsZXIgbGlzdCwgZGVsZWdhdGVzIGluIGZyb250XG5cdFx0XHRpZiAoIHNlbGVjdG9yICkge1xuXHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQrKywgMCwgaGFuZGxlT2JqICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gS2VlcCB0cmFjayBvZiB3aGljaCBldmVudHMgaGF2ZSBldmVyIGJlZW4gdXNlZCwgZm9yIGV2ZW50IG9wdGltaXphdGlvblxuXHRcdFx0alF1ZXJ5LmV2ZW50Lmdsb2JhbFsgdHlwZSBdID0gdHJ1ZTtcblx0XHR9XG5cblx0fSxcblxuXHQvLyBEZXRhY2ggYW4gZXZlbnQgb3Igc2V0IG9mIGV2ZW50cyBmcm9tIGFuIGVsZW1lbnRcblx0cmVtb3ZlOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIHNlbGVjdG9yLCBtYXBwZWRUeXBlcyApIHtcblxuXHRcdHZhciBqLCBvcmlnQ291bnQsIHRtcCxcblx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0c3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuXHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5oYXNEYXRhKCBlbGVtICkgJiYgZGF0YVByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHRpZiAoICFlbGVtRGF0YSB8fCAhKCBldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBPbmNlIGZvciBlYWNoIHR5cGUubmFtZXNwYWNlIGluIHR5cGVzOyB0eXBlIG1heSBiZSBvbWl0dGVkXG5cdFx0dHlwZXMgPSAoIHR5cGVzIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGFsbCBldmVudHMgKG9uIHRoaXMgbmFtZXNwYWNlLCBpZiBwcm92aWRlZCkgZm9yIHRoZSBlbGVtZW50XG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICsgdHlwZXNbIHQgXSwgaGFuZGxlciwgc2VsZWN0b3IsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuXHRcdFx0dG1wID0gdG1wWyAyIF0gJiZcblx0XHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fFxuXHRcdFx0XHRcdFx0c2VsZWN0b3IgPT09IFwiKipcIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGosIDEgKTtcblxuXHRcdFx0XHRcdGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNwZWNpYWwucmVtb3ZlICkge1xuXHRcdFx0XHRcdFx0c3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBnZW5lcmljIGV2ZW50IGhhbmRsZXIgaWYgd2UgcmVtb3ZlZCBzb21ldGhpbmcgYW5kIG5vIG1vcmUgaGFuZGxlcnMgZXhpc3Rcblx0XHRcdC8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKVxuXHRcdFx0aWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fFxuXHRcdFx0XHRcdHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBlbGVtRGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlbGV0ZSBldmVudHNbIHR5cGUgXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgZGF0YSBhbmQgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZFxuXHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkge1xuXHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImhhbmRsZSBldmVudHNcIiApO1xuXHRcdH1cblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0ZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YVByaXYuZ2V0KCB0aGlzLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307XG5cblx0XHQvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudFxuXHRcdGFyZ3NbIDAgXSA9IGV2ZW50O1xuXHRcdGV2ZW50LmRlbGVnYXRlVGFyZ2V0ID0gdGhpcztcblxuXHRcdC8vIENhbGwgdGhlIHByZURpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZSwgYW5kIGxldCBpdCBiYWlsIGlmIGRlc2lyZWRcblx0XHRpZiAoIHNwZWNpYWwucHJlRGlzcGF0Y2ggJiYgc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgaGFuZGxlcnNcblx0XHRoYW5kbGVyUXVldWUgPSBqUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCggdGhpcywgZXZlbnQsIGhhbmRsZXJzICk7XG5cblx0XHQvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1c1xuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKCBtYXRjaGVkID0gaGFuZGxlclF1ZXVlWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJlxuXHRcdFx0XHQhZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0XHQvLyBUcmlnZ2VyZWQgZXZlbnQgbXVzdCBlaXRoZXIgMSkgaGF2ZSBubyBuYW1lc3BhY2UsIG9yIDIpIGhhdmUgbmFtZXNwYWNlKHMpXG5cdFx0XHRcdC8vIGEgc3Vic2V0IG9yIGVxdWFsIHRvIHRob3NlIGluIHRoZSBib3VuZCBldmVudCAoYm90aCBjYW4gaGF2ZSBubyBuYW1lc3BhY2UpLlxuXHRcdFx0XHRpZiAoICFldmVudC5ybmFtZXNwYWNlIHx8IGV2ZW50LnJuYW1lc3BhY2UudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkge1xuXG5cdFx0XHRcdFx0ZXZlbnQuaGFuZGxlT2JqID0gaGFuZGxlT2JqO1xuXHRcdFx0XHRcdGV2ZW50LmRhdGEgPSBoYW5kbGVPYmouZGF0YTtcblxuXHRcdFx0XHRcdHJldCA9ICggKCBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgaGFuZGxlT2JqLm9yaWdUeXBlIF0gfHwge30gKS5oYW5kbGUgfHxcblx0XHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyICkuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKCBldmVudC5yZXN1bHQgPSByZXQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGwgdGhlIHBvc3REaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGVcblx0XHRpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkge1xuXHRcdFx0c3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdGhhbmRsZXJzOiBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXJzICkge1xuXHRcdHZhciBpLCBtYXRjaGVzLCBzZWwsIGhhbmRsZU9iaixcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0ZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsXG5cdFx0XHRjdXIgPSBldmVudC50YXJnZXQ7XG5cblx0XHQvLyBTdXBwb3J0IChhdCBsZWFzdCk6IENocm9tZSwgSUU5XG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG5cdFx0Ly9cblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PD00Mitcblx0XHQvLyBBdm9pZCBub24tbGVmdC1jbGljayBpbiBGRiBidXQgZG9uJ3QgYmxvY2sgSUUgcmFkaW8gZXZlbnRzICgjMzg2MSwgZ2gtMjM0Mylcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgJiYgY3VyLm5vZGVUeXBlICYmXG5cdFx0XHQoIGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIiB8fCBpc05hTiggZXZlbnQuYnV0dG9uICkgfHwgZXZlbnQuYnV0dG9uIDwgMSApICkge1xuXG5cdFx0XHRmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBjaGVjayBub24tZWxlbWVudHMgKCMxMzIwOClcblx0XHRcdFx0Ly8gRG9uJ3QgcHJvY2VzcyBjbGlja3Mgb24gZGlzYWJsZWQgZWxlbWVudHMgKCM2OTExLCAjODE2NSwgIzExMzgyLCAjMTE3NjQpXG5cdFx0XHRcdGlmICggY3VyLm5vZGVUeXBlID09PSAxICYmICggY3VyLmRpc2FibGVkICE9PSB0cnVlIHx8IGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIiApICkge1xuXHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG1hdGNoZXMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogbWF0Y2hlcyB9ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVyc1xuXHRcdGlmICggZGVsZWdhdGVDb3VudCA8IGhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaGFuZGxlclF1ZXVlO1xuXHR9LFxuXG5cdC8vIEluY2x1ZGVzIHNvbWUgZXZlbnQgcHJvcHMgc2hhcmVkIGJ5IEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50XG5cdHByb3BzOiAoIFwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZGV0YWlsIGV2ZW50UGhhc2UgXCIgK1xuXHRcdFwibWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiICkuc3BsaXQoIFwiIFwiICksXG5cblx0Zml4SG9va3M6IHt9LFxuXG5cdGtleUhvb2tzOiB7XG5cdFx0cHJvcHM6IFwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KCBcIiBcIiApLFxuXHRcdGZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHtcblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBrZXkgZXZlbnRzXG5cdFx0XHRpZiAoIGV2ZW50LndoaWNoID09IG51bGwgKSB7XG5cdFx0XHRcdGV2ZW50LndoaWNoID0gb3JpZ2luYWwuY2hhckNvZGUgIT0gbnVsbCA/IG9yaWdpbmFsLmNoYXJDb2RlIDogb3JpZ2luYWwua2V5Q29kZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV2ZW50O1xuXHRcdH1cblx0fSxcblxuXHRtb3VzZUhvb2tzOiB7XG5cdFx0cHJvcHM6ICggXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIFwiICtcblx0XHRcdFwic2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudFwiICkuc3BsaXQoIFwiIFwiICksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXHRcdFx0dmFyIGV2ZW50RG9jLCBkb2MsIGJvZHksXG5cdFx0XHRcdGJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbjtcblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuXHRcdFx0aWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcblx0XHRcdFx0ZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0XHRib2R5ID0gZXZlbnREb2MuYm9keTtcblxuXHRcdFx0XHRldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggK1xuXHRcdFx0XHRcdCggZG9jICYmIGRvYy5zY3JvbGxMZWZ0IHx8IGJvZHkgJiYgYm9keS5zY3JvbGxMZWZ0IHx8IDAgKSAtXG5cdFx0XHRcdFx0KCBkb2MgJiYgZG9jLmNsaWVudExlZnQgfHwgYm9keSAmJiBib2R5LmNsaWVudExlZnQgfHwgMCApO1xuXHRcdFx0XHRldmVudC5wYWdlWSA9IG9yaWdpbmFsLmNsaWVudFkgK1xuXHRcdFx0XHRcdCggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtXG5cdFx0XHRcdFx0KCBkb2MgJiYgZG9jLmNsaWVudFRvcCAgfHwgYm9keSAmJiBib2R5LmNsaWVudFRvcCAgfHwgMCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGNsaWNrOiAxID09PSBsZWZ0OyAyID09PSBtaWRkbGU7IDMgPT09IHJpZ2h0XG5cdFx0XHQvLyBOb3RlOiBidXR0b24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIGRvbid0IHVzZSBpdFxuXHRcdFx0aWYgKCAhZXZlbnQud2hpY2ggJiYgYnV0dG9uICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGV2ZW50LndoaWNoID0gKCBidXR0b24gJiAxID8gMSA6ICggYnV0dG9uICYgMiA/IDMgOiAoIGJ1dHRvbiAmIDQgPyAyIDogMCApICkgKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV2ZW50O1xuXHRcdH1cblx0fSxcblxuXHRmaXg6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRpZiAoIGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdICkge1xuXHRcdFx0cmV0dXJuIGV2ZW50O1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSBhIHdyaXRhYmxlIGNvcHkgb2YgdGhlIGV2ZW50IG9iamVjdCBhbmQgbm9ybWFsaXplIHNvbWUgcHJvcGVydGllc1xuXHRcdHZhciBpLCBwcm9wLCBjb3B5LFxuXHRcdFx0dHlwZSA9IGV2ZW50LnR5cGUsXG5cdFx0XHRvcmlnaW5hbEV2ZW50ID0gZXZlbnQsXG5cdFx0XHRmaXhIb29rID0gdGhpcy5maXhIb29rc1sgdHlwZSBdO1xuXG5cdFx0aWYgKCAhZml4SG9vayApIHtcblx0XHRcdHRoaXMuZml4SG9va3NbIHR5cGUgXSA9IGZpeEhvb2sgPVxuXHRcdFx0XHRybW91c2VFdmVudC50ZXN0KCB0eXBlICkgPyB0aGlzLm1vdXNlSG9va3MgOlxuXHRcdFx0XHRya2V5RXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5rZXlIb29rcyA6XG5cdFx0XHRcdHt9O1xuXHRcdH1cblx0XHRjb3B5ID0gZml4SG9vay5wcm9wcyA/IHRoaXMucHJvcHMuY29uY2F0KCBmaXhIb29rLnByb3BzICkgOiB0aGlzLnByb3BzO1xuXG5cdFx0ZXZlbnQgPSBuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7XG5cblx0XHRpID0gY29weS5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRwcm9wID0gY29weVsgaSBdO1xuXHRcdFx0ZXZlbnRbIHByb3AgXSA9IG9yaWdpbmFsRXZlbnRbIHByb3AgXTtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBDb3Jkb3ZhIDIuNSAoV2ViS2l0KSAoIzEzMjU1KVxuXHRcdC8vIEFsbCBldmVudHMgc2hvdWxkIGhhdmUgYSB0YXJnZXQ7IENvcmRvdmEgZGV2aWNlcmVhZHkgZG9lc24ndFxuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGRvY3VtZW50O1xuXHRcdH1cblxuXHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA2LjArLCBDaHJvbWU8Mjhcblx0XHQvLyBUYXJnZXQgc2hvdWxkIG5vdCBiZSBhIHRleHQgbm9kZSAoIzUwNCwgIzEzMTQzKVxuXHRcdGlmICggZXZlbnQudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoIGV2ZW50LCBvcmlnaW5hbEV2ZW50ICkgOiBldmVudDtcblx0fSxcblxuXHRzcGVjaWFsOiB7XG5cdFx0bG9hZDoge1xuXG5cdFx0XHQvLyBQcmV2ZW50IHRyaWdnZXJlZCBpbWFnZS5sb2FkIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHRvIHdpbmRvdy5sb2FkXG5cdFx0XHRub0J1YmJsZTogdHJ1ZVxuXHRcdH0sXG5cdFx0Zm9jdXM6IHtcblxuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXG5cdFx0XHQvLyBGb3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcy50eXBlID09PSBcImNoZWNrYm94XCIgJiYgdGhpcy5jbGljayAmJiBqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHRoaXMuY2xpY2soKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIEZvciBjcm9zcy1icm93c2VyIGNvbnNpc3RlbmN5LCBkb24ndCBmaXJlIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rc1xuXHRcdFx0X2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZXZlbnQudGFyZ2V0LCBcImFcIiApO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRiZWZvcmV1bmxvYWQ6IHtcblx0XHRcdHBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggMjArXG5cdFx0XHRcdC8vIEZpcmVmb3ggZG9lc24ndCBhbGVydCBpZiB0aGUgcmV0dXJuVmFsdWUgZmllbGQgaXMgbm90IHNldC5cblx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgIT09IHVuZGVmaW5lZCAmJiBldmVudC5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWUgPSBldmVudC5yZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBoYW5kbGUgKSB7XG5cblx0Ly8gVGhpcyBcImlmXCIgaXMgbmVlZGVkIGZvciBwbGFpbiBvYmplY3RzXG5cdGlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuXHRcdGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgaGFuZGxlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXG5cdC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZFxuXHRpZiAoICEoIHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQgKSApIHtcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5FdmVudCggc3JjLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gRXZlbnQgb2JqZWN0XG5cdGlmICggc3JjICYmIHNyYy50eXBlICkge1xuXHRcdHRoaXMub3JpZ2luYWxFdmVudCA9IHNyYztcblx0XHR0aGlzLnR5cGUgPSBzcmMudHlwZTtcblxuXHRcdC8vIEV2ZW50cyBidWJibGluZyB1cCB0aGUgZG9jdW1lbnQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcHJldmVudGVkXG5cdFx0Ly8gYnkgYSBoYW5kbGVyIGxvd2VyIGRvd24gdGhlIHRyZWU7IHJlZmxlY3QgdGhlIGNvcnJlY3QgdmFsdWUuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBzcmMuZGVmYXVsdFByZXZlbnRlZCB8fFxuXHRcdFx0XHRzcmMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdW5kZWZpbmVkICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBqUXVlcnkuRXZlbnQsXG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRpc1NpbXVsYXRlZDogZmFsc2UsXG5cblx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBzbyB0aGF0IGV2ZW50IGRlbGVnYXRpb24gd29ya3MgaW4galF1ZXJ5LlxuLy8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXRcbi8vXG4vLyBTdXBwb3J0OiBTYWZhcmkgNyBvbmx5XG4vLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZTpcbi8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NzAyNThcbi8vIGZvciB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGJ1ZyAoaXQgZXhpc3RlZCBpbiBvbGRlciBDaHJvbWUgdmVyc2lvbnMgYXMgd2VsbCkuXG5qUXVlcnkuZWFjaCgge1xuXHRtb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLFxuXHRtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsXG5cdHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLFxuXHRwb2ludGVybGVhdmU6IFwicG9pbnRlcm91dFwiXG59LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0ge1xuXHRcdGRlbGVnYXRlVHlwZTogZml4LFxuXHRcdGJpbmRUeXBlOiBmaXgsXG5cblx0XHRoYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciByZXQsXG5cdFx0XHRcdHRhcmdldCA9IHRoaXMsXG5cdFx0XHRcdHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0LFxuXHRcdFx0XHRoYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7XG5cblx0XHRcdC8vIEZvciBtb3VzZWVudGVyL2xlYXZlIGNhbGwgdGhlIGhhbmRsZXIgaWYgcmVsYXRlZCBpcyBvdXRzaWRlIHRoZSB0YXJnZXQuXG5cdFx0XHQvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuXHRcdFx0aWYgKCAhcmVsYXRlZCB8fCAoIHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSApICkge1xuXHRcdFx0XHRldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlO1xuXHRcdFx0XHRyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBmaXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblx0fTtcbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRvbjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdG9uZTogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG5cdH0sXG5cdG9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7XG5cdFx0dmFyIGhhbmRsZU9iaiwgdHlwZTtcblx0XHRpZiAoIHR5cGVzICYmIHR5cGVzLnByZXZlbnREZWZhdWx0ICYmIHR5cGVzLmhhbmRsZU9iaiApIHtcblxuXHRcdFx0Ly8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudFxuXHRcdFx0aGFuZGxlT2JqID0gdHlwZXMuaGFuZGxlT2JqO1xuXHRcdFx0alF1ZXJ5KCB0eXBlcy5kZWxlZ2F0ZVRhcmdldCApLm9mZihcblx0XHRcdFx0aGFuZGxlT2JqLm5hbWVzcGFjZSA/XG5cdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDpcblx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUsXG5cdFx0XHRcdGhhbmRsZU9iai5zZWxlY3Rvcixcblx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXJcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApXG5cdFx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0XHR0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHNlbGVjdG9yID09PSBmYWxzZSB8fCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgdHlwZXMsIGZuLCBzZWxlY3RvciApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbnZhclxuXHRyeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Oi1dKylbXj5dKilcXC8+L2dpLFxuXG5cdC8vIFN1cHBvcnQ6IElFIDEwLTExLCBFZGdlIDEwMjQwK1xuXHQvLyBJbiBJRS9FZGdlIHVzaW5nIHJlZ2V4IGdyb3VwcyBoZXJlIGNhdXNlcyBzZXZlcmUgc2xvd2Rvd25zLlxuXHQvLyBTZWUgaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy8xNzM2NTEyL1xuXHRybm9Jbm5lcmh0bWwgPSAvPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxcblxuXHQvLyBjaGVja2VkPVwiY2hlY2tlZFwiIG9yIGNoZWNrZWRcblx0cmNoZWNrZWQgPSAvY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLFxuXHRyc2NyaXB0VHlwZU1hc2tlZCA9IC9edHJ1ZVxcLyguKikvLFxuXHRyY2xlYW5TY3JpcHQgPSAvXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2c7XG5cbi8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keVxuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cblx0XHRlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInRib2R5XCIgKVsgMCBdIHx8XG5cdFx0XHRlbGVtLmFwcGVuZENoaWxkKCBlbGVtLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJ0Ym9keVwiICkgKSA6XG5cdFx0ZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKCBlbGVtLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSAhPT0gbnVsbCApICsgXCIvXCIgKyBlbGVtLnR5cGU7XG5cdHJldHVybiBlbGVtO1xufVxuZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcblx0dmFyIG1hdGNoID0gcnNjcmlwdFR5cGVNYXNrZWQuZXhlYyggZWxlbS50eXBlICk7XG5cblx0aWYgKCBtYXRjaCApIHtcblx0XHRlbGVtLnR5cGUgPSBtYXRjaFsgMSBdO1xuXHR9IGVsc2Uge1xuXHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBcInR5cGVcIiApO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBpLCBsLCB0eXBlLCBwZGF0YU9sZCwgcGRhdGFDdXIsIHVkYXRhT2xkLCB1ZGF0YUN1ciwgZXZlbnRzO1xuXG5cdGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLlxuXHRpZiAoIGRhdGFQcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YVByaXYuYWNjZXNzKCBzcmMgKTtcblx0XHRwZGF0YUN1ciA9IGRhdGFQcml2LnNldCggZGVzdCwgcGRhdGFPbGQgKTtcblx0XHRldmVudHMgPSBwZGF0YU9sZC5ldmVudHM7XG5cblx0XHRpZiAoIGV2ZW50cyApIHtcblx0XHRcdGRlbGV0ZSBwZGF0YUN1ci5oYW5kbGU7XG5cdFx0XHRwZGF0YUN1ci5ldmVudHMgPSB7fTtcblxuXHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIDIuIENvcHkgdXNlciBkYXRhXG5cdGlmICggZGF0YVVzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhVXNlci5hY2Nlc3MoIHNyYyApO1xuXHRcdHVkYXRhQ3VyID0galF1ZXJ5LmV4dGVuZCgge30sIHVkYXRhT2xkICk7XG5cblx0XHRkYXRhVXNlci5zZXQoIGRlc3QsIHVkYXRhQ3VyICk7XG5cdH1cbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxuZnVuY3Rpb24gZG9tTWFuaXAoIGNvbGxlY3Rpb24sIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICkge1xuXG5cdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHR2YXIgZnJhZ21lbnQsIGZpcnN0LCBzY3JpcHRzLCBoYXNTY3JpcHRzLCBub2RlLCBkb2MsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuXHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0dmFsdWUgPSBhcmdzWyAwIF0sXG5cdFx0aXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRpZiAoIGlzRnVuY3Rpb24gfHxcblx0XHRcdCggbCA+IDEgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdHJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHtcblx0XHRcdHZhciBzZWxmID0gY29sbGVjdGlvbi5lcSggaW5kZXggKTtcblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHR9XG5cdFx0XHRkb21NYW5pcCggc2VsZiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKTtcblx0XHR9ICk7XG5cdH1cblxuXHRpZiAoIGwgKSB7XG5cdFx0ZnJhZ21lbnQgPSBidWlsZEZyYWdtZW50KCBhcmdzLCBjb2xsZWN0aW9uWyAwIF0ub3duZXJEb2N1bWVudCwgZmFsc2UsIGNvbGxlY3Rpb24sIGlnbm9yZWQgKTtcblx0XHRmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cblx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0ZnJhZ21lbnQgPSBmaXJzdDtcblx0XHR9XG5cblx0XHQvLyBSZXF1aXJlIGVpdGhlciBuZXcgY29udGVudCBvciBhbiBpbnRlcmVzdCBpbiBpZ25vcmVkIGVsZW1lbnRzIHRvIGludm9rZSB0aGUgY2FsbGJhY2tcblx0XHRpZiAoIGZpcnN0IHx8IGlnbm9yZWQgKSB7XG5cdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRoYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7XG5cblx0XHRcdC8vIFVzZSB0aGUgb3JpZ2luYWwgZnJhZ21lbnQgZm9yIHRoZSBsYXN0IGl0ZW1cblx0XHRcdC8vIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0Ly8gYmVpbmcgZW1wdGllZCBpbmNvcnJlY3RseSBpbiBjZXJ0YWluIHNpdHVhdGlvbnMgKCM4MDcwKS5cblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdGlmICggaSAhPT0gaU5vQ2xvbmUgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGpRdWVyeS5jbG9uZSggbm9kZSwgdHJ1ZSwgdHJ1ZSApO1xuXG5cdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjEsIFBoYW50b21KUzwyXG5cdFx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHNjcmlwdHMsIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y2FsbGJhY2suY2FsbCggY29sbGVjdGlvblsgaSBdLCBub2RlLCBpICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0ZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDtcblxuXHRcdFx0XHQvLyBSZWVuYWJsZSBzY3JpcHRzXG5cdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHQvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgaGFzU2NyaXB0czsgaSsrICkge1xuXHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBub2RlLnR5cGUgfHwgXCJcIiApICYmXG5cdFx0XHRcdFx0XHQhZGF0YVByaXYuYWNjZXNzKCBub2RlLCBcImdsb2JhbEV2YWxcIiApICYmXG5cdFx0XHRcdFx0XHRqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5Ll9ldmFsVXJsICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5fZXZhbFVybCggbm9kZS5zcmMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSggcmNsZWFuU2NyaXB0LCBcIlwiICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY29sbGVjdGlvbjtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7XG5cdHZhciBub2RlLFxuXHRcdG5vZGVzID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSxcblx0XHRpID0gMDtcblxuXHRmb3IgKCA7ICggbm9kZSA9IG5vZGVzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0aWYgKCAha2VlcERhdGEgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggbm9kZSApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBub2RlLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRpZiAoIGtlZXBEYXRhICYmIGpRdWVyeS5jb250YWlucyggbm9kZS5vd25lckRvY3VtZW50LCBub2RlICkgKSB7XG5cdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHR9XG5cdFx0XHRub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIG5vZGUgKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRodG1sUHJlZmlsdGVyOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRyZXR1cm4gaHRtbC5yZXBsYWNlKCByeGh0bWxUYWcsIFwiPCQxPjwvJDI+XCIgKTtcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGVsZW0sIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdHZhciBpLCBsLCBzcmNFbGVtZW50cywgZGVzdEVsZW1lbnRzLFxuXHRcdFx0Y2xvbmUgPSBlbGVtLmNsb25lTm9kZSggdHJ1ZSApLFxuXHRcdFx0aW5QYWdlID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdC8vIEZpeCBJRSBjbG9uaW5nIGlzc3Vlc1xuXHRcdGlmICggIXN1cHBvcnQubm9DbG9uZUNoZWNrZWQgJiYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGVsZW0ubm9kZVR5cGUgPT09IDExICkgJiZcblx0XHRcdFx0IWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXG5cdFx0XHQvLyBXZSBlc2NoZXcgU2l6emxlIGhlcmUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM6IGh0dHA6Ly9qc3BlcmYuY29tL2dldGFsbC12cy1zaXp6bGUvMlxuXHRcdFx0ZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSApO1xuXHRcdFx0c3JjRWxlbWVudHMgPSBnZXRBbGwoIGVsZW0gKTtcblxuXHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGZpeElucHV0KCBzcmNFbGVtZW50c1sgaSBdLCBkZXN0RWxlbWVudHNbIGkgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENvcHkgdGhlIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCB0byB0aGUgY2xvbmVcblx0XHRpZiAoIGRhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRpZiAoIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0XHRzcmNFbGVtZW50cyA9IHNyY0VsZW1lbnRzIHx8IGdldEFsbCggZWxlbSApO1xuXHRcdFx0XHRkZXN0RWxlbWVudHMgPSBkZXN0RWxlbWVudHMgfHwgZ2V0QWxsKCBjbG9uZSApO1xuXG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGNsb25lQ29weUV2ZW50KCBzcmNFbGVtZW50c1sgaSBdLCBkZXN0RWxlbWVudHNbIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjbG9uZUNvcHlFdmVudCggZWxlbSwgY2xvbmUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG5cdFx0ZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSwgXCJzY3JpcHRcIiApO1xuXHRcdGlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCBkZXN0RWxlbWVudHMsICFpblBhZ2UgJiYgZ2V0QWxsKCBlbGVtLCBcInNjcmlwdFwiICkgKTtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gdGhlIGNsb25lZCBzZXRcblx0XHRyZXR1cm4gY2xvbmU7XG5cdH0sXG5cblx0Y2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWwsXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9PSB1bmRlZmluZWQ7IGkrKyApIHtcblx0XHRcdGlmICggYWNjZXB0RGF0YSggZWxlbSApICkge1xuXHRcdFx0XHRpZiAoICggZGF0YSA9IGVsZW1bIGRhdGFQcml2LmV4cGFuZG8gXSApICkge1xuXHRcdFx0XHRcdGlmICggZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PSAzNS00NStcblx0XHRcdFx0XHQvLyBBc3NpZ24gdW5kZWZpbmVkIGluc3RlYWQgb2YgdXNpbmcgZGVsZXRlLCBzZWUgRGF0YSNyZW1vdmVcblx0XHRcdFx0XHRlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBlbGVtWyBkYXRhVXNlci5leHBhbmRvIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0gMzUtNDUrXG5cdFx0XHRcdFx0Ly8gQXNzaWduIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHVzaW5nIGRlbGV0ZSwgc2VlIERhdGEjcmVtb3ZlXG5cdFx0XHRcdFx0ZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHQvLyBLZWVwIGRvbU1hbmlwIGV4cG9zZWQgdW50aWwgMy4wIChnaC0yMjI1KVxuXHRkb21NYW5pcDogZG9tTWFuaXAsXG5cblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciApO1xuXHR9LFxuXG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fSxcblxuXHRhcHBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRwcmVwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGFmdGVyOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKCBlbGVtID0gdGhpc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5jbG9uZSggdGhpcywgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKTtcblx0XHR9ICk7XG5cdH0sXG5cblx0aHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uaW5uZXJIVE1MO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZWUgaWYgd2UgY2FuIHRha2UgYSBzaG9ydGN1dCBhbmQganVzdCB1c2UgaW5uZXJIVE1MXG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiZcblx0XHRcdFx0IXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKSBdICkge1xuXG5cdFx0XHRcdHZhbHVlID0galF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIHZhbHVlICk7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdIHx8IHt9O1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG5cdFx0XHRcdFx0XHRcdGVsZW0uaW5uZXJIVE1MID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZWxlbSA9IDA7XG5cblx0XHRcdFx0Ly8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kXG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpZ25vcmVkID0gW107XG5cblx0XHQvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBub24taWdub3JlZCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnRcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuXG5cdFx0XHRpZiAoIGpRdWVyeS5pbkFycmF5KCB0aGlzLCBpZ25vcmVkICkgPCAwICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIHRoaXMgKSApO1xuXHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblx0XHRcdFx0XHRwYXJlbnQucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEZvcmNlIGNhbGxiYWNrIGludm9jYXRpb25cblx0XHR9LCBpZ25vcmVkICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXRcblx0XHRcdC8vIC5nZXQoKSBiZWNhdXNlIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Ncblx0XHRcdHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuXHR9O1xufSApO1xuXG5cbnZhciBpZnJhbWUsXG5cdGVsZW1kaXNwbGF5ID0ge1xuXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveFxuXHRcdC8vIFdlIGhhdmUgdG8gcHJlLWRlZmluZSB0aGVzZSB2YWx1ZXMgZm9yIEZGICgjMTAyMjcpXG5cdFx0SFRNTDogXCJibG9ja1wiLFxuXHRcdEJPRFk6IFwiYmxvY2tcIlxuXHR9O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBhY3R1YWwgZGlzcGxheSBvZiBhIGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5vZGVOYW1lIG9mIHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gZG9jIERvY3VtZW50IG9iamVjdFxuICovXG5cbi8vIENhbGxlZCBvbmx5IGZyb20gd2l0aGluIGRlZmF1bHREaXNwbGF5XG5mdW5jdGlvbiBhY3R1YWxEaXNwbGF5KCBuYW1lLCBkb2MgKSB7XG5cdHZhciBlbGVtID0galF1ZXJ5KCBkb2MuY3JlYXRlRWxlbWVudCggbmFtZSApICkuYXBwZW5kVG8oIGRvYy5ib2R5ICksXG5cblx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbVsgMCBdLCBcImRpc3BsYXlcIiApO1xuXG5cdC8vIFdlIGRvbid0IGhhdmUgYW55IGRhdGEgc3RvcmVkIG9uIHRoZSBlbGVtZW50LFxuXHQvLyBzbyB1c2UgXCJkZXRhY2hcIiBtZXRob2QgYXMgZmFzdCB3YXkgdG8gZ2V0IHJpZCBvZiB0aGUgZWxlbWVudFxuXHRlbGVtLmRldGFjaCgpO1xuXG5cdHJldHVybiBkaXNwbGF5O1xufVxuXG4vKipcbiAqIFRyeSB0byBkZXRlcm1pbmUgdGhlIGRlZmF1bHQgZGlzcGxheSB2YWx1ZSBvZiBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWVcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdERpc3BsYXkoIG5vZGVOYW1lICkge1xuXHR2YXIgZG9jID0gZG9jdW1lbnQsXG5cdFx0ZGlzcGxheSA9IGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdO1xuXG5cdGlmICggIWRpc3BsYXkgKSB7XG5cdFx0ZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTtcblxuXHRcdC8vIElmIHRoZSBzaW1wbGUgd2F5IGZhaWxzLCByZWFkIGZyb20gaW5zaWRlIGFuIGlmcmFtZVxuXHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgfHwgIWRpc3BsYXkgKSB7XG5cblx0XHRcdC8vIFVzZSB0aGUgYWxyZWFkeS1jcmVhdGVkIGlmcmFtZSBpZiBwb3NzaWJsZVxuXHRcdFx0aWZyYW1lID0gKCBpZnJhbWUgfHwgalF1ZXJ5KCBcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIiApIClcblx0XHRcdFx0LmFwcGVuZFRvKCBkb2MuZG9jdW1lbnRFbGVtZW50ICk7XG5cblx0XHRcdC8vIEFsd2F5cyB3cml0ZSBhIG5ldyBIVE1MIHNrZWxldG9uIHNvIFdlYmtpdCBhbmQgRmlyZWZveCBkb24ndCBjaG9rZSBvbiByZXVzZVxuXHRcdFx0ZG9jID0gaWZyYW1lWyAwIF0uY29udGVudERvY3VtZW50O1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRVxuXHRcdFx0ZG9jLndyaXRlKCk7XG5cdFx0XHRkb2MuY2xvc2UoKTtcblxuXHRcdFx0ZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTtcblx0XHRcdGlmcmFtZS5kZXRhY2goKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSB0aGUgY29ycmVjdCBkZWZhdWx0IGRpc3BsYXlcblx0XHRlbGVtZGlzcGxheVsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7XG5cdH1cblxuXHRyZXR1cm4gZGlzcGxheTtcbn1cbnZhciBybWFyZ2luID0gKCAvXm1hcmdpbi8gKTtcblxudmFyIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiApO1xuXG52YXIgZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRTw9MTErLCBGaXJlZm94PD0zMCsgKCMxNTA5OCwgIzE0MTUwKVxuXHRcdC8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwc1xuXHRcdC8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCBcImRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGVcIlxuXHRcdHZhciB2aWV3ID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG5cdFx0aWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7XG5cdFx0XHR2aWV3ID0gd2luZG93O1xuXHRcdH1cblxuXHRcdHJldHVybiB2aWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcblx0fTtcblxudmFyIHN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdHZhciByZXQsIG5hbWUsXG5cdFx0b2xkID0ge307XG5cblx0Ly8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07XG5cdH1cblxuXHRyZXQgPSBjYWxsYmFjay5hcHBseSggZWxlbSwgYXJncyB8fCBbXSApO1xuXG5cdC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufTtcblxuXG52YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIHBpeGVsUG9zaXRpb25WYWwsIGJveFNpemluZ1JlbGlhYmxlVmFsLCBwaXhlbE1hcmdpblJpZ2h0VmFsLCByZWxpYWJsZU1hcmdpbkxlZnRWYWwsXG5cdFx0Y29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxuXHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcblxuXHQvLyBGaW5pc2ggZWFybHkgaW4gbGltaXRlZCAobm9uLWJyb3dzZXIpIGVudmlyb25tZW50c1xuXHRpZiAoICFkaXYuc3R5bGUgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHQvLyBTdHlsZSBvZiBjbG9uZWQgZWxlbWVudCBhZmZlY3RzIHNvdXJjZSBlbGVtZW50IGNsb25lZCAoIzg5MDgpXG5cdGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiY29udGVudC1ib3hcIjtcblx0ZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJcIjtcblx0c3VwcG9ydC5jbGVhckNsb25lU3R5bGUgPSBkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPT09IFwiY29udGVudC1ib3hcIjtcblxuXHRjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwiYm9yZGVyOjA7d2lkdGg6OHB4O2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDtcIiArXG5cdFx0XCJwYWRkaW5nOjA7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGVcIjtcblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKCBkaXYgKTtcblxuXHQvLyBFeGVjdXRpbmcgYm90aCBwaXhlbFBvc2l0aW9uICYgYm94U2l6aW5nUmVsaWFibGUgdGVzdHMgcmVxdWlyZSBvbmx5IG9uZSBsYXlvdXRcblx0Ly8gc28gdGhleSdyZSBleGVjdXRlZCBhdCB0aGUgc2FtZSB0aW1lIHRvIHNhdmUgdGhlIHNlY29uZCBjb21wdXRhdGlvbi5cblx0ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKSB7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PDI5LCBBbmRyb2lkIDIuM1xuXHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcInBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7XCIgK1xuXHRcdFx0XCJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O1wiICtcblx0XHRcdFwidG9wOjElO3dpZHRoOjUwJVwiO1xuXHRcdGRpdi5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICk7XG5cblx0XHR2YXIgZGl2U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2ICk7XG5cdFx0cGl4ZWxQb3NpdGlvblZhbCA9IGRpdlN0eWxlLnRvcCAhPT0gXCIxJVwiO1xuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IGRpdlN0eWxlLm1hcmdpbkxlZnQgPT09IFwiMnB4XCI7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHlcblx0XHQvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3Rcblx0XHRkaXYuc3R5bGUubWFyZ2luUmlnaHQgPSBcIjUwJVwiO1xuXHRcdHBpeGVsTWFyZ2luUmlnaHRWYWwgPSBkaXZTdHlsZS5tYXJnaW5SaWdodCA9PT0gXCI0cHhcIjtcblxuXHRcdGRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG5cdH1cblxuXHRqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7XG5cdFx0cGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIFRoaXMgdGVzdCBpcyBleGVjdXRlZCBvbmx5IG9uY2UgYnV0IHdlIHN0aWxsIGRvIG1lbW9pemluZ1xuXHRcdFx0Ly8gc2luY2Ugd2UgY2FuIHVzZSB0aGUgYm94U2l6aW5nUmVsaWFibGUgcHJlLWNvbXB1dGluZy5cblx0XHRcdC8vIE5vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIHRlc3Qgd2FzIGFscmVhZHkgcGVyZm9ybWVkLCB0aG91Z2guXG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHBpeGVsUG9zaXRpb25WYWw7XG5cdFx0fSxcblx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGJveFNpemluZ1JlbGlhYmxlVmFsID09IG51bGwgKSB7XG5cdFx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7XG5cdFx0fSxcblx0XHRwaXhlbE1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAtNC4zXG5cdFx0XHQvLyBXZSdyZSBjaGVja2luZyBmb3IgYm94U2l6aW5nUmVsaWFibGVWYWwgaGVyZSBpbnN0ZWFkIG9mIHBpeGVsTWFyZ2luUmlnaHRWYWxcblx0XHRcdC8vIHNpbmNlIHRoYXQgY29tcHJlc3NlcyBiZXR0ZXIgYW5kIHRoZXkncmUgY29tcHV0ZWQgdG9nZXRoZXIgYW55d2F5LlxuXHRcdFx0aWYgKCBib3hTaXppbmdSZWxpYWJsZVZhbCA9PSBudWxsICkge1xuXHRcdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHBpeGVsTWFyZ2luUmlnaHRWYWw7XG5cdFx0fSxcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTggb25seSwgQW5kcm9pZCA0LjAgLSA0LjMgb25seSwgRmlyZWZveCA8PTMgLSAzN1xuXHRcdFx0aWYgKCBib3hTaXppbmdSZWxpYWJsZVZhbCA9PSBudWxsICkge1xuXHRcdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlbGlhYmxlTWFyZ2luTGVmdFZhbDtcblx0XHR9LFxuXHRcdHJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuXHRcdFx0Ly8gQ2hlY2sgaWYgZGl2IHdpdGggZXhwbGljaXQgd2lkdGggYW5kIG5vIG1hcmdpbi1yaWdodCBpbmNvcnJlY3RseVxuXHRcdFx0Ly8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG5cdFx0XHQvLyBXZWJLaXQgQnVnIDEzMzQzIC0gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHdyb25nIHZhbHVlIGZvciBtYXJnaW4tcmlnaHRcblx0XHRcdC8vIFRoaXMgc3VwcG9ydCBmdW5jdGlvbiBpcyBvbmx5IGV4ZWN1dGVkIG9uY2Ugc28gbm8gbWVtb2l6aW5nIGlzIG5lZWRlZC5cblx0XHRcdHZhciByZXQsXG5cdFx0XHRcdG1hcmdpbkRpdiA9IGRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICk7XG5cblx0XHRcdC8vIFJlc2V0IENTUzogYm94LXNpemluZzsgZGlzcGxheTsgbWFyZ2luOyBib3JkZXI7IHBhZGRpbmdcblx0XHRcdG1hcmdpbkRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XHRcIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcblx0XHRcdFx0XCJkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiO1xuXHRcdFx0bWFyZ2luRGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gbWFyZ2luRGl2LnN0eWxlLndpZHRoID0gXCIwXCI7XG5cdFx0XHRkaXYuc3R5bGUud2lkdGggPSBcIjFweFwiO1xuXHRcdFx0ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdFx0cmV0ID0gIXBhcnNlRmxvYXQoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBtYXJnaW5EaXYgKS5tYXJnaW5SaWdodCApO1xuXG5cdFx0XHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHRcdFx0ZGl2LnJlbW92ZUNoaWxkKCBtYXJnaW5EaXYgKTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cdH0gKTtcbn0gKSgpO1xuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cdHJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF0gOiB1bmRlZmluZWQ7XG5cblx0Ly8gU3VwcG9ydDogT3BlcmEgMTIuMXggb25seVxuXHQvLyBGYWxsIGJhY2sgdG8gc3R5bGUgZXZlbiB3aXRob3V0IGNvbXB1dGVkXG5cdC8vIGNvbXB1dGVkIGlzIHVuZGVmaW5lZCBmb3IgZWxlbXMgb24gZG9jdW1lbnQgZnJhZ21lbnRzXG5cdGlmICggKCByZXQgPT09IFwiXCIgfHwgcmV0ID09PSB1bmRlZmluZWQgKSAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcblx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOVxuXHQvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG9ubHkgbmVlZGVkIGZvciAuY3NzKCdmaWx0ZXInKSAoIzEyNTM3KVxuXHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIEFuZHJvaWQgQnJvd3NlciByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIHNvbWUgdmFsdWVzLFxuXHRcdC8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMuXG5cdFx0Ly8gVGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOlxuXHRcdC8vIGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoICFzdXBwb3J0LnBpeGVsTWFyZ2luUmlnaHQoKSAmJiBybnVtbm9ucHgudGVzdCggcmV0ICkgJiYgcm1hcmdpbi50ZXN0KCBuYW1lICkgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcblx0XHRcdHdpZHRoID0gc3R5bGUud2lkdGg7XG5cdFx0XHRtaW5XaWR0aCA9IHN0eWxlLm1pbldpZHRoO1xuXHRcdFx0bWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDtcblxuXHRcdFx0Ly8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dFxuXHRcdFx0c3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0O1xuXHRcdFx0cmV0ID0gY29tcHV0ZWQud2lkdGg7XG5cblx0XHRcdC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblx0XHRcdHN0eWxlLndpZHRoID0gd2lkdGg7XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IG1pbldpZHRoO1xuXHRcdFx0c3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmV0ICE9PSB1bmRlZmluZWQgP1xuXG5cdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdC8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuXG5cdFx0cmV0ICsgXCJcIiA6XG5cdFx0cmV0O1xufVxuXG5cbmZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHtcblxuXHQvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLlxuXHRyZXR1cm4ge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGNvbmRpdGlvbkZuKCkgKSB7XG5cblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICggdGhpcy5nZXQgPSBob29rRm4gKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fVxuXHR9O1xufVxuXG5cbnZhclxuXG5cdC8vIFN3YXBwYWJsZSBpZiBkaXNwbGF5IGlzIG5vbmUgb3Igc3RhcnRzIHdpdGggdGFibGVcblx0Ly8gZXhjZXB0IFwidGFibGVcIiwgXCJ0YWJsZS1jZWxsXCIsIG9yIFwidGFibGUtY2FwdGlvblwiXG5cdC8vIFNlZSBoZXJlIGZvciBkaXNwbGF5IHZhbHVlczogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9DU1MvZGlzcGxheVxuXHRyZGlzcGxheXN3YXAgPSAvXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sXG5cblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiT1wiLCBcIk1velwiLCBcIm1zXCIgXSxcblx0ZW1wdHlTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKS5zdHlsZTtcblxuLy8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIG5hbWUgKSB7XG5cblx0Ly8gU2hvcnRjdXQgZm9yIG5hbWVzIHRoYXQgYXJlIG5vdCB2ZW5kb3IgcHJlZml4ZWRcblx0aWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cblxuXHQvLyBDaGVjayBmb3IgdmVuZG9yIHByZWZpeGVkIG5hbWVzXG5cdHZhciBjYXBOYW1lID0gbmFtZVsgMCBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKCAxICksXG5cdFx0aSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcblxuXHR3aGlsZSAoIGktLSApIHtcblx0XHRuYW1lID0gY3NzUHJlZml4ZXNbIGkgXSArIGNhcE5hbWU7XG5cdFx0aWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApIHtcblxuXHQvLyBBbnkgcmVsYXRpdmUgKCsvLSkgdmFsdWVzIGhhdmUgYWxyZWFkeSBiZWVuXG5cdC8vIG5vcm1hbGl6ZWQgYXQgdGhpcyBwb2ludFxuXHR2YXIgbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKTtcblx0cmV0dXJuIG1hdGNoZXMgP1xuXG5cdFx0Ly8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgXCJzdWJ0cmFjdFwiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3Ncblx0XHRNYXRoLm1heCggMCwgbWF0Y2hlc1sgMiBdIC0gKCBzdWJ0cmFjdCB8fCAwICkgKSArICggbWF0Y2hlc1sgMyBdIHx8IFwicHhcIiApIDpcblx0XHR2YWx1ZTtcbn1cblxuZnVuY3Rpb24gYXVnbWVudFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhLCBpc0JvcmRlckJveCwgc3R5bGVzICkge1xuXHR2YXIgaSA9IGV4dHJhID09PSAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICkgP1xuXG5cdFx0Ly8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uXG5cdFx0NCA6XG5cblx0XHQvLyBPdGhlcndpc2UgaW5pdGlhbGl6ZSBmb3IgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCBwcm9wZXJ0aWVzXG5cdFx0bmFtZSA9PT0gXCJ3aWR0aFwiID8gMSA6IDAsXG5cblx0XHR2YWwgPSAwO1xuXG5cdGZvciAoIDsgaSA8IDQ7IGkgKz0gMiApIHtcblxuXHRcdC8vIEJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpbiwgc28gYWRkIGl0IGlmIHdlIHdhbnQgaXRcblx0XHRpZiAoIGV4dHJhID09PSBcIm1hcmdpblwiICkge1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIGV4dHJhICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdGlmICggaXNCb3JkZXJCb3ggKSB7XG5cblx0XHRcdC8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudFxuXHRcdFx0aWYgKCBleHRyYSA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQsIHNvIGFkZCBwYWRkaW5nXG5cdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQgbm9yIHBhZGRpbmcsIHNvIGFkZCBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwicGFkZGluZ1wiICkge1xuXHRcdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdmFsO1xufVxuXG5mdW5jdGlvbiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApIHtcblxuXHQvLyBTdGFydCB3aXRoIG9mZnNldCBwcm9wZXJ0eSwgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgYm9yZGVyLWJveCB2YWx1ZVxuXHR2YXIgdmFsdWVJc0JvcmRlckJveCA9IHRydWUsXG5cdFx0dmFsID0gbmFtZSA9PT0gXCJ3aWR0aFwiID8gZWxlbS5vZmZzZXRXaWR0aCA6IGVsZW0ub2Zmc2V0SGVpZ2h0LFxuXHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLFxuXHRcdGlzQm9yZGVyQm94ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIjtcblxuXHQvLyBTb21lIG5vbi1odG1sIGVsZW1lbnRzIHJldHVybiB1bmRlZmluZWQgZm9yIG9mZnNldFdpZHRoLCBzbyBjaGVjayBmb3IgbnVsbC91bmRlZmluZWRcblx0Ly8gc3ZnIC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NjQ5Mjg1XG5cdC8vIE1hdGhNTCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQ5MTY2OFxuXHRpZiAoIHZhbCA8PSAwIHx8IHZhbCA9PSBudWxsICkge1xuXG5cdFx0Ly8gRmFsbCBiYWNrIHRvIGNvbXB1dGVkIHRoZW4gdW5jb21wdXRlZCBjc3MgaWYgbmVjZXNzYXJ5XG5cdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHRpZiAoIHZhbCA8IDAgfHwgdmFsID09IG51bGwgKSB7XG5cdFx0XHR2YWwgPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0Ly8gQ29tcHV0ZWQgdW5pdCBpcyBub3QgcGl4ZWxzLiBTdG9wIGhlcmUgYW5kIHJldHVybi5cblx0XHRpZiAoIHJudW1ub25weC50ZXN0KCB2YWwgKSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0XHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmXG5cdFx0XHQoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApO1xuXG5cdFx0Ly8gTm9ybWFsaXplIFwiXCIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXHRcdHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG5cdH1cblxuXHQvLyBVc2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlc1xuXHRyZXR1cm4gKCB2YWwgK1xuXHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0ZWxlbSxcblx0XHRcdG5hbWUsXG5cdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94LFxuXHRcdFx0c3R5bGVzXG5cdFx0KVxuXHQpICsgXCJweFwiO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcIm9sZGRpc3BsYXlcIiApO1xuXHRcdGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7XG5cdFx0aWYgKCBzaG93ICkge1xuXG5cdFx0XHQvLyBSZXNldCB0aGUgaW5saW5lIGRpc3BsYXkgb2YgdGhpcyBlbGVtZW50IHRvIGxlYXJuIGlmIGl0IGlzXG5cdFx0XHQvLyBiZWluZyBoaWRkZW4gYnkgY2FzY2FkZWQgcnVsZXMgb3Igbm90XG5cdFx0XHRpZiAoICF2YWx1ZXNbIGluZGV4IF0gJiYgZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBlbGVtZW50cyB3aGljaCBoYXZlIGJlZW4gb3ZlcnJpZGRlbiB3aXRoIGRpc3BsYXk6IG5vbmVcblx0XHRcdC8vIGluIGEgc3R5bGVzaGVldCB0byB3aGF0ZXZlciB0aGUgZGVmYXVsdCBicm93c2VyIHN0eWxlIGlzXG5cdFx0XHQvLyBmb3Igc3VjaCBhbiBlbGVtZW50XG5cdFx0XHRpZiAoIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiAmJiBpc0hpZGRlbiggZWxlbSApICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhUHJpdi5hY2Nlc3MoXG5cdFx0XHRcdFx0ZWxlbSxcblx0XHRcdFx0XHRcIm9sZGRpc3BsYXlcIixcblx0XHRcdFx0XHRkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGhpZGRlbiA9IGlzSGlkZGVuKCBlbGVtICk7XG5cblx0XHRcdGlmICggZGlzcGxheSAhPT0gXCJub25lXCIgfHwgIWhpZGRlbiApIHtcblx0XHRcdFx0ZGF0YVByaXYuc2V0KFxuXHRcdFx0XHRcdGVsZW0sXG5cdFx0XHRcdFx0XCJvbGRkaXNwbGF5XCIsXG5cdFx0XHRcdFx0aGlkZGVuID8gZGlzcGxheSA6IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZXQgdGhlIGRpc3BsYXkgb2YgbW9zdCBvZiB0aGUgZWxlbWVudHMgaW4gYSBzZWNvbmQgbG9vcFxuXHQvLyB0byBhdm9pZCB0aGUgY29uc3RhbnQgcmVmbG93XG5cdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdO1xuXHRcdGlmICggIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0aWYgKCAhc2hvdyB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiIHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IHNob3cgPyB2YWx1ZXNbIGluZGV4IF0gfHwgXCJcIiA6IFwibm9uZVwiO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50cztcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdFxuXHQvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHlcblx0Y3NzSG9va3M6IHtcblx0XHRvcGFjaXR5OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHRcdC8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5XG5cdFx0XHRcdFx0dmFyIHJldCA9IGN1ckNTUyggZWxlbSwgXCJvcGFjaXR5XCIgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmV0ID09PSBcIlwiID8gXCIxXCIgOiByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgXCJweFwiIHRvIHRoZXNlIHBvc3NpYmx5LXVuaXRsZXNzIHByb3BlcnRpZXNcblx0Y3NzTnVtYmVyOiB7XG5cdFx0XCJhbmltYXRpb25JdGVyYXRpb25Db3VudFwiOiB0cnVlLFxuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHtcblx0XHRcImZsb2F0XCI6IFwiY3NzRmxvYXRcIlxuXHR9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHxcblx0XHRcdCggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTtcblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKCByZXQgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJiByZXRbIDEgXSApIHtcblx0XHRcdFx0dmFsdWUgPSBhZGp1c3RDU1MoIGVsZW0sIG5hbWUsIHJldCApO1xuXG5cdFx0XHRcdC8vIEZpeGVzIGJ1ZyAjOTIzN1xuXHRcdFx0XHR0eXBlID0gXCJudW1iZXJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbnVsbCBhbmQgTmFOIHZhbHVlcyBhcmVuJ3Qgc2V0ICgjNzExNilcblx0XHRcdGlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBudW1iZXIgd2FzIHBhc3NlZCBpbiwgYWRkIHRoZSB1bml0IChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHZhbHVlICs9IHJldCAmJiByZXRbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHRcdC8vIGJhY2tncm91bmQtKiBwcm9wcyBhZmZlY3Qgb3JpZ2luYWwgY2xvbmUncyB2YWx1ZXNcblx0XHRcdGlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSBcIlwiICYmIG5hbWUuaW5kZXhPZiggXCJiYWNrZ3JvdW5kXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IFwiaW5oZXJpdFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkLCB1c2UgdGhhdCB2YWx1ZSwgb3RoZXJ3aXNlIGp1c3Qgc2V0IHRoZSBzcGVjaWZpZWQgdmFsdWVcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fFxuXHRcdFx0XHQoIHZhbHVlID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UganVzdCBnZXQgdGhlIHZhbHVlIGZyb20gdGhlIHN0eWxlIG9iamVjdFxuXHRcdFx0cmV0dXJuIHN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXHR9LFxuXG5cdGNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7XG5cdFx0dmFyIHZhbCwgbnVtLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0bmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fFxuXHRcdFx0KCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggb3JpZ05hbWUgKSB8fCBvcmlnTmFtZSApO1xuXG5cdFx0Ly8gVHJ5IHByZWZpeGVkIG5hbWUgZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgbmFtZVxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcblx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcblx0XHRpZiAoIHZhbCA9PT0gXCJub3JtYWxcIiAmJiBuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSApIHtcblx0XHRcdHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuXHRcdH1cblxuXHRcdC8vIE1ha2UgbnVtZXJpYyBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpY1xuXHRcdGlmICggZXh0cmEgPT09IFwiXCIgfHwgZXh0cmEgKSB7XG5cdFx0XHRudW0gPSBwYXJzZUZsb2F0KCB2YWwgKTtcblx0XHRcdHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBpc0Zpbml0ZSggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcImhlaWdodFwiLCBcIndpZHRoXCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0Ly8gQ2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG5cdFx0XHRcdC8vIGJ1dCBpdCBtdXN0IGhhdmUgYSBjdXJyZW50IGRpc3BsYXkgc3R5bGUgdGhhdCB3b3VsZCBiZW5lZml0XG5cdFx0XHRcdHJldHVybiByZGlzcGxheXN3YXAudGVzdCggalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApICYmXG5cdFx0XHRcdFx0ZWxlbS5vZmZzZXRXaWR0aCA9PT0gMCA/XG5cdFx0XHRcdFx0XHRzd2FwKCBlbGVtLCBjc3NTaG93LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7XG5cdFx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIG1hdGNoZXMsXG5cdFx0XHRcdHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApLFxuXHRcdFx0XHRzdWJ0cmFjdCA9IGV4dHJhICYmIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0XHRcdGVsZW0sXG5cdFx0XHRcdFx0bmFtZSxcblx0XHRcdFx0XHRleHRyYSxcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiLFxuXHRcdFx0XHRcdHN0eWxlc1xuXHRcdFx0XHQpO1xuXG5cdFx0XHQvLyBDb252ZXJ0IHRvIHBpeGVscyBpZiB2YWx1ZSBhZGp1c3RtZW50IGlzIG5lZWRlZFxuXHRcdFx0aWYgKCBzdWJ0cmFjdCAmJiAoIG1hdGNoZXMgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJlxuXHRcdFx0XHQoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSAhPT0gXCJweFwiICkge1xuXG5cdFx0XHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKTtcblx0XHR9XG5cdH07XG59ICk7XG5cbmpRdWVyeS5jc3NIb29rcy5tYXJnaW5MZWZ0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luTGVmdCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4gKCBwYXJzZUZsb2F0KCBjdXJDU1MoIGVsZW0sIFwibWFyZ2luTGVmdFwiICkgKSB8fFxuXHRcdFx0XHRlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLVxuXHRcdFx0XHRcdHN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG5cdFx0XHRcdFx0fSApXG5cdFx0XHRcdCkgKyBcInB4XCI7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xualF1ZXJ5LmNzc0hvb2tzLm1hcmdpblJpZ2h0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQsXG5cdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0cmV0dXJuIHN3YXAoIGVsZW0sIHsgXCJkaXNwbGF5XCI6IFwiaW5saW5lLWJsb2NrXCIgfSxcblx0XHRcdFx0Y3VyQ1NTLCBbIGVsZW0sIFwibWFyZ2luUmlnaHRcIiBdICk7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCgge1xuXHRtYXJnaW46IFwiXCIsXG5cdHBhZGRpbmc6IFwiXCIsXG5cdGJvcmRlcjogXCJXaWR0aFwiXG59LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0gPSB7XG5cdFx0ZXhwYW5kOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgaSA9IDAsXG5cdFx0XHRcdGV4cGFuZGVkID0ge30sXG5cblx0XHRcdFx0Ly8gQXNzdW1lcyBhIHNpbmdsZSBudW1iZXIgaWYgbm90IGEgc3RyaW5nXG5cdFx0XHRcdHBhcnRzID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUuc3BsaXQoIFwiIFwiICkgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRjc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgc3R5bGVzLCBsZW4sXG5cdFx0XHRcdG1hcCA9IHt9LFxuXHRcdFx0XHRpID0gMDtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaXNBcnJheSggbmFtZSApICkge1xuXHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XHRcdFx0bGVuID0gbmFtZS5sZW5ndGg7XG5cblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0bWFwWyBuYW1lWyBpIF0gXSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWVbIGkgXSwgZmFsc2UsIHN0eWxlcyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG1hcDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOlxuXHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0fSwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cdHNob3c6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcywgdHJ1ZSApO1xuXHR9LFxuXHRoaWRlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTtcblx0fSxcblx0dG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc3RhdGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW4oIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbmZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHtcblx0cmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcbn1cbmpRdWVyeS5Ud2VlbiA9IFR3ZWVuO1xuXG5Ud2Vlbi5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBUd2Vlbixcblx0aW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuXHRcdHRoaXMuZWxlbSA9IGVsZW07XG5cdFx0dGhpcy5wcm9wID0gcHJvcDtcblx0XHR0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0O1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0Ly8gVXNlIGEgcHJvcGVydHkgb24gdGhlIGVsZW1lbnQgZGlyZWN0bHkgd2hlbiBpdCBpcyBub3QgYSBET00gZWxlbWVudCxcblx0XHRcdC8vIG9yIHdoZW4gdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc3R5bGUgcHJvcGVydHkgdGhhdCBleGlzdHMuXG5cdFx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgIT09IDEgfHxcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiYgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIFBhc3NpbmcgYW4gZW1wdHkgc3RyaW5nIGFzIGEgM3JkIHBhcmFtZXRlciB0byAuY3NzIHdpbGwgYXV0b21hdGljYWxseVxuXHRcdFx0Ly8gYXR0ZW1wdCBhIHBhcnNlRmxvYXQgYW5kIGZhbGxiYWNrIHRvIGEgc3RyaW5nIGlmIHRoZSBwYXJzZSBmYWlscy5cblx0XHRcdC8vIFNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0O1xuXHRcdFx0Ly8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyBcInJvdGF0ZSgxcmFkKVwiIGFyZSByZXR1cm5lZCBhcy1pcy5cblx0XHRcdHJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIFwiXCIgKTtcblxuXHRcdFx0Ly8gRW1wdHkgc3RyaW5ncywgbnVsbCwgdW5kZWZpbmVkIGFuZCBcImF1dG9cIiBhcmUgY29udmVydGVkIHRvIDAuXG5cdFx0XHRyZXR1cm4gIXJlc3VsdCB8fCByZXN1bHQgPT09IFwiYXV0b1wiID8gMCA6IHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdCggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LmNzc0hvb2tzWyB0d2Vlbi5wcm9wIF0gKSApIHtcblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCB0d2Vlbi5ub3cgKyB0d2Vlbi51bml0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBTdXBwb3J0OiBJRTlcbi8vIFBhbmljIGJhc2VkIGFwcHJvYWNoIHRvIHNldHRpbmcgdGhpbmdzIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuVHdlZW4ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0ID0ge1xuXHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgJiYgdHdlZW4uZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmVhc2luZyA9IHtcblx0bGluZWFyOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gcDtcblx0fSxcblx0c3dpbmc6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7XG5cdH0sXG5cdF9kZWZhdWx0OiBcInN3aW5nXCJcbn07XG5cbmpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0O1xuXG4vLyBCYWNrIENvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludFxualF1ZXJ5LmZ4LnN0ZXAgPSB7fTtcblxuXG5cblxudmFyXG5cdGZ4Tm93LCB0aW1lcklkLFxuXHRyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxcblx0cnJ1biA9IC9xdWV1ZUhvb2tzJC87XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0ZnhOb3cgPSB1bmRlZmluZWQ7XG5cdH0gKTtcblx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXSApLmNvbmNhdCggQW5pbWF0aW9uLnR3ZWVuZXJzWyBcIipcIiBdICksXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGlmICggKCB0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApICkgKSB7XG5cblx0XHRcdC8vIFdlJ3JlIGRvbmUgd2l0aCB0aGlzIHByb3BlcnR5XG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRQcmVmaWx0ZXIoIGVsZW0sIHByb3BzLCBvcHRzICkge1xuXHQvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG5cdHZhciBwcm9wLCB2YWx1ZSwgdG9nZ2xlLCB0d2VlbiwgaG9va3MsIG9sZGZpcmUsIGRpc3BsYXksIGNoZWNrRGlzcGxheSxcblx0XHRhbmltID0gdGhpcyxcblx0XHRvcmlnID0ge30sXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlLFxuXHRcdGhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW4oIGVsZW0gKSxcblx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIEhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXNcblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aG9va3MudW5xdWV1ZWQtLTtcblx0XHRcdFx0aWYgKCAhalF1ZXJ5LnF1ZXVlKCBlbGVtLCBcImZ4XCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gSGVpZ2h0L3dpZHRoIG92ZXJmbG93IHBhc3Ncblx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCJoZWlnaHRcIiBpbiBwcm9wcyB8fCBcIndpZHRoXCIgaW4gcHJvcHMgKSApIHtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IG5vdGhpbmcgc25lYWtzIG91dFxuXHRcdC8vIFJlY29yZCBhbGwgMyBvdmVyZmxvdyBhdHRyaWJ1dGVzIGJlY2F1c2UgSUU5LTEwIGRvIG5vdFxuXHRcdC8vIGNoYW5nZSB0aGUgb3ZlcmZsb3cgYXR0cmlidXRlIHdoZW4gb3ZlcmZsb3dYIGFuZFxuXHRcdC8vIG92ZXJmbG93WSBhcmUgc2V0IHRvIHRoZSBzYW1lIHZhbHVlXG5cdFx0b3B0cy5vdmVyZmxvdyA9IFsgc3R5bGUub3ZlcmZsb3csIHN0eWxlLm92ZXJmbG93WCwgc3R5bGUub3ZlcmZsb3dZIF07XG5cblx0XHQvLyBTZXQgZGlzcGxheSBwcm9wZXJ0eSB0byBpbmxpbmUtYmxvY2sgZm9yIGhlaWdodC93aWR0aFxuXHRcdC8vIGFuaW1hdGlvbnMgb24gaW5saW5lIGVsZW1lbnRzIHRoYXQgYXJlIGhhdmluZyB3aWR0aC9oZWlnaHQgYW5pbWF0ZWRcblx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblxuXHRcdC8vIFRlc3QgZGVmYXVsdCBkaXNwbGF5IGlmIGRpc3BsYXkgaXMgY3VycmVudGx5IFwibm9uZVwiXG5cdFx0Y2hlY2tEaXNwbGF5ID0gZGlzcGxheSA9PT0gXCJub25lXCIgP1xuXHRcdFx0ZGF0YVByaXYuZ2V0KCBlbGVtLCBcIm9sZGRpc3BsYXlcIiApIHx8IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgOiBkaXNwbGF5O1xuXG5cdFx0aWYgKCBjaGVja0Rpc3BsYXkgPT09IFwiaW5saW5lXCIgJiYgalF1ZXJ5LmNzcyggZWxlbSwgXCJmbG9hdFwiICkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0c3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBvcHRzLm92ZXJmbG93ICkge1xuXHRcdHN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRzdHlsZS5vdmVyZmxvdyA9IG9wdHMub3ZlcmZsb3dbIDAgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WCA9IG9wdHMub3ZlcmZsb3dbIDEgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WSA9IG9wdHMub3ZlcmZsb3dbIDIgXTtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBzaG93L2hpZGUgcGFzc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3dcblx0XHRcdFx0Ly8gYW5kIHdlIGFyZSBnb2luZyB0byBwcm9jZWVkIHdpdGggc2hvdywgd2Ugc2hvdWxkIHByZXRlbmQgdG8gYmUgaGlkZGVuXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXG5cdFx0Ly8gQW55IG5vbi1meCB2YWx1ZSBzdG9wcyB1cyBmcm9tIHJlc3RvcmluZyB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5ID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgXCJmeHNob3dcIiwge30gKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSBzdGF0ZSBpZiBpdHMgdG9nZ2xlIC0gZW5hYmxlcyAuc3RvcCgpLnRvZ2dsZSgpIHRvIFwicmV2ZXJzZVwiXG5cdFx0aWYgKCB0b2dnbGUgKSB7XG5cdFx0XHRkYXRhU2hvdy5oaWRkZW4gPSAhaGlkZGVuO1xuXHRcdH1cblx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdGpRdWVyeSggZWxlbSApLnNob3coKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5KCBlbGVtICkuaGlkZSgpO1xuXHRcdFx0fSApO1xuXHRcdH1cblx0XHRhbmltLmRvbmUoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHByb3A7XG5cblx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgXCJmeHNob3dcIiApO1xuXHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHR0d2VlbiA9IGNyZWF0ZVR3ZWVuKCBoaWRkZW4gPyBkYXRhU2hvd1sgcHJvcCBdIDogMCwgcHJvcCwgYW5pbSApO1xuXG5cdFx0XHRpZiAoICEoIHByb3AgaW4gZGF0YVNob3cgKSApIHtcblx0XHRcdFx0ZGF0YVNob3dbIHByb3AgXSA9IHR3ZWVuLnN0YXJ0O1xuXHRcdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0XHR0d2Vlbi5lbmQgPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0XHR0d2Vlbi5zdGFydCA9IHByb3AgPT09IFwid2lkdGhcIiB8fCBwcm9wID09PSBcImhlaWdodFwiID8gMSA6IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0Ly8gSWYgdGhpcyBpcyBhIG5vb3AgbGlrZSAuaGlkZSgpLmhpZGUoKSwgcmVzdG9yZSBhbiBvdmVyd3JpdHRlbiBkaXNwbGF5IHZhbHVlXG5cdH0gZWxzZSBpZiAoICggZGlzcGxheSA9PT0gXCJub25lXCIgPyBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheSApID09PSBcImlubGluZVwiICkge1xuXHRcdHN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuXHR2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzO1xuXG5cdC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuXHRmb3IgKCBpbmRleCBpbiBwcm9wcyApIHtcblx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggaW5kZXggKTtcblx0XHRlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG5cdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggIT09IG5hbWUgKSB7XG5cdFx0XHRwcm9wc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0fVxuXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWx1ZSA9IGhvb2tzLmV4cGFuZCggdmFsdWUgKTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXG5cdFx0XHQvLyBOb3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29uJ3Qgb3ZlcndyaXRlIGV4aXN0aW5nIGtleXMuXG5cdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkge1xuXHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIEFuaW1hdGlvbiggZWxlbSwgcHJvcGVydGllcywgb3B0aW9ucyApIHtcblx0dmFyIHJlc3VsdCxcblx0XHRzdG9wcGVkLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsXG5cdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBEb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3Jcblx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0fSApLFxuXHRcdHRpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdFx0cmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLFxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIEFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSBgMSAtICggMC41IHx8IDAgKWAgKCMxMjQ5Nylcblx0XHRcdFx0dGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLFxuXHRcdFx0XHRwZXJjZW50ID0gMSAtIHRlbXAsXG5cdFx0XHRcdGluZGV4ID0gMCxcblx0XHRcdFx0bGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7XG5cblx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggcGVyY2VudCApO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgcGVyY2VudCwgcmVtYWluaW5nIF0gKTtcblxuXHRcdFx0aWYgKCBwZXJjZW50IDwgMSAmJiBsZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiByZW1haW5pbmc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRhbmltYXRpb24gPSBkZWZlcnJlZC5wcm9taXNlKCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7XG5cdFx0XHRcdHNwZWNpYWxFYXNpbmc6IHt9LFxuXHRcdFx0XHRlYXNpbmc6IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHRcblx0XHRcdH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBlbmQsIHdlIHdhbnQgdG8gcnVuIGFsbCB0aGUgdHdlZW5zXG5cdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIHNraXAgdGhpcyBwYXJ0XG5cdFx0XHRcdFx0bGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDtcblx0XHRcdFx0aWYgKCBzdG9wcGVkICkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0b3BwZWQgPSB0cnVlO1xuXHRcdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggMSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzb2x2ZSB3aGVuIHdlIHBsYXllZCB0aGUgbGFzdCBmcmFtZTsgb3RoZXJ3aXNlLCByZWplY3Rcblx0XHRcdFx0aWYgKCBnb3RvRW5kICkge1xuXHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9ICksXG5cdFx0cHJvcHMgPSBhbmltYXRpb24ucHJvcHM7XG5cblx0cHJvcEZpbHRlciggcHJvcHMsIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmcgKTtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRyZXN1bHQgPSBBbmltYXRpb24ucHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApO1xuXHRcdGlmICggcmVzdWx0ICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcmVzdWx0LnN0b3AgKSApIHtcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCBhbmltYXRpb24uZWxlbSwgYW5pbWF0aW9uLm9wdHMucXVldWUgKS5zdG9wID1cblx0XHRcdFx0XHRqUXVlcnkucHJveHkoIHJlc3VsdC5zdG9wLCByZXN1bHQgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9IClcblx0KTtcblxuXHQvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9uc1xuXHRyZXR1cm4gYW5pbWF0aW9uLnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApXG5cdFx0LmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlIClcblx0XHQuZmFpbCggYW5pbWF0aW9uLm9wdHMuZmFpbCApXG5cdFx0LmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7XG59XG5cbmpRdWVyeS5BbmltYXRpb24gPSBqUXVlcnkuZXh0ZW5kKCBBbmltYXRpb24sIHtcblx0dHdlZW5lcnM6IHtcblx0XHRcIipcIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApO1xuXHRcdFx0YWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7XG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH0sXG5cblx0dHdlZW5lcjogZnVuY3Rpb24oIHByb3BzLCBjYWxsYmFjayApIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuXHRcdFx0Y2FsbGJhY2sgPSBwcm9wcztcblx0XHRcdHByb3BzID0gWyBcIipcIiBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwcm9wcyA9IHByb3BzLm1hdGNoKCBybm90d2hpdGUgKTtcblx0XHR9XG5cblx0XHR2YXIgcHJvcCxcblx0XHRcdGluZGV4ID0gMCxcblx0XHRcdGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdFx0cHJvcCA9IHByb3BzWyBpbmRleCBdO1xuXHRcdFx0QW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gPSBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9LFxuXG5cdHByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLFxuXG5cdHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuXHRcdGlmICggcHJlcGVuZCApIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEFuaW1hdGlvbi5wcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcblx0dmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuXHRcdGNvbXBsZXRlOiBmbiB8fCAhZm4gJiYgZWFzaW5nIHx8XG5cdFx0XHRqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCxcblx0XHRkdXJhdGlvbjogc3BlZWQsXG5cdFx0ZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFqUXVlcnkuaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nXG5cdH07XG5cblx0b3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4Lm9mZiA/IDAgOiB0eXBlb2Ygb3B0LmR1cmF0aW9uID09PSBcIm51bWJlclwiID9cblx0XHRvcHQuZHVyYXRpb24gOiBvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyA/XG5cdFx0XHRqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXSA6IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZhZGVUbzogZnVuY3Rpb24oIHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjayApIHtcblxuXHRcdC8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW4gKS5jc3MoIFwib3BhY2l0eVwiLCAwICkuc2hvdygpXG5cblx0XHRcdC8vIEFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZFxuXHRcdFx0LmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fSxcblx0YW5pbWF0ZTogZnVuY3Rpb24oIHByb3AsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHZhciBlbXB0eSA9IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wICksXG5cdFx0XHRvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksXG5cdFx0XHRkb0FuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHByb3Agc28gcGVyLXByb3BlcnR5IGVhc2luZyB3b24ndCBiZSBsb3N0XG5cdFx0XHRcdHZhciBhbmltID0gQW5pbWF0aW9uKCB0aGlzLCBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcCApLCBvcHRhbGwgKTtcblxuXHRcdFx0XHQvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHlcblx0XHRcdFx0aWYgKCBlbXB0eSB8fCBkYXRhUHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGRlcXVldWUgPSB0cnVlLFxuXHRcdFx0XHRpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGRhdGEgPSBkYXRhUHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmXG5cdFx0XHRcdFx0KCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7XG5cblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cdGZpbmlzaDogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0aWYgKCB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaW5kZXgsXG5cdFx0XHRcdGRhdGEgPSBkYXRhUHJpdi5nZXQoIHRoaXMgKSxcblx0XHRcdFx0cXVldWUgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZVwiIF0sXG5cdFx0XHRcdGhvb2tzID0gZGF0YVsgdHlwZSArIFwicXVldWVIb29rc1wiIF0sXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDtcblxuXHRcdFx0Ly8gRW5hYmxlIGZpbmlzaGluZyBmbGFnIG9uIHByaXZhdGUgZGF0YVxuXHRcdFx0ZGF0YS5maW5pc2ggPSB0cnVlO1xuXG5cdFx0XHQvLyBFbXB0eSB0aGUgcXVldWUgZmlyc3Rcblx0XHRcdGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgW10gKTtcblxuXHRcdFx0aWYgKCBob29rcyAmJiBob29rcy5zdG9wICkge1xuXHRcdFx0XHRob29rcy5zdG9wLmNhbGwoIHRoaXMsIHRydWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFjdGl2ZSBhbmltYXRpb25zLCBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkge1xuXHRcdFx0XHRcdHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIHF1ZXVlWyBpbmRleCBdICYmIHF1ZXVlWyBpbmRleCBdLmZpbmlzaCApIHtcblx0XHRcdFx0XHRxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFR1cm4gb2ZmIGZpbmlzaGluZyBmbGFnXG5cdFx0XHRkZWxldGUgZGF0YS5maW5pc2g7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwidG9nZ2xlXCIsIFwic2hvd1wiLCBcImhpZGVcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGNzc0ZuID0galF1ZXJ5LmZuWyBuYW1lIF07XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBzcGVlZCA9PSBudWxsIHx8IHR5cGVvZiBzcGVlZCA9PT0gXCJib29sZWFuXCIgP1xuXHRcdFx0Y3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDpcblx0XHRcdHRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxuLy8gR2VuZXJhdGUgc2hvcnRjdXRzIGZvciBjdXN0b20gYW5pbWF0aW9uc1xualF1ZXJ5LmVhY2goIHtcblx0c2xpZGVEb3duOiBnZW5GeCggXCJzaG93XCIgKSxcblx0c2xpZGVVcDogZ2VuRngoIFwiaGlkZVwiICksXG5cdHNsaWRlVG9nZ2xlOiBnZW5GeCggXCJ0b2dnbGVcIiApLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxualF1ZXJ5LnRpbWVycyA9IFtdO1xualF1ZXJ5LmZ4LnRpY2sgPSBmdW5jdGlvbigpIHtcblx0dmFyIHRpbWVyLFxuXHRcdGkgPSAwLFxuXHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnM7XG5cblx0ZnhOb3cgPSBqUXVlcnkubm93KCk7XG5cblx0Zm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkge1xuXHRcdHRpbWVyID0gdGltZXJzWyBpIF07XG5cblx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRpZiAoIHRpbWVyKCkgKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnRpbWVycy5wb3AoKTtcblx0fVxufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5qUXVlcnkuZnguc3RhcnQgPSBmdW5jdGlvbigpIHtcblx0aWYgKCAhdGltZXJJZCApIHtcblx0XHR0aW1lcklkID0gd2luZG93LnNldEludGVydmFsKCBqUXVlcnkuZngudGljaywgalF1ZXJ5LmZ4LmludGVydmFsICk7XG5cdH1cbn07XG5cbmpRdWVyeS5meC5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdHdpbmRvdy5jbGVhckludGVydmFsKCB0aW1lcklkICk7XG5cblx0dGltZXJJZCA9IG51bGw7XG59O1xuXG5qUXVlcnkuZnguc3BlZWRzID0ge1xuXHRzbG93OiA2MDAsXG5cdGZhc3Q6IDIwMCxcblxuXHQvLyBEZWZhdWx0IHNwZWVkXG5cdF9kZWZhdWx0OiA0MDBcbn07XG5cblxuLy8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLlxuLy8gaHR0cDovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMDAzMjQwMTQ3NDcvaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5L1xualF1ZXJ5LmZuLmRlbGF5ID0gZnVuY3Rpb24oIHRpbWUsIHR5cGUgKSB7XG5cdHRpbWUgPSBqUXVlcnkuZnggPyBqUXVlcnkuZnguc3BlZWRzWyB0aW1lIF0gfHwgdGltZSA6IHRpbWU7XG5cdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSwgZnVuY3Rpb24oIG5leHQsIGhvb2tzICkge1xuXHRcdHZhciB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTtcblx0XHRob29rcy5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSApO1xufTtcblxuXG4oIGZ1bmN0aW9uKCkge1xuXHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKSxcblx0XHRzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNlbGVjdFwiICksXG5cdFx0b3B0ID0gc2VsZWN0LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm9wdGlvblwiICkgKTtcblxuXHRpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuXG5cdC8vIFN1cHBvcnQ6IGlPUzw9NS4xLCBBbmRyb2lkPD00LjIrXG5cdC8vIERlZmF1bHQgdmFsdWUgZm9yIGEgY2hlY2tib3ggc2hvdWxkIGJlIFwib25cIlxuXHRzdXBwb3J0LmNoZWNrT24gPSBpbnB1dC52YWx1ZSAhPT0gXCJcIjtcblxuXHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdC8vIE11c3QgYWNjZXNzIHNlbGVjdGVkSW5kZXggdG8gbWFrZSBkZWZhdWx0IG9wdGlvbnMgc2VsZWN0XG5cdHN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw9Mi4zXG5cdC8vIE9wdGlvbnMgaW5zaWRlIGRpc2FibGVkIHNlbGVjdHMgYXJlIGluY29ycmVjdGx5IG1hcmtlZCBhcyBkaXNhYmxlZFxuXHRzZWxlY3QuZGlzYWJsZWQgPSB0cnVlO1xuXHRzdXBwb3J0Lm9wdERpc2FibGVkID0gIW9wdC5kaXNhYmxlZDtcblxuXHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdC8vIEFuIGlucHV0IGxvc2VzIGl0cyB2YWx1ZSBhZnRlciBiZWNvbWluZyBhIHJhZGlvXG5cdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cdGlucHV0LnZhbHVlID0gXCJ0XCI7XG5cdGlucHV0LnR5cGUgPSBcInJhZGlvXCI7XG5cdHN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSBcInRcIjtcbn0gKSgpO1xuXG5cbnZhciBib29sSG9vayxcblx0YXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGU7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCB0aGlzLCBuYW1lICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBhdHRyaWJ1dGVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWRcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgYXR0cmlidXRlcyBhcmUgbG93ZXJjYXNlXG5cdFx0Ly8gR3JhYiBuZWNlc3NhcnkgaG9vayBpZiBvbmUgaXMgZGVmaW5lZFxuXHRcdGlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXHRcdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZSBdIHx8XG5cdFx0XHRcdCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgPyBib29sSG9vayA6IHVuZGVmaW5lZCApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggdmFsdWUgPT09IG51bGwgKSB7XG5cdFx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIHZhbHVlICsgXCJcIiApO1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblxuXHRcdHJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdC8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkXG5cdFx0cmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0O1xuXHR9LFxuXG5cdGF0dHJIb29rczoge1xuXHRcdHR5cGU6IHtcblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICFzdXBwb3J0LnJhZGlvVmFsdWUgJiYgdmFsdWUgPT09IFwicmFkaW9cIiAmJlxuXHRcdFx0XHRcdGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgXCJpbnB1dFwiICkgKSB7XG5cdFx0XHRcdFx0dmFyIHZhbCA9IGVsZW0udmFsdWU7XG5cdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCB2YWx1ZSApO1xuXHRcdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdFx0ZWxlbS52YWx1ZSA9IHZhbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHR2YXIgbmFtZSwgcHJvcE5hbWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF0dHJOYW1lcyA9IHZhbHVlICYmIHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKTtcblxuXHRcdGlmICggYXR0ck5hbWVzICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHR3aGlsZSAoICggbmFtZSA9IGF0dHJOYW1lc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0cHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cblx0XHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKVxuXHRcdFx0XHRpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkge1xuXG5cdFx0XHRcdFx0Ly8gU2V0IGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgdG8gZmFsc2Vcblx0XHRcdFx0XHRlbGVtWyBwcm9wTmFtZSBdID0gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggbmFtZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2Vcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lICk7XG5cdFx0fVxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG59O1xualF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cblx0YXR0ckhhbmRsZVsgbmFtZSBdID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciByZXQsIGhhbmRsZTtcblx0XHRpZiAoICFpc1hNTCApIHtcblxuXHRcdFx0Ly8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlclxuXHRcdFx0aGFuZGxlID0gYXR0ckhhbmRsZVsgbmFtZSBdO1xuXHRcdFx0YXR0ckhhbmRsZVsgbmFtZSBdID0gcmV0O1xuXHRcdFx0cmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgP1xuXHRcdFx0XHRuYW1lLnRvTG93ZXJDYXNlKCkgOlxuXHRcdFx0XHRudWxsO1xuXHRcdFx0YXR0ckhhbmRsZVsgbmFtZSBdID0gaGFuZGxlO1xuXHRcdH1cblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xufSApO1xuXG5cblxuXG52YXIgcmZvY3VzYWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJjbGlja2FibGUgPSAvXig/OmF8YXJlYSkkL2k7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRlbGV0ZSB0aGlzWyBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUgXTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBEb24ndCBnZXQvc2V0IHByb3BlcnRpZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1bIG5hbWUgXTtcblx0fSxcblxuXHRwcm9wSG9va3M6IHtcblx0XHR0YWJJbmRleDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHQvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGVcblx0XHRcdFx0Ly8gY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0XG5cdFx0XHRcdC8vIGh0dHA6Ly9mbHVpZHByb2plY3Qub3JnL2Jsb2cvMjAwOC8wMS8wOS9nZXR0aW5nLXNldHRpbmctYW5kLXJlbW92aW5nLXRhYmluZGV4LXZhbHVlcy13aXRoLWphdmFzY3JpcHQvXG5cdFx0XHRcdC8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpXG5cdFx0XHRcdHZhciB0YWJpbmRleCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidGFiaW5kZXhcIiApO1xuXG5cdFx0XHRcdHJldHVybiB0YWJpbmRleCA/XG5cdFx0XHRcdFx0cGFyc2VJbnQoIHRhYmluZGV4LCAxMCApIDpcblx0XHRcdFx0XHRyZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fFxuXHRcdFx0XHRcdFx0cmNsaWNrYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgZWxlbS5ocmVmID9cblx0XHRcdFx0XHRcdFx0MCA6XG5cdFx0XHRcdFx0XHRcdC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRwcm9wRml4OiB7XG5cdFx0XCJmb3JcIjogXCJodG1sRm9yXCIsXG5cdFx0XCJjbGFzc1wiOiBcImNsYXNzTmFtZVwiXG5cdH1cbn0gKTtcblxuLy8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG4vLyBBY2Nlc3NpbmcgdGhlIHNlbGVjdGVkSW5kZXggcHJvcGVydHlcbi8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZXNwZWN0IHNldHRpbmcgc2VsZWN0ZWRcbi8vIG9uIHRoZSBvcHRpb25cbi8vIFRoZSBnZXR0ZXIgZW5zdXJlcyBhIGRlZmF1bHQgb3B0aW9uIGlzIHNlbGVjdGVkXG4vLyB3aGVuIGluIGFuIG9wdGdyb3VwXG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdHBhcmVudC5zZWxlY3RlZEluZGV4O1xuXG5cdFx0XHRcdGlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxualF1ZXJ5LmVhY2goIFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59ICk7XG5cblxuXG5cbnZhciByY2xhc3MgPSAvW1xcdFxcclxcblxcZl0vZztcblxuZnVuY3Rpb24gZ2V0Q2xhc3MoIGVsZW0gKSB7XG5cdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZSggXCJjbGFzc1wiICkgfHwgXCJcIjtcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRhZGRDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUgKSB7XG5cdFx0XHRjbGFzc2VzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTtcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdCggXCIgXCIgKyBjdXJWYWx1ZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciArPSBjbGF6eiArIFwiIFwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTtcblx0XHRcdFx0XHRpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiwgZmluYWxWYWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnJlbW92ZUNsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuYXR0ciggXCJjbGFzc1wiLCBcIlwiICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUgKSB7XG5cdFx0XHRjbGFzc2VzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTtcblxuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0KCBcIiBcIiArIGN1clZhbHVlICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIGZpbmFsVmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcyhcblx0XHRcdFx0XHR2YWx1ZS5jYWxsKCB0aGlzLCBpLCBnZXRDbGFzcyggdGhpcyApLCBzdGF0ZVZhbCApLFxuXHRcdFx0XHRcdHN0YXRlVmFsXG5cdFx0XHRcdCk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY2xhc3NOYW1lLCBpLCBzZWxmLCBjbGFzc05hbWVzO1xuXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdFx0Ly8gVG9nZ2xlIGluZGl2aWR1YWwgY2xhc3MgbmFtZXNcblx0XHRcdFx0aSA9IDA7XG5cdFx0XHRcdHNlbGYgPSBqUXVlcnkoIHRoaXMgKTtcblx0XHRcdFx0Y2xhc3NOYW1lcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0XHR3aGlsZSAoICggY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0gKSApIHtcblxuXHRcdFx0XHRcdC8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdFxuXHRcdFx0XHRcdGlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZi5hZGRDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG5cdFx0XHR9IGVsc2UgaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRjbGFzc05hbWUgPSBnZXRDbGFzcyggdGhpcyApO1xuXHRcdFx0XHRpZiAoIGNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdC8vIFN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0aWYgKCB0aGlzLnNldEF0dHJpYnV0ZSApIHtcblx0XHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lIHx8IHZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRcdFx0XHRcIlwiIDpcblx0XHRcdFx0XHRcdGRhdGFQcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRoYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBjbGFzc05hbWUsIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIjtcblx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0KCBcIiBcIiArIGdldENsYXNzKCBlbGVtICkgKyBcIiBcIiApLnJlcGxhY2UoIHJjbGFzcywgXCIgXCIgKVxuXHRcdFx0XHRcdC5pbmRleE9mKCBjbGFzc05hbWUgKSA+IC0xXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59ICk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nLFxuXHRyc3BhY2VzID0gL1tcXHgyMFxcdFxcclxcblxcZl0rL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8XG5cdFx0XHRcdFx0alF1ZXJ5LnZhbEhvb2tzWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0XHRpZiAoIGhvb2tzICYmXG5cdFx0XHRcdFx0XCJnZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHRcdCggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSApICE9PSB1bmRlZmluZWRcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldCA9IGVsZW0udmFsdWU7XG5cblx0XHRcdFx0cmV0dXJuIHR5cGVvZiByZXQgPT09IFwic3RyaW5nXCIgP1xuXG5cdFx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRcdHJldC5yZXBsYWNlKCBycmV0dXJuLCBcIlwiICkgOlxuXG5cdFx0XHRcdFx0Ly8gSGFuZGxlIGNhc2VzIHdoZXJlIHZhbHVlIGlzIG51bGwvdW5kZWYgb3IgbnVtYmVyXG5cdFx0XHRcdFx0cmV0ID09IG51bGwgPyBcIlwiIDogcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHR2YXIgdmFsO1xuXG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBpc0Z1bmN0aW9uICkge1xuXHRcdFx0XHR2YWwgPSB2YWx1ZS5jYWxsKCB0aGlzLCBpLCBqUXVlcnkoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFsID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzIFwiXCI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHZhbCA9IFwiXCI7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRcdHZhbCA9IGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIjtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgXCJ2YWx1ZVwiICkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0dGhpcy52YWx1ZSA9IHZhbDtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHR2YWxIb29rczoge1xuXHRcdG9wdGlvbjoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHR2YXIgdmFsID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ2YWx1ZVwiICk7XG5cdFx0XHRcdHJldHVybiB2YWwgIT0gbnVsbCA/XG5cdFx0XHRcdFx0dmFsIDpcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFMTAtMTErXG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdC8vIFN0cmlwIGFuZCBjb2xsYXBzZSB3aGl0ZXNwYWNlXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLXdoaXRlc3BhY2Vcblx0XHRcdFx0XHRqUXVlcnkudHJpbSggalF1ZXJ5LnRleHQoIGVsZW0gKSApLnJlcGxhY2UoIHJzcGFjZXMsIFwiIFwiICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIiB8fCBpbmRleCA8IDAsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdGkgPSBpbmRleCA8IDAgP1xuXHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIElFOC05IGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKVxuXHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXG5cdFx0XHRcdFx0XHRcdC8vIERvbid0IHJldHVybiBvcHRpb25zIHRoYXQgYXJlIGRpc2FibGVkIG9yIGluIGEgZGlzYWJsZWQgb3B0Z3JvdXBcblx0XHRcdFx0XHRcdFx0KCBzdXBwb3J0Lm9wdERpc2FibGVkID9cblx0XHRcdFx0XHRcdFx0XHQhb3B0aW9uLmRpc2FibGVkIDogb3B0aW9uLmdldEF0dHJpYnV0ZSggXCJkaXNhYmxlZFwiICkgPT09IG51bGwgKSAmJlxuXHRcdFx0XHRcdFx0XHQoICFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZCB8fFxuXHRcdFx0XHRcdFx0XHRcdCFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFx0XHRcdFx0aWYgKCBvcHRpb24uc2VsZWN0ZWQgPVxuXHRcdFx0XHRcdFx0alF1ZXJ5LmluQXJyYXkoIGpRdWVyeS52YWxIb29rcy5vcHRpb24uZ2V0KCBvcHRpb24gKSwgdmFsdWVzICkgPiAtMVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0b3B0aW9uU2V0ID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGb3JjZSBicm93c2VycyB0byBiZWhhdmUgY29uc2lzdGVudGx5IHdoZW4gbm9uLW1hdGNoaW5nIHZhbHVlIGlzIHNldFxuXHRcdFx0XHRpZiAoICFvcHRpb25TZXQgKSB7XG5cdFx0XHRcdFx0ZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXJcbmpRdWVyeS5lYWNoKCBbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoIGVsZW0gKS52YWwoKSwgdmFsdWUgKSA+IC0xICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7XG5cdFx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBudWxsID8gXCJvblwiIDogZWxlbS52YWx1ZTtcblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIFJldHVybiBqUXVlcnkgZm9yIGF0dHJpYnV0ZXMtb25seSBpbmNsdXNpb25cblxuXG52YXIgcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87XG5cbmpRdWVyeS5leHRlbmQoIGpRdWVyeS5ldmVudCwge1xuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkge1xuXG5cdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdCggXCIuXCIgKSA6IFtdO1xuXG5cdFx0Y3VyID0gdG1wID0gZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQ7XG5cblx0XHQvLyBEb24ndCBkbyBldmVudHMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIGZvY3VzL2JsdXIgbW9ycGhzIHRvIGZvY3VzaW4vb3V0OyBlbnN1cmUgd2UncmUgbm90IGZpcmluZyB0aGVtIHJpZ2h0IG5vd1xuXHRcdGlmICggcmZvY3VzTW9ycGgudGVzdCggdHlwZSArIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIHR5cGUuaW5kZXhPZiggXCIuXCIgKSA+IC0xICkge1xuXG5cdFx0XHQvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG5cdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdCggXCIuXCIgKTtcblx0XHRcdHR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7XG5cdFx0XHRuYW1lc3BhY2VzLnNvcnQoKTtcblx0XHR9XG5cdFx0b250eXBlID0gdHlwZS5pbmRleE9mKCBcIjpcIiApIDwgMCAmJiBcIm9uXCIgKyB0eXBlO1xuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGEgalF1ZXJ5LkV2ZW50IG9iamVjdCwgT2JqZWN0LCBvciBqdXN0IGFuIGV2ZW50IHR5cGUgc3RyaW5nXG5cdFx0ZXZlbnQgPSBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRldmVudCA6XG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCB0eXBlLCB0eXBlb2YgZXZlbnQgPT09IFwib2JqZWN0XCIgJiYgZXZlbnQgKTtcblxuXHRcdC8vIFRyaWdnZXIgYml0bWFzazogJiAxIGZvciBuYXRpdmUgaGFuZGxlcnM7ICYgMiBmb3IgalF1ZXJ5IChhbHdheXMgdHJ1ZSlcblx0XHRldmVudC5pc1RyaWdnZXIgPSBvbmx5SGFuZGxlcnMgPyAyIDogMztcblx0XHRldmVudC5uYW1lc3BhY2UgPSBuYW1lc3BhY2VzLmpvaW4oIFwiLlwiICk7XG5cdFx0ZXZlbnQucm5hbWVzcGFjZSA9IGV2ZW50Lm5hbWVzcGFjZSA/XG5cdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKCBcIlxcXFwuKD86LipcXFxcLnwpXCIgKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRudWxsO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0WyBldmVudCBdIDpcblx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG5cdFx0Ly8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuXHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuXHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09ICggZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIGN1ciA9IGV2ZW50UGF0aFsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YVByaXYuZ2V0KCBjdXIsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gJiZcblx0XHRcdFx0ZGF0YVByaXYuZ2V0KCBjdXIsIFwiaGFuZGxlXCIgKTtcblx0XHRcdGlmICggaGFuZGxlICkge1xuXHRcdFx0XHRoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOYXRpdmUgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG5cdFx0XHRpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCAhc3BlY2lhbC5fZGVmYXVsdCB8fFxuXHRcdFx0XHRzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UgKSAmJlxuXHRcdFx0XHRhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cblx0XHRcdFx0Ly8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIG5hbWUgYXMgdGhlIGV2ZW50LlxuXHRcdFx0XHQvLyBEb24ndCBkbyBkZWZhdWx0IGFjdGlvbnMgb24gd2luZG93LCB0aGF0J3Mgd2hlcmUgZ2xvYmFsIHZhcmlhYmxlcyBiZSAoIzYxNzApXG5cdFx0XHRcdGlmICggb250eXBlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kXG5cdFx0XHRcdFx0dG1wID0gZWxlbVsgb250eXBlIF07XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuXHRcdFx0XHRcdGVsZW1bIHR5cGUgXSgpO1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gdG1wO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0Ly8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lXG5cdC8vIFVzZWQgb25seSBmb3IgYGZvY3VzKGluIHwgb3V0KWAgZXZlbnRzXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQgKSB7XG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlXG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBlLCBudWxsLCBlbGVtICk7XG5cdH1cblxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApO1xuXHRcdH0gKTtcblx0fSxcblx0dHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBlbGVtID0gdGhpc1sgMCBdO1xuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgZWxlbSwgdHJ1ZSApO1xuXHRcdH1cblx0fVxufSApO1xuXG5cbmpRdWVyeS5lYWNoKCAoIFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgXCIgK1xuXHRcIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIFwiICtcblx0XCJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIgKS5zcGxpdCggXCIgXCIgKSxcblx0ZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cblx0Ly8gSGFuZGxlIGV2ZW50IGJpbmRpbmdcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID9cblx0XHRcdHRoaXMub24oIG5hbWUsIG51bGwsIGRhdGEsIGZuICkgOlxuXHRcdFx0dGhpcy50cmlnZ2VyKCBuYW1lICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0aG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkge1xuXHRcdHJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApO1xuXHR9XG59ICk7XG5cblxuXG5cbnN1cHBvcnQuZm9jdXNpbiA9IFwib25mb2N1c2luXCIgaW4gd2luZG93O1xuXG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3hcbi8vIEZpcmVmb3ggZG9lc24ndCBoYXZlIGZvY3VzKGluIHwgb3V0KSBldmVudHNcbi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njg3Nzg3XG4vL1xuLy8gU3VwcG9ydDogQ2hyb21lLCBTYWZhcmlcbi8vIGZvY3VzKGluIHwgb3V0KSBldmVudHMgZmlyZSBhZnRlciBmb2N1cyAmIGJsdXIgZXZlbnRzLFxuLy8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyXG4vLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDk4NTdcbmlmICggIXN1cHBvcnQuZm9jdXNpbiApIHtcblx0alF1ZXJ5LmVhY2goIHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblxuXHRcdC8vIEF0dGFjaCBhIHNpbmdsZSBjYXB0dXJpbmcgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQgd2hpbGUgc29tZW9uZSB3YW50cyBmb2N1c2luL2ZvY3Vzb3V0XG5cdFx0dmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApICk7XG5cdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7XG5cdFx0XHR9LFxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgYXR0YWNoZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH0gKTtcbn1cbnZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcblxudmFyIG5vbmNlID0galF1ZXJ5Lm5vdygpO1xuXG52YXIgcnF1ZXJ5ID0gKCAvXFw/LyApO1xuXG5cblxuLy8gU3VwcG9ydDogQW5kcm9pZCAyLjNcbi8vIFdvcmthcm91bmQgZmFpbHVyZSB0byBzdHJpbmctY2FzdCBudWxsIGlucHV0XG5qUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdHJldHVybiBKU09OLnBhcnNlKCBkYXRhICsgXCJcIiApO1xufTtcblxuXG4vLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nXG5qUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0dmFyIHhtbDtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOVxuXHR0cnkge1xuXHRcdHhtbCA9ICggbmV3IHdpbmRvdy5ET01QYXJzZXIoKSApLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyaGFzaCA9IC8jLiokLyxcblx0cnRzID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cblx0Ly8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uXG5cdHJsb2NhbFByb3RvY29sID0gL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sXG5cdHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuXHRycHJvdG9jb2wgPSAvXlxcL1xcLy8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBBbmNob3IgdGFnIGZvciBwYXJzaW5nIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0b3JpZ2luQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblx0b3JpZ2luQW5jaG9yLmhyZWYgPSBsb2NhdGlvbi5ocmVmO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkge1xuXG5cdFx0XHQvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG5cdFx0XHR3aGlsZSAoICggZGF0YVR5cGUgPSBkYXRhVHlwZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0Ly8gUHJlcGVuZCBpZiByZXF1ZXN0ZWRcblx0XHRcdFx0aWYgKCBkYXRhVHlwZVsgMCBdID09PSBcIitcIiApIHtcblx0XHRcdFx0XHRkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgXCIqXCI7XG5cdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkucHVzaCggZnVuYyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG4vLyBCYXNlIGluc3BlY3Rpb24gZnVuY3Rpb24gZm9yIHByZWZpbHRlcnMgYW5kIHRyYW5zcG9ydHNcbmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7XG5cblx0dmFyIGluc3BlY3RlZCA9IHt9LFxuXHRcdHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXG5cdGZ1bmN0aW9uIGluc3BlY3QoIGRhdGFUeXBlICkge1xuXHRcdHZhciBzZWxlY3RlZDtcblx0XHRpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlO1xuXHRcdGpRdWVyeS5lYWNoKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10sIGZ1bmN0aW9uKCBfLCBwcmVmaWx0ZXJPckZhY3RvcnkgKSB7XG5cdFx0XHR2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApO1xuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVPclRyYW5zcG9ydCA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQhc2Vla2luZ1RyYW5zcG9ydCAmJiAhaW5zcGVjdGVkWyBkYXRhVHlwZU9yVHJhbnNwb3J0IF0gKSB7XG5cblx0XHRcdFx0b3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRpbnNwZWN0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7XG5cdFx0XHRcdHJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdFx0cmV0dXJuIHNlbGVjdGVkO1xuXHR9XG5cblx0cmV0dXJuIGluc3BlY3QoIG9wdGlvbnMuZGF0YVR5cGVzWyAwIF0gKSB8fCAhaW5zcGVjdGVkWyBcIipcIiBdICYmIGluc3BlY3QoIFwiKlwiICk7XG59XG5cbi8vIEEgc3BlY2lhbCBleHRlbmQgZm9yIGFqYXggb3B0aW9uc1xuLy8gdGhhdCB0YWtlcyBcImZsYXRcIiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZClcbi8vIEZpeGVzICM5ODg3XG5mdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHtcblx0dmFyIGtleSwgZGVlcCxcblx0XHRmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307XG5cblx0Zm9yICgga2V5IGluIHNyYyApIHtcblx0XHRpZiAoIHNyY1sga2V5IF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdCggZmxhdE9wdGlvbnNbIGtleSBdID8gdGFyZ2V0IDogKCBkZWVwIHx8ICggZGVlcCA9IHt9ICkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07XG5cdFx0fVxuXHR9XG5cdGlmICggZGVlcCApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcblx0fVxuXG5cdHJldHVybiB0YXJnZXQ7XG59XG5cbi8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcbiAqIC0gZmluZHMgdGhlIHJpZ2h0IGRhdGFUeXBlIChtZWRpYXRlcyBiZXR3ZWVuIGNvbnRlbnQtdHlwZSBhbmQgZXhwZWN0ZWQgZGF0YVR5cGUpXG4gKiAtIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApIHtcblxuXHR2YXIgY3QsIHR5cGUsIGZpbmFsRGF0YVR5cGUsIGZpcnN0RGF0YVR5cGUsXG5cdFx0Y29udGVudHMgPSBzLmNvbnRlbnRzLFxuXHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzO1xuXG5cdC8vIFJlbW92ZSBhdXRvIGRhdGFUeXBlIGFuZCBnZXQgY29udGVudC10eXBlIGluIHRoZSBwcm9jZXNzXG5cdHdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09IFwiKlwiICkge1xuXHRcdGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcdGlmICggY3QgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJDb250ZW50LVR5cGVcIiApO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuXHRcdGZvciAoIHR5cGUgaW4gcmVzcG9uc2VzICkge1xuXHRcdFx0aWYgKCAhZGF0YVR5cGVzWyAwIF0gfHwgcy5jb252ZXJ0ZXJzWyB0eXBlICsgXCIgXCIgKyBkYXRhVHlwZXNbIDAgXSBdICkge1xuXHRcdFx0XHRmaW5hbERhdGFUeXBlID0gdHlwZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICFmaXJzdERhdGFUeXBlICkge1xuXHRcdFx0XHRmaXJzdERhdGFUeXBlID0gdHlwZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblxuXHRcdC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpO1xuXG5cdC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuXHRpZiAoIGRhdGFUeXBlc1sgMSBdICkge1xuXHRcdGZvciAoIGNvbnYgaW4gcy5jb252ZXJ0ZXJzICkge1xuXHRcdFx0Y29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcblx0XHR9XG5cdH1cblxuXHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0Ly8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcblx0d2hpbGUgKCBjdXJyZW50ICkge1xuXG5cdFx0aWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG5cdFx0XHRqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSB0aGUgZGF0YUZpbHRlciBpZiBwcm92aWRlZFxuXHRcdGlmICggIXByZXYgJiYgaXNTdWNjZXNzICYmIHMuZGF0YUZpbHRlciApIHtcblx0XHRcdHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuXHRcdH1cblxuXHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuXHRcdGlmICggY3VycmVudCApIHtcblxuXHRcdC8vIFRoZXJlJ3Mgb25seSB3b3JrIHRvIGRvIGlmIGN1cnJlbnQgZGF0YVR5cGUgaXMgbm9uLWF1dG9cblx0XHRcdGlmICggY3VycmVudCA9PT0gXCIqXCIgKSB7XG5cblx0XHRcdFx0Y3VycmVudCA9IHByZXY7XG5cblx0XHRcdC8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnRcblx0XHRcdH0gZWxzZSBpZiAoIHByZXYgIT09IFwiKlwiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU2VlayBhIGRpcmVjdCBjb252ZXJ0ZXJcblx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIGN1cnJlbnQgXSB8fCBjb252ZXJ0ZXJzWyBcIiogXCIgKyBjdXJyZW50IF07XG5cblx0XHRcdFx0Ly8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXJcblx0XHRcdFx0aWYgKCAhY29udiApIHtcblx0XHRcdFx0XHRmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnRcblx0XHRcdFx0XHRcdHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIHRtcFsgMCBdIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjb252ID09PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggY29udmVydGVyc1sgY29udjIgXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSB0bXBbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuXHRcdFx0XHRpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHQvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG5cdFx0XHRcdFx0aWYgKCBjb252ICYmIHMudGhyb3dzICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogXCJwYXJzZXJlcnJvclwiLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudFxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllc1xuXHRhY3RpdmU6IDAsXG5cblx0Ly8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdFxuXHRsYXN0TW9kaWZpZWQ6IHt9LFxuXHRldGFnOiB7fSxcblxuXHRhamF4U2V0dGluZ3M6IHtcblx0XHR1cmw6IGxvY2F0aW9uLmhyZWYsXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBsb2NhdGlvbi5wcm90b2NvbCApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblx0XHQvKlxuXHRcdHRpbWVvdXQ6IDAsXG5cdFx0ZGF0YTogbnVsbCxcblx0XHRkYXRhVHlwZTogbnVsbCxcblx0XHR1c2VybmFtZTogbnVsbCxcblx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRjYWNoZTogbnVsbCxcblx0XHR0aHJvd3M6IGZhbHNlLFxuXHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRoZWFkZXJzOiB7fSxcblx0XHQqL1xuXG5cdFx0YWNjZXB0czoge1xuXHRcdFx0XCIqXCI6IGFsbFR5cGVzLFxuXHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRodG1sOiBcInRleHQvaHRtbFwiLFxuXHRcdFx0eG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixcblx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHR9LFxuXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHhtbDogL1xcYnhtbFxcYi8sXG5cdFx0XHRodG1sOiAvXFxiaHRtbC8sXG5cdFx0XHRqc29uOiAvXFxianNvblxcYi9cblx0XHR9LFxuXG5cdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdHhtbDogXCJyZXNwb25zZVhNTFwiLFxuXHRcdFx0dGV4dDogXCJyZXNwb25zZVRleHRcIixcblx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHR9LFxuXG5cdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0Ly8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsIFwiKlwiKSBhbmQgZGVzdGluYXRpb24gdHlwZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuXHRcdGNvbnZlcnRlcnM6IHtcblxuXHRcdFx0Ly8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0XG5cdFx0XHRcIiogdGV4dFwiOiBTdHJpbmcsXG5cblx0XHRcdC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuXHRcdFx0XCJ0ZXh0IGh0bWxcIjogdHJ1ZSxcblxuXHRcdFx0Ly8gRXZhbHVhdGUgdGV4dCBhcyBhIGpzb24gZXhwcmVzc2lvblxuXHRcdFx0XCJ0ZXh0IGpzb25cIjogalF1ZXJ5LnBhcnNlSlNPTixcblxuXHRcdFx0Ly8gUGFyc2UgdGV4dCBhcyB4bWxcblx0XHRcdFwidGV4dCB4bWxcIjogalF1ZXJ5LnBhcnNlWE1MXG5cdFx0fSxcblxuXHRcdC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG5cdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdC8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlXG5cdFx0Ly8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG5cdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdHVybDogdHJ1ZSxcblx0XHRcdGNvbnRleHQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0Ly8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuXHQvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuXHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdHJldHVybiBzZXR0aW5ncyA/XG5cblx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6XG5cblx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuXHR9LFxuXG5cdGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuXHRhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuXHQvLyBNYWluIG1ldGhvZFxuXHRhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmVcblx0XHRpZiAoIHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0dXJsID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHR2YXIgdHJhbnNwb3J0LFxuXG5cdFx0XHQvLyBVUkwgd2l0aG91dCBhbnRpLWNhY2hlIHBhcmFtXG5cdFx0XHRjYWNoZVVSTCxcblxuXHRcdFx0Ly8gUmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nLFxuXHRcdFx0cmVzcG9uc2VIZWFkZXJzLFxuXG5cdFx0XHQvLyB0aW1lb3V0IGhhbmRsZVxuXHRcdFx0dGltZW91dFRpbWVyLFxuXG5cdFx0XHQvLyBVcmwgY2xlYW51cCB2YXJcblx0XHRcdHVybEFuY2hvcixcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkXG5cdFx0XHRmaXJlR2xvYmFscyxcblxuXHRcdFx0Ly8gTG9vcCB2YXJpYWJsZVxuXHRcdFx0aSxcblxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cblx0XHRcdC8vIENhbGxiYWNrcyBjb250ZXh0XG5cdFx0XHRjYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcyxcblxuXHRcdFx0Ly8gQ29udGV4dCBmb3IgZ2xvYmFsIGV2ZW50cyBpcyBjYWxsYmFja0NvbnRleHQgaWYgaXQgaXMgYSBET00gbm9kZSBvciBqUXVlcnkgY29sbGVjdGlvblxuXHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0ID0gcy5jb250ZXh0ICYmXG5cdFx0XHRcdCggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LFxuXG5cdFx0XHQvLyBEZWZlcnJlZHNcblx0XHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkID0galF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRzdGF0dXNDb2RlID0gcy5zdGF0dXNDb2RlIHx8IHt9LFxuXG5cdFx0XHQvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKVxuXHRcdFx0cmVxdWVzdEhlYWRlcnMgPSB7fSxcblx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXMgPSB7fSxcblxuXHRcdFx0Ly8gVGhlIGpxWEhSIHN0YXRlXG5cdFx0XHRzdGF0ZSA9IDAsXG5cblx0XHRcdC8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZVxuXHRcdFx0c3RyQWJvcnQgPSBcImNhbmNlbGVkXCIsXG5cblx0XHRcdC8vIEZha2UgeGhyXG5cdFx0XHRqcVhIUiA9IHtcblx0XHRcdFx0cmVhZHlTdGF0ZTogMCxcblxuXHRcdFx0XHQvLyBCdWlsZHMgaGVhZGVycyBoYXNodGFibGUgaWYgbmVlZGVkXG5cdFx0XHRcdGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0XHRcdHZhciBtYXRjaDtcblx0XHRcdFx0XHRpZiAoIHN0YXRlID09PSAyICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhcmVzcG9uc2VIZWFkZXJzICkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAoIG1hdGNoID0gcmhlYWRlcnMuZXhlYyggcmVzcG9uc2VIZWFkZXJzU3RyaW5nICkgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSBdID0gbWF0Y2hbIDIgXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0bWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBtYXRjaCA9PSBudWxsID8gbnVsbCA6IG1hdGNoO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFJhdyBzdHJpbmdcblx0XHRcdFx0Z2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gc3RhdGUgPT09IDIgPyByZXNwb25zZUhlYWRlcnNTdHJpbmcgOiBudWxsO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhY2hlcyB0aGUgaGVhZGVyXG5cdFx0XHRcdHNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdFx0XHR2YXIgbG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0aWYgKCAhc3RhdGUgKSB7XG5cdFx0XHRcdFx0XHRuYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gfHwgbmFtZTtcblx0XHRcdFx0XHRcdHJlcXVlc3RIZWFkZXJzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGVzIHJlc3BvbnNlIGNvbnRlbnQtdHlwZSBoZWFkZXJcblx0XHRcdFx0b3ZlcnJpZGVNaW1lVHlwZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0aWYgKCAhc3RhdGUgKSB7XG5cdFx0XHRcdFx0XHRzLm1pbWVUeXBlID0gdHlwZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdFx0c3RhdHVzQ29kZTogZnVuY3Rpb24oIG1hcCApIHtcblx0XHRcdFx0XHR2YXIgY29kZTtcblx0XHRcdFx0XHRpZiAoIG1hcCApIHtcblx0XHRcdFx0XHRcdGlmICggc3RhdGUgPCAyICkge1xuXHRcdFx0XHRcdFx0XHRmb3IgKCBjb2RlIGluIG1hcCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2sgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXNcblx0XHRcdFx0XHRcdFx0XHRzdGF0dXNDb2RlWyBjb2RlIF0gPSBbIHN0YXR1c0NvZGVbIGNvZGUgXSwgbWFwWyBjb2RlIF0gXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7XG5cdFx0anFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7XG5cdFx0anFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgbG9jYXRpb24uaHJlZiApICsgXCJcIiApLnJlcGxhY2UoIHJoYXNoLCBcIlwiIClcblx0XHRcdC5yZXBsYWNlKCBycHJvdG9jb2wsIGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICk7XG5cblx0XHQvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDRcblx0XHRzLnR5cGUgPSBvcHRpb25zLm1ldGhvZCB8fCBvcHRpb25zLnR5cGUgfHwgcy5tZXRob2QgfHwgcy50eXBlO1xuXG5cdFx0Ly8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdFxuXHRcdHMuZGF0YVR5cGVzID0galF1ZXJ5LnRyaW0oIHMuZGF0YVR5cGUgfHwgXCIqXCIgKS50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblxuXHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB0aGUgb3JpZ2luIGRvZXNuJ3QgbWF0Y2ggdGhlIGN1cnJlbnQgb3JpZ2luLlxuXHRcdGlmICggcy5jcm9zc0RvbWFpbiA9PSBudWxsICkge1xuXHRcdFx0dXJsQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4LTExK1xuXHRcdFx0Ly8gSUUgdGhyb3dzIGV4Y2VwdGlvbiBpZiB1cmwgaXMgbWFsZm9ybWVkLCBlLmcuIGh0dHA6Ly9leGFtcGxlLmNvbTo4MHgvXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHMudXJsO1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFOC0xMStcblx0XHRcdFx0Ly8gQW5jaG9yJ3MgaG9zdCBwcm9wZXJ0eSBpc24ndCBjb3JyZWN0bHkgc2V0IHdoZW4gcy51cmwgaXMgcmVsYXRpdmVcblx0XHRcdFx0dXJsQW5jaG9yLmhyZWYgPSB1cmxBbmNob3IuaHJlZjtcblx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IG9yaWdpbkFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIG9yaWdpbkFuY2hvci5ob3N0ICE9PVxuXHRcdFx0XHRcdHVybEFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIHVybEFuY2hvci5ob3N0O1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYW4gZXJyb3IgcGFyc2luZyB0aGUgVVJMLCBhc3N1bWUgaXQgaXMgY3Jvc3NEb21haW4sXG5cdFx0XHRcdC8vIGl0IGNhbiBiZSByZWplY3RlZCBieSB0aGUgdHJhbnNwb3J0IGlmIGl0IGlzIGludmFsaWRcblx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBkYXRhIGlmIG5vdCBhbHJlYWR5IGEgc3RyaW5nXG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJiB0eXBlb2Ygcy5kYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cy5kYXRhID0galF1ZXJ5LnBhcmFtKCBzLmRhdGEsIHMudHJhZGl0aW9uYWwgKTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSBwcmVmaWx0ZXJzXG5cdFx0aW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhIHByZWZpbHRlciwgc3RvcCB0aGVyZVxuXHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0fVxuXG5cdFx0Ly8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG9cblx0XHQvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KVxuXHRcdGZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0c1xuXHRcdGlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0YXJ0XCIgKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHRjYWNoZVVSTCA9IHMudXJsO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuXG5cdFx0XHRcdC8vICM5NjgyOiByZW1vdmUgZGF0YSBzbyB0aGF0IGl0J3Mgbm90IHVzZWQgaW4gYW4gZXZlbnR1YWwgcmV0cnlcblx0XHRcdFx0ZGVsZXRlIHMuZGF0YTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGFudGktY2FjaGUgaW4gdXJsIGlmIG5lZWRlZFxuXHRcdFx0aWYgKCBzLmNhY2hlID09PSBmYWxzZSApIHtcblx0XHRcdFx0cy51cmwgPSBydHMudGVzdCggY2FjaGVVUkwgKSA/XG5cblx0XHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IGEgJ18nIHBhcmFtZXRlciwgc2V0IGl0cyB2YWx1ZVxuXHRcdFx0XHRcdGNhY2hlVVJMLnJlcGxhY2UoIHJ0cywgXCIkMV89XCIgKyBub25jZSsrICkgOlxuXG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFkZCBvbmUgdG8gdGhlIGVuZFxuXHRcdFx0XHRcdGNhY2hlVVJMICsgKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIFwiXz1cIiArIG5vbmNlKys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdGlmICggalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Nb2RpZmllZC1TaW5jZVwiLCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU5vbmUtTWF0Y2hcIiwgalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIGNvcnJlY3QgaGVhZGVyLCBpZiBkYXRhIGlzIGJlaW5nIHNlbnRcblx0XHRpZiAoIHMuZGF0YSAmJiBzLmhhc0NvbnRlbnQgJiYgcy5jb250ZW50VHlwZSAhPT0gZmFsc2UgfHwgb3B0aW9ucy5jb250ZW50VHlwZSApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIsIHMuY29udGVudFR5cGUgKTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIEFjY2VwdHMgaGVhZGVyIGZvciB0aGUgc2VydmVyLCBkZXBlbmRpbmcgb24gdGhlIGRhdGFUeXBlXG5cdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlcihcblx0XHRcdFwiQWNjZXB0XCIsXG5cdFx0XHRzLmRhdGFUeXBlc1sgMCBdICYmIHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdID9cblx0XHRcdFx0cy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gK1xuXHRcdFx0XHRcdCggcy5kYXRhVHlwZXNbIDAgXSAhPT0gXCIqXCIgPyBcIiwgXCIgKyBhbGxUeXBlcyArIFwiOyBxPTAuMDFcIiA6IFwiXCIgKSA6XG5cdFx0XHRcdHMuYWNjZXB0c1sgXCIqXCIgXVxuXHRcdCk7XG5cblx0XHQvLyBDaGVjayBmb3IgaGVhZGVycyBvcHRpb25cblx0XHRmb3IgKCBpIGluIHMuaGVhZGVycyApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIGksIHMuaGVhZGVyc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsb3cgY3VzdG9tIGhlYWRlcnMvbWltZXR5cGVzIGFuZCBlYXJseSBhYm9ydFxuXHRcdGlmICggcy5iZWZvcmVTZW5kICYmXG5cdFx0XHQoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG5cblx0XHRcdC8vIEFib3J0IGlmIG5vdCBkb25lIGFscmVhZHkgYW5kIHJldHVyblxuXHRcdFx0cmV0dXJuIGpxWEhSLmFib3J0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gQWJvcnRpbmcgaXMgbm8gbG9uZ2VyIGEgY2FuY2VsbGF0aW9uXG5cdFx0c3RyQWJvcnQgPSBcImFib3J0XCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrcyBvbiBkZWZlcnJlZHNcblx0XHRmb3IgKCBpIGluIHsgc3VjY2VzczogMSwgZXJyb3I6IDEsIGNvbXBsZXRlOiAxIH0gKSB7XG5cdFx0XHRqcVhIUlsgaSBdKCBzWyBpIF0gKTtcblx0XHR9XG5cblx0XHQvLyBHZXQgdHJhbnNwb3J0XG5cdFx0dHJhbnNwb3J0ID0gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiBubyB0cmFuc3BvcnQsIHdlIGF1dG8tYWJvcnRcblx0XHRpZiAoICF0cmFuc3BvcnQgKSB7XG5cdFx0XHRkb25lKCAtMSwgXCJObyBUcmFuc3BvcnRcIiApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gMTtcblxuXHRcdFx0Ly8gU2VuZCBnbG9iYWwgZXZlbnRcblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhTZW5kXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhamF4U2VuZCwgc3RvcCB0aGVyZVxuXHRcdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUaW1lb3V0XG5cdFx0XHRpZiAoIHMuYXN5bmMgJiYgcy50aW1lb3V0ID4gMCApIHtcblx0XHRcdFx0dGltZW91dFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KCBcInRpbWVvdXRcIiApO1xuXHRcdFx0XHR9LCBzLnRpbWVvdXQgKTtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0c3RhdGUgPSAxO1xuXHRcdFx0XHR0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdC8vIFByb3BhZ2F0ZSBleGNlcHRpb24gYXMgZXJyb3IgaWYgbm90IGRvbmVcblx0XHRcdFx0aWYgKCBzdGF0ZSA8IDIgKSB7XG5cdFx0XHRcdFx0ZG9uZSggLTEsIGUgKTtcblxuXHRcdFx0XHQvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2Vcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gQ2FsbGVkIG9uY2Vcblx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG5cdFx0XHRzdGF0ZSA9IDI7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dFRpbWVyICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlcmVmZXJlbmNlIHRyYW5zcG9ydCBmb3IgZWFybHkgZ2FyYmFnZSBjb2xsZWN0aW9uXG5cdFx0XHQvLyAobm8gbWF0dGVyIGhvdyBsb25nIHRoZSBqcVhIUiBvYmplY3Qgd2lsbCBiZSB1c2VkKVxuXHRcdFx0dHJhbnNwb3J0ID0gdW5kZWZpbmVkO1xuXG5cdFx0XHQvLyBDYWNoZSByZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcgPSBoZWFkZXJzIHx8IFwiXCI7XG5cblx0XHRcdC8vIFNldCByZWFkeVN0YXRlXG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gc3RhdHVzID4gMCA/IDQgOiAwO1xuXG5cdFx0XHQvLyBEZXRlcm1pbmUgaWYgc3VjY2Vzc2Z1bFxuXHRcdFx0aXNTdWNjZXNzID0gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cblx0XHRcdC8vIEdldCByZXNwb25zZSBkYXRhXG5cdFx0XHRpZiAoIHJlc3BvbnNlcyApIHtcblx0XHRcdFx0cmVzcG9uc2UgPSBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgbm8gbWF0dGVyIHdoYXQgKHRoYXQgd2F5IHJlc3BvbnNlWFhYIGZpZWxkcyBhcmUgYWx3YXlzIHNldClcblx0XHRcdHJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7XG5cblx0XHRcdC8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblxuXHRcdFx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcIkxhc3QtTW9kaWZpZWRcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiZXRhZ1wiICk7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgbm8gY29udGVudFxuXHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gXCJIRUFEXCIgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm9jb250ZW50XCI7XG5cblx0XHRcdFx0Ly8gaWYgbm90IG1vZGlmaWVkXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMzA0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vdG1vZGlmaWVkXCI7XG5cblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBkYXRhLCBsZXQncyBjb252ZXJ0IGl0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlO1xuXHRcdFx0XHRcdHN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdGVycm9yID0gcmVzcG9uc2UuZXJyb3I7XG5cdFx0XHRcdFx0aXNTdWNjZXNzID0gIWVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0IGFuZCBub3JtYWxpemUgZm9yIG5vbi1hYm9ydHNcblx0XHRcdFx0ZXJyb3IgPSBzdGF0dXNUZXh0O1xuXHRcdFx0XHRpZiAoIHN0YXR1cyB8fCAhc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJlcnJvclwiO1xuXHRcdFx0XHRcdGlmICggc3RhdHVzIDwgMCApIHtcblx0XHRcdFx0XHRcdHN0YXR1cyA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0XG5cdFx0XHRqcVhIUi5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0XHRqcVhIUi5zdGF0dXNUZXh0ID0gKCBuYXRpdmVTdGF0dXNUZXh0IHx8IHN0YXR1c1RleHQgKSArIFwiXCI7XG5cblx0XHRcdC8vIFN1Y2Nlc3MvRXJyb3Jcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCwgZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0anFYSFIuc3RhdHVzQ29kZSggc3RhdHVzQ29kZSApO1xuXHRcdFx0c3RhdHVzQ29kZSA9IHVuZGVmaW5lZDtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsXG5cdFx0XHRcdFx0WyBqcVhIUiwgcywgaXNTdWNjZXNzID8gc3VjY2VzcyA6IGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29tcGxldGVcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhDb21wbGV0ZVwiLCBbIGpxWEhSLCBzIF0gKTtcblxuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggXCJhamF4U3RvcFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ganFYSFI7XG5cdH0sXG5cblx0Z2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssIFwianNvblwiICk7XG5cdH0sXG5cblx0Z2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCB1bmRlZmluZWQsIGNhbGxiYWNrLCBcInNjcmlwdFwiICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXG5cdFx0Ly8gU2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWRcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcblx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpXG5cdFx0cmV0dXJuIGpRdWVyeS5hamF4KCBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7XG5cdH07XG59ICk7XG5cblxualF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHtcblx0cmV0dXJuIGpRdWVyeS5hamF4KCB7XG5cdFx0dXJsOiB1cmwsXG5cblx0XHQvLyBNYWtlIHRoaXMgZXhwbGljaXQsIHNpbmNlIHVzZXIgY2FuIG92ZXJyaWRlIHRoaXMgdGhyb3VnaCBhamF4U2V0dXAgKCMxMTI2NClcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdGFzeW5jOiBmYWxzZSxcblx0XHRnbG9iYWw6IGZhbHNlLFxuXHRcdFwidGhyb3dzXCI6IHRydWVcblx0fSApO1xufTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGh0bWwuY2FsbCggdGhpcywgaSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cblx0XHRcdC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG5cdFx0XHR3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTtcblxuXHRcdFx0aWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0d3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHR3cmFwLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gdGhpcztcblxuXHRcdFx0XHR3aGlsZSAoIGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZWxlbTtcblx0XHRcdH0gKS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwSW5uZXIoIGh0bWwuY2FsbCggdGhpcywgaSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IGpRdWVyeSggdGhpcyApLFxuXHRcdFx0XHRjb250ZW50cyA9IHNlbGYuY29udGVudHMoKTtcblxuXHRcdFx0aWYgKCBjb250ZW50cy5sZW5ndGggKSB7XG5cdFx0XHRcdGNvbnRlbnRzLndyYXBBbGwoIGh0bWwgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2VsZi5hcHBlbmQoIGh0bWwgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0d3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBpc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdHVud3JhcDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiYm9keVwiICkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHRcdH1cblx0XHR9ICkuZW5kKCk7XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuZXhwci5maWx0ZXJzLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSggZWxlbSApO1xufTtcbmpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdC8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyXG5cdC8vIE9wZXJhIHJlcG9ydHMgb2Zmc2V0V2lkdGhzIGFuZCBvZmZzZXRIZWlnaHRzIGxlc3MgdGhhbiB6ZXJvIG9uIHNvbWUgZWxlbWVudHNcblx0Ly8gVXNlIE9SIGluc3RlYWQgb2YgQU5EIGFzIHRoZSBlbGVtZW50IGlzIG5vdCB2aXNpYmxlIGlmIGVpdGhlciBpcyB0cnVlXG5cdC8vIFNlZSB0aWNrZXRzICMxMDQwNiBhbmQgIzEzMTMyXG5cdHJldHVybiBlbGVtLm9mZnNldFdpZHRoID4gMCB8fCBlbGVtLm9mZnNldEhlaWdodCA+IDAgfHwgZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCA+IDA7XG59O1xuXG5cblxuXG52YXIgcjIwID0gLyUyMC9nLFxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLlxuXHRcdGpRdWVyeS5lYWNoKCBvYmosIGZ1bmN0aW9uKCBpLCB2ICkge1xuXHRcdFx0aWYgKCB0cmFkaXRpb25hbCB8fCByYnJhY2tldC50ZXN0KCBwcmVmaXggKSApIHtcblxuXHRcdFx0XHQvLyBUcmVhdCBlYWNoIGFycmF5IGl0ZW0gYXMgYSBzY2FsYXIuXG5cdFx0XHRcdGFkZCggcHJlZml4LCB2ICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKFxuXHRcdFx0XHRcdHByZWZpeCArIFwiW1wiICsgKCB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9IG51bGwgPyBpIDogXCJcIiApICsgXCJdXCIsXG5cdFx0XHRcdFx0dixcblx0XHRcdFx0XHR0cmFkaXRpb25hbCxcblx0XHRcdFx0XHRhZGRcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9ICk7XG5cblx0fSBlbHNlIGlmICggIXRyYWRpdGlvbmFsICYmIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS5cblx0XHRhZGQoIHByZWZpeCwgb2JqICk7XG5cdH1cbn1cblxuLy8gU2VyaWFsaXplIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMgb3IgYSBzZXQgb2Zcbi8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xualF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24oIGEsIHRyYWRpdGlvbmFsICkge1xuXHR2YXIgcHJlZml4LFxuXHRcdHMgPSBbXSxcblx0XHRhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblxuXHRcdFx0Ly8gSWYgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaW52b2tlIGl0IGFuZCByZXR1cm4gaXRzIHZhbHVlXG5cdFx0XHR2YWx1ZSA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApID8gdmFsdWUoKSA6ICggdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSApO1xuXHRcdFx0c1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgKTtcblx0XHR9O1xuXG5cdC8vIFNldCB0cmFkaXRpb25hbCB0byB0cnVlIGZvciBqUXVlcnkgPD0gMS4zLjIgYmVoYXZpb3IuXG5cdGlmICggdHJhZGl0aW9uYWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHR0cmFkaXRpb25hbCA9IGpRdWVyeS5hamF4U2V0dGluZ3MgJiYgalF1ZXJ5LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDtcblx0fVxuXG5cdC8vIElmIGFuIGFycmF5IHdhcyBwYXNzZWQgaW4sIGFzc3VtZSB0aGF0IGl0IGlzIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMuXG5cdGlmICggalF1ZXJ5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0gKTtcblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0c2VyaWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTtcblx0fSxcblx0c2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIENhbiBhZGQgcHJvcEhvb2sgZm9yIFwiZWxlbWVudHNcIiB0byBmaWx0ZXIgb3IgYWRkIGZvcm0gZWxlbWVudHNcblx0XHRcdHZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCBcImVsZW1lbnRzXCIgKTtcblx0XHRcdHJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzO1xuXHRcdH0gKVxuXHRcdC5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9IClcblx0XHQubWFwKCBmdW5jdGlvbiggaSwgZWxlbSApIHtcblx0XHRcdHZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTtcblxuXHRcdFx0cmV0dXJuIHZhbCA9PSBudWxsID9cblx0XHRcdFx0bnVsbCA6XG5cdFx0XHRcdGpRdWVyeS5pc0FycmF5KCB2YWwgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHRcdFx0XHR9ICkgOlxuXHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9ICkuZ2V0KCk7XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuYWpheFNldHRpbmdzLnhociA9IGZ1bmN0aW9uKCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2ggKCBlICkge31cbn07XG5cbnZhciB4aHJTdWNjZXNzU3RhdHVzID0ge1xuXG5cdFx0Ly8gRmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHQvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcblx0XHQxMjIzOiAyMDRcblx0fSxcblx0eGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0dmFyIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrO1xuXG5cdC8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3Rcblx0aWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdHhociA9IG9wdGlvbnMueGhyKCk7XG5cblx0XHRcdFx0eGhyLm9wZW4oXG5cdFx0XHRcdFx0b3B0aW9ucy50eXBlLFxuXHRcdFx0XHRcdG9wdGlvbnMudXJsLFxuXHRcdFx0XHRcdG9wdGlvbnMuYXN5bmMsXG5cdFx0XHRcdFx0b3B0aW9ucy51c2VybmFtZSxcblx0XHRcdFx0XHRvcHRpb25zLnBhc3N3b3JkXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdGZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0XHR4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG5cdFx0XHRcdFx0eGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyXG5cdFx0XHRcdC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcblx0XHRcdFx0Ly8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cblx0XHRcdFx0Ly8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApXG5cdFx0XHRcdC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuXHRcdFx0XHRpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgaGVhZGVyc1xuXHRcdFx0XHRmb3IgKCBpIGluIGhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IGVycm9yQ2FsbGJhY2sgPSB4aHIub25sb2FkID1cblx0XHRcdFx0XHRcdFx0XHR4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0geGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlID09PSBcImFib3J0XCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0eGhyLmFib3J0KCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIHR5cGUgPT09IFwiZXJyb3JcIiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdFx0XHRcdFx0XHRcdC8vIE9uIGEgbWFudWFsIG5hdGl2ZSBhYm9ydCwgSUU5IHRocm93c1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVycm9ycyBvbiBhbnkgcHJvcGVydHkgYWNjZXNzIHRoYXQgaXMgbm90IHJlYWR5U3RhdGVcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGVvZiB4aHIuc3RhdHVzICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIDAsIFwiZXJyb3JcIiApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0LFxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSUU5IGhhcyBubyBYSFIyIGJ1dCB0aHJvd3Mgb24gYmluYXJ5ICh0cmFjLTExNDI2KVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yIFhIUjIgbm9uLXRleHQsIGxldCB0aGUgY2FsbGVyIGhhbmRsZSBpdCAoZ2gtMjQ5OClcblx0XHRcdFx0XHRcdFx0XHRcdCggeGhyLnJlc3BvbnNlVHlwZSB8fCBcInRleHRcIiApICE9PSBcInRleHRcIiAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ICE9PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0eyBiaW5hcnk6IHhoci5yZXNwb25zZSB9IDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0eyB0ZXh0OiB4aHIucmVzcG9uc2VUZXh0IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gdG8gZXZlbnRzXG5cdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHRlcnJvckNhbGxiYWNrID0geGhyLm9uZXJyb3IgPSBjYWxsYmFjayggXCJlcnJvclwiICk7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0XHRcdC8vIFVzZSBvbnJlYWR5c3RhdGVjaGFuZ2UgdG8gcmVwbGFjZSBvbmFib3J0XG5cdFx0XHRcdC8vIHRvIGhhbmRsZSB1bmNhdWdodCBhYm9ydHNcblx0XHRcdFx0aWYgKCB4aHIub25hYm9ydCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHhoci5vbmFib3J0ID0gZXJyb3JDYWxsYmFjaztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdC8vIENoZWNrIHJlYWR5U3RhdGUgYmVmb3JlIHRpbWVvdXQgYXMgaXQgY2hhbmdlc1xuXHRcdFx0XHRcdFx0aWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gNCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBbGxvdyBvbmVycm9yIHRvIGJlIGNhbGxlZCBmaXJzdCxcblx0XHRcdFx0XHRcdFx0Ly8gYnV0IHRoYXQgd2lsbCBub3QgaGFuZGxlIGEgbmF0aXZlIGFib3J0XG5cdFx0XHRcdFx0XHRcdC8vIEFsc28sIHNhdmUgZXJyb3JDYWxsYmFjayB0byBhIHZhcmlhYmxlXG5cdFx0XHRcdFx0XHRcdC8vIGFzIHhoci5vbmVycm9yIGNhbm5vdCBiZSBhY2Nlc3NlZFxuXHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGVycm9yQ2FsbGJhY2soKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ3JlYXRlIHRoZSBhYm9ydCBjYWxsYmFja1xuXHRcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrKCBcImFib3J0XCIgKTtcblxuXHRcdFx0XHR0cnkge1xuXG5cdFx0XHRcdFx0Ly8gRG8gc2VuZCB0aGUgcmVxdWVzdCAodGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uKVxuXHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0XHQvLyAjMTQ2ODM6IE9ubHkgcmV0aHJvdyBpZiB0aGlzIGhhc24ndCBiZWVuIG5vdGlmaWVkIGFzIGFuIGVycm9yIHlldFxuXHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG5qUXVlcnkuYWpheFNldHVwKCB7XG5cdGFjY2VwdHM6IHtcblx0XHRzY3JpcHQ6IFwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBcIiArXG5cdFx0XHRcImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdH0sXG5cdGNvbnRlbnRzOiB7XG5cdFx0c2NyaXB0OiAvXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi9cblx0fSxcblx0Y29udmVydGVyczoge1xuXHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIEhhbmRsZSBjYWNoZSdzIHNwZWNpYWwgY2FzZSBhbmQgY3Jvc3NEb21haW5cbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0aWYgKCBzLmNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0cy5jYWNoZSA9IGZhbHNlO1xuXHR9XG5cdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHRzLnR5cGUgPSBcIkdFVFwiO1xuXHR9XG59ICk7XG5cbi8vIEJpbmQgc2NyaXB0IHRhZyBoYWNrIHRyYW5zcG9ydFxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXG5cdC8vIFRoaXMgdHJhbnNwb3J0IG9ubHkgZGVhbHMgd2l0aCBjcm9zcyBkb21haW4gcmVxdWVzdHNcblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHZhciBzY3JpcHQsIGNhbGxiYWNrO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggXywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHNjcmlwdCA9IGpRdWVyeSggXCI8c2NyaXB0PlwiICkucHJvcCgge1xuXHRcdFx0XHRcdGNoYXJzZXQ6IHMuc2NyaXB0Q2hhcnNldCxcblx0XHRcdFx0XHRzcmM6IHMudXJsXG5cdFx0XHRcdH0gKS5vbihcblx0XHRcdFx0XHRcImxvYWQgZXJyb3JcIixcblx0XHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayA9IG51bGw7XG5cdFx0XHRcdFx0XHRpZiAoIGV2dCApIHtcblx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIGV2dC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDAsIGV2dC50eXBlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeVxuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHRbIDAgXSApO1xuXHRcdFx0fSxcblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0anNvbnA6IFwiY2FsbGJhY2tcIixcblx0anNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNhbGxiYWNrID0gb2xkQ2FsbGJhY2tzLnBvcCgpIHx8ICggalF1ZXJ5LmV4cGFuZG8gKyBcIl9cIiArICggbm9uY2UrKyApICk7XG5cdFx0dGhpc1sgY2FsbGJhY2sgXSA9IHRydWU7XG5cdFx0cmV0dXJuIGNhbGxiYWNrO1xuXHR9XG59ICk7XG5cbi8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0c1xualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwianNvbiBqc29ucFwiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7XG5cblx0dmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLFxuXHRcdGpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/XG5cdFx0XHRcInVybFwiIDpcblx0XHRcdHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKVxuXHRcdFx0XHRcdC5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgJiZcblx0XHRcdFx0cmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbIFwic2NyaXB0IGpzb25cIiBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHtcblx0XHRcdFx0alF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyBcIiB3YXMgbm90IGNhbGxlZFwiICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTtcblx0XHR9O1xuXG5cdFx0Ly8gRm9yY2UganNvbiBkYXRhVHlwZVxuXHRcdHMuZGF0YVR5cGVzWyAwIF0gPSBcImpzb25cIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tcblx0XHRvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07XG5cdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7XG5cdFx0fTtcblxuXHRcdC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuXHRcdGpxWEhSLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIElmIHByZXZpb3VzIHZhbHVlIGRpZG4ndCBleGlzdCAtIHJlbW92ZSBpdFxuXHRcdFx0aWYgKCBvdmVyd3JpdHRlbiA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRqUXVlcnkoIHdpbmRvdyApLnJlbW92ZVByb3AoIGNhbGxiYWNrTmFtZSApO1xuXG5cdFx0XHQvLyBPdGhlcndpc2UgcmVzdG9yZSBwcmVleGlzdGluZyB2YWx1ZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IG92ZXJ3cml0dGVuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTYXZlIGJhY2sgYXMgZnJlZVxuXHRcdFx0aWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIFNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSApO1xuXG5cdFx0Ly8gRGVsZWdhdGUgdG8gc2NyaXB0XG5cdFx0cmV0dXJuIFwic2NyaXB0XCI7XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gQXJndW1lbnQgXCJkYXRhXCIgc2hvdWxkIGJlIHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsXG4vLyBkZWZhdWx0cyB0byBkb2N1bWVudFxuLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZ1xualF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRrZWVwU2NyaXB0cyA9IGNvbnRleHQ7XG5cdFx0Y29udGV4dCA9IGZhbHNlO1xuXHR9XG5cdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG5cdHZhciBwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKSxcblx0XHRzY3JpcHRzID0gIWtlZXBTY3JpcHRzICYmIFtdO1xuXG5cdC8vIFNpbmdsZSB0YWdcblx0aWYgKCBwYXJzZWQgKSB7XG5cdFx0cmV0dXJuIFsgY29udGV4dC5jcmVhdGVFbGVtZW50KCBwYXJzZWRbIDEgXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBidWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApO1xuXG5cdGlmICggc2NyaXB0cyAmJiBzY3JpcHRzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBwYXJzZWQuY2hpbGROb2RlcyApO1xufTtcblxuXG4vLyBLZWVwIGEgY29weSBvZiB0aGUgb2xkIGxvYWQgbWV0aG9kXG52YXIgX2xvYWQgPSBqUXVlcnkuZm4ubG9hZDtcblxuLyoqXG4gKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlXG4gKi9cbmpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcblx0aWYgKCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiICYmIF9sb2FkICkge1xuXHRcdHJldHVybiBfbG9hZC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdH1cblxuXHR2YXIgc2VsZWN0b3IsIHR5cGUsIHJlc3BvbnNlLFxuXHRcdHNlbGYgPSB0aGlzLFxuXHRcdG9mZiA9IHVybC5pbmRleE9mKCBcIiBcIiApO1xuXG5cdGlmICggb2ZmID4gLTEgKSB7XG5cdFx0c2VsZWN0b3IgPSBqUXVlcnkudHJpbSggdXJsLnNsaWNlKCBvZmYgKSApO1xuXHRcdHVybCA9IHVybC5zbGljZSggMCwgb2ZmICk7XG5cdH1cblxuXHQvLyBJZiBpdCdzIGEgZnVuY3Rpb25cblx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7XG5cblx0XHQvLyBXZSBhc3N1bWUgdGhhdCBpdCdzIHRoZSBjYWxsYmFja1xuXHRcdGNhbGxiYWNrID0gcGFyYW1zO1xuXHRcdHBhcmFtcyA9IHVuZGVmaW5lZDtcblxuXHQvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nXG5cdH0gZWxzZSBpZiAoIHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSBcIm9iamVjdFwiICkge1xuXHRcdHR5cGUgPSBcIlBPU1RcIjtcblx0fVxuXG5cdC8vIElmIHdlIGhhdmUgZWxlbWVudHMgdG8gbW9kaWZ5LCBtYWtlIHRoZSByZXF1ZXN0XG5cdGlmICggc2VsZi5sZW5ndGggPiAwICkge1xuXHRcdGpRdWVyeS5hamF4KCB7XG5cdFx0XHR1cmw6IHVybCxcblxuXHRcdFx0Ly8gSWYgXCJ0eXBlXCIgdmFyaWFibGUgaXMgdW5kZWZpbmVkLCB0aGVuIFwiR0VUXCIgbWV0aG9kIHdpbGwgYmUgdXNlZC5cblx0XHRcdC8vIE1ha2UgdmFsdWUgb2YgdGhpcyBmaWVsZCBleHBsaWNpdCBzaW5jZVxuXHRcdFx0Ly8gdXNlciBjYW4gb3ZlcnJpZGUgaXQgdGhyb3VnaCBhamF4U2V0dXAgbWV0aG9kXG5cdFx0XHR0eXBlOiB0eXBlIHx8IFwiR0VUXCIsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9ICkuZG9uZSggZnVuY3Rpb24oIHJlc3BvbnNlVGV4dCApIHtcblxuXHRcdFx0Ly8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrXG5cdFx0XHRyZXNwb25zZSA9IGFyZ3VtZW50cztcblxuXHRcdFx0c2VsZi5odG1sKCBzZWxlY3RvciA/XG5cblx0XHRcdFx0Ly8gSWYgYSBzZWxlY3RvciB3YXMgc3BlY2lmaWVkLCBsb2NhdGUgdGhlIHJpZ2h0IGVsZW1lbnRzIGluIGEgZHVtbXkgZGl2XG5cdFx0XHRcdC8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9yc1xuXHRcdFx0XHRqUXVlcnkoIFwiPGRpdj5cIiApLmFwcGVuZCggalF1ZXJ5LnBhcnNlSFRNTCggcmVzcG9uc2VUZXh0ICkgKS5maW5kKCBzZWxlY3RvciApIDpcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UgdXNlIHRoZSBmdWxsIHJlc3VsdFxuXHRcdFx0XHRyZXNwb25zZVRleHQgKTtcblxuXHRcdC8vIElmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJkYXRhXCIsIFwic3RhdHVzXCIsIFwianFYSFJcIlxuXHRcdC8vIGJ1dCB0aGV5IGFyZSBpZ25vcmVkIGJlY2F1c2UgcmVzcG9uc2Ugd2FzIHNldCBhYm92ZS5cblx0XHQvLyBJZiBpdCBmYWlscywgdGhpcyBmdW5jdGlvbiBnZXRzIFwianFYSFJcIiwgXCJzdGF0dXNcIiwgXCJlcnJvclwiXG5cdFx0fSApLmFsd2F5cyggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRzZWxmLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjYWxsYmFjay5hcHBseSggdGhpcywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdFx0fSApO1xuXHRcdH0gKTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuXG5cblxuLy8gQXR0YWNoIGEgYnVuY2ggb2YgZnVuY3Rpb25zIGZvciBoYW5kbGluZyBjb21tb24gQUpBWCBldmVudHNcbmpRdWVyeS5lYWNoKCBbXG5cdFwiYWpheFN0YXJ0XCIsXG5cdFwiYWpheFN0b3BcIixcblx0XCJhamF4Q29tcGxldGVcIixcblx0XCJhamF4RXJyb3JcIixcblx0XCJhamF4U3VjY2Vzc1wiLFxuXHRcImFqYXhTZW5kXCJcbl0sIGZ1bmN0aW9uKCBpLCB0eXBlICkge1xuXHRqUXVlcnkuZm5bIHR5cGUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZSwgZm4gKTtcblx0fTtcbn0gKTtcblxuXG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGpRdWVyeS50aW1lcnMsIGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gZWxlbSA9PT0gZm4uZWxlbTtcblx0fSApLmxlbmd0aDtcbn07XG5cblxuXG5cbi8qKlxuICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xufVxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoIFwiYXV0b1wiICkgPiAtMTtcblxuXHRcdC8vIE5lZWQgdG8gYmUgYWJsZSB0byBjYWxjdWxhdGUgcG9zaXRpb24gaWYgZWl0aGVyXG5cdFx0Ly8gdG9wIG9yIGxlZnQgaXMgYXV0byBhbmQgcG9zaXRpb24gaXMgZWl0aGVyIGFic29sdXRlIG9yIGZpeGVkXG5cdFx0aWYgKCBjYWxjdWxhdGVQb3NpdGlvbiApIHtcblx0XHRcdGN1clBvc2l0aW9uID0gY3VyRWxlbS5wb3NpdGlvbigpO1xuXHRcdFx0Y3VyVG9wID0gY3VyUG9zaXRpb24udG9wO1xuXHRcdFx0Y3VyTGVmdCA9IGN1clBvc2l0aW9uLmxlZnQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDtcblx0XHRcdGN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDtcblx0XHR9XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7XG5cblx0XHRcdC8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KVxuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgalF1ZXJ5LmV4dGVuZCgge30sIGN1ck9mZnNldCApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdG9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHRoaXMgOlxuXHRcdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRcdGpRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KCB0aGlzLCBvcHRpb25zLCBpICk7XG5cdFx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHR2YXIgZG9jRWxlbSwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXG5cdFx0XHRkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuXHRcdGlmICggIWRvYyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZVxuXHRcdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuXHRcdFx0cmV0dXJuIGJveDtcblx0XHR9XG5cblx0XHRib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHdpbiA9IGdldFdpbmRvdyggZG9jICk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogYm94LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLFxuXHRcdFx0bGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnRcblx0XHR9O1xuXHR9LFxuXG5cdHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICF0aGlzWyAwIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIG9mZnNldFBhcmVudCwgb2Zmc2V0LFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cblx0XHQvLyBGaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gd2luZG93IChwYXJlbnRPZmZzZXQgPSB7dG9wOjAsIGxlZnQ6IDB9LFxuXHRcdC8vIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblxuXHRcdFx0Ly8gQXNzdW1lIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyB0aGVyZSB3aGVuIGNvbXB1dGVkIHBvc2l0aW9uIGlzIGZpeGVkXG5cdFx0XHRvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnRcblx0XHRcdG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50KCk7XG5cblx0XHRcdC8vIEdldCBjb3JyZWN0IG9mZnNldHNcblx0XHRcdG9mZnNldCA9IHRoaXMub2Zmc2V0KCk7XG5cdFx0XHRpZiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudFsgMCBdLCBcImh0bWxcIiApICkge1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVyc1xuXHRcdFx0cGFyZW50T2Zmc2V0LnRvcCArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJib3JkZXJUb3BXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHRwYXJlbnRPZmZzZXQubGVmdCArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJib3JkZXJMZWZ0V2lkdGhcIiwgdHJ1ZSApO1xuXHRcdH1cblxuXHRcdC8vIFN1YnRyYWN0IHBhcmVudCBvZmZzZXRzIGFuZCBlbGVtZW50IG1hcmdpbnNcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luVG9wXCIsIHRydWUgKSxcblx0XHRcdGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnQgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiwgdHJ1ZSApXG5cdFx0fTtcblx0fSxcblxuXHQvLyBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBkb2N1bWVudEVsZW1lbnQgaW4gdGhlIGZvbGxvd2luZyBjYXNlczpcblx0Ly8gMSkgRm9yIHRoZSBlbGVtZW50IGluc2lkZSB0aGUgaWZyYW1lIHdpdGhvdXQgb2Zmc2V0UGFyZW50LCB0aGlzIG1ldGhvZCB3aWxsIHJldHVyblxuXHQvLyAgICBkb2N1bWVudEVsZW1lbnQgb2YgdGhlIHBhcmVudCB3aW5kb3dcblx0Ly8gMikgRm9yIHRoZSBoaWRkZW4gb3IgZGV0YWNoZWQgZWxlbWVudFxuXHQvLyAzKSBGb3IgYm9keSBvciBodG1sIGVsZW1lbnQsIGkuZS4gaW4gY2FzZSBvZiB0aGUgaHRtbCBub2RlIC0gaXQgd2lsbCByZXR1cm4gaXRzZWxmXG5cdC8vXG5cdC8vIGJ1dCB0aG9zZSBleGNlcHRpb25zIHdlcmUgbmV2ZXIgcHJlc2VudGVkIGFzIGEgcmVhbCBsaWZlIHVzZS1jYXNlc1xuXHQvLyBhbmQgbWlnaHQgYmUgY29uc2lkZXJlZCBhcyBtb3JlIHByZWZlcmFibGUgcmVzdWx0cy5cblx0Ly9cblx0Ly8gVGhpcyBsb2dpYywgaG93ZXZlciwgaXMgbm90IGd1YXJhbnRlZWQgYW5kIGNhbiBjaGFuZ2UgYXQgYW55IHBvaW50IGluIHRoZSBmdXR1cmVcblx0b2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50O1xuXG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJiBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY3VtZW50RWxlbWVudDtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXHRcdFx0dmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApO1xuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luLnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbi5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9O1xufSApO1xuXG4vLyBTdXBwb3J0OiBTYWZhcmk8Ny04KywgQ2hyb21lPDM3LTQ0K1xuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MjgwXG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cblx0XHRcdFx0Ly8gSWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0XG5cdFx0XHRcdHJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBlbGVtICkucG9zaXRpb24oKVsgcHJvcCBdICsgXCJweFwiIDpcblx0XHRcdFx0XHRjb21wdXRlZDtcblx0XHRcdH1cblx0XHR9XG5cdCk7XG59ICk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSxcblx0XHRmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHtcblxuXHRcdC8vIE1hcmdpbiBpcyBvbmx5IGZvciBvdXRlckhlaWdodCwgb3V0ZXJXaWR0aFxuXHRcdGpRdWVyeS5mblsgZnVuY05hbWUgXSA9IGZ1bmN0aW9uKCBtYXJnaW4sIHZhbHVlICkge1xuXHRcdFx0dmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gXCJib29sZWFuXCIgKSxcblx0XHRcdFx0ZXh0cmEgPSBkZWZhdWx0RXh0cmEgfHwgKCBtYXJnaW4gPT09IHRydWUgfHwgdmFsdWUgPT09IHRydWUgPyBcIm1hcmdpblwiIDogXCJib3JkZXJcIiApO1xuXG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgdHlwZSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBkb2M7XG5cblx0XHRcdFx0aWYgKCBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIEFzIG9mIDUvOC8yMDEyIHRoaXMgd2lsbCB5aWVsZCBpbmNvcnJlY3QgcmVzdWx0cyBmb3IgTW9iaWxlIFNhZmFyaSwgYnV0IHRoZXJlXG5cdFx0XHRcdFx0Ly8gaXNuJ3QgYSB3aG9sZSBsb3Qgd2UgY2FuIGRvLiBTZWUgcHVsbCByZXF1ZXN0IGF0IHRoaXMgVVJMIGZvciBkaXNjdXNzaW9uOlxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cblx0XHRcdFx0XHQvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0XG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6XG5cblx0XHRcdFx0XHQvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcblx0XHRcdH0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlLCBudWxsICk7XG5cdFx0fTtcblx0fSApO1xufSApO1xuXG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHRiaW5kOiBmdW5jdGlvbiggdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9mZiggdHlwZXMsIG51bGwsIGZuICk7XG5cdH0sXG5cblx0ZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGZuICkge1xuXG5cdFx0Ly8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKVxuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID9cblx0XHRcdHRoaXMub2ZmKCBzZWxlY3RvciwgXCIqKlwiICkgOlxuXHRcdFx0dGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH0sXG5cdHNpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmxlbmd0aDtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uYW5kU2VsZiA9IGpRdWVyeS5mbi5hZGRCYWNrO1xuXG5cblxuXG4vLyBSZWdpc3RlciBhcyBhIG5hbWVkIEFNRCBtb2R1bGUsIHNpbmNlIGpRdWVyeSBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbi8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXRcbi8vIHVuZGVyc3RhbmRzIGFub255bW91cyBBTUQgbW9kdWxlcy4gQSBuYW1lZCBBTUQgaXMgc2FmZXN0IGFuZCBtb3N0IHJvYnVzdFxuLy8gd2F5IHRvIHJlZ2lzdGVyLiBMb3dlcmNhc2UganF1ZXJ5IGlzIHVzZWQgYmVjYXVzZSBBTUQgbW9kdWxlIG5hbWVzIGFyZVxuLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlXG4vLyBmaWxlIG5hbWUuIERvIHRoaXMgYWZ0ZXIgY3JlYXRpbmcgdGhlIGdsb2JhbCBzbyB0aGF0IGlmIGFuIEFNRCBtb2R1bGUgd2FudHNcbi8vIHRvIGNhbGwgbm9Db25mbGljdCB0byBoaWRlIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnksIGl0IHdpbGwgd29yay5cblxuLy8gTm90ZSB0aGF0IGZvciBtYXhpbXVtIHBvcnRhYmlsaXR5LCBsaWJyYXJpZXMgdGhhdCBhcmUgbm90IGpRdWVyeSBzaG91bGRcbi8vIGRlY2xhcmUgdGhlbXNlbHZlcyBhcyBhbm9ueW1vdXMgbW9kdWxlcywgYW5kIGF2b2lkIHNldHRpbmcgYSBnbG9iYWwgaWYgYW5cbi8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG4vLyBodHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvd2lraS9VcGRhdGluZy1leGlzdGluZy1saWJyYXJpZXMjd2lraS1hbm9uXG5cbmlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cdGRlZmluZSggXCJqcXVlcnlcIiwgW10sIGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnk7XG5cdH0gKTtcbn1cblxuXG5cbnZhclxuXG5cdC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuXHQvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfJCA9IHdpbmRvdy4kO1xuXG5qUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkge1xuXHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LiQgPSBfJDtcblx0fVxuXG5cdGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5O1xufTtcblxuLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpbiBBTURcbi8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcbi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NilcbmlmICggIW5vR2xvYmFsICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cbnJldHVybiBqUXVlcnk7XG59KSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL34vanF1ZXJ5L2Rpc3QvanF1ZXJ5LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IEJhY2tib25lIGZyb20gJ2JhY2tib25lJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IEVudHJ5IGZyb20gJy4uL21vZGVscy9FbnRyeSc7XG5cbmNsYXNzIEVudHJpZXMgZXh0ZW5kcyBCYWNrYm9uZS5Db2xsZWN0aW9uIHtcblxuXHRjb25zdHJ1Y3RvcihlbnRyaWVzKSB7XG5cdFx0c3VwZXIoZW50cmllcyk7XG5cdH1cblxuXHRpbml0aWFsaXplKCkge1xuXHRcdHRoaXMubW9kZWwgPSBFbnRyeTtcblx0fVxuXG5cdGdldFVudmlld2VkRW50cnlJRCgpIHtcblx0XHRjb25zdCB1bnZpZXdlZEVudHJpZXMgPSB0aGlzLndoZXJlKHsgdmlld2VkOiBmYWxzZSB9KTtcblxuXHRcdGlmICh1bnZpZXdlZEVudHJpZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0cmV0dXJuIF8uc2FtcGxlKHVudmlld2VkRW50cmllcykuZ2V0KCdpZCcpO1xuXHRcdH1cblxuXHRcdHRoaXMuZWFjaCgobW9kZWwpID0+IHsgbW9kZWwuc2V0KCd2aWV3ZWQnLCBmYWxzZSk7IH0pO1xuXHRcdHJldHVybiB0aGlzLnNhbXBsZSgpLmdldCgnaWQnKTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBFbnRyaWVzO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9jb2xsZWN0aW9ucy9FbnRyaWVzLmpzXG4gKiovIiwiaW1wb3J0IEJhY2tib25lIGZyb20gJ2JhY2tib25lJztcblxuY2xhc3MgRW50cnkgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCB7XG5cblx0Y29uc3RydWN0b3IoYXR0cnMpIHtcblx0XHRzdXBlcihhdHRycyk7XG5cdH1cblxuXHRpbml0aWFsaXplKCkge1xuXHRcdHRoaXMuc2V0KHsgdXJsRnJpZW5kbHlUaXRsZTogdGhpcy5jb252ZXJ0VG9TbHVnKHRoaXMuZ2V0KCd0aXRsZScpKSB9KTtcblx0XHR0aGlzLnBhcnNlVGl0bGUoKTtcblx0fVxuXG5cdGRlZmF1bHRzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHR2aWV3ZWQ6IGZhbHNlXG5cdFx0fTtcblx0fVxuXG5cdHBhcnNlVGl0bGUoKSB7XG5cdFx0aWYgKHRoaXMudGl0bGVDb250YWluc1BhcmVudGhlc2lzKHRoaXMuZ2V0KCd0aXRsZScpKSkge1xuXHRcdFx0dGhpcy5zZXQoJ3RpdGxlJywgdGhpcy53cmFwVGl0bGVQYXJlbnRoZXNpc0luU3BhbnModGhpcy5nZXQoJ3RpdGxlJykpKTtcblx0XHR9XG5cdH1cblxuXHRjb252ZXJ0VG9TbHVnKHRleHQpIHtcblx0XHRyZXR1cm4gdGV4dFxuXHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdC5yZXBsYWNlKC9bXlxcdyBdKy9nLCAnJylcblx0XHRcdC5yZXBsYWNlKC8gKy9nLCAnLScpO1xuXHR9XG5cblx0dGl0bGVDb250YWluc1BhcmVudGhlc2lzKHRpdGxlKSB7XG5cdFx0aWYgKHRpdGxlLmluZGV4T2YoJygnKSA+IC0xIHx8IHRpdGxlLmluZGV4T2YoJyknKSA+IC0xKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR3cmFwVGl0bGVQYXJlbnRoZXNpc0luU3BhbnModGl0bGUpIHtcblx0XHRyZXR1cm4gdGl0bGUucmVwbGFjZSgnKCcsICc8c3Bhbj4oJykucmVwbGFjZSgnKScsICcpPC9zcGFuPicpO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRW50cnk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL21vZGVscy9FbnRyeS5qc1xuICoqLyIsImltcG9ydCBCYWNrYm9uZSBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgTG9hZGVyVmlldyBmcm9tICcuLi92aWV3cy9Mb2FkZXJWaWV3JztcbmltcG9ydCBFbnRyaWVzIGZyb20gJy4uL2NvbGxlY3Rpb25zL0VudHJpZXMnO1xuaW1wb3J0IEVudHJpZXNWaWV3IGZyb20gJy4uL3ZpZXdzL0VudHJpZXNWaWV3JztcbmltcG9ydCBFbnRyeVZpZXcgZnJvbSAnLi4vdmlld3MvRW50cnlWaWV3JztcbmltcG9ydCB7IGFsbCBhcyBlbnRyaWVzIH0gZnJvbSAnZ3JlZWstaW4tdGVjaCc7XG5cbmNsYXNzIEFwcFJvdXRlciBleHRlbmRzIEJhY2tib25lLlJvdXRlciB7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLnJvdXRlcyA9IHtcblx0XHRcdCdlbnRyeS86aWQoLzp0aXRsZSknOiAnc2hvd0VudHJ5Jyxcblx0XHRcdCcqYWN0aW9ucyc6ICdzaG93UmFuZG9tRW50cnknXG5cdFx0fTtcblx0XHR0aGlzLl9iaW5kUm91dGVzKCk7XG5cdH1cblxuXHRpbml0aWFsaXplKCkge1xuXHRcdHRoaXMuaW5pdGlhbEZyYWdtZW50ID0gbnVsbDtcblx0XHR0aGlzLiRlbnRyeUVsID0gJCgnI2VudHJ5Jyk7XG5cdFx0dGhpcy5sb2FkZXIgPSBuZXcgTG9hZGVyVmlldygpO1xuXHRcdHRoaXMuZW50cmllcyA9IG5ldyBFbnRyaWVzKEpTT04ucGFyc2UoZW50cmllcykpO1xuXHRcdGNvbnN0IGVudHJpZXNWaWV3ID0gbmV3IEVudHJpZXNWaWV3KHsgY29sbGVjdGlvbjogdGhpcy5lbnRyaWVzIH0pO1xuXHRcdHRoaXMubGlzdGVuVG8oZW50cmllc1ZpZXcsICdyb3V0ZVRvVW52aWV3ZWRFbnRyeScsIHRoaXMuc2hvd0VudHJ5KTtcblx0XHR0aGlzLmxpc3RlblRvKGVudHJpZXNWaWV3LCAnbmF2aWdhdGVCYWNrd2FyZHMnLCB0aGlzLm5hdmlnYXRlQmFja3dhcmRzKTtcblx0fVxuXG5cdHNob3dSYW5kb21FbnRyeSgpIHtcblx0XHRjb25zdCByYW5kb21FbnRyeUlEID0gdGhpcy5lbnRyaWVzLmdldFVudmlld2VkRW50cnlJRCgpO1xuXHRcdHRoaXMuc2hvd0VudHJ5KHJhbmRvbUVudHJ5SUQpO1xuXHR9XG5cblx0c2hvd0VudHJ5KGlkKSB7XG5cdFx0aWYgKHRoaXMubG9hZGVyLiRlbC5pcygnOnZpc2libGUnKSkge1xuXHRcdFx0dGhpcy5sb2FkZXIudHJpZ2dlcignaGlkZScpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5lbnRyaWVzLmZpbmRXaGVyZSh7IGlkOiBwYXJzZUludChpZCkgfSk7XG5cblx0XHRpZiAoXy5pc1VuZGVmaW5lZChlbnRyeSkpIHtcblx0XHRcdHRoaXMuc2hvd1JhbmRvbUVudHJ5KCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5uYXZpZ2F0ZShgZW50cnkvJHtpZH0vJHtlbnRyeS5nZXQoJ3VybEZyaWVuZGx5VGl0bGUnKX1gLCB7IHRyaWdnZXI6IHRydWUgfSk7XG5cblx0XHRpZiAoIXRoaXMuaW5pdGlhbEZyYWdtZW50KSB7XG5cdFx0XHR0aGlzLmluaXRpYWxGcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoKTtcblx0XHR9XG5cblx0XHR0aGlzLmVudHJ5VmlldyA9IG5ldyBFbnRyeVZpZXcoeyBtb2RlbDogZW50cnksIGNvbnRhaW5lcjogdGhpcy4kZW50cnlFbCB9KS5yZW5kZXIoKTtcblx0fVxuXG5cdG5hdmlnYXRlQmFja3dhcmRzKCkge1xuXHRcdGlmICh0aGlzLmluaXRpYWxGcmFnbWVudCA9PT0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0fVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcFJvdXRlcjtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vcm91dGVyL0FwcFJvdXRlci5qc1xuICoqLyIsImltcG9ydCBCYWNrYm9uZSBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgSGFtbWVyIGZyb20gJ2hhbW1lcmpzJztcblxuY2xhc3MgRW50cmllc1ZpZXcgZXh0ZW5kcyBCYWNrYm9uZS5WaWV3IHtcblxuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0c3VwZXIoe1xuXHRcdFx0ZWw6ICdib2R5Jyxcblx0XHRcdGNvbGxlY3Rpb246IG9wdGlvbnMuY29sbGVjdGlvbixcblxuXHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdGNsaWNrOiAncmVuZGVyUmFuZG9tRW50cnknLFxuXHRcdFx0XHRrZXlkb3duOiAnaGFuZGxlS2V5Ym9hcmRFdmVudCdcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0Y29uc3QgbWMgPSBuZXcgSGFtbWVyKHRoaXMuJGVsLmdldCgwKSk7XG5cdFx0bWMub24oJ3N3aXBlcmlnaHQgc3dpcGVsZWZ0JywgdGhpcy5oYW5kbGVNb2JpbGVFdmVudCk7XG5cdH1cblxuXHRyZW5kZXJSYW5kb21FbnRyeShlKSB7XG5cdFx0Ly8gVE9ETzogZmluZCBhIGJldHRlciB3YXkgdG8gc3VwcHJlc3MgZXZlbnQgZGVsZWdhdGlvblxuXHRcdGlmIChlICYmICQoZS50YXJnZXQpLmlzKCdhJykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgdW52aWV3ZWRFbnRyeUlEID0gdGhpcy5jb2xsZWN0aW9uLmdldFVudmlld2VkRW50cnlJRCgpO1xuXHRcdHRoaXMudHJpZ2dlcigncm91dGVUb1Vudmlld2VkRW50cnknLCB1bnZpZXdlZEVudHJ5SUQpO1xuXHR9XG5cblx0aGFuZGxlS2V5Ym9hcmRFdmVudChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0Y29uc3QgYmFja0tleXMgPSBbMzcsIDcyXTtcblx0XHRjb25zdCBmb3J3YXJkS2V5cyA9IFszOSwgNzZdO1xuXHRcdGNvbnN0IHNwYWNlID0gWzMyXTtcblxuXHRcdGlmICghXy5jb250YWlucyhfLnVuaW9uKGJhY2tLZXlzLCBmb3J3YXJkS2V5cywgc3BhY2UpLCBlLmtleUNvZGUpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgaXNGb3J3YXJkID0gXy5jb250YWlucyhmb3J3YXJkS2V5cywgZS5rZXlDb2RlKSB8fCAoc3BhY2UgPT09IGUua2V5Q29kZSAmJiAhZS5zaGlmdEtleSk7XG5cdFx0dGhpcy5tb3ZlVG9FbnRyeShpc0ZvcndhcmQpO1xuXHR9XG5cblx0aGFuZGxlTW9iaWxlRXZlbnQoZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGNvbnN0IGlzRm9yd2FyZCA9IGUudHlwZSA9PT0gJ3N3aXBlbGVmdCc7XG5cdFx0dGhpcy5tb3ZlVG9FbnRyeShpc0ZvcndhcmQpO1xuXHR9XG5cblx0bW92ZVRvRW50cnkoaXNGb3J3YXJkKSB7XG5cdFx0aXNGb3J3YXJkID8gdGhpcy5yZW5kZXJSYW5kb21FbnRyeSgpIDogdGhpcy50cmlnZ2VyKCduYXZpZ2F0ZUJhY2t3YXJkcycpO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRW50cmllc1ZpZXc7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3ZpZXdzL0VudHJpZXNWaWV3LmpzXG4gKiovIiwiaW1wb3J0IEJhY2tib25lIGZyb20gJ2JhY2tib25lJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBFbnRyeVRlbXBsYXRlIGZyb20gJy4uL3RlbXBsYXRlcy9lbnRyeS5odG1sJztcblxuY2xhc3MgRW50cnlWaWV3IGV4dGVuZHMgQmFja2JvbmUuVmlldyB7XG5cblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdHN1cGVyKHtcblx0XHRcdGVsOiAnI2VudHJ5Jyxcblx0XHRcdG1vZGVsOiBvcHRpb25zLm1vZGVsLFxuXHRcdFx0Y29udGFpbmVyOiBvcHRpb25zLmNvbnRhaW5lcixcblxuXHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdCdjbGljayAuc29jaWFsLWxpbmtzIGEnOiAnc29jaWFsU2hhcmUnXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dGhpcy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoRW50cnlUZW1wbGF0ZSk7XG5cdH1cblxuXHRpbml0aWFsaXplKG9wdGlvbnMpIHtcblx0XHR0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsICdjaGFuZ2UnLCB0aGlzLnJlbmRlcik7XG5cdFx0dGhpcy5DU1NhbmltYXRpb25DbGFzc2VzID0gJ2ZsaXBJblggYW5pbWF0ZWQnO1xuXHRcdHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XG5cdFx0dGhpcy5hbmltYXRlVmlldygpO1xuXHR9XG5cblx0cmVuZGVyKCkge1xuXHRcdHRoaXMubW9kZWwuc2V0KCd2aWV3ZWQnLCB0cnVlKTtcblx0XHR0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSkpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRhbmltYXRlVmlldygpIHtcblx0XHR0aGlzLmNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLkNTU2FuaW1hdGlvbkNsYXNzZXMpO1xuXHR9XG5cblx0c29jaWFsU2hhcmUoZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGNvbnN0IHdpZHRoID0gNTc1O1xuXHRcdGNvbnN0IGhlaWdodCA9IDQwMDtcblx0XHRjb25zdCBsZWZ0ID0gKCQod2luZG93KS53aWR0aCgpIC0gd2lkdGgpIC8gMjtcblx0XHRjb25zdCB0b3AgPSAoJCh3aW5kb3cpLmhlaWdodCgpIC0gaGVpZ2h0KSAvIDI7XG5cdFx0Y29uc3QgdXJsID0gJChlLnRhcmdldCkuYXR0cignaHJlZicpO1xuXHRcdGNvbnN0IG9wdHMgPSBgc3RhdHVzPTEsd2lkdGg9JHt3aWR0aH0saGVpZ2h0PSR7aGVpZ2h0fSx0b3A9JHt0b3B9LGxlZnQ9JHtsZWZ0fWA7XG5cblx0XHR3aW5kb3cub3Blbih1cmwsICdTaGFyZScsIG9wdHMpO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRW50cnlWaWV3O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi92aWV3cy9FbnRyeVZpZXcuanNcbiAqKi8iLCJpbXBvcnQgQmFja2JvbmUgZnJvbSAnYmFja2JvbmUnO1xuXG5jbGFzcyBMb2FkZXJWaWV3IGV4dGVuZHMgQmFja2JvbmUuVmlldyB7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoe1xuXHRcdFx0ZWw6ICcubG9hZGVyJ1xuXHRcdH0pO1xuXHR9XG5cblx0aW5pdGlhbGl6ZSgpIHtcblx0XHR0aGlzLmxpc3RlblRvKHRoaXMsICdoaWRlJywgKCkgPT4geyB0aGlzLiRlbC5oaWRlKCk7IH0pO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9hZGVyVmlldztcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vdmlld3MvTG9hZGVyVmlldy5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZ2V0RW50cnkgPSBleHBvcnRzLnJhbmRvbSA9IGV4cG9ydHMuYWxsID0gdW5kZWZpbmVkO1xuXG52YXIgX3VuaXF1ZVJhbmRvbUFycmF5ID0gcmVxdWlyZSgndW5pcXVlLXJhbmRvbS1hcnJheScpO1xuXG52YXIgX3VuaXF1ZVJhbmRvbUFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VuaXF1ZVJhbmRvbUFycmF5KTtcblxudmFyIF9lbnRyaWVzID0gcmVxdWlyZSgnLi4vZGF0YS9lbnRyaWVzJyk7XG5cbnZhciBfZW50cmllczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lbnRyaWVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGFsbCA9IGV4cG9ydHMuYWxsID0gX2VudHJpZXMyLmRlZmF1bHQ7XG52YXIgcmFuZG9tID0gZXhwb3J0cy5yYW5kb20gPSAoMCwgX3VuaXF1ZVJhbmRvbUFycmF5Mi5kZWZhdWx0KShfZW50cmllczIuZGVmYXVsdCk7XG52YXIgZ2V0RW50cnkgPSBleHBvcnRzLmdldEVudHJ5ID0gZnVuY3Rpb24gZ2V0RW50cnkoKSB7XG4gIHZhciBpZCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IDEgOiBhcmd1bWVudHNbMF07XG5cbiAgdmFyIGVudHJ5ID0gX2VudHJpZXMyLmRlZmF1bHRbaWQgLSAxXTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJRCcpO1xuICB9XG5cbiAgcmV0dXJuIGVudHJ5O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL34vZ3JlZWstaW4tdGVjaC9saWIvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohIEhhbW1lci5KUyAtIHYyLjAuNyAtIDIwMTYtMDQtMjJcbiAqIGh0dHA6Ly9oYW1tZXJqcy5naXRodWIuaW8vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IEpvcmlrIFRhbmdlbGRlcjtcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIGV4cG9ydE5hbWUsIHVuZGVmaW5lZCkge1xuICAndXNlIHN0cmljdCc7XG5cbnZhciBWRU5ET1JfUFJFRklYRVMgPSBbJycsICd3ZWJraXQnLCAnTW96JywgJ01TJywgJ21zJywgJ28nXTtcbnZhciBURVNUX0VMRU1FTlQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxudmFyIFRZUEVfRlVOQ1RJT04gPSAnZnVuY3Rpb24nO1xuXG52YXIgcm91bmQgPSBNYXRoLnJvdW5kO1xudmFyIGFicyA9IE1hdGguYWJzO1xudmFyIG5vdyA9IERhdGUubm93O1xuXG4vKipcbiAqIHNldCBhIHRpbWVvdXQgd2l0aCBhIGdpdmVuIHNjb3BlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBzZXRUaW1lb3V0Q29udGV4dChmbiwgdGltZW91dCwgY29udGV4dCkge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGJpbmRGbihmbiwgY29udGV4dCksIHRpbWVvdXQpO1xufVxuXG4vKipcbiAqIGlmIHRoZSBhcmd1bWVudCBpcyBhbiBhcnJheSwgd2Ugd2FudCB0byBleGVjdXRlIHRoZSBmbiBvbiBlYWNoIGVudHJ5XG4gKiBpZiBpdCBhaW50IGFuIGFycmF5IHdlIGRvbid0IHdhbnQgdG8gZG8gYSB0aGluZy5cbiAqIHRoaXMgaXMgdXNlZCBieSBhbGwgdGhlIG1ldGhvZHMgdGhhdCBhY2NlcHQgYSBzaW5nbGUgYW5kIGFycmF5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfEFycmF5fSBhcmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBmblxuICogQHBhcmFtIHtPYmplY3R9IFtjb250ZXh0XVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGludm9rZUFycmF5QXJnKGFyZywgZm4sIGNvbnRleHQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgIGVhY2goYXJnLCBjb250ZXh0W2ZuXSwgY29udGV4dCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogd2FsayBvYmplY3RzIGFuZCBhcnJheXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICovXG5mdW5jdGlvbiBlYWNoKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICB2YXIgaTtcblxuICAgIGlmICghb2JqKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob2JqLmZvckVhY2gpIHtcbiAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH0gZWxzZSBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpIGluIG9iaikge1xuICAgICAgICAgICAgb2JqLmhhc093blByb3BlcnR5KGkpICYmIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIHdyYXAgYSBtZXRob2Qgd2l0aCBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgYW5kIHN0YWNrIHRyYWNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZVxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyB0aGUgc3VwcGxpZWQgbWV0aG9kLlxuICovXG5mdW5jdGlvbiBkZXByZWNhdGUobWV0aG9kLCBuYW1lLCBtZXNzYWdlKSB7XG4gICAgdmFyIGRlcHJlY2F0aW9uTWVzc2FnZSA9ICdERVBSRUNBVEVEIE1FVEhPRDogJyArIG5hbWUgKyAnXFxuJyArIG1lc3NhZ2UgKyAnIEFUIFxcbic7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignZ2V0LXN0YWNrLXRyYWNlJyk7XG4gICAgICAgIHZhciBzdGFjayA9IGUgJiYgZS5zdGFjayA/IGUuc3RhY2sucmVwbGFjZSgvXlteXFwoXSs/W1xcbiRdL2dtLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eXFxzK2F0XFxzKy9nbSwgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXk9iamVjdC48YW5vbnltb3VzPlxccypcXCgvZ20sICd7YW5vbnltb3VzfSgpQCcpIDogJ1Vua25vd24gU3RhY2sgVHJhY2UnO1xuXG4gICAgICAgIHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUud2FybiB8fCB3aW5kb3cuY29uc29sZS5sb2cpO1xuICAgICAgICBpZiAobG9nKSB7XG4gICAgICAgICAgICBsb2cuY2FsbCh3aW5kb3cuY29uc29sZSwgZGVwcmVjYXRpb25NZXNzYWdlLCBzdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8qKlxuICogZXh0ZW5kIG9iamVjdC5cbiAqIG1lYW5zIHRoYXQgcHJvcGVydGllcyBpbiBkZXN0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlIG9uZXMgaW4gc3JjLlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHsuLi5PYmplY3R9IG9iamVjdHNfdG9fYXNzaWduXG4gKiBAcmV0dXJucyB7T2JqZWN0fSB0YXJnZXRcbiAqL1xudmFyIGFzc2lnbjtcbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xufVxuXG4vKipcbiAqIGV4dGVuZCBvYmplY3QuXG4gKiBtZWFucyB0aGF0IHByb3BlcnRpZXMgaW4gZGVzdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBvbmVzIGluIHNyYy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFttZXJnZT1mYWxzZV1cbiAqIEByZXR1cm5zIHtPYmplY3R9IGRlc3RcbiAqL1xudmFyIGV4dGVuZCA9IGRlcHJlY2F0ZShmdW5jdGlvbiBleHRlbmQoZGVzdCwgc3JjLCBtZXJnZSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc3JjKTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBrZXlzLmxlbmd0aCkge1xuICAgICAgICBpZiAoIW1lcmdlIHx8IChtZXJnZSAmJiBkZXN0W2tleXNbaV1dID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICBkZXN0W2tleXNbaV1dID0gc3JjW2tleXNbaV1dO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59LCAnZXh0ZW5kJywgJ1VzZSBgYXNzaWduYC4nKTtcblxuLyoqXG4gKiBtZXJnZSB0aGUgdmFsdWVzIGZyb20gc3JjIGluIHRoZSBkZXN0LlxuICogbWVhbnMgdGhhdCBwcm9wZXJ0aWVzIHRoYXQgZXhpc3QgaW4gZGVzdCB3aWxsIG5vdCBiZSBvdmVyd3JpdHRlbiBieSBzcmNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBkZXN0XG4gKi9cbnZhciBtZXJnZSA9IGRlcHJlY2F0ZShmdW5jdGlvbiBtZXJnZShkZXN0LCBzcmMpIHtcbiAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYywgdHJ1ZSk7XG59LCAnbWVyZ2UnLCAnVXNlIGBhc3NpZ25gLicpO1xuXG4vKipcbiAqIHNpbXBsZSBjbGFzcyBpbmhlcml0YW5jZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2hpbGRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGJhc2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc11cbiAqL1xuZnVuY3Rpb24gaW5oZXJpdChjaGlsZCwgYmFzZSwgcHJvcGVydGllcykge1xuICAgIHZhciBiYXNlUCA9IGJhc2UucHJvdG90eXBlLFxuICAgICAgICBjaGlsZFA7XG5cbiAgICBjaGlsZFAgPSBjaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VQKTtcbiAgICBjaGlsZFAuY29uc3RydWN0b3IgPSBjaGlsZDtcbiAgICBjaGlsZFAuX3N1cGVyID0gYmFzZVA7XG5cbiAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICBhc3NpZ24oY2hpbGRQLCBwcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogc2ltcGxlIGZ1bmN0aW9uIGJpbmRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBiaW5kRm4oZm4sIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gYm91bmRGbigpIHtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBsZXQgYSBib29sZWFuIHZhbHVlIGFsc28gYmUgYSBmdW5jdGlvbiB0aGF0IG11c3QgcmV0dXJuIGEgYm9vbGVhblxuICogdGhpcyBmaXJzdCBpdGVtIGluIGFyZ3Mgd2lsbCBiZSB1c2VkIGFzIHRoZSBjb250ZXh0XG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IHZhbFxuICogQHBhcmFtIHtBcnJheX0gW2FyZ3NdXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gYm9vbE9yRm4odmFsLCBhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT0gVFlQRV9GVU5DVElPTikge1xuICAgICAgICByZXR1cm4gdmFsLmFwcGx5KGFyZ3MgPyBhcmdzWzBdIHx8IHVuZGVmaW5lZCA6IHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogdXNlIHRoZSB2YWwyIHdoZW4gdmFsMSBpcyB1bmRlZmluZWRcbiAqIEBwYXJhbSB7Kn0gdmFsMVxuICogQHBhcmFtIHsqfSB2YWwyXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gaWZVbmRlZmluZWQodmFsMSwgdmFsMikge1xuICAgIHJldHVybiAodmFsMSA9PT0gdW5kZWZpbmVkKSA/IHZhbDIgOiB2YWwxO1xufVxuXG4vKipcbiAqIGFkZEV2ZW50TGlzdGVuZXIgd2l0aCBtdWx0aXBsZSBldmVudHMgYXQgb25jZVxuICogQHBhcmFtIHtFdmVudFRhcmdldH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnModGFyZ2V0LCB0eXBlcywgaGFuZGxlcikge1xuICAgIGVhY2goc3BsaXRTdHIodHlwZXMpLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiByZW1vdmVFdmVudExpc3RlbmVyIHdpdGggbXVsdGlwbGUgZXZlbnRzIGF0IG9uY2VcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRhcmdldCwgdHlwZXMsIGhhbmRsZXIpIHtcbiAgICBlYWNoKHNwbGl0U3RyKHR5cGVzKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogZmluZCBpZiBhIG5vZGUgaXMgaW4gdGhlIGdpdmVuIHBhcmVudFxuICogQG1ldGhvZCBoYXNQYXJlbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudFxuICogQHJldHVybiB7Qm9vbGVhbn0gZm91bmRcbiAqL1xuZnVuY3Rpb24gaGFzUGFyZW50KG5vZGUsIHBhcmVudCkge1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIHNtYWxsIGluZGV4T2Ygd3JhcHBlclxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGZpbmRcbiAqIEByZXR1cm5zIHtCb29sZWFufSBmb3VuZFxuICovXG5mdW5jdGlvbiBpblN0cihzdHIsIGZpbmQpIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2YoZmluZCkgPiAtMTtcbn1cblxuLyoqXG4gKiBzcGxpdCBzdHJpbmcgb24gd2hpdGVzcGFjZVxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybnMge0FycmF5fSB3b3Jkc1xuICovXG5mdW5jdGlvbiBzcGxpdFN0cihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRyaW0oKS5zcGxpdCgvXFxzKy9nKTtcbn1cblxuLyoqXG4gKiBmaW5kIGlmIGEgYXJyYXkgY29udGFpbnMgdGhlIG9iamVjdCB1c2luZyBpbmRleE9mIG9yIGEgc2ltcGxlIHBvbHlGaWxsXG4gKiBAcGFyYW0ge0FycmF5fSBzcmNcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaW5kXG4gKiBAcGFyYW0ge1N0cmluZ30gW2ZpbmRCeUtleV1cbiAqIEByZXR1cm4ge0Jvb2xlYW58TnVtYmVyfSBmYWxzZSB3aGVuIG5vdCBmb3VuZCwgb3IgdGhlIGluZGV4XG4gKi9cbmZ1bmN0aW9uIGluQXJyYXkoc3JjLCBmaW5kLCBmaW5kQnlLZXkpIHtcbiAgICBpZiAoc3JjLmluZGV4T2YgJiYgIWZpbmRCeUtleSkge1xuICAgICAgICByZXR1cm4gc3JjLmluZGV4T2YoZmluZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICgoZmluZEJ5S2V5ICYmIHNyY1tpXVtmaW5kQnlLZXldID09IGZpbmQpIHx8ICghZmluZEJ5S2V5ICYmIHNyY1tpXSA9PT0gZmluZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxufVxuXG4vKipcbiAqIGNvbnZlcnQgYXJyYXktbGlrZSBvYmplY3RzIHRvIHJlYWwgYXJyYXlzXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaiwgMCk7XG59XG5cbi8qKlxuICogdW5pcXVlIGFycmF5IHdpdGggb2JqZWN0cyBiYXNlZCBvbiBhIGtleSAobGlrZSAnaWQnKSBvciBqdXN0IGJ5IHRoZSBhcnJheSdzIHZhbHVlXG4gKiBAcGFyYW0ge0FycmF5fSBzcmMgW3tpZDoxfSx7aWQ6Mn0se2lkOjF9XVxuICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzb3J0PUZhbHNlXVxuICogQHJldHVybnMge0FycmF5fSBbe2lkOjF9LHtpZDoyfV1cbiAqL1xuZnVuY3Rpb24gdW5pcXVlQXJyYXkoc3JjLCBrZXksIHNvcnQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG5cbiAgICB3aGlsZSAoaSA8IHNyYy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbCA9IGtleSA/IHNyY1tpXVtrZXldIDogc3JjW2ldO1xuICAgICAgICBpZiAoaW5BcnJheSh2YWx1ZXMsIHZhbCkgPCAwKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goc3JjW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZXNbaV0gPSB2YWw7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICBpZiAoc29ydCkge1xuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc29ydChmdW5jdGlvbiBzb3J0VW5pcXVlQXJyYXkoYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBhW2tleV0gPiBiW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xufVxuXG4vKipcbiAqIGdldCB0aGUgcHJlZml4ZWQgcHJvcGVydHlcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICogQHJldHVybnMge1N0cmluZ3xVbmRlZmluZWR9IHByZWZpeGVkXG4gKi9cbmZ1bmN0aW9uIHByZWZpeGVkKG9iaiwgcHJvcGVydHkpIHtcbiAgICB2YXIgcHJlZml4LCBwcm9wO1xuICAgIHZhciBjYW1lbFByb3AgPSBwcm9wZXJ0eVswXS50b1VwcGVyQ2FzZSgpICsgcHJvcGVydHkuc2xpY2UoMSk7XG5cbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBWRU5ET1JfUFJFRklYRVMubGVuZ3RoKSB7XG4gICAgICAgIHByZWZpeCA9IFZFTkRPUl9QUkVGSVhFU1tpXTtcbiAgICAgICAgcHJvcCA9IChwcmVmaXgpID8gcHJlZml4ICsgY2FtZWxQcm9wIDogcHJvcGVydHk7XG5cbiAgICAgICAgaWYgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogZ2V0IGEgdW5pcXVlIGlkXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB1bmlxdWVJZFxuICovXG52YXIgX3VuaXF1ZUlkID0gMTtcbmZ1bmN0aW9uIHVuaXF1ZUlkKCkge1xuICAgIHJldHVybiBfdW5pcXVlSWQrKztcbn1cblxuLyoqXG4gKiBnZXQgdGhlIHdpbmRvdyBvYmplY3Qgb2YgYW4gZWxlbWVudFxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybnMge0RvY3VtZW50Vmlld3xXaW5kb3d9XG4gKi9cbmZ1bmN0aW9uIGdldFdpbmRvd0ZvckVsZW1lbnQoZWxlbWVudCkge1xuICAgIHZhciBkb2MgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQgfHwgZWxlbWVudDtcbiAgICByZXR1cm4gKGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93IHx8IHdpbmRvdyk7XG59XG5cbnZhciBNT0JJTEVfUkVHRVggPSAvbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2k7XG5cbnZhciBTVVBQT1JUX1RPVUNIID0gKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyk7XG52YXIgU1VQUE9SVF9QT0lOVEVSX0VWRU5UUyA9IHByZWZpeGVkKHdpbmRvdywgJ1BvaW50ZXJFdmVudCcpICE9PSB1bmRlZmluZWQ7XG52YXIgU1VQUE9SVF9PTkxZX1RPVUNIID0gU1VQUE9SVF9UT1VDSCAmJiBNT0JJTEVfUkVHRVgudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblxudmFyIElOUFVUX1RZUEVfVE9VQ0ggPSAndG91Y2gnO1xudmFyIElOUFVUX1RZUEVfUEVOID0gJ3Blbic7XG52YXIgSU5QVVRfVFlQRV9NT1VTRSA9ICdtb3VzZSc7XG52YXIgSU5QVVRfVFlQRV9LSU5FQ1QgPSAna2luZWN0JztcblxudmFyIENPTVBVVEVfSU5URVJWQUwgPSAyNTtcblxudmFyIElOUFVUX1NUQVJUID0gMTtcbnZhciBJTlBVVF9NT1ZFID0gMjtcbnZhciBJTlBVVF9FTkQgPSA0O1xudmFyIElOUFVUX0NBTkNFTCA9IDg7XG5cbnZhciBESVJFQ1RJT05fTk9ORSA9IDE7XG52YXIgRElSRUNUSU9OX0xFRlQgPSAyO1xudmFyIERJUkVDVElPTl9SSUdIVCA9IDQ7XG52YXIgRElSRUNUSU9OX1VQID0gODtcbnZhciBESVJFQ1RJT05fRE9XTiA9IDE2O1xuXG52YXIgRElSRUNUSU9OX0hPUklaT05UQUwgPSBESVJFQ1RJT05fTEVGVCB8IERJUkVDVElPTl9SSUdIVDtcbnZhciBESVJFQ1RJT05fVkVSVElDQUwgPSBESVJFQ1RJT05fVVAgfCBESVJFQ1RJT05fRE9XTjtcbnZhciBESVJFQ1RJT05fQUxMID0gRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUw7XG5cbnZhciBQUk9QU19YWSA9IFsneCcsICd5J107XG52YXIgUFJPUFNfQ0xJRU5UX1hZID0gWydjbGllbnRYJywgJ2NsaWVudFknXTtcblxuLyoqXG4gKiBjcmVhdGUgbmV3IGlucHV0IHR5cGUgbWFuYWdlclxuICogQHBhcmFtIHtNYW5hZ2VyfSBtYW5hZ2VyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0lucHV0fVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIElucHV0KG1hbmFnZXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuZWxlbWVudCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICB0aGlzLnRhcmdldCA9IG1hbmFnZXIub3B0aW9ucy5pbnB1dFRhcmdldDtcblxuICAgIC8vIHNtYWxsZXIgd3JhcHBlciBhcm91bmQgdGhlIGhhbmRsZXIsIGZvciB0aGUgc2NvcGUgYW5kIHRoZSBlbmFibGVkIHN0YXRlIG9mIHRoZSBtYW5hZ2VyLFxuICAgIC8vIHNvIHdoZW4gZGlzYWJsZWQgdGhlIGlucHV0IGV2ZW50cyBhcmUgY29tcGxldGVseSBieXBhc3NlZC5cbiAgICB0aGlzLmRvbUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICBpZiAoYm9vbE9yRm4obWFuYWdlci5vcHRpb25zLmVuYWJsZSwgW21hbmFnZXJdKSkge1xuICAgICAgICAgICAgc2VsZi5oYW5kbGVyKGV2KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmluaXQoKTtcblxufVxuXG5JbnB1dC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2hvdWxkIGhhbmRsZSB0aGUgaW5wdXRFdmVudCBkYXRhIGFuZCB0cmlnZ2VyIHRoZSBjYWxsYmFja1xuICAgICAqIEB2aXJ0dWFsXG4gICAgICovXG4gICAgaGFuZGxlcjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIGFkZEV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIGFkZEV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdW5iaW5kIHRoZSBldmVudHNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5ldkVsICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5ldkVsLCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2VGFyZ2V0ICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMudGFyZ2V0LCB0aGlzLmV2VGFyZ2V0LCB0aGlzLmRvbUhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV2V2luICYmIHJlbW92ZUV2ZW50TGlzdGVuZXJzKGdldFdpbmRvd0ZvckVsZW1lbnQodGhpcy5lbGVtZW50KSwgdGhpcy5ldldpbiwgdGhpcy5kb21IYW5kbGVyKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIGNyZWF0ZSBuZXcgaW5wdXQgdHlwZSBtYW5hZ2VyXG4gKiBjYWxsZWQgYnkgdGhlIE1hbmFnZXIgY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7SGFtbWVyfSBtYW5hZ2VyXG4gKiBAcmV0dXJucyB7SW5wdXR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0SW5zdGFuY2UobWFuYWdlcikge1xuICAgIHZhciBUeXBlO1xuICAgIHZhciBpbnB1dENsYXNzID0gbWFuYWdlci5vcHRpb25zLmlucHV0Q2xhc3M7XG5cbiAgICBpZiAoaW5wdXRDbGFzcykge1xuICAgICAgICBUeXBlID0gaW5wdXRDbGFzcztcbiAgICB9IGVsc2UgaWYgKFNVUFBPUlRfUE9JTlRFUl9FVkVOVFMpIHtcbiAgICAgICAgVHlwZSA9IFBvaW50ZXJFdmVudElucHV0O1xuICAgIH0gZWxzZSBpZiAoU1VQUE9SVF9PTkxZX1RPVUNIKSB7XG4gICAgICAgIFR5cGUgPSBUb3VjaElucHV0O1xuICAgIH0gZWxzZSBpZiAoIVNVUFBPUlRfVE9VQ0gpIHtcbiAgICAgICAgVHlwZSA9IE1vdXNlSW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgVHlwZSA9IFRvdWNoTW91c2VJbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyAoVHlwZSkobWFuYWdlciwgaW5wdXRIYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBoYW5kbGUgaW5wdXQgZXZlbnRzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBpbnB1dEhhbmRsZXIobWFuYWdlciwgZXZlbnRUeXBlLCBpbnB1dCkge1xuICAgIHZhciBwb2ludGVyc0xlbiA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgY2hhbmdlZFBvaW50ZXJzTGVuID0gaW5wdXQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aDtcbiAgICB2YXIgaXNGaXJzdCA9IChldmVudFR5cGUgJiBJTlBVVF9TVEFSVCAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcbiAgICB2YXIgaXNGaW5hbCA9IChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSAmJiAocG9pbnRlcnNMZW4gLSBjaGFuZ2VkUG9pbnRlcnNMZW4gPT09IDApKTtcblxuICAgIGlucHV0LmlzRmlyc3QgPSAhIWlzRmlyc3Q7XG4gICAgaW5wdXQuaXNGaW5hbCA9ICEhaXNGaW5hbDtcblxuICAgIGlmIChpc0ZpcnN0KSB7XG4gICAgICAgIG1hbmFnZXIuc2Vzc2lvbiA9IHt9O1xuICAgIH1cblxuICAgIC8vIHNvdXJjZSBldmVudCBpcyB0aGUgbm9ybWFsaXplZCB2YWx1ZSBvZiB0aGUgZG9tRXZlbnRzXG4gICAgLy8gbGlrZSAndG91Y2hzdGFydCwgbW91c2V1cCwgcG9pbnRlcmRvd24nXG4gICAgaW5wdXQuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuXG4gICAgLy8gY29tcHV0ZSBzY2FsZSwgcm90YXRpb24gZXRjXG4gICAgY29tcHV0ZUlucHV0RGF0YShtYW5hZ2VyLCBpbnB1dCk7XG5cbiAgICAvLyBlbWl0IHNlY3JldCBldmVudFxuICAgIG1hbmFnZXIuZW1pdCgnaGFtbWVyLmlucHV0JywgaW5wdXQpO1xuXG4gICAgbWFuYWdlci5yZWNvZ25pemUoaW5wdXQpO1xuICAgIG1hbmFnZXIuc2Vzc2lvbi5wcmV2SW5wdXQgPSBpbnB1dDtcbn1cblxuLyoqXG4gKiBleHRlbmQgdGhlIGRhdGEgd2l0aCBzb21lIHVzYWJsZSBwcm9wZXJ0aWVzIGxpa2Ugc2NhbGUsIHJvdGF0ZSwgdmVsb2NpdHkgZXRjXG4gKiBAcGFyYW0ge09iamVjdH0gbWFuYWdlclxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVJbnB1dERhdGEobWFuYWdlciwgaW5wdXQpIHtcbiAgICB2YXIgc2Vzc2lvbiA9IG1hbmFnZXIuc2Vzc2lvbjtcbiAgICB2YXIgcG9pbnRlcnMgPSBpbnB1dC5wb2ludGVycztcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBzdG9yZSB0aGUgZmlyc3QgaW5wdXQgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBhbmQgZGlyZWN0aW9uXG4gICAgaWYgKCFzZXNzaW9uLmZpcnN0SW5wdXQpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdElucHV0ID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH1cblxuICAgIC8vIHRvIGNvbXB1dGUgc2NhbGUgYW5kIHJvdGF0aW9uIHdlIG5lZWQgdG8gc3RvcmUgdGhlIG11bHRpcGxlIHRvdWNoZXNcbiAgICBpZiAocG9pbnRlcnNMZW5ndGggPiAxICYmICFzZXNzaW9uLmZpcnN0TXVsdGlwbGUpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpO1xuICAgIH0gZWxzZSBpZiAocG9pbnRlcnNMZW5ndGggPT09IDEpIHtcbiAgICAgICAgc2Vzc2lvbi5maXJzdE11bHRpcGxlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGZpcnN0SW5wdXQgPSBzZXNzaW9uLmZpcnN0SW5wdXQ7XG4gICAgdmFyIGZpcnN0TXVsdGlwbGUgPSBzZXNzaW9uLmZpcnN0TXVsdGlwbGU7XG4gICAgdmFyIG9mZnNldENlbnRlciA9IGZpcnN0TXVsdGlwbGUgPyBmaXJzdE11bHRpcGxlLmNlbnRlciA6IGZpcnN0SW5wdXQuY2VudGVyO1xuXG4gICAgdmFyIGNlbnRlciA9IGlucHV0LmNlbnRlciA9IGdldENlbnRlcihwb2ludGVycyk7XG4gICAgaW5wdXQudGltZVN0YW1wID0gbm93KCk7XG4gICAgaW5wdXQuZGVsdGFUaW1lID0gaW5wdXQudGltZVN0YW1wIC0gZmlyc3RJbnB1dC50aW1lU3RhbXA7XG5cbiAgICBpbnB1dC5hbmdsZSA9IGdldEFuZ2xlKG9mZnNldENlbnRlciwgY2VudGVyKTtcbiAgICBpbnB1dC5kaXN0YW5jZSA9IGdldERpc3RhbmNlKG9mZnNldENlbnRlciwgY2VudGVyKTtcblxuICAgIGNvbXB1dGVEZWx0YVhZKHNlc3Npb24sIGlucHV0KTtcbiAgICBpbnB1dC5vZmZzZXREaXJlY3Rpb24gPSBnZXREaXJlY3Rpb24oaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuXG4gICAgdmFyIG92ZXJhbGxWZWxvY2l0eSA9IGdldFZlbG9jaXR5KGlucHV0LmRlbHRhVGltZSwgaW5wdXQuZGVsdGFYLCBpbnB1dC5kZWx0YVkpO1xuICAgIGlucHV0Lm92ZXJhbGxWZWxvY2l0eVggPSBvdmVyYWxsVmVsb2NpdHkueDtcbiAgICBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZID0gb3ZlcmFsbFZlbG9jaXR5Lnk7XG4gICAgaW5wdXQub3ZlcmFsbFZlbG9jaXR5ID0gKGFicyhvdmVyYWxsVmVsb2NpdHkueCkgPiBhYnMob3ZlcmFsbFZlbG9jaXR5LnkpKSA/IG92ZXJhbGxWZWxvY2l0eS54IDogb3ZlcmFsbFZlbG9jaXR5Lnk7XG5cbiAgICBpbnB1dC5zY2FsZSA9IGZpcnN0TXVsdGlwbGUgPyBnZXRTY2FsZShmaXJzdE11bHRpcGxlLnBvaW50ZXJzLCBwb2ludGVycykgOiAxO1xuICAgIGlucHV0LnJvdGF0aW9uID0gZmlyc3RNdWx0aXBsZSA/IGdldFJvdGF0aW9uKGZpcnN0TXVsdGlwbGUucG9pbnRlcnMsIHBvaW50ZXJzKSA6IDA7XG5cbiAgICBpbnB1dC5tYXhQb2ludGVycyA9ICFzZXNzaW9uLnByZXZJbnB1dCA/IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA6ICgoaW5wdXQucG9pbnRlcnMubGVuZ3RoID5cbiAgICAgICAgc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpID8gaW5wdXQucG9pbnRlcnMubGVuZ3RoIDogc2Vzc2lvbi5wcmV2SW5wdXQubWF4UG9pbnRlcnMpO1xuXG4gICAgY29tcHV0ZUludGVydmFsSW5wdXREYXRhKHNlc3Npb24sIGlucHV0KTtcblxuICAgIC8vIGZpbmQgdGhlIGNvcnJlY3QgdGFyZ2V0XG4gICAgdmFyIHRhcmdldCA9IG1hbmFnZXIuZWxlbWVudDtcbiAgICBpZiAoaGFzUGFyZW50KGlucHV0LnNyY0V2ZW50LnRhcmdldCwgdGFyZ2V0KSkge1xuICAgICAgICB0YXJnZXQgPSBpbnB1dC5zcmNFdmVudC50YXJnZXQ7XG4gICAgfVxuICAgIGlucHV0LnRhcmdldCA9IHRhcmdldDtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZURlbHRhWFkoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgY2VudGVyID0gaW5wdXQuY2VudGVyO1xuICAgIHZhciBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhIHx8IHt9O1xuICAgIHZhciBwcmV2RGVsdGEgPSBzZXNzaW9uLnByZXZEZWx0YSB8fCB7fTtcbiAgICB2YXIgcHJldklucHV0ID0gc2Vzc2lvbi5wcmV2SW5wdXQgfHwge307XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9TVEFSVCB8fCBwcmV2SW5wdXQuZXZlbnRUeXBlID09PSBJTlBVVF9FTkQpIHtcbiAgICAgICAgcHJldkRlbHRhID0gc2Vzc2lvbi5wcmV2RGVsdGEgPSB7XG4gICAgICAgICAgICB4OiBwcmV2SW5wdXQuZGVsdGFYIHx8IDAsXG4gICAgICAgICAgICB5OiBwcmV2SW5wdXQuZGVsdGFZIHx8IDBcbiAgICAgICAgfTtcblxuICAgICAgICBvZmZzZXQgPSBzZXNzaW9uLm9mZnNldERlbHRhID0ge1xuICAgICAgICAgICAgeDogY2VudGVyLngsXG4gICAgICAgICAgICB5OiBjZW50ZXIueVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlucHV0LmRlbHRhWCA9IHByZXZEZWx0YS54ICsgKGNlbnRlci54IC0gb2Zmc2V0LngpO1xuICAgIGlucHV0LmRlbHRhWSA9IHByZXZEZWx0YS55ICsgKGNlbnRlci55IC0gb2Zmc2V0LnkpO1xufVxuXG4vKipcbiAqIHZlbG9jaXR5IGlzIGNhbGN1bGF0ZWQgZXZlcnkgeCBtc1xuICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICovXG5mdW5jdGlvbiBjb21wdXRlSW50ZXJ2YWxJbnB1dERhdGEoc2Vzc2lvbiwgaW5wdXQpIHtcbiAgICB2YXIgbGFzdCA9IHNlc3Npb24ubGFzdEludGVydmFsIHx8IGlucHV0LFxuICAgICAgICBkZWx0YVRpbWUgPSBpbnB1dC50aW1lU3RhbXAgLSBsYXN0LnRpbWVTdGFtcCxcbiAgICAgICAgdmVsb2NpdHksIHZlbG9jaXR5WCwgdmVsb2NpdHlZLCBkaXJlY3Rpb247XG5cbiAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0NBTkNFTCAmJiAoZGVsdGFUaW1lID4gQ09NUFVURV9JTlRFUlZBTCB8fCBsYXN0LnZlbG9jaXR5ID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBpbnB1dC5kZWx0YVggLSBsYXN0LmRlbHRhWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGlucHV0LmRlbHRhWSAtIGxhc3QuZGVsdGFZO1xuXG4gICAgICAgIHZhciB2ID0gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCBkZWx0YVgsIGRlbHRhWSk7XG4gICAgICAgIHZlbG9jaXR5WCA9IHYueDtcbiAgICAgICAgdmVsb2NpdHlZID0gdi55O1xuICAgICAgICB2ZWxvY2l0eSA9IChhYnModi54KSA+IGFicyh2LnkpKSA/IHYueCA6IHYueTtcbiAgICAgICAgZGlyZWN0aW9uID0gZ2V0RGlyZWN0aW9uKGRlbHRhWCwgZGVsdGFZKTtcblxuICAgICAgICBzZXNzaW9uLmxhc3RJbnRlcnZhbCA9IGlucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVzZSBsYXRlc3QgdmVsb2NpdHkgaW5mbyBpZiBpdCBkb2Vzbid0IG92ZXJ0YWtlIGEgbWluaW11bSBwZXJpb2RcbiAgICAgICAgdmVsb2NpdHkgPSBsYXN0LnZlbG9jaXR5O1xuICAgICAgICB2ZWxvY2l0eVggPSBsYXN0LnZlbG9jaXR5WDtcbiAgICAgICAgdmVsb2NpdHlZID0gbGFzdC52ZWxvY2l0eVk7XG4gICAgICAgIGRpcmVjdGlvbiA9IGxhc3QuZGlyZWN0aW9uO1xuICAgIH1cblxuICAgIGlucHV0LnZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgaW5wdXQudmVsb2NpdHlYID0gdmVsb2NpdHlYO1xuICAgIGlucHV0LnZlbG9jaXR5WSA9IHZlbG9jaXR5WTtcbiAgICBpbnB1dC5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG59XG5cbi8qKlxuICogY3JlYXRlIGEgc2ltcGxlIGNsb25lIGZyb20gdGhlIGlucHV0IHVzZWQgZm9yIHN0b3JhZ2Ugb2YgZmlyc3RJbnB1dCBhbmQgZmlyc3RNdWx0aXBsZVxuICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBjbG9uZWRJbnB1dERhdGFcbiAqL1xuZnVuY3Rpb24gc2ltcGxlQ2xvbmVJbnB1dERhdGEoaW5wdXQpIHtcbiAgICAvLyBtYWtlIGEgc2ltcGxlIGNvcHkgb2YgdGhlIHBvaW50ZXJzIGJlY2F1c2Ugd2Ugd2lsbCBnZXQgYSByZWZlcmVuY2UgaWYgd2UgZG9uJ3RcbiAgICAvLyB3ZSBvbmx5IG5lZWQgY2xpZW50WFkgZm9yIHRoZSBjYWxjdWxhdGlvbnNcbiAgICB2YXIgcG9pbnRlcnMgPSBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBpbnB1dC5wb2ludGVycy5sZW5ndGgpIHtcbiAgICAgICAgcG9pbnRlcnNbaV0gPSB7XG4gICAgICAgICAgICBjbGllbnRYOiByb3VuZChpbnB1dC5wb2ludGVyc1tpXS5jbGllbnRYKSxcbiAgICAgICAgICAgIGNsaWVudFk6IHJvdW5kKGlucHV0LnBvaW50ZXJzW2ldLmNsaWVudFkpXG4gICAgICAgIH07XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0aW1lU3RhbXA6IG5vdygpLFxuICAgICAgICBwb2ludGVyczogcG9pbnRlcnMsXG4gICAgICAgIGNlbnRlcjogZ2V0Q2VudGVyKHBvaW50ZXJzKSxcbiAgICAgICAgZGVsdGFYOiBpbnB1dC5kZWx0YVgsXG4gICAgICAgIGRlbHRhWTogaW5wdXQuZGVsdGFZXG4gICAgfTtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGNlbnRlciBvZiBhbGwgdGhlIHBvaW50ZXJzXG4gKiBAcGFyYW0ge0FycmF5fSBwb2ludGVyc1xuICogQHJldHVybiB7T2JqZWN0fSBjZW50ZXIgY29udGFpbnMgYHhgIGFuZCBgeWAgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBnZXRDZW50ZXIocG9pbnRlcnMpIHtcbiAgICB2YXIgcG9pbnRlcnNMZW5ndGggPSBwb2ludGVycy5sZW5ndGg7XG5cbiAgICAvLyBubyBuZWVkIHRvIGxvb3Agd2hlbiBvbmx5IG9uZSB0b3VjaFxuICAgIGlmIChwb2ludGVyc0xlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcm91bmQocG9pbnRlcnNbMF0uY2xpZW50WCksXG4gICAgICAgICAgICB5OiByb3VuZChwb2ludGVyc1swXS5jbGllbnRZKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciB4ID0gMCwgeSA9IDAsIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcG9pbnRlcnNMZW5ndGgpIHtcbiAgICAgICAgeCArPSBwb2ludGVyc1tpXS5jbGllbnRYO1xuICAgICAgICB5ICs9IHBvaW50ZXJzW2ldLmNsaWVudFk7XG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB4OiByb3VuZCh4IC8gcG9pbnRlcnNMZW5ndGgpLFxuICAgICAgICB5OiByb3VuZCh5IC8gcG9pbnRlcnNMZW5ndGgpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIHZlbG9jaXR5IGJldHdlZW4gdHdvIHBvaW50cy4gdW5pdCBpcyBpbiBweCBwZXIgbXMuXG4gKiBAcGFyYW0ge051bWJlcn0gZGVsdGFUaW1lXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEByZXR1cm4ge09iamVjdH0gdmVsb2NpdHkgYHhgIGFuZCBgeWBcbiAqL1xuZnVuY3Rpb24gZ2V0VmVsb2NpdHkoZGVsdGFUaW1lLCB4LCB5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogeCAvIGRlbHRhVGltZSB8fCAwLFxuICAgICAgICB5OiB5IC8gZGVsdGFUaW1lIHx8IDBcbiAgICB9O1xufVxuXG4vKipcbiAqIGdldCB0aGUgZGlyZWN0aW9uIGJldHdlZW4gdHdvIHBvaW50c1xuICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGRpcmVjdGlvblxuICovXG5mdW5jdGlvbiBnZXREaXJlY3Rpb24oeCwgeSkge1xuICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgIHJldHVybiBESVJFQ1RJT05fTk9ORTtcbiAgICB9XG5cbiAgICBpZiAoYWJzKHgpID49IGFicyh5KSkge1xuICAgICAgICByZXR1cm4geCA8IDAgPyBESVJFQ1RJT05fTEVGVCA6IERJUkVDVElPTl9SSUdIVDtcbiAgICB9XG4gICAgcmV0dXJuIHkgPCAwID8gRElSRUNUSU9OX1VQIDogRElSRUNUSU9OX0RPV047XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhYnNvbHV0ZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMSB7eCwgeX1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwMiB7eCwgeX1cbiAqIEBwYXJhbSB7QXJyYXl9IFtwcm9wc10gY29udGFpbmluZyB4IGFuZCB5IGtleXNcbiAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gZ2V0RGlzdGFuY2UocDEsIHAyLCBwcm9wcykge1xuICAgIGlmICghcHJvcHMpIHtcbiAgICAgICAgcHJvcHMgPSBQUk9QU19YWTtcbiAgICB9XG4gICAgdmFyIHggPSBwMltwcm9wc1swXV0gLSBwMVtwcm9wc1swXV0sXG4gICAgICAgIHkgPSBwMltwcm9wc1sxXV0gLSBwMVtwcm9wc1sxXV07XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KCh4ICogeCkgKyAoeSAqIHkpKTtcbn1cblxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge09iamVjdH0gcDFcbiAqIEBwYXJhbSB7T2JqZWN0fSBwMlxuICogQHBhcmFtIHtBcnJheX0gW3Byb3BzXSBjb250YWluaW5nIHggYW5kIHkga2V5c1xuICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuICovXG5mdW5jdGlvbiBnZXRBbmdsZShwMSwgcDIsIHByb3BzKSB7XG4gICAgaWYgKCFwcm9wcykge1xuICAgICAgICBwcm9wcyA9IFBST1BTX1hZO1xuICAgIH1cbiAgICB2YXIgeCA9IHAyW3Byb3BzWzBdXSAtIHAxW3Byb3BzWzBdXSxcbiAgICAgICAgeSA9IHAyW3Byb3BzWzFdXSAtIHAxW3Byb3BzWzFdXTtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih5LCB4KSAqIDE4MCAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSByb3RhdGlvbiBkZWdyZWVzIGJldHdlZW4gdHdvIHBvaW50ZXJzZXRzXG4gKiBAcGFyYW0ge0FycmF5fSBzdGFydCBhcnJheSBvZiBwb2ludGVyc1xuICogQHBhcmFtIHtBcnJheX0gZW5kIGFycmF5IG9mIHBvaW50ZXJzXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHJvdGF0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldFJvdGF0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gZ2V0QW5nbGUoZW5kWzFdLCBlbmRbMF0sIFBST1BTX0NMSUVOVF9YWSkgKyBnZXRBbmdsZShzdGFydFsxXSwgc3RhcnRbMF0sIFBST1BTX0NMSUVOVF9YWSk7XG59XG5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBzY2FsZSBmYWN0b3IgYmV0d2VlbiB0d28gcG9pbnRlcnNldHNcbiAqIG5vIHNjYWxlIGlzIDEsIGFuZCBnb2VzIGRvd24gdG8gMCB3aGVuIHBpbmNoZWQgdG9nZXRoZXIsIGFuZCBiaWdnZXIgd2hlbiBwaW5jaGVkIG91dFxuICogQHBhcmFtIHtBcnJheX0gc3RhcnQgYXJyYXkgb2YgcG9pbnRlcnNcbiAqIEBwYXJhbSB7QXJyYXl9IGVuZCBhcnJheSBvZiBwb2ludGVyc1xuICogQHJldHVybiB7TnVtYmVyfSBzY2FsZVxuICovXG5mdW5jdGlvbiBnZXRTY2FsZShzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIGdldERpc3RhbmNlKGVuZFswXSwgZW5kWzFdLCBQUk9QU19DTElFTlRfWFkpIC8gZ2V0RGlzdGFuY2Uoc3RhcnRbMF0sIHN0YXJ0WzFdLCBQUk9QU19DTElFTlRfWFkpO1xufVxuXG52YXIgTU9VU0VfSU5QVVRfTUFQID0ge1xuICAgIG1vdXNlZG93bjogSU5QVVRfU1RBUlQsXG4gICAgbW91c2Vtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIG1vdXNldXA6IElOUFVUX0VORFxufTtcblxudmFyIE1PVVNFX0VMRU1FTlRfRVZFTlRTID0gJ21vdXNlZG93bic7XG52YXIgTU9VU0VfV0lORE9XX0VWRU5UUyA9ICdtb3VzZW1vdmUgbW91c2V1cCc7XG5cbi8qKlxuICogTW91c2UgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIE1vdXNlSW5wdXQoKSB7XG4gICAgdGhpcy5ldkVsID0gTU9VU0VfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IE1PVVNFX1dJTkRPV19FVkVOVFM7XG5cbiAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTsgLy8gbW91c2Vkb3duIHN0YXRlXG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KE1vdXNlSW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIE1FaGFuZGxlcihldikge1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gTU9VU0VfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIG9uIHN0YXJ0IHdlIHdhbnQgdG8gaGF2ZSB0aGUgbGVmdCBtb3VzZSBidXR0b24gZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgZXYuYnV0dG9uID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX01PVkUgJiYgZXYud2hpY2ggIT09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9IElOUFVUX0VORDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoIXRoaXMucHJlc3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogW2V2XSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX01PVVNFLFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG52YXIgUE9JTlRFUl9JTlBVVF9NQVAgPSB7XG4gICAgcG9pbnRlcmRvd246IElOUFVUX1NUQVJULFxuICAgIHBvaW50ZXJtb3ZlOiBJTlBVVF9NT1ZFLFxuICAgIHBvaW50ZXJ1cDogSU5QVVRfRU5ELFxuICAgIHBvaW50ZXJjYW5jZWw6IElOUFVUX0NBTkNFTCxcbiAgICBwb2ludGVyb3V0OiBJTlBVVF9DQU5DRUxcbn07XG5cbi8vIGluIElFMTAgdGhlIHBvaW50ZXIgdHlwZXMgaXMgZGVmaW5lZCBhcyBhbiBlbnVtXG52YXIgSUUxMF9QT0lOVEVSX1RZUEVfRU5VTSA9IHtcbiAgICAyOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgIDM6IElOUFVUX1RZUEVfUEVOLFxuICAgIDQ6IElOUFVUX1RZUEVfTU9VU0UsXG4gICAgNTogSU5QVVRfVFlQRV9LSU5FQ1QgLy8gc2VlIGh0dHBzOi8vdHdpdHRlci5jb20vamFjb2Jyb3NzaS9zdGF0dXMvNDgwNTk2NDM4NDg5ODkwODE2XG59O1xuXG52YXIgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdwb2ludGVyZG93bic7XG52YXIgUE9JTlRFUl9XSU5ET1dfRVZFTlRTID0gJ3BvaW50ZXJtb3ZlIHBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsJztcblxuLy8gSUUxMCBoYXMgcHJlZml4ZWQgc3VwcG9ydCwgYW5kIGNhc2Utc2Vuc2l0aXZlXG5pZiAod2luZG93Lk1TUG9pbnRlckV2ZW50ICYmICF3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgUE9JTlRFUl9FTEVNRU5UX0VWRU5UUyA9ICdNU1BvaW50ZXJEb3duJztcbiAgICBQT0lOVEVSX1dJTkRPV19FVkVOVFMgPSAnTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWwnO1xufVxuXG4vKipcbiAqIFBvaW50ZXIgZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFBvaW50ZXJFdmVudElucHV0KCkge1xuICAgIHRoaXMuZXZFbCA9IFBPSU5URVJfRUxFTUVOVF9FVkVOVFM7XG4gICAgdGhpcy5ldldpbiA9IFBPSU5URVJfV0lORE9XX0VWRU5UUztcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLnN0b3JlID0gKHRoaXMubWFuYWdlci5zZXNzaW9uLnBvaW50ZXJFdmVudHMgPSBbXSk7XG59XG5cbmluaGVyaXQoUG9pbnRlckV2ZW50SW5wdXQsIElucHV0LCB7XG4gICAgLyoqXG4gICAgICogaGFuZGxlIG1vdXNlIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICAgICAqL1xuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIFBFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgc3RvcmUgPSB0aGlzLnN0b3JlO1xuICAgICAgICB2YXIgcmVtb3ZlUG9pbnRlciA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBldmVudFR5cGVOb3JtYWxpemVkID0gZXYudHlwZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ21zJywgJycpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gUE9JTlRFUl9JTlBVVF9NQVBbZXZlbnRUeXBlTm9ybWFsaXplZF07XG4gICAgICAgIHZhciBwb2ludGVyVHlwZSA9IElFMTBfUE9JTlRFUl9UWVBFX0VOVU1bZXYucG9pbnRlclR5cGVdIHx8IGV2LnBvaW50ZXJUeXBlO1xuXG4gICAgICAgIHZhciBpc1RvdWNoID0gKHBvaW50ZXJUeXBlID09IElOUFVUX1RZUEVfVE9VQ0gpO1xuXG4gICAgICAgIC8vIGdldCBpbmRleCBvZiB0aGUgZXZlbnQgaW4gdGhlIHN0b3JlXG4gICAgICAgIHZhciBzdG9yZUluZGV4ID0gaW5BcnJheShzdG9yZSwgZXYucG9pbnRlcklkLCAncG9pbnRlcklkJyk7XG5cbiAgICAgICAgLy8gc3RhcnQgYW5kIG1vdXNlIG11c3QgYmUgZG93blxuICAgICAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQgJiYgKGV2LmJ1dHRvbiA9PT0gMCB8fCBpc1RvdWNoKSkge1xuICAgICAgICAgICAgaWYgKHN0b3JlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcmUucHVzaChldik7XG4gICAgICAgICAgICAgICAgc3RvcmVJbmRleCA9IHN0b3JlLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkpIHtcbiAgICAgICAgICAgIHJlbW92ZVBvaW50ZXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaXQgbm90IGZvdW5kLCBzbyB0aGUgcG9pbnRlciBoYXNuJ3QgYmVlbiBkb3duIChzbyBpdCdzIHByb2JhYmx5IGEgaG92ZXIpXG4gICAgICAgIGlmIChzdG9yZUluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBldmVudCBpbiB0aGUgc3RvcmVcbiAgICAgICAgc3RvcmVbc3RvcmVJbmRleF0gPSBldjtcblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgZXZlbnRUeXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogc3RvcmUsXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IFtldl0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogcG9pbnRlclR5cGUsXG4gICAgICAgICAgICBzcmNFdmVudDogZXZcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHJlbW92ZVBvaW50ZXIpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIHRoZSBzdG9yZVxuICAgICAgICAgICAgc3RvcmUuc3BsaWNlKHN0b3JlSW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbnZhciBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBTSU5HTEVfVE9VQ0hfVEFSR0VUX0VWRU5UUyA9ICd0b3VjaHN0YXJ0JztcbnZhciBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUyA9ICd0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cbi8qKlxuICogVG91Y2ggZXZlbnRzIGlucHV0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cbmZ1bmN0aW9uIFNpbmdsZVRvdWNoSW5wdXQoKSB7XG4gICAgdGhpcy5ldlRhcmdldCA9IFNJTkdMRV9UT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMuZXZXaW4gPSBTSU5HTEVfVE9VQ0hfV0lORE9XX0VWRU5UUztcbiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgIElucHV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU2luZ2xlVG91Y2hJbnB1dCwgSW5wdXQsIHtcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBURWhhbmRsZXIoZXYpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBTSU5HTEVfVE9VQ0hfSU5QVVRfTUFQW2V2LnR5cGVdO1xuXG4gICAgICAgIC8vIHNob3VsZCB3ZSBoYW5kbGUgdGhlIHRvdWNoIGV2ZW50cz9cbiAgICAgICAgaWYgKHR5cGUgPT09IElOUFVUX1NUQVJUKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b3VjaGVzID0gbm9ybWFsaXplU2luZ2xlVG91Y2hlcy5jYWxsKHRoaXMsIGV2LCB0eXBlKTtcblxuICAgICAgICAvLyB3aGVuIGRvbmUsIHJlc2V0IHRoZSBzdGFydGVkIHN0YXRlXG4gICAgICAgIGlmICh0eXBlICYgKElOUFVUX0VORCB8IElOUFVUX0NBTkNFTCkgJiYgdG91Y2hlc1swXS5sZW5ndGggLSB0b3VjaGVzWzFdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlciwgdHlwZSwge1xuICAgICAgICAgICAgcG9pbnRlcnM6IHRvdWNoZXNbMF0sXG4gICAgICAgICAgICBjaGFuZ2VkUG9pbnRlcnM6IHRvdWNoZXNbMV0sXG4gICAgICAgICAgICBwb2ludGVyVHlwZTogSU5QVVRfVFlQRV9UT1VDSCxcbiAgICAgICAgICAgIHNyY0V2ZW50OiBldlxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAdGhpcyB7VG91Y2hJbnB1dH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBldlxuICogQHBhcmFtIHtOdW1iZXJ9IHR5cGUgZmxhZ1xuICogQHJldHVybnMge3VuZGVmaW5lZHxBcnJheX0gW2FsbCwgY2hhbmdlZF1cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU2luZ2xlVG91Y2hlcyhldiwgdHlwZSkge1xuICAgIHZhciBhbGwgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciBjaGFuZ2VkID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyk7XG5cbiAgICBpZiAodHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpKSB7XG4gICAgICAgIGFsbCA9IHVuaXF1ZUFycmF5KGFsbC5jb25jYXQoY2hhbmdlZCksICdpZGVudGlmaWVyJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFthbGwsIGNoYW5nZWRdO1xufVxuXG52YXIgVE9VQ0hfSU5QVVRfTUFQID0ge1xuICAgIHRvdWNoc3RhcnQ6IElOUFVUX1NUQVJULFxuICAgIHRvdWNobW92ZTogSU5QVVRfTU9WRSxcbiAgICB0b3VjaGVuZDogSU5QVVRfRU5ELFxuICAgIHRvdWNoY2FuY2VsOiBJTlBVVF9DQU5DRUxcbn07XG5cbnZhciBUT1VDSF9UQVJHRVRfRVZFTlRTID0gJ3RvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJztcblxuLyoqXG4gKiBNdWx0aS11c2VyIHRvdWNoIGV2ZW50cyBpbnB1dFxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBJbnB1dFxuICovXG5mdW5jdGlvbiBUb3VjaElucHV0KCkge1xuICAgIHRoaXMuZXZUYXJnZXQgPSBUT1VDSF9UQVJHRVRfRVZFTlRTO1xuICAgIHRoaXMudGFyZ2V0SWRzID0ge307XG5cbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KFRvdWNoSW5wdXQsIElucHV0LCB7XG4gICAgaGFuZGxlcjogZnVuY3Rpb24gTVRFaGFuZGxlcihldikge1xuICAgICAgICB2YXIgdHlwZSA9IFRPVUNIX0lOUFVUX01BUFtldi50eXBlXTtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBnZXRUb3VjaGVzLmNhbGwodGhpcywgZXYsIHR5cGUpO1xuICAgICAgICBpZiAoIXRvdWNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLCB0eXBlLCB7XG4gICAgICAgICAgICBwb2ludGVyczogdG91Y2hlc1swXSxcbiAgICAgICAgICAgIGNoYW5nZWRQb2ludGVyczogdG91Y2hlc1sxXSxcbiAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBJTlBVVF9UWVBFX1RPVUNILFxuICAgICAgICAgICAgc3JjRXZlbnQ6IGV2XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEB0aGlzIHtUb3VjaElucHV0fVxuICogQHBhcmFtIHtPYmplY3R9IGV2XG4gKiBAcGFyYW0ge051bWJlcn0gdHlwZSBmbGFnXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfEFycmF5fSBbYWxsLCBjaGFuZ2VkXVxuICovXG5mdW5jdGlvbiBnZXRUb3VjaGVzKGV2LCB0eXBlKSB7XG4gICAgdmFyIGFsbFRvdWNoZXMgPSB0b0FycmF5KGV2LnRvdWNoZXMpO1xuICAgIHZhciB0YXJnZXRJZHMgPSB0aGlzLnRhcmdldElkcztcblxuICAgIC8vIHdoZW4gdGhlcmUgaXMgb25seSBvbmUgdG91Y2gsIHRoZSBwcm9jZXNzIGNhbiBiZSBzaW1wbGlmaWVkXG4gICAgaWYgKHR5cGUgJiAoSU5QVVRfU1RBUlQgfCBJTlBVVF9NT1ZFKSAmJiBhbGxUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0YXJnZXRJZHNbYWxsVG91Y2hlc1swXS5pZGVudGlmaWVyXSA9IHRydWU7XG4gICAgICAgIHJldHVybiBbYWxsVG91Y2hlcywgYWxsVG91Y2hlc107XG4gICAgfVxuXG4gICAgdmFyIGksXG4gICAgICAgIHRhcmdldFRvdWNoZXMsXG4gICAgICAgIGNoYW5nZWRUb3VjaGVzID0gdG9BcnJheShldi5jaGFuZ2VkVG91Y2hlcyksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzID0gW10sXG4gICAgICAgIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXG4gICAgLy8gZ2V0IHRhcmdldCB0b3VjaGVzIGZyb20gdG91Y2hlc1xuICAgIHRhcmdldFRvdWNoZXMgPSBhbGxUb3VjaGVzLmZpbHRlcihmdW5jdGlvbih0b3VjaCkge1xuICAgICAgICByZXR1cm4gaGFzUGFyZW50KHRvdWNoLnRhcmdldCwgdGFyZ2V0KTtcbiAgICB9KTtcblxuICAgIC8vIGNvbGxlY3QgdG91Y2hlc1xuICAgIGlmICh0eXBlID09PSBJTlBVVF9TVEFSVCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFyZ2V0SWRzW3RhcmdldFRvdWNoZXNbaV0uaWRlbnRpZmllcl0gPSB0cnVlO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZmlsdGVyIGNoYW5nZWQgdG91Y2hlcyB0byBvbmx5IGNvbnRhaW4gdG91Y2hlcyB0aGF0IGV4aXN0IGluIHRoZSBjb2xsZWN0ZWQgdGFyZ2V0IGlkc1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICh0YXJnZXRJZHNbY2hhbmdlZFRvdWNoZXNbaV0uaWRlbnRpZmllcl0pIHtcbiAgICAgICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzLnB1c2goY2hhbmdlZFRvdWNoZXNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2xlYW51cCByZW1vdmVkIHRvdWNoZXNcbiAgICAgICAgaWYgKHR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRhcmdldElkc1tjaGFuZ2VkVG91Y2hlc1tpXS5pZGVudGlmaWVyXTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgaWYgKCFjaGFuZ2VkVGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiBbXG4gICAgICAgIC8vIG1lcmdlIHRhcmdldFRvdWNoZXMgd2l0aCBjaGFuZ2VkVGFyZ2V0VG91Y2hlcyBzbyBpdCBjb250YWlucyBBTEwgdG91Y2hlcywgaW5jbHVkaW5nICdlbmQnIGFuZCAnY2FuY2VsJ1xuICAgICAgICB1bmlxdWVBcnJheSh0YXJnZXRUb3VjaGVzLmNvbmNhdChjaGFuZ2VkVGFyZ2V0VG91Y2hlcyksICdpZGVudGlmaWVyJywgdHJ1ZSksXG4gICAgICAgIGNoYW5nZWRUYXJnZXRUb3VjaGVzXG4gICAgXTtcbn1cblxuLyoqXG4gKiBDb21iaW5lZCB0b3VjaCBhbmQgbW91c2UgaW5wdXRcbiAqXG4gKiBUb3VjaCBoYXMgYSBoaWdoZXIgcHJpb3JpdHkgdGhlbiBtb3VzZSwgYW5kIHdoaWxlIHRvdWNoaW5nIG5vIG1vdXNlIGV2ZW50cyBhcmUgYWxsb3dlZC5cbiAqIFRoaXMgYmVjYXVzZSB0b3VjaCBkZXZpY2VzIGFsc28gZW1pdCBtb3VzZSBldmVudHMgd2hpbGUgZG9pbmcgYSB0b3VjaC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIElucHV0XG4gKi9cblxudmFyIERFRFVQX1RJTUVPVVQgPSAyNTAwO1xudmFyIERFRFVQX0RJU1RBTkNFID0gMjU7XG5cbmZ1bmN0aW9uIFRvdWNoTW91c2VJbnB1dCgpIHtcbiAgICBJbnB1dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdmFyIGhhbmRsZXIgPSBiaW5kRm4odGhpcy5oYW5kbGVyLCB0aGlzKTtcbiAgICB0aGlzLnRvdWNoID0gbmV3IFRvdWNoSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcbiAgICB0aGlzLm1vdXNlID0gbmV3IE1vdXNlSW5wdXQodGhpcy5tYW5hZ2VyLCBoYW5kbGVyKTtcblxuICAgIHRoaXMucHJpbWFyeVRvdWNoID0gbnVsbDtcbiAgICB0aGlzLmxhc3RUb3VjaGVzID0gW107XG59XG5cbmluaGVyaXQoVG91Y2hNb3VzZUlucHV0LCBJbnB1dCwge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSBtb3VzZSBhbmQgdG91Y2ggZXZlbnRzXG4gICAgICogQHBhcmFtIHtIYW1tZXJ9IG1hbmFnZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXRFdmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dERhdGFcbiAgICAgKi9cbiAgICBoYW5kbGVyOiBmdW5jdGlvbiBUTUVoYW5kbGVyKG1hbmFnZXIsIGlucHV0RXZlbnQsIGlucHV0RGF0YSkge1xuICAgICAgICB2YXIgaXNUb3VjaCA9IChpbnB1dERhdGEucG9pbnRlclR5cGUgPT0gSU5QVVRfVFlQRV9UT1VDSCksXG4gICAgICAgICAgICBpc01vdXNlID0gKGlucHV0RGF0YS5wb2ludGVyVHlwZSA9PSBJTlBVVF9UWVBFX01PVVNFKTtcblxuICAgICAgICBpZiAoaXNNb3VzZSAmJiBpbnB1dERhdGEuc291cmNlQ2FwYWJpbGl0aWVzICYmIGlucHV0RGF0YS5zb3VyY2VDYXBhYmlsaXRpZXMuZmlyZXNUb3VjaEV2ZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2hlbiB3ZSdyZSBpbiBhIHRvdWNoIGV2ZW50LCByZWNvcmQgdG91Y2hlcyB0byAgZGUtZHVwZSBzeW50aGV0aWMgbW91c2UgZXZlbnRcbiAgICAgICAgaWYgKGlzVG91Y2gpIHtcbiAgICAgICAgICAgIHJlY29yZFRvdWNoZXMuY2FsbCh0aGlzLCBpbnB1dEV2ZW50LCBpbnB1dERhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTW91c2UgJiYgaXNTeW50aGV0aWNFdmVudC5jYWxsKHRoaXMsIGlucHV0RGF0YSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2sobWFuYWdlciwgaW5wdXRFdmVudCwgaW5wdXREYXRhKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnRvdWNoLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5tb3VzZS5kZXN0cm95KCk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIHJlY29yZFRvdWNoZXMoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcbiAgICBpZiAoZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgdGhpcy5wcmltYXJ5VG91Y2ggPSBldmVudERhdGEuY2hhbmdlZFBvaW50ZXJzWzBdLmlkZW50aWZpZXI7XG4gICAgICAgIHNldExhc3RUb3VjaC5jYWxsKHRoaXMsIGV2ZW50RGF0YSk7XG4gICAgfSBlbHNlIGlmIChldmVudFR5cGUgJiAoSU5QVVRfRU5EIHwgSU5QVVRfQ0FOQ0VMKSkge1xuICAgICAgICBzZXRMYXN0VG91Y2guY2FsbCh0aGlzLCBldmVudERhdGEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TGFzdFRvdWNoKGV2ZW50RGF0YSkge1xuICAgIHZhciB0b3VjaCA9IGV2ZW50RGF0YS5jaGFuZ2VkUG9pbnRlcnNbMF07XG5cbiAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gdGhpcy5wcmltYXJ5VG91Y2gpIHtcbiAgICAgICAgdmFyIGxhc3RUb3VjaCA9IHt4OiB0b3VjaC5jbGllbnRYLCB5OiB0b3VjaC5jbGllbnRZfTtcbiAgICAgICAgdGhpcy5sYXN0VG91Y2hlcy5wdXNoKGxhc3RUb3VjaCk7XG4gICAgICAgIHZhciBsdHMgPSB0aGlzLmxhc3RUb3VjaGVzO1xuICAgICAgICB2YXIgcmVtb3ZlTGFzdFRvdWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaSA9IGx0cy5pbmRleE9mKGxhc3RUb3VjaCk7XG4gICAgICAgICAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbHRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc2V0VGltZW91dChyZW1vdmVMYXN0VG91Y2gsIERFRFVQX1RJTUVPVVQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNTeW50aGV0aWNFdmVudChldmVudERhdGEpIHtcbiAgICB2YXIgeCA9IGV2ZW50RGF0YS5zcmNFdmVudC5jbGllbnRYLCB5ID0gZXZlbnREYXRhLnNyY0V2ZW50LmNsaWVudFk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxhc3RUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5sYXN0VG91Y2hlc1tpXTtcbiAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoeCAtIHQueCksIGR5ID0gTWF0aC5hYnMoeSAtIHQueSk7XG4gICAgICAgIGlmIChkeCA8PSBERURVUF9ESVNUQU5DRSAmJiBkeSA8PSBERURVUF9ESVNUQU5DRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgUFJFRklYRURfVE9VQ0hfQUNUSU9OID0gcHJlZml4ZWQoVEVTVF9FTEVNRU5ULnN0eWxlLCAndG91Y2hBY3Rpb24nKTtcbnZhciBOQVRJVkVfVE9VQ0hfQUNUSU9OID0gUFJFRklYRURfVE9VQ0hfQUNUSU9OICE9PSB1bmRlZmluZWQ7XG5cbi8vIG1hZ2ljYWwgdG91Y2hBY3Rpb24gdmFsdWVcbnZhciBUT1VDSF9BQ1RJT05fQ09NUFVURSA9ICdjb21wdXRlJztcbnZhciBUT1VDSF9BQ1RJT05fQVVUTyA9ICdhdXRvJztcbnZhciBUT1VDSF9BQ1RJT05fTUFOSVBVTEFUSU9OID0gJ21hbmlwdWxhdGlvbic7IC8vIG5vdCBpbXBsZW1lbnRlZFxudmFyIFRPVUNIX0FDVElPTl9OT05FID0gJ25vbmUnO1xudmFyIFRPVUNIX0FDVElPTl9QQU5fWCA9ICdwYW4teCc7XG52YXIgVE9VQ0hfQUNUSU9OX1BBTl9ZID0gJ3Bhbi15JztcbnZhciBUT1VDSF9BQ1RJT05fTUFQID0gZ2V0VG91Y2hBY3Rpb25Qcm9wcygpO1xuXG4vKipcbiAqIFRvdWNoIEFjdGlvblxuICogc2V0cyB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkgb3IgdXNlcyB0aGUganMgYWx0ZXJuYXRpdmVcbiAqIEBwYXJhbSB7TWFuYWdlcn0gbWFuYWdlclxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVG91Y2hBY3Rpb24obWFuYWdlciwgdmFsdWUpIHtcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgIHRoaXMuc2V0KHZhbHVlKTtcbn1cblxuVG91Y2hBY3Rpb24ucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIHNldCB0aGUgdG91Y2hBY3Rpb24gdmFsdWUgb24gdGhlIGVsZW1lbnQgb3IgZW5hYmxlIHRoZSBwb2x5ZmlsbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gZmluZCBvdXQgdGhlIHRvdWNoLWFjdGlvbiBieSB0aGUgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgaWYgKHZhbHVlID09IFRPVUNIX0FDVElPTl9DT01QVVRFKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE5BVElWRV9UT1VDSF9BQ1RJT04gJiYgdGhpcy5tYW5hZ2VyLmVsZW1lbnQuc3R5bGUgJiYgVE9VQ0hfQUNUSU9OX01BUFt2YWx1ZV0pIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW1BSRUZJWEVEX1RPVUNIX0FDVElPTl0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjdGlvbnMgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICoganVzdCByZS1zZXQgdGhlIHRvdWNoQWN0aW9uIHZhbHVlXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjb21wdXRlIHRoZSB2YWx1ZSBmb3IgdGhlIHRvdWNoQWN0aW9uIHByb3BlcnR5IGJhc2VkIG9uIHRoZSByZWNvZ25pemVyJ3Mgc2V0dGluZ3NcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIGNvbXB1dGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYWN0aW9ucyA9IFtdO1xuICAgICAgICBlYWNoKHRoaXMubWFuYWdlci5yZWNvZ25pemVycywgZnVuY3Rpb24ocmVjb2duaXplcikge1xuICAgICAgICAgICAgaWYgKGJvb2xPckZuKHJlY29nbml6ZXIub3B0aW9ucy5lbmFibGUsIFtyZWNvZ25pemVyXSkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zID0gYWN0aW9ucy5jb25jYXQocmVjb2duaXplci5nZXRUb3VjaEFjdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zLmpvaW4oJyAnKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbiBlYWNoIGlucHV0IGN5Y2xlIGFuZCBwcm92aWRlcyB0aGUgcHJldmVudGluZyBvZiB0aGUgYnJvd3NlciBiZWhhdmlvclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIHByZXZlbnREZWZhdWx0czogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHNyY0V2ZW50ID0gaW5wdXQuc3JjRXZlbnQ7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBpbnB1dC5vZmZzZXREaXJlY3Rpb247XG5cbiAgICAgICAgLy8gaWYgdGhlIHRvdWNoIGFjdGlvbiBkaWQgcHJldmVudGVkIG9uY2UgdGhpcyBzZXNzaW9uXG4gICAgICAgIGlmICh0aGlzLm1hbmFnZXIuc2Vzc2lvbi5wcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIHNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcbiAgICAgICAgdmFyIGhhc05vbmUgPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX05PTkVdO1xuICAgICAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSkgJiYgIVRPVUNIX0FDVElPTl9NQVBbVE9VQ0hfQUNUSU9OX1BBTl9ZXTtcbiAgICAgICAgdmFyIGhhc1BhblggPSBpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fUEFOX1gpICYmICFUT1VDSF9BQ1RJT05fTUFQW1RPVUNIX0FDVElPTl9QQU5fWF07XG5cbiAgICAgICAgaWYgKGhhc05vbmUpIHtcbiAgICAgICAgICAgIC8vZG8gbm90IHByZXZlbnQgZGVmYXVsdHMgaWYgdGhpcyBpcyBhIHRhcCBnZXN0dXJlXG5cbiAgICAgICAgICAgIHZhciBpc1RhcFBvaW50ZXIgPSBpbnB1dC5wb2ludGVycy5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICB2YXIgaXNUYXBNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgMjtcbiAgICAgICAgICAgIHZhciBpc1RhcFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IDI1MDtcblxuICAgICAgICAgICAgaWYgKGlzVGFwUG9pbnRlciAmJiBpc1RhcE1vdmVtZW50ICYmIGlzVGFwVG91Y2hUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1BhblggJiYgaGFzUGFuWSkge1xuICAgICAgICAgICAgLy8gYHBhbi14IHBhbi15YCBtZWFucyBicm93c2VyIGhhbmRsZXMgYWxsIHNjcm9sbGluZy9wYW5uaW5nLCBkbyBub3QgcHJldmVudFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc05vbmUgfHxcbiAgICAgICAgICAgIChoYXNQYW5ZICYmIGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB8fFxuICAgICAgICAgICAgKGhhc1BhblggJiYgZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmVudFNyYyhzcmNFdmVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FsbCBwcmV2ZW50RGVmYXVsdCB0byBwcmV2ZW50IHRoZSBicm93c2VyJ3MgZGVmYXVsdCBiZWhhdmlvciAoc2Nyb2xsaW5nIGluIG1vc3QgY2FzZXMpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNyY0V2ZW50XG4gICAgICovXG4gICAgcHJldmVudFNyYzogZnVuY3Rpb24oc3JjRXZlbnQpIHtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgc3JjRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIHdoZW4gdGhlIHRvdWNoQWN0aW9ucyBhcmUgY29sbGVjdGVkIHRoZXkgYXJlIG5vdCBhIHZhbGlkIHZhbHVlLCBzbyB3ZSBuZWVkIHRvIGNsZWFuIHRoaW5ncyB1cC4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvbnNcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBjbGVhblRvdWNoQWN0aW9ucyhhY3Rpb25zKSB7XG4gICAgLy8gbm9uZVxuICAgIGlmIChpblN0cihhY3Rpb25zLCBUT1VDSF9BQ1RJT05fTk9ORSkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIHZhciBoYXNQYW5YID0gaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICB2YXIgaGFzUGFuWSA9IGluU3RyKGFjdGlvbnMsIFRPVUNIX0FDVElPTl9QQU5fWSk7XG5cbiAgICAvLyBpZiBib3RoIHBhbi14IGFuZCBwYW4teSBhcmUgc2V0IChkaWZmZXJlbnQgcmVjb2duaXplcnNcbiAgICAvLyBmb3IgZGlmZmVyZW50IGRpcmVjdGlvbnMsIGUuZy4gaG9yaXpvbnRhbCBwYW4gYnV0IHZlcnRpY2FsIHN3aXBlPylcbiAgICAvLyB3ZSBuZWVkIG5vbmUgKGFzIG90aGVyd2lzZSB3aXRoIHBhbi14IHBhbi15IGNvbWJpbmVkIG5vbmUgb2YgdGhlc2VcbiAgICAvLyByZWNvZ25pemVycyB3aWxsIHdvcmssIHNpbmNlIHRoZSBicm93c2VyIHdvdWxkIGhhbmRsZSBhbGwgcGFubmluZ1xuICAgIGlmIChoYXNQYW5YICYmIGhhc1BhblkpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9OT05FO1xuICAgIH1cblxuICAgIC8vIHBhbi14IE9SIHBhbi15XG4gICAgaWYgKGhhc1BhblggfHwgaGFzUGFuWSkge1xuICAgICAgICByZXR1cm4gaGFzUGFuWCA/IFRPVUNIX0FDVElPTl9QQU5fWCA6IFRPVUNIX0FDVElPTl9QQU5fWTtcbiAgICB9XG5cbiAgICAvLyBtYW5pcHVsYXRpb25cbiAgICBpZiAoaW5TdHIoYWN0aW9ucywgVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTikpIHtcbiAgICAgICAgcmV0dXJuIFRPVUNIX0FDVElPTl9NQU5JUFVMQVRJT047XG4gICAgfVxuXG4gICAgcmV0dXJuIFRPVUNIX0FDVElPTl9BVVRPO1xufVxuXG5mdW5jdGlvbiBnZXRUb3VjaEFjdGlvblByb3BzKCkge1xuICAgIGlmICghTkFUSVZFX1RPVUNIX0FDVElPTikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB0b3VjaE1hcCA9IHt9O1xuICAgIHZhciBjc3NTdXBwb3J0cyA9IHdpbmRvdy5DU1MgJiYgd2luZG93LkNTUy5zdXBwb3J0cztcbiAgICBbJ2F1dG8nLCAnbWFuaXB1bGF0aW9uJywgJ3Bhbi15JywgJ3Bhbi14JywgJ3Bhbi14IHBhbi15JywgJ25vbmUnXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCkge1xuXG4gICAgICAgIC8vIElmIGNzcy5zdXBwb3J0cyBpcyBub3Qgc3VwcG9ydGVkIGJ1dCB0aGVyZSBpcyBuYXRpdmUgdG91Y2gtYWN0aW9uIGFzc3VtZSBpdCBzdXBwb3J0c1xuICAgICAgICAvLyBhbGwgdmFsdWVzLiBUaGlzIGlzIHRoZSBjYXNlIGZvciBJRSAxMCBhbmQgMTEuXG4gICAgICAgIHRvdWNoTWFwW3ZhbF0gPSBjc3NTdXBwb3J0cyA/IHdpbmRvdy5DU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsIHZhbCkgOiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0b3VjaE1hcDtcbn1cblxuLyoqXG4gKiBSZWNvZ25pemVyIGZsb3cgZXhwbGFpbmVkOyAqXG4gKiBBbGwgcmVjb2duaXplcnMgaGF2ZSB0aGUgaW5pdGlhbCBzdGF0ZSBvZiBQT1NTSUJMRSB3aGVuIGEgaW5wdXQgc2Vzc2lvbiBzdGFydHMuXG4gKiBUaGUgZGVmaW5pdGlvbiBvZiBhIGlucHV0IHNlc3Npb24gaXMgZnJvbSB0aGUgZmlyc3QgaW5wdXQgdW50aWwgdGhlIGxhc3QgaW5wdXQsIHdpdGggYWxsIGl0J3MgbW92ZW1lbnQgaW4gaXQuICpcbiAqIEV4YW1wbGUgc2Vzc2lvbiBmb3IgbW91c2UtaW5wdXQ6IG1vdXNlZG93biAtPiBtb3VzZW1vdmUgLT4gbW91c2V1cFxuICpcbiAqIE9uIGVhY2ggcmVjb2duaXppbmcgY3ljbGUgKHNlZSBNYW5hZ2VyLnJlY29nbml6ZSkgdGhlIC5yZWNvZ25pemUoKSBtZXRob2QgaXMgZXhlY3V0ZWRcbiAqIHdoaWNoIGRldGVybWluZXMgd2l0aCBzdGF0ZSBpdCBzaG91bGQgYmUuXG4gKlxuICogSWYgdGhlIHJlY29nbml6ZXIgaGFzIHRoZSBzdGF0ZSBGQUlMRUQsIENBTkNFTExFRCBvciBSRUNPR05JWkVEIChlcXVhbHMgRU5ERUQpLCBpdCBpcyByZXNldCB0b1xuICogUE9TU0lCTEUgdG8gZ2l2ZSBpdCBhbm90aGVyIGNoYW5nZSBvbiB0aGUgbmV4dCBjeWNsZS5cbiAqXG4gKiAgICAgICAgICAgICAgIFBvc3NpYmxlXG4gKiAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgKy0tLS0tKy0tLS0tLS0tLS0tLS0tLStcbiAqICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgKy0tLS0tKy0tLS0tKyAgICAgICAgICAgICAgIHxcbiAqICAgICAgfCAgICAgICAgICAgfCAgICAgICAgICAgICAgIHxcbiAqICAgRmFpbGVkICAgICAgQ2FuY2VsbGVkICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLSstLS0tLS0rXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgUmVjb2duaXplZCAgICAgICBCZWdhblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaGFuZ2VkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kZWQvUmVjb2duaXplZFxuICovXG52YXIgU1RBVEVfUE9TU0lCTEUgPSAxO1xudmFyIFNUQVRFX0JFR0FOID0gMjtcbnZhciBTVEFURV9DSEFOR0VEID0gNDtcbnZhciBTVEFURV9FTkRFRCA9IDg7XG52YXIgU1RBVEVfUkVDT0dOSVpFRCA9IFNUQVRFX0VOREVEO1xudmFyIFNUQVRFX0NBTkNFTExFRCA9IDE2O1xudmFyIFNUQVRFX0ZBSUxFRCA9IDMyO1xuXG4vKipcbiAqIFJlY29nbml6ZXJcbiAqIEV2ZXJ5IHJlY29nbml6ZXIgbmVlZHMgdG8gZXh0ZW5kIGZyb20gdGhpcyBjbGFzcy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gUmVjb2duaXplcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMuaWQgPSB1bmlxdWVJZCgpO1xuXG4gICAgdGhpcy5tYW5hZ2VyID0gbnVsbDtcblxuICAgIC8vIGRlZmF1bHQgaXMgZW5hYmxlIHRydWVcbiAgICB0aGlzLm9wdGlvbnMuZW5hYmxlID0gaWZVbmRlZmluZWQodGhpcy5vcHRpb25zLmVuYWJsZSwgdHJ1ZSk7XG5cbiAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG5cbiAgICB0aGlzLnNpbXVsdGFuZW91cyA9IHt9O1xuICAgIHRoaXMucmVxdWlyZUZhaWwgPSBbXTtcbn1cblxuUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogQHZpcnR1YWxcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7fSxcblxuICAgIC8qKlxuICAgICAqIHNldCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtSZWNvZ25pemVyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBhbHNvIHVwZGF0ZSB0aGUgdG91Y2hBY3Rpb24sIGluIGNhc2Ugc29tZXRoaW5nIGNoYW5nZWQgYWJvdXQgdGhlIGRpcmVjdGlvbnMvZW5hYmxlZCBzdGF0ZVxuICAgICAgICB0aGlzLm1hbmFnZXIgJiYgdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAncmVjb2duaXplV2l0aCcsIHRoaXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaW11bHRhbmVvdXMgPSB0aGlzLnNpbXVsdGFuZW91cztcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoIXNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdKSB7XG4gICAgICAgICAgICBzaW11bHRhbmVvdXNbb3RoZXJSZWNvZ25pemVyLmlkXSA9IG90aGVyUmVjb2duaXplcjtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZWNvZ25pemVXaXRoKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkcm9wIHRoZSBzaW11bHRhbmVvdXMgbGluay4gaXQgZG9lc250IHJlbW92ZSB0aGUgbGluayBvbiB0aGUgb3RoZXIgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtSZWNvZ25pemVyfSB0aGlzXG4gICAgICovXG4gICAgZHJvcFJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlY29nbml6ZVdpdGgnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlclJlY29nbml6ZXIgPSBnZXRSZWNvZ25pemVyQnlOYW1lSWZNYW5hZ2VyKG90aGVyUmVjb2duaXplciwgdGhpcyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmVjb2duaXplciBjYW4gb25seSBydW4gd2hlbiBhbiBvdGhlciBpcyBmYWlsaW5nXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSBvdGhlclJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7UmVjb2duaXplcn0gdGhpc1xuICAgICAqL1xuICAgIHJlcXVpcmVGYWlsdXJlOiBmdW5jdGlvbihvdGhlclJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKG90aGVyUmVjb2duaXplciwgJ3JlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlcXVpcmVGYWlsID0gdGhpcy5yZXF1aXJlRmFpbDtcbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICBpZiAoaW5BcnJheShyZXF1aXJlRmFpbCwgb3RoZXJSZWNvZ25pemVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJlcXVpcmVGYWlsLnB1c2gob3RoZXJSZWNvZ25pemVyKTtcbiAgICAgICAgICAgIG90aGVyUmVjb2duaXplci5yZXF1aXJlRmFpbHVyZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZHJvcCB0aGUgcmVxdWlyZUZhaWx1cmUgbGluay4gaXQgZG9lcyBub3QgcmVtb3ZlIHRoZSBsaW5rIG9uIHRoZSBvdGhlciByZWNvZ25pemVyLlxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcn0gb3RoZXJSZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ9IHRoaXNcbiAgICAgKi9cbiAgICBkcm9wUmVxdWlyZUZhaWx1cmU6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICBpZiAoaW52b2tlQXJyYXlBcmcob3RoZXJSZWNvZ25pemVyLCAnZHJvcFJlcXVpcmVGYWlsdXJlJywgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgb3RoZXJSZWNvZ25pemVyID0gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHRoaXMpO1xuICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHRoaXMucmVxdWlyZUZhaWwsIG90aGVyUmVjb2duaXplcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVpcmVGYWlsLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGhhcyByZXF1aXJlIGZhaWx1cmVzIGJvb2xlYW5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBoYXNSZXF1aXJlRmFpbHVyZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGggPiAwO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBpZiB0aGUgcmVjb2duaXplciBjYW4gcmVjb2duaXplIHNpbXVsdGFuZW91cyB3aXRoIGFuIG90aGVyIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ9IG90aGVyUmVjb2duaXplclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNhblJlY29nbml6ZVdpdGg6IGZ1bmN0aW9uKG90aGVyUmVjb2duaXplcikge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNpbXVsdGFuZW91c1tvdGhlclJlY29nbml6ZXIuaWRdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBZb3Ugc2hvdWxkIHVzZSBgdHJ5RW1pdGAgaW5zdGVhZCBvZiBgZW1pdGAgZGlyZWN0bHkgdG8gY2hlY2tcbiAgICAgKiB0aGF0IGFsbCB0aGUgbmVlZGVkIHJlY29nbml6ZXJzIGhhcyBmYWlsZWQgYmVmb3JlIGVtaXR0aW5nLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgICAqL1xuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcblxuICAgICAgICBmdW5jdGlvbiBlbWl0KGV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLm1hbmFnZXIuZW1pdChldmVudCwgaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gJ3BhbnN0YXJ0JyBhbmQgJ3Bhbm1vdmUnXG4gICAgICAgIGlmIChzdGF0ZSA8IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCk7IC8vIHNpbXBsZSAnZXZlbnROYW1lJyBldmVudHNcblxuICAgICAgICBpZiAoaW5wdXQuYWRkaXRpb25hbEV2ZW50KSB7IC8vIGFkZGl0aW9uYWwgZXZlbnQocGFubGVmdCwgcGFucmlnaHQsIHBpbmNoaW4sIHBpbmNob3V0Li4uKVxuICAgICAgICAgICAgZW1pdChpbnB1dC5hZGRpdGlvbmFsRXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFuZW5kIGFuZCBwYW5jYW5jZWxcbiAgICAgICAgaWYgKHN0YXRlID49IFNUQVRFX0VOREVEKSB7XG4gICAgICAgICAgICBlbWl0KHNlbGYub3B0aW9ucy5ldmVudCArIHN0YXRlU3RyKHN0YXRlKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdGhhdCBhbGwgdGhlIHJlcXVpcmUgZmFpbHVyZSByZWNvZ25pemVycyBoYXMgZmFpbGVkLFxuICAgICAqIGlmIHRydWUsIGl0IGVtaXRzIGEgZ2VzdHVyZSBldmVudCxcbiAgICAgKiBvdGhlcndpc2UsIHNldHVwIHRoZSBzdGF0ZSB0byBGQUlMRUQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICovXG4gICAgdHJ5RW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuRW1pdCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpdCdzIGZhaWxpbmcgYW55d2F5XG4gICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGNhbiB3ZSBlbWl0P1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGNhbkVtaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICghKHRoaXMucmVxdWlyZUZhaWxbaV0uc3RhdGUgJiAoU1RBVEVfRkFJTEVEIHwgU1RBVEVfUE9TU0lCTEUpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIC8vIG1ha2UgYSBuZXcgY29weSBvZiB0aGUgaW5wdXREYXRhXG4gICAgICAgIC8vIHNvIHdlIGNhbiBjaGFuZ2UgdGhlIGlucHV0RGF0YSB3aXRob3V0IG1lc3NpbmcgdXAgdGhlIG90aGVyIHJlY29nbml6ZXJzXG4gICAgICAgIHZhciBpbnB1dERhdGFDbG9uZSA9IGFzc2lnbih7fSwgaW5wdXREYXRhKTtcblxuICAgICAgICAvLyBpcyBpcyBlbmFibGVkIGFuZCBhbGxvdyByZWNvZ25pemluZz9cbiAgICAgICAgaWYgKCFib29sT3JGbih0aGlzLm9wdGlvbnMuZW5hYmxlLCBbdGhpcywgaW5wdXREYXRhQ2xvbmVdKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZBSUxFRDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc2V0IHdoZW4gd2UndmUgcmVhY2hlZCB0aGUgZW5kXG4gICAgICAgIGlmICh0aGlzLnN0YXRlICYgKFNUQVRFX1JFQ09HTklaRUQgfCBTVEFURV9DQU5DRUxMRUQgfCBTVEFURV9GQUlMRUQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUE9TU0lCTEU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5wcm9jZXNzKGlucHV0RGF0YUNsb25lKTtcblxuICAgICAgICAvLyB0aGUgcmVjb2duaXplciBoYXMgcmVjb2duaXplZCBhIGdlc3R1cmVcbiAgICAgICAgLy8gc28gdHJpZ2dlciBhbiBldmVudFxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAmIChTVEFURV9CRUdBTiB8IFNUQVRFX0NIQU5HRUQgfCBTVEFURV9FTkRFRCB8IFNUQVRFX0NBTkNFTExFRCkpIHtcbiAgICAgICAgICAgIHRoaXMudHJ5RW1pdChpbnB1dERhdGFDbG9uZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBzdGF0ZSBvZiB0aGUgcmVjb2duaXplclxuICAgICAqIHRoZSBhY3R1YWwgcmVjb2duaXppbmcgaGFwcGVucyBpbiB0aGlzIG1ldGhvZFxuICAgICAqIEB2aXJ0dWFsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqIEByZXR1cm5zIHtDb25zdH0gU1RBVEVcbiAgICAgKi9cbiAgICBwcm9jZXNzOiBmdW5jdGlvbihpbnB1dERhdGEpIHsgfSwgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gdGhlIHByZWZlcnJlZCB0b3VjaC1hY3Rpb25cbiAgICAgKiBAdmlydHVhbFxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgICAvKipcbiAgICAgKiBjYWxsZWQgd2hlbiB0aGUgZ2VzdHVyZSBpc24ndCBhbGxvd2VkIHRvIHJlY29nbml6ZVxuICAgICAqIGxpa2Ugd2hlbiBhbm90aGVyIGlzIGJlaW5nIHJlY29nbml6ZWQgb3IgaXQgaXMgZGlzYWJsZWRcbiAgICAgKiBAdmlydHVhbFxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHsgfVxufTtcblxuLyoqXG4gKiBnZXQgYSB1c2FibGUgc3RyaW5nLCB1c2VkIGFzIGV2ZW50IHBvc3RmaXhcbiAqIEBwYXJhbSB7Q29uc3R9IHN0YXRlXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdGF0ZVxuICovXG5mdW5jdGlvbiBzdGF0ZVN0cihzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSAmIFNUQVRFX0NBTkNFTExFRCkge1xuICAgICAgICByZXR1cm4gJ2NhbmNlbCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZSAmIFNUQVRFX0VOREVEKSB7XG4gICAgICAgIHJldHVybiAnZW5kJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlICYgU1RBVEVfQ0hBTkdFRCkge1xuICAgICAgICByZXR1cm4gJ21vdmUnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgJiBTVEFURV9CRUdBTikge1xuICAgICAgICByZXR1cm4gJ3N0YXJ0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGRpcmVjdGlvbiBjb25zIHRvIHN0cmluZ1xuICogQHBhcmFtIHtDb25zdH0gZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBkaXJlY3Rpb25TdHIoZGlyZWN0aW9uKSB7XG4gICAgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fRE9XTikge1xuICAgICAgICByZXR1cm4gJ2Rvd24nO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9VUCkge1xuICAgICAgICByZXR1cm4gJ3VwJztcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBESVJFQ1RJT05fTEVGVCkge1xuICAgICAgICByZXR1cm4gJ2xlZnQnO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERJUkVDVElPTl9SSUdIVCkge1xuICAgICAgICByZXR1cm4gJ3JpZ2h0JztcbiAgICB9XG4gICAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIGdldCBhIHJlY29nbml6ZXIgYnkgbmFtZSBpZiBpdCBpcyBib3VuZCB0byBhIG1hbmFnZXJcbiAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IG90aGVyUmVjb2duaXplclxuICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gKiBAcmV0dXJucyB7UmVjb2duaXplcn1cbiAqL1xuZnVuY3Rpb24gZ2V0UmVjb2duaXplckJ5TmFtZUlmTWFuYWdlcihvdGhlclJlY29nbml6ZXIsIHJlY29nbml6ZXIpIHtcbiAgICB2YXIgbWFuYWdlciA9IHJlY29nbml6ZXIubWFuYWdlcjtcbiAgICBpZiAobWFuYWdlcikge1xuICAgICAgICByZXR1cm4gbWFuYWdlci5nZXQob3RoZXJSZWNvZ25pemVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG90aGVyUmVjb2duaXplcjtcbn1cblxuLyoqXG4gKiBUaGlzIHJlY29nbml6ZXIgaXMganVzdCB1c2VkIGFzIGEgYmFzZSBmb3IgdGhlIHNpbXBsZSBhdHRyaWJ1dGUgcmVjb2duaXplcnMuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gQXR0clJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5pbmhlcml0KEF0dHJSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBBdHRyUmVjb2duaXplclxuICAgICAqL1xuICAgIGRlZmF1bHRzOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICBwb2ludGVyczogMVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIGNoZWNrIGlmIGl0IHRoZSByZWNvZ25pemVyIHJlY2VpdmVzIHZhbGlkIGlucHV0LCBsaWtlIGlucHV0LmRpc3RhbmNlID4gMTAuXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMge0Jvb2xlYW59IHJlY29nbml6ZWRcbiAgICAgKi9cbiAgICBhdHRyVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvblBvaW50ZXJzID0gdGhpcy5vcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICByZXR1cm4gb3B0aW9uUG9pbnRlcnMgPT09IDAgfHwgaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25Qb2ludGVycztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgc3RhdGUgZm9yIHRoZSByZWNvZ25pemVyXG4gICAgICogQG1lbWJlcm9mIEF0dHJSZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0XG4gICAgICogQHJldHVybnMgeyp9IFN0YXRlXG4gICAgICovXG4gICAgcHJvY2VzczogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IGlucHV0LmV2ZW50VHlwZTtcblxuICAgICAgICB2YXIgaXNSZWNvZ25pemVkID0gc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEKTtcbiAgICAgICAgdmFyIGlzVmFsaWQgPSB0aGlzLmF0dHJUZXN0KGlucHV0KTtcblxuICAgICAgICAvLyBvbiBjYW5jZWwgaW5wdXQgYW5kIHdlJ3ZlIHJlY29nbml6ZWQgYmVmb3JlLCByZXR1cm4gU1RBVEVfQ0FOQ0VMTEVEXG4gICAgICAgIGlmIChpc1JlY29nbml6ZWQgJiYgKGV2ZW50VHlwZSAmIElOUFVUX0NBTkNFTCB8fCAhaXNWYWxpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0NBTkNFTExFRDtcbiAgICAgICAgfSBlbHNlIGlmIChpc1JlY29nbml6ZWQgfHwgaXNWYWxpZCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZSB8IFNUQVRFX0VOREVEO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghKHN0YXRlICYgU1RBVEVfQkVHQU4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX0JFR0FOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlIHwgU1RBVEVfQ0hBTkdFRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU1RBVEVfRkFJTEVEO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIFBhblxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gYW5kIG1vdmVkIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGFuUmVjb2duaXplcigpIHtcbiAgICBBdHRyUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5wWCA9IG51bGw7XG4gICAgdGhpcy5wWSA9IG51bGw7XG59XG5cbmluaGVyaXQoUGFuUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFBhblJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3BhbicsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHBvaW50ZXJzOiAxLFxuICAgICAgICBkaXJlY3Rpb246IERJUkVDVElPTl9BTExcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9ZKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlyZWN0aW9uICYgRElSRUNUSU9OX1ZFUlRJQ0FMKSB7XG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goVE9VQ0hfQUNUSU9OX1BBTl9YKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWN0aW9ucztcbiAgICB9LFxuXG4gICAgZGlyZWN0aW9uVGVzdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIHZhciBoYXNNb3ZlZCA9IHRydWU7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGlucHV0LmRpc3RhbmNlO1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gaW5wdXQuZGlyZWN0aW9uO1xuICAgICAgICB2YXIgeCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdmFyIHkgPSBpbnB1dC5kZWx0YVk7XG5cbiAgICAgICAgLy8gbG9jayB0byBheGlzP1xuICAgICAgICBpZiAoIShkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbikpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRpcmVjdGlvbiAmIERJUkVDVElPTl9IT1JJWk9OVEFMKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKHggPT09IDApID8gRElSRUNUSU9OX05PTkUgOiAoeCA8IDApID8gRElSRUNUSU9OX0xFRlQgOiBESVJFQ1RJT05fUklHSFQ7XG4gICAgICAgICAgICAgICAgaGFzTW92ZWQgPSB4ICE9IHRoaXMucFg7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhpbnB1dC5kZWx0YVgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoeSA9PT0gMCkgPyBESVJFQ1RJT05fTk9ORSA6ICh5IDwgMCkgPyBESVJFQ1RJT05fVVAgOiBESVJFQ1RJT05fRE9XTjtcbiAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHkgIT0gdGhpcy5wWTtcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKGlucHV0LmRlbHRhWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICByZXR1cm4gaGFzTW92ZWQgJiYgZGlzdGFuY2UgPiBvcHRpb25zLnRocmVzaG9sZCAmJiBkaXJlY3Rpb24gJiBvcHRpb25zLmRpcmVjdGlvbjtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBBdHRyUmVjb2duaXplci5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLCBpbnB1dCkgJiZcbiAgICAgICAgICAgICh0aGlzLnN0YXRlICYgU1RBVEVfQkVHQU4gfHwgKCEodGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKSAmJiB0aGlzLmRpcmVjdGlvblRlc3QoaW5wdXQpKSk7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG5cbiAgICAgICAgdGhpcy5wWCA9IGlucHV0LmRlbHRhWDtcbiAgICAgICAgdGhpcy5wWSA9IGlucHV0LmRlbHRhWTtcblxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyZWN0aW9uU3RyKGlucHV0LmRpcmVjdGlvbik7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgZGlyZWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLCBpbnB1dCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogUGluY2hcbiAqIFJlY29nbml6ZWQgd2hlbiB0d28gb3IgbW9yZSBwb2ludGVycyBhcmUgbW92aW5nIHRvd2FyZCAoem9vbS1pbikgb3IgYXdheSBmcm9tIGVhY2ggb3RoZXIgKHpvb20tb3V0KS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUGluY2hSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUGluY2hSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdwaW5jaCcsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnNjYWxlIC0gMSkgPiB0aGlzLm9wdGlvbnMudGhyZXNob2xkIHx8IHRoaXMuc3RhdGUgJiBTVEFURV9CRUdBTik7XG4gICAgfSxcblxuICAgIGVtaXQ6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5zY2FsZSAhPT0gMSkge1xuICAgICAgICAgICAgdmFyIGluT3V0ID0gaW5wdXQuc2NhbGUgPCAxID8gJ2luJyA6ICdvdXQnO1xuICAgICAgICAgICAgaW5wdXQuYWRkaXRpb25hbEV2ZW50ID0gdGhpcy5vcHRpb25zLmV2ZW50ICsgaW5PdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsIGlucHV0KTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBQcmVzc1xuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvd24gZm9yIHggbXMgd2l0aG91dCBhbnkgbW92ZW1lbnQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIFJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gUHJlc3NSZWNvZ25pemVyKCkge1xuICAgIFJlY29nbml6ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG59XG5cbmluaGVyaXQoUHJlc3NSZWNvZ25pemVyLCBSZWNvZ25pemVyLCB7XG4gICAgLyoqXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEBtZW1iZXJvZiBQcmVzc1JlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3ByZXNzJyxcbiAgICAgICAgcG9pbnRlcnM6IDEsXG4gICAgICAgIHRpbWU6IDI1MSwgLy8gbWluaW1hbCB0aW1lIG9mIHRoZSBwb2ludGVyIHRvIGJlIHByZXNzZWRcbiAgICAgICAgdGhyZXNob2xkOiA5IC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtUT1VDSF9BQ1RJT05fQVVUT107XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICB2YXIgdmFsaWRQb2ludGVycyA9IGlucHV0LnBvaW50ZXJzLmxlbmd0aCA9PT0gb3B0aW9ucy5wb2ludGVycztcbiAgICAgICAgdmFyIHZhbGlkTW92ZW1lbnQgPSBpbnB1dC5kaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgICB2YXIgdmFsaWRUaW1lID0gaW5wdXQuZGVsdGFUaW1lID4gb3B0aW9ucy50aW1lO1xuXG4gICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAoIXZhbGlkTW92ZW1lbnQgfHwgIXZhbGlkUG9pbnRlcnMgfHwgKGlucHV0LmV2ZW50VHlwZSAmIChJTlBVVF9FTkQgfCBJTlBVVF9DQU5DRUwpICYmICF2YWxpZFRpbWUpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuZXZlbnRUeXBlICYgSU5QVVRfU1RBUlQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dENvbnRleHQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICB9LCBvcHRpb25zLnRpbWUsIHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORCkge1xuICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFNUQVRFX0ZBSUxFRDtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICAgIH0sXG5cbiAgICBlbWl0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gU1RBVEVfUkVDT0dOSVpFRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0ICYmIChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9FTkQpKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyAndXAnLCBpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dC50aW1lU3RhbXAgPSBub3coKTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogUm90YXRlXG4gKiBSZWNvZ25pemVkIHdoZW4gdHdvIG9yIG1vcmUgcG9pbnRlciBhcmUgbW92aW5nIGluIGEgY2lyY3VsYXIgbW90aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBBdHRyUmVjb2duaXplclxuICovXG5mdW5jdGlvbiBSb3RhdGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoUm90YXRlUmVjb2duaXplciwgQXR0clJlY29nbml6ZXIsIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQG1lbWJlcm9mIFJvdGF0ZVJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBkZWZhdWx0czoge1xuICAgICAgICBldmVudDogJ3JvdGF0ZScsXG4gICAgICAgIHRocmVzaG9sZDogMCxcbiAgICAgICAgcG9pbnRlcnM6IDJcbiAgICB9LFxuXG4gICAgZ2V0VG91Y2hBY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW1RPVUNIX0FDVElPTl9OT05FXTtcbiAgICB9LFxuXG4gICAgYXR0clRlc3Q6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsIGlucHV0KSAmJlxuICAgICAgICAgICAgKE1hdGguYWJzKGlucHV0LnJvdGF0aW9uKSA+IHRoaXMub3B0aW9ucy50aHJlc2hvbGQgfHwgdGhpcy5zdGF0ZSAmIFNUQVRFX0JFR0FOKTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBTd2lwZVxuICogUmVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIG1vdmluZyBmYXN0ICh2ZWxvY2l0eSksIHdpdGggZW5vdWdoIGRpc3RhbmNlIGluIHRoZSBhbGxvd2VkIGRpcmVjdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgQXR0clJlY29nbml6ZXJcbiAqL1xuZnVuY3Rpb24gU3dpcGVSZWNvZ25pemVyKCkge1xuICAgIEF0dHJSZWNvZ25pemVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmluaGVyaXQoU3dpcGVSZWNvZ25pemVyLCBBdHRyUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgU3dpcGVSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICdzd2lwZScsXG4gICAgICAgIHRocmVzaG9sZDogMTAsXG4gICAgICAgIHZlbG9jaXR5OiAwLjMsXG4gICAgICAgIGRpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgICAgIHBvaW50ZXJzOiAxXG4gICAgfSxcblxuICAgIGdldFRvdWNoQWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFBhblJlY29nbml6ZXIucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyk7XG4gICAgfSxcblxuICAgIGF0dHJUZXN0OiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5vcHRpb25zLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIHZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gJiAoRElSRUNUSU9OX0hPUklaT05UQUwgfCBESVJFQ1RJT05fVkVSVElDQUwpKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eSA9IGlucHV0Lm92ZXJhbGxWZWxvY2l0eTtcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gJiBESVJFQ1RJT05fSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlYO1xuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiAmIERJUkVDVElPTl9WRVJUSUNBTCkge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSBpbnB1dC5vdmVyYWxsVmVsb2NpdHlZO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcywgaW5wdXQpICYmXG4gICAgICAgICAgICBkaXJlY3Rpb24gJiBpbnB1dC5vZmZzZXREaXJlY3Rpb24gJiZcbiAgICAgICAgICAgIGlucHV0LmRpc3RhbmNlID4gdGhpcy5vcHRpb25zLnRocmVzaG9sZCAmJlxuICAgICAgICAgICAgaW5wdXQubWF4UG9pbnRlcnMgPT0gdGhpcy5vcHRpb25zLnBvaW50ZXJzICYmXG4gICAgICAgICAgICBhYnModmVsb2NpdHkpID4gdGhpcy5vcHRpb25zLnZlbG9jaXR5ICYmIGlucHV0LmV2ZW50VHlwZSAmIElOUFVUX0VORDtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcmVjdGlvblN0cihpbnB1dC5vZmZzZXREaXJlY3Rpb24pO1xuICAgICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQgKyBkaXJlY3Rpb24sIGlucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgaW5wdXQpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEEgdGFwIGlzIGVjb2duaXplZCB3aGVuIHRoZSBwb2ludGVyIGlzIGRvaW5nIGEgc21hbGwgdGFwL2NsaWNrLiBNdWx0aXBsZSB0YXBzIGFyZSByZWNvZ25pemVkIGlmIHRoZXkgb2NjdXJcbiAqIGJldHdlZW4gdGhlIGdpdmVuIGludGVydmFsIGFuZCBwb3NpdGlvbi4gVGhlIGRlbGF5IG9wdGlvbiBjYW4gYmUgdXNlZCB0byByZWNvZ25pemUgbXVsdGktdGFwcyB3aXRob3V0IGZpcmluZ1xuICogYSBzaW5nbGUgdGFwLlxuICpcbiAqIFRoZSBldmVudERhdGEgZnJvbSB0aGUgZW1pdHRlZCBldmVudCBjb250YWlucyB0aGUgcHJvcGVydHkgYHRhcENvdW50YCwgd2hpY2ggY29udGFpbnMgdGhlIGFtb3VudCBvZlxuICogbXVsdGktdGFwcyBiZWluZyByZWNvZ25pemVkLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBSZWNvZ25pemVyXG4gKi9cbmZ1bmN0aW9uIFRhcFJlY29nbml6ZXIoKSB7XG4gICAgUmVjb2duaXplci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgLy8gcHJldmlvdXMgdGltZSBhbmQgY2VudGVyLFxuICAgIC8vIHVzZWQgZm9yIHRhcCBjb3VudGluZ1xuICAgIHRoaXMucFRpbWUgPSBmYWxzZTtcbiAgICB0aGlzLnBDZW50ZXIgPSBmYWxzZTtcblxuICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICB0aGlzLl9pbnB1dCA9IG51bGw7XG4gICAgdGhpcy5jb3VudCA9IDA7XG59XG5cbmluaGVyaXQoVGFwUmVjb2duaXplciwgUmVjb2duaXplciwge1xuICAgIC8qKlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAbWVtYmVyb2YgUGluY2hSZWNvZ25pemVyXG4gICAgICovXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZXZlbnQ6ICd0YXAnLFxuICAgICAgICBwb2ludGVyczogMSxcbiAgICAgICAgdGFwczogMSxcbiAgICAgICAgaW50ZXJ2YWw6IDMwMCwgLy8gbWF4IHRpbWUgYmV0d2VlbiB0aGUgbXVsdGktdGFwIHRhcHNcbiAgICAgICAgdGltZTogMjUwLCAvLyBtYXggdGltZSBvZiB0aGUgcG9pbnRlciB0byBiZSBkb3duIChsaWtlIGZpbmdlciBvbiB0aGUgc2NyZWVuKVxuICAgICAgICB0aHJlc2hvbGQ6IDksIC8vIGEgbWluaW1hbCBtb3ZlbWVudCBpcyBvaywgYnV0IGtlZXAgaXQgbG93XG4gICAgICAgIHBvc1RocmVzaG9sZDogMTAgLy8gYSBtdWx0aS10YXAgY2FuIGJlIGEgYml0IG9mZiB0aGUgaW5pdGlhbCBwb3NpdGlvblxuICAgIH0sXG5cbiAgICBnZXRUb3VjaEFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbVE9VQ0hfQUNUSU9OX01BTklQVUxBVElPTl07XG4gICAgfSxcblxuICAgIHByb2Nlc3M6IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIHZhciB2YWxpZFBvaW50ZXJzID0gaW5wdXQucG9pbnRlcnMubGVuZ3RoID09PSBvcHRpb25zLnBvaW50ZXJzO1xuICAgICAgICB2YXIgdmFsaWRNb3ZlbWVudCA9IGlucHV0LmRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgIHZhciB2YWxpZFRvdWNoVGltZSA9IGlucHV0LmRlbHRhVGltZSA8IG9wdGlvbnMudGltZTtcblxuICAgICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAgICAgaWYgKChpbnB1dC5ldmVudFR5cGUgJiBJTlBVVF9TVEFSVCkgJiYgKHRoaXMuY291bnQgPT09IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2Ugb25seSBhbGxvdyBsaXR0bGUgbW92ZW1lbnRcbiAgICAgICAgLy8gYW5kIHdlJ3ZlIHJlYWNoZWQgYW4gZW5kIGV2ZW50LCBzbyBhIHRhcCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAodmFsaWRNb3ZlbWVudCAmJiB2YWxpZFRvdWNoVGltZSAmJiB2YWxpZFBvaW50ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQuZXZlbnRUeXBlICE9IElOUFVUX0VORCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWxpZEludGVydmFsID0gdGhpcy5wVGltZSA/IChpbnB1dC50aW1lU3RhbXAgLSB0aGlzLnBUaW1lIDwgb3B0aW9ucy5pbnRlcnZhbCkgOiB0cnVlO1xuICAgICAgICAgICAgdmFyIHZhbGlkTXVsdGlUYXAgPSAhdGhpcy5wQ2VudGVyIHx8IGdldERpc3RhbmNlKHRoaXMucENlbnRlciwgaW5wdXQuY2VudGVyKSA8IG9wdGlvbnMucG9zVGhyZXNob2xkO1xuXG4gICAgICAgICAgICB0aGlzLnBUaW1lID0gaW5wdXQudGltZVN0YW1wO1xuICAgICAgICAgICAgdGhpcy5wQ2VudGVyID0gaW5wdXQuY2VudGVyO1xuXG4gICAgICAgICAgICBpZiAoIXZhbGlkTXVsdGlUYXAgfHwgIXZhbGlkSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuXG4gICAgICAgICAgICAvLyBpZiB0YXAgY291bnQgbWF0Y2hlcyB3ZSBoYXZlIHJlY29nbml6ZWQgaXQsXG4gICAgICAgICAgICAvLyBlbHNlIGl0IGhhcyBiZWdhbiByZWNvZ25pemluZy4uLlxuICAgICAgICAgICAgdmFyIHRhcENvdW50ID0gdGhpcy5jb3VudCAlIG9wdGlvbnMudGFwcztcbiAgICAgICAgICAgIGlmICh0YXBDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGZhaWxpbmcgcmVxdWlyZW1lbnRzLCBpbW1lZGlhdGVseSB0cmlnZ2VyIHRoZSB0YXAgZXZlbnRcbiAgICAgICAgICAgICAgICAvLyBvciB3YWl0IGFzIGxvbmcgYXMgdGhlIG11bHRpdGFwIGludGVydmFsIHRvIHRyaWdnZXJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFX1JFQ09HTklaRUQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPR05JWkVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cnlFbWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMuaW50ZXJ2YWwsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1RBVEVfQkVHQU47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIGZhaWxUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0Q29udGV4dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GQUlMRUQ7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5pbnRlcnZhbCwgdGhpcyk7XG4gICAgICAgIHJldHVybiBTVEFURV9GQUlMRUQ7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgICB9LFxuXG4gICAgZW1pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFNUQVRFX1JFQ09HTklaRUQpIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0LnRhcENvdW50ID0gdGhpcy5jb3VudDtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCwgdGhpcy5faW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogU2ltcGxlIHdheSB0byBjcmVhdGUgYSBtYW5hZ2VyIHdpdGggYSBkZWZhdWx0IHNldCBvZiByZWNvZ25pemVycy5cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBIYW1tZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMucmVjb2duaXplcnMgPSBpZlVuZGVmaW5lZChvcHRpb25zLnJlY29nbml6ZXJzLCBIYW1tZXIuZGVmYXVsdHMucHJlc2V0KTtcbiAgICByZXR1cm4gbmV3IE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbkhhbW1lci5WRVJTSU9OID0gJzIuMC43JztcblxuLyoqXG4gKiBkZWZhdWx0IHNldHRpbmdzXG4gKiBAbmFtZXNwYWNlXG4gKi9cbkhhbW1lci5kZWZhdWx0cyA9IHtcbiAgICAvKipcbiAgICAgKiBzZXQgaWYgRE9NIGV2ZW50cyBhcmUgYmVpbmcgdHJpZ2dlcmVkLlxuICAgICAqIEJ1dCB0aGlzIGlzIHNsb3dlciBhbmQgdW51c2VkIGJ5IHNpbXBsZSBpbXBsZW1lbnRhdGlvbnMsIHNvIGRpc2FibGVkIGJ5IGRlZmF1bHQuXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBkb21FdmVudHM6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGZvciB0aGUgdG91Y2hBY3Rpb24gcHJvcGVydHkvZmFsbGJhY2suXG4gICAgICogV2hlbiBzZXQgdG8gYGNvbXB1dGVgIGl0IHdpbGwgbWFnaWNhbGx5IHNldCB0aGUgY29ycmVjdCB2YWx1ZSBiYXNlZCBvbiB0aGUgYWRkZWQgcmVjb2duaXplcnMuXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKiBAZGVmYXVsdCBjb21wdXRlXG4gICAgICovXG4gICAgdG91Y2hBY3Rpb246IFRPVUNIX0FDVElPTl9DT01QVVRFLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIGVuYWJsZTogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEVYUEVSSU1FTlRBTCBGRUFUVVJFIC0tIGNhbiBiZSByZW1vdmVkL2NoYW5nZWRcbiAgICAgKiBDaGFuZ2UgdGhlIHBhcmVudCBpbnB1dCB0YXJnZXQgZWxlbWVudC5cbiAgICAgKiBJZiBOdWxsLCB0aGVuIGl0IGlzIGJlaW5nIHNldCB0aGUgdG8gbWFpbiBlbGVtZW50LlxuICAgICAqIEB0eXBlIHtOdWxsfEV2ZW50VGFyZ2V0fVxuICAgICAqIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICBpbnB1dFRhcmdldDogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIGZvcmNlIGFuIGlucHV0IGNsYXNzXG4gICAgICogQHR5cGUge051bGx8RnVuY3Rpb259XG4gICAgICogQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgIGlucHV0Q2xhc3M6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHJlY29nbml6ZXIgc2V0dXAgd2hlbiBjYWxsaW5nIGBIYW1tZXIoKWBcbiAgICAgKiBXaGVuIGNyZWF0aW5nIGEgbmV3IE1hbmFnZXIgdGhlc2Ugd2lsbCBiZSBza2lwcGVkLlxuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKi9cbiAgICBwcmVzZXQ6IFtcbiAgICAgICAgLy8gUmVjb2duaXplckNsYXNzLCBvcHRpb25zLCBbcmVjb2duaXplV2l0aCwgLi4uXSwgW3JlcXVpcmVGYWlsdXJlLCAuLi5dXG4gICAgICAgIFtSb3RhdGVSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX1dLFxuICAgICAgICBbUGluY2hSZWNvZ25pemVyLCB7ZW5hYmxlOiBmYWxzZX0sIFsncm90YXRlJ11dLFxuICAgICAgICBbU3dpcGVSZWNvZ25pemVyLCB7ZGlyZWN0aW9uOiBESVJFQ1RJT05fSE9SSVpPTlRBTH1dLFxuICAgICAgICBbUGFuUmVjb2duaXplciwge2RpcmVjdGlvbjogRElSRUNUSU9OX0hPUklaT05UQUx9LCBbJ3N3aXBlJ11dLFxuICAgICAgICBbVGFwUmVjb2duaXplcl0sXG4gICAgICAgIFtUYXBSZWNvZ25pemVyLCB7ZXZlbnQ6ICdkb3VibGV0YXAnLCB0YXBzOiAyfSwgWyd0YXAnXV0sXG4gICAgICAgIFtQcmVzc1JlY29nbml6ZXJdXG4gICAgXSxcblxuICAgIC8qKlxuICAgICAqIFNvbWUgQ1NTIHByb3BlcnRpZXMgY2FuIGJlIHVzZWQgdG8gaW1wcm92ZSB0aGUgd29ya2luZyBvZiBIYW1tZXIuXG4gICAgICogQWRkIHRoZW0gdG8gdGhpcyBtZXRob2QgYW5kIHRoZXkgd2lsbCBiZSBzZXQgd2hlbiBjcmVhdGluZyBhIG5ldyBNYW5hZ2VyLlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKi9cbiAgICBjc3NQcm9wczoge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGV4dCBzZWxlY3Rpb24gdG8gaW1wcm92ZSB0aGUgZHJhZ2dpbmcgZ2VzdHVyZS4gTWFpbmx5IGZvciBkZXNrdG9wIGJyb3dzZXJzLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZSB0aGUgV2luZG93cyBQaG9uZSBncmlwcGVycyB3aGVuIHByZXNzaW5nIGFuIGVsZW1lbnQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hTZWxlY3Q6ICdub25lJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGhlIGRlZmF1bHQgY2FsbG91dCBzaG93biB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldC5cbiAgICAgICAgICogT24gaU9TLCB3aGVuIHlvdSB0b3VjaCBhbmQgaG9sZCBhIHRvdWNoIHRhcmdldCBzdWNoIGFzIGEgbGluaywgU2FmYXJpIGRpc3BsYXlzXG4gICAgICAgICAqIGEgY2FsbG91dCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsaW5rLiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGlzYWJsZSB0aGF0IGNhbGxvdXQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdub25lJ1xuICAgICAgICAgKi9cbiAgICAgICAgdG91Y2hDYWxsb3V0OiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHpvb21pbmcgaXMgZW5hYmxlZC4gVXNlZCBieSBJRTEwPlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKiBAZGVmYXVsdCAnbm9uZSdcbiAgICAgICAgICovXG4gICAgICAgIGNvbnRlbnRab29taW5nOiAnbm9uZScsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyB0aGF0IGFuIGVudGlyZSBlbGVtZW50IHNob3VsZCBiZSBkcmFnZ2FibGUgaW5zdGVhZCBvZiBpdHMgY29udGVudHMuIE1haW5seSBmb3IgZGVza3RvcCBicm93c2Vycy5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQGRlZmF1bHQgJ25vbmUnXG4gICAgICAgICAqL1xuICAgICAgICB1c2VyRHJhZzogJ25vbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdmVycmlkZXMgdGhlIGhpZ2hsaWdodCBjb2xvciBzaG93biB3aGVuIHRoZSB1c2VyIHRhcHMgYSBsaW5rIG9yIGEgSmF2YVNjcmlwdFxuICAgICAgICAgKiBjbGlja2FibGUgZWxlbWVudCBpbiBpT1MuIFRoaXMgcHJvcGVydHkgb2JleXMgdGhlIGFscGhhIHZhbHVlLCBpZiBzcGVjaWZpZWQuXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqIEBkZWZhdWx0ICdyZ2JhKDAsMCwwLDApJ1xuICAgICAgICAgKi9cbiAgICAgICAgdGFwSGlnaGxpZ2h0Q29sb3I6ICdyZ2JhKDAsMCwwLDApJ1xuICAgIH1cbn07XG5cbnZhciBTVE9QID0gMTtcbnZhciBGT1JDRURfU1RPUCA9IDI7XG5cbi8qKlxuICogTWFuYWdlclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIE1hbmFnZXIoZWxlbWVudCwgb3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IGFzc2lnbih7fSwgSGFtbWVyLmRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCA9IHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldCB8fCBlbGVtZW50O1xuXG4gICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgIHRoaXMucmVjb2duaXplcnMgPSBbXTtcbiAgICB0aGlzLm9sZENzc1Byb3BzID0ge307XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuaW5wdXQgPSBjcmVhdGVJbnB1dEluc3RhbmNlKHRoaXMpO1xuICAgIHRoaXMudG91Y2hBY3Rpb24gPSBuZXcgVG91Y2hBY3Rpb24odGhpcywgdGhpcy5vcHRpb25zLnRvdWNoQWN0aW9uKTtcblxuICAgIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIHRydWUpO1xuXG4gICAgZWFjaCh0aGlzLm9wdGlvbnMucmVjb2duaXplcnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgdmFyIHJlY29nbml6ZXIgPSB0aGlzLmFkZChuZXcgKGl0ZW1bMF0pKGl0ZW1bMV0pKTtcbiAgICAgICAgaXRlbVsyXSAmJiByZWNvZ25pemVyLnJlY29nbml6ZVdpdGgoaXRlbVsyXSk7XG4gICAgICAgIGl0ZW1bM10gJiYgcmVjb2duaXplci5yZXF1aXJlRmFpbHVyZShpdGVtWzNdKTtcbiAgICB9LCB0aGlzKTtcbn1cblxuTWFuYWdlci5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogc2V0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtNYW5hZ2VyfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBPcHRpb25zIHRoYXQgbmVlZCBhIGxpdHRsZSBtb3JlIHNldHVwXG4gICAgICAgIGlmIChvcHRpb25zLnRvdWNoQWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmlucHV0VGFyZ2V0KSB7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBleGlzdGluZyBldmVudCBsaXN0ZW5lcnMgYW5kIHJlaW5pdGlhbGl6ZVxuICAgICAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnRhcmdldCA9IG9wdGlvbnMuaW5wdXRUYXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmlucHV0LmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogc3RvcCByZWNvZ25pemluZyBmb3IgdGhpcyBzZXNzaW9uLlxuICAgICAqIFRoaXMgc2Vzc2lvbiB3aWxsIGJlIGRpc2NhcmRlZCwgd2hlbiBhIG5ldyBbaW5wdXRdc3RhcnQgZXZlbnQgaXMgZmlyZWQuXG4gICAgICogV2hlbiBmb3JjZWQsIHRoZSByZWNvZ25pemVyIGN5Y2xlIGlzIHN0b3BwZWQgaW1tZWRpYXRlbHkuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VdXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnN0b3BwZWQgPSBmb3JjZSA/IEZPUkNFRF9TVE9QIDogU1RPUDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcnVuIHRoZSByZWNvZ25pemVycyFcbiAgICAgKiBjYWxsZWQgYnkgdGhlIGlucHV0SGFuZGxlciBmdW5jdGlvbiBvbiBldmVyeSBtb3ZlbWVudCBvZiB0aGUgcG9pbnRlcnMgKHRvdWNoZXMpXG4gICAgICogaXQgd2Fsa3MgdGhyb3VnaCBhbGwgdGhlIHJlY29nbml6ZXJzIGFuZCB0cmllcyB0byBkZXRlY3QgdGhlIGdlc3R1cmUgdGhhdCBpcyBiZWluZyBtYWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0RGF0YVxuICAgICAqL1xuICAgIHJlY29nbml6ZTogZnVuY3Rpb24oaW5wdXREYXRhKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICBpZiAoc2Vzc2lvbi5zdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBydW4gdGhlIHRvdWNoLWFjdGlvbiBwb2x5ZmlsbFxuICAgICAgICB0aGlzLnRvdWNoQWN0aW9uLnByZXZlbnREZWZhdWx0cyhpbnB1dERhdGEpO1xuXG4gICAgICAgIHZhciByZWNvZ25pemVyO1xuICAgICAgICB2YXIgcmVjb2duaXplcnMgPSB0aGlzLnJlY29nbml6ZXJzO1xuXG4gICAgICAgIC8vIHRoaXMgaG9sZHMgdGhlIHJlY29nbml6ZXIgdGhhdCBpcyBiZWluZyByZWNvZ25pemVkLlxuICAgICAgICAvLyBzbyB0aGUgcmVjb2duaXplcidzIHN0YXRlIG5lZWRzIHRvIGJlIEJFR0FOLCBDSEFOR0VELCBFTkRFRCBvciBSRUNPR05JWkVEXG4gICAgICAgIC8vIGlmIG5vIHJlY29nbml6ZXIgaXMgZGV0ZWN0aW5nIGEgdGhpbmcsIGl0IGlzIHNldCB0byBgbnVsbGBcbiAgICAgICAgdmFyIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXI7XG5cbiAgICAgICAgLy8gcmVzZXQgd2hlbiB0aGUgbGFzdCByZWNvZ25pemVyIGlzIHJlY29nbml6ZWRcbiAgICAgICAgLy8gb3Igd2hlbiB3ZSdyZSBpbiBhIG5ldyBzZXNzaW9uXG4gICAgICAgIGlmICghY3VyUmVjb2duaXplciB8fCAoY3VyUmVjb2duaXplciAmJiBjdXJSZWNvZ25pemVyLnN0YXRlICYgU1RBVEVfUkVDT0dOSVpFRCkpIHtcbiAgICAgICAgICAgIGN1clJlY29nbml6ZXIgPSBzZXNzaW9uLmN1clJlY29nbml6ZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHJlY29nbml6ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmVjb2duaXplciA9IHJlY29nbml6ZXJzW2ldO1xuXG4gICAgICAgICAgICAvLyBmaW5kIG91dCBpZiB3ZSBhcmUgYWxsb3dlZCB0cnkgdG8gcmVjb2duaXplIHRoZSBpbnB1dCBmb3IgdGhpcyBvbmUuXG4gICAgICAgICAgICAvLyAxLiAgIGFsbG93IGlmIHRoZSBzZXNzaW9uIGlzIE5PVCBmb3JjZWQgc3RvcHBlZCAoc2VlIHRoZSAuc3RvcCgpIG1ldGhvZClcbiAgICAgICAgICAgIC8vIDIuICAgYWxsb3cgaWYgd2Ugc3RpbGwgaGF2ZW4ndCByZWNvZ25pemVkIGEgZ2VzdHVyZSBpbiB0aGlzIHNlc3Npb24sIG9yIHRoZSB0aGlzIHJlY29nbml6ZXIgaXMgdGhlIG9uZVxuICAgICAgICAgICAgLy8gICAgICB0aGF0IGlzIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICAgICAgICAvLyAzLiAgIGFsbG93IGlmIHRoZSByZWNvZ25pemVyIGlzIGFsbG93ZWQgdG8gcnVuIHNpbXVsdGFuZW91cyB3aXRoIHRoZSBjdXJyZW50IHJlY29nbml6ZWQgcmVjb2duaXplci5cbiAgICAgICAgICAgIC8vICAgICAgdGhpcyBjYW4gYmUgc2V0dXAgd2l0aCB0aGUgYHJlY29nbml6ZVdpdGgoKWAgbWV0aG9kIG9uIHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgaWYgKHNlc3Npb24uc3RvcHBlZCAhPT0gRk9SQ0VEX1NUT1AgJiYgKCAvLyAxXG4gICAgICAgICAgICAgICAgICAgICFjdXJSZWNvZ25pemVyIHx8IHJlY29nbml6ZXIgPT0gY3VyUmVjb2duaXplciB8fCAvLyAyXG4gICAgICAgICAgICAgICAgICAgIHJlY29nbml6ZXIuY2FuUmVjb2duaXplV2l0aChjdXJSZWNvZ25pemVyKSkpIHsgLy8gM1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVjb2duaXplKGlucHV0RGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXIucmVzZXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgdGhlIHJlY29nbml6ZXIgaGFzIGJlZW4gcmVjb2duaXppbmcgdGhlIGlucHV0IGFzIGEgdmFsaWQgZ2VzdHVyZSwgd2Ugd2FudCB0byBzdG9yZSB0aGlzIG9uZSBhcyB0aGVcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIHJlY29nbml6ZXIuIGJ1dCBvbmx5IGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgcmVjb2duaXplclxuICAgICAgICAgICAgaWYgKCFjdXJSZWNvZ25pemVyICYmIHJlY29nbml6ZXIuc3RhdGUgJiAoU1RBVEVfQkVHQU4gfCBTVEFURV9DSEFOR0VEIHwgU1RBVEVfRU5ERUQpKSB7XG4gICAgICAgICAgICAgICAgY3VyUmVjb2duaXplciA9IHNlc3Npb24uY3VyUmVjb2duaXplciA9IHJlY29nbml6ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZ2V0IGEgcmVjb2duaXplciBieSBpdHMgZXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0ge1JlY29nbml6ZXJ8U3RyaW5nfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TnVsbH1cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKHJlY29nbml6ZXIgaW5zdGFuY2VvZiBSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChyZWNvZ25pemVyc1tpXS5vcHRpb25zLmV2ZW50ID09IHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjb2duaXplcnNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGFkZCBhIHJlY29nbml6ZXIgdG8gdGhlIG1hbmFnZXJcbiAgICAgKiBleGlzdGluZyByZWNvZ25pemVycyB3aXRoIHRoZSBzYW1lIGV2ZW50IG5hbWUgd2lsbCBiZSByZW1vdmVkXG4gICAgICogQHBhcmFtIHtSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gICAgICogQHJldHVybnMge1JlY29nbml6ZXJ8TWFuYWdlcn1cbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdhZGQnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcbiAgICAgICAgdmFyIGV4aXN0aW5nID0gdGhpcy5nZXQocmVjb2duaXplci5vcHRpb25zLmV2ZW50KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShleGlzdGluZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY29nbml6ZXJzLnB1c2gocmVjb2duaXplcik7XG4gICAgICAgIHJlY29nbml6ZXIubWFuYWdlciA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSBhIHJlY29nbml6ZXIgYnkgbmFtZSBvciBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7UmVjb2duaXplcnxTdHJpbmd9IHJlY29nbml6ZXJcbiAgICAgKiBAcmV0dXJucyB7TWFuYWdlcn1cbiAgICAgKi9cbiAgICByZW1vdmU6IGZ1bmN0aW9uKHJlY29nbml6ZXIpIHtcbiAgICAgICAgaWYgKGludm9rZUFycmF5QXJnKHJlY29nbml6ZXIsICdyZW1vdmUnLCB0aGlzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICByZWNvZ25pemVyID0gdGhpcy5nZXQocmVjb2duaXplcik7XG5cbiAgICAgICAgLy8gbGV0J3MgbWFrZSBzdXJlIHRoaXMgcmVjb2duaXplciBleGlzdHNcbiAgICAgICAgaWYgKHJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgIHZhciByZWNvZ25pemVycyA9IHRoaXMucmVjb2duaXplcnM7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpbkFycmF5KHJlY29nbml6ZXJzLCByZWNvZ25pemVyKTtcblxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJlY29nbml6ZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBiaW5kIGV2ZW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb246IGZ1bmN0aW9uKGV2ZW50cywgaGFuZGxlcikge1xuICAgICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gPSBoYW5kbGVyc1tldmVudF0gfHwgW107XG4gICAgICAgICAgICBoYW5kbGVyc1tldmVudF0ucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB1bmJpbmQgZXZlbnQsIGxlYXZlIGVtaXQgYmxhbmsgdG8gcmVtb3ZlIGFsbCBoYW5kbGVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaGFuZGxlcl1cbiAgICAgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSB0aGlzXG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihldmVudHMsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzO1xuICAgICAgICBlYWNoKHNwbGl0U3RyKGV2ZW50cyksIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlcnNbZXZlbnRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyc1tldmVudF0gJiYgaGFuZGxlcnNbZXZlbnRdLnNwbGljZShpbkFycmF5KGhhbmRsZXJzW2V2ZW50XSwgaGFuZGxlciksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGVtaXQgZXZlbnQgdG8gdGhlIGxpc3RlbmVyc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgLy8gd2UgYWxzbyB3YW50IHRvIHRyaWdnZXIgZG9tIGV2ZW50c1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRvbUV2ZW50cykge1xuICAgICAgICAgICAgdHJpZ2dlckRvbUV2ZW50KGV2ZW50LCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIGhhbmRsZXJzLCBzbyBza2lwIGl0IGFsbFxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW2V2ZW50XSAmJiB0aGlzLmhhbmRsZXJzW2V2ZW50XS5zbGljZSgpO1xuICAgICAgICBpZiAoIWhhbmRsZXJzIHx8ICFoYW5kbGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEudHlwZSA9IGV2ZW50O1xuICAgICAgICBkYXRhLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkYXRhLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGhhbmRsZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgaGFuZGxlcnNbaV0oZGF0YSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZGVzdHJveSB0aGUgbWFuYWdlciBhbmQgdW5iaW5kcyBhbGwgZXZlbnRzXG4gICAgICogaXQgZG9lc24ndCB1bmJpbmQgZG9tIGV2ZW50cywgdGhhdCBpcyB0aGUgdXNlciBvd24gcmVzcG9uc2liaWxpdHlcbiAgICAgKi9cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ICYmIHRvZ2dsZUNzc1Byb3BzKHRoaXMsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHt9O1xuICAgICAgICB0aGlzLmlucHV0LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICB9XG59O1xuXG4vKipcbiAqIGFkZC9yZW1vdmUgdGhlIGNzcyBwcm9wZXJ0aWVzIGFzIGRlZmluZWQgaW4gbWFuYWdlci5vcHRpb25zLmNzc1Byb3BzXG4gKiBAcGFyYW0ge01hbmFnZXJ9IG1hbmFnZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYWRkXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZUNzc1Byb3BzKG1hbmFnZXIsIGFkZCkge1xuICAgIHZhciBlbGVtZW50ID0gbWFuYWdlci5lbGVtZW50O1xuICAgIGlmICghZWxlbWVudC5zdHlsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwcm9wO1xuICAgIGVhY2gobWFuYWdlci5vcHRpb25zLmNzc1Byb3BzLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICBwcm9wID0gcHJlZml4ZWQoZWxlbWVudC5zdHlsZSwgbmFtZSk7XG4gICAgICAgIGlmIChhZGQpIHtcbiAgICAgICAgICAgIG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gPSBlbGVtZW50LnN0eWxlW3Byb3BdO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IG1hbmFnZXIub2xkQ3NzUHJvcHNbcHJvcF0gfHwgJyc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWFkZCkge1xuICAgICAgICBtYW5hZ2VyLm9sZENzc1Byb3BzID0ge307XG4gICAgfVxufVxuXG4vKipcbiAqIHRyaWdnZXIgZG9tIGV2ZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gKi9cbmZ1bmN0aW9uIHRyaWdnZXJEb21FdmVudChldmVudCwgZGF0YSkge1xuICAgIHZhciBnZXN0dXJlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBnZXN0dXJlRXZlbnQuaW5pdEV2ZW50KGV2ZW50LCB0cnVlLCB0cnVlKTtcbiAgICBnZXN0dXJlRXZlbnQuZ2VzdHVyZSA9IGRhdGE7XG4gICAgZGF0YS50YXJnZXQuZGlzcGF0Y2hFdmVudChnZXN0dXJlRXZlbnQpO1xufVxuXG5hc3NpZ24oSGFtbWVyLCB7XG4gICAgSU5QVVRfU1RBUlQ6IElOUFVUX1NUQVJULFxuICAgIElOUFVUX01PVkU6IElOUFVUX01PVkUsXG4gICAgSU5QVVRfRU5EOiBJTlBVVF9FTkQsXG4gICAgSU5QVVRfQ0FOQ0VMOiBJTlBVVF9DQU5DRUwsXG5cbiAgICBTVEFURV9QT1NTSUJMRTogU1RBVEVfUE9TU0lCTEUsXG4gICAgU1RBVEVfQkVHQU46IFNUQVRFX0JFR0FOLFxuICAgIFNUQVRFX0NIQU5HRUQ6IFNUQVRFX0NIQU5HRUQsXG4gICAgU1RBVEVfRU5ERUQ6IFNUQVRFX0VOREVELFxuICAgIFNUQVRFX1JFQ09HTklaRUQ6IFNUQVRFX1JFQ09HTklaRUQsXG4gICAgU1RBVEVfQ0FOQ0VMTEVEOiBTVEFURV9DQU5DRUxMRUQsXG4gICAgU1RBVEVfRkFJTEVEOiBTVEFURV9GQUlMRUQsXG5cbiAgICBESVJFQ1RJT05fTk9ORTogRElSRUNUSU9OX05PTkUsXG4gICAgRElSRUNUSU9OX0xFRlQ6IERJUkVDVElPTl9MRUZULFxuICAgIERJUkVDVElPTl9SSUdIVDogRElSRUNUSU9OX1JJR0hULFxuICAgIERJUkVDVElPTl9VUDogRElSRUNUSU9OX1VQLFxuICAgIERJUkVDVElPTl9ET1dOOiBESVJFQ1RJT05fRE9XTixcbiAgICBESVJFQ1RJT05fSE9SSVpPTlRBTDogRElSRUNUSU9OX0hPUklaT05UQUwsXG4gICAgRElSRUNUSU9OX1ZFUlRJQ0FMOiBESVJFQ1RJT05fVkVSVElDQUwsXG4gICAgRElSRUNUSU9OX0FMTDogRElSRUNUSU9OX0FMTCxcblxuICAgIE1hbmFnZXI6IE1hbmFnZXIsXG4gICAgSW5wdXQ6IElucHV0LFxuICAgIFRvdWNoQWN0aW9uOiBUb3VjaEFjdGlvbixcblxuICAgIFRvdWNoSW5wdXQ6IFRvdWNoSW5wdXQsXG4gICAgTW91c2VJbnB1dDogTW91c2VJbnB1dCxcbiAgICBQb2ludGVyRXZlbnRJbnB1dDogUG9pbnRlckV2ZW50SW5wdXQsXG4gICAgVG91Y2hNb3VzZUlucHV0OiBUb3VjaE1vdXNlSW5wdXQsXG4gICAgU2luZ2xlVG91Y2hJbnB1dDogU2luZ2xlVG91Y2hJbnB1dCxcblxuICAgIFJlY29nbml6ZXI6IFJlY29nbml6ZXIsXG4gICAgQXR0clJlY29nbml6ZXI6IEF0dHJSZWNvZ25pemVyLFxuICAgIFRhcDogVGFwUmVjb2duaXplcixcbiAgICBQYW46IFBhblJlY29nbml6ZXIsXG4gICAgU3dpcGU6IFN3aXBlUmVjb2duaXplcixcbiAgICBQaW5jaDogUGluY2hSZWNvZ25pemVyLFxuICAgIFJvdGF0ZTogUm90YXRlUmVjb2duaXplcixcbiAgICBQcmVzczogUHJlc3NSZWNvZ25pemVyLFxuXG4gICAgb246IGFkZEV2ZW50TGlzdGVuZXJzLFxuICAgIG9mZjogcmVtb3ZlRXZlbnRMaXN0ZW5lcnMsXG4gICAgZWFjaDogZWFjaCxcbiAgICBtZXJnZTogbWVyZ2UsXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgYXNzaWduOiBhc3NpZ24sXG4gICAgaW5oZXJpdDogaW5oZXJpdCxcbiAgICBiaW5kRm46IGJpbmRGbixcbiAgICBwcmVmaXhlZDogcHJlZml4ZWRcbn0pO1xuXG4vLyB0aGlzIHByZXZlbnRzIGVycm9ycyB3aGVuIEhhbW1lciBpcyBsb2FkZWQgaW4gdGhlIHByZXNlbmNlIG9mIGFuIEFNRFxuLy8gIHN0eWxlIGxvYWRlciBidXQgYnkgc2NyaXB0IHRhZywgbm90IGJ5IHRoZSBsb2FkZXIuXG52YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6ICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge30pKTsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG5mcmVlR2xvYmFsLkhhbW1lciA9IEhhbW1lcjtcblxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEhhbW1lcjtcbiAgICB9KTtcbn0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gSGFtbWVyO1xufSBlbHNlIHtcbiAgICB3aW5kb3dbZXhwb3J0TmFtZV0gPSBIYW1tZXI7XG59XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsICdIYW1tZXInKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi4vfi9oYW1tZXJqcy9oYW1tZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIlt7XFxuICBcXFwiaWRcXFwiOiAxLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkNyb24gKGpvYiBzY2hlZHVsZXIpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJJdCBjb21lcyBmcm9tIHRoZSBHcmVlayB3b3JkIGZvciB0aW1lLCBjaHJvbm9zICjPh8+Bz4zOvc6/z4IpLiBDaHJvbm9zIGlzIHRoZSBwZXJzb25pZmljYXRpb24gb2YgdGltZSBpbiBlYXJseSBHcmVlayBteXRob2xvZ3kgYW5kIGxpdGVyYXR1cmUuIEhlIGxhdGVyIGFwcGVhcnMgaW4gdGhlIFJlbmFpc3NhbmNlIGFzIEZhdGhlciBUaW1lLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIk9TXFxcIixcXG4gICAgXFxcInVuaXhcXFwiLFxcbiAgICBcXFwibGludXhcXFwiLFxcbiAgICBcXFwib3BlbiBzb3VyY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Dcm9uXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRGFlbW9uXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgdGVybSBjb2luZWQgYnkgcHJvZ3JhbW1lcnMgb2YgTUlUJ3MgUHJvamVjdCBNQUMsIHdhcyBpbnNwaXJlZCBieSB0aGUgcGh5c2ljaXN0IEphbWVzIENsZXJrIE1heHdlbGwncyBkZW1vbi4gSXQgb3JpZ2luYXRlZCBhcyBhbiBpbWFnaW5hcnkgYmVpbmcgZnJvbSBhIHRob3VnaHQgZXhwZXJpbWVudCB0aGF0IGNvbnN0YW50bHkgd29ya3MgaW4gdGhlIGJhY2tncm91bmQgc29ydGluZyBtb2xlY3VsZXMuIEluIEdyZWVrIG15dGhvbG9neSwgYSBkYWVtb24gaXMgYSBzdXBlcm5hdHVyYWwgYmVpbmcgd29ya2luZyBpbiB0aGUgYmFja2dyb3VuZCwgd2l0aCBubyBwYXJ0aWN1bGFyIGJpYXMgdG93YXJkcyBnb29kIG9yIGV2aWwuIFRoZSBkYWVtb24gY29uY2VwdCB3YXMgc3Vic2VxdWVudGx5IGFkb3B0ZWQgYnkgVW5peCBzeXN0ZW1zLCBob3dldmVyLCBCU0QgYW5kIHNvbWUgb2YgaXRzIGRlcml2YXRpdmVzIGhhdmUgdXNlZCBhIENocmlzdGlhbiBpbnRlcnByZXRhdGlvbiBvZiB0aGUgbXl0aG9sb2dpY2FsIGRlYW1vbiBhcyB0aGVpciBtYXNjb3QgcmF0aGVyIHRoYW4gYSBHcmVlayBkYWVtb24uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiT1NcXFwiLFxcbiAgICBcXFwidW5peFxcXCIsXFxuICAgIFxcXCJsaW51eFxcXCIsXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0RhZW1vbl8oY29tcHV0aW5nKSNFdHltb2xvZ3lcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQb2x5bW9ycGhpc21cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkluIHByb2dyYW1taW5nIGxhbmd1YWdlcyBhbmQgdHlwZSB0aGVvcnksIHBvbHltb3JwaGlzbSBpcyB0aGUgcHJvdmlzaW9uIG9mIGEgc2luZ2xlIGludGVyZmFjZSB0byBlbnRpdGllcyBvZiBkaWZmZXJlbnQgdHlwZXMuIFBvbHltb3JwaGlzbSBjb21lcyBmcm9tIHRoZSBncmVlayB3b3JkcywgcG9seXMgKM+Azr/Ou8+Nz4IpLCBtZWFuaW5nIFxcXFxcXFwibXVjaFxcXFxcXFwiIG9yIFxcXFxcXFwibWFueVxcXFxcXFwiIGFuZCBtb3JwaMSTICjOvM6/z4HPhs6uKSwgbWVhbmluZyBcXFxcXFxcImZvcm1cXFxcXFxcIiBvciBcXFxcXFxcInNoYXBlXFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIihBcGFjaGUpIENhc3NhbmRyYVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQXBhY2hlIENhc3NhbmRyYSB3YXMgbmFtZWQgYWZ0ZXIgQ2Fzc2FuZHJhIChHcmVlazogzprOsc+Dz4POrM69zrTPgc6xLCBhbHNvIM6azrHPg86szr3OtM+BzrEpLCBkYXVnaHRlciBvZiBLaW5nIFByaWFtIGFuZCBRdWVlbiBIZWN1YmEgb2YgVHJveS4gQSBjb21tb24gdmVyc2lvbiBvZiBoZXIgc3RvcnkgaXMgdGhhdCBBcG9sbG8gZ2F2ZSBoZXIgdGhlIHBvd2VyIG9mIHByb3BoZWN5IGluIG9yZGVyIHRvIHNlZHVjZSBoZXIsIGJ1dCB3aGVuIHNoZSBzcHVybmVkIGhpcyBhZHZhbmNlcywgaGUgc3BhdCBpbnRvIGhlciBtb3V0aCB0byBlbnN1cmUgdGhhdCBDYWRhbmRyYeKAmXMgcHJvcGhlc2llcyBmZWxsIG9uIGRlYWYgZWFycy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJvcGVuIHNvdXJjZVxcXCIsXFxuICAgIFxcXCJkYXRhYmFzZXNcXFwiLFxcbiAgICBcXFwiYmlnIGRhdGFcXFwiLFxcbiAgICBcXFwibm9TUUxcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUHNldWRvXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgcHJlZml4IHBzZXVkbyBjb21lcyBmcm9tIHBzZXVkZXMgKM+IzrXPhc60zq7PgiwpLCBtZWFuaW5nIFxcXFxcXFwibHlpbmdcXFxcXFxcIiBvciBcXFxcXFxcImZhbHNlXFxcXFxcXCIuIFRoZSB0ZXJtIHJlZmVycyB0byBzb21ldGhpbmcgd2hpY2ggYXBwZWFycywgb24gdGhlIHN1cmZhY2UsIHRvIGJlIG9uZSB0aGluZywgYnV0IGlzIGFjdHVhbGx5IGFub3RoZXIuIFBzZXVkbyBtYXkgY29ubm90ZSBjb2luY2lkZW5jZSwgaW1pdGF0aW9uLCBpbnRlbnRpb25hbCBkZWNlcHRpb24sIG9yIGEgY29tYmluYXRpb24gdGhlcmVvZi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiLFxcbiAgICBcXFwiQ1NTXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlRyb2phbiBob3JzZVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHRlcm0gY29tZXMgZnJvbSB0aGUgQW5jaWVudCBHcmVlayBzdG9yeSBvZiB0aGUgd29vZGVuIGhvcnNlIHRoYXQgd2FzIHVzZWQgYnkgdGhlIEdyZWVrIHRyb29wcyB0byBpbnZhZGUgVHJveSBieSBzdGVhbHRoIGZyb20gd2l0aGluIHRoZSBjaXR54oCZcyB3YWxscy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2NpYWwgZW5naW5lZXJpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJUZWNobm9sb2d5XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUZWNobm9sb2d5IGRlcml2ZXMgZnJvbSB0aGUgR3JlZWsgd29yZHMgdGVjaG5lICjPhM6tz4fOvc63KSwgbWVhbmluZyBhcnQsIHNraWxsIG9yIHNsZWlnaHQgb2YgaGFuZCBhbmQgbG9naWEgKM67zr/Os86vzrEpLCB3aGljaCByZWZlcnMgdG8gYSBjb2xsZWN0aW9uIG9mIHRlY2huaXF1ZXMsIHNraWxscyBhbmQgcHJvY2Vzc2VzIHVzZWQgaW4gdGhlIHByb2R1Y3Rpb24gb2YgZ29vZHMsIHNlcnZpY2VzIG9yIGluIHRoZSBhY2NvbXBsaXNobWVudCBvZiBvYmplY3RpdmVzLiBJdCBpcyBlYXN5IHRvIHNlZSBob3cgdGhlc2UgY29uY2VwdHMgYXBwbHkgdG8gb3VyIGNvbnRlbXBvcmFyeSB1bmRlcnN0YW5kaW5nIG9mIHRlY2hub2xvZ3kuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic2NpZW5jZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogOCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJLZXJiZXJvcyAocHJvdG9jb2wpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgcHJvdG9jb2wgd2FzIG5hbWVkIGFmdGVyIEtlcmJlcm9zIChvciBDZXJiZXJ1cykgaW4gR3JlZWsgbXl0aG9sb2d5LCB0aGUgZmVyb2Npb3VzIHRocmVlLWhlYWRlZCBndWFyZCBkb2cgb2YgSGFkZXMuIEl0cyBkZXNpZ25lcnMgY29uY2VpdmVkIGl0IHByaW1hcmlseSBhcyBhIGNsaWVudOKAk3NlcnZlciBtb2RlbCBhbmQgaXQgcHJvdmlkZXMgbXV0dWFsIGF1dGhlbnRpY2F0aW9uIC0gYm90aCB0aGUgdXNlciBhbmQgdGhlIHNlcnZlciB2ZXJpZnkgZWFjaCBvdGhlcidzIGlkZW50aXR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm5ldHdvcmtpbmdcXFwiLFxcbiAgICBcXFwiYXV0aGVudGljYXRpb24gcHJvdG9jb2xcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDksXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU2tldW9tb3JwaCDigJMgU2tldW9tb3JwaGlzbVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHRlcm0gc2tldW9tb3JwaCBpcyBjb21wb3VuZGVkIGZyb20gdGhlIEdyZWVrOiBza8OpdW9zICjPg866zrXhv6bOv8+CKSwgbWVhbmluZyBcXFxcXFxcImNvbnRhaW5lclxcXFxcXFwiIG9yIFxcXFxcXFwidG9vbFxcXFxcXFwiLCBhbmQgbW9ycGjhuJcgKM68zr/Pgc+Gzq4pLCBcXFxcXFxcInNoYXBlXFxcXFxcXCIuIEEgc2tldW9tb3JwaCBpcyBhIGRlcml2YXRpdmUgb2JqZWN0IHRoYXQgcmV0YWlucyBvcm5hbWVudGFsIGRlc2lnbiBjdWVzIGZyb20gc3RydWN0dXJlcyB0aGF0IHdlcmUgbmVjZXNzYXJ5IGluIHRoZSBvcmlnaW5hbCwgbGlrZSBhIHNvZnR3YXJlIGNhbGVuZGFyIHRoYXQgaW1pdGF0ZXMgdGhlIGFwcGVhcmFuY2Ugb2YgYmluZGluZyBvbiBhIHBhcGVyIGRlc2sgY2FsZW5kYXIuIFNrZXVvbW9ycGggY2FuIGJlIHVzZWQgdG8gZGVzY3JpYmUgY29tcHV0ZXIgYW5kIG1vYmlsZSBpbnRlcmZhY2VzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImRlc2lnblxcXCIsXFxuICAgIFxcXCJpbnRlcmZhY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDEwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkVjbGlwc2VcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB0ZXJtIGVjbGlwc2UgaXMgZGVyaXZlZCBmcm9tIHRoZSBhbmNpZW50IEdyZWVrIMOpa2xlaXBzaXMgKOG8lM66zrvOtc65z4jOuc+CKSwgd2hpY2ggbWVhbnMgXFxcXFxcXCJ0aGUgYWJhbmRvbm1lbnQsIGRvd25mYWxsLCBvciBkYXJrZW5pbmcgb2YgYSBoZWF2ZW5seSBib2R5XFxcXFxcXCIuIEVjbGlwc2Ugc29mdHdhcmUsIGluaXRpYWxseSBkZXZlbG9wZWQgYnkgSUJNLCBpcyBwcmltYXJpbHkgdXNlZCB0byBwcm9kdWNlIEphdmEgYXBwbGljYXRpb25zLiBNYW55IHZlcnNpb25zIG9mIEVjbGlwc2UgaGF2ZSBiZWVuIG5hbWVkIGFmdGVyIGEgY2VsZXN0aWFsIGJvZGllcywgc3VjaCBhcyBKdW5vLCBMdW5hIGFuZCBNYXJzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIklERVxcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJjb2RpbmdcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiLFxcbiAgICBcXFwiSmF2YVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQW5kcm9pZFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHdvcmQgd2FzIGNvaW5lZCBmcm9tIHRoZSBwcmVmaXggYW5kcm8tIGZvciBcXFxcXFxcIm1hblxcXFxcXFwiIG9yIFxcXFxcXFwibWFsZVxcXFxcXFwiICjhvIDOvc60z4EpIGFuZCB0aGUgc3VmZml4IC1vaWQgXFxcXFxcXCJoYXZpbmcgdGhlIGZvcm0gb3IgbGlrZW5lc3Mgb2ZcXFxcXFxcIi4gSXQgaGFzIHJlY2VudGx5IGNvbWUgdG8gcmVmZXIgdG8gYW4gb3BlcmF0aW5nIHN5c3RlbSBlbmRvcnNlZCBieSBHb29nbGUsIHdoaWNoIGhhcyBiZWNvbWUgYSBsZWFkZXIgaW4gdGhlIG1vYmlsZSBkZXZpY2UgbWFya2V0LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIk9TXFxcIixcXG4gICAgXFxcIm1vYmlsZVxcXCIsXFxuICAgIFxcXCJHb29nbGVcXFwiLFxcbiAgICBcXFwib3BlbiBzb3VyY2VcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDEyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkljb25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkFuIGljb24sIGZyb20gdGhlIEdyZWVrIGVpa8WNbiAozrXhvLDOus+Ozr0pIGRlZmluZWQgYXMgXFxcXFxcXCJpbWFnZVxcXFxcXFwiLCBpcyBnZW5lcmFsbHkgYSBmbGF0IHBhbmVsIHBhaW50aW5nIGRlcGljdGluZyByZWxpZ2lvdXMgZmlndXJlcyBvciBzY2VuZXMuIFRoZSB0ZXJtIGhhcyBiZWVuIGFkYXB0ZWQgdG8gcmVmZXIgdG8gYSBncmFwaGljYWwgdXNlciBpbnRlcmZhY2UgKEdVSSksIHdoaWNoIGlzIHRoZSB2aXN1YWwgc3ltYm9sIGlkZW50aWZ5aW5nIGEgY29tbWFuZCwgZmlsZSwgZGlyZWN0b3J5IG9yIGRldmljZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJHVUlcXFwiLFxcbiAgICBcXFwiaW50ZXJmYWNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxMyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQYXJhbWV0ZXJcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlBhcmFtZXRlciBjb21lcyBmcm9tIHRoZSBhbmNpZW50IEdyZWVrIHdvcmRzIFxcXFxcXFwicGFyYVxcXFxcXFwiICjPgM6xz4HOrCksIG1lYW5pbmcgXFxcXFxcXCJiZXNpZGUsIHN1YnNpZGlhcnlcXFxcXFxcIiBhbmQgXFxcXFxcXCJtZXRyb25cXFxcXFxcIiAozrzOrc+Ez4HOv869KSwgbWVhbmluZyBcXFxcXFxcIm1lYXN1cmVcXFxcXFxcIi4gSXQgY29tbW9ubHkgcmVmZXJzIHRvIGEgXFxcXFxcXCJjaGFyYWN0ZXJpc3RpYywgZmVhdHVyZSwgb3IgbWVhc3VyYWJsZSBmYWN0b3IgdGhhdCBjYW4gaGVscCBpbiBkZWZpbmluZyBhIHBhcnRpY3VsYXIgc3lzdGVtXFxcXFxcXCIuIEEgcGFyYW1ldGVyIGlzIGFuIGltcG9ydGFudCBlbGVtZW50IHRvIGNvbnNpZGVyIGluIGV2YWx1YXRpb24gb3IgY29tcHJlaGVuc2lvbiBvZiBhbiBldmVudCwgcHJvamVjdCwgb3Igc2l0dWF0aW9uLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQXN5bW1ldHJpY1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQXN5bW1ldHJpYyBvcmlnaW5hdGVkIGZyb20gdGhlIGFuY2llbnQgR3JlZWsgd29yZCBhc3VtbWV0csOtYSAo4byAz4PPhc68zrzOtc+Ez4HOr86xKSwgbWVhbmluZyBcXFxcXFxcImRpc3Byb3BvcnRpb24sIGRlZm9ybWl0eVxcXFxcXFwiLiBJdCBjYW4gYmUgZm91bmQgaW4gbWFueSBjb21wdXRpbmctcmVsYXRlZCB0b3BpY3Mgc3VjaCBhcyBhc3ltbWV0cmljIGNyeXB0b2dyYXBoeSwgYXN5bW1ldHJpYyBkaWdpdGFsIHN1YnNjcmliZXIgbGluZSAoQURTTCkgaW4gaW50ZXJuZXQgY29ubmVjdGl2aXR5IGFuZCBhc3ltbWV0cmljIG11bHRpcHJvY2Vzc2luZyBpbiBjb21wdXRlciBhcmNoaXRlY3R1cmUuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY3J5cHRvZ3JhcGh5XFxcIixcXG4gICAgXFxcImludGVybmV0IGNvbm5lY3Rpdml0eVxcXCIsXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDE1LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlN5bmNocm9ub3VzIOKAkyBBc3luY2hyb25vdXNcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlN5bmNocm9ub3VzLCBtZWFuaW5nIFxcXFxcXFwiaGFwcGVuaW5nIGF0IHRoZSBzYW1lIHRpbWVcXFxcXFxcIiwgaXMgZnJvbSB0aGUgR3JlZWsgd29yZCBzeW5raHJvbm9zICjPg8+FzrPPh8+Bz4zOvc+Jz4IpLiBJdCBpcyBhIGNvbXBvdW5kIHdvcmQgZm9ybWVkIGJ5IHN5bi0gXFxcXFxcXCJ0b2dldGhlclxcXFxcXFwiIGFuZCAta2hyb25vcyBcXFxcXFxcInRpbWVcXFxcXFxcIi4gQXN5bmNocm9ub3VzIGhhcyB0aGUgb3Bwb3NpdGUgbWVhbmluZy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiY29kaW5nXFxcIixcXG4gICAgXFxcInRlbGVjb21tdW5pY2F0aW9uc1xcXCIsXFxuICAgIFxcXCJzeXN0ZW1zXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAxNixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJBbm9ueW1vdXNcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkFub255bWl0eSBpcyBkZXJpdmVkIGZyb20gdGhlIEdyZWVrIHdvcmQgYW5vbnltaWEgKOG8gM69z4nOvc+FzrzOr86xKSwgZm9yIFxcXFxcXFwid2l0aG91dCBhIG5hbWVcXFxcXFxcIiBvciBcXFxcXFxcIm5hbWVsZXNzbmVzc1xcXFxcXFwiLiBJbiBjb2xsb3F1aWFsIHVzZSwgXFxcXFxcXCJhbm9ueW1vdXNcXFxcXFxcIiBpcyB1c2VkIHRvIGRlc2NyaWJlIHNpdHVhdGlvbnMgd2hlcmUgdGhlIGFjdGluZyBwZXJzb24ncyBuYW1lIGlzIHVua25vd24uIFNvbWUgd3JpdGVycyBoYXZlIGFyZ3VlZCB0aGF0IG5hbWVsZXNzbmVzcywgdGhvdWdoIHRlY2huaWNhbGx5IGNvcnJlY3QsIGRvZXMgbm90IGNhcHR1cmUgd2hhdCBpcyBtb3JlIGNlbnRyYWxseSBhdCBzdGFrZSBpbiBjb250ZXh0cyBvZiBhbm9ueW1pdHkuIFRoZSBpbXBvcnRhbnQgaWRlYSBoZXJlIGlzIHRoYXQgYSBwZXJzb24gYmUgdW5pZGVudGlmaWFibGUsIHVucmVhY2hhYmxlLCBvciB1bnRyYWNlYWJsZS4gQW5vbnltaXR5IGlzIHNlZW4gYXMgYSB0ZWNobmlxdWUsIG9yIGEgd2F5IG9mIHJlYWxpemluZywgY2VydGFpbiBvdGhlciB2YWx1ZXMsIHN1Y2ggYXMgcHJpdmFjeSwgb3IgbGliZXJ0eS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYWNraW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImNvZGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTcsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTW9zYWljICh3ZWIgYnJvd3NlcilcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIk1vc2FpYyBpcyB0aGUgYXJ0IG9mIGNyZWF0aW5nIGltYWdlcyB3aXRoIGFuIGFzc2VtYmxhZ2Ugb2Ygc21hbGwgcGllY2VzIG9mIGNvbG9yZWQgZ2xhc3MsIHN0b25lLCBvciBvdGhlciBtYXRlcmlhbHMuIEl0IGNvbWVzIGZyb20gdGhlIEdyZWVrIHdvcmQgbW91c2Vpb24sICdwbGFjZSBob2x5IHRvIHRoZSBNdXNlcywnIGFuZCBtYXkgaGF2ZSBiZWVuIG9yaWdpbmFsbHkgZGVkaWNhdGVkIHRvIHRoZSBNdXNlcy4gVGhpcyBhcHBsaWVkIGFydCBmb3JtIHNoYXJlcyBhIG5hbWUgd2l0aCBhIGRpc2NvbnRpbnVlZCBlYXJseSB3ZWIgYnJvd3NlciBjcmVkaXRlZCB3aXRoIHBvcHVsYXJpemluZyB0aGUgV29ybGQgV2lkZSBXZWIuIE1vc2FpYyBvciBOQ1NBIE1vc2FpYyB3YXMgbmFtZWQgZm9yIGl0cyBzdXBwb3J0IG9mIG11bHRpcGxlIGludGVybmV0IHByb3RvY29scyBhbmQgd2FzIGFsc28gdGhlIGZpcnN0IGJyb3dzZXIgdG8gZGlzcGxheSBpbWFnZXMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic29mdHdhcmVcXFwiLFxcbiAgICBcXFwiYnJvd3NlclxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiS3ViZXJuZXRlc1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIEdyZWVrIHdvcmQga3ViZXJuZXRlcywgbWVhbnMgXFxcXFxcXCJoZWxtc21hbiBvZiBhIHNoaXAsXFxcXFxcXCIgb3IsIG1vcmUgbWV0YXBob3JpY2FsbHksIFxcXFxcXFwicnVsZXJcXFxcXFxcIiwgd2hpbGUgdGhlIExhdGluIHRyYW5zbGF0aW9uIG9mIFxcXFxcXFwia3ViZXJuZXRlc1xcXFxcXFwiIGlzIFxcXFxcXFwiZ3ViZXJuYXJlXFxcXFxcXCIsIG1lYW5pbmcgXFxcXFxcXCJ0byBydWxlXFxcXFxcXCIuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwib3BlbiBzb3VyY2VcXFwiLFxcbiAgICBcXFwiY2x1c3RlclxcXCIsXFxuICAgIFxcXCJwbGF0Zm9ybVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMTksXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiUHl0aG9uXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJQeXRob24gKM6gz43OuM+Jzr0pLCB0aGUgZHJhZ29uIG9mIERlbHBoaSwgd2FzIGFsd2F5cyByZXByZXNlbnRlZCBpbiBHcmVlayBzY3VscHR1cmUgYW5kIHZhc2UtcGFpbnRpbmdzIGFzIGEgc2VycGVudC4gSGUgcHJlc2lkZWQgYXQgdGhlIERlbHBoaWMgb3JhY2xlLCB3aGljaCB3YXMgdGhvdWdodCB0byBleGlzdCBhdCB0aGUgY2VudGVyIG9mIHRoZSBFYXJ0aC1tb3RoZXIgY3VsdCBvZiBHYWlhLCBcXFxcXFxcIkVhcnRoXFxcXFxcXCIuIEdyZWVrcyBjb25zaWRlcmVkIHRoZSBzaXRlIHRvIGJlIHRoZSBjZW50ZXIgb2YgdGhlIGVhcnRoLCBhbmQgdGhlIGNlbnRlciBvZiBEZWxwaGkgd2FzIHJlcHJlc2VudGVkIGJ5IGEgc3RvbmU7IHRoZSBvbXBoYWxvcywgb3IgbmF2ZWwsIHdoaWNoIFB5dGhvbiBndWFyZGVkLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nIGxhbmd1YWdlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyMCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNZXRlb3JcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSByb290IHdvcmQgbWV0ZW9yIGNvbWVzIGZyb20gdGhlIEdyZWVrIG1ldGXFjXJvcyAozrzOtc+Ezq3Pic+Bzr/PgiksIG1lYW5pbmcgXFxcXFxcXCJoaWdoIGluIHRoZSBhaXJcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJqYXZhc2NyaXB0XFxcIixcXG4gICAgXFxcImZyYW1ld29ya1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiSHlwZXIgKHRleHQsIGxpbmssIGV0Yy4pXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgRW5nbGlzaCBwcmVmaXggaHlwZXItIGNvbWVzIGZyb20gdGhlIEdyZWVrIHByZWZpeCBcXFxcXFxcIuG9kc+AzrXPgS1cXFxcXFxcIiBhbmQgbWVhbnMgXFxcXFxcXCJvdmVyXFxcXFxcXCIgb3IgXFxcXFxcXCJiZXlvbmRcXFxcXFxcIiBhbmQgc2lnbmlmaWVzIHRoZSBvdmVyY29taW5nIG9mIHRoZSBwcmV2aW91cyBjb25zdHJhaW50cy4gSXQgaGFzIHNpbWlsYXIgbGluZ3Vpc3RpYyByb290cyBhcyB0aGUgcHJlZml4IFxcXFxcXFwic3VwZXItXFxcXFxcXCIgd2hpY2ggY29tZXMgZnJvbSBMYXRpbi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJpbnRlcm5ldFxcXCIsXFxuICAgIFxcXCJ3ZWJcXFwiLFxcbiAgICBcXFwibmV0d29ya2luZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiR3JhcGhpY3NcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIlRoZSB3b3JkIGdyYXBoaWNzIGNvbWVzIGZyb20gdGhlIEdyZWVrIGdyYXBoaWtvcyAozrPPgc6xz4bOuc66z4zPgiksIGZvciBcXFxcXFxcInNvbWV0aGluZyB3cml0dGVuXFxcXFxcXCIsIGxpa2UgYW4gYXV0b2dyYXBoLCBmb3IgZXhhbXBsZS4gVGhlIGNvbnRlbXBvcmFyeSBtZWFuaW5nIG9mIHRoZSB3b3JkIGdyYXBoaWNzIGlzIFxcXFxcXFwidmlzdWFsIGltYWdlcyBvciBkZXNpZ25zIG9uIHNvbWUgc3VyZmFjZSwgc3VjaCBhcyBhIHdhbGwsIGNhbnZhcywgc2NyZWVuLCBwYXBlciwgb3Igc3RvbmUgdG8gaW5mb3JtLCBpbGx1c3RyYXRlLCBvciBlbnRlcnRhaW5cXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJHVUlcXFwiLFxcbiAgICBcXFwiaW50ZXJmYWNlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyMyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQZXJpcGhlcmFsXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBIHBlcmlwaGVyYWwgaXMgYSBkZXZpY2UgdGhhdCBpcyB1c2VkIHRvIHB1dCBpbmZvcm1hdGlvbiBpbnRvIG9yIGdldCBpbmZvcm1hdGlvbiBvdXQgb2YgdGhlIGNvbXB1dGVyLiBQZXJpcGhlcmFsIGNvbWVzIGZyb20gdGhlIGFuY2llbnQgR3JlZWsgd29yZHMgcGVyaXBow6lyZWlhICjPgM61z4HOuc+Gzq3Pgc61zrnOsSksIG1lYW5pbmcgXFxcXFxcXCJ0aGUgbGluZSBhcm91bmQgdGhlIGNpcmNsZSwgY2lyY3VtZmVyZW5jZSwgcGFydCBvZiBhIGNpcmNsZSwgYW4gYXJjLCB0aGUgb3V0ZXIgc3VyZmFjZVxcXFxcXFwiIGFuZCBwaMOpcsWNICjPhs6tz4HPiSkgXFxcXFxcXCLigI5iZWFyLCBjYXJyeVxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhcmR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyNCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEZWxwaGlcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkluIG15dGhzLCB0aGUgc2l0ZSBvZiBEZWxwaGkgKM6UzrXOu8+Gzr/Orykgd2FzIGJlbGlldmVkIHRvIGJlIHRoZSBjZW50ZXIgb2YgdGhlIFxcXFxcXFwiRWFydGhcXFxcXFxcIiAoXFxcXFxcXCJHYWlhXFxcXFxcXCIpLCAgZ3JhbmRtb3RoZXIgb2YgWmV1cy4gUGVvcGxlIGNvbnN1bHRlZCB0aGUgRGVscGhpYyBvcmFjbGUgUHl0aGlhIChhbHdheXMgYSB3b21hbiksIG9uIGV2ZXJ5dGhpbmcgZnJvbSBpbXBvcnRhbnQgbWF0dGVycyBvZiBwdWJsaWMgcG9saWN5IHRvIHBlcnNvbmFsIGFmZmFpcnMuIFRoZSBQeXRoaWEgYW5kIHByaWVzdHMgb2YgQXBvbGxvJ3MgdGVtcGxlIGtlcHQgdmVyeSBkZXRhaWxlZCByZWNvcmRzIG9mIHRoZWlyIHZpc2l0b3JzLCBraW5kIG9mIGxpa2UgYW4gYW5jaWVudCBkYXRhYmFzZS4gRGVscGhpIHdhcyBvcmlnaW5hbGx5IG9uZSBvZiBtYW55IGNvZGVuYW1lcyBvZiBhIHByZS1yZWxlYXNlIGRldmVsb3BtZW50IHRvb2wgcHJvamVjdCBhdCBCb3JsYW5kLiBCb3JsYW5kIGRldmVsb3BlciBEYW5ueSBUaG9ycGUgc3VnZ2VzdGVkIERlbHBoaSBhcyBhIGNvZGVuYW1lIGluIHJlZmVyZW5jZSB0byB0aGUgT3JhY2xlIG9mIERlbHBoaS4gT25lIG9mIHRoZSBkZXNpZ24gZ29hbHMgb2YgdGhlIHByb2R1Y3Qgd2FzIHRvIHByb3ZpZGUgZGF0YWJhc2UgY29ubmVjdGl2aXR5IHRvIHByb2dyYW1tZXJzIGFzIGEga2V5IGZlYXR1cmUgYW5kIGEgcG9wdWxhciBkYXRhYmFzZSBwYWNrYWdlIGF0IHRoZSB0aW1lIHdhcyBPcmFjbGUgZGF0YWJhc2U7IGhlbmNlLCBcXFxcXFxcIklmIHlvdSB3YW50IHRvIHRhbGsgdG8gW3RoZV0gT3JhY2xlLCBnbyB0byBEZWxwaGlcXFxcXFxcIi5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZyBsYW5ndWFnZVxcXCIsXFxuICAgIFxcXCJkYXRhYmFzZVxcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJJREVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI1LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkhvbW9pY29uaWNcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkRlcml2ZWQgZnJvbSBcXFxcXFxcImhvbW9cXFxcXFxcIiAoz4zOvM6/KSBtZWFuaW5nIHRoZSBzYW1lIGFuZCBcXFxcXFxcImljb25cXFxcXFxcIiAozrXOuc66z47OvSkgbWVhbmluZyByZXByZXNlbnRhdGlvbi4gQSBwcm9nYW1taW5nIGxhbmd1YWdlIGlzIHNhaWQgdG8gYmUgaG9tb2ljb25pYyB3aGVuIGl0IHNoYXJlcyB0aGUgc2FtZSByZXByZXNlbnRhdGlvbiBmb3IgY29kZSBhbmQgZGF0YS4gQSB3ZWxsLWtub3duIGV4YW1wbGUgaXMgTElTUCwgd2hlcmUgdGhlIHByaW1hcnkgcHJpbWl0aXZlIGRhdGEgc3RydWN0dXJlIGlzIHRoZSBsaXN0IGFuZCBwcm9ncmFtcyBhcmUgd3JpdHRlbiBhcyBsaXN0cy4gQXMgc3VjaCwgY29kZSBjYW4gYmUgbWFuaXB1bGF0ZWQgYXMgaWYgaXQgd2FzIGRhdGEgYW5kIHZpY2UtdmVyc2FcXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQ3J5cHRvZ3JhcGh5XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJEZXJpdmVkIGZyb20ga3J5cHTDs3MgKM66z4HPhc+Az4TPjM+CKSBmb3IgXFxcXFxcXCJoaWRkZW4sIHNlY3JldFxcXFxcXFwiIGFuZCBncmFwaGVpbiAozrPPgc6sz4bOtc65zr0pIGZvciBcXFxcXFxcIndyaXRpbmdcXFxcXFxcIi4gQ3J5cHRvZ3JhcGh5IGlzIHRoZSBwcmFjdGljZSBhbmQgc3R1ZHkgb2YgdGVjaG5pcXVlcyBmb3Igc2VjdXJlIGNvbW11bmljYXRpb24gaW4gdGhlIHByZXNlbmNlIG9mIHRoaXJkIHBhcnRpZXMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic2VjdXJpdHlcXFwiLFxcbiAgICBcXFwiY29tbXVuaWNhdGlvblxcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NyeXB0b2dyYXBoeVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAyNyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTdGVnYW5vZ3JhcGh5XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJDb21iaW5lcyB0aGUgd29yZHMgc3RlZ2Fub3MgKM+Dz4TOtc6zzrHOvc+Mz4IpLCBtZWFuaW5nIFxcXFxcXFwiY292ZXJlZCwgY29uY2VhbGVkLCBvciBwcm90ZWN0ZWRcXFxcXFxcIiwgYW5kIGdyYXBoZWluICjOs8+BzqzPhs61zrnOvSkgbWVhbmluZyBcXFxcXFxcIndyaXRpbmdcXFxcXFxcIi4gU3RlZ2Fub2dyYXBoeSBpcyB0aGUgcHJhY3RpY2Ugb2YgY29uY2VhbGluZyBhIGZpbGUsIG1lc3NhZ2UsIGltYWdlIG9yIHZpZGVvIHdpdGhpbiBhbm90aGVyIGZpbGUuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic2VjdXJpdHlcXFwiLFxcbiAgICBcXFwiY29tbXVuaWNhdGlvblxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0ZWdhbm9ncmFwaHlcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMjgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRW50cm9weVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQ29tZXMgZnJvbSB0aGUgd29yZCB0cm9wZWUgKM+Ez4HOv8+Azq4pIHdoaWNoIG1lYW5zIFxcXFxcXFwidHVybmluZyB0b3dhcmRcXFxcXFxcIiBvciBcXFxcXFxcInRyYW5zZm9ybWF0aW9uXFxcXFxcXCIuIEVudHJvcHkgaXMgdGhlIHJhbmRvbW5lc3MgY29sbGVjdGVkIGJ5IGFuIGFwcGxpY2F0aW9uIGZvciB1c2UgaW4gY3J5cHRvZ3JhcGh5IG9yIG90aGVyIHRoYXQgcmVxdWlyZXMgcmFuZG9tIGRhdGEuIFRoaXMgcmFuZG9tbmVzcyBpcyBvZnRlbiBjb2xsZWN0ZWQgZnJvbSBoYXJkd2FyZSBzb3VyY2VzIHN1Y2ggYXMgbW91c2UgbW92ZW1lbnRzIG9yIHJhbmRvbW5lc3MgZ2VuZXJhdG9ycy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjcnlwdG9ncmFwaHlcXFwiLFxcbiAgICBcXFwic2VjdXJpdHlcXFwiLFxcbiAgICBcXFwiY29tbXVuaWNhdGlvblxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9lbnRyb3B5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDI5LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1vbm9saXRoaWNcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkRlcml2ZXMgZnJvbSBtb27Ds2xpdGhvcyAozrzOv869z4zOu865zrjOv8+CKSB3aGljaCBhY3R1YWxseSBtZWFucyBcXFxcXFxcIm1hZGUgb2Ygb25lIHN0b25lXFxcXFxcXCIuIEEgc29mdHdhcmUgaXMgY2FsbGVkIFxcXFxcXFwibW9ub2xpdGhpY1xcXFxcXFwiIGlmIGl0IGhhcyBhIG1vbm9saXRoaWMgYXJjaGl0ZWN0dXJlLCBpbiB3aGljaCBmdW5jdGlvbmFsbHkgZGlzdGluZ3Vpc2hhYmxlIGFzcGVjdHMgYXJlIG5vdCBzZXBhcmF0ZSBjb21wb25lbnRzIGJ1dCBhcmUgYWxsIGludGVncmF0ZWQuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiLFxcbiAgICBcXFwiYXJjaGl0ZWN0dXJlXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTW9ub2xpdGhcXFwiLFxcbiAgICBcXFwiaHR0cDovL2RpY3Rpb25hcnkucmVmZXJlbmNlLmNvbS9icm93c2UvbW9ub2xpdGhcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzAsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQXV0aGVudGljYXRpb25cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gdGhlIHdvcmQgYXV0aGVudGlrb3MgKM6xz4XOuM61zr3PhM65zrrPjM+CKSBtZWFuaW5nIFxcXFxcXFwicmVhbCwgZ2VudWluZVxcXFxcXFwiLCBpcyB0aGUgYWN0IG9mIGNvbmZpcm1pbmcgdGhlIHRydXRoIG9mIGFuIGF0dHJpYnV0ZSBvZiBhIHNpbmdsZSBwaWVjZSBvZiBkYXRhLCBmb3IgZXhhbXBsZSBhbiBpZGVudGl0eSwgY2xhaW1lZCB0cnVlIGJ5IGFuIGVudGl0eS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCIsXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJzZWN1cml0eVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0F1dGhlbnRpY2F0aW9uXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDMxLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1vdXNlXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJDb21lcyBmcm9tIHRoZSB3b3JkIG1lZXMgKM68z4XPgikgd2hpY2ggaXMgdGhlIGFuY2llbnQgR3JlZWsgbmFtZSBvZiB0aGUgcm9kZW50IG1vdXNlLiBJbiB0aGUgd29ybGQgb2YgY29tcHV0aW5nIGl0J3MgdGhlIG5hbWUgb2YgYSBoYXJkd2FyZSBkZXZpY2UsIHRoZSB3ZWxsLWtub3duIHNvdXJjZSBvZiBpbnB1dCBvZiBhIGNvbXB1dGVyIHN5c3RlbS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwZXJpcGhlcmFsXFxcIixcXG4gICAgXFxcImhhcmR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cDovL2RpY3Rpb25hcnkucmVmZXJlbmNlLmNvbS9icm93c2UvbW91c2VcXFwiLFxcbiAgICBcXFwiaHR0cDovL3d3dy5ldHltb25saW5lLmNvbS9pbmRleC5waHA/dGVybT1tb3VzZVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiAzMixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQYXJhbGxlbGlzbVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSB0aGUgd29yZCBwYXLDoWxsZWxvcyAoz4DOsc+BzqzOu867zrfOu86/z4IpIHdoaWNoIGNvbWJpbmVzIHR3byB3b3JkcyBcXFxcXFxcIs+AzrHPgc6sXFxcXFxcXCIgKyBcXFxcXFxcIs6szrvOu863zrvOv8+CXFxcXFxcXCIgbWVhbmluZyBcXFxcXFxcImFsb25nIGVhY2ggb3RoZXJcXFxcXFxcIi4gUGFyYWxsZWxpc20gaXMgYSB0eXBlIG9mIGNvbXB1dGF0aW9uIGluIHdoaWNoIGNhbGN1bGF0aW9ucyBhcmUgY2FycmllZCBvdXQgc2ltdWx0YW5lb3VzbHkuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvcGFyYWxsZWwjRXR5bW9sb2d5XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDMzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIklzb21vcnBoaXNtXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJJbiBtYXRoZW1hdGljcywgYW4gaXNvbW9ycGhpc20gKGZyb20gdGhlIEFuY2llbnQgR3JlZWs6IOG8tM+Dzr/PgiBpc29zIFxcXFxcXFwiZXF1YWxcXFxcXFxcIiwgYW5kIM68zr/Pgc+Gzq4gbW9ycGhlIFxcXFxcXFwiZm9ybVxcXFxcXFwiIG9yIFxcXFxcXFwic2hhcGVcXFxcXFxcIikgaXMgYSBob21vbW9ycGhpc20gKG9yIG1vcmUgZ2VuZXJhbGx5IGEgbW9ycGhpc20pIHRoYXQgYWRtaXRzIGFuIGludmVyc2UuIFR3byBtYXRoZW1hdGljYWwgb2JqZWN0cyBhcmUgaXNvbW9ycGhpYyBpZiBhbiBpc29tb3JwaGlzbSBleGlzdHMgYmV0d2VlbiB0aGVtLiBJbiB0aGUgZGV2ZWxvcG1lbnQgd29ybGQgdGhlcmUgYXJlIGEgbG90IG9mIGlzb21vcnBoaWMgZnJhbWV3b3JrcyBsYXRlbHlcXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzQsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRXBoZW1lcmFsXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJFcGhlbWVyYWxpdHkgKGZyb20gR3JlZWsgzrXPhs6uzrzOtc+Bzr/PgiDigJMgZXBoZW1lcm9zLCBsaXRlcmFsbHkgXFxcXFxcXCJsYXN0aW5nIG9ubHkgb25lIGRheVxcXFxcXFwiKSBpcyB0aGUgY29uY2VwdCBvZiB0aGluZ3MgYmVpbmcgdHJhbnNpdG9yeSwgZXhpc3Rpbmcgb25seSBicmllZmx5LiBBbiBlcGhlbWVyYWwgcG9ydCBpcyBhIHNob3J0LWxpdmVkIHRyYW5zcG9ydCBwcm90b2NvbCBwb3J0IGZvciBJbnRlcm5ldCBQcm90b2NvbCAoSVApIGNvbW11bmljYXRpb25zIGFsbG9jYXRlZCBhdXRvbWF0aWNhbGx5IGZyb20gYSBwcmVkZWZpbmVkIHJhbmdlIGJ5IHRoZSBJUCBzb2Z0d2FyZVxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm5ldHdvcmtpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDM1LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkN1YmUgKE9MQVApXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJJbiBjb21wdXRlciBzY2llbmNlIGFuZCBCSSBhbiBPTEFQIEN1YmUgaXMgYSBjb2xsZWN0aW9uIG9mIERpbWVuc2lvbnMsIE1lYXN1cmVzIGFuZCBIaWVyYXJjaGllcyB0aGF0IGFyZSBwcmVwcm9jZXNzZWQgYW5kIHN0b3JlZCBpbiBhIHdheSB0aGF0IGFsbG93cyBkYXRhIHRvIGFwcGVhciBpbnN0YW50YW5lb3VzbHkgd2hlbiBhIHVzZXIgbWFrZXMgaGlzL2hlciBhbmFseXNpcy4gVGhlIHRlcm0gY3ViZSBpcyBkZXJpdmVkIGZyb20gXFxcXFxcXCJrdWJvc1xcXFxcXFwiICjOus+NzrLOv8+CKS4gSW4gYW5jaWVudCBncmVlaywga3Vib3Mgd2FzIGEgZGllLiBMYXRlciBvbiB0aGUgbWVhbmluZyBleHBhbmRlZCB0byBtYW55IGN1YmUtc2hhcGVkIG9iamVjdHMuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiYmlnIGRhdGFcXFwiLFxcbiAgICBcXFwiZGF0YWJhc2VzXFxcIixcXG4gICAgXFxcImRhdGEtd2FyZWhvdXNlXFxcIixcXG4gICAgXFxcImJ1c2luZXNzIGludGVsbGlnZW5jZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzYsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU2NoZW1hXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCBzY2hlbWEgY29tZXMgZnJvbSB0aGUgR3JlZWsgd29yZCDPg8+Hzq7OvM6xIChza2jEk21hKSwgd2hpY2ggbWVhbnMgc2hhcGUsIG9yIG1vcmUgZ2VuZXJhbGx5LCBwbGFuLiBBIGRhdGFiYXNlIHNjaGVtYSBkZXNjcmliZXMgdGhlIHN0cnVjdHVyZSBvZiBpdHMgZGF0YWJhc2Ugc3lzdGVtLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImRhdGFiYXNlc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzcsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiKEFkb2JlKSBBY3JvYmF0XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBZG9iZSBBY3JvYmF0IGlzIGEgZmFtaWx5IG9mIGFwcGxpY2F0aW9uIHNvZnR3YXJlIGFuZCBXZWIgc2VydmljZXMgZGV2ZWxvcGVkIGJ5IEFkb2JlIFN5c3RlbXMgdG8gdmlldywgY3JlYXRlLCBtYW5pcHVsYXRlLCBwcmludCBhbmQgbWFuYWdlIGZpbGVzIGluIFBvcnRhYmxlIERvY3VtZW50IEZvcm1hdCAoUERGKS4gQmFzZWQgb24gYW5jaWVudCBHcmVlayB3b3JkIOG8gM66z4HOv86yzqzPhM63z4LigI4gKGFrcm9iw6F0xJNzLCBcXFxcXFxcIndhbGtpbmcgb24gdGlwdG9lLCBjbGltYmluZyBhbG9mdFxcXFxcXFwiKS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzgsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQWxwaGEgLyBCZXRhXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJBIHNvZnR3YXJlIHJlbGVhc2UgbGlmZSBjeWNsZSBjb250YWlucyB0aGUgXFxcXFxcXCJhbHBoYVxcXFxcXFwiIGFuZCBcXFxcXFxcImJldGFcXFxcXFxcIiBzdGFnZXMgb2YgZGV2ZWxvcG1lbnQuIFRoZSBhbHBoYSBwaGFzZSBvZiB0aGUgcmVsZWFzZSBsaWZlIGN5Y2xlIGlzIHRoZSBmaXJzdCBwaGFzZSB0byBiZWdpbiBzb2Z0d2FyZSB0ZXN0aW5nIChhbHBoYSBpcyB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSBHcmVlayBhbHBoYWJldCwgdXNlZCBhbHNvIGFzIHRoZSBudW1iZXIgMSkuIEJldGEsIG5hbWVkIGFmdGVyIHRoZSBzZWNvbmQgbGV0dGVyIG9mIHRoZSBHcmVlayBhbHBoYWJldCwgaXMgdGhlIHNvZnR3YXJlIGRldmVsb3BtZW50IHBoYXNlIGZvbGxvd2luZyBhbHBoYS4gQmV0YSBwaGFzZSBnZW5lcmFsbHkgYmVnaW5zIHdoZW4gdGhlIHNvZnR3YXJlIGlzIGZlYXR1cmUgY29tcGxldGUgYnV0IGxpa2VseSB0byBjb250YWluIGEgbnVtYmVyIG9mIGtub3duIG9yIHVua25vd24gYnVncy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJzb2Z0d2FyZVxcXCIsXFxuICAgIFxcXCJkZXZlbG9wbWVudFxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogMzksXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiRGlzayAob3IgZGlzYylcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkZyb20gQW5jaWVudCBHcmVlayDOtM6vz4POus6/z4IgKGTDrXNrb3MsIFxcXFxcXFwiYSBjaXJjdWxhciBwbGF0ZSBzdWl0ZWQgZm9yIGh1cmxpbmdcXFxcXFxcIiksIGZyb20gzrTOuc66zrXhv5bOvSDigI4oZGlrZcOubiwgXFxcXFxcXCJ0byBodXJsLCB0byBsYXVuY2hcXFxcXFxcIikuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiaGFyZHdhcmVcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlByb2dyYW1cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkEgY29tcHV0ZXIgcHJvZ3JhbSBpcyBhIGNvbGxlY3Rpb24gb2YgaW5zdHJ1Y3Rpb25zIHRoYXQgcGVyZm9ybXMgYSBzcGVjaWZpYyB0YXNrIHdoZW4gZXhlY3V0ZWQgYnkgYSBjb21wdXRlci4gVGhlIHdvcmQgcHJvZ3JhbSBjb21lcyBmcm9tIEFuY2llbnQgR3JlZWsgz4DPgc+MzrPPgc6xzrzOvM6xIOKAjihwcsOzZ3JhbW1hLCBcXFxcXFxcImEgd3JpdHRlbiBwdWJsaWMgbm90aWNlLCBhbiBlZGljdFxcXFxcXFwiKS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJoYXJkd2FyZVxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDEsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiKEdvb2dsZSkgQ2hyb21lIC8gQ2hyb21pdW1cXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIkdvb2dsZSBDaHJvbWUgLyBDaHJvbWl1bSBhcmUgd2ViIGJyb3dzZXJzIGRldmVsb3BlZCBieSBHb29nbGUuIFRoZWlyIG5hbWVzIGFyZSBkZXJpdmVkIGZyb20gdGhlIEdyZWVrIHdvcmQgz4fPgeG/ts68zrEsIGNocsWNbWEsIG1lYW5pbmcgY29sb3IuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwic29mdHdhcmVcXFwiLFxcbiAgICBcXFwiYnJvd3NlclxcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDIsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQXV0b21hdG9uXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCBcXFxcXFxcImF1dG9tYXRvblxcXFxcXFwiIGlzIHRoZSBsYXRpbml6YXRpb24gb2YgdGhlIEdyZWVrIM6x4b2Qz4TPjM68zrHPhM6/zr0sIGF1dG9tYXRvbiwgXFxcXFxcXCJhY3Rpbmcgb2Ygb25lJ3Mgb3duIHdpbGxcXFxcXFxcIi4gQW4gYXV0b21hdG9uIChwbHVyYWw6IGF1dG9tYXRhIG9yIGF1dG9tYXRvbnMpIGlzIGEgc2VsZi1vcGVyYXRpbmcgbWFjaGluZSwgb3IgYSBtYWNoaW5lIG9yIGNvbnRyb2wgbWVjaGFuaXNtIGRlc2lnbmVkIHRvIGZvbGxvdyBhdXRvbWF0aWNhbGx5IGEgcHJlZGV0ZXJtaW5lZCBzZXF1ZW5jZSBvZiBvcGVyYXRpb25zLCBvciByZXNwb25kIHRvIHByZWRldGVybWluZWQgaW5zdHJ1Y3Rpb25zLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhcmR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0MyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJDeWJlclxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiVGhlIHByZWZpeCBjeWJlci0gaXMgZGVyaXZlZCBmcm9tIFxcXFxcXFwiY3liZXJuZXRpYyxcXFxcXFxcIiB3aGljaCBjb21lcyBmcm9tIHRoZSBHcmVlayB3b3JkIM66z4XOss61z4HOvc63z4TOuc66z4zPgiBtZWFuaW5nIHNraWxsZWQgaW4gc3RlZXJpbmcgb3IgZ292ZXJuaW5nLiBJdCBpcyB1c2VkIGluIHRoZSB0ZXJtcyBjeWJlcnNwYWNlLCBjeWJlcnB1bmssIGN5YmVyZ290aCwgY3liZXJsYXcsIGN5YmVyY3JpbWUsIGN5YmVyd2FyZmFyZSwgY3liZXJ0ZXJyb3Jpc20sIGN5YmVyc2V4LCBhbmQgY3liZXJidWxseWluZywgYW1vbmcgb3RoZXJzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImludGVybmV0XFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW11cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0NCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJTeW1mb255ICh3ZWIgYXBwbGljYXRpb24gZnJhbWV3b3JrKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiT3JpZ2luYXRlcyBmcm9tIHRoZSBob21vcGhvbmUgd29yZCBcXFxcXFxcIlN5bXBob255XFxcXFxcXCIgd2hpY2ggaXMgZGVyaXZlZCBmcm9tIHRoZSB3b3JkIM+Dz4XOvM+Gz4nOvc6vzrEgKHN5bXBob25pYSksIG1lYW5pbmcgXFxcXFxcXCJhZ3JlZW1lbnQgLyBjb25jb3JkIG9mIHNvdW5kXFxcXFxcXCIgYW5kIGRlc2NyaWJlcyBhbiBleHRlbmRlZCBtdXNpY2FsIGNvbXBvc2l0aW9uIGluIHdlc3Rlcm4gY2xhc3NpY2FsIG11c2ljLiBTeW1mb255IGlzIGEgXFxcXFxcXCJmdWxsLXN0YWNrXFxcXFxcXCIgUEhQIGZyYW1ld29yayB3aGljaCBwcm9tb3RlcyBiZXN0IHByYWN0aWNlcyBhbmQgY29uc2lzdHMgb2YgYSBzZXQgb2YgZGVjb3VwbGVkIGFuZCByZXVzYWJsZSBsaWJyYXJpZXMuIEl0IGltcGxlbWVudHMgdGhlIE1WQyBhcmNoaXRlY3R1cmFsIGRlc2lnbiBwYXR0ZXJuIGFuZCBtYW55IG90aGVyIGRlc2lnbiBwYXR0ZXJucyBsaWtlIFxcXFxcXFwiRGVwZW5kZW5jeSBJbmplY3Rpb25cXFxcXFxcIiwgXFxcXFxcXCJEYXRhIEFjY2VzcyBPYmplY3RcXFxcXFxcIiBhbmQgXFxcXFxcXCJPYnNlcnZlclxcXFxcXFwiLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIixcXG4gICAgXFxcImZyYW1ld29ya3NcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TeW1waG9ueSNPcmlnaW5zXFxcIixcXG4gICAgXFxcImh0dHA6Ly9zeW1mb255LmNvbS93aGF0LWlzLXN5bWZvbnlcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQXRvbWljaXR5IChkYXRhYmFzZSBzeXN0ZW1zKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiQXRvbWljaXR5IGNvbWVzIGZyb20gdGhlIHdvcmQgzqzPhM6/zrzOv8+CIChhdG9tb3MpIHdoaWNoIG1lYW5zIFxcXFxcXFwiaW5kaXZpc2libGVcXFxcXFxcIi4gSXQncyBvbmUgb2YgdGhlIEFDSUQgcHJvcGVydGllcyB0aGF0IGd1YXJhbnRlZSB0cmFuc2FjdGlvbiByZWxpYWJpbGl0eS4gQXRvbWljaXR5IHJlcXVpcmVzIHRoYXQgZWFjaCB0cmFuc2FjdGlvbiBtdXN0IGJlIFxcXFxcXFwiYWxsIG9yIG5vdGhpbmdcXFxcXFxcIiwgc28gdGhhdCBpZiBvbmUgcGFydCBvZiB0aGUgdHJhbnNhY3Rpb24gZmFpbHMsIHRoZSBlbnRpcmUgdHJhbnNhY3Rpb24gZmFpbHMgdG9vIGFuZCB0aGUgZGF0YWJhc2Ugc3RhdGUgaXMgbGVmdCB1bmNoYW5nZWQuIEFsc28gdGhlIHNlcmllcyBvZiBvcGVyYXRpb25zIGNhbm5vdCBiZSBkaXZpZGVkIGFwYXJ0IGFuZCBleGVjdXRlZCBwYXJ0aWFsbHkgZnJvbSBlYWNoIG90aGVyLCB3aGljaCBtYWtlcyB0aGUgc2VyaWVzIG9mIG9wZXJhdGlvbnMgXFxcXFxcXCJpbmRpdmlzaWJsZVxcXFxcXFwiLCBoZW5jZSB0aGUgbmFtZS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJkYXRhYmFzZXNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BdG9taWNpdHlfKGRhdGFiYXNlX3N5c3RlbXMpXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkRlbHRhIChkaWZmZXJlbmNpbmcpXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCLOlM6tzrvPhM6xIChkZWx0YSkgaXMgYSBsZXR0ZXIgb2YgdGhlIEdyZWVrIGFscGhhYmV0ICjOlCBvciDOtCkuIERlbHRhIGRpZmZlcmVuY2luZyBpcyBhIHdheSBvZiBzdG9yaW5nIG9yIHRyYW5zbWl0dGluZyBmaWxlIGRpZmZlcmVuY2VzIHJhdGhlciB0aGFuIGNvbXBsZXRlIGZpbGVzLiBEZWx0YXMsIGZvciBleGFtcGxlLCBhcmUgdGhlIGNoYW5nZXMgYWZ0ZXIgYSBmdWxsIGJhY2t1cC4gVGhlIGRpZmZlcmVuY2VzIGFyZSBzdG9yZWQgaW4gZmlsZXMgY2FsbGVkIGRlbHRhcy4gQXMgYSBiYWNrdXAgYXBwcm9hY2ggc2F2ZXMgYmFuZHdpZHRoLCByZWR1Y2VzIHJlZHVuZGFuY3kgYW5kIHN0b3JhZ2UuIFlvdSBjYW4gYWxzbyBmaW5kIGRlbHRhcyBvbiB0aGUgZGVwbG95bWVudCBwcm9jZXNzIG9mIGFuIGFwcGxpY2F0aW9uIHRoYXQgcmVxdWlyZXMgZGF0YWJhc2UgY2hhbmdlcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJiYWNrdXBcXFwiLFxcbiAgICBcXFwiZGF0YWJhc2VzXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGVsdGFfZW5jb2RpbmdcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNDcsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiU3ludGF4XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCBzeW50YXggY29tZXMgZnJvbSBBbmNpZW50IEdyZWVrOiDPg8+Nzr3PhM6xzr7Ouc+CIFxcXFxcXFwiY29vcmRpbmF0aW9uXFxcXFxcXCIsIHdoaWNoIGNvbnNpc3RzIG9mIM+Dz43OvSBzeW4sIFxcXFxcXFwidG9nZXRoZXJcXFxcXFxcIiwgYW5kIM+EzqzOvs65z4IgdMOheGlzLCBcXFxcXFxcImFuIG9yZGVyaW5nXFxcXFxcXCIuIEluIGNvbXB1dGVyIHNjaWVuY2UsIHRoZSBzeW50YXggb2YgYSBjb21wdXRlciBsYW5ndWFnZSBpcyB0aGUgc2V0IG9mIHJ1bGVzIHRoYXQgZGVmaW5lcyB0aGUgY29tYmluYXRpb25zIG9mIHN5bWJvbHMgdGhhdCBhcmUgY29uc2lkZXJlZCB0byBiZSBhIGNvcnJlY3RseSBzdHJ1Y3R1cmVkIGRvY3VtZW50IG9yIGZyYWdtZW50IGluIHRoYXQgbGFuZ3VhZ2UuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TeW50YXhfKHByb2dyYW1taW5nX2xhbmd1YWdlcylcXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3ludGF4XFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDQ4LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlNlbWFudGljc1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiU2VtYW50aWNzIChmcm9tIEFuY2llbnQgR3JlZWs6IM+DzrfOvM6xzr3PhM65zrrPjM+CIHPEk21hbnRpa8OzcywgXFxcXFxcXCJzaWduaWZpY2FudFxcXFxcXFwiKSBpcyB0aGUgc3R1ZHkgb2YgbWVhbmluZy4gSW4gY29tcHV0ZXIgc2NpZW5jZSwgdGhlIHRlcm0gc2VtYW50aWNzIHJlZmVycyB0byB0aGUgbWVhbmluZyBvZiBsYW5ndWFnZXMsIGFzIG9wcG9zZWQgdG8gdGhlaXIgZm9ybSAoc3ludGF4KS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NlbWFudGljc1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA0OSxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJLaWxvXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJEZXJpdmVkIGZyb20gYW5jaWVudCBncmVlayDPh86vzrvOuc6/zrkgKGNoaWxpb2kgKSBcXFxcXFxcIm9uZSB0aG91c2FuZFxcXFxcXFwiLiBJbiBjb21wdXRpbmcgaXQgcmVmZXJzIHRvIG11bHRpcGx5aW5nIHRoZSB1bml0IHRvIHdoaWNoIGl0IGlzIGF0dGFjaGVkIGJ5IDJeMTAgKDEwMjQpLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9raWxvLVxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9LaWxvLVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1MCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQYXJhZ29uXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgz4DOsc+BzrHOus6/zr3OrM+JIChwYXJha29uw6HFjSwgXFxcXFxcXCJJIHNoYXJwZW4sIHdoZXRcXFxcXFxcIikuIFRoZSBJbnRlbCBQYXJhZ29uIGlzIGEgZGlzY29udGludWVkIHNlcmllcyBvZiBtYXNzaXZlbHkgcGFyYWxsZWwgc3VwZXJjb21wdXRlcnMgdGhhdCB3YXMgcHJvZHVjZWQgYnkgSW50ZWwgaW4gdGhlIDE5OTBzLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhcmR3YXJlXFxcIixcXG4gICAgXFxcInN1cGVyY29tcHV0ZXJcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvcGFyYWdvblxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnRlbF9QYXJhZ29uXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDUxLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIlRpdGFuXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzqTOuc+EzqzOvSAoVGl0w6FuKSwgYSByYWNlIG9mIGdpYW50IGdvZHMgaW4gR3JlZWsgbXl0aG9sb2d5IHRoYXQgcHJlY2VkZWQgYW5kIHdhcyBvdmVydGhyb3duIGJ5IHRoZSBPbHltcGlhbiBnb2RzLiBUaXRhbiBpcyBhIHN1cGVyY29tcHV0ZXIgYnVpbHQgYnkgQ3JheSBhdCBPYWsgUmlkZ2UgTmF0aW9uYWwgTGFib3JhdG9yeSBmb3IgdXNlIGluIGEgdmFyaWV0eSBvZiBzY2llbmNlIHByb2plY3RzLiBJdCB1c2VzIGdyYXBoaWNzIHByb2Nlc3NpbmcgdW5pdHMgKEdQVXMpIGluIGFkZGl0aW9uIHRvIGNvbnZlbnRpb25hbCBjZW50cmFsIHByb2Nlc3NpbmcgdW5pdHMgKENQVXMpLiBUaXRhbiBpcyBhbHNvIHRoZSBuYW1lIG9mIHRoZSBwcm90b3R5cGUgb2YgdGhlIEF0bGFzIDIgY29tcHV0ZXIgZGV2ZWxvcGVkIGJ5IEZlcnJhbnRpIGFuZCB0aGUgVW5pdmVyc2l0eSBvZiBDYW1icmlkZ2UgTWF0aGVtYXRpY2FsIExhYm9yYXRvcnkgaW4gQ2FtYnJpZGdlLCBFbmdsYW5kLiBGYWNlYm9vayBhbHNvIGdhdmUgdGhlIG5hbWUgVGl0YW4gdG8gaXQncyBtb2Rlcm4gbWVzc2FnaW5nIHN5c3RlbSB1bnZlaWxlZCBpbiAyMDEwLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImhhcmR3YXJlXFxcIixcXG4gICAgXFxcInN1cGVyY29tcHV0ZXJzXFxcIixcXG4gICAgXFxcInNvZnR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL1RpdGFuXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RpdGFuXyhzdXBlcmNvbXB1dGVyKVxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UaXRhbl8oY29tcHV0ZXIpXFxcIixcXG4gICAgXFxcImh0dHA6Ly93d3cuZGlnaXRhbHRyZW5kcy5jb20vY29tcHV0aW5nL2ZhY2Vib29rcy1wcm9qZWN0LXRpdGFuLWlzLXRoZS1tb2Rlcm4tbWVzc2FnaW5nLXN5c3RlbS1idXQtaXMtbm90LWFuLWUtbWFpbC1raWxsZXIvXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDUyLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk9jdGV0XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIGFuY2llbnQgR3JlZWsg4b2AzrrPhM+OIChva3ThuZMpLiBBbiBvY3RldCBpcyBhIHVuaXQgb2YgZGlnaXRhbCBpbmZvcm1hdGlvbiBpbiBjb21wdXRpbmcgYW5kIHRlbGVjb21tdW5pY2F0aW9ucyB0aGF0IGNvbnNpc3RzIG9mIGVpZ2h0IGJpdHMuIFRoZSB0ZXJtIGlzIG9mdGVuIHVzZWQgd2hlbiB0aGUgdGVybSBieXRlIG1pZ2h0IGJlIGFtYmlndW91cywgYXMgaGlzdG9yaWNhbGx5IHRoZXJlIHdhcyBubyBzdGFuZGFyZCBkZWZpbml0aW9uIGZvciB0aGUgc2l6ZSBvZiB0aGUgYnl0ZS4gT2N0ZXRzIGFyZSB1c2VkIGluIHRoZSByZXByZXNlbnRhdGlvbiBvZiBJbnRlcm5ldCBQcm90b2NvbCBjb21wdXRlciBuZXR3b3JrIGFkZHJlc3Nlcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiLFxcbiAgICBcXFwibmV0d29ya2luZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9vY3RvXFxcIixcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL09jdGV0Xyhjb21wdXRpbmcpXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDUzLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk5ldXJhbFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM69zrXhv6bPgc6/zr0gKG5lw7tyb24sIOKAnGEgc2luZXcsIG5lcnZl4oCdKSArIC1hbC4gSW4gY29tcHV0aW5nIGl0IG1lYW5zIHNvbWV0aGluZyB0aGF0IGlzIG1vZGVsbGVkIG9uIHRoZSBhcnJhbmdlbWVudCBvZiBuZXVyb25zIGluIHRoZSBicmFpbi4gTmV1cmFsIG5ldHdvcmsgc29mdHdhcmUgaXMgdXNlZCB0byBzaW11bGF0ZSwgcmVzZWFyY2gsIGRldmVsb3AgYW5kIGFwcGx5IGFydGlmaWNpYWwgbmV1cmFsIG5ldHdvcmtzLCBiaW9sb2dpY2FsIG5ldXJhbCBuZXR3b3JrcyBhbmQsIGluIHNvbWUgY2FzZXMsIGEgd2lkZXIgYXJyYXkgb2YgYWRhcHRpdmUgc3lzdGVtcy5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJhcnRpZmljYWwgaW50ZWxsaWdlbmNlXFxcIixcXG4gICAgXFxcIm5ldHdvcmtpbmdcXFwiLFxcbiAgICBcXFwic29mdHdhcmVcXFwiLFxcbiAgICBcXFwibWFjaGluZSBsZWFybmluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9uZXVyYWxcXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXJ0aWZpY2lhbF9uZXVyYWxfbmV0d29ya1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1NCxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJQcm90b2NvbFxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBCeXphbnRpbmUgR3JlZWsgz4DPgc+Jz4TPjM66zr/Ou867zr/OvSAo4oCcZmlyc3Qgc2hlZXQgZ2x1ZWQgb250byBhIG1hbnVzY3JpcHTigJ0pLCBmcm9tIM+Az4Hhv7bPhM6/z4IgKHByw7R0b3MsIFxcXFxcXFwiZmlyc3RcXFxcXFxcIikgKyDOus+MzrvOu86xIChrw7NsbGEsIFxcXFxcXFwiZ2x1ZVxcXFxcXFwiKS4gSW4gdGVsZWNvbW11bmljYXRpb25zLCBhIGNvbW11bmljYXRpb25zIHByb3RvY29sIGlzIGEgc3lzdGVtIG9mIHJ1bGVzIHRoYXQgYWxsb3cgdHdvIG9yIG1vcmUgZW50aXRpZXMgb2YgYSBjb21tdW5pY2F0aW9ucyBzeXN0ZW0gdG8gdHJhbnNtaXQgaW5mb3JtYXRpb24gdmlhIGFueSBraW5kIG9mIHZhcmlhdGlvbiBvZiBhIHBoeXNpY2FsIHF1YW50aXR5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcIm5ldHdvcmtpbmdcXFwiLFxcbiAgICBcXFwiY29tbXVuaWNhdGlvbnNcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvcHJvdG9jb2xcXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29tbXVuaWNhdGlvbnNfcHJvdG9jb2xcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTUsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiTWV0aG9kXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzrzOrc64zr/OtM6/z4IgKG3DqXRob2RvcywgXFxcXFxcXCJwdXJzdWl0IG9mIGtub3dsZWRnZSwgaW52ZXN0aWdhdGlvbiwgbW9kZSBvZiBwcm9zZWN1dGluZyBzdWNoIGlucXVpcnksIHN5c3RlbVxcXFxcXFwiKS4gSW4gb2JqZWN0IG9yaWVudGVkIHByb2dyYW1taW5nIGl0IGRlc2NyaWJlcyBhIHN1YnJvdXRpbmUgb3IgZnVuY3Rpb24gYmVsb25naW5nIHRvIGEgY2xhc3Mgb3Igb2JqZWN0LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL21ldGhvZFxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1NixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJUb3BvbG9neVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM+Ez4zPgM6/z4IgKHTDs3BvcywgXFxcXFxcXCJwbGFjZSwgbG9jYWxpdHlcXFxcXFxcIikgKyAtKG8pbG9neSAoXFxcXFxcXCJzdHVkeSBvZlxcXFxcXFwiLCBcXFxcXFxcImEgYnJhbmNoIG9mIGtub3dsZWRnZVxcXFxcXFwiKS4gSW4gY29tcHV0aW5nIHRvcG9sb2d5IG1lYW5zIHRoZSBhcnJhbmdlbWVudCBvZiBub2RlcyBpbiBhIGNvbW11bmljYXRpb25zIG5ldHdvcmsuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwibmV0d29ya2luZ1xcXCIsXFxuICAgIFxcXCJoYXJkd2FyZVxcXCIsXFxuICAgIFxcXCJjb21tdW5pY2F0aW9uc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS90b3BvbG9neVxcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA1NyxcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJEaWFnbm9zdGljc1xcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBHcmVlayBkaWFnbsWNc3Rpa29zIOKAmGFibGUgdG8gZGlzdGluZ3Vpc2jigJksIGZyb20gZGlhZ2lnbsWNc2tlaW4g4oCYZGlzdGluZ3Vpc2jigJkuIEFueSB0b29sIG9yIHRlY2huaXF1ZSwgdXN1YWxseSBhIHNwZWNpYWwgcGllY2Ugb2Ygc29mdHdhcmUsIHVzZWQgdG8gZmluZCB0aGUgcm9vdCBvZiBhIGhhcmR3YXJlIG9yIHNvZnR3YXJlIHByb2JsZW0gYW5kIGFzc2lzdCB3aXRoIGl0J3MgZml4aW5nLlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInNvZnR3YXJlXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2RpYWdub3Npc1xcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZGlhZ25vc3RpYyNFbmdsaXNoXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDU4LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkhleGFkZWNpbWFsXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCBoZXhhZGVjaW1hbCBpcyBjb21wb3NlZCBvZiBoZXhhLSwgZGVyaXZlZCBmcm9tIHRoZSBHcmVlayDOrc6+IChoZXgpIGZvciBzaXgsIGFuZCAtZGVjaW1hbCwgZGVyaXZlZCBmcm9tIHRoZSBMYXRpbiBmb3IgdGVudGguIEluIG1hdGhlbWF0aWNzIGFuZCBjb21wdXRpbmcsIGhleGFkZWNpbWFsIChhbHNvIGJhc2UgMTYsIG9yIGhleCkgaXMgYSBwb3NpdGlvbmFsIG51bWVyYWwgc3lzdGVtIHdpdGggYSByYWRpeCwgb3IgYmFzZSwgb2YgMTYuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2hleGEtI0VuZ2xpc2hcXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGV4YWRlY2ltYWxcXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNTksXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiR2lnYVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiRnJvbSBBbmNpZW50IEdyZWVrIM6zzq/Os86xz4Ig4oCOKGfDrWdhcywg4oCcZ2lhbnTigJ0pLiBJbiBjb21wdXRpbmcgaXQgaXMgYSBwcmVmaXggdGhhdCBtZWFucyBtdWx0aXBseWluZyB0aGUgdW5pdCB0byB3aGljaCBpdCBpcyBhdHRhY2hlZCBieSAyXjMwIG9yIDEsMDczLDc0MSw4MjQuXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL2dpZ2EtXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDYwLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1ldGEgKHByb2dyYW1taW5nLCBkYXRhLCBldGMuKVxcXCIsXFxuICBcXFwiZGVzY3JpcHRpb25cXFwiOiBcXFwiTWV0YSAoZnJvbSB0aGUgR3JlZWsgcHJlcG9zaXRpb24gYW5kIHByZWZpeCBtZXRhLSAozrzOtc+EzqwtKSBtZWFuaW5nIFxcXFxcXFwiYWZ0ZXJcXFxcXFxcIiwgb3IgXFxcXFxcXCJiZXlvbmRcXFxcXFxcIikgaXMgYSBwcmVmaXggdXNlZCBpbiBFbmdsaXNoIHRvIGluZGljYXRlIGEgY29uY2VwdCB3aGljaCBpcyBhbiBhYnN0cmFjdGlvbiBmcm9tIGFub3RoZXIgY29uY2VwdCwgdXNlZCB0byBjb21wbGV0ZSBvciBhZGQgdG8gdGhlIGxhdHRlci5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiLFxcbiAgICBcXFwicHJvZ3JhbW1pbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NZXRhXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDYxLFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkxhbWJkYSAoZnVuY3Rpb24pXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJMYW1iZGEgY2FsY3VsdXMgKGFsc28gd3JpdHRlbiBhcyDOuy1jYWxjdWx1cykgaXMgYSBmb3JtYWwgc3lzdGVtIGluIG1hdGhlbWF0aWNhbCBsb2dpYyBmb3IgZXhwcmVzc2luZyBjb21wdXRhdGlvbiBiYXNlZCBvbiBmdW5jdGlvbiBhYnN0cmFjdGlvbiBhbmQgYXBwbGljYXRpb24gdXNpbmcgdmFyaWFibGUgYmluZGluZyBhbmQgc3Vic3RpdHV0aW9uLiBJdCB3YXMgZmlyc3QgaW50cm9kdWNlZCBieSBtYXRoZW1hdGljaWFuIEFsb256byBDaHVyY2ggaW4gdGhlIDE5MzBzIGFzIHBhcnQgb2YgYW4gaW52ZXN0aWdhdGlvbiBpbnRvIHRoZSBmb3VuZGF0aW9ucyBvZiBtYXRoZW1hdGljcy4gTGFtYmRhIGNhbGN1bHVzIGlzIGEgdW5pdmVyc2FsIG1vZGVsIG9mIGNvbXB1dGF0aW9uIGVxdWl2YWxlbnQgdG8gYSBUdXJpbmcgbWFjaGluZSAoQ2h1cmNoLVR1cmluZyB0aGVzaXMsIDE5MzcpLiBJdHMgbmFtZXNha2UsIEdyZWVrIGxldHRlciBsYW1iZGEgKM67KSwgaXMgdXNlZCBpbiBsYW1iZGEgdGVybXMgKGFsc28gY2FsbGVkIGxhbWJkYSBleHByZXNzaW9ucykgdG8gZGVub3RlIGJpbmRpbmcgYSB2YXJpYWJsZSBpbiBhIGZ1bmN0aW9uLiBMYW1iZGEgY2FsY3VsdXMgbWF5IGJlIHR5cGVkIGFuZCB1bnR5cGVkLiBJbiB0eXBlZCBsYW1iZGEgY2FsY3VsdXMgZnVuY3Rpb25zIGNhbiBiZSBhcHBsaWVkIG9ubHkgaWYgdGhleSBhcmUgY2FwYWJsZSBvZiBhY2NlcHRpbmcgdGhlIGdpdmVuIGlucHV0J3MgXFxcXFxcXCJ0eXBlXFxcXFxcXCIgb2YgZGF0YS4gTGFtYmRhIGNhbGN1bHVzIGhhcyBhcHBsaWNhdGlvbnMgaW4gbWFueSBkaWZmZXJlbnQgYXJlYXMgaW4gbWF0aGVtYXRpY3MsIHBoaWxvc29waHksIGxpbmd1aXN0aWNzIGFuZCBjb21wdXRlciBzY2llbmNlLiBMYW1iZGEgY2FsY3VsdXMgaGFzIHBsYXllZCBhbiBpbXBvcnRhbnQgcm9sZSBpbiB0aGUgZGV2ZWxvcG1lbnQgb2YgdGhlIHRoZW9yeSBvZiBwcm9ncmFtbWluZyBsYW5ndWFnZXMuIEZ1bmN0aW9uYWwgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzIGltcGxlbWVudCB0aGUgbGFtYmRhIGNhbGN1bHVzLiBMYW1iZGEgY2FsY3VsdXMgYWxzbyBpcyBhIGN1cnJlbnQgcmVzZWFyY2ggdG9waWMgaW4gQ2F0ZWdvcnkgdGhlb3J5LlxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xhbWJkYV9jYWxjdWx1c1xcXCJcXG4gIF1cXG59LCB7XFxuICBcXFwiaWRcXFwiOiA2MixcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCJNZWdhXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzrzOrc6zzrHPgiDigI4obcOpZ2FzLCDigJxncmVhdCwgbGFyZ2UsIG1pZ2h0eeKAnSkuIEluIGNvbXB1dGluZywgbWVnYSBtYXkgc29tZXRpbWVzIGRlbm90ZSAxLDA0OCw1NzYgKDJeMjApIG9mIGluZm9ybWF0aW9uIHVuaXRzIChleGFtcGxlOiBhIG1lZ2FieXRlLCBhIG1lZ2F3b3JkKSwgYnV0IGRlbm90ZXMgMTAwMDAwMCAoMTBeNikgdW5pdHMgb2Ygb3RoZXIgcXVhbnRpdGllcywgZm9yIGV4YW1wbGUsIHRyYW5zZmVyIHJhdGVzOiAxbWVnYWJpdC9zID0gMTAwMDAwMGJpdC9zLiBUaGUgcHJlZml4IG1lYmkgaGFzIGJlZW4gc3VnZ2VzdGVkIGFzIGEgcHJlZml4IGZvciAyXjIwIHRvIGF2b2lkIGFtYmlndWl0eS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJjb21wdXRpbmdcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvbWVnYS1cXFwiLFxcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWVnYS1cXFwiXFxuICBdXFxufSwge1xcbiAgXFxcImlkXFxcIjogNjMsXFxuICBcXFwidGl0bGVcXFwiOiBcXFwiQW5hbG9nXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsg4byAzr3OrM67zr/Os86/z4Ig4oCOKGFuw6Fsb2dvcywg4oCccHJvcG9ydGlvbmF0ZeKAnSkuQSBkZXZpY2Ugb3Igc3lzdGVtIGluIHdoaWNoIHRoZSB2YWx1ZSBvZiBhIGRhdGEgaXRlbSAoc3VjaCBhcyB0aW1lKSBpcyByZXByZXNlbnRlZCBieSBhIGNvbnRpbnVvdXMobHkpIHZhcmlhYmxlIHBoeXNpY2FsIHF1YW50aXR5IHRoYXQgY2FuIGJlIG1lYXN1cmVkIChzdWNoIGFzIHRoZSBzaGFkb3cgb2YgYSBzdW5kaWFsKVxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcInRlY2hub2xvZ3lcXFwiXFxuICBdLFxcbiAgXFxcInJlZmVyZW5jZXNcXFwiOiBbXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvYW5hbG9nXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDY0LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkR5bmFtaWNcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcImZyb20gQW5jaWVudCBHcmVlayDOtM+Fzr3Osc68zrnOus+Mz4Ig4oCOKGR1bmFtaWvDs3MsIOKAnHBvd2VyZnVs4oCdKS5JbiBjb21wdXRpbmcgaXQgbWVhbnMgc29tZXRoaW5nIHRoYXQgaXMgaGFwcGVuaW5nIGF0IHJ1bnRpbWUgaW5zdGVhZCBvZiBiZWluZyBwcmVkZXRlcm1pbmVkIGF0IGNvbXBpbGUgdGltZS5Gb3IgaW5zdGFuY2U6IGR5bmFtaWMgYWxsb2NhdGlvbiwgZHluYW1pYyBJUCBhZGRyZXNzZXMsIHRoZSBkeW5hbWljIHJlc2l6aW5nIG9mIGFuIGFycmF5XFxcXG5cXFxcblxcXCIsXFxuICBcXFwiY2F0ZWdvcmllc1xcXCI6IFtcXG4gICAgXFxcImNvbXB1dGluZ1xcXCIsXFxuICAgIFxcXCJwcm9ncmFtbWluZ1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9keW5hbWljXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDY1LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIk1hY3JvXFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJGcm9tIEFuY2llbnQgR3JlZWsgzrzOsc66z4HPjM+CIOKAjihtYWtyw7NzLCDigJxsb25n4oCdKS4gQSBjb21wYXJhdGl2ZWx5IGh1bWFuLWZyaWVuZGx5IGFiYnJldmlhdGlvbiBvZiBjb21wbGljYXRlZCBpbnB1dCB0byBhIGNvbXB1dGVyIHByb2dyYW0uXFxcIixcXG4gIFxcXCJjYXRlZ29yaWVzXFxcIjogW1xcbiAgICBcXFwiY29tcHV0aW5nXFxcIixcXG4gICAgXFxcInByb2dyYW1taW5nXFxcIlxcbiAgXSxcXG4gIFxcXCJyZWZlcmVuY2VzXFxcIjogW1xcbiAgICBcXFwiaHR0cHM6Ly9lbi53aWt0aW9uYXJ5Lm9yZy93aWtpL21hY3JvXFxcIlxcbiAgXVxcbn0sIHtcXG4gIFxcXCJpZFxcXCI6IDY2LFxcbiAgXFxcInRpdGxlXFxcIjogXFxcIkV0aGVybmV0XFxcIixcXG4gIFxcXCJkZXNjcmlwdGlvblxcXCI6IFxcXCJUaGUgd29yZCBFdGhlcm5ldCBpcyBhIGNvbXBvdW5kIHdvcmQgZm9ybWVkIGJ5IGpvaW5pbmcgJ0V0aGVyJyBhbmQgJ05ldCcuICBUaGUgd29yZCAnRXRoZXInIGlzIGJhc2VkIG9uIEFuY2llbnQgR3JlZWsgd29yZCDOseG8sM64zq7PgSDigI4oYWl0aOG4l3IsIOKAnHVwcGVyIGFpcuKAnSkuSW4gY29tcHV0aW5nIGl0IHJlZmVycyB0byBhIHNldCBvZiBuZXR3b3JrIGNhYmxpbmcgYW5kIG5ldHdvcmsgYWNjZXNzIChDU01BL0NEKSBwcm90b2NvbCBzdGFuZGFyZHMgZm9yIGJ1cyB0b3BvbG9neSBjb21wdXRlciBuZXR3b3JrcyBpbnZlbnRlZCBieSBYZXJveCBidXQgbm93IGNvbnRyb2xsZWQgYnkgdGhlIDgwMi4zIHN1YmNvbW1pdHRlZSBvZiB0aGUgSUVFRS5cXFwiLFxcbiAgXFxcImNhdGVnb3JpZXNcXFwiOiBbXFxuICAgIFxcXCJuZXR3b3Jrc1xcXCJcXG4gIF0sXFxuICBcXFwicmVmZXJlbmNlc1xcXCI6IFtcXG4gICAgXFxcImh0dHBzOi8vZW4ud2lrdGlvbmFyeS5vcmcvd2lraS9FdGhlcm5ldFxcXCIsXFxuICAgIFxcXCJodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvZXRoZXJcXFwiXFxuICBdXFxufV1cXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi4vfi9ncmVlay1pbi10ZWNoL2RhdGEvZW50cmllcy5qc29uXG4gKiogbW9kdWxlIGlkID0gMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8aGVhZGVyPlxcblxcdDxkaXYgY2xhc3M9XFxcImNvbnRhaW5lclxcXCI+XFxuXFx0XFx0PGgxPjwlPSB0aXRsZSAlPjwvaDE+XFxuXFx0XFx0PHVsIGNsYXNzPVxcXCJzb2NpYWwtbGlua3NcXFwiPlxcblxcdFxcdFxcdDxsaT5cXG5cXHRcXHRcXHRcXHQ8YSBjbGFzcz1cXFwiaW9uLXNvY2lhbC10d2l0dGVyXFxcIlxcblxcdFxcdFxcdFxcdFxcdGhyZWY9XFxcImh0dHBzOi8vdHdpdHRlci5jb20vaW50ZW50L3R3ZWV0P1xcblxcdFxcdFxcdFxcdFxcdHRleHQ9RGlkJTIweW91JTIwa25vdyUyMHRoYXQlMjAlMjI8JT0gdGl0bGUgJT4lMjIlMjBpcyUyMGElMjBncmVlayUyMHdvcmQlM0YlMjAmYW1wO1xcblxcdFxcdFxcdFxcdFxcdHVybD1odHRwJTNBJTJGJTJGZ3JlZWtpbnRlY2guY29tJTJGPCU9IGlkICU+JTJGPCU9IHVybEZyaWVuZGx5VGl0bGUgJT4mYW1wO1xcblxcdFxcdFxcdFxcdFxcdGhhc2h0YWdzPWdyZWVraW50ZWNoXFxcIlxcblxcdFxcdFxcdFxcdFxcdGRhdGEtY291bnQ9XFxcIm5vbmVcXFwiPlxcblxcdFxcdFxcdFxcdDwvYT5cXG5cXHRcXHRcXHQ8L2xpPlxcblxcdFxcdFxcdDxsaT5cXG5cXHRcXHRcXHRcXHQ8YSBjbGFzcz1cXFwiaW9uLXNvY2lhbC1mYWNlYm9va1xcXCJcXG5cXHRcXHRcXHRcXHRcXHRocmVmPVxcXCJodHRwczovL3d3dy5mYWNlYm9vay5jb20vc2hhcmVyL3NoYXJlci5waHBcXG5cXHRcXHRcXHRcXHRcXHQ/dT1odHRwOi8vZ3JlZWtpbnRlY2guY29tLyNlbnRyeS88JT0gaWQgJT4vPCU9IHVybEZyaWVuZGx5VGl0bGUgJT5cXFwiPlxcblxcdFxcdFxcdFxcdDwvYT5cXG5cXHRcXHRcXHQ8L2xpPlxcblxcdFxcdDwvdWw+XFxuXFx0PC9kaXY+XFxuPC9oZWFkZXI+XFxuPHA+PCU9IGRlc2NyaXB0aW9uICU+PC9wPlxcbjxmb290ZXI+XFxuXFx0PHAgY2xhc3M9XFxcInRhZ3MtY29weVxcXCI+VGFnczogPC9wPlxcblxcdDx1bCBjbGFzcz1cXFwidGFnc1xcXCI+XFxuXFx0XFx0PCUgXy5lYWNoKGNhdGVnb3JpZXMsIGZ1bmN0aW9uKGNhdGVnb3J5KSB7ICU+XFxuXFx0XFx0XFx0PGxpPjwlPSBjYXRlZ29yeSAlPjwvbGk+XFxuXFx0XFx0PCUgfSkgJT5cXG5cXHQ8L3VsPlxcblxcblxcdDwlIGlmICghXy5pc0VtcHR5KHJlZmVyZW5jZXMpKSB7ICU+XFxuXFx0XFx0PHAgY2xhc3M9XFxcInJlZmVyZW5jZXMtY29weVxcXCI+UmVmZXJlbmNlczogPC9wPlxcblxcdFxcdDx1bCBjbGFzcz1cXFwicmVmZXJlbmNlc1xcXCI+XFxuXFx0XFx0XFx0PCUgXy5lYWNoKHJlZmVyZW5jZXMsIGZ1bmN0aW9uKHJlZmVyZW5jZSkgeyAlPlxcblxcdFxcdFxcdFxcdDxsaT48YSBocmVmPVxcXCI8JT0gcmVmZXJlbmNlICU+XFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+PCU9IHJlZmVyZW5jZSAlPjwvYT48L2xpPlxcblxcdFxcdFxcdDwlIH0pICU+XFxuXFx0XFx0PC91bD5cXG5cXHQ8JSB9ICU+XFxuPC9mb290ZXI+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vdGVtcGxhdGVzL2VudHJ5Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHVuaXF1ZVJhbmRvbSA9IHJlcXVpcmUoJ3VuaXF1ZS1yYW5kb20nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJyKSB7XG5cdHZhciByYW5kID0gdW5pcXVlUmFuZG9tKDAsIGFyci5sZW5ndGggLSAxKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBhcnJbcmFuZCgpXTtcblx0fTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL34vdW5pcXVlLXJhbmRvbS1hcnJheS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtaW4sIG1heCkge1xuXHR2YXIgcHJldjtcblx0cmV0dXJuIGZ1bmN0aW9uIHJhbmQoKSB7XG5cdFx0dmFyIG51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbik7XG5cdFx0cmV0dXJuIHByZXYgPSBudW0gPT09IHByZXYgJiYgbWluICE9PSBtYXggPyByYW5kKCkgOiBudW07XG5cdH07XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuLi9+L3VuaXF1ZS1yYW5kb20vaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==